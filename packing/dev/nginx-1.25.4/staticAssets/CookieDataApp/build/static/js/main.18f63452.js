/*! For license information please see main.18f63452.js.LICENSE.txt */
(()=>{var e={9267:e=>{window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=6)}([function(e,t,n){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(e){var o=n(2),r=setTimeout;function i(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,s._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var o;try{o=n(e._value)}catch(e){return void c(t.promise,e)}l(t.promise,o)}else(1===e._state?l:c)(t.promise,e._value)}))):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof s)return e._state=3,e._value=t,void d(e);if("function"==typeof n)return void h((o=n,r=t,function(){o.apply(r,arguments)}),e)}e._state=1,e._value=t,d(e)}catch(t){c(e,t)}var o,r}function c(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&s._immediateFn((function(){e._handled||s._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1;try{e((function(e){n||(n=!0,l(t,e))}),(function(e){n||(n=!0,c(t,e))}))}catch(e){if(n)return;n=!0,c(t,e)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var n=new this.constructor(i);return a(this,new u(e,t,n)),n},s.prototype.finally=o.a,s.all=function(e){return new s((function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);var r=o.length;function i(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(t){i(e,t)}),n)}o[e]=s,0==--r&&t(o)}catch(e){n(e)}}for(var s=0;s<o.length;s++)i(s,o[s])}))},s.resolve=function(e){return e&&"object"==typeof e&&e.constructor===s?e:new s((function(t){t(e)}))},s.reject=function(e){return new s((function(t,n){n(e)}))},s.race=function(e){return new s((function(t,n){for(var o=0,r=e.length;o<r;o++)e[o].then(t,n)}))},s._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){r(e,0)},s._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.a=s}).call(this,n(5).setImmediate)},function(e,t,n){"use strict";t.a=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4);var r,i,s,a,l,c,d,u=n(8),h=(i=function(e){return new Promise((function(t,n){e=a(e),(e=l(e)).beforeSend&&e.beforeSend();var o=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open(e.method,e.url),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(e.headers).forEach((function(t){var n=e.headers[t];o.setRequestHeader(t,n)}));var r=e.ratio;o.upload.addEventListener("progress",(function(t){var n=Math.round(t.loaded/t.total*100),o=Math.ceil(n*r/100);e.progress(Math.min(o,100))}),!1),o.addEventListener("progress",(function(t){var n=Math.round(t.loaded/t.total*100),o=Math.ceil(n*(100-r)/100)+r;e.progress(Math.min(o,100))}),!1),o.onreadystatechange=function(){if(4===o.readyState){var e=o.response;try{e=JSON.parse(e)}catch(e){}var r=u.parseHeaders(o.getAllResponseHeaders()),i={body:e,code:o.status,headers:r};d(o.status)?t(i):n(i)}},o.send(e.data)}))},s=function(e){return e.method="POST",i(e)},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.url&&"string"!=typeof e.url)throw new Error("Url must be a string");if(e.url=e.url||"",e.method&&"string"!=typeof e.method)throw new Error("`method` must be a string or null");if(e.method=e.method?e.method.toUpperCase():"GET",e.headers&&"object"!==o(e.headers))throw new Error("`headers` must be an object or null");if(e.headers=e.headers||{},e.type&&("string"!=typeof e.type||!Object.values(r).includes(e.type)))throw new Error("`type` must be taken from module's \xabcontentType\xbb library");if(e.progress&&"function"!=typeof e.progress)throw new Error("`progress` must be a function or null");if(e.progress=e.progress||function(e){},e.beforeSend=e.beforeSend||function(e){},e.ratio&&"number"!=typeof e.ratio)throw new Error("`ratio` must be a number");if(e.ratio<0||e.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(e.ratio=e.ratio||90,e.accept&&"string"!=typeof e.accept)throw new Error("`accept` must be a string with a list of allowed mime-types");if(e.accept=e.accept||"*/*",e.multiple&&"boolean"!=typeof e.multiple)throw new Error("`multiple` must be a true or false");if(e.multiple=e.multiple||!1,e.fieldName&&"string"!=typeof e.fieldName)throw new Error("`fieldName` must be a string");return e.fieldName=e.fieldName||"files",e},l=function(e){switch(e.method){case"GET":var t=c(e.data,r.URLENCODED);delete e.data,e.url=/\?/.test(e.url)?e.url+"&"+t:e.url+"?"+t;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var n=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type||r.JSON}(e);(u.isFormData(e.data)||u.isFormElement(e.data))&&(n=r.FORM),e.data=c(e.data,n),n!==h.contentType.FORM&&(e.headers["content-type"]=n)}return e},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case r.URLENCODED:return u.urlEncode(e);case r.JSON:return u.jsonEncode(e);case r.FORM:return u.formEncode(e);default:return e}},d=function(e){return e>=200&&e<300},{contentType:r={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:i,get:function(e){return e.method="GET",i(e)},post:s,transport:function(e){return e=a(e),u.selectFiles(e).then((function(t){for(var n=new FormData,o=0;o<t.length;o++)n.append(e.fieldName,t[o],t[o].name);u.isObject(e.data)&&Object.keys(e.data).forEach((function(t){var o=e.data[t];n.append(t,o)}));var r=e.beforeSend;return e.beforeSend=function(){return r(t)},e.data=n,s(e)}))},selectFiles:function(e){return delete(e=a(e)).beforeSend,u.selectFiles(e)}});e.exports=h},function(e,t,n){"use strict";n.r(t);var o=n(1);window.Promise=window.Promise||o.a},function(e,t,n){(function(e){var o=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(r.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(6),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var o,r,i,s,a,l=1,c={},d=!1,u=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),o=function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){f(e.data)},o=function(e){i.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,o=function(e){var t=u.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):o=function(e){setTimeout(f,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[l]=r,o(l),l++},h.clearImmediate=p}function p(e){delete c[e]}function f(e){if(d)setTimeout(f,0,e);else{var t=c[e];if(t){d=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),d=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(0),n(7))},function(e,t){var n,o,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var l,c=[],d=!1,u=-1;function h(){d&&l&&(d=!1,l.length?c=l.concat(c):u=-1,c.length&&p())}function p(){if(!d){var e=a(h);d=!0;for(var t=c.length;t;){for(l=c,c=[];++u<t;)l&&l[u].run();u=-1,t=c.length}l=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||d||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=n(9);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t;return(t=[{key:"urlEncode",value:function(e){return r(e)}},{key:"jsonEncode",value:function(e){return JSON.stringify(e)}},{key:"formEncode",value:function(e){if(this.isFormData(e))return e;if(this.isFormElement(e))return new FormData(e);if(this.isObject(e)){var t=new FormData;return Object.keys(e).forEach((function(n){var o=e[n];t.append(n,o)})),t}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{key:"isFormData",value:function(e){return e instanceof FormData}},{key:"isFormElement",value:function(e){return e instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){var o=document.createElement("INPUT");o.type="file",e.multiple&&o.setAttribute("multiple","multiple"),e.accept&&o.setAttribute("accept",e.accept),o.style.display="none",document.body.appendChild(o),o.addEventListener("change",(function(e){var n=e.target.files;t(n),document.body.removeChild(o)}),!1),o.click()}))}},{key:"parseHeaders",value:function(e){var t=e.trim().split(/[\r\n]+/),n={};return t.forEach((function(e){var t=e.split(": "),o=t.shift(),r=t.join(": ");o&&(n[o]=r)})),n}}])&&o(e,t),e}()},function(e,t){var n=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},o=function(e,t,r,i){return t=t||null,r=r||"&",i=i||null,e?function(e){for(var t=new Array,n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}(Object.keys(e).map((function(s){var a,l,c=s;if(i&&(c=i+"["+c+"]"),"object"==typeof e[s]&&null!==e[s])a=o(e[s],null,r,c);else{t&&(l=c,c=!isNaN(parseFloat(l))&&isFinite(l)?t+Number(c):c);var d=e[s];d=(d=0===(d=!1===(d=!0===d?"1":d)?"0":d)?"0":d)||"",a=n(c)+"="+n(d)}return a}))).join(r).replace(/[!'()*]/g,""):""};e.exports=o}])},function(e,t,n){var o=n(2);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(4)(o,r),o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".cdx-attaches {\n  --color-line: #EFF0F1;\n  --color-bg: #fff;\n  --color-bg-secondary: #F8F8F8;\n  --color-bg-secondary--hover: #f2f2f2;\n  --color-text-secondary: #707684;\n}\n\n  .cdx-attaches--with-file {\n    display: flex;\n    align-items: center;\n    padding: 10px 12px;\n    border: 1px solid var(--color-line);\n    border-radius: 7px;\n    background: var(--color-bg);\n  }\n\n  .cdx-attaches--with-file .cdx-attaches__file-info {\n      display: grid;\n      grid-gap: 4px;\n      max-width: calc(100% - 80px);\n      margin: auto 0;\n      flex-grow: 2;\n    }\n\n  .cdx-attaches--with-file .cdx-attaches__download-button {\n      display: flex;\n      align-items: center;\n      background: var(--color-bg-secondary);\n      padding: 6px;\n      border-radius: 6px;\n      margin: auto 0 auto auto;\n    }\n\n  .cdx-attaches--with-file .cdx-attaches__download-button:hover {\n        background: var(--color-bg-secondary--hover);\n      }\n\n  .cdx-attaches--with-file .cdx-attaches__download-button svg {\n        width: 20px;\n        height: 20px;\n        fill: none;\n      }\n\n  .cdx-attaches--with-file .cdx-attaches__file-icon {\n      position: relative;\n    }\n\n  .cdx-attaches--with-file .cdx-attaches__file-icon-background {\n        background-color: #333;\n\n        width: 27px;\n        height: 30px;\n        margin-right: 12px;\n        border-radius: 8px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n  @supports(-webkit-mask-box-image: url('')){\n\n  .cdx-attaches--with-file .cdx-attaches__file-icon-background {\n          border-radius: 0;\n          -webkit-mask-box-image: url(\"data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 10.3872C0 1.83334 1.83334 0 10.3872 0H13.6128C22.1667 0 24 1.83334 24 10.3872V13.6128C24 22.1667 22.1667 24 13.6128 24H10.3872C1.83334 24 0 22.1667 0 13.6128V10.3872Z' fill='black'/%3E%3C/svg%3E%0A\") 48% 41% 37.9% 53.3%\n      };\n        }\n\n  .cdx-attaches--with-file .cdx-attaches__file-icon-label {\n        position: absolute;\n        left: 3px;\n        top: 11px;\n        background: inherit;\n        text-transform: uppercase;\n        line-height: 1em;\n        color: #fff;\n        padding: 1px 2px;\n        border-radius: 3px;\n        font-size: 10px;\n        font-weight: bold;\n        /* box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.22); */\n        font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;\n        letter-spacing: 0.02em;\n      }\n\n  .cdx-attaches--with-file .cdx-attaches__file-icon svg {\n        width: 20px;\n        height: 20px;\n      }\n\n  .cdx-attaches--with-file .cdx-attaches__file-icon path {\n        stroke: #fff;\n      }\n\n  .cdx-attaches--with-file .cdx-attaches__size {\n      color: var(--color-text-secondary);\n      font-size: 12px;\n      line-height: 1em;\n    }\n\n  .cdx-attaches--with-file .cdx-attaches__size::after {\n        content: attr(data-size);\n        margin-left: 0.2em;\n      }\n\n  .cdx-attaches--with-file .cdx-attaches__title {\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      outline: none;\n      max-width: 90%;\n      font-size: 14px;\n      font-weight: 500;\n      line-height: 1em;\n    }\n\n  .cdx-attaches--with-file .cdx-attaches__title:empty::before {\n      content: attr(data-placeholder);\n      color: #7b7e89;\n    }\n\n  .cdx-attaches--loading .cdx-attaches__title,\n    .cdx-attaches--loading .cdx-attaches__file-icon,\n    .cdx-attaches--loading .cdx-attaches__size,\n    .cdx-attaches--loading .cdx-attaches__download-button,\n    .cdx-attaches--loading .cdx-attaches__button {\n      opacity: 0;\n      font-size: 0;\n    }\n\n  .cdx-attaches__button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #000;\n    border-radius: 7px;\n    font-weight: 500;\n  }\n\n  .cdx-attaches__button svg {\n      margin-top: 0;\n    }\n",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o=e[1]||"",r=e[3];if(!r)return o;if(t&&"function"==typeof btoa){var i=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),s=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[o].concat(s).concat([i]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var s=e[r];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var o,r,i={},s=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),a=function(e){return document.querySelector(e)},l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=a.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),c=null,d=0,u=[],h=n(5);function p(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=i[o.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](o.parts[s]);for(;s<o.parts.length;s++)r.parts.push(b(o.parts[s],t))}else{var a=[];for(s=0;s<o.parts.length;s++)a.push(b(o.parts[s],t));i[o.id]={id:o.id,refs:1,parts:a}}}}function f(e,t){for(var n=[],o={},r=0;r<e.length;r++){var i=e[r],s=t.base?i[0]+t.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};o[s]?o[s].parts.push(a):n.push(o[s]={id:s,parts:[a]})}return n}function g(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=u[u.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=l(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),y(t,e.attrs),g(e,t),t}function y(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function b(e,t){var n,o,r,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var s=d++;n=c||(c=v(t)),o=S.bind(null,n,s,!1),r=S.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),g(e,t),t}(t),o=k.bind(null,n,t),r=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),o=_.bind(null,n),r=function(){m(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return p(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var s=n[r];(a=i[s.id]).refs--,o.push(a)}for(e&&p(f(e,t),t),r=0;r<o.length;r++){var a;if(0===(a=o[r]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete i[a.id]}}}};var w,x=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function S(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=x(t,r);else{var i=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function _(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function k(e,t,n){var o=n.css,r=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||i)&&(o=h(o)),r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var s=new Blob([o],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p})),n(1);var o=n(0),r=n.n(o);function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=function(){function e(t){var n=t.config,o=t.onUpload,r=t.onError;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=n,this.onUpload=o,this.onError=r}var t,n,o;return t=e,(n=[{key:"uploadSelectedFile",value:function(e){var t=this,n=e.onPreview;(this.config.uploader&&"function"==typeof this.config.uploader.uploadByFile?r.a.selectFiles({accept:this.config.types}).then((function(e){n();var o,r=t.config.uploader.uploadByFile(e[0]);return(o=r)&&"function"==typeof o.then||console.warn("Custom uploader method uploadByFile should return a Promise"),r})):r.a.transport({url:this.config.endpoint,accept:this.config.types,beforeSend:function(){return n()},fieldName:this.config.field,headers:this.config.additionalRequestHeaders||{}}).then((function(e){return e.body}))).then((function(e){t.onUpload(e)})).catch((function(e){var n=e.body,o=n&&n.message?n.message:t.config.errorMessage;t.onError(o)}))}}])&&i(t.prototype,n),o&&i(t,o),e}();function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=document.createElement(e);for(var i in Array.isArray(n)?(t=r.classList).add.apply(t,a(n)):n&&r.classList.add(n),o)r[i]=o[i];return r}function d(e){return 0===Object.keys(e).length}const u='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.3236 8.43554L9.49533 12.1908C9.13119 12.5505 8.93118 13.043 8.9393 13.5598C8.94741 14.0767 9.163 14.5757 9.53862 14.947C9.91424 15.3182 10.4191 15.5314 10.9422 15.5397C11.4653 15.5479 11.9637 15.3504 12.3279 14.9908L16.1562 11.2355C16.8845 10.5161 17.2845 9.53123 17.2682 8.4975C17.252 7.46376 16.8208 6.46583 16.0696 5.72324C15.3184 4.98066 14.3086 4.55425 13.2624 4.53782C12.2162 4.52138 11.2193 4.91627 10.4911 5.63562L6.66277 9.39093C5.57035 10.4699 4.97032 11.9473 4.99467 13.4979C5.01903 15.0485 5.66578 16.5454 6.79264 17.6592C7.9195 18.7731 9.43417 19.4127 11.0034 19.4374C12.5727 19.462 14.068 18.8697 15.1604 17.7907L18.9887 14.0354"/></svg>';function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var p=function(){function e(t){var n=this,o=t.data,r=t.config,i=t.api,a=t.readOnly;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=i,this.readOnly=a,this.nodes={wrapper:null,button:null,title:null},this._data={file:{},title:""},this.config={endpoint:r.endpoint||"",field:r.field||"file",types:r.types||"*",buttonText:r.buttonText||"Select file to upload",errorMessage:r.errorMessage||"File upload failed",uploader:r.uploader||void 0,additionalRequestHeaders:r.additionalRequestHeaders||{}},void 0===o||d(o)||(this.data=o),this.uploader=new s({config:this.config,onUpload:function(e){return n.onUpload(e)},onError:function(e){return n.uploadingFailed(e)}}),this.enableFileUpload=this.enableFileUpload.bind(this)}var t,n,o;return t=e,o=[{key:"toolbox",get:function(){return{icon:u,title:"Attachment"}}},{key:"isReadOnlySupported",get:function(){return!0}}],(n=[{key:"CSS",get:function(){return{baseClass:this.api.styles.block,apiButton:this.api.styles.button,loader:this.api.styles.loader,wrapper:"cdx-attaches",wrapperWithFile:"cdx-attaches--with-file",wrapperLoading:"cdx-attaches--loading",button:"cdx-attaches__button",title:"cdx-attaches__title",size:"cdx-attaches__size",downloadButton:"cdx-attaches__download-button",fileInfo:"cdx-attaches__file-info",fileIcon:"cdx-attaches__file-icon",fileIconBackground:"cdx-attaches__file-icon-background",fileIconLabel:"cdx-attaches__file-icon-label"}}},{key:"EXTENSIONS",get:function(){return{doc:"#1483E9",docx:"#1483E9",odt:"#1483E9",pdf:"#DB2F2F",rtf:"#744FDC",tex:"#5a5a5b",txt:"#5a5a5b",pptx:"#E35200",ppt:"#E35200",mp3:"#eab456",mp4:"#f676a6",xls:"#11AE3D",html:"#2988f0",htm:"#2988f0",png:"#AA2284",jpg:"#D13359",jpeg:"#D13359",gif:"#f6af76",zip:"#4f566f",rar:"#4f566f",exe:"#e26f6f",svg:"#bf5252",key:"#00B2FF",sketch:"#FFC700",ai:"#FB601D",psd:"#388ae5",dmg:"#e26f6f",json:"#2988f0",csv:"#11AE3D"}}},{key:"validate",value:function(e){return!d(e.file)}},{key:"save",value:function(e){if(this.pluginHasData()){var t=e.querySelector(".".concat(this.CSS.title));t&&Object.assign(this.data,{title:t.innerHTML})}return this.data}},{key:"render",value:function(){var e=c("div",this.CSS.baseClass);return this.nodes.wrapper=c("div",this.CSS.wrapper),this.pluginHasData()?this.showFileData():this.prepareUploadButton(),e.appendChild(this.nodes.wrapper),e}},{key:"prepareUploadButton",value:function(){this.nodes.button=c("div",[this.CSS.apiButton,this.CSS.button]),this.nodes.button.innerHTML="".concat(u," ").concat(this.config.buttonText),this.readOnly||this.nodes.button.addEventListener("click",this.enableFileUpload),this.nodes.wrapper.appendChild(this.nodes.button)}},{key:"appendCallback",value:function(){this.nodes.button.click()}},{key:"pluginHasData",value:function(){return""!==this.data.title||Object.values(this.data.file).some((function(e){return void 0!==e}))}},{key:"enableFileUpload",value:function(){var e=this;this.uploader.uploadSelectedFile({onPreview:function(){e.nodes.wrapper.classList.add(e.CSS.wrapperLoading,e.CSS.loader)}})}},{key:"onUpload",value:function(e){var t,n,o,r=e;try{r.success&&void 0!==r.file&&!d(r.file)?(this.data={file:r.file,title:r.file.title||""},this.nodes.button.remove(),this.showFileData(),t=this.nodes.title,n=document.createRange(),o=window.getSelection(),n.selectNodeContents(t),n.collapse(!1),o.removeAllRanges(),o.addRange(n),this.removeLoader()):this.uploadingFailed(this.config.errorMessage)}catch(e){console.error("Attaches tool error:",e),this.uploadingFailed(this.config.errorMessage)}this.api.blocks.getBlockByIndex(this.api.blocks.getCurrentBlockIndex()).dispatchChange()}},{key:"appendFileIcon",value:function(e){var t,n=e.extension||(void 0===(t=e.name)?"":t.split(".").pop()),o=this.EXTENSIONS[n],r=c("div",this.CSS.fileIcon),i=c("div",this.CSS.fileIconBackground);if(o&&(i.style.backgroundColor=o),r.appendChild(i),n){var s=n;n.length>4&&(s=n.substring(0,4)+"\u2026");var a=c("div",this.CSS.fileIconLabel,{textContent:s,title:n});o&&(a.style.backgroundColor=o),r.appendChild(a)}else i.innerHTML=u;this.nodes.wrapper.appendChild(r)}},{key:"removeLoader",value:function(){var e=this;setTimeout((function(){return e.nodes.wrapper.classList.remove(e.CSS.wrapperLoading,e.CSS.loader)}),500)}},{key:"showFileData",value:function(){this.nodes.wrapper.classList.add(this.CSS.wrapperWithFile);var e=this.data,t=e.file,n=e.title;this.appendFileIcon(t);var o=c("div",this.CSS.fileInfo);if(this.nodes.title=c("div",this.CSS.title,{contentEditable:!1===this.readOnly}),this.nodes.title.dataset.placeholder=this.api.i18n.t("File title"),this.nodes.title.textContent=n||"",o.appendChild(this.nodes.title),t.size){var r,i,s=c("div",this.CSS.size);Math.log10(+t.size)>=6?(r="MiB",i=t.size/Math.pow(2,20)):(r="KiB",i=t.size/Math.pow(2,10)),s.textContent=i.toFixed(1),s.setAttribute("data-size",r),o.appendChild(s)}if(this.nodes.wrapper.appendChild(o),void 0!==t.url){var a=c("a",this.CSS.downloadButton,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',href:t.url,target:"_blank",rel:"nofollow noindex noreferrer",download:t.title});this.nodes.wrapper.appendChild(a)}}},{key:"uploadingFailed",value:function(e){this.api.notifier.show({message:e,style:"error"}),this.removeLoader()}},{key:"data",get:function(){return this._data},set:function(e){var t=e.file,n=e.title;this._data={file:t,title:n}}}])&&h(t.prototype,n),o&&h(t,o),e}()}]).default},9892:e=>{var t;self,t=()=>(()=>{var e={800:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,".cdx-alert{position:relative;padding:10px;border-radius:5px;margin-bottom:10px}.cdx-alert-primary{background-color:#ebf8ff;border:1px solid #4299e1;color:#2b6cb0}.cdx-alert-secondary{background-color:#f7fafc;border:1px solid #cbd5e0;color:#222731}.cdx-alert-info{background-color:#e6fdff;border:1px solid #4cd4ce;color:#00727c}.cdx-alert-success{background-color:#f0fff4;border:1px solid #68d391;color:#2f855a}.cdx-alert-warning{background-color:#fffaf0;border:1px solid #ed8936;color:#c05621}.cdx-alert-danger{background-color:#fff5f5;border:1px solid #fc8181;color:#c53030}.cdx-alert-light{background-color:#fff;border:1px solid #edf2f7;color:#1a202c}.cdx-alert-dark{background-color:#2d3748;border:1px solid #1a202c;color:#d3d3d3}.cdx-alert-align-left{text-align:left}.cdx-alert-align-center{text-align:center}.cdx-alert-align-right{text-align:right}.cdx-alert__message{outline:none}.cdx-alert [contentEditable=true][data-placeholder]::before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:normal;opacity:0}.cdx-alert [contentEditable=true][data-placeholder]:empty::before{opacity:1}.cdx-alert [contentEditable=true][data-placeholder]:empty:focus::before{opacity:0}.ce-popover__item[data-item-name=alert-primary] .ce-popover__item-icon svg #background{fill:#ebf8ff;stroke:#4299e1}.ce-popover__item[data-item-name=alert-primary] .ce-popover__item-icon svg #content{fill:#2b6cb0}.ce-popover__item[data-item-name=alert-secondary] .ce-popover__item-icon svg #background{fill:#f7fafc;stroke:#cbd5e0}.ce-popover__item[data-item-name=alert-secondary] .ce-popover__item-icon svg #content{fill:#222731}.ce-popover__item[data-item-name=alert-info] .ce-popover__item-icon svg #background{fill:#e6fdff;stroke:#4cd4ce}.ce-popover__item[data-item-name=alert-info] .ce-popover__item-icon svg #content{fill:#00727c}.ce-popover__item[data-item-name=alert-success] .ce-popover__item-icon svg #background{fill:#f0fff4;stroke:#68d391}.ce-popover__item[data-item-name=alert-success] .ce-popover__item-icon svg #content{fill:#2f855a}.ce-popover__item[data-item-name=alert-warning] .ce-popover__item-icon svg #background{fill:#fffaf0;stroke:#ed8936}.ce-popover__item[data-item-name=alert-warning] .ce-popover__item-icon svg #content{fill:#c05621}.ce-popover__item[data-item-name=alert-danger] .ce-popover__item-icon svg #background{fill:#fff5f5;stroke:#fc8181}.ce-popover__item[data-item-name=alert-danger] .ce-popover__item-icon svg #content{fill:#c53030}.ce-popover__item[data-item-name=alert-light] .ce-popover__item-icon svg #background{fill:#fff;stroke:#edf2f7}.ce-popover__item[data-item-name=alert-light] .ce-popover__item-icon svg #content{fill:#1a202c}.ce-popover__item[data-item-name=alert-dark] .ce-popover__item-icon svg #background{fill:#2d3748;stroke:#1a202c}.ce-popover__item[data-item-name=alert-dark] .ce-popover__item-icon svg #content{fill:#d3d3d3}",""]);const a=s},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);o&&s[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},620:(e,t,n)=>{"use strict";var o=n(379),r=n.n(o),i=n(795),s=n.n(i),a=n(569),l=n.n(a),c=n(565),d=n.n(c),u=n(216),h=n.n(u),p=n(589),f=n.n(p),g=n(800),m={};m.styleTagTransform=f(),m.setAttributes=d(),m.insert=l().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=h(),r()(g.Z,m),g.Z&&g.Z.locals&&g.Z.locals},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var i={},s=[],a=0;a<e.length;a++){var l=e[a],c=o.base?l[0]+o.base:l[0],d=i[c]||0,u="".concat(c," ").concat(d);i[c]=d+1;var h=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=r(p,o);o.byIndex=a,t.splice(a,0,{identifier:u,updater:f,references:1})}s.push(u)}return s}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=n(i[s]);t[a].references--}for(var l=o(e,r),c=0;c<i.length;c++){var d=n(i[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},749:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 7L6 7"></path><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 17H6"></path><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 12L8 12"></path></svg>'},454:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 7L5 7"></path><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 17H5"></path><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13 12L5 12"></path></svg>'},431:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 7L7 7"></path><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17H7"></path><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 12L11 12"></path></svg>'},654:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5 12a7 7 90 0 1 14 0 7 7 90 0 1-14 0zM12 9.02v-.01M12 12v3"></path></svg>'},338:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect id="background" width="18" height="18" x="3" y="3" fill="none" stroke="currentColor" stroke-width="1" rx="4"></rect><path id="content" fill="currentColor" stroke-width="0" d="m15.579 16.9-1.042-2.25H10.15L9.11 16.9H7.113L11.697 7h1.266l4.612 9.9h-1.998Zm-4.613-4.05h2.755l-1.377-2.953-1.379 2.953Z"></path></svg>'}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var o={};return(()=>{"use strict";n.d(o,{default:()=>w});var e=n(654),t=n.n(e),r=n(338),i=n.n(r),s=n(454),a=n.n(s),l=n(749),c=n.n(l),d=n(431),u=n.n(d);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,b(o.key),o)}}function b(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==h(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===h(t)?t:String(t)}n(620).toString();var w=function(){function e(t){var n=t.data,o=t.config,r=t.api,i=t.readOnly;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=r,this.defaultType=o.defaultType||e.DEFAULT_TYPE,this.defaultAlign=o.defaultAlign||e.DEFAULT_ALIGN_TYPE,this.messagePlaceholder=o.messagePlaceholder||e.DEFAULT_MESSAGE_PLACEHOLDER,this.data={type:e.ALERT_TYPES.includes(n.type)?n.type:this.defaultType,align:e.ALIGN_TYPES.includes(n.align)?n.align:this.defaultAlign,message:n.message||""},this.container=void 0,this.readOnly=i}var n,o,r;return n=e,o=[{key:"CSS",get:function(){return{wrapper:"cdx-alert",wrapperForType:function(e){return"cdx-alert-".concat(e)},wrapperForAlignType:function(e){return"cdx-alert-align-".concat(e)},message:"cdx-alert__message"}}},{key:"render",value:function(){var e=[this.CSS.wrapper,this.CSS.wrapperForType(this.data.type),this.CSS.wrapperForAlignType(this.data.align)];this.container=this._make("div",e);var t=this._make("div",[this.CSS.message],{contentEditable:!this.readOnly,innerHTML:this.data.message});return t.dataset.placeholder=this.messagePlaceholder,this.container.appendChild(t),this.container}},{key:"renderSettings",value:function(){var t=this,n=e.ALERT_TYPES.map((function(e){return{icon:i(),name:"alert-".concat(e),label:t._getFormattedName(e),toggle:"alert",isActive:t.data.type===e,onActivate:function(){t._changeAlertType(e)}}})),o=e.ALIGN_TYPES.map((function(e){return{icon:"left"==e?a():"center"==e?c():"right"==e?u():IconAlign_left,name:"align-".concat(e),label:t._getFormattedName(e),toggle:"align",isActive:t.data.align===e,onActivate:function(){t._changeAlignType(e)}}}));return[].concat(m(n),m(o))}},{key:"_getFormattedName",value:function(e){return this.api.i18n.t(e.charAt(0).toUpperCase()+e.slice(1))}},{key:"_changeAlertType",value:function(t){var n=this;this.data.type=t,e.ALERT_TYPES.forEach((function(e){var o=n.CSS.wrapperForType(e);n.container.classList.remove(o),t===e&&n.container.classList.add(o)}))}},{key:"_changeAlignType",value:function(t){var n=this;this.data.align=t,e.ALIGN_TYPES.forEach((function(e){var o=n.CSS.wrapperForAlignType(e);n.container.classList.remove(o),t===e&&n.container.classList.add(o)}))}},{key:"save",value:function(e){var t=e.querySelector(".".concat(this.CSS.message));return f(f({},this.data),{},{message:t.innerHTML})}},{key:"_make",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=document.createElement(e);for(var i in Array.isArray(n)?(t=r.classList).add.apply(t,m(n)):n&&r.classList.add(n),o)r[i]=o[i];return r}},{key:"onPaste",value:function(e){var t=e.detail.data;this.data={type:this.defaultType,message:t.innerHTML||""}}}],r=[{key:"toolbox",get:function(){return{icon:t(),title:"Alert"}}},{key:"enableLineBreaks",get:function(){return!0}},{key:"DEFAULT_TYPE",get:function(){return"info"}},{key:"DEFAULT_ALIGN_TYPE",get:function(){return"left"}},{key:"DEFAULT_MESSAGE_PLACEHOLDER",get:function(){return"Type here..."}},{key:"ALERT_TYPES",get:function(){return["primary","secondary","info","success","warning","danger","light","dark"]}},{key:"ALIGN_TYPES",get:function(){return["left","center","right"]}},{key:"isReadOnlySupported",get:function(){return!0}},{key:"conversionConfig",get:function(){var e=this;return{export:function(e){return e.message},import:function(t){return{message:t,type:e.DEFAULT_TYPE,alignType:e.DEFAULT_ALIGN_TYPE}}}}},{key:"sanitize",get:function(){return{message:!0,type:!1,alignType:!1}}}],o&&y(n.prototype,o),r&&y(n,r),Object.defineProperty(n,"prototype",{writable:!1}),e}()})(),o.default})(),e.exports=t()},2702:e=>{window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n(1).toString();var i=function(){function e(t){var n=t.data,o=t.config,r=t.api,i=t.readOnly;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=r,this.readOnly=i,this._CSS={block:this.api.styles.block,settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive,wrapper:"ce-header",alignment:{left:"ce-header--left",center:"ce-header--center",right:"ce-header--right",justify:"ce-header--justify"}},this.CSS={baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive},this.inlineToolSettings=[{name:"left",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m10 23h28c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m10 45h28c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/></svg>'},{name:"center",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m46 23c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m46 45c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/></svg>'},{name:"right",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 19h-28c-1.104 0-2 .896-2 2s.896 2 2 2h28c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 41h-28c-1.104 0-2 .896-2 2s.896 2 2 2h28c1.104 0 2-.896 2-2s-.896-2-2-2z"/></svg>'},{name:"justify",icon:'<svg viewBox="0 0 64 64" width="20" height="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"></path><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"></path><path d="M 52.867 19 L 10.914 19 C 9.26 19 7.918 19.896 7.918 21 C 7.918 22.104 9.26 23 10.914 23 L 52.867 23 C 54.522 23 55.863 22.104 55.863 21 C 55.863 19.896 54.522 19 52.867 19 Z" style=""></path><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"></path><path d="M 52.779 41 L 11.113 41 C 9.469 41 8.136 41.896 8.136 43 C 8.136 44.104 9.469 45 11.113 45 L 52.779 45 C 54.421 45 55.754 44.104 55.754 43 C 55.754 41.896 54.421 41 52.779 41 Z" style=""></path></svg>'}],this._settings=o,this._data=this.normalizeData(n),this.settingsButtons=[],this._element=this.getTag()}var t,i,s;return t=e,s=[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{level:!1,text:{}}}},{key:"isReadOnlySupported",get:function(){return!0}},{key:"pasteConfig",get:function(){return{tags:["H1","H2","H3","H4","H5","H6"]}}},{key:"ALIGNMENTS",get:function(){return{left:"left",center:"center",right:"right",justify:"justify"}}},{key:"DEFAULT_ALIGNMENT",get:function(){return e.ALIGNMENTS.left}},{key:"toolbox",get:function(){return{icon:n(6).default,title:"Heading"}}}],(i=[{key:"normalizeData",value:function(t){var n={};return"object"!==o(t)&&(t={}),n.text=t.text||"",n.level=parseInt(t.level)||this.defaultLevel.number,n.alignment=t.alignment||e.DEFAULT_ALIGNMENT,n}},{key:"render",value:function(){return this._element}},{key:"_toggleTune",value:function(e){this._data.alignment=e}},{key:"renderSettings",value:function(){var e=this,t=document.createElement("DIV");return this.levels.length<=1||(this.inlineToolSettings.map((function(n){var o=document.createElement("div");return o.classList.add(e._CSS.settingsButton),o.innerHTML=n.icon,o.classList.toggle(e.CSS.settingsButtonActive,n.name===e.data.alignment),t.appendChild(o),o})).forEach((function(t,n,o){t.addEventListener("click",(function(){e._toggleTune(e.inlineToolSettings[n].name),o.forEach((function(t,n){var o=e.inlineToolSettings[n].name;t.classList.toggle(e.CSS.settingsButtonActive,o===e.data.alignment),e._element.classList.toggle(e._CSS.alignment[o],o===e.data.alignment)}))}))})),this.levels.forEach((function(n){var o=document.createElement("SPAN");o.classList.add(e._CSS.settingsButton),e.currentLevel.number===n.number&&o.classList.add(e._CSS.settingsButtonActive),o.innerHTML=n.svg,o.dataset.level=n.number,o.addEventListener("click",(function(){e.setLevel(n.number)})),t.appendChild(o),e.settingsButtons.push(o)}))),t}},{key:"setLevel",value:function(e){var t=this;this.data={level:e,text:this.data.text,alignment:this.data.alignment},this.settingsButtons.forEach((function(n){n.classList.toggle(t._CSS.settingsButtonActive,parseInt(n.dataset.level)===e)}))}},{key:"merge",value:function(e){var t={text:this.data.text+e.text,level:this.data.level,alignment:this.data.alignment};this.data=t}},{key:"validate",value:function(e){return""!==e.text.trim()}},{key:"save",value:function(e){return{text:e.innerHTML,level:this.currentLevel.number,alignment:this.data.alignment}}},{key:"getTag",value:function(){var e=document.createElement(this.currentLevel.tag);return e.innerHTML=this._data.text||"",e.classList.add(this._CSS.wrapper,this._CSS.alignment[this._data.alignment]),e.contentEditable=this.readOnly?"false":"true",e.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),e}},{key:"onPaste",value:function(t){var n=t.detail.data,o=this.defaultLevel.number;switch(n.tagName){case"H1":o=1;break;case"H2":o=2;break;case"H3":o=3;break;case"H4":o=4;break;case"H5":o=5;break;case"H6":o=6}this._settings.levels&&(o=this._settings.levels.reduce((function(e,t){return Math.abs(t-o)<Math.abs(e-o)?t:e}))),this.data={level:o,text:n.innerHTML,alignment:this._settings.defaultAlignment||e.DEFAULT_ALIGNMENT}}},{key:"data",get:function(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data.alignment=this._data.alignment||this._settings.defaultAlignment||e.DEFAULT_ALIGNMENT,this._data},set:function(e){if(this._data=this.normalizeData(e),void 0!==e.level&&this._element.parentNode){var t=this.getTag();t.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(t,this._element),this._element=t}void 0!==e.text&&(this._element.innerHTML=this._data.text||"")}},{key:"currentLevel",get:function(){var e=this,t=this.levels.find((function(t){return t.number===e._data.level}));return t||(t=this.defaultLevel),t}},{key:"defaultLevel",get:function(){var e=this;if(this._settings.defaultLevel){var t=this.levels.find((function(t){return t.number===e._settings.defaultLevel}));if(t)return t;console.warn("(\u0e07'\u0300-'\u0301)\u0e07 Heading Tool: the default level specified was not found in available levels")}return this.levels[1]}},{key:"levels",get:function(){var e=this,t=[{number:1,tag:"H1",svg:'<svg width="16" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.14 1.494V4.98h4.62V1.494c0-.498.098-.871.293-1.12A.927.927 0 0 1 7.82 0c.322 0 .583.123.782.37.2.246.3.62.3 1.124v9.588c0 .503-.101.88-.303 1.128a.957.957 0 0 1-.779.374.921.921 0 0 1-.77-.378c-.193-.251-.29-.626-.29-1.124V6.989H2.14v4.093c0 .503-.1.88-.302 1.128a.957.957 0 0 1-.778.374.921.921 0 0 1-.772-.378C.096 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.285.374A.922.922 0 0 1 1.06 0c.321 0 .582.123.782.37.199.246.299.62.299 1.124zm11.653 9.985V5.27c-1.279.887-2.14 1.33-2.583 1.33a.802.802 0 0 1-.563-.228.703.703 0 0 1-.245-.529c0-.232.08-.402.241-.511.161-.11.446-.25.854-.424.61-.259 1.096-.532 1.462-.818a5.84 5.84 0 0 0 .97-.962c.282-.355.466-.573.552-.655.085-.082.246-.123.483-.123.267 0 .481.093.642.28.161.186.242.443.242.77v7.813c0 .914-.345 1.371-1.035 1.371-.307 0-.554-.093-.74-.28-.187-.186-.28-.461-.28-.825z"/></svg>'},{number:2,tag:"H2",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm10.99 9.288h3.527c.351 0 .62.072.804.216.185.144.277.34.277.588 0 .22-.073.408-.22.56-.146.154-.368.23-.665.23h-4.972c-.338 0-.601-.093-.79-.28a.896.896 0 0 1-.284-.659c0-.162.06-.377.182-.645s.255-.478.399-.631a38.617 38.617 0 0 1 1.621-1.598c.482-.444.827-.735 1.034-.875.369-.261.676-.523.922-.787.245-.263.432-.534.56-.81.129-.278.193-.549.193-.815 0-.288-.069-.546-.206-.773a1.428 1.428 0 0 0-.56-.53 1.618 1.618 0 0 0-.774-.19c-.59 0-1.054.26-1.392.777-.045.068-.12.252-.226.554-.106.302-.225.534-.358.696-.133.162-.328.243-.585.243a.76.76 0 0 1-.56-.223c-.149-.148-.223-.351-.223-.608 0-.31.07-.635.21-.972.139-.338.347-.645.624-.92a3.093 3.093 0 0 1 1.054-.665c.426-.169.924-.253 1.496-.253.69 0 1.277.108 1.764.324.315.144.592.343.83.595.24.252.425.544.558.875.133.33.2.674.2 1.03 0 .558-.14 1.066-.416 1.523-.277.457-.56.815-.848 1.074-.288.26-.771.666-1.45 1.22-.677.554-1.142.984-1.394 1.29a3.836 3.836 0 0 0-.331.44z"/></svg>'},{number:3,tag:"H3",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm11.61 4.919c.418 0 .778-.123 1.08-.368.301-.245.452-.597.452-1.055 0-.35-.12-.65-.36-.902-.241-.252-.566-.378-.974-.378-.277 0-.505.038-.684.116a1.1 1.1 0 0 0-.426.306 2.31 2.31 0 0 0-.296.49c-.093.2-.178.388-.255.565a.479.479 0 0 1-.245.225.965.965 0 0 1-.409.081.706.706 0 0 1-.5-.22c-.152-.148-.228-.345-.228-.59 0-.236.071-.484.214-.745a2.72 2.72 0 0 1 .627-.746 3.149 3.149 0 0 1 1.024-.568 4.122 4.122 0 0 1 1.368-.214c.44 0 .842.06 1.205.18.364.12.679.294.947.52.267.228.47.49.606.79.136.3.204.622.204.967 0 .454-.099.843-.296 1.168-.198.324-.48.64-.848.95.354.19.653.408.895.653.243.245.426.516.548.813.123.298.184.619.184.964 0 .413-.083.812-.248 1.198-.166.386-.41.73-.732 1.031a3.49 3.49 0 0 1-1.147.708c-.443.17-.932.256-1.467.256a3.512 3.512 0 0 1-1.464-.293 3.332 3.332 0 0 1-1.699-1.64c-.142-.314-.214-.573-.214-.777 0-.263.085-.475.255-.636a.89.89 0 0 1 .637-.242c.127 0 .25.037.367.112a.53.53 0 0 1 .232.27c.236.63.489 1.099.759 1.405.27.306.65.46 1.14.46a1.714 1.714 0 0 0 1.46-.824c.17-.273.256-.588.256-.947 0-.53-.145-.947-.436-1.249-.29-.302-.694-.453-1.212-.453-.09 0-.231.01-.422.028-.19.018-.313.027-.367.027-.25 0-.443-.062-.579-.187-.136-.125-.204-.299-.204-.521 0-.218.081-.394.245-.528.163-.134.406-.2.728-.2h.28z"/></svg>'},{number:4,tag:"H4",svg:'<svg width="20" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm13.003 10.09v-1.252h-3.38c-.427 0-.746-.097-.96-.29-.213-.193-.32-.456-.32-.788 0-.085.016-.171.048-.259.031-.088.078-.18.141-.276.063-.097.128-.19.195-.28.068-.09.15-.2.25-.33l3.568-4.774a5.44 5.44 0 0 1 .576-.683.763.763 0 0 1 .542-.212c.682 0 1.023.39 1.023 1.171v5.212h.29c.346 0 .623.047.832.142.208.094.313.3.313.62 0 .26-.086.45-.256.568-.17.12-.427.179-.768.179h-.41v1.252c0 .346-.077.603-.23.771-.152.168-.356.253-.612.253a.78.78 0 0 1-.61-.26c-.154-.173-.232-.427-.232-.764zm-2.895-2.76h2.895V4.91L12.26 8.823z"/></svg>'},{number:5,tag:"H5",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm14.16 2.645h-3.234l-.388 2.205c.644-.344 1.239-.517 1.783-.517.436 0 .843.082 1.222.245.38.164.712.39.998.677.286.289.51.63.674 1.025.163.395.245.82.245 1.273 0 .658-.148 1.257-.443 1.797-.295.54-.72.97-1.276 1.287-.556.318-1.197.477-1.923.477-.813 0-1.472-.15-1.978-.45-.506-.3-.865-.643-1.076-1.031-.21-.388-.316-.727-.316-1.018 0-.177.073-.345.22-.504a.725.725 0 0 1 .556-.238c.381 0 .665.22.85.66.182.404.427.719.736.943.309.225.654.337 1.035.337.35 0 .656-.09.919-.272.263-.182.466-.431.61-.749.142-.318.214-.678.214-1.082 0-.436-.078-.808-.232-1.117a1.607 1.607 0 0 0-.62-.69 1.674 1.674 0 0 0-.864-.229c-.39 0-.67.048-.837.143-.168.095-.41.262-.725.5-.316.239-.576.358-.78.358a.843.843 0 0 1-.592-.242c-.173-.16-.259-.344-.259-.548 0-.022.025-.177.075-.463l.572-3.26c.063-.39.181-.675.354-.852.172-.177.454-.265.844-.265h3.595c.708 0 1.062.27 1.062.81a.711.711 0 0 1-.26.572c-.172.145-.426.218-.762.218z"/></svg>'},{number:6,tag:"H6",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zM12.53 7.058a3.093 3.093 0 0 1 1.004-.814 2.734 2.734 0 0 1 1.214-.264c.43 0 .827.08 1.19.24.365.161.684.39.957.686.274.296.485.645.635 1.048a3.6 3.6 0 0 1 .223 1.262c0 .637-.145 1.216-.437 1.736-.292.52-.699.926-1.221 1.218-.522.292-1.114.438-1.774.438-.76 0-1.416-.186-1.967-.557-.552-.37-.974-.919-1.265-1.645-.292-.726-.438-1.613-.438-2.662 0-.855.088-1.62.265-2.293.176-.674.43-1.233.76-1.676.33-.443.73-.778 1.2-1.004.47-.226 1.006-.339 1.608-.339.579 0 1.089.113 1.53.34.44.225.773.506.997.84.224.335.335.656.335.964 0 .185-.07.354-.21.505a.698.698 0 0 1-.536.227.874.874 0 0 1-.529-.18 1.039 1.039 0 0 1-.36-.498 1.42 1.42 0 0 0-.495-.655 1.3 1.3 0 0 0-.786-.247c-.24 0-.479.069-.716.207a1.863 1.863 0 0 0-.6.56c-.33.479-.525 1.333-.584 2.563zm1.832 4.213c.456 0 .834-.186 1.133-.56.298-.373.447-.862.447-1.468 0-.412-.07-.766-.21-1.062a1.584 1.584 0 0 0-.577-.678 1.47 1.47 0 0 0-.807-.234c-.28 0-.548.074-.804.224-.255.149-.461.365-.617.647a2.024 2.024 0 0 0-.234.994c0 .61.158 1.12.475 1.527.316.407.714.61 1.194.61z"/></svg>'}];return this._settings.levels?t.filter((function(t){return e._settings.levels.includes(t.number)})):t}}])&&r(t.prototype,i),s&&r(t,s),e}();e.exports=i},function(e,t,n){var o=n(2);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(4)(o,r),o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,'/**\r\n * Plugin styles\r\n */\r\n.ce-header {\r\n  padding: 0.6em 0 3px;\r\n  margin: 0;\r\n  line-height: 1.25em;\r\n  outline: none;\r\n}\r\n\r\n.ce-header p,\r\n.ce-header div {\r\n  padding: 0 !important;\r\n  margin: 0 !important;\r\n}\r\n\r\n/**\r\n * Styles for Plugin icon in Toolbar\r\n */\r\n.ce-header__icon {\r\n}\r\n\r\n.ce-header[contentEditable="true"][data-placeholder]::before {\r\n  position: absolute;\r\n  content: attr(data-placeholder);\r\n  color: #707684;\r\n  font-weight: normal;\r\n  display: none;\r\n  cursor: text;\r\n}\r\n\r\n.ce-header[contentEditable="true"][data-placeholder]:empty::before {\r\n  display: block;\r\n}\r\n\r\n.ce-header[contentEditable="true"][data-placeholder]:empty:focus::before {\r\n  display: none;\r\n}\r\n\r\n/* Alignment*/\r\n.ce-header--right {\r\n  text-align: right;\r\n}\r\n.ce-header--center {\r\n  text-align: center;\r\n}\r\n.ce-header--left {\r\n  text-align: left;\r\n}\r\n.ce-header--justify {\r\n  text-align: justify;\r\n}\r\n',""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o=e[1]||"",r=e[3];if(!r)return o;if(t&&"function"==typeof btoa){var i=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),s=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[o].concat(s).concat([i]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var s=e[r];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var o,r,i={},s=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),a=function(e){return document.querySelector(e)},l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=a.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),c=null,d=0,u=[],h=n(5);function p(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=i[o.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](o.parts[s]);for(;s<o.parts.length;s++)r.parts.push(b(o.parts[s],t))}else{var a=[];for(s=0;s<o.parts.length;s++)a.push(b(o.parts[s],t));i[o.id]={id:o.id,refs:1,parts:a}}}}function f(e,t){for(var n=[],o={},r=0;r<e.length;r++){var i=e[r],s=t.base?i[0]+t.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};o[s]?o[s].parts.push(a):n.push(o[s]={id:s,parts:[a]})}return n}function g(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=u[u.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=l(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),y(t,e.attrs),g(e,t),t}function y(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function b(e,t){var n,o,r,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var s=d++;n=c||(c=v(t)),o=S.bind(null,n,s,!1),r=S.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),g(e,t),t}(t),o=k.bind(null,n,t),r=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),o=_.bind(null,n),r=function(){m(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return p(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var s=n[r];(a=i[s.id]).refs--,o.push(a)}for(e&&p(f(e,t),t),r=0;r<o.length;r++){var a;if(0===(a=o[r]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete i[a.id]}}}};var w,x=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function S(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=x(t,r);else{var i=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function _(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function k(e,t,n){var o=n.css,r=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||i)&&(o=h(o)),r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var s=new Blob([o],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,n){"use strict";n.r(t),t.default='<svg width="10" height="14" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 14">\r\n  <path d="M7.6 8.15H2.25v4.525a1.125 1.125 0 0 1-2.25 0V1.125a1.125 1.125 0 1 1 2.25 0V5.9H7.6V1.125a1.125 1.125 0 0 1 2.25 0v11.55a1.125 1.125 0 0 1-2.25 0V8.15z"/>\r\n</svg>\r\n'}])},6061:e=>{window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n(1).toString();var i=function(){function e(t){var n=t.data,o=t.config,r=t.api,i=t.readOnly;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=r,this.config=o,this.readOnly=i,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph",alignment:{left:"ce-paragraph--left",center:"ce-paragraph--center",right:"ce-paragraph--right",justify:"ce-paragraph--justify"}},this.CSS={baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive},this.settings=[{name:"left",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m10 23h28c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m10 45h28c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/></svg>'},{name:"center",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m46 23c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m46 45c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/></svg>'},{name:"right",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 19h-28c-1.104 0-2 .896-2 2s.896 2 2 2h28c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 41h-28c-1.104 0-2 .896-2 2s.896 2 2 2h28c1.104 0 2-.896 2-2s-.896-2-2-2z"/></svg>'},{name:"justify",icon:'<svg viewBox="0 0 64 64" width="20" height="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"></path><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"></path><path d="M 52.867 19 L 10.914 19 C 9.26 19 7.918 19.896 7.918 21 C 7.918 22.104 9.26 23 10.914 23 L 52.867 23 C 54.522 23 55.863 22.104 55.863 21 C 55.863 19.896 54.522 19 52.867 19 Z" style=""></path><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"></path><path d="M 52.779 41 L 11.113 41 C 9.469 41 8.136 41.896 8.136 43 C 8.136 44.104 9.469 45 11.113 45 L 52.779 45 C 54.421 45 55.754 44.104 55.754 43 C 55.754 41.896 54.421 41 52.779 41 Z" style=""></path></svg>'}],this.onKeyUp=this.onKeyUp.bind(this),this._placeholder=o.placeholder?o.placeholder:e.DEFAULT_PLACEHOLDER,this._data={text:n.text||"",alignment:n.alignment||o.defaultAlignment||e.DEFAULT_ALIGNMENT},this._element=this.drawView(),this.data=n,this._preserveBlank=void 0!==o.preserveBlank&&o.preserveBlank}return r(e,null,[{key:"DEFAULT_PLACEHOLDER",get:function(){return""}},{key:"ALIGNMENTS",get:function(){return{left:"left",center:"center",right:"right",justify:"justify"}}},{key:"isReadOnlySupported",get:function(){return!0}},{key:"DEFAULT_ALIGNMENT",get:function(){return e.ALIGNMENTS.left}}]),r(e,[{key:"onKeyUp",value:function(e){"Backspace"!==e.code&&"Delete"!==e.code||""===this._element.textContent&&(this._element.innerHTML="")}},{key:"drawView",value:function(){var e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block,this._CSS.alignment[this.data.alignment]),e.contentEditable=!this.readOnly,e.dataset.placeholder=this.api.i18n.t(this._placeholder),e.innerHTML=this.data.text,e.addEventListener("keyup",this.onKeyUp),e}},{key:"render",value:function(){return this._element}},{key:"merge",value:function(e){var t={text:this.data.text+=e.text,alignment:this.data.alignment};this._element.innerHTML=this.data.text,this.data=t}},{key:"validate",value:function(e){return!(""===e.text.trim()&&!this._preserveBlank)}},{key:"save",value:function(e){return Object.assign(this.data,{text:e.innerHTML})}},{key:"onPaste",value:function(t){var n={text:t.detail.data.innerHTML,alignment:this.config.defaultAlignment||e.DEFAULT_ALIGNMENT};this.data=n}},{key:"renderSettings",value:function(){var e=this,t=document.createElement("div");return this.settings.map((function(n){var o=document.createElement("div");return o.classList.add("cdx-settings-button"),o.innerHTML=n.icon,o.classList.toggle(e.CSS.settingsButtonActive,n.name===e.data.alignment),t.appendChild(o),o})).forEach((function(t,n,o){t.addEventListener("click",(function(){e._toggleTune(e.settings[n].name),o.forEach((function(t,n){var o=e.settings[n].name;t.classList.toggle(e.CSS.settingsButtonActive,o===e.data.alignment),e._element.classList.toggle(e._CSS.alignment[o],o===e.data.alignment)}))}))})),t}},{key:"_toggleTune",value:function(e){this.data.alignment=e}},{key:"data",get:function(){return this._data},set:function(t){this._data={text:t.text||"",alignment:t.alignment||this.config.defaultAlignment||e.DEFAULT_ALIGNMENT},this._element.innerHTML=this._data.text||""}}],[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{text:{br:!0},alignment:{}}}},{key:"pasteConfig",get:function(){return{tags:["P"]}}},{key:"toolbox",get:function(){return{icon:n(5).default,title:"Text"}}}]),e}();e.exports=i},function(e,t,n){var o=n(2),r=n(3);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){"use strict";var o,r=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function a(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},o=[],r=0;r<e.length;r++){var i=e[r],l=t.base?i[0]+t.base:i[0],c=n[l]||0,d="".concat(l," ").concat(c);n[l]=c+1;var u=a(d),h={css:i[1],media:i[2],sourceMap:i[3]};-1!==u?(s[u].references++,s[u].updater(h)):s.push({identifier:d,updater:m(h,t),references:1}),o.push(d)}return o}function c(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var r=n.nc;r&&(o.nonce=r)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var s=i(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function h(e,t,n,o){var r=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=u(t,r);else{var i=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function p(e,t,n){var o=n.css,r=n.media,i=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var f=null,g=0;function m(e,t){var n,o,r;if(t.singleton){var i=g++;n=f||(f=c(t)),o=h.bind(null,n,i,!1),r=h.bind(null,n,i,!0)}else n=c(t),o=p.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var r=a(n[o]);s[r].references--}for(var i=l(e,t),c=0;c<n.length;c++){var d=a(n[c]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}n=i}}}},function(e,t,n){(t=n(4)(!1)).push([e.i,".ce-paragraph {\n    line-height: 1.6em;\n    outline: none;\n}\n.ce-paragraph--right {\n    text-align: right;\n}\n.ce-paragraph--center {\n    text-align: center;\n}\n.ce-paragraph--left {\n    text-align: left;\n}\n\n.ce-paragraph--justify {\n    text-align: justify;\n}\n\n.ce-paragraph[data-placeholder]:empty::before{\n  content: attr(data-placeholder);\n  color: #707684;\n  font-weight: normal;\n  opacity: 0;\n}\n\n/** Show placeholder at the first paragraph if Editor is empty */\n.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {\n  opacity: 1;\n}\n\n.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before,\n.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus::before {\n  opacity: 0;\n}\n\n.ce-paragraph p:first-of-type{\n    margin-top: 0;\n}\n\n.ce-paragraph p:last-of-type{\n    margin-bottom: 0;\n}\n\n\n.svg-icon {\n    width: 1em;\n    height: 1em;\n}\n\n.svg-icon path,\n.svg-icon polygon,\n.svg-icon rect {\n    fill: #4691f6;\n}\n\n.svg-icon circle {\n    stroke: #4691f6;\n    stroke-width: 1;\n}",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o,r,i=e[1]||"",s=e[3];if(!s)return i;if(t&&"function"==typeof btoa){var a=(n=s,o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(r," */")),l=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[i].concat(l).concat([a]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(o)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(r[s]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);o&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.2 -0.3 9 11.4" width="12" height="14">\n  <path d="M0 2.77V.92A1 1 0 01.2.28C.35.1.56 0 .83 0h7.66c.28.01.48.1.63.28.14.17.21.38.21.64v1.85c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26a1 1 0 01-.21-.66V1.69H5.6v7.58h.5c.25 0 .45.08.6.23.17.16.25.35.25.6s-.08.45-.24.6a.87.87 0 01-.62.22H3.21a.87.87 0 01-.61-.22.78.78 0 01-.24-.6c0-.25.08-.44.24-.6a.85.85 0 01.61-.23h.5V1.7H1.73v1.08c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26A1 1 0 010 2.77z"/>\n</svg>\n'}])},930:e=>{window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o=e[1]||"",r=e[3];if(!r)return o;if(t&&"function"==typeof btoa){var i=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),s=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[o].concat(s).concat([i]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var s=e[r];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var o,r,i={},s=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),a=function(e,t){return t?t.querySelector(e):document.querySelector(e)},l=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var o=a.call(this,e,n);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}}(),c=null,d=0,u=[],h=n(5);function p(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=i[o.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](o.parts[s]);for(;s<o.parts.length;s++)r.parts.push(b(o.parts[s],t))}else{var a=[];for(s=0;s<o.parts.length;s++)a.push(b(o.parts[s],t));i[o.id]={id:o.id,refs:1,parts:a}}}}function f(e,t){for(var n=[],o={},r=0;r<e.length;r++){var i=e[r],s=t.base?i[0]+t.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};o[s]?o[s].parts.push(a):n.push(o[s]={id:s,parts:[a]})}return n}function g(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=u[u.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=l(e.insertAt.before,n);n.insertBefore(t,r)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function v(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var o=n.nc;o&&(e.attrs.nonce=o)}return y(t,e.attrs),g(e,t),t}function y(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function b(e,t){var n,o,r,i;if(t.transform&&e.css){if(!(i="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var s=d++;n=c||(c=v(t)),o=S.bind(null,n,s,!1),r=S.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),g(e,t),t}(t),o=k.bind(null,n,t),r=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),o=_.bind(null,n),r=function(){m(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return p(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var s=n[r];(a=i[s.id]).refs--,o.push(a)}for(e&&p(f(e,t),t),r=0;r<o.length;r++){var a;if(0===(a=o[r]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete i[a.id]}}}};var w,x=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function S(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=x(t,r);else{var i=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function _(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function k(e,t,n){var o=n.css,r=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||i)&&(o=h(o)),r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var s=new Blob([o],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}},function(e,t,n){const{TableConstructor:o}=n(15),r={Toolbox:n(8),InsertColBefore:n(9),InsertColAfter:n(10),InsertRowBefore:n(11),InsertRowAfter:n(12),DeleteRow:n(13),DeleteCol:n(14)},i="tc-table__inp";e.exports=class{static get enableLineBreaks(){return!0}static get toolbox(){return{icon:r.Toolbox,title:"Table"}}constructor(e){let{data:t,config:n,api:i}=e;this.api=i,this.wrapper=void 0,this.config=n,this.data=t,this._tableConstructor=new o(t,n,i),this.actions=[{actionName:"InsertColBefore",icon:r.InsertColBefore,label:"Insert column before"},{actionName:"InsertColAfter",icon:r.InsertColAfter,label:"Insert column after"},{actionName:"InsertRowBefore",icon:r.InsertRowBefore,label:"Insert row before"},{actionName:"InsertRowAfter",icon:r.InsertRowAfter,label:"Insert row after"},{actionName:"DeleteRow",icon:r.DeleteRow,label:"Delete row"},{actionName:"DeleteCol",icon:r.DeleteCol,label:"Delete column"}]}performAction(e){switch(e){case"InsertColBefore":this._tableConstructor.table.insertColumnBefore();break;case"InsertColAfter":this._tableConstructor.table.insertColumnAfter();break;case"InsertRowBefore":this._tableConstructor.table.insertRowBefore();break;case"InsertRowAfter":this._tableConstructor.table.insertRowAfter();break;case"DeleteRow":this._tableConstructor.table.deleteRow();break;case"DeleteCol":this._tableConstructor.table.deleteColumn()}}renderSettings(){const e=document.createElement("div");return this.actions.forEach((t=>{let{actionName:n,label:o,icon:r}=t;const i=this.api.i18n.t(o),s=document.createElement("div");s.classList.add("cdx-settings-button"),s.innerHTML=r,s.title=n,this.api.tooltip.onHover(s,i,{placement:"top"}),s.addEventListener("click",this.performAction.bind(this,n)),e.appendChild(s),this._tableConstructor.table.selectedCell&&this._tableConstructor.table.focusCellOnSelectedCell()})),e}render(){if(this.wrapper=document.createElement("div"),this.data&&this.data.content)this._createTableConfiguration();else{this.wrapper.classList.add("table-selector"),this.wrapper.setAttribute("data-hoveredClass","m,n");const e=6;this.createCells(e),"table-selector"===this.wrapper.className&&this.wrapper.addEventListener("mouseover",(e=>{if(e.target.id.length){const t=e.target.attributes.row.value,n=e.target.attributes.column.value;this.wrapper.setAttribute("data-hoveredClass","".concat(t,",").concat(n))}})),this.wrapper.addEventListener("click",(e=>{if(e.target.id.length){const t=e.target.attributes.row.value,n=e.target.attributes.column.value;this.wrapper.removeEventListener("mouseover",(()=>{})),this.config.rows=t,this.config.cols=n,this._createTableConfiguration()}}))}return this.wrapper}createCells(e){if(0!==e)for(let n=0;n<e;n++){let t=document.createElement("div");t.setAttribute("class","table-row");for(let o=0;o<e;o++){let e=document.createElement("div"),r=document.createElement("div");e.setAttribute("class","table-cell-container"),r.setAttribute("class","table-cell"),e.setAttribute("id","row_".concat(n+1,"_cell_").concat(o+1)),e.setAttribute("column",o+1),e.setAttribute("row",n+1),r.setAttribute("id","cell_"+(o+1)),r.setAttribute("column",o+1),r.setAttribute("row",n+1),e.appendChild(r),t.appendChild(e)}this.wrapper.appendChild(t)}const t=document.createElement("input");t.classList.add("hidden-element"),t.setAttribute("tabindex",0),this.wrapper.appendChild(t)}_createTableConfiguration(){this.wrapper.innerHTML="",this._tableConstructor=new o(this.data,this.config,this.api),this.wrapper.appendChild(this._tableConstructor.htmlElement)}save(e){const t=e.querySelector("table"),n=[],o=t?t.rows:0;if(o.length){for(let e=0;e<o.length;e++){const t=o[e],r=Array.from(t.cells).map((e=>e.querySelector("."+i)));r.every(this._isEmpty)||n.push(r.map((e=>e.innerHTML)))}return{content:n}}}_isEmpty(e){return!e.textContent.trim()}static get pasteConfig(){return{tags:["TABLE","TR","TD","TBODY","TH"]}}async onPaste(e){const t=e.detail.data;this.data=this.pasteHandler(t),this._createTableConfiguration()}pasteHandler(e){const{tagName:t}=e,n={content:[],config:{rows:0,cols:0}};if("TABLE"===t){let t=Array.from(e.childNodes);t=t.find((e=>"TBODY"===e.nodeName));let o=Array.from(t.childNodes);o=[o].map((e=>e.filter((e=>"TR"===e.nodeName)))),n.config.rows=o[0].length,n.content=o[0].map((e=>{let t=e.childNodes;return n.config.cols=t.length,t=[...t].map((e=>e.innerHTML)),t}))}return n}}},function(e,t,n){var o=n(4);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(1)(o,r),o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,".tc-editor{padding:10px;position:relative;box-sizing:content-box;width:100%;left:-10px}",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,n){var o=n(7);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(1)(o,r),o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,'.tc-table{width:100%;height:100%;border-collapse:collapse;table-layout:fixed;}.tc-table__wrap{border:1px solid #dbdbe2;border-radius:3px;position:relative;height:100%;width:100%;box-sizing:border-box}.tc-table__cell{border:1px solid #dbdbe2;padding:0;vertical-align:top}.tc-table__area{padding:10px;height:100%}.tc-table__inp{outline:none;flex-grow:100;min-height:1.5em;height:100%;overflow:hidden}.tc-table__highlight:focus-within{background-color:rgba(173,164,176,.1)}.tc-table tbody tr:first-child td{border-top:none}.tc-table tbody tr:last-child td{border-bottom:none}.tc-table tbody tr td:last-child{border-right:none}.tc-table tbody tr td:first-child{border-left:none}.table-selector{display:flex;flex-direction:column;}.table-selector .hidden-element{display:none}.table-row{display:flex;flex-direction:row}.table-cell-container{width:30px;height:30px}.table-cell{width:25px;height:25px;background:#f6f6f6;border:1px solid #e4e4e4;cursor:pointer}[data-hoveredClass="1,1"] #row_1_cell_1 #cell_1,[data-hoveredClass="1,2"] #row_1_cell_1 #cell_1,[data-hoveredClass="1,2"] #row_1_cell_2 #cell_2,[data-hoveredClass="1,3"] #row_1_cell_1 #cell_1,[data-hoveredClass="1,3"] #row_1_cell_2 #cell_2,[data-hoveredClass="1,3"] #row_1_cell_3 #cell_3,[data-hoveredClass="1,4"] #row_1_cell_1 #cell_1,[data-hoveredClass="1,4"] #row_1_cell_2 #cell_2,[data-hoveredClass="1,4"] #row_1_cell_3 #cell_3,[data-hoveredClass="1,4"] #row_1_cell_4 #cell_4,[data-hoveredClass="1,5"] #row_1_cell_1 #cell_1,[data-hoveredClass="1,5"] #row_1_cell_2 #cell_2,[data-hoveredClass="1,5"] #row_1_cell_3 #cell_3,[data-hoveredClass="1,5"] #row_1_cell_4 #cell_4,[data-hoveredClass="1,5"] #row_1_cell_5 #cell_5,[data-hoveredClass="1,6"] #row_1_cell_1 #cell_1,[data-hoveredClass="1,6"] #row_1_cell_2 #cell_2,[data-hoveredClass="1,6"] #row_1_cell_3 #cell_3,[data-hoveredClass="1,6"] #row_1_cell_4 #cell_4,[data-hoveredClass="1,6"] #row_1_cell_5 #cell_5,[data-hoveredClass="1,6"] #row_1_cell_6 #cell_6,[data-hoveredClass="2,1"] #row_1_cell_1 #cell_1,[data-hoveredClass="2,1"] #row_2_cell_1 #cell_1,[data-hoveredClass="2,2"] #row_1_cell_1 #cell_1,[data-hoveredClass="2,2"] #row_1_cell_2 #cell_2,[data-hoveredClass="2,2"] #row_2_cell_1 #cell_1,[data-hoveredClass="2,2"] #row_2_cell_2 #cell_2,[data-hoveredClass="2,3"] #row_1_cell_1 #cell_1,[data-hoveredClass="2,3"] #row_1_cell_2 #cell_2,[data-hoveredClass="2,3"] #row_1_cell_3 #cell_3,[data-hoveredClass="2,3"] #row_2_cell_1 #cell_1,[data-hoveredClass="2,3"] #row_2_cell_2 #cell_2,[data-hoveredClass="2,3"] #row_2_cell_3 #cell_3,[data-hoveredClass="2,4"] #row_1_cell_1 #cell_1,[data-hoveredClass="2,4"] #row_1_cell_2 #cell_2,[data-hoveredClass="2,4"] #row_1_cell_3 #cell_3,[data-hoveredClass="2,4"] #row_1_cell_4 #cell_4,[data-hoveredClass="2,4"] #row_2_cell_1 #cell_1,[data-hoveredClass="2,4"] #row_2_cell_2 #cell_2,[data-hoveredClass="2,4"] #row_2_cell_3 #cell_3,[data-hoveredClass="2,4"] #row_2_cell_4 #cell_4,[data-hoveredClass="2,5"] #row_1_cell_1 #cell_1,[data-hoveredClass="2,5"] #row_1_cell_2 #cell_2,[data-hoveredClass="2,5"] #row_1_cell_3 #cell_3,[data-hoveredClass="2,5"] #row_1_cell_4 #cell_4,[data-hoveredClass="2,5"] #row_1_cell_5 #cell_5,[data-hoveredClass="2,5"] #row_2_cell_1 #cell_1,[data-hoveredClass="2,5"] #row_2_cell_2 #cell_2,[data-hoveredClass="2,5"] #row_2_cell_3 #cell_3,[data-hoveredClass="2,5"] #row_2_cell_4 #cell_4,[data-hoveredClass="2,5"] #row_2_cell_5 #cell_5,[data-hoveredClass="2,6"] #row_1_cell_1 #cell_1,[data-hoveredClass="2,6"] #row_1_cell_2 #cell_2,[data-hoveredClass="2,6"] #row_1_cell_3 #cell_3,[data-hoveredClass="2,6"] #row_1_cell_4 #cell_4,[data-hoveredClass="2,6"] #row_1_cell_5 #cell_5,[data-hoveredClass="2,6"] #row_1_cell_6 #cell_6,[data-hoveredClass="2,6"] #row_2_cell_1 #cell_1,[data-hoveredClass="2,6"] #row_2_cell_2 #cell_2,[data-hoveredClass="2,6"] #row_2_cell_3 #cell_3,[data-hoveredClass="2,6"] #row_2_cell_4 #cell_4,[data-hoveredClass="2,6"] #row_2_cell_5 #cell_5,[data-hoveredClass="2,6"] #row_2_cell_6 #cell_6,[data-hoveredClass="3,1"] #row_1_cell_1 #cell_1,[data-hoveredClass="3,1"] #row_2_cell_1 #cell_1,[data-hoveredClass="3,1"] #row_3_cell_1 #cell_1,[data-hoveredClass="3,2"] #row_1_cell_1 #cell_1,[data-hoveredClass="3,2"] #row_1_cell_2 #cell_2,[data-hoveredClass="3,2"] #row_2_cell_1 #cell_1,[data-hoveredClass="3,2"] #row_2_cell_2 #cell_2,[data-hoveredClass="3,2"] #row_3_cell_1 #cell_1,[data-hoveredClass="3,2"] #row_3_cell_2 #cell_2,[data-hoveredClass="3,3"] #row_1_cell_1 #cell_1,[data-hoveredClass="3,3"] #row_1_cell_2 #cell_2,[data-hoveredClass="3,3"] #row_1_cell_3 #cell_3,[data-hoveredClass="3,3"] #row_2_cell_1 #cell_1,[data-hoveredClass="3,3"] #row_2_cell_2 #cell_2,[data-hoveredClass="3,3"] #row_2_cell_3 #cell_3,[data-hoveredClass="3,3"] #row_3_cell_1 #cell_1,[data-hoveredClass="3,3"] #row_3_cell_2 #cell_2,[data-hoveredClass="3,3"] #row_3_cell_3 #cell_3,[data-hoveredClass="3,4"] #row_1_cell_1 #cell_1,[data-hoveredClass="3,4"] #row_1_cell_2 #cell_2,[data-hoveredClass="3,4"] #row_1_cell_3 #cell_3,[data-hoveredClass="3,4"] #row_1_cell_4 #cell_4,[data-hoveredClass="3,4"] #row_2_cell_1 #cell_1,[data-hoveredClass="3,4"] #row_2_cell_2 #cell_2,[data-hoveredClass="3,4"] #row_2_cell_3 #cell_3,[data-hoveredClass="3,4"] #row_2_cell_4 #cell_4,[data-hoveredClass="3,4"] #row_3_cell_1 #cell_1,[data-hoveredClass="3,4"] #row_3_cell_2 #cell_2,[data-hoveredClass="3,4"] #row_3_cell_3 #cell_3,[data-hoveredClass="3,4"] #row_3_cell_4 #cell_4,[data-hoveredClass="3,5"] #row_1_cell_1 #cell_1,[data-hoveredClass="3,5"] #row_1_cell_2 #cell_2,[data-hoveredClass="3,5"] #row_1_cell_3 #cell_3,[data-hoveredClass="3,5"] #row_1_cell_4 #cell_4,[data-hoveredClass="3,5"] #row_1_cell_5 #cell_5,[data-hoveredClass="3,5"] #row_2_cell_1 #cell_1,[data-hoveredClass="3,5"] #row_2_cell_2 #cell_2,[data-hoveredClass="3,5"] #row_2_cell_3 #cell_3,[data-hoveredClass="3,5"] #row_2_cell_4 #cell_4,[data-hoveredClass="3,5"] #row_2_cell_5 #cell_5,[data-hoveredClass="3,5"] #row_3_cell_1 #cell_1,[data-hoveredClass="3,5"] #row_3_cell_2 #cell_2,[data-hoveredClass="3,5"] #row_3_cell_3 #cell_3,[data-hoveredClass="3,5"] #row_3_cell_4 #cell_4,[data-hoveredClass="3,5"] #row_3_cell_5 #cell_5,[data-hoveredClass="3,6"] #row_1_cell_1 #cell_1,[data-hoveredClass="3,6"] #row_1_cell_2 #cell_2,[data-hoveredClass="3,6"] #row_1_cell_3 #cell_3,[data-hoveredClass="3,6"] #row_1_cell_4 #cell_4,[data-hoveredClass="3,6"] #row_1_cell_5 #cell_5,[data-hoveredClass="3,6"] #row_1_cell_6 #cell_6,[data-hoveredClass="3,6"] #row_2_cell_1 #cell_1,[data-hoveredClass="3,6"] #row_2_cell_2 #cell_2,[data-hoveredClass="3,6"] #row_2_cell_3 #cell_3,[data-hoveredClass="3,6"] #row_2_cell_4 #cell_4,[data-hoveredClass="3,6"] #row_2_cell_5 #cell_5,[data-hoveredClass="3,6"] #row_2_cell_6 #cell_6,[data-hoveredClass="3,6"] #row_3_cell_1 #cell_1,[data-hoveredClass="3,6"] #row_3_cell_2 #cell_2,[data-hoveredClass="3,6"] #row_3_cell_3 #cell_3,[data-hoveredClass="3,6"] #row_3_cell_4 #cell_4,[data-hoveredClass="3,6"] #row_3_cell_5 #cell_5,[data-hoveredClass="3,6"] #row_3_cell_6 #cell_6,[data-hoveredClass="4,1"] #row_1_cell_1 #cell_1,[data-hoveredClass="4,1"] #row_2_cell_1 #cell_1,[data-hoveredClass="4,1"] #row_3_cell_1 #cell_1,[data-hoveredClass="4,1"] #row_4_cell_1 #cell_1,[data-hoveredClass="4,2"] #row_1_cell_1 #cell_1,[data-hoveredClass="4,2"] #row_1_cell_2 #cell_2,[data-hoveredClass="4,2"] #row_2_cell_1 #cell_1,[data-hoveredClass="4,2"] #row_2_cell_2 #cell_2,[data-hoveredClass="4,2"] #row_3_cell_1 #cell_1,[data-hoveredClass="4,2"] #row_3_cell_2 #cell_2,[data-hoveredClass="4,2"] #row_4_cell_1 #cell_1,[data-hoveredClass="4,2"] #row_4_cell_2 #cell_2,[data-hoveredClass="4,3"] #row_1_cell_1 #cell_1,[data-hoveredClass="4,3"] #row_1_cell_2 #cell_2,[data-hoveredClass="4,3"] #row_1_cell_3 #cell_3,[data-hoveredClass="4,3"] #row_2_cell_1 #cell_1,[data-hoveredClass="4,3"] #row_2_cell_2 #cell_2,[data-hoveredClass="4,3"] #row_2_cell_3 #cell_3,[data-hoveredClass="4,3"] #row_3_cell_1 #cell_1,[data-hoveredClass="4,3"] #row_3_cell_2 #cell_2,[data-hoveredClass="4,3"] #row_3_cell_3 #cell_3,[data-hoveredClass="4,3"] #row_4_cell_1 #cell_1,[data-hoveredClass="4,3"] #row_4_cell_2 #cell_2,[data-hoveredClass="4,3"] #row_4_cell_3 #cell_3,[data-hoveredClass="4,4"] #row_1_cell_1 #cell_1,[data-hoveredClass="4,4"] #row_1_cell_2 #cell_2,[data-hoveredClass="4,4"] #row_1_cell_3 #cell_3,[data-hoveredClass="4,4"] #row_1_cell_4 #cell_4,[data-hoveredClass="4,4"] #row_2_cell_1 #cell_1,[data-hoveredClass="4,4"] #row_2_cell_2 #cell_2,[data-hoveredClass="4,4"] #row_2_cell_3 #cell_3,[data-hoveredClass="4,4"] #row_2_cell_4 #cell_4,[data-hoveredClass="4,4"] #row_3_cell_1 #cell_1,[data-hoveredClass="4,4"] #row_3_cell_2 #cell_2,[data-hoveredClass="4,4"] #row_3_cell_3 #cell_3,[data-hoveredClass="4,4"] #row_3_cell_4 #cell_4,[data-hoveredClass="4,4"] #row_4_cell_1 #cell_1,[data-hoveredClass="4,4"] #row_4_cell_2 #cell_2,[data-hoveredClass="4,4"] #row_4_cell_3 #cell_3,[data-hoveredClass="4,4"] #row_4_cell_4 #cell_4,[data-hoveredClass="4,5"] #row_1_cell_1 #cell_1,[data-hoveredClass="4,5"] #row_1_cell_2 #cell_2,[data-hoveredClass="4,5"] #row_1_cell_3 #cell_3,[data-hoveredClass="4,5"] #row_1_cell_4 #cell_4,[data-hoveredClass="4,5"] #row_1_cell_5 #cell_5,[data-hoveredClass="4,5"] #row_2_cell_1 #cell_1,[data-hoveredClass="4,5"] #row_2_cell_2 #cell_2,[data-hoveredClass="4,5"] #row_2_cell_3 #cell_3,[data-hoveredClass="4,5"] #row_2_cell_4 #cell_4,[data-hoveredClass="4,5"] #row_2_cell_5 #cell_5,[data-hoveredClass="4,5"] #row_3_cell_1 #cell_1,[data-hoveredClass="4,5"] #row_3_cell_2 #cell_2,[data-hoveredClass="4,5"] #row_3_cell_3 #cell_3,[data-hoveredClass="4,5"] #row_3_cell_4 #cell_4,[data-hoveredClass="4,5"] #row_3_cell_5 #cell_5,[data-hoveredClass="4,5"] #row_4_cell_1 #cell_1,[data-hoveredClass="4,5"] #row_4_cell_2 #cell_2,[data-hoveredClass="4,5"] #row_4_cell_3 #cell_3,[data-hoveredClass="4,5"] #row_4_cell_4 #cell_4,[data-hoveredClass="4,5"] #row_4_cell_5 #cell_5,[data-hoveredClass="4,6"] #row_1_cell_1 #cell_1,[data-hoveredClass="4,6"] #row_1_cell_2 #cell_2,[data-hoveredClass="4,6"] #row_1_cell_3 #cell_3,[data-hoveredClass="4,6"] #row_1_cell_4 #cell_4,[data-hoveredClass="4,6"] #row_1_cell_5 #cell_5,[data-hoveredClass="4,6"] #row_1_cell_6 #cell_6,[data-hoveredClass="4,6"] #row_2_cell_1 #cell_1,[data-hoveredClass="4,6"] #row_2_cell_2 #cell_2,[data-hoveredClass="4,6"] #row_2_cell_3 #cell_3,[data-hoveredClass="4,6"] #row_2_cell_4 #cell_4,[data-hoveredClass="4,6"] #row_2_cell_5 #cell_5,[data-hoveredClass="4,6"] #row_2_cell_6 #cell_6,[data-hoveredClass="4,6"] #row_3_cell_1 #cell_1,[data-hoveredClass="4,6"] #row_3_cell_2 #cell_2,[data-hoveredClass="4,6"] #row_3_cell_3 #cell_3,[data-hoveredClass="4,6"] #row_3_cell_4 #cell_4,[data-hoveredClass="4,6"] #row_3_cell_5 #cell_5,[data-hoveredClass="4,6"] #row_3_cell_6 #cell_6,[data-hoveredClass="4,6"] #row_4_cell_1 #cell_1,[data-hoveredClass="4,6"] #row_4_cell_2 #cell_2,[data-hoveredClass="4,6"] #row_4_cell_3 #cell_3,[data-hoveredClass="4,6"] #row_4_cell_4 #cell_4,[data-hoveredClass="4,6"] #row_4_cell_5 #cell_5,[data-hoveredClass="4,6"] #row_4_cell_6 #cell_6,[data-hoveredClass="5,1"] #row_1_cell_1 #cell_1,[data-hoveredClass="5,1"] #row_2_cell_1 #cell_1,[data-hoveredClass="5,1"] #row_3_cell_1 #cell_1,[data-hoveredClass="5,1"] #row_4_cell_1 #cell_1,[data-hoveredClass="5,1"] #row_5_cell_1 #cell_1,[data-hoveredClass="5,2"] #row_1_cell_1 #cell_1,[data-hoveredClass="5,2"] #row_1_cell_2 #cell_2,[data-hoveredClass="5,2"] #row_2_cell_1 #cell_1,[data-hoveredClass="5,2"] #row_2_cell_2 #cell_2,[data-hoveredClass="5,2"] #row_3_cell_1 #cell_1,[data-hoveredClass="5,2"] #row_3_cell_2 #cell_2,[data-hoveredClass="5,2"] #row_4_cell_1 #cell_1,[data-hoveredClass="5,2"] #row_4_cell_2 #cell_2,[data-hoveredClass="5,2"] #row_5_cell_1 #cell_1,[data-hoveredClass="5,2"] #row_5_cell_2 #cell_2,[data-hoveredClass="5,3"] #row_1_cell_1 #cell_1,[data-hoveredClass="5,3"] #row_1_cell_2 #cell_2,[data-hoveredClass="5,3"] #row_1_cell_3 #cell_3,[data-hoveredClass="5,3"] #row_2_cell_1 #cell_1,[data-hoveredClass="5,3"] #row_2_cell_2 #cell_2,[data-hoveredClass="5,3"] #row_2_cell_3 #cell_3,[data-hoveredClass="5,3"] #row_3_cell_1 #cell_1,[data-hoveredClass="5,3"] #row_3_cell_2 #cell_2,[data-hoveredClass="5,3"] #row_3_cell_3 #cell_3,[data-hoveredClass="5,3"] #row_4_cell_1 #cell_1,[data-hoveredClass="5,3"] #row_4_cell_2 #cell_2,[data-hoveredClass="5,3"] #row_4_cell_3 #cell_3,[data-hoveredClass="5,3"] #row_5_cell_1 #cell_1,[data-hoveredClass="5,3"] #row_5_cell_2 #cell_2,[data-hoveredClass="5,3"] #row_5_cell_3 #cell_3,[data-hoveredClass="5,4"] #row_1_cell_1 #cell_1,[data-hoveredClass="5,4"] #row_1_cell_2 #cell_2,[data-hoveredClass="5,4"] #row_1_cell_3 #cell_3,[data-hoveredClass="5,4"] #row_1_cell_4 #cell_4,[data-hoveredClass="5,4"] #row_2_cell_1 #cell_1,[data-hoveredClass="5,4"] #row_2_cell_2 #cell_2,[data-hoveredClass="5,4"] #row_2_cell_3 #cell_3,[data-hoveredClass="5,4"] #row_2_cell_4 #cell_4,[data-hoveredClass="5,4"] #row_3_cell_1 #cell_1,[data-hoveredClass="5,4"] #row_3_cell_2 #cell_2,[data-hoveredClass="5,4"] #row_3_cell_3 #cell_3,[data-hoveredClass="5,4"] #row_3_cell_4 #cell_4,[data-hoveredClass="5,4"] #row_4_cell_1 #cell_1,[data-hoveredClass="5,4"] #row_4_cell_2 #cell_2,[data-hoveredClass="5,4"] #row_4_cell_3 #cell_3,[data-hoveredClass="5,4"] #row_4_cell_4 #cell_4,[data-hoveredClass="5,4"] #row_5_cell_1 #cell_1,[data-hoveredClass="5,4"] #row_5_cell_2 #cell_2,[data-hoveredClass="5,4"] #row_5_cell_3 #cell_3,[data-hoveredClass="5,4"] #row_5_cell_4 #cell_4,[data-hoveredClass="5,5"] #row_1_cell_1 #cell_1,[data-hoveredClass="5,5"] #row_1_cell_2 #cell_2,[data-hoveredClass="5,5"] #row_1_cell_3 #cell_3,[data-hoveredClass="5,5"] #row_1_cell_4 #cell_4,[data-hoveredClass="5,5"] #row_1_cell_5 #cell_5,[data-hoveredClass="5,5"] #row_2_cell_1 #cell_1,[data-hoveredClass="5,5"] #row_2_cell_2 #cell_2,[data-hoveredClass="5,5"] #row_2_cell_3 #cell_3,[data-hoveredClass="5,5"] #row_2_cell_4 #cell_4,[data-hoveredClass="5,5"] #row_2_cell_5 #cell_5,[data-hoveredClass="5,5"] #row_3_cell_1 #cell_1,[data-hoveredClass="5,5"] #row_3_cell_2 #cell_2,[data-hoveredClass="5,5"] #row_3_cell_3 #cell_3,[data-hoveredClass="5,5"] #row_3_cell_4 #cell_4,[data-hoveredClass="5,5"] #row_3_cell_5 #cell_5,[data-hoveredClass="5,5"] #row_4_cell_1 #cell_1,[data-hoveredClass="5,5"] #row_4_cell_2 #cell_2,[data-hoveredClass="5,5"] #row_4_cell_3 #cell_3,[data-hoveredClass="5,5"] #row_4_cell_4 #cell_4,[data-hoveredClass="5,5"] #row_4_cell_5 #cell_5,[data-hoveredClass="5,5"] #row_5_cell_1 #cell_1,[data-hoveredClass="5,5"] #row_5_cell_2 #cell_2,[data-hoveredClass="5,5"] #row_5_cell_3 #cell_3,[data-hoveredClass="5,5"] #row_5_cell_4 #cell_4,[data-hoveredClass="5,5"] #row_5_cell_5 #cell_5,[data-hoveredClass="5,6"] #row_1_cell_1 #cell_1,[data-hoveredClass="5,6"] #row_1_cell_2 #cell_2,[data-hoveredClass="5,6"] #row_1_cell_3 #cell_3,[data-hoveredClass="5,6"] #row_1_cell_4 #cell_4,[data-hoveredClass="5,6"] #row_1_cell_5 #cell_5,[data-hoveredClass="5,6"] #row_1_cell_6 #cell_6,[data-hoveredClass="5,6"] #row_2_cell_1 #cell_1,[data-hoveredClass="5,6"] #row_2_cell_2 #cell_2,[data-hoveredClass="5,6"] #row_2_cell_3 #cell_3,[data-hoveredClass="5,6"] #row_2_cell_4 #cell_4,[data-hoveredClass="5,6"] #row_2_cell_5 #cell_5,[data-hoveredClass="5,6"] #row_2_cell_6 #cell_6,[data-hoveredClass="5,6"] #row_3_cell_1 #cell_1,[data-hoveredClass="5,6"] #row_3_cell_2 #cell_2,[data-hoveredClass="5,6"] #row_3_cell_3 #cell_3,[data-hoveredClass="5,6"] #row_3_cell_4 #cell_4,[data-hoveredClass="5,6"] #row_3_cell_5 #cell_5,[data-hoveredClass="5,6"] #row_3_cell_6 #cell_6,[data-hoveredClass="5,6"] #row_4_cell_1 #cell_1,[data-hoveredClass="5,6"] #row_4_cell_2 #cell_2,[data-hoveredClass="5,6"] #row_4_cell_3 #cell_3,[data-hoveredClass="5,6"] #row_4_cell_4 #cell_4,[data-hoveredClass="5,6"] #row_4_cell_5 #cell_5,[data-hoveredClass="5,6"] #row_4_cell_6 #cell_6,[data-hoveredClass="5,6"] #row_5_cell_1 #cell_1,[data-hoveredClass="5,6"] #row_5_cell_2 #cell_2,[data-hoveredClass="5,6"] #row_5_cell_3 #cell_3,[data-hoveredClass="5,6"] #row_5_cell_4 #cell_4,[data-hoveredClass="5,6"] #row_5_cell_5 #cell_5,[data-hoveredClass="5,6"] #row_5_cell_6 #cell_6,[data-hoveredClass="6,1"] #row_1_cell_1 #cell_1,[data-hoveredClass="6,1"] #row_2_cell_1 #cell_1,[data-hoveredClass="6,1"] #row_3_cell_1 #cell_1,[data-hoveredClass="6,1"] #row_4_cell_1 #cell_1,[data-hoveredClass="6,1"] #row_5_cell_1 #cell_1,[data-hoveredClass="6,1"] #row_6_cell_1 #cell_1,[data-hoveredClass="6,2"] #row_1_cell_1 #cell_1,[data-hoveredClass="6,2"] #row_1_cell_2 #cell_2,[data-hoveredClass="6,2"] #row_2_cell_1 #cell_1,[data-hoveredClass="6,2"] #row_2_cell_2 #cell_2,[data-hoveredClass="6,2"] #row_3_cell_1 #cell_1,[data-hoveredClass="6,2"] #row_3_cell_2 #cell_2,[data-hoveredClass="6,2"] #row_4_cell_1 #cell_1,[data-hoveredClass="6,2"] #row_4_cell_2 #cell_2,[data-hoveredClass="6,2"] #row_5_cell_1 #cell_1,[data-hoveredClass="6,2"] #row_5_cell_2 #cell_2,[data-hoveredClass="6,2"] #row_6_cell_1 #cell_1,[data-hoveredClass="6,2"] #row_6_cell_2 #cell_2,[data-hoveredClass="6,3"] #row_1_cell_1 #cell_1,[data-hoveredClass="6,3"] #row_1_cell_2 #cell_2,[data-hoveredClass="6,3"] #row_1_cell_3 #cell_3,[data-hoveredClass="6,3"] #row_2_cell_1 #cell_1,[data-hoveredClass="6,3"] #row_2_cell_2 #cell_2,[data-hoveredClass="6,3"] #row_2_cell_3 #cell_3,[data-hoveredClass="6,3"] #row_3_cell_1 #cell_1,[data-hoveredClass="6,3"] #row_3_cell_2 #cell_2,[data-hoveredClass="6,3"] #row_3_cell_3 #cell_3,[data-hoveredClass="6,3"] #row_4_cell_1 #cell_1,[data-hoveredClass="6,3"] #row_4_cell_2 #cell_2,[data-hoveredClass="6,3"] #row_4_cell_3 #cell_3,[data-hoveredClass="6,3"] #row_5_cell_1 #cell_1,[data-hoveredClass="6,3"] #row_5_cell_2 #cell_2,[data-hoveredClass="6,3"] #row_5_cell_3 #cell_3,[data-hoveredClass="6,3"] #row_6_cell_1 #cell_1,[data-hoveredClass="6,3"] #row_6_cell_2 #cell_2,[data-hoveredClass="6,3"] #row_6_cell_3 #cell_3,[data-hoveredClass="6,4"] #row_1_cell_1 #cell_1,[data-hoveredClass="6,4"] #row_1_cell_2 #cell_2,[data-hoveredClass="6,4"] #row_1_cell_3 #cell_3,[data-hoveredClass="6,4"] #row_1_cell_4 #cell_4,[data-hoveredClass="6,4"] #row_2_cell_1 #cell_1,[data-hoveredClass="6,4"] #row_2_cell_2 #cell_2,[data-hoveredClass="6,4"] #row_2_cell_3 #cell_3,[data-hoveredClass="6,4"] #row_2_cell_4 #cell_4,[data-hoveredClass="6,4"] #row_3_cell_1 #cell_1,[data-hoveredClass="6,4"] #row_3_cell_2 #cell_2,[data-hoveredClass="6,4"] #row_3_cell_3 #cell_3,[data-hoveredClass="6,4"] #row_3_cell_4 #cell_4,[data-hoveredClass="6,4"] #row_4_cell_1 #cell_1,[data-hoveredClass="6,4"] #row_4_cell_2 #cell_2,[data-hoveredClass="6,4"] #row_4_cell_3 #cell_3,[data-hoveredClass="6,4"] #row_4_cell_4 #cell_4,[data-hoveredClass="6,4"] #row_5_cell_1 #cell_1,[data-hoveredClass="6,4"] #row_5_cell_2 #cell_2,[data-hoveredClass="6,4"] #row_5_cell_3 #cell_3,[data-hoveredClass="6,4"] #row_5_cell_4 #cell_4,[data-hoveredClass="6,4"] #row_6_cell_1 #cell_1,[data-hoveredClass="6,4"] #row_6_cell_2 #cell_2,[data-hoveredClass="6,4"] #row_6_cell_3 #cell_3,[data-hoveredClass="6,4"] #row_6_cell_4 #cell_4,[data-hoveredClass="6,5"] #row_1_cell_1 #cell_1,[data-hoveredClass="6,5"] #row_1_cell_2 #cell_2,[data-hoveredClass="6,5"] #row_1_cell_3 #cell_3,[data-hoveredClass="6,5"] #row_1_cell_4 #cell_4,[data-hoveredClass="6,5"] #row_1_cell_5 #cell_5,[data-hoveredClass="6,5"] #row_2_cell_1 #cell_1,[data-hoveredClass="6,5"] #row_2_cell_2 #cell_2,[data-hoveredClass="6,5"] #row_2_cell_3 #cell_3,[data-hoveredClass="6,5"] #row_2_cell_4 #cell_4,[data-hoveredClass="6,5"] #row_2_cell_5 #cell_5,[data-hoveredClass="6,5"] #row_3_cell_1 #cell_1,[data-hoveredClass="6,5"] #row_3_cell_2 #cell_2,[data-hoveredClass="6,5"] #row_3_cell_3 #cell_3,[data-hoveredClass="6,5"] #row_3_cell_4 #cell_4,[data-hoveredClass="6,5"] #row_3_cell_5 #cell_5,[data-hoveredClass="6,5"] #row_4_cell_1 #cell_1,[data-hoveredClass="6,5"] #row_4_cell_2 #cell_2,[data-hoveredClass="6,5"] #row_4_cell_3 #cell_3,[data-hoveredClass="6,5"] #row_4_cell_4 #cell_4,[data-hoveredClass="6,5"] #row_4_cell_5 #cell_5,[data-hoveredClass="6,5"] #row_5_cell_1 #cell_1,[data-hoveredClass="6,5"] #row_5_cell_2 #cell_2,[data-hoveredClass="6,5"] #row_5_cell_3 #cell_3,[data-hoveredClass="6,5"] #row_5_cell_4 #cell_4,[data-hoveredClass="6,5"] #row_5_cell_5 #cell_5,[data-hoveredClass="6,5"] #row_6_cell_1 #cell_1,[data-hoveredClass="6,5"] #row_6_cell_2 #cell_2,[data-hoveredClass="6,5"] #row_6_cell_3 #cell_3,[data-hoveredClass="6,5"] #row_6_cell_4 #cell_4,[data-hoveredClass="6,5"] #row_6_cell_5 #cell_5,[data-hoveredClass="6,6"] #row_1_cell_1 #cell_1,[data-hoveredClass="6,6"] #row_1_cell_2 #cell_2,[data-hoveredClass="6,6"] #row_1_cell_3 #cell_3,[data-hoveredClass="6,6"] #row_1_cell_4 #cell_4,[data-hoveredClass="6,6"] #row_1_cell_5 #cell_5,[data-hoveredClass="6,6"] #row_1_cell_6 #cell_6,[data-hoveredClass="6,6"] #row_2_cell_1 #cell_1,[data-hoveredClass="6,6"] #row_2_cell_2 #cell_2,[data-hoveredClass="6,6"] #row_2_cell_3 #cell_3,[data-hoveredClass="6,6"] #row_2_cell_4 #cell_4,[data-hoveredClass="6,6"] #row_2_cell_5 #cell_5,[data-hoveredClass="6,6"] #row_2_cell_6 #cell_6,[data-hoveredClass="6,6"] #row_3_cell_1 #cell_1,[data-hoveredClass="6,6"] #row_3_cell_2 #cell_2,[data-hoveredClass="6,6"] #row_3_cell_3 #cell_3,[data-hoveredClass="6,6"] #row_3_cell_4 #cell_4,[data-hoveredClass="6,6"] #row_3_cell_5 #cell_5,[data-hoveredClass="6,6"] #row_3_cell_6 #cell_6,[data-hoveredClass="6,6"] #row_4_cell_1 #cell_1,[data-hoveredClass="6,6"] #row_4_cell_2 #cell_2,[data-hoveredClass="6,6"] #row_4_cell_3 #cell_3,[data-hoveredClass="6,6"] #row_4_cell_4 #cell_4,[data-hoveredClass="6,6"] #row_4_cell_5 #cell_5,[data-hoveredClass="6,6"] #row_4_cell_6 #cell_6,[data-hoveredClass="6,6"] #row_5_cell_1 #cell_1,[data-hoveredClass="6,6"] #row_5_cell_2 #cell_2,[data-hoveredClass="6,6"] #row_5_cell_3 #cell_3,[data-hoveredClass="6,6"] #row_5_cell_4 #cell_4,[data-hoveredClass="6,6"] #row_5_cell_5 #cell_5,[data-hoveredClass="6,6"] #row_5_cell_6 #cell_6,[data-hoveredClass="6,6"] #row_6_cell_1 #cell_1,[data-hoveredClass="6,6"] #row_6_cell_2 #cell_2,[data-hoveredClass="6,6"] #row_6_cell_3 #cell_3,[data-hoveredClass="6,6"] #row_6_cell_4 #cell_4,[data-hoveredClass="6,6"] #row_6_cell_5 #cell_5,[data-hoveredClass="6,6"] #row_6_cell_6 #cell_6{background:#d5e4f9;border:1px solid #c0cffd}',""])},function(e,t){e.exports='<svg width="18" height="14"><path d="M2.833 8v1.95a1.7 1.7 0 0 0 1.7 1.7h3.45V8h-5.15zm0-2h5.15V2.35h-3.45a1.7 1.7 0 0 0-1.7 1.7V6zm12.3 2h-5.15v3.65h3.45a1.7 1.7 0 0 0 1.7-1.7V8zm0-2V4.05a1.7 1.7 0 0 0-1.7-1.7h-3.45V6h5.15zM4.533.1h8.9a3.95 3.95 0 0 1 3.95 3.95v5.9a3.95 3.95 0 0 1-3.95 3.95h-8.9a3.95 3.95 0 0 1-3.95-3.95v-5.9A3.95 3.95 0 0 1 4.533.1z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-21 0 512 512" width="18" height="18"><path d="M181.332031 106.667969c-3.925781 0-7.828125-1.429688-10.921875-4.3125l-80-74.664063c-4.820312-4.480468-6.378906-11.457031-3.96875-17.558594C88.851562 4.011719 94.761719 0 101.332031 0h160c6.570313 0 12.480469 4.011719 14.871094 10.132812 2.410156 6.125.851563 13.078126-3.96875 17.558594l-80 74.664063c-3.070313 2.882812-6.976563 4.3125-10.902344 4.3125zM141.910156 32l39.421875 36.777344L220.757812 32zm0 0M90.667969 512H37.332031C16.746094 512 0 495.253906 0 474.667969V144c0-20.585938 16.746094-37.332031 37.332031-37.332031h53.335938C111.253906 106.667969 128 123.414062 128 144v330.667969C128 495.253906 111.253906 512 90.667969 512zM37.332031 138.667969C34.390625 138.667969 32 141.054688 32 144v330.667969C32 477.609375 34.390625 480 37.332031 480h53.335938C93.609375 480 96 477.609375 96 474.667969V144c0-2.945312-2.390625-5.332031-5.332031-5.332031zm0 0M432 512H272c-20.585938 0-37.332031-16.746094-37.332031-37.332031V144c0-20.585938 16.746093-37.332031 37.332031-37.332031h160c20.585938 0 37.332031 16.746093 37.332031 37.332031v330.667969C469.332031 495.253906 452.585938 512 432 512zM272 138.667969c-2.945312 0-5.332031 2.386719-5.332031 5.332031v330.667969C266.667969 477.609375 269.054688 480 272 480h160c2.945312 0 5.332031-2.390625 5.332031-5.332031V144c0-2.945312-2.386719-5.332031-5.332031-5.332031zm0 0"></path><path d="M112 325.332031H16c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h96c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0M453.332031 325.332031H250.667969c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h202.664062c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"></path><path d="M352 512c-8.832031 0-16-7.167969-16-16V122.667969c0-8.832031 7.167969-16 16-16s16 7.167969 16 16V496c0 8.832031-7.167969 16-16 16zm0 0"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-21 0 512 512" width="18" height="18"><path d="M288 106.667969c-3.925781 0-7.851562-1.429688-10.921875-4.3125l-80-74.664063c-4.800781-4.480468-6.378906-11.457031-3.96875-17.558594C195.519531 4.03125 201.429688 0 208 0h160c6.570312 0 12.480469 4.011719 14.890625 10.132812 2.410156 6.125.832031 13.078126-3.96875 17.558594l-80 74.664063c-3.070313 2.882812-6.996094 4.3125-10.921875 4.3125zM248.597656 32L288 68.777344 327.402344 32zm0 0M432 512h-53.332031c-20.589844 0-37.335938-16.746094-37.335938-37.332031V144c0-20.585938 16.746094-37.332031 37.335938-37.332031H432c20.585938 0 37.332031 16.746093 37.332031 37.332031v330.667969C469.332031 495.253906 452.585938 512 432 512zm-53.332031-373.332031c-2.945313 0-5.335938 2.386719-5.335938 5.332031v330.667969c0 2.941406 2.390625 5.332031 5.335938 5.332031H432c2.945312 0 5.332031-2.390625 5.332031-5.332031V144c0-2.945312-2.386719-5.332031-5.332031-5.332031zm0 0M197.332031 512h-160C16.746094 512 0 495.253906 0 474.667969V144c0-20.585938 16.746094-37.332031 37.332031-37.332031h160c20.589844 0 37.335938 16.746093 37.335938 37.332031v330.667969c0 20.585937-16.746094 37.332031-37.335938 37.332031zm-160-373.332031C34.390625 138.667969 32 141.054688 32 144v330.667969C32 477.609375 34.390625 480 37.332031 480h160c2.945313 0 5.335938-2.390625 5.335938-5.332031V144c0-2.945312-2.390625-5.332031-5.335938-5.332031zm0 0"></path><path d="M453.332031 325.332031h-96c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h96c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0M218.667969 325.332031H16c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h202.667969c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"></path><path d="M117.332031 512c-8.832031 0-16-7.167969-16-16V122.667969c0-8.832031 7.167969-16 16-16s16 7.167969 16 16V496c0 8.832031-7.167969 16-16 16zm0 0"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -21 512 512" width="18" height="18"><path d="M16 277.332031c-1.984375 0-3.96875-.363281-5.867188-1.109375C4.011719 273.8125 0 267.902344 0 261.332031v-160c0-6.570312 4.011719-12.480469 10.132812-14.890625 6.144532-2.410156 13.078126-.851562 17.558594 3.96875l74.664063 80c5.761719 6.144532 5.761719 15.679688 0 21.824219l-74.664063 80C24.597656 275.5625 20.351562 277.332031 16 277.332031zm16-135.402343v78.804687l36.777344-39.402344zm0 0M474.667969 128H144c-20.585938 0-37.332031-16.746094-37.332031-37.332031V37.332031C106.667969 16.746094 123.414062 0 144 0h330.667969C495.253906 0 512 16.746094 512 37.332031v53.335938C512 111.253906 495.253906 128 474.667969 128zM144 32c-2.945312 0-5.332031 2.390625-5.332031 5.332031v53.335938C138.667969 93.609375 141.054688 96 144 96h330.667969C477.609375 96 480 93.609375 480 90.667969V37.332031C480 34.390625 477.609375 32 474.667969 32zm0 0M474.667969 469.332031H144c-20.585938 0-37.332031-16.746093-37.332031-37.332031V272c0-20.585938 16.746093-37.332031 37.332031-37.332031h330.667969C495.253906 234.667969 512 251.414062 512 272v160c0 20.585938-16.746094 37.332031-37.332031 37.332031zM144 266.667969c-2.945312 0-5.332031 2.386719-5.332031 5.332031v160c0 2.945312 2.386719 5.332031 5.332031 5.332031h330.667969C477.609375 437.332031 480 434.945312 480 432V272c0-2.945312-2.390625-5.332031-5.332031-5.332031zm0 0"></path><path d="M309.332031 128c-8.832031 0-16-7.167969-16-16V16c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v96c0 8.832031-7.167969 16-16 16zm0 0M309.332031 469.332031c-8.832031 0-16-7.167969-16-16V250.667969c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v202.664062c0 8.832031-7.167969 16-16 16zm0 0"></path><path d="M496 368H122.667969c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16H496c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -21 512 512" width="18" height="18"><path d="M16 384c-1.984375 0-3.96875-.363281-5.867188-1.109375C4.011719 380.480469 0 374.570312 0 368V208c0-6.570312 4.011719-12.480469 10.132812-14.890625 6.144532-2.410156 13.078126-.851563 17.558594 3.96875l74.664063 80c5.761719 6.144531 5.761719 15.679687 0 21.824219l-74.664063 80C24.597656 382.230469 20.351562 384 16 384zm16-135.402344v78.804688L68.777344 288zm0 0M474.667969 469.332031H144c-20.585938 0-37.332031-16.746093-37.332031-37.332031v-53.332031c0-20.589844 16.746093-37.335938 37.332031-37.335938h330.667969c20.585937 0 37.332031 16.746094 37.332031 37.335938V432c0 20.585938-16.746094 37.332031-37.332031 37.332031zm-330.667969-96c-2.945312 0-5.332031 2.390625-5.332031 5.335938V432c0 2.945312 2.386719 5.332031 5.332031 5.332031h330.667969C477.609375 437.332031 480 434.945312 480 432v-53.332031c0-2.945313-2.390625-5.335938-5.332031-5.335938zm0 0M474.667969 234.667969H144c-20.585938 0-37.332031-16.746094-37.332031-37.335938v-160C106.667969 16.746094 123.414062 0 144 0h330.667969C495.253906 0 512 16.746094 512 37.332031v160c0 20.589844-16.746094 37.335938-37.332031 37.335938zM144 32c-2.945312 0-5.332031 2.390625-5.332031 5.332031v160c0 2.945313 2.386719 5.335938 5.332031 5.335938h330.667969c2.941406 0 5.332031-2.390625 5.332031-5.335938v-160C480 34.390625 477.609375 32 474.667969 32zm0 0"></path><path d="M309.332031 469.332031c-8.832031 0-16-7.167969-16-16v-96c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v96c0 8.832031-7.167969 16-16 16zm0 0M309.332031 234.667969c-8.832031 0-16-7.167969-16-16V16c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v202.667969c0 8.832031-7.167969 16-16 16zm0 0"></path><path d="M496 133.332031H122.667969c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16H496c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.381 15.381" width="18" height="18"><g><path d="M0 1.732v7.732h6.053c0-.035-.004-.07-.004-.104 0-.434.061-.854.165-1.255H1.36V3.092h12.662v2.192c.546.396 1.01.897 1.359 1.477V1.732H0z"></path><path d="M11.196 5.28c-2.307 0-4.183 1.877-4.183 4.184 0 2.308 1.876 4.185 4.183 4.185 2.309 0 4.185-1.877 4.185-4.185 0-2.307-1.876-4.184-4.185-4.184zm0 7.233c-1.679 0-3.047-1.367-3.047-3.049 0-1.68 1.368-3.049 3.047-3.049 1.684 0 3.05 1.369 3.05 3.049 0 1.682-1.366 3.049-3.05 3.049z"></path><path d="M9.312 8.759h3.844v1.104H9.312z"></path></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="18" height="18"><path d="M13.594 20.85V24h-10V2h10v3.15c.633-.323 1.304-.565 2-.727V1c0-.551-.448-1-1-1h-12c-.55 0-1 .449-1 1v24c0 .551.449 1 1 1h12c.552 0 1-.449 1-1v-3.424c-.696-.161-1.367-.403-2-.726z"></path><path d="M17.594 6.188c-3.762 0-6.813 3.051-6.812 6.813-.001 3.761 3.05 6.812 6.812 6.812s6.813-3.051 6.813-6.813-3.052-6.812-6.813-6.812zm3.632 7.802l-7.267.001v-1.982h7.268l-.001 1.981z"></path></svg>'},function(e,t,n){"use strict";function o(e){return!(null==e)}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i=document.createElement(e);if(o(t))for(let s=0;s<t.length;s++)o(t[s])&&i.classList.add(t[s]);if(o(n))for(let o in n)i.setAttribute(o,n[o]);if(o(r))for(let s=0;s<r.length;s++)o(r[s])&&i.appendChild(r[s]);return i}n.r(t),n.d(t,"TableConstructor",(function(){return f})),n(3),n(6);const i="tc-table",s="tc-table__inp",a="tc-table__cell",l="tc-table__wrap",c="tc-table__area",d="tc-table__highlight";class u{constructor(){this._numberOfColumns=0,this._numberOfRows=0,this._element=this._createTableWrapper(),this._table=this._element.querySelector("table"),this._selectedCell=null,this._attachEvents()}get selectedCell(){return this._selectedCell}set selectedCell(e){this._selectedCell&&this._selectedCell.classList.remove(d),this._selectedCell=e,this._selectedCell&&this._selectedCell.classList.add(d)}get selectedRow(){return this.selectedCell?this.selectedCell.closest("tr"):null}insertColumnAfter(){this.insertColumn(1),this.focusCellOnSelectedCell()}insertColumnBefore(){this.insertColumn(),this.focusCellOnSelectedCell()}insertRowBefore(){this.insertRow(),this.focusCellOnSelectedCell()}insertRowAfter(){this.insertRow(1),this.focusCellOnSelectedCell()}insertColumn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e=Math.min(Math.max(e,0),1);const t=this.selectedCell?this.selectedCell.cellIndex+e:0;this._numberOfColumns++;const n=this._table.rows;for(let o=0;o<n.length;o++){const e=n[o].insertCell(t);this._fillCell(e)}}deleteColumn(){if(!this.selectedCell)return;const e=this.selectedCell.cellIndex;this._numberOfColumns--;const t=this._table.rows;for(let n=0;n<t.length;n++)t[n].deleteCell(e)}insertRow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e=Math.min(Math.max(e,0),1);const t=this.selectedRow?this.selectedRow.rowIndex+e:0,n=this._table.insertRow(t);return this._numberOfRows++,this._fillRow(n),n}deleteRow(){if(!this.selectedRow)return;const e=this.selectedRow.rowIndex;this._table.deleteRow(e),this._numberOfRows--}get htmlElement(){return this._element}get body(){return this._table}_createTableWrapper(){return r("div",[l],null,[r("table",[i])])}_createContenteditableArea(){return r("div",[s],{contenteditable:"true"})}_fillCell(e){e.classList.add(a);const t=this._createContenteditableArea();e.appendChild(r("div",[c],null,[t]))}_fillRow(e){for(let t=0;t<this._numberOfColumns;t++){const t=e.insertCell();this._fillCell(t)}}_attachEvents(){this._table.addEventListener("focus",(e=>{this._focusEditField(e)}),!0),this._table.addEventListener("keydown",(e=>{this._pressedEnterInEditField(e)})),this._table.addEventListener("click",(e=>{this._clickedOnCell(e)})),this.htmlElement.addEventListener("keydown",(e=>{this._containerKeydown(e)}))}_focusEditField(e){this.selectedCell="TD"===e.target.tagName?e.target:e.target.closest("td")}focusCellOnSelectedCell(){this.selectedCell.childNodes[0].childNodes[0].focus()}_pressedEnterInEditField(e){e.target.classList.contains(s)&&("Enter"!==e.key||e.shiftKey||e.preventDefault())}_clickedOnCell(e){e.target.classList.contains(a)&&e.target.querySelector("."+s).focus()}_containerKeydown(e){"Enter"===e.key&&e.ctrlKey&&this._containerEnterPressed(e)}_containerEnterPressed(e){this.insertRow(1).cells[0].click()}}const h="tc-editor",p="tc-table__inp";class f{constructor(e,t,n){this._table=new u;const o=this._resizeTable(e,t);this._fillTable(e,o),this._container=r("div",[h,n.styles&&n.styles.block],null,[this._table.htmlElement])}get htmlElement(){return this._container}get table(){return this._table}_fillTable(e,t){if(void 0!==e.content)for(let n=0;n<t.rows&&n<e.content.length;n++)for(let o=0;o<t.cols&&o<e.content[n].length;o++)this._table.body.rows[n].cells[o].querySelector("."+p).innerHTML=e.content[n][o]}_resizeTable(e,t){const n=Array.isArray(e.content),o=!!n&&e.content.length,r=n?e.content.length:void 0,i=o?e.content[0].length:void 0,s=Number.parseInt(t.rows),a=Number.parseInt(t.cols),l=!isNaN(s)&&s>0?s:void 0,c=!isNaN(a)&&a>0?a:void 0,d=r||l||1,u=i||c||1;for(let h=0;h<d;h++)this._table.insertRow();for(let h=0;h<u;h++)this._table.insertColumn();return{rows:d,cols:u}}}}])},7329:e=>{var t;self,t=()=>(()=>{var e={424:(e,t,n)=>{(t=n(645)(!1)).push([e.id,".picker_wrapper.popup {\n  z-index: 99;\n  width: 170px;\n  margin: 0;\n  box-shadow: 0 0 10px 1px #eaeaea;\n  background: #ffffff;\n}\n\n.picker_arrow {\n  display: none;\n}\n\n.layout_default .picker_slider, .layout_default .picker_selector {\n  padding: 5px;\n}\n\n.colorPlugin.ce-inline-tool {\n  width: 32px;\n  border-radius: 3px;\n}\n\n.colorPlugin.ce-inline-tool--active svg {\n  fill: #3c99ff;\n}\n\n#color-left-btn {\n  height: 35px;\n  width: 18px;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n}\n\n#color-left-btn:hover {\n  border-radius: 5px 0 0 5px;\n  background: rgba(203, 203, 203, 0.49);\n}\n\n#color-text {\n  padding: 0 4px;\n}\n\n#color-btn-text {\n  height: 15px;\n}\n\n",""]),e.exports=t},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o,r,i=e[1]||"",s=e[3];if(!s)return i;if(t&&"function"==typeof btoa){var a=(n=s,o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(r," */")),l=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[i].concat(l).concat([a]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(o)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(r[s]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);o&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},548:(e,t,n)=>{var o=n(379),r=n(424);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.id,r,""]]),o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},379:(e,t,n)=>{"use strict";var o,r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function s(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},o=[],r=0;r<e.length;r++){var a=e[r],l=t.base?a[0]+t.base:a[0],c=n[l]||0,d="".concat(l," ").concat(c);n[l]=c+1;var u=s(d),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(i[u].references++,i[u].updater(h)):i.push({identifier:d,updater:g(h,t),references:1}),o.push(d)}return o}function l(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var i=n.nc;i&&(o.nonce=i)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var s=r(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,n,o){var r=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=d(t,r);else{var i=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function h(e,t,n){var o=n.css,r=n.media,i=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var p=null,f=0;function g(e,t){var n,o,r;if(t.singleton){var i=f++;n=p||(p=l(t)),o=u.bind(null,n,i,!1),r=u.bind(null,n,i,!0)}else n=l(t),o=h.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var n=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var r=s(n[o]);i[r].references--}for(var l=a(e,t),c=0;c<n.length;c++){var d=s(n[c]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}n=l}}}},452:e=>{e.exports={markerIcon:'<svg fill="#000000" height="34px" width="34px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" \n\t viewBox="0 0 491.644 491.644" xml:space="preserve">\n<g>\n\t<path d="M456.623,2.282c-42.758-20.283-141.107,96.84-223.473,264.224c-2.35,4.776-2.686,10.294-0.936,15.32\n\t\tc1.75,5.026,5.442,9.145,10.251,11.426L366.758,352.2c4.809,2.281,10.332,2.538,15.333,0.714c5.001-1.825,9.059-5.579,11.272-10.42\n\t\tC470.883,172.829,499.385,22.562,456.623,2.282z"/>\n\t<path d="M34.71,461.799l-17.257,16.708c-2.225,2.17-2.934,5.475-1.773,8.363c1.179,2.886,3.985,4.773,7.099,4.773h160.887\n\t\tc-1.364-5.043-0.921-10.445,1.391-15.306l7.919-16.692H40.036C38.036,459.646,36.129,460.419,34.71,461.799z"/>\n\t<path d="M264.766,448.864l-32.615-15.458c-1.046-0.502-2.161-0.744-3.257-0.744c-2.87,0-5.611,1.614-6.901,4.372l-22.001,46.384\n\t\tc-0.871,1.789-0.723,3.895,0.341,5.564c1.046,1.661,2.888,2.661,4.855,2.661h0.046l44.275-0.378\n\t\tc2.206-0.016,4.206-1.299,5.159-3.292l13.724-28.925c0.856-1.838,0.967-3.936,0.29-5.846\n\t\tC268.004,451.292,266.585,449.728,264.766,448.864z"/>\n\t<path d="M348.445,366.038l-112.572-51.392c-8.909-4.067-19.434-0.227-23.63,8.622c-2.551,5.378-3.58,11.353-2.975,17.275\n\t\tl5.2,50.909c0.703,6.882,4.983,12.884,11.261,15.792l60.031,27.797c6.688,3.097,14.548,2.179,20.343-2.375l45.983-36.137\n\t\tc4.931-3.875,7.487-10.041,6.743-16.269C358.086,374.032,354.151,368.642,348.445,366.038z"/>\n</g>\n</svg>',textIcon:'<svg fill="#000000" viewBox="-6 0 512 512" xmlns="http://www.w3.org/2000/svg"><g stroke-width="0"></g><g stroke-linecap="round" stroke-linejoin="round"></g><g><title>text</title><path d="M365 432L328 352 172 352 135 432 64 432 227 80 272 80 436 432 365 432ZM201 288L299 288 250 183 201 288Z"></path></g></svg>'}},138:(e,t,n)=>{const o=n(442),{markerIcon:r,textIcon:i}=n(452),{getDefaultColorCache:s,handleCSSVariables:a}=n(697);n(548).toString(),e.exports=class{constructor(e){let{config:t,api:n}=e;this.api=n,this.config=t,this.clickedOnLeft=!1,this.pluginType=this.config.type||"text",this.parentTag="marker"===this.pluginType?"MARK":"FONT",this.hasCustomPicker=this.config.customPicker||!1,this.color=a(s(this.config.defaultColor,this.pluginType)),this.picker=null,this.icon=null,this.button=null,this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}static get isInline(){return!0}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add("colorPlugin"),this.button.classList.add(this.iconClasses.base),this.button.appendChild(this.createLeftButton()),this.button.appendChild(this.createRightButton(this)),this.button}createLeftButton(){return this.icon||(this.icon=document.createElement("div"),this.icon.id="color-left-btn",this.icon.appendChild(this.createButtonIcon()),this.icon.addEventListener("click",(()=>this.clickedOnLeft=!0))),this.icon}createButtonIcon(){const e=document.createElement("div");e.id="color-btn-text";const t="marker"===this.pluginType?r:i;return e.innerHTML=this.config.icon||t,e}createRightButton(e){return this.picker||(this.picker=new o.ColorPlugin({onColorPicked:function(t){e.color=t},hasCustomPicker:this.hasCustomPicker,defaultColor:this.config.defaultColor,colorCollections:this.config.colorCollections,type:this.pluginType})),this.picker}surround(e){if(!e)return;const t=this.api.selection.findParentTag("SPAN");t&&this.unwrap(t);const n=this.api.selection.findParentTag(this.parentTag);n?this.unwrap(n):this.wrap(e),this.clickedOnLeft=!1}wrap(e){const t=e.extractContents(),n=document.createElement(this.parentTag);n.appendChild(t),e.insertNode(n),"marker"===this.pluginType?this.wrapMarker(n):this.wrapTextColor(n),this.api.selection.expandToTag(n)}wrapMarker(e){e.style.backgroundColor=this.color;const t=this.api.selection.findParentTag("FONT");t&&(e.style.color=t.style.color)}wrapTextColor(e){e.style.color=this.color}unwrap(e){this.api.selection.expandToTag(e);const t=window.getSelection(),n=t.getRangeAt(0),o=n.extractContents();this.clickedOnLeft?this.removeWrapper(e):this.updateWrapper(e),n.insertNode(o),t.removeAllRanges(),t.addRange(n)}updateWrapper(e){"marker"===this.pluginType?e.style.backgroundColor=this.color:e.style.color=this.color}removeWrapper(e){e.parentNode.removeChild(e)}checkState(){const e=this.api.selection.findParentTag("SPAN"),t=this.api.selection.findParentTag(this.parentTag);let n=e?this.handleLegacyWrapper(e,t):t;return this.button.classList.toggle(this.iconClasses.active,!!n),!!n}handleLegacyWrapper(e,t){return"marker"===this.pluginType?e:t&e}static get sanitize(){return{font:!0,span:!0,mark:!0}}clear(){this.picker=null,this.icon=null}}},442:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ColorPlugin:()=>c});class o extends HTMLElement{static get observedAttributes(){return["disabled","icon","loading","href","htmltype"]}constructor(){super(),this.attachShadow({mode:"open"}).innerHTML='\n        <style>\n        :host{ \n            position:relative; \n            display:inline-flex; \n            padding: .25em .625em;\n            box-sizing:border-box; \n            vertical-align: middle;\n            line-height: 1.8;\n            width: 5px;\n            overflow:hidden; \n            align-items:center;\n            justify-content: center;\n            font-size: 14px; \n            color: var(--fontColor,#333);  \n            border-radius: var(--borderRadius,.25em);\n            background: var(--fontColor,#333); \n            transition:background .3s,box-shadow .3s,border-color .3s,color .3s;\n        }\n        :host([shape="circle"]){ \n            border-radius:50%; \n        }\n        /*\n        :host(:not([disabled]):active){\n            z-index:1;\n            transform:translateY(.1em);\n        }\n        */\n        :host([disabled]),:host([loading]){\n            pointer-events: none; \n            opacity:.6; \n        }\n        :host([block]){ \n            display:flex; \n        }\n        :host([disabled]:not([type])){ \n            background:rgba(0,0,0,.1); \n        }\n        :host([disabled]) .btn,:host([loading]) .btn{ \n            cursor: not-allowed; \n            pointer-events: all; \n        }\n        :host(:not([type="primary"]):not([type="danger"]):not([disabled]):hover),\n        :host(:not([type="primary"]):not([type="danger"]):focus-within),\n        :host([type="flat"][focus]){ \n            color:var(--themeColor,#42b983); \n            border-color: var(--themeColor,#42b983); \n        }\n        :host(:not([type="primary"]):not([type="danger"])) .btn::after{ \n            background-image: radial-gradient(circle, var(--themeColor,#42b983) 10%, transparent 10.01%); \n        }\n        :host([type="primary"]){ \n            color: #fff; \n            background:var(--themeBackground,var(--themeColor,#42b983));\n        }\n        :host([type="danger"]){ \n            color: #fff; \n            background:var(--themeBackground,var(--dangerColor,#ff7875));\n        }\n        :host([type="dashed"]){ \n            border-style:dashed \n        }\n        :host([type="flat"]),:host([type="primary"]),:host([type="danger"]){ \n            border:0;\n            padding: calc( .25em + 1px ) calc( .625em + 1px );\n        }\n        :host([type="flat"]) .btn::before{ \n            content:\'\'; \n            position:absolute; \n            background:var(--themeColor,#42b983);\n            pointer-events:none; \n            left:0; \n            right:0; \n            top:0; \n            bottom:0; \n            opacity:0; \n            transition:.3s;\n        }\n        :host([type="flat"]:not([disabled]):hover) .btn::before{ \n            opacity:.1 \n        }\n        :host(:not([disabled]):hover){ \n            z-index:1 \n        }\n        :host([type="flat"]:focus-within) .btn:before,\n        :host([type="flat"][focus]) .btn:before{ \n            opacity:.2; \n        }\n        :host(:focus-within){ \n            /*box-shadow: 0 0 10px rgba(0,0,0,0.1);*/ \n        }\n        .btn{ \n            background:none; \n            outline:0; \n            border:0; \n            position: \n            absolute; \n            left:0; \n            top:0;\n            width:100%;\n            height:100%;\n            padding:0;\n            user-select: none;\n            cursor: unset;\n        }\n        xy-loading{ \n            margin-right: 0.35em;  \n        }\n        ::-moz-focus-inner{\n            border:0;\n        }\n        .btn::before{\n            content: "";\n            display: block;\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            left:0;\n            top:0;\n            transition:.2s;\n            background:#fff;\n            opacity:0;\n        }\n        :host(:not([disabled]):active) .btn::before{ \n            opacity:.2;\n        }\n        .btn::after {\n            content: "";\n            display: block;\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            left: var(--x,0); \n            top: var(--y,0);\n            pointer-events: none;\n            background-image: radial-gradient(circle, #fff 10%, transparent 10.01%);\n            background-repeat: no-repeat;\n            background-position: 50%;\n            transform: translate(-50%,-50%) scale(10);\n            opacity: 0;\n            transition: transform .3s, opacity .8s;\n        }\n        .btn:not([disabled]):active::after {\n            transform: translate(-50%,-50%) scale(0);\n            opacity: .3;\n            transition: 0s;\n        }\n        xy-icon{\n            margin-right: 0.35em;\n            transition: none;\n        }\n        :host(:empty) xy-icon{\n            margin: auto;\n        }\n        :host(:empty){\n            padding: .65em;\n        }\n        :host([type="flat"]:empty),:host([type="primary"]:empty){ \n            padding: calc( .65em + 1px );\n        }\n        ::slotted(xy-icon){\n            transition: none;\n        }\n        :host([href]){\n            cursor:pointer;\n        }\n        </style>\n        <'.concat(this.href?"a":"button"," ").concat(this.htmltype?'type="'+this.htmltype+'"':""," ").concat(this.download&&this.href?'download="'+this.download+'"':""," ").concat(this.href?'href="'+this.href+'" target="'+this.target+'" rel="'+this.rel+'"':"",' class="btn" id="btn"></').concat(this.href?"a":"button",">").concat(!this.loading&&this.icon&&"null"!=this.icon?'<xy-icon id="icon" name='+this.icon+"></xy-icon>":"","<slot></slot>\n        ")}focus(){this.btn.focus()}get disabled(){return null!==this.getAttribute("disabled")}get toggle(){return null!==this.getAttribute("toggle")}get htmltype(){return this.getAttribute("htmltype")}get name(){return this.getAttribute("name")}get checked(){return null!==this.getAttribute("checked")}get href(){return this.getAttribute("href")}get target(){return this.getAttribute("target")||"_blank"}get rel(){return this.getAttribute("rel")}get download(){return this.getAttribute("download")}get icon(){return this.getAttribute("icon")}get loading(){return null!==this.getAttribute("loading")}set icon(e){this.setAttribute("icon",e)}set htmltype(e){this.setAttribute("htmltype",e)}set href(e){this.setAttribute("href",e)}set disabled(e){null===e||!1===e?this.removeAttribute("disabled"):this.setAttribute("disabled","")}set checked(e){null===e||!1===e?this.removeAttribute("checked"):this.setAttribute("checked","")}set loading(e){null===e||!1===e?this.removeAttribute("loading"):this.setAttribute("loading","")}connectedCallback(){this.btn=this.shadowRoot.getElementById("btn"),this.ico=this.shadowRoot.getElementById("icon"),this.load=document.createElement("xy-loading"),this.load.style.color="inherit",this.btn.addEventListener("mousedown",(function(e){if(!this.disabled){const{left:t,top:n}=this.getBoundingClientRect();this.style.setProperty("--x",e.clientX-t+"px"),this.style.setProperty("--y",e.clientY-n+"px")}})),this.addEventListener("click",(function(e){this.toggle&&(this.checked=!this.checked)})),this.btn.addEventListener("keydown",(e=>{13===e.keyCode&&e.stopPropagation()})),this.disabled=this.disabled,this.loading=this.loading}attributeChangedCallback(e,t,n){"disabled"==e&&this.btn&&(null!==n?(this.btn.setAttribute("disabled","disabled"),this.href&&this.btn.removeAttribute("href")):(this.btn.removeAttribute("disabled"),this.href&&(this.btn.href=this.href))),"loading"==e&&this.btn&&(null!==n?(this.shadowRoot.prepend(this.load),this.btn.setAttribute("disabled","disabled")):(this.shadowRoot.removeChild(this.load),this.btn.removeAttribute("disabled"))),"icon"==e&&this.ico&&(this.ico.name=n),"href"==e&&this.btn&&(this.disabled||(this.btn.href=n)),"htmltype"==e&&this.btn&&(this.btn.type=n)}}customElements.get("xy-button")||customElements.define("xy-button",o);class r extends HTMLElement{static get observedAttributes(){return["disabled"]}constructor(){super(),this.attachShadow({mode:"open"}).innerHTML='\n        <style>\n        :host {\n            display:inline-flex;\n        }\n        ::slotted(xy-button:not(:first-of-type):not(:last-of-type)){\n            border-radius:0;\n        }\n        ::slotted(xy-button){\n            margin:0!important;\n        }\n        ::slotted(xy-button:not(:first-of-type)){\n            margin-left:-1px!important;\n        }\n        ::slotted(xy-button[type]:not([type="dashed"]):not(:first-of-type)){\n            margin-left:1px!important;\n        }\n        ::slotted(xy-button:first-of-type){\n            border-top-right-radius: 0;\n            border-bottom-right-radius: 0px;\n        }\n        ::slotted(xy-button:last-of-type){\n            border-top-left-radius: 0;\n            border-bottom-left-radius: 0;\n        }\n        </style>\n        <slot></slot>\n        '}get disabled(){return null!==this.getAttribute("disabled")}set disabled(e){null===e||!1===e?this.removeAttribute("disabled"):this.setAttribute("disabled","")}connectedCallback(){}attributeChangedCallback(e,t,n){}}customElements.get("xy-button-group")||customElements.define("xy-button-group",r);class i extends HTMLElement{static get observedAttributes(){return["open","title","oktext","canceltext","loading","type"]}constructor(e){super(),this.attachShadow({mode:"open"}).innerHTML='\n        <style>\n        :host{\n            position:absolute;\n            display:flex;\n            box-shadow: 2px 2px 15px rgba(0,0,0,0.15);\n            box-sizing: border-box;\n            transform:scale(0);\n            opacity:0.5;\n            border-radius: 3px;\n            z-index:10;\n            transition:.3s cubic-bezier(.645, .045, .355, 1);\n            transform-origin:inherit;\n            background:#fff;\n            visibility:hidden;\n        }\n        .popcon-content{\n            box-sizing: border-box;\n            display:flex;\n            width: max-content;\n            padding: 0 15px;\n            flex:1;\n            flex-direction:column;\n        }\n        .popcon-title {\n            line-height: 30px;\n            padding: 15px 30px 0 0;\n            font-weight: 700;\n            font-size: 14px;\n            color: #4c5161;\n            user-select: none;\n            cursor: default;\n        }\n        .popcon-body {\n            flex: 1;\n            padding: 5px 0 15px 0;\n        }\n        .popcon-footer {\n            padding: 3px 0 15px 0;\n            margin-top: -3px;\n            text-align: right;\n            white-space: nowrap;\n        }\n        .btn-close{\n            position:absolute;\n            right:10px;\n            top:10px;\n            border:0;\n        }\n        .popcon-footer xy-button {\n            font-size: .8em;\n            margin-left: .8em;\n        }\n        .popcon-type{\n            display:flex;\n            width:30px;\n            height:30px;\n            font-size:22px;\n            margin: 15px -10px 0 15px;\n        }\n        /*\n        :host(:not([type="confirm"])) .popcon-type,\n        :host(:not([type="confirm"])) .popcon-footer,\n        :host(:not([type])) .popcon-title,\n        :host(:not([type])) .btn-close{\n            display:none;\n        }\n        */\n        :host([type="confirm"]){\n            min-width:250px;\n        }\n        :host([type="confirm"]) .popcon-body{\n            font-size:14px;\n        }\n        :host(:not([type])) .popcon-content,:host(:not([type])) .popcon-body{\n            padding: 0;\n        }\n        </style>\n            '.concat("confirm"===(e||this.type)?'<xy-icon id="popcon-type" class="popcon-type" name="question-circle" color="var(--waringColor,#faad14)"></xy-icon>':"",'\n            <div class="popcon-content">\n                ').concat(null!==(e||this.type)?'<div class="popcon-title" id="title">'+this.title+'</div><xy-button class="btn-close" id="btn-close" icon="close"></xy-button>':"",'\n                <div class="popcon-body">\n                    <slot></slot>\n                </div>\n                ').concat("confirm"===(e||this.type)?'<div class="popcon-footer"><xy-button id="btn-cancel">'+this.canceltext+'</xy-button><xy-button id="btn-submit" type="primary">'+this.oktext+"</xy-button></div>":"","\n            </div>\n        ")}get open(){return null!==this.getAttribute("open")}get stopfocus(){return null!==this.getAttribute("stopfocus")}get title(){return this.getAttribute("title")||"popcon"}get type(){return this.getAttribute("type")}get oktext(){return this.getAttribute("oktext")||"confirm"}get canceltext(){return this.getAttribute("canceltext")||"cancel"}get loading(){return null!==this.getAttribute("loading")}set title(e){this.setAttribute("title",e)}set type(e){null===e||!1===e?this.removeAttribute("type"):this.setAttribute("type",e)}set oktext(e){this.setAttribute("oktext",e)}set canceltext(e){this.setAttribute("canceltext",e)}set open(e){null===e||!1===e?(this.removeAttribute("open"),this.parentNode.removeAttribute("open")):(this.setAttribute("open",""),this.parentNode.setAttribute("open",""),this.loading&&(this.loading=!1))}set loading(e){null===e||!1===e?this.removeAttribute("loading"):this.setAttribute("loading","")}connectedCallback(){this.remove=!1,this.type&&(this.titles=this.shadowRoot.getElementById("title"),this.btnClose=this.shadowRoot.getElementById("btn-close")),"confirm"==this.type&&(this.btnCancel=this.shadowRoot.getElementById("btn-cancel"),this.btnSubmit=this.shadowRoot.getElementById("btn-submit")),this.addEventListener("transitionend",(e=>{"transform"===e.propertyName&&this.open&&("confirm"==this.type&&this.btnSubmit.focus(),"pane"==this.type&&this.btnClose.focus(),this.dispatchEvent(new CustomEvent("open")))})),this.addEventListener("transitionend",(e=>{"transform"!==e.propertyName||this.open||(this.remove&&this.parentNode.removeChild(this),this.dispatchEvent(new CustomEvent("close")))})),this.addEventListener("click",(e=>{e.target.closest("[autoclose]")&&(this.open=!1,window.xyActiveElement.focus())})),this.type&&this.btnClose.addEventListener("click",(()=>{this.open=!1,window.xyActiveElement.focus()})),"confirm"==this.type&&(this.btnCancel.addEventListener("click",(async()=>{this.dispatchEvent(new CustomEvent("cancel")),this.open=!1,window.xyActiveElement.focus()})),this.btnSubmit.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("submit")),this.loading||(this.open=!1,window.xyActiveElement.focus())})))}attributeChangedCallback(e,t,n){"open"==e&&this.shadowRoot&&null==n&&this.stopfocus,"loading"==e&&this.shadowRoot&&(this.btnSubmit.loading=null!==n),"title"==e&&this.titles&&null!==n&&(this.titles.innerHTML=n),"oktext"==e&&this.btnSubmit&&null!==n&&(this.btnSubmit.innerHTML=n),"canceltext"==e&&this.btnCancel&&null!==n&&(this.btnCancel.innerHTML=n)}}customElements.get("xy-popcon")||customElements.define("xy-popcon",i);class s extends HTMLElement{static get observedAttributes(){return["title","oktext","canceltext","loading","type"]}constructor(){super(),this.attachShadow({mode:"open"}).innerHTML='\n        <style>\n        :host {\n            display:inline-block;\n            position:relative;\n            overflow:visible;\n        }\n        :host([dir="top"]) ::slotted(xy-popcon){\n            bottom:100%;\n            left:50%;\n            transform:translate(-50%,-10px) scale(0);\n            transform-origin: center bottom;\n        }\n        :host([dir="top"]) ::slotted(xy-popcon[open]),\n        :host([dir="top"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),\n        :host([dir="top"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){\n            transform:translate(-50%,-10px) scale(1);\n        }\n        :host([dir="right"]) ::slotted(xy-popcon){\n            left:100%;\n            top:50%;\n            transform:translate(10px,-50%) scale(0);\n            transform-origin: left;\n        }\n        :host([dir="right"]) ::slotted(xy-popcon[open]),\n        :host([dir="right"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),\n        :host([dir="right"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){\n            transform:translate(10px,-50%) scale(1);\n        }\n        :host([dir="bottom"]) ::slotted(xy-popcon){\n            top:100%;\n            left:50%;\n            transform:translate(-50%,10px) scale(0);\n            transform-origin: center top;\n        }\n        :host([dir="bottom"]) ::slotted(xy-popcon[open]),\n        :host([dir="bottom"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),\n        :host([dir="bottom"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){\n            transform:translate(-50%,10px) scale(1);\n        }\n        :host([dir="left"]) ::slotted(xy-popcon){\n            right:100%;\n            top:50%;\n            transform:translate(-10px,-50%) scale(0);\n            transform-origin: right;\n        }\n        :host([dir="left"]) ::slotted(xy-popcon[open]),\n        :host([dir="left"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),\n        :host([dir="left"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){\n            transform:translate(-10px,-50%) scale(1);\n        }\n        :host([dir="lefttop"]) ::slotted(xy-popcon){\n            right:100%;\n            top:0;\n            transform:translate(-10px) scale(0);\n            transform-origin: right top;\n        }\n        :host([dir="lefttop"]) ::slotted(xy-popcon[open]),\n        :host([dir="lefttop"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),\n        :host([dir="lefttop"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){\n            transform:translate(-10px) scale(1);\n        }\n        :host([dir="leftbottom"]) ::slotted(xy-popcon){\n            right:100%;\n            bottom:0;\n            transform:translate(-10px) scale(0);\n            transform-origin: right bottom;\n        }\n        :host([dir="leftbottom"]) ::slotted(xy-popcon[open]),\n        :host([dir="leftbottom"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),\n        :host([dir="leftbottom"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){\n            transform:translate(-10px) scale(1);\n        }\n        :host([dir="topleft"]) ::slotted(xy-popcon){\n            bottom:100%;\n            left:0;\n            transform:translate(0,-10px) scale(0);\n            transform-origin: left bottom;\n        }\n        :host([dir="topleft"]) ::slotted(xy-popcon[open]),\n        :host([dir="topleft"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),\n        :host([dir="topleft"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){\n            transform:translate(0,-10px) scale(1);\n        }\n        :host([dir="topright"]) ::slotted(xy-popcon){\n            bottom:100%;\n            right:0;\n            transform:translate(0,-10px) scale(0);\n            transform-origin: right bottom;\n        }\n        :host([dir="topright"]) ::slotted(xy-popcon[open]),\n        :host([dir="topright"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),\n        :host([dir="topright"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){\n            transform:translate(0,-10px) scale(1);\n        }\n        :host([dir="righttop"]) ::slotted(xy-popcon){\n            left:100%;\n            top:0;\n            transform:translate(10px) scale(0);\n            transform-origin: left top;\n        }\n        :host([dir="righttop"]) ::slotted(xy-popcon[open]),\n        :host([dir="righttop"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),\n        :host([dir="righttop"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){\n            transform:translate(10px) scale(1);\n        }\n        :host([dir="rightbottom"]) ::slotted(xy-popcon){\n            left:100%;\n            bottom:0;\n            transform:translate(10px) scale(0);\n            transform-origin: left bottom;\n        }\n        :host([dir="rightbottom"]) ::slotted(xy-popcon[open]),\n        :host([dir="rightbottom"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),\n        :host([dir="rightbottom"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){\n            transform:translate(10px) scale(1);\n        }\n        :host([dir="bottomleft"]) ::slotted(xy-popcon),\n        :host(:not([dir])) ::slotted(xy-popcon){\n            left:0;\n            top:100%;\n            transform:translate(0,10px) scale(0);\n            transform-origin: left top;\n        }\n        :host(:not([dir])) ::slotted(xy-popcon[open]),\n        :host(:not([dir])[trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),\n        :host(:not([dir])[trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon),\n        :host([dir="bottomleft"]) ::slotted(xy-popcon[open]),\n        :host([dir="bottomleft"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),\n        :host([dir="bottomleft"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){\n            transform:translate(0,10px) scale(1);\n        }\n        :host([dir="bottomright"]) ::slotted(xy-popcon){\n            right:0;\n            top:100%;\n            transform:translate(0,10px) scale(0);\n            transform-origin: right top;\n        }\n        :host([dir="bottomright"]) ::slotted(xy-popcon[open]),\n        :host([dir="bottomright"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),\n        :host([dir="bottomright"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){\n            transform:translate(0,10px) scale(1);\n        }\n        :host([trigger="contextmenu"]) ::slotted(xy-popcon){\n            right:auto;\n            bottom:auto;\n            left:var(--x,0);\n            top:var(--y,100%);\n            transform-origin: left top;\n            transform:translate(5px,5px) scale(0);\n            transition: .15s;\n        }\n        :host([trigger="contextmenu"]) ::slotted(xy-popcon[open]){\n            transform:translate(5px,5px) scale(1);\n        }\n        :host ::slotted(xy-popcon[open]),\n        :host([trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),\n        :host([trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){\n            opacity:1;\n            visibility:visible;\n        }\n        slot{\n            border-radius: inherit;\n        }\n        </style>\n        <slot></slot>\n        '}get title(){return this.getAttribute("title")||"popcon"}get trigger(){return this.getAttribute("trigger")}get disabled(){return null!==this.getAttribute("disabled")}get type(){return this.getAttribute("type")}get accomplish(){return null!==this.getAttribute("accomplish")}get content(){return this.getAttribute("content")}get oktext(){return this.getAttribute("oktext")}get canceltext(){return this.getAttribute("canceltext")}get dir(){return this.getAttribute("dir")}get loading(){return null!==this.getAttribute("loading")}set dir(e){this.setAttribute("dir",e)}set title(e){this.setAttribute("title",e)}set type(e){this.setAttribute("type",e)}set oktext(e){this.setAttribute("oktext",e)}set canceltext(e){this.setAttribute("canceltext",e)}set loading(e){null===e||!1===e?this.removeAttribute("loading"):this.setAttribute("loading","")}set disabled(e){null===e||!1===e?this.removeAttribute("disabled"):this.setAttribute("disabled","")}show(e){if(this.popcon=this.querySelector("xy-popcon"),this.disabled)(this.popcon||this).dispatchEvent(new CustomEvent("submit"));else if(this.popcon||(this.popcon=new i(this.type),this.popcon.type=this.type,this.appendChild(this.popcon),this.popcon.title=this.title||"popover",this.popcon.innerHTML=this.content||"","confirm"==this.type&&(this.popcon.oktext=this.oktext||"confirm",this.popcon.canceltext=this.canceltext||"cancel",this.popcon.onsubmit=()=>this.dispatchEvent(new CustomEvent("submit")),this.popcon.oncancel=()=>this.dispatchEvent(new CustomEvent("cancel")))),"contextmenu"===this.trigger){const{x:t,y:n}=this.getBoundingClientRect();this.popcon.style.setProperty("--x",e.clientX-t+"px"),this.popcon.style.setProperty("--y",e.clientY-n+"px"),this.popcon.open=!0}else(e.path||e.composedPath&&e.composedPath()).includes(this.popcon)||(window.xyActiveElement=document.activeElement,this.accomplish?this.popcon.open=!0:this.popcon.open=!this.popcon.open);return this.popcon}connectedCallback(){this.popcon=this.querySelector("xy-popcon"),this.trigger&&"click"!==this.trigger||this.addEventListener("click",this.show),"contextmenu"===this.trigger&&this.addEventListener("contextmenu",(e=>{e.preventDefault(),(e.path||e.composedPath&&e.composedPath()).includes(this.popcon)||this.show(e)})),document.addEventListener("mousedown",(e=>{const t=e.path||e.composedPath&&e.composedPath();(this.popcon&&!t.includes(this.popcon)&&!this.popcon.loading&&!t.includes(this.children[0])||"contextmenu"===this.trigger&&!t.includes(this.popcon)&&"1"==e.which)&&(this.popcon.open=!1)}))}attributeChangedCallback(e,t,n){"loading"==e&&this.popcon&&(this.popcon.loading=null!==n),"title"==e&&this.popcon&&null!==n&&(this.popcon.title=n),"oktext"==e&&this.popcon&&null!==n&&(this.popcon.oktext=n),"canceltext"==e&&this.popcon&&null!==n&&(this.popcon.canceltext=n)}}customElements.get("xy-popover")||customElements.define("xy-popover",s);var a=n(697);const l=["#ff1300","#EC7878","#9C27B0","#673AB7","#3F51B5","#0070FF","#03A9F4","#00BCD4","#4CAF50","#8BC34A","#CDDC39","#FFE500","#FFBF00","#FF9800","#795548","#9E9E9E","#5A5A5A","#FFF"];class c extends HTMLElement{static get observedAttributes(){return["disabled","dir"]}constructor(e){super();const t=this.attachShadow({mode:"open"});this.colorCollections=e.colorCollections||l,this.onColorPicked=e.onColorPicked,this.defaulColor=(0,a.handleCSSVariables)(e.defaultColor||this.colorCollections[0]),this.pluginType=e.type,this.hasCustomPicker=e.hasCustomPicker,this.customColor=(0,a.getCustomColorCache)(this.pluginType),t.innerHTML='\n        <style>\n        :host{\n            display:inline-block;\n            width:15px;\n            font-size:14px;\n            border: none;\n        }\n        :host([block]){\n            display:block;\n        }\n        :host([disabled]){\n            pointer-events:none;\n        }\n        \n        :host(:focus-within) xy-popover,:host(:hover) xy-popover{ \n            z-index: 2;\n        }\n        input[type="color"]{\n            -webkit-appearance: none;\n            outline: none;\n            border: none;\n        }\n        xy-popover{\n            width: 12px;\n            height:35px;\n            padding-right: 1px;\n        }\n        xy-popover:hover {\n            border-radius: 0 5px 5px 0;\n            background: rgba(203, 203, 203, 0.49);\n        }\n        .color-btn {\n            border: 1px solid #cab9b9;\n            margin: 18px 3px 2px 3px;\n            width: 7px;\n            height: 7px;\n            opacity: 0.9;\n            padding: 1px 0 1px 0;\n            color: var(--themeColor, #42b983);\n            background: var(--themeColor, #42b983);\n            font-weight: bolder;\n            border-radius: 2px;\n        }\n        .color-btn:hover {\n            opacity: 1;\n            z-index: auto;\n        }\n        xy-popover{\n            display:block;\n        }\n        xy-popcon{\n            position: fixed;\n            min-width:100%;\n        }\n        #custom-picker {\n            position: relative;\n            top: -1px;\n            background-color: rgb(250, 250, 250);\n            border-color: rgb(255 118 21) rgb(245 80 80 / 74%) #89c1c9 #95d5b6;\n            border-width: 3px;\n            border-radius: 8px;\n            height: 18px;\n        }\n        .pop-footer{\n            display:flex;\n            justify-content:flex-end;\n            padding:0 .8em .8em;\n        }\n        .pop-footer xy-button{\n            font-size: .8em;\n            margin-left: .8em;\n        }\n        .color-btn::before{\n            content:\'\';\n            position:absolute;\n            left:5px;\n            top:5px;\n            right:5px;\n            bottom:5px;\n            z-index:-1;\n            background: linear-gradient(45deg, #ddd 25%,transparent 0,transparent 75%,#ddd 0 ), linear-gradient(45deg, #ddd 25%, transparent 0, transparent 75%, #ddd 0);\n            background-position: 0 0,5px 5px;\n            background-size: 10px 10px;\n        }\n        .color-sign {\n           max-width: 220px;\n           padding: 10px;\n           display:grid;\n           cursor: default;\n           grid-template-columns: repeat(auto-fit, minmax(15px, 1fr));\n           grid-gap: 10px;     \n        }\n        .color-sign>button {\n            position: relative;\n            width: 16px;\n            height: 16px;\n            border-radius: 6px;\n            border: 1px solid #b8b9b49e;\n            outline: 0;\n            opacity: 0.9;\n        }\n        .color-sign>button:hover {\n            cursor: pointer;\n            opacity: 1;\n        }\n        .color-section {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        .color-fire-btn {\n            font-size: 17px;\n            font-weight: bold;\n            height: 28px;\n            padding-top: 8px;\n            padding-right: 1px;\n            margin-left: 3px;\n            padding-left: 3px;\n            border-radius: 5px 0 0 5px;\n        }\n        .color-fire-btn:hover {\n            font-size: 17px;\n            font-weight: bold;\n            background: rgba(203, 203, 203, 0.49);\n            border-radius: 5px 0 0 5px;\n        }\n        </style>\n        <section class="color-section">\n            <xy-popover id="popover" '.concat(this.dir?"dir='"+this.dir+"'":"",'>\n                <xy-button class="color-btn" id="color-btn" ').concat(this.disabled?"disabled":"",'>_</xy-button>\n                <xy-popcon id="popcon">\n                    <div class="color-sign" id="colors">\n                        ').concat(this.hasCustomPicker?'<button id="custom-picker" class="rainbow-mask"/>':"","\n                        ").concat(this.colorCollections.map((e=>'<button class="color-cube" style="background-color:'+e+'" data-color='+e+"></button>")).join(""),"\n                    </div>\n                </xy-popcon>\n            </xy-popover>\n        </section>")}focus(){this.colorBtn.focus()}connectedCallback(){this.popoverEle=this.shadowRoot.getElementById("popover"),this.popcon=this.shadowRoot.getElementById("popcon"),this.colorBtn=this.shadowRoot.getElementById("color-btn"),this.colors=this.shadowRoot.getElementById("colors"),this.colors.addEventListener("click",(e=>{const t=e.target.closest("button");t&&"custom-picker"!==t.id&&(this.nativeclick=!0,this.value=(0,a.handleCSSVariables)(t.dataset.color),this.onColorPicked(this.value))})),this.popoverEle.addEventListener("click",(()=>this.closeConverter())),this.hasCustomPicker&&this.setupCustomPicker(),this.value=this.defaultvalue}closeConverter(){if(document.getElementsByClassName(a.CONVERTER_PANEL)[0]){const e=document.getElementsByClassName(a.CONVERTER_BTN)[0];null===e||void 0===e||e.click()}}disconnectedCallback(){this.pickerInput&&document.body.removeChild(this.pickerInput)}setupCustomPicker(){let e=!1;this.customPicker=this.shadowRoot.getElementById("custom-picker");const t=this.customPicker;t.style.backgroundColor=this.customColor,this.customPicker.addEventListener("click",(n=>{if(e)return void(e=!1);this.pickerInput&&document.body.removeChild(this.pickerInput),this.pickerInput=document.createElement("input");const o=this.pickerInput,r=this.popcon.getBoundingClientRect();o.setAttribute("type","color"),o.value=this.customColor,o.style.position="fixed",o.style.left="".concat(r.x+3,"px"),o.style.top="".concat(r.y+10,"px"),o.style.pointerEvents="none",o.style.zIndex="999",o.style.opacity="0",o.addEventListener("input",(0,a.throttle)((n=>{this.nativeclick=!0,this.value=(0,a.handleCSSVariables)(n.target.value),this.onColorPicked(this.value),(0,a.setCustomColorCache)(this.value,this.pluginType),t.style.backgroundColor=this.value,e=!0,t.click()}),30)),document.body.appendChild(o),setTimeout((()=>{o.focus(),o.click()}),0)}))}get defaultvalue(){return this.defaulColor}get value(){return this.$value}get type(){return this.getAttribute("type")}get disabled(){return null!==this.getAttribute("disabled")}get dir(){return this.getAttribute("dir")}set dir(e){this.setAttribute("dir",e)}set disabled(e){null===e||!1===e?this.removeAttribute("disabled"):this.setAttribute("disabled","")}set defaultvalue(e){this.setAttribute("defaultvalue",e)}set value(e){e&&(this.$value=e,this.colorBtn.style.setProperty("--themeColor",this.nativeclick?(0,a.setDefaultColorCache)(e,this.pluginType):(0,a.getDefaultColorCache)(e,this.pluginType)),this.nativeclick?(this.nativeclick=!1,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value}}))):this.colorPane?this.colorPane.value=this.value:this.defaultvalue=this.value)}attributeChangedCallback(e,t,n){"disabled"==e&&this.colorBtn&&(null!=n?this.colorBtn.setAttribute("disabled","disabled"):this.colorBtn.removeAttribute("disabled")),"dir"==e&&this.popoverEle&&null!=n&&(this.popoverEle.dir=n)}}customElements.get("xy-color-picker")||customElements.define("xy-color-picker",c)},697:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CONVERTER_BTN:()=>d,CONVERTER_PANEL:()=>u,getCustomColorCache:()=>c,getDefaultColorCache:()=>a,handleCSSVariables:()=>r,setCustomColorCache:()=>l,setDefaultColorCache:()=>s,throttle:()=>i});const o="editor-js-text-color-cache";function r(e){if(function(e){return("string"==typeof(t=e)||t instanceof String)&&e.includes("--");var t}(e)){const t=function(e){const t=/\((.*?)\)/.exec(e);if(t)return t[1]}(e);return function(e){return window.getComputedStyle(document.documentElement).getPropertyValue(e)}(t)}return e}function i(e,t){let n;return function(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];n||(n=setTimeout((()=>{e(...r),n=null}),t))}}function s(e,t){return sessionStorage.setItem("".concat(o,"-").concat(t),JSON.stringify(e)),e}function a(e,t){const n=sessionStorage.getItem("".concat(o,"-").concat(t));return n?JSON.parse(n):e}function l(e,t){sessionStorage.setItem("".concat(o,"-").concat(t,"-custom"),JSON.stringify(e))}function c(e){const t=sessionStorage.getItem("".concat(o,"-").concat(e,"-custom"));return t?JSON.parse(t):null}const d="ce-inline-toolbar__dropdown",u="ce-conversion-toolbar--showed"}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,n(138)})(),e.exports=t()},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function o(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,o,i,s){if("function"!==typeof o)throw new TypeError("The listener must be a function");var a=new r(o,i||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new o:delete e._events[t]}function a(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,o,r=[];if(0===this._eventsCount)return r;for(o in e=this._events)t.call(e,o)&&r.push(n?o.slice(1):o);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=n?n+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var r=0,i=o.length,s=new Array(i);r<i;r++)s[r]=o[r].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,o=this._events[t];return o?o.fn?1:o.length:0},a.prototype.emit=function(e,t,o,r,i,s){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,d=this._events[a],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,o),!0;case 4:return d.fn.call(d.context,t,o,r),!0;case 5:return d.fn.call(d.context,t,o,r,i),!0;case 6:return d.fn.call(d.context,t,o,r,i,s),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,o);break;case 4:d[c].fn.call(d[c].context,t,o,r);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,o,r){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||r&&!a.once||o&&a.context!==o||s(this,i);else{for(var l=0,c=[],d=a.length;l<d;l++)(a[l].fn!==t||r&&!a[l].once||o&&a[l].context!==o)&&c.push(a[l]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new o,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},4053:e=>{e.exports=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof process||"object"!==typeof process.versions||!process.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},67:(e,t,n)=>{e=n.nmd(e);var o="__lodash_hash_undefined__",r=1,i=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",d="[object Boolean]",u="[object Date]",h="[object Error]",p="[object Function]",f="[object GeneratorFunction]",g="[object Map]",m="[object Number]",v="[object Null]",y="[object Object]",b="[object Promise]",w="[object Proxy]",x="[object RegExp]",S="[object Set]",_="[object String]",k="[object Symbol]",C="[object Undefined]",E="[object WeakMap]",I="[object ArrayBuffer]",T="[object DataView]",P=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,M={};M["[object Float32Array]"]=M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0,M[a]=M[l]=M[I]=M[d]=M[T]=M[u]=M[h]=M[p]=M[g]=M[m]=M[y]=M[x]=M[S]=M[_]=M[E]=!1;var j="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,O="object"==typeof self&&self&&self.Object===Object&&self,L=j||O||Function("return this")(),B=t&&!t.nodeType&&t,R=B&&e&&!e.nodeType&&e,N=R&&R.exports===B,D=N&&j.process,z=function(){try{return D&&D.binding&&D.binding("util")}catch(e){}}(),F=z&&z.isTypedArray;function U(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}function H(e){var t=-1,n=Array(e.size);return e.forEach((function(e,o){n[++t]=[o,e]})),n}function V(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var W,K,G=Array.prototype,q=Function.prototype,Y=Object.prototype,X=L["__core-js_shared__"],$=q.toString,Z=Y.hasOwnProperty,Q=function(){var e=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),J=Y.toString,ee=RegExp("^"+$.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=N?L.Buffer:void 0,ne=L.Symbol,oe=L.Uint8Array,re=Y.propertyIsEnumerable,ie=G.splice,se=ne?ne.toStringTag:void 0,ae=Object.getOwnPropertySymbols,le=te?te.isBuffer:void 0,ce=(W=Object.keys,K=Object,function(e){return W(K(e))}),de=De(L,"DataView"),ue=De(L,"Map"),he=De(L,"Promise"),pe=De(L,"Set"),fe=De(L,"WeakMap"),ge=De(Object,"create"),me=He(de),ve=He(ue),ye=He(he),be=He(pe),we=He(fe),xe=ne?ne.prototype:void 0,Se=xe?xe.valueOf:void 0;function _e(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function ke(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function Ce(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function Ee(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ce;++t<n;)this.add(e[t])}function Ie(e){var t=this.__data__=new ke(e);this.size=t.size}function Te(e,t){var n=Ke(e),o=!n&&We(e),r=!n&&!o&&Ge(e),i=!n&&!o&&!r&&Ze(e),s=n||o||r||i,a=s?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],l=a.length;for(var c in e)!t&&!Z.call(e,c)||s&&("length"==c||r&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ue(c,l))||a.push(c);return a}function Pe(e,t){for(var n=e.length;n--;)if(Ve(e[n][0],t))return n;return-1}function Ae(e){return null==e?void 0===e?C:v:se&&se in Object(e)?function(e){var t=Z.call(e,se),n=e[se];try{e[se]=void 0;var o=!0}catch(i){}var r=J.call(e);o&&(t?e[se]=n:delete e[se]);return r}(e):function(e){return J.call(e)}(e)}function Me(e){return $e(e)&&Ae(e)==a}function je(e,t,n,o,s){return e===t||(null==e||null==t||!$e(e)&&!$e(t)?e!==e&&t!==t:function(e,t,n,o,s,c){var p=Ke(e),f=Ke(t),v=p?l:Fe(e),b=f?l:Fe(t),w=(v=v==a?y:v)==y,C=(b=b==a?y:b)==y,E=v==b;if(E&&Ge(e)){if(!Ge(t))return!1;p=!0,w=!1}if(E&&!w)return c||(c=new Ie),p||Ze(e)?Be(e,t,n,o,s,c):function(e,t,n,o,s,a,l){switch(n){case T:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case I:return!(e.byteLength!=t.byteLength||!a(new oe(e),new oe(t)));case d:case u:case m:return Ve(+e,+t);case h:return e.name==t.name&&e.message==t.message;case x:case _:return e==t+"";case g:var c=H;case S:var p=o&r;if(c||(c=V),e.size!=t.size&&!p)return!1;var f=l.get(e);if(f)return f==t;o|=i,l.set(e,t);var v=Be(c(e),c(t),o,s,a,l);return l.delete(e),v;case k:if(Se)return Se.call(e)==Se.call(t)}return!1}(e,t,v,n,o,s,c);if(!(n&r)){var P=w&&Z.call(e,"__wrapped__"),A=C&&Z.call(t,"__wrapped__");if(P||A){var M=P?e.value():e,j=A?t.value():t;return c||(c=new Ie),s(M,j,n,o,c)}}if(!E)return!1;return c||(c=new Ie),function(e,t,n,o,i,s){var a=n&r,l=Re(e),c=l.length,d=Re(t),u=d.length;if(c!=u&&!a)return!1;var h=c;for(;h--;){var p=l[h];if(!(a?p in t:Z.call(t,p)))return!1}var f=s.get(e);if(f&&s.get(t))return f==t;var g=!0;s.set(e,t),s.set(t,e);var m=a;for(;++h<c;){var v=e[p=l[h]],y=t[p];if(o)var b=a?o(y,v,p,t,e,s):o(v,y,p,e,t,s);if(!(void 0===b?v===y||i(v,y,n,o,s):b)){g=!1;break}m||(m="constructor"==p)}if(g&&!m){var w=e.constructor,x=t.constructor;w==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(g=!1)}return s.delete(e),s.delete(t),g}(e,t,n,o,s,c)}(e,t,n,o,je,s))}function Oe(e){return!(!Xe(e)||function(e){return!!Q&&Q in e}(e))&&(qe(e)?ee:P).test(He(e))}function Le(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||Y;return e===n}(e))return ce(e);var t=[];for(var n in Object(e))Z.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Be(e,t,n,o,s,a){var l=n&r,c=e.length,d=t.length;if(c!=d&&!(l&&d>c))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var h=-1,p=!0,f=n&i?new Ee:void 0;for(a.set(e,t),a.set(t,e);++h<c;){var g=e[h],m=t[h];if(o)var v=l?o(m,g,h,t,e,a):o(g,m,h,e,t,a);if(void 0!==v){if(v)continue;p=!1;break}if(f){if(!U(t,(function(e,t){if(r=t,!f.has(r)&&(g===e||s(g,e,n,o,a)))return f.push(t);var r}))){p=!1;break}}else if(g!==m&&!s(g,m,n,o,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function Re(e){return function(e,t,n){var o=t(e);return Ke(e)?o:function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}(o,n(e))}(e,Qe,ze)}function Ne(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function De(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Oe(n)?n:void 0}_e.prototype.clear=function(){this.__data__=ge?ge(null):{},this.size=0},_e.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},_e.prototype.get=function(e){var t=this.__data__;if(ge){var n=t[e];return n===o?void 0:n}return Z.call(t,e)?t[e]:void 0},_e.prototype.has=function(e){var t=this.__data__;return ge?void 0!==t[e]:Z.call(t,e)},_e.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ge&&void 0===t?o:t,this},ke.prototype.clear=function(){this.__data__=[],this.size=0},ke.prototype.delete=function(e){var t=this.__data__,n=Pe(t,e);return!(n<0)&&(n==t.length-1?t.pop():ie.call(t,n,1),--this.size,!0)},ke.prototype.get=function(e){var t=this.__data__,n=Pe(t,e);return n<0?void 0:t[n][1]},ke.prototype.has=function(e){return Pe(this.__data__,e)>-1},ke.prototype.set=function(e,t){var n=this.__data__,o=Pe(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this},Ce.prototype.clear=function(){this.size=0,this.__data__={hash:new _e,map:new(ue||ke),string:new _e}},Ce.prototype.delete=function(e){var t=Ne(this,e).delete(e);return this.size-=t?1:0,t},Ce.prototype.get=function(e){return Ne(this,e).get(e)},Ce.prototype.has=function(e){return Ne(this,e).has(e)},Ce.prototype.set=function(e,t){var n=Ne(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this},Ee.prototype.add=Ee.prototype.push=function(e){return this.__data__.set(e,o),this},Ee.prototype.has=function(e){return this.__data__.has(e)},Ie.prototype.clear=function(){this.__data__=new ke,this.size=0},Ie.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ie.prototype.get=function(e){return this.__data__.get(e)},Ie.prototype.has=function(e){return this.__data__.has(e)},Ie.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ke){var o=n.__data__;if(!ue||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ce(o)}return n.set(e,t),this.size=n.size,this};var ze=ae?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,o=null==e?0:e.length,r=0,i=[];++n<o;){var s=e[n];t(s,n,e)&&(i[r++]=s)}return i}(ae(e),(function(t){return re.call(e,t)})))}:function(){return[]},Fe=Ae;function Ue(e,t){return!!(t=null==t?s:t)&&("number"==typeof e||A.test(e))&&e>-1&&e%1==0&&e<t}function He(e){if(null!=e){try{return $.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ve(e,t){return e===t||e!==e&&t!==t}(de&&Fe(new de(new ArrayBuffer(1)))!=T||ue&&Fe(new ue)!=g||he&&Fe(he.resolve())!=b||pe&&Fe(new pe)!=S||fe&&Fe(new fe)!=E)&&(Fe=function(e){var t=Ae(e),n=t==y?e.constructor:void 0,o=n?He(n):"";if(o)switch(o){case me:return T;case ve:return g;case ye:return b;case be:return S;case we:return E}return t});var We=Me(function(){return arguments}())?Me:function(e){return $e(e)&&Z.call(e,"callee")&&!re.call(e,"callee")},Ke=Array.isArray;var Ge=le||function(){return!1};function qe(e){if(!Xe(e))return!1;var t=Ae(e);return t==p||t==f||t==c||t==w}function Ye(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function Xe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function $e(e){return null!=e&&"object"==typeof e}var Ze=F?function(e){return function(t){return e(t)}}(F):function(e){return $e(e)&&Ye(e.length)&&!!M[Ae(e)]};function Qe(e){return null!=(t=e)&&Ye(t.length)&&!qe(t)?Te(e):Le(e);var t}e.exports=function(e,t){return je(e,t)}},381:(e,t,n)=>{var o="Expected a function",r=NaN,i="[object Symbol]",s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,h="object"==typeof self&&self&&self.Object===Object&&self,p=u||h||Function("return this")(),f=Object.prototype.toString,g=Math.max,m=Math.min,v=function(){return p.Date.now()};function y(e,t,n){var r,i,s,a,l,c,d=0,u=!1,h=!1,p=!0;if("function"!=typeof e)throw new TypeError(o);function f(t){var n=r,o=i;return r=i=void 0,d=t,a=e.apply(o,n)}function y(e){var n=e-c;return void 0===c||n>=t||n<0||h&&e-d>=s}function x(){var e=v();if(y(e))return S(e);l=setTimeout(x,function(e){var n=t-(e-c);return h?m(n,s-(e-d)):n}(e))}function S(e){return l=void 0,p&&r?f(e):(r=i=void 0,a)}function _(){var e=v(),n=y(e);if(r=arguments,i=this,c=e,n){if(void 0===l)return function(e){return d=e,l=setTimeout(x,t),u?f(e):a}(c);if(h)return l=setTimeout(x,t),f(c)}return void 0===l&&(l=setTimeout(x,t)),a}return t=w(t)||0,b(n)&&(u=!!n.leading,s=(h="maxWait"in n)?g(w(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),_.cancel=function(){void 0!==l&&clearTimeout(l),d=0,r=c=i=l=void 0},_.flush=function(){return void 0===l?a:S(v())},_}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function w(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==i}(e))return r;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=l.test(e);return n||c.test(e)?d(e.slice(2),n?2:8):a.test(e)?r:+e}e.exports=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError(o);return b(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),y(e,t,{leading:r,maxWait:t,trailing:i})}},5040:(e,t,n)=>{var o=200,r="__lodash_hash_undefined__",i="[object Function]",s="[object GeneratorFunction]",a=/^\[object .+?Constructor\]$/,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,d=l||c||Function("return this")();function u(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!==t)return function(e,t,n,o){var r=e.length,i=n+(o?1:-1);for(;o?i--:++i<r;)if(t(e[i],i,e))return i;return-1}(e,p,n);var o=n-1,r=e.length;for(;++o<r;)if(e[o]===t)return o;return-1}(e,t,0)>-1}function h(e,t,n){for(var o=-1,r=e?e.length:0;++o<r;)if(n(t,e[o]))return!0;return!1}function p(e){return e!==e}function f(e,t){return e.has(t)}function g(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var m=Array.prototype,v=Function.prototype,y=Object.prototype,b=d["__core-js_shared__"],w=function(){var e=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),x=v.toString,S=y.hasOwnProperty,_=y.toString,k=RegExp("^"+x.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),C=m.splice,E=N(d,"Map"),I=N(d,"Set"),T=N(Object,"create");function P(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function A(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function M(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function j(e){var t=-1,n=e?e.length:0;for(this.__data__=new M;++t<n;)this.add(e[t])}function O(e,t){for(var n,o,r=e.length;r--;)if((n=e[r][0])===(o=t)||n!==n&&o!==o)return r;return-1}function L(e){if(!D(e)||(t=e,w&&w in t))return!1;var t,n=function(e){var t=D(e)?_.call(e):"";return t==i||t==s}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e)?k:a;return n.test(function(e){if(null!=e){try{return x.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}P.prototype.clear=function(){this.__data__=T?T(null):{}},P.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},P.prototype.get=function(e){var t=this.__data__;if(T){var n=t[e];return n===r?void 0:n}return S.call(t,e)?t[e]:void 0},P.prototype.has=function(e){var t=this.__data__;return T?void 0!==t[e]:S.call(t,e)},P.prototype.set=function(e,t){return this.__data__[e]=T&&void 0===t?r:t,this},A.prototype.clear=function(){this.__data__=[]},A.prototype.delete=function(e){var t=this.__data__,n=O(t,e);return!(n<0)&&(n==t.length-1?t.pop():C.call(t,n,1),!0)},A.prototype.get=function(e){var t=this.__data__,n=O(t,e);return n<0?void 0:t[n][1]},A.prototype.has=function(e){return O(this.__data__,e)>-1},A.prototype.set=function(e,t){var n=this.__data__,o=O(n,e);return o<0?n.push([e,t]):n[o][1]=t,this},M.prototype.clear=function(){this.__data__={hash:new P,map:new(E||A),string:new P}},M.prototype.delete=function(e){return R(this,e).delete(e)},M.prototype.get=function(e){return R(this,e).get(e)},M.prototype.has=function(e){return R(this,e).has(e)},M.prototype.set=function(e,t){return R(this,e).set(e,t),this},j.prototype.add=j.prototype.push=function(e){return this.__data__.set(e,r),this},j.prototype.has=function(e){return this.__data__.has(e)};var B=I&&1/g(new I([,-0]))[1]==1/0?function(e){return new I(e)}:function(){};function R(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function N(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return L(n)?n:void 0}function D(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return e&&e.length?function(e,t,n){var r=-1,i=u,s=e.length,a=!0,l=[],c=l;if(n)a=!1,i=h;else if(s>=o){var d=t?null:B(e);if(d)return g(d);a=!1,i=f,c=new j}else c=t?[]:l;e:for(;++r<s;){var p=e[r],m=t?t(p):p;if(p=n||0!==p?p:0,a&&m===m){for(var v=c.length;v--;)if(c[v]===m)continue e;t&&c.push(m),l.push(p)}else i(c,m,n)||(c!==l&&c.push(m),l.push(p))}return l}(e):[]}},3536:function(e,t,n){var o;e=n.nmd(e),function(){var r,i="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",l=16,c=32,d=64,u=128,h=256,p=1/0,f=9007199254740991,g=NaN,m=4294967295,v=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",d],["rearg",h]],y="[object Arguments]",b="[object Array]",w="[object Boolean]",x="[object Date]",S="[object Error]",_="[object Function]",k="[object GeneratorFunction]",C="[object Map]",E="[object Number]",I="[object Object]",T="[object Promise]",P="[object RegExp]",A="[object Set]",M="[object String]",j="[object Symbol]",O="[object WeakMap]",L="[object ArrayBuffer]",B="[object DataView]",R="[object Float32Array]",N="[object Float64Array]",D="[object Int8Array]",z="[object Int16Array]",F="[object Int32Array]",U="[object Uint8Array]",H="[object Uint8ClampedArray]",V="[object Uint16Array]",W="[object Uint32Array]",K=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,$=RegExp(Y.source),Z=RegExp(X.source),Q=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,oe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(re.source),se=/^\s+/,ae=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,de=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Se=/($^)/,_e=/['\n\r\u2028\u2029\\]/g,ke="\\ud800-\\udfff",Ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ee="\\u2700-\\u27bf",Ie="a-z\\xdf-\\xf6\\xf8-\\xff",Te="A-Z\\xc0-\\xd6\\xd8-\\xde",Pe="\\ufe0e\\ufe0f",Ae="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Me="['\u2019]",je="["+ke+"]",Oe="["+Ae+"]",Le="["+Ce+"]",Be="\\d+",Re="["+Ee+"]",Ne="["+Ie+"]",De="[^"+ke+Ae+Be+Ee+Ie+Te+"]",ze="\\ud83c[\\udffb-\\udfff]",Fe="[^"+ke+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",He="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="["+Te+"]",We="\\u200d",Ke="(?:"+Ne+"|"+De+")",Ge="(?:"+Ve+"|"+De+")",qe="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ye="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Xe="(?:"+Le+"|"+ze+")"+"?",$e="["+Pe+"]?",Ze=$e+Xe+("(?:"+We+"(?:"+[Fe,Ue,He].join("|")+")"+$e+Xe+")*"),Qe="(?:"+[Re,Ue,He].join("|")+")"+Ze,Je="(?:"+[Fe+Le+"?",Le,Ue,He,je].join("|")+")",et=RegExp(Me,"g"),tt=RegExp(Le,"g"),nt=RegExp(ze+"(?="+ze+")|"+Je+Ze,"g"),ot=RegExp([Ve+"?"+Ne+"+"+qe+"(?="+[Oe,Ve,"$"].join("|")+")",Ge+"+"+Ye+"(?="+[Oe,Ve+Ke,"$"].join("|")+")",Ve+"?"+Ke+"+"+qe,Ve+"+"+Ye,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Be,Qe].join("|"),"g"),rt=RegExp("["+We+ke+Ce+Pe+"]"),it=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,st=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,lt={};lt[R]=lt[N]=lt[D]=lt[z]=lt[F]=lt[U]=lt[H]=lt[V]=lt[W]=!0,lt[y]=lt[b]=lt[L]=lt[w]=lt[B]=lt[x]=lt[S]=lt[_]=lt[C]=lt[E]=lt[I]=lt[P]=lt[A]=lt[M]=lt[O]=!1;var ct={};ct[y]=ct[b]=ct[L]=ct[B]=ct[w]=ct[x]=ct[R]=ct[N]=ct[D]=ct[z]=ct[F]=ct[C]=ct[E]=ct[I]=ct[P]=ct[A]=ct[M]=ct[j]=ct[U]=ct[H]=ct[V]=ct[W]=!0,ct[S]=ct[_]=ct[O]=!1;var dt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,ht=parseInt,pt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ft="object"==typeof self&&self&&self.Object===Object&&self,gt=pt||ft||Function("return this")(),mt=t&&!t.nodeType&&t,vt=mt&&e&&!e.nodeType&&e,yt=vt&&vt.exports===mt,bt=yt&&pt.process,wt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||bt&&bt.binding&&bt.binding("util")}catch(t){}}(),xt=wt&&wt.isArrayBuffer,St=wt&&wt.isDate,_t=wt&&wt.isMap,kt=wt&&wt.isRegExp,Ct=wt&&wt.isSet,Et=wt&&wt.isTypedArray;function It(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Tt(e,t,n,o){for(var r=-1,i=null==e?0:e.length;++r<i;){var s=e[r];t(o,s,n(s),e)}return o}function Pt(e,t){for(var n=-1,o=null==e?0:e.length;++n<o&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Mt(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(!t(e[n],n,e))return!1;return!0}function jt(e,t){for(var n=-1,o=null==e?0:e.length,r=0,i=[];++n<o;){var s=e[n];t(s,n,e)&&(i[r++]=s)}return i}function Ot(e,t){return!!(null==e?0:e.length)&&Vt(e,t,0)>-1}function Lt(e,t,n){for(var o=-1,r=null==e?0:e.length;++o<r;)if(n(t,e[o]))return!0;return!1}function Bt(e,t){for(var n=-1,o=null==e?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}function Rt(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}function Nt(e,t,n,o){var r=-1,i=null==e?0:e.length;for(o&&i&&(n=e[++r]);++r<i;)n=t(n,e[r],r,e);return n}function Dt(e,t,n,o){var r=null==e?0:e.length;for(o&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function zt(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}var Ft=qt("length");function Ut(e,t,n){var o;return n(e,(function(e,n,r){if(t(e,n,r))return o=n,!1})),o}function Ht(e,t,n,o){for(var r=e.length,i=n+(o?1:-1);o?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function Vt(e,t,n){return t===t?function(e,t,n){var o=n-1,r=e.length;for(;++o<r;)if(e[o]===t)return o;return-1}(e,t,n):Ht(e,Kt,n)}function Wt(e,t,n,o){for(var r=n-1,i=e.length;++r<i;)if(o(e[r],t))return r;return-1}function Kt(e){return e!==e}function Gt(e,t){var n=null==e?0:e.length;return n?$t(e,t)/n:g}function qt(e){return function(t){return null==t?r:t[e]}}function Yt(e){return function(t){return null==e?r:e[t]}}function Xt(e,t,n,o,r){return r(e,(function(e,r,i){n=o?(o=!1,e):t(n,e,r,i)})),n}function $t(e,t){for(var n,o=-1,i=e.length;++o<i;){var s=t(e[o]);s!==r&&(n=n===r?s:n+s)}return n}function Zt(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}function Qt(e){return e?e.slice(0,mn(e)+1).replace(se,""):e}function Jt(e){return function(t){return e(t)}}function en(e,t){return Bt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,o=e.length;++n<o&&Vt(t,e[n],0)>-1;);return n}function on(e,t){for(var n=e.length;n--&&Vt(t,e[n],0)>-1;);return n}var rn=Yt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),sn=Yt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(e){return"\\"+dt[e]}function ln(e){return rt.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,o){n[++t]=[o,e]})),n}function dn(e,t){return function(n){return e(t(n))}}function un(e,t){for(var n=-1,o=e.length,r=0,i=[];++n<o;){var s=e[n];s!==t&&s!==a||(e[n]=a,i[r++]=n)}return i}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return ln(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Ft(e)}function gn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function mn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var vn=Yt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n=(t=null==t?gt:yn.defaults(gt.Object(),t,yn.pick(gt,st))).Array,o=t.Date,ae=t.Error,ke=t.Function,Ce=t.Math,Ee=t.Object,Ie=t.RegExp,Te=t.String,Pe=t.TypeError,Ae=n.prototype,Me=ke.prototype,je=Ee.prototype,Oe=t["__core-js_shared__"],Le=Me.toString,Be=je.hasOwnProperty,Re=0,Ne=function(){var e=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),De=je.toString,ze=Le.call(Ee),Fe=gt._,Ue=Ie("^"+Le.call(Be).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=yt?t.Buffer:r,Ve=t.Symbol,We=t.Uint8Array,Ke=He?He.allocUnsafe:r,Ge=dn(Ee.getPrototypeOf,Ee),qe=Ee.create,Ye=je.propertyIsEnumerable,Xe=Ae.splice,$e=Ve?Ve.isConcatSpreadable:r,Ze=Ve?Ve.iterator:r,Qe=Ve?Ve.toStringTag:r,Je=function(){try{var e=hi(Ee,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==gt.clearTimeout&&t.clearTimeout,rt=o&&o.now!==gt.Date.now&&o.now,dt=t.setTimeout!==gt.setTimeout&&t.setTimeout,pt=Ce.ceil,ft=Ce.floor,mt=Ee.getOwnPropertySymbols,vt=He?He.isBuffer:r,bt=t.isFinite,wt=Ae.join,Ft=dn(Ee.keys,Ee),Yt=Ce.max,bn=Ce.min,wn=o.now,xn=t.parseInt,Sn=Ce.random,_n=Ae.reverse,kn=hi(t,"DataView"),Cn=hi(t,"Map"),En=hi(t,"Promise"),In=hi(t,"Set"),Tn=hi(t,"WeakMap"),Pn=hi(Ee,"create"),An=Tn&&new Tn,Mn={},jn=Di(kn),On=Di(Cn),Ln=Di(En),Bn=Di(In),Rn=Di(Tn),Nn=Ve?Ve.prototype:r,Dn=Nn?Nn.valueOf:r,zn=Nn?Nn.toString:r;function Fn(e){if(ta(e)&&!Ws(e)&&!(e instanceof Wn)){if(e instanceof Vn)return e;if(Be.call(e,"__wrapped__"))return zi(e)}return new Vn(e)}var Un=function(){function e(){}return function(t){if(!ea(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Hn(){}function Vn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Wn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Xn(e){var t=this.__data__=new Gn(e);this.size=t.size}function $n(e,t){var n=Ws(e),o=!n&&Vs(e),r=!n&&!o&&Ys(e),i=!n&&!o&&!r&&ca(e),s=n||o||r||i,a=s?Zt(e.length,Te):[],l=a.length;for(var c in e)!t&&!Be.call(e,c)||s&&("length"==c||r&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bi(c,l))||a.push(c);return a}function Zn(e){var t=e.length;return t?e[Xo(0,t-1)]:r}function Qn(e,t){return Bi(Ar(e),ao(t,0,e.length))}function Jn(e){return Bi(Ar(e))}function eo(e,t,n){(n!==r&&!Fs(e[t],n)||n===r&&!(t in e))&&io(e,t,n)}function to(e,t,n){var o=e[t];Be.call(e,t)&&Fs(o,n)&&(n!==r||t in e)||io(e,t,n)}function no(e,t){for(var n=e.length;n--;)if(Fs(e[n][0],t))return n;return-1}function oo(e,t,n,o){return po(e,(function(e,r,i){t(o,e,n(e),i)})),o}function ro(e,t){return e&&Mr(t,Ma(t),e)}function io(e,t,n){"__proto__"==t&&Je?Je(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function so(e,t){for(var o=-1,i=t.length,s=n(i),a=null==e;++o<i;)s[o]=a?r:Ea(e,t[o]);return s}function ao(e,t,n){return e===e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function lo(e,t,n,o,i,s){var a,l=1&t,c=2&t,d=4&t;if(n&&(a=i?n(e,o,i,s):n(e)),a!==r)return a;if(!ea(e))return e;var u=Ws(e);if(u){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Be.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return Ar(e,a)}else{var h=gi(e),p=h==_||h==k;if(Ys(e))return kr(e,l);if(h==I||h==y||p&&!i){if(a=c||p?{}:vi(e),!l)return c?function(e,t){return Mr(e,fi(e),t)}(e,function(e,t){return e&&Mr(t,ja(t),e)}(a,e)):function(e,t){return Mr(e,pi(e),t)}(e,ro(a,e))}else{if(!ct[h])return i?e:{};a=function(e,t,n){var o=e.constructor;switch(t){case L:return Cr(e);case w:case x:return new o(+e);case B:return function(e,t){var n=t?Cr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case R:case N:case D:case z:case F:case U:case H:case V:case W:return Er(e,n);case C:return new o;case E:case M:return new o(e);case P:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case A:return new o;case j:return r=e,Dn?Ee(Dn.call(r)):{}}var r}(e,h,l)}}s||(s=new Xn);var f=s.get(e);if(f)return f;s.set(e,a),sa(e)?e.forEach((function(o){a.add(lo(o,t,n,o,e,s))})):na(e)&&e.forEach((function(o,r){a.set(r,lo(o,t,n,r,e,s))}));var g=u?r:(d?c?ii:ri:c?ja:Ma)(e);return Pt(g||e,(function(o,r){g&&(o=e[r=o]),to(a,r,lo(o,t,n,r,e,s))})),a}function co(e,t,n){var o=n.length;if(null==e)return!o;for(e=Ee(e);o--;){var i=n[o],s=t[i],a=e[i];if(a===r&&!(i in e)||!s(a))return!1}return!0}function uo(e,t,n){if("function"!=typeof e)throw new Pe(i);return Mi((function(){e.apply(r,n)}),t)}function ho(e,t,n,o){var r=-1,i=Ot,s=!0,a=e.length,l=[],c=t.length;if(!a)return l;n&&(t=Bt(t,Jt(n))),o?(i=Lt,s=!1):t.length>=200&&(i=tn,s=!1,t=new Yn(t));e:for(;++r<a;){var d=e[r],u=null==n?d:n(d);if(d=o||0!==d?d:0,s&&u===u){for(var h=c;h--;)if(t[h]===u)continue e;l.push(d)}else i(t,u,o)||l.push(d)}return l}Fn.templateSettings={escape:Q,evaluate:J,interpolate:ee,variable:"",imports:{_:Fn}},Fn.prototype=Hn.prototype,Fn.prototype.constructor=Fn,Vn.prototype=Un(Hn.prototype),Vn.prototype.constructor=Vn,Wn.prototype=Un(Hn.prototype),Wn.prototype.constructor=Wn,Kn.prototype.clear=function(){this.__data__=Pn?Pn(null):{},this.size=0},Kn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Kn.prototype.get=function(e){var t=this.__data__;if(Pn){var n=t[e];return n===s?r:n}return Be.call(t,e)?t[e]:r},Kn.prototype.has=function(e){var t=this.__data__;return Pn?t[e]!==r:Be.call(t,e)},Kn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Pn&&t===r?s:t,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=no(t,e);return!(n<0)&&(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,!0)},Gn.prototype.get=function(e){var t=this.__data__,n=no(t,e);return n<0?r:t[n][1]},Gn.prototype.has=function(e){return no(this.__data__,e)>-1},Gn.prototype.set=function(e,t){var n=this.__data__,o=no(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Kn,map:new(Cn||Gn),string:new Kn}},qn.prototype.delete=function(e){var t=di(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return di(this,e).get(e)},qn.prototype.has=function(e){return di(this,e).has(e)},qn.prototype.set=function(e,t){var n=di(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this},Yn.prototype.add=Yn.prototype.push=function(e){return this.__data__.set(e,s),this},Yn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Xn.prototype.get=function(e){return this.__data__.get(e)},Xn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Gn){var o=n.__data__;if(!Cn||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(o)}return n.set(e,t),this.size=n.size,this};var po=Lr(xo),fo=Lr(So,!0);function go(e,t){var n=!0;return po(e,(function(e,o,r){return n=!!t(e,o,r)})),n}function mo(e,t,n){for(var o=-1,i=e.length;++o<i;){var s=e[o],a=t(s);if(null!=a&&(l===r?a===a&&!la(a):n(a,l)))var l=a,c=s}return c}function vo(e,t){var n=[];return po(e,(function(e,o,r){t(e,o,r)&&n.push(e)})),n}function yo(e,t,n,o,r){var i=-1,s=e.length;for(n||(n=yi),r||(r=[]);++i<s;){var a=e[i];t>0&&n(a)?t>1?yo(a,t-1,n,o,r):Rt(r,a):o||(r[r.length]=a)}return r}var bo=Br(),wo=Br(!0);function xo(e,t){return e&&bo(e,t,Ma)}function So(e,t){return e&&wo(e,t,Ma)}function _o(e,t){return jt(t,(function(t){return Zs(e[t])}))}function ko(e,t){for(var n=0,o=(t=wr(t,e)).length;null!=e&&n<o;)e=e[Ni(t[n++])];return n&&n==o?e:r}function Co(e,t,n){var o=t(e);return Ws(e)?o:Rt(o,n(e))}function Eo(e){return null==e?e===r?"[object Undefined]":"[object Null]":Qe&&Qe in Ee(e)?function(e){var t=Be.call(e,Qe),n=e[Qe];try{e[Qe]=r;var o=!0}catch(s){}var i=De.call(e);o&&(t?e[Qe]=n:delete e[Qe]);return i}(e):function(e){return De.call(e)}(e)}function Io(e,t){return e>t}function To(e,t){return null!=e&&Be.call(e,t)}function Po(e,t){return null!=e&&t in Ee(e)}function Ao(e,t,o){for(var i=o?Lt:Ot,s=e[0].length,a=e.length,l=a,c=n(a),d=1/0,u=[];l--;){var h=e[l];l&&t&&(h=Bt(h,Jt(t))),d=bn(h.length,d),c[l]=!o&&(t||s>=120&&h.length>=120)?new Yn(l&&h):r}h=e[0];var p=-1,f=c[0];e:for(;++p<s&&u.length<d;){var g=h[p],m=t?t(g):g;if(g=o||0!==g?g:0,!(f?tn(f,m):i(u,m,o))){for(l=a;--l;){var v=c[l];if(!(v?tn(v,m):i(e[l],m,o)))continue e}f&&f.push(m),u.push(g)}}return u}function Mo(e,t,n){var o=null==(e=Ti(e,t=wr(t,e)))?e:e[Ni($i(t))];return null==o?r:It(o,e,n)}function jo(e){return ta(e)&&Eo(e)==y}function Oo(e,t,n,o,i){return e===t||(null==e||null==t||!ta(e)&&!ta(t)?e!==e&&t!==t:function(e,t,n,o,i,s){var a=Ws(e),l=Ws(t),c=a?b:gi(e),d=l?b:gi(t),u=(c=c==y?I:c)==I,h=(d=d==y?I:d)==I,p=c==d;if(p&&Ys(e)){if(!Ys(t))return!1;a=!0,u=!1}if(p&&!u)return s||(s=new Xn),a||ca(e)?ni(e,t,n,o,i,s):function(e,t,n,o,r,i,s){switch(n){case B:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case L:return!(e.byteLength!=t.byteLength||!i(new We(e),new We(t)));case w:case x:case E:return Fs(+e,+t);case S:return e.name==t.name&&e.message==t.message;case P:case M:return e==t+"";case C:var a=cn;case A:var l=1&o;if(a||(a=hn),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;o|=2,s.set(e,t);var d=ni(a(e),a(t),o,r,i,s);return s.delete(e),d;case j:if(Dn)return Dn.call(e)==Dn.call(t)}return!1}(e,t,c,n,o,i,s);if(!(1&n)){var f=u&&Be.call(e,"__wrapped__"),g=h&&Be.call(t,"__wrapped__");if(f||g){var m=f?e.value():e,v=g?t.value():t;return s||(s=new Xn),i(m,v,n,o,s)}}if(!p)return!1;return s||(s=new Xn),function(e,t,n,o,i,s){var a=1&n,l=ri(e),c=l.length,d=ri(t),u=d.length;if(c!=u&&!a)return!1;var h=c;for(;h--;){var p=l[h];if(!(a?p in t:Be.call(t,p)))return!1}var f=s.get(e),g=s.get(t);if(f&&g)return f==t&&g==e;var m=!0;s.set(e,t),s.set(t,e);var v=a;for(;++h<c;){var y=e[p=l[h]],b=t[p];if(o)var w=a?o(b,y,p,t,e,s):o(y,b,p,e,t,s);if(!(w===r?y===b||i(y,b,n,o,s):w)){m=!1;break}v||(v="constructor"==p)}if(m&&!v){var x=e.constructor,S=t.constructor;x==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof S&&S instanceof S||(m=!1)}return s.delete(e),s.delete(t),m}(e,t,n,o,i,s)}(e,t,n,o,Oo,i))}function Lo(e,t,n,o){var i=n.length,s=i,a=!o;if(null==e)return!s;for(e=Ee(e);i--;){var l=n[i];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<s;){var c=(l=n[i])[0],d=e[c],u=l[1];if(a&&l[2]){if(d===r&&!(c in e))return!1}else{var h=new Xn;if(o)var p=o(d,u,c,e,t,h);if(!(p===r?Oo(u,d,3,o,h):p))return!1}}return!0}function Bo(e){return!(!ea(e)||(t=e,Ne&&Ne in t))&&(Zs(e)?Ue:ye).test(Di(e));var t}function Ro(e){return"function"==typeof e?e:null==e?ol:"object"==typeof e?Ws(e)?Ho(e[0],e[1]):Uo(e):hl(e)}function No(e){if(!ki(e))return Ft(e);var t=[];for(var n in Ee(e))Be.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Do(e){if(!ea(e))return function(e){var t=[];if(null!=e)for(var n in Ee(e))t.push(n);return t}(e);var t=ki(e),n=[];for(var o in e)("constructor"!=o||!t&&Be.call(e,o))&&n.push(o);return n}function zo(e,t){return e<t}function Fo(e,t){var o=-1,r=Gs(e)?n(e.length):[];return po(e,(function(e,n,i){r[++o]=t(e,n,i)})),r}function Uo(e){var t=ui(e);return 1==t.length&&t[0][2]?Ei(t[0][0],t[0][1]):function(n){return n===e||Lo(n,e,t)}}function Ho(e,t){return xi(e)&&Ci(t)?Ei(Ni(e),t):function(n){var o=Ea(n,e);return o===r&&o===t?Ia(n,e):Oo(t,o,3)}}function Vo(e,t,n,o,i){e!==t&&bo(t,(function(s,a){if(i||(i=new Xn),ea(s))!function(e,t,n,o,i,s,a){var l=Pi(e,n),c=Pi(t,n),d=a.get(c);if(d)return void eo(e,n,d);var u=s?s(l,c,n+"",e,t,a):r,h=u===r;if(h){var p=Ws(c),f=!p&&Ys(c),g=!p&&!f&&ca(c);u=c,p||f||g?Ws(l)?u=l:qs(l)?u=Ar(l):f?(h=!1,u=kr(c,!0)):g?(h=!1,u=Er(c,!0)):u=[]:ra(c)||Vs(c)?(u=l,Vs(l)?u=va(l):ea(l)&&!Zs(l)||(u=vi(c))):h=!1}h&&(a.set(c,u),i(u,c,o,s,a),a.delete(c));eo(e,n,u)}(e,t,a,n,Vo,o,i);else{var l=o?o(Pi(e,a),s,a+"",e,t,i):r;l===r&&(l=s),eo(e,a,l)}}),ja)}function Wo(e,t){var n=e.length;if(n)return bi(t+=t<0?n:0,n)?e[t]:r}function Ko(e,t,n){t=t.length?Bt(t,(function(e){return Ws(e)?function(t){return ko(t,1===e.length?e[0]:e)}:e})):[ol];var o=-1;t=Bt(t,Jt(ci()));var r=Fo(e,(function(e,n,r){var i=Bt(t,(function(t){return t(e)}));return{criteria:i,index:++o,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(r,(function(e,t){return function(e,t,n){var o=-1,r=e.criteria,i=t.criteria,s=r.length,a=n.length;for(;++o<s;){var l=Ir(r[o],i[o]);if(l)return o>=a?l:l*("desc"==n[o]?-1:1)}return e.index-t.index}(e,t,n)}))}function Go(e,t,n){for(var o=-1,r=t.length,i={};++o<r;){var s=t[o],a=ko(e,s);n(a,s)&&er(i,wr(s,e),a)}return i}function qo(e,t,n,o){var r=o?Wt:Vt,i=-1,s=t.length,a=e;for(e===t&&(t=Ar(t)),n&&(a=Bt(e,Jt(n)));++i<s;)for(var l=0,c=t[i],d=n?n(c):c;(l=r(a,d,l,o))>-1;)a!==e&&Xe.call(a,l,1),Xe.call(e,l,1);return e}function Yo(e,t){for(var n=e?t.length:0,o=n-1;n--;){var r=t[n];if(n==o||r!==i){var i=r;bi(r)?Xe.call(e,r,1):hr(e,r)}}return e}function Xo(e,t){return e+ft(Sn()*(t-e+1))}function $o(e,t){var n="";if(!e||t<1||t>f)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function Zo(e,t){return ji(Ii(e,t,ol),e+"")}function Qo(e){return Zn(Fa(e))}function Jo(e,t){var n=Fa(e);return Bi(n,ao(t,0,n.length))}function er(e,t,n,o){if(!ea(e))return e;for(var i=-1,s=(t=wr(t,e)).length,a=s-1,l=e;null!=l&&++i<s;){var c=Ni(t[i]),d=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=a){var u=l[c];(d=o?o(u,c,l):r)===r&&(d=ea(u)?u:bi(t[i+1])?[]:{})}to(l,c,d),l=l[c]}return e}var tr=An?function(e,t){return An.set(e,t),e}:ol,nr=Je?function(e,t){return Je(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:ol;function or(e){return Bi(Fa(e))}function rr(e,t,o){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(o=o>i?i:o)<0&&(o+=i),i=t>o?0:o-t>>>0,t>>>=0;for(var s=n(i);++r<i;)s[r]=e[r+t];return s}function ir(e,t){var n;return po(e,(function(e,o,r){return!(n=t(e,o,r))})),!!n}function sr(e,t,n){var o=0,r=null==e?o:e.length;if("number"==typeof t&&t===t&&r<=2147483647){for(;o<r;){var i=o+r>>>1,s=e[i];null!==s&&!la(s)&&(n?s<=t:s<t)?o=i+1:r=i}return r}return ar(e,t,ol,n)}function ar(e,t,n,o){var i=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=n(t))!==t,l=null===t,c=la(t),d=t===r;i<s;){var u=ft((i+s)/2),h=n(e[u]),p=h!==r,f=null===h,g=h===h,m=la(h);if(a)var v=o||g;else v=d?g&&(o||p):l?g&&p&&(o||!f):c?g&&p&&!f&&(o||!m):!f&&!m&&(o?h<=t:h<t);v?i=u+1:s=u}return bn(s,4294967294)}function lr(e,t){for(var n=-1,o=e.length,r=0,i=[];++n<o;){var s=e[n],a=t?t(s):s;if(!n||!Fs(a,l)){var l=a;i[r++]=0===s?0:s}}return i}function cr(e){return"number"==typeof e?e:la(e)?g:+e}function dr(e){if("string"==typeof e)return e;if(Ws(e))return Bt(e,dr)+"";if(la(e))return zn?zn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ur(e,t,n){var o=-1,r=Ot,i=e.length,s=!0,a=[],l=a;if(n)s=!1,r=Lt;else if(i>=200){var c=t?null:$r(e);if(c)return hn(c);s=!1,r=tn,l=new Yn}else l=t?[]:a;e:for(;++o<i;){var d=e[o],u=t?t(d):d;if(d=n||0!==d?d:0,s&&u===u){for(var h=l.length;h--;)if(l[h]===u)continue e;t&&l.push(u),a.push(d)}else r(l,u,n)||(l!==a&&l.push(u),a.push(d))}return a}function hr(e,t){return null==(e=Ti(e,t=wr(t,e)))||delete e[Ni($i(t))]}function pr(e,t,n,o){return er(e,t,n(ko(e,t)),o)}function fr(e,t,n,o){for(var r=e.length,i=o?r:-1;(o?i--:++i<r)&&t(e[i],i,e););return n?rr(e,o?0:i,o?i+1:r):rr(e,o?i+1:0,o?r:i)}function gr(e,t){var n=e;return n instanceof Wn&&(n=n.value()),Nt(t,(function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))}),n)}function mr(e,t,o){var r=e.length;if(r<2)return r?ur(e[0]):[];for(var i=-1,s=n(r);++i<r;)for(var a=e[i],l=-1;++l<r;)l!=i&&(s[i]=ho(s[i]||a,e[l],t,o));return ur(yo(s,1),t,o)}function vr(e,t,n){for(var o=-1,i=e.length,s=t.length,a={};++o<i;){var l=o<s?t[o]:r;n(a,e[o],l)}return a}function yr(e){return qs(e)?e:[]}function br(e){return"function"==typeof e?e:ol}function wr(e,t){return Ws(e)?e:xi(e,t)?[e]:Ri(ya(e))}var xr=Zo;function Sr(e,t,n){var o=e.length;return n=n===r?o:n,!t&&n>=o?e:rr(e,t,n)}var _r=nt||function(e){return gt.clearTimeout(e)};function kr(e,t){if(t)return e.slice();var n=e.length,o=Ke?Ke(n):new e.constructor(n);return e.copy(o),o}function Cr(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function Er(e,t){var n=t?Cr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ir(e,t){if(e!==t){var n=e!==r,o=null===e,i=e===e,s=la(e),a=t!==r,l=null===t,c=t===t,d=la(t);if(!l&&!d&&!s&&e>t||s&&a&&c&&!l&&!d||o&&a&&c||!n&&c||!i)return 1;if(!o&&!s&&!d&&e<t||d&&n&&i&&!o&&!s||l&&n&&i||!a&&i||!c)return-1}return 0}function Tr(e,t,o,r){for(var i=-1,s=e.length,a=o.length,l=-1,c=t.length,d=Yt(s-a,0),u=n(c+d),h=!r;++l<c;)u[l]=t[l];for(;++i<a;)(h||i<s)&&(u[o[i]]=e[i]);for(;d--;)u[l++]=e[i++];return u}function Pr(e,t,o,r){for(var i=-1,s=e.length,a=-1,l=o.length,c=-1,d=t.length,u=Yt(s-l,0),h=n(u+d),p=!r;++i<u;)h[i]=e[i];for(var f=i;++c<d;)h[f+c]=t[c];for(;++a<l;)(p||i<s)&&(h[f+o[a]]=e[i++]);return h}function Ar(e,t){var o=-1,r=e.length;for(t||(t=n(r));++o<r;)t[o]=e[o];return t}function Mr(e,t,n,o){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var l=t[s],c=o?o(n[l],e[l],l,n,e):r;c===r&&(c=e[l]),i?io(n,l,c):to(n,l,c)}return n}function jr(e,t){return function(n,o){var r=Ws(n)?Tt:oo,i=t?t():{};return r(n,e,ci(o,2),i)}}function Or(e){return Zo((function(t,n){var o=-1,i=n.length,s=i>1?n[i-1]:r,a=i>2?n[2]:r;for(s=e.length>3&&"function"==typeof s?(i--,s):r,a&&wi(n[0],n[1],a)&&(s=i<3?r:s,i=1),t=Ee(t);++o<i;){var l=n[o];l&&e(t,l,o,s)}return t}))}function Lr(e,t){return function(n,o){if(null==n)return n;if(!Gs(n))return e(n,o);for(var r=n.length,i=t?r:-1,s=Ee(n);(t?i--:++i<r)&&!1!==o(s[i],i,s););return n}}function Br(e){return function(t,n,o){for(var r=-1,i=Ee(t),s=o(t),a=s.length;a--;){var l=s[e?a:++r];if(!1===n(i[l],l,i))break}return t}}function Rr(e){return function(t){var n=ln(t=ya(t))?gn(t):r,o=n?n[0]:t.charAt(0),i=n?Sr(n,1).join(""):t.slice(1);return o[e]()+i}}function Nr(e){return function(t){return Nt(Za(Va(t).replace(et,"")),e,"")}}function Dr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Un(e.prototype),o=e.apply(n,t);return ea(o)?o:n}}function zr(e){return function(t,n,o){var i=Ee(t);if(!Gs(t)){var s=ci(n,3);t=Ma(t),n=function(e){return s(i[e],e,i)}}var a=e(t,n,o);return a>-1?i[s?t[a]:a]:r}}function Fr(e){return oi((function(t){var n=t.length,o=n,s=Vn.prototype.thru;for(e&&t.reverse();o--;){var a=t[o];if("function"!=typeof a)throw new Pe(i);if(s&&!l&&"wrapper"==ai(a))var l=new Vn([],!0)}for(o=l?o:n;++o<n;){var c=ai(a=t[o]),d="wrapper"==c?si(a):r;l=d&&Si(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?l[ai(d[0])].apply(l,d[3]):1==a.length&&Si(a)?l[c]():l.thru(a)}return function(){var e=arguments,o=e[0];if(l&&1==e.length&&Ws(o))return l.plant(o).value();for(var r=0,i=n?t[r].apply(this,e):o;++r<n;)i=t[r].call(this,i);return i}}))}function Ur(e,t,o,i,s,a,l,c,d,h){var p=t&u,f=1&t,g=2&t,m=24&t,v=512&t,y=g?r:Dr(e);return function u(){for(var b=arguments.length,w=n(b),x=b;x--;)w[x]=arguments[x];if(m)var S=li(u),_=function(e,t){for(var n=e.length,o=0;n--;)e[n]===t&&++o;return o}(w,S);if(i&&(w=Tr(w,i,s,m)),a&&(w=Pr(w,a,l,m)),b-=_,m&&b<h){var k=un(w,S);return Yr(e,t,Ur,u.placeholder,o,w,k,c,d,h-b)}var C=f?o:this,E=g?C[e]:e;return b=w.length,c?w=function(e,t){var n=e.length,o=bn(t.length,n),i=Ar(e);for(;o--;){var s=t[o];e[o]=bi(s,n)?i[s]:r}return e}(w,c):v&&b>1&&w.reverse(),p&&d<b&&(w.length=d),this&&this!==gt&&this instanceof u&&(E=y||Dr(E)),E.apply(C,w)}}function Hr(e,t){return function(n,o){return function(e,t,n,o){return xo(e,(function(e,r,i){t(o,n(e),r,i)})),o}(n,e,t(o),{})}}function Vr(e,t){return function(n,o){var i;if(n===r&&o===r)return t;if(n!==r&&(i=n),o!==r){if(i===r)return o;"string"==typeof n||"string"==typeof o?(n=dr(n),o=dr(o)):(n=cr(n),o=cr(o)),i=e(n,o)}return i}}function Wr(e){return oi((function(t){return t=Bt(t,Jt(ci())),Zo((function(n){var o=this;return e(t,(function(e){return It(e,o,n)}))}))}))}function Kr(e,t){var n=(t=t===r?" ":dr(t)).length;if(n<2)return n?$o(t,e):t;var o=$o(t,pt(e/fn(t)));return ln(t)?Sr(gn(o),0,e).join(""):o.slice(0,e)}function Gr(e){return function(t,o,i){return i&&"number"!=typeof i&&wi(t,o,i)&&(o=i=r),t=pa(t),o===r?(o=t,t=0):o=pa(o),function(e,t,o,r){for(var i=-1,s=Yt(pt((t-e)/(o||1)),0),a=n(s);s--;)a[r?s:++i]=e,e+=o;return a}(t,o,i=i===r?t<o?1:-1:pa(i),e)}}function qr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ma(t),n=ma(n)),e(t,n)}}function Yr(e,t,n,o,i,s,a,l,u,h){var p=8&t;t|=p?c:d,4&(t&=~(p?d:c))||(t&=-4);var f=[e,t,i,p?s:r,p?a:r,p?r:s,p?r:a,l,u,h],g=n.apply(r,f);return Si(e)&&Ai(g,f),g.placeholder=o,Oi(g,e,t)}function Xr(e){var t=Ce[e];return function(e,n){if(e=ma(e),(n=null==n?0:bn(fa(n),292))&&bt(e)){var o=(ya(e)+"e").split("e");return+((o=(ya(t(o[0]+"e"+(+o[1]+n)))+"e").split("e"))[0]+"e"+(+o[1]-n))}return t(e)}}var $r=In&&1/hn(new In([,-0]))[1]==p?function(e){return new In(e)}:ll;function Zr(e){return function(t){var n=gi(t);return n==C?cn(t):n==A?pn(t):function(e,t){return Bt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Qr(e,t,o,s,p,f,g,m){var v=2&t;if(!v&&"function"!=typeof e)throw new Pe(i);var y=s?s.length:0;if(y||(t&=-97,s=p=r),g=g===r?g:Yt(fa(g),0),m=m===r?m:fa(m),y-=p?p.length:0,t&d){var b=s,w=p;s=p=r}var x=v?r:si(e),S=[e,t,o,s,p,b,w,f,g,m];if(x&&function(e,t){var n=e[1],o=t[1],r=n|o,i=r<131,s=o==u&&8==n||o==u&&n==h&&e[7].length<=t[8]||384==o&&t[7].length<=t[8]&&8==n;if(!i&&!s)return e;1&o&&(e[2]=t[2],r|=1&n?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?Tr(c,l,t[4]):l,e[4]=c?un(e[3],a):t[4]}(l=t[5])&&(c=e[5],e[5]=c?Pr(c,l,t[6]):l,e[6]=c?un(e[5],a):t[6]);(l=t[7])&&(e[7]=l);o&u&&(e[8]=null==e[8]?t[8]:bn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=r}(S,x),e=S[0],t=S[1],o=S[2],s=S[3],p=S[4],!(m=S[9]=S[9]===r?v?0:e.length:Yt(S[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)_=8==t||t==l?function(e,t,o){var i=Dr(e);return function s(){for(var a=arguments.length,l=n(a),c=a,d=li(s);c--;)l[c]=arguments[c];var u=a<3&&l[0]!==d&&l[a-1]!==d?[]:un(l,d);return(a-=u.length)<o?Yr(e,t,Ur,s.placeholder,r,l,u,r,r,o-a):It(this&&this!==gt&&this instanceof s?i:e,this,l)}}(e,t,m):t!=c&&33!=t||p.length?Ur.apply(r,S):function(e,t,o,r){var i=1&t,s=Dr(e);return function t(){for(var a=-1,l=arguments.length,c=-1,d=r.length,u=n(d+l),h=this&&this!==gt&&this instanceof t?s:e;++c<d;)u[c]=r[c];for(;l--;)u[c++]=arguments[++a];return It(h,i?o:this,u)}}(e,t,o,s);else var _=function(e,t,n){var o=1&t,r=Dr(e);return function t(){return(this&&this!==gt&&this instanceof t?r:e).apply(o?n:this,arguments)}}(e,t,o);return Oi((x?tr:Ai)(_,S),e,t)}function Jr(e,t,n,o){return e===r||Fs(e,je[n])&&!Be.call(o,n)?t:e}function ei(e,t,n,o,i,s){return ea(e)&&ea(t)&&(s.set(t,e),Vo(e,t,r,ei,s),s.delete(t)),e}function ti(e){return ra(e)?r:e}function ni(e,t,n,o,i,s){var a=1&n,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var d=s.get(e),u=s.get(t);if(d&&u)return d==t&&u==e;var h=-1,p=!0,f=2&n?new Yn:r;for(s.set(e,t),s.set(t,e);++h<l;){var g=e[h],m=t[h];if(o)var v=a?o(m,g,h,t,e,s):o(g,m,h,e,t,s);if(v!==r){if(v)continue;p=!1;break}if(f){if(!zt(t,(function(e,t){if(!tn(f,t)&&(g===e||i(g,e,n,o,s)))return f.push(t)}))){p=!1;break}}else if(g!==m&&!i(g,m,n,o,s)){p=!1;break}}return s.delete(e),s.delete(t),p}function oi(e){return ji(Ii(e,r,Ki),e+"")}function ri(e){return Co(e,Ma,pi)}function ii(e){return Co(e,ja,fi)}var si=An?function(e){return An.get(e)}:ll;function ai(e){for(var t=e.name+"",n=Mn[t],o=Be.call(Mn,t)?n.length:0;o--;){var r=n[o],i=r.func;if(null==i||i==e)return r.name}return t}function li(e){return(Be.call(Fn,"placeholder")?Fn:e).placeholder}function ci(){var e=Fn.iteratee||rl;return e=e===rl?Ro:e,arguments.length?e(arguments[0],arguments[1]):e}function di(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function ui(e){for(var t=Ma(e),n=t.length;n--;){var o=t[n],r=e[o];t[n]=[o,r,Ci(r)]}return t}function hi(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Bo(n)?n:r}var pi=mt?function(e){return null==e?[]:(e=Ee(e),jt(mt(e),(function(t){return Ye.call(e,t)})))}:gl,fi=mt?function(e){for(var t=[];e;)Rt(t,pi(e)),e=Ge(e);return t}:gl,gi=Eo;function mi(e,t,n){for(var o=-1,r=(t=wr(t,e)).length,i=!1;++o<r;){var s=Ni(t[o]);if(!(i=null!=e&&n(e,s)))break;e=e[s]}return i||++o!=r?i:!!(r=null==e?0:e.length)&&Js(r)&&bi(s,r)&&(Ws(e)||Vs(e))}function vi(e){return"function"!=typeof e.constructor||ki(e)?{}:Un(Ge(e))}function yi(e){return Ws(e)||Vs(e)||!!($e&&e&&e[$e])}function bi(e,t){var n=typeof e;return!!(t=null==t?f:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t}function wi(e,t,n){if(!ea(n))return!1;var o=typeof t;return!!("number"==o?Gs(n)&&bi(t,n.length):"string"==o&&t in n)&&Fs(n[t],e)}function xi(e,t){if(Ws(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!la(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Ee(t))}function Si(e){var t=ai(e),n=Fn[t];if("function"!=typeof n||!(t in Wn.prototype))return!1;if(e===n)return!0;var o=si(n);return!!o&&e===o[0]}(kn&&gi(new kn(new ArrayBuffer(1)))!=B||Cn&&gi(new Cn)!=C||En&&gi(En.resolve())!=T||In&&gi(new In)!=A||Tn&&gi(new Tn)!=O)&&(gi=function(e){var t=Eo(e),n=t==I?e.constructor:r,o=n?Di(n):"";if(o)switch(o){case jn:return B;case On:return C;case Ln:return T;case Bn:return A;case Rn:return O}return t});var _i=Oe?Zs:ml;function ki(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||je)}function Ci(e){return e===e&&!ea(e)}function Ei(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in Ee(n)))}}function Ii(e,t,o){return t=Yt(t===r?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=Yt(r.length-t,0),a=n(s);++i<s;)a[i]=r[t+i];i=-1;for(var l=n(t+1);++i<t;)l[i]=r[i];return l[t]=o(a),It(e,this,l)}}function Ti(e,t){return t.length<2?e:ko(e,rr(t,0,-1))}function Pi(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ai=Li(tr),Mi=dt||function(e,t){return gt.setTimeout(e,t)},ji=Li(nr);function Oi(e,t,n){var o=t+"";return ji(e,function(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(o,function(e,t){return Pt(v,(function(n){var o="_."+n[0];t&n[1]&&!Ot(e,o)&&e.push(o)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(de):[]}(o),n)))}function Li(e){var t=0,n=0;return function(){var o=wn(),i=16-(o-n);if(n=o,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Bi(e,t){var n=-1,o=e.length,i=o-1;for(t=t===r?o:t;++n<t;){var s=Xo(n,i),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var Ri=function(e){var t=Ls(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(oe,(function(e,n,o,r){t.push(o?r.replace(pe,"$1"):n||e)})),t}));function Ni(e){if("string"==typeof e||la(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Di(e){if(null!=e){try{return Le.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function zi(e){if(e instanceof Wn)return e.clone();var t=new Vn(e.__wrapped__,e.__chain__);return t.__actions__=Ar(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Fi=Zo((function(e,t){return qs(e)?ho(e,yo(t,1,qs,!0)):[]})),Ui=Zo((function(e,t){var n=$i(t);return qs(n)&&(n=r),qs(e)?ho(e,yo(t,1,qs,!0),ci(n,2)):[]})),Hi=Zo((function(e,t){var n=$i(t);return qs(n)&&(n=r),qs(e)?ho(e,yo(t,1,qs,!0),r,n):[]}));function Vi(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var r=null==n?0:fa(n);return r<0&&(r=Yt(o+r,0)),Ht(e,ci(t,3),r)}function Wi(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var i=o-1;return n!==r&&(i=fa(n),i=n<0?Yt(o+i,0):bn(i,o-1)),Ht(e,ci(t,3),i,!0)}function Ki(e){return(null==e?0:e.length)?yo(e,1):[]}function Gi(e){return e&&e.length?e[0]:r}var qi=Zo((function(e){var t=Bt(e,yr);return t.length&&t[0]===e[0]?Ao(t):[]})),Yi=Zo((function(e){var t=$i(e),n=Bt(e,yr);return t===$i(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Ao(n,ci(t,2)):[]})),Xi=Zo((function(e){var t=$i(e),n=Bt(e,yr);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?Ao(n,r,t):[]}));function $i(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Zi=Zo(Qi);function Qi(e,t){return e&&e.length&&t&&t.length?qo(e,t):e}var Ji=oi((function(e,t){var n=null==e?0:e.length,o=so(e,t);return Yo(e,Bt(t,(function(e){return bi(e,n)?+e:e})).sort(Ir)),o}));function es(e){return null==e?e:_n.call(e)}var ts=Zo((function(e){return ur(yo(e,1,qs,!0))})),ns=Zo((function(e){var t=$i(e);return qs(t)&&(t=r),ur(yo(e,1,qs,!0),ci(t,2))})),os=Zo((function(e){var t=$i(e);return t="function"==typeof t?t:r,ur(yo(e,1,qs,!0),r,t)}));function rs(e){if(!e||!e.length)return[];var t=0;return e=jt(e,(function(e){if(qs(e))return t=Yt(e.length,t),!0})),Zt(t,(function(t){return Bt(e,qt(t))}))}function is(e,t){if(!e||!e.length)return[];var n=rs(e);return null==t?n:Bt(n,(function(e){return It(t,r,e)}))}var ss=Zo((function(e,t){return qs(e)?ho(e,t):[]})),as=Zo((function(e){return mr(jt(e,qs))})),ls=Zo((function(e){var t=$i(e);return qs(t)&&(t=r),mr(jt(e,qs),ci(t,2))})),cs=Zo((function(e){var t=$i(e);return t="function"==typeof t?t:r,mr(jt(e,qs),r,t)})),ds=Zo(rs);var us=Zo((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,is(e,n)}));function hs(e){var t=Fn(e);return t.__chain__=!0,t}function ps(e,t){return t(e)}var fs=oi((function(e){var t=e.length,n=t?e[0]:0,o=this.__wrapped__,i=function(t){return so(t,e)};return!(t>1||this.__actions__.length)&&o instanceof Wn&&bi(n)?((o=o.slice(n,+n+(t?1:0))).__actions__.push({func:ps,args:[i],thisArg:r}),new Vn(o,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(i)}));var gs=jr((function(e,t,n){Be.call(e,n)?++e[n]:io(e,n,1)}));var ms=zr(Vi),vs=zr(Wi);function ys(e,t){return(Ws(e)?Pt:po)(e,ci(t,3))}function bs(e,t){return(Ws(e)?At:fo)(e,ci(t,3))}var ws=jr((function(e,t,n){Be.call(e,n)?e[n].push(t):io(e,n,[t])}));var xs=Zo((function(e,t,o){var r=-1,i="function"==typeof t,s=Gs(e)?n(e.length):[];return po(e,(function(e){s[++r]=i?It(t,e,o):Mo(e,t,o)})),s})),Ss=jr((function(e,t,n){io(e,n,t)}));function _s(e,t){return(Ws(e)?Bt:Fo)(e,ci(t,3))}var ks=jr((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Cs=Zo((function(e,t){if(null==e)return[];var n=t.length;return n>1&&wi(e,t[0],t[1])?t=[]:n>2&&wi(t[0],t[1],t[2])&&(t=[t[0]]),Ko(e,yo(t,1),[])})),Es=rt||function(){return gt.Date.now()};function Is(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Qr(e,u,r,r,r,r,t)}function Ts(e,t){var n;if("function"!=typeof t)throw new Pe(i);return e=fa(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var Ps=Zo((function(e,t,n){var o=1;if(n.length){var r=un(n,li(Ps));o|=c}return Qr(e,o,t,n,r)})),As=Zo((function(e,t,n){var o=3;if(n.length){var r=un(n,li(As));o|=c}return Qr(t,o,e,n,r)}));function Ms(e,t,n){var o,s,a,l,c,d,u=0,h=!1,p=!1,f=!0;if("function"!=typeof e)throw new Pe(i);function g(t){var n=o,i=s;return o=s=r,u=t,l=e.apply(i,n)}function m(e){var n=e-d;return d===r||n>=t||n<0||p&&e-u>=a}function v(){var e=Es();if(m(e))return y(e);c=Mi(v,function(e){var n=t-(e-d);return p?bn(n,a-(e-u)):n}(e))}function y(e){return c=r,f&&o?g(e):(o=s=r,l)}function b(){var e=Es(),n=m(e);if(o=arguments,s=this,d=e,n){if(c===r)return function(e){return u=e,c=Mi(v,t),h?g(e):l}(d);if(p)return _r(c),c=Mi(v,t),g(d)}return c===r&&(c=Mi(v,t)),l}return t=ma(t)||0,ea(n)&&(h=!!n.leading,a=(p="maxWait"in n)?Yt(ma(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),b.cancel=function(){c!==r&&_r(c),u=0,o=d=s=c=r},b.flush=function(){return c===r?l:y(Es())},b}var js=Zo((function(e,t){return uo(e,1,t)})),Os=Zo((function(e,t,n){return uo(e,ma(t)||0,n)}));function Ls(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Pe(i);var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],i=n.cache;if(i.has(r))return i.get(r);var s=e.apply(this,o);return n.cache=i.set(r,s)||i,s};return n.cache=new(Ls.Cache||qn),n}function Bs(e){if("function"!=typeof e)throw new Pe(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ls.Cache=qn;var Rs=xr((function(e,t){var n=(t=1==t.length&&Ws(t[0])?Bt(t[0],Jt(ci())):Bt(yo(t,1),Jt(ci()))).length;return Zo((function(o){for(var r=-1,i=bn(o.length,n);++r<i;)o[r]=t[r].call(this,o[r]);return It(e,this,o)}))})),Ns=Zo((function(e,t){var n=un(t,li(Ns));return Qr(e,c,r,t,n)})),Ds=Zo((function(e,t){var n=un(t,li(Ds));return Qr(e,d,r,t,n)})),zs=oi((function(e,t){return Qr(e,h,r,r,r,t)}));function Fs(e,t){return e===t||e!==e&&t!==t}var Us=qr(Io),Hs=qr((function(e,t){return e>=t})),Vs=jo(function(){return arguments}())?jo:function(e){return ta(e)&&Be.call(e,"callee")&&!Ye.call(e,"callee")},Ws=n.isArray,Ks=xt?Jt(xt):function(e){return ta(e)&&Eo(e)==L};function Gs(e){return null!=e&&Js(e.length)&&!Zs(e)}function qs(e){return ta(e)&&Gs(e)}var Ys=vt||ml,Xs=St?Jt(St):function(e){return ta(e)&&Eo(e)==x};function $s(e){if(!ta(e))return!1;var t=Eo(e);return t==S||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ra(e)}function Zs(e){if(!ea(e))return!1;var t=Eo(e);return t==_||t==k||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Qs(e){return"number"==typeof e&&e==fa(e)}function Js(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function ea(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ta(e){return null!=e&&"object"==typeof e}var na=_t?Jt(_t):function(e){return ta(e)&&gi(e)==C};function oa(e){return"number"==typeof e||ta(e)&&Eo(e)==E}function ra(e){if(!ta(e)||Eo(e)!=I)return!1;var t=Ge(e);if(null===t)return!0;var n=Be.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Le.call(n)==ze}var ia=kt?Jt(kt):function(e){return ta(e)&&Eo(e)==P};var sa=Ct?Jt(Ct):function(e){return ta(e)&&gi(e)==A};function aa(e){return"string"==typeof e||!Ws(e)&&ta(e)&&Eo(e)==M}function la(e){return"symbol"==typeof e||ta(e)&&Eo(e)==j}var ca=Et?Jt(Et):function(e){return ta(e)&&Js(e.length)&&!!lt[Eo(e)]};var da=qr(zo),ua=qr((function(e,t){return e<=t}));function ha(e){if(!e)return[];if(Gs(e))return aa(e)?gn(e):Ar(e);if(Ze&&e[Ze])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ze]());var t=gi(e);return(t==C?cn:t==A?hn:Fa)(e)}function pa(e){return e?(e=ma(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function fa(e){var t=pa(e),n=t%1;return t===t?n?t-n:t:0}function ga(e){return e?ao(fa(e),0,m):0}function ma(e){if("number"==typeof e)return e;if(la(e))return g;if(ea(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ea(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Qt(e);var n=ve.test(e);return n||be.test(e)?ht(e.slice(2),n?2:8):me.test(e)?g:+e}function va(e){return Mr(e,ja(e))}function ya(e){return null==e?"":dr(e)}var ba=Or((function(e,t){if(ki(t)||Gs(t))Mr(t,Ma(t),e);else for(var n in t)Be.call(t,n)&&to(e,n,t[n])})),wa=Or((function(e,t){Mr(t,ja(t),e)})),xa=Or((function(e,t,n,o){Mr(t,ja(t),e,o)})),Sa=Or((function(e,t,n,o){Mr(t,Ma(t),e,o)})),_a=oi(so);var ka=Zo((function(e,t){e=Ee(e);var n=-1,o=t.length,i=o>2?t[2]:r;for(i&&wi(t[0],t[1],i)&&(o=1);++n<o;)for(var s=t[n],a=ja(s),l=-1,c=a.length;++l<c;){var d=a[l],u=e[d];(u===r||Fs(u,je[d])&&!Be.call(e,d))&&(e[d]=s[d])}return e})),Ca=Zo((function(e){return e.push(r,ei),It(La,r,e)}));function Ea(e,t,n){var o=null==e?r:ko(e,t);return o===r?n:o}function Ia(e,t){return null!=e&&mi(e,t,Po)}var Ta=Hr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),e[t]=n}),el(ol)),Pa=Hr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),Be.call(e,t)?e[t].push(n):e[t]=[n]}),ci),Aa=Zo(Mo);function Ma(e){return Gs(e)?$n(e):No(e)}function ja(e){return Gs(e)?$n(e,!0):Do(e)}var Oa=Or((function(e,t,n){Vo(e,t,n)})),La=Or((function(e,t,n,o){Vo(e,t,n,o)})),Ba=oi((function(e,t){var n={};if(null==e)return n;var o=!1;t=Bt(t,(function(t){return t=wr(t,e),o||(o=t.length>1),t})),Mr(e,ii(e),n),o&&(n=lo(n,7,ti));for(var r=t.length;r--;)hr(n,t[r]);return n}));var Ra=oi((function(e,t){return null==e?{}:function(e,t){return Go(e,t,(function(t,n){return Ia(e,n)}))}(e,t)}));function Na(e,t){if(null==e)return{};var n=Bt(ii(e),(function(e){return[e]}));return t=ci(t),Go(e,n,(function(e,n){return t(e,n[0])}))}var Da=Zr(Ma),za=Zr(ja);function Fa(e){return null==e?[]:en(e,Ma(e))}var Ua=Nr((function(e,t,n){return t=t.toLowerCase(),e+(n?Ha(t):t)}));function Ha(e){return $a(ya(e).toLowerCase())}function Va(e){return(e=ya(e))&&e.replace(xe,rn).replace(tt,"")}var Wa=Nr((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ka=Nr((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ga=Rr("toLowerCase");var qa=Nr((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ya=Nr((function(e,t,n){return e+(n?" ":"")+$a(t)}));var Xa=Nr((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),$a=Rr("toUpperCase");function Za(e,t,n){return e=ya(e),(t=n?r:t)===r?function(e){return it.test(e)}(e)?function(e){return e.match(ot)||[]}(e):function(e){return e.match(ue)||[]}(e):e.match(t)||[]}var Qa=Zo((function(e,t){try{return It(e,r,t)}catch(n){return $s(n)?n:new ae(n)}})),Ja=oi((function(e,t){return Pt(t,(function(t){t=Ni(t),io(e,t,Ps(e[t],e))})),e}));function el(e){return function(){return e}}var tl=Fr(),nl=Fr(!0);function ol(e){return e}function rl(e){return Ro("function"==typeof e?e:lo(e,1))}var il=Zo((function(e,t){return function(n){return Mo(n,e,t)}})),sl=Zo((function(e,t){return function(n){return Mo(e,n,t)}}));function al(e,t,n){var o=Ma(t),r=_o(t,o);null!=n||ea(t)&&(r.length||!o.length)||(n=t,t=e,e=this,r=_o(t,Ma(t)));var i=!(ea(n)&&"chain"in n)||!!n.chain,s=Zs(e);return Pt(r,(function(n){var o=t[n];e[n]=o,s&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__);return(n.__actions__=Ar(this.__actions__)).push({func:o,args:arguments,thisArg:e}),n.__chain__=t,n}return o.apply(e,Rt([this.value()],arguments))})})),e}function ll(){}var cl=Wr(Bt),dl=Wr(Mt),ul=Wr(zt);function hl(e){return xi(e)?qt(Ni(e)):function(e){return function(t){return ko(t,e)}}(e)}var pl=Gr(),fl=Gr(!0);function gl(){return[]}function ml(){return!1}var vl=Vr((function(e,t){return e+t}),0),yl=Xr("ceil"),bl=Vr((function(e,t){return e/t}),1),wl=Xr("floor");var xl=Vr((function(e,t){return e*t}),1),Sl=Xr("round"),_l=Vr((function(e,t){return e-t}),0);return Fn.after=function(e,t){if("function"!=typeof t)throw new Pe(i);return e=fa(e),function(){if(--e<1)return t.apply(this,arguments)}},Fn.ary=Is,Fn.assign=ba,Fn.assignIn=wa,Fn.assignInWith=xa,Fn.assignWith=Sa,Fn.at=_a,Fn.before=Ts,Fn.bind=Ps,Fn.bindAll=Ja,Fn.bindKey=As,Fn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ws(e)?e:[e]},Fn.chain=hs,Fn.chunk=function(e,t,o){t=(o?wi(e,t,o):t===r)?1:Yt(fa(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var s=0,a=0,l=n(pt(i/t));s<i;)l[a++]=rr(e,s,s+=t);return l},Fn.compact=function(e){for(var t=-1,n=null==e?0:e.length,o=0,r=[];++t<n;){var i=e[t];i&&(r[o++]=i)}return r},Fn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),o=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Rt(Ws(o)?Ar(o):[o],yo(t,1))},Fn.cond=function(e){var t=null==e?0:e.length,n=ci();return e=t?Bt(e,(function(e){if("function"!=typeof e[1])throw new Pe(i);return[n(e[0]),e[1]]})):[],Zo((function(n){for(var o=-1;++o<t;){var r=e[o];if(It(r[0],this,n))return It(r[1],this,n)}}))},Fn.conforms=function(e){return function(e){var t=Ma(e);return function(n){return co(n,e,t)}}(lo(e,1))},Fn.constant=el,Fn.countBy=gs,Fn.create=function(e,t){var n=Un(e);return null==t?n:ro(n,t)},Fn.curry=function e(t,n,o){var i=Qr(t,8,r,r,r,r,r,n=o?r:n);return i.placeholder=e.placeholder,i},Fn.curryRight=function e(t,n,o){var i=Qr(t,l,r,r,r,r,r,n=o?r:n);return i.placeholder=e.placeholder,i},Fn.debounce=Ms,Fn.defaults=ka,Fn.defaultsDeep=Ca,Fn.defer=js,Fn.delay=Os,Fn.difference=Fi,Fn.differenceBy=Ui,Fn.differenceWith=Hi,Fn.drop=function(e,t,n){var o=null==e?0:e.length;return o?rr(e,(t=n||t===r?1:fa(t))<0?0:t,o):[]},Fn.dropRight=function(e,t,n){var o=null==e?0:e.length;return o?rr(e,0,(t=o-(t=n||t===r?1:fa(t)))<0?0:t):[]},Fn.dropRightWhile=function(e,t){return e&&e.length?fr(e,ci(t,3),!0,!0):[]},Fn.dropWhile=function(e,t){return e&&e.length?fr(e,ci(t,3),!0):[]},Fn.fill=function(e,t,n,o){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&wi(e,t,n)&&(n=0,o=i),function(e,t,n,o){var i=e.length;for((n=fa(n))<0&&(n=-n>i?0:i+n),(o=o===r||o>i?i:fa(o))<0&&(o+=i),o=n>o?0:ga(o);n<o;)e[n++]=t;return e}(e,t,n,o)):[]},Fn.filter=function(e,t){return(Ws(e)?jt:vo)(e,ci(t,3))},Fn.flatMap=function(e,t){return yo(_s(e,t),1)},Fn.flatMapDeep=function(e,t){return yo(_s(e,t),p)},Fn.flatMapDepth=function(e,t,n){return n=n===r?1:fa(n),yo(_s(e,t),n)},Fn.flatten=Ki,Fn.flattenDeep=function(e){return(null==e?0:e.length)?yo(e,p):[]},Fn.flattenDepth=function(e,t){return(null==e?0:e.length)?yo(e,t=t===r?1:fa(t)):[]},Fn.flip=function(e){return Qr(e,512)},Fn.flow=tl,Fn.flowRight=nl,Fn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,o={};++t<n;){var r=e[t];o[r[0]]=r[1]}return o},Fn.functions=function(e){return null==e?[]:_o(e,Ma(e))},Fn.functionsIn=function(e){return null==e?[]:_o(e,ja(e))},Fn.groupBy=ws,Fn.initial=function(e){return(null==e?0:e.length)?rr(e,0,-1):[]},Fn.intersection=qi,Fn.intersectionBy=Yi,Fn.intersectionWith=Xi,Fn.invert=Ta,Fn.invertBy=Pa,Fn.invokeMap=xs,Fn.iteratee=rl,Fn.keyBy=Ss,Fn.keys=Ma,Fn.keysIn=ja,Fn.map=_s,Fn.mapKeys=function(e,t){var n={};return t=ci(t,3),xo(e,(function(e,o,r){io(n,t(e,o,r),e)})),n},Fn.mapValues=function(e,t){var n={};return t=ci(t,3),xo(e,(function(e,o,r){io(n,o,t(e,o,r))})),n},Fn.matches=function(e){return Uo(lo(e,1))},Fn.matchesProperty=function(e,t){return Ho(e,lo(t,1))},Fn.memoize=Ls,Fn.merge=Oa,Fn.mergeWith=La,Fn.method=il,Fn.methodOf=sl,Fn.mixin=al,Fn.negate=Bs,Fn.nthArg=function(e){return e=fa(e),Zo((function(t){return Wo(t,e)}))},Fn.omit=Ba,Fn.omitBy=function(e,t){return Na(e,Bs(ci(t)))},Fn.once=function(e){return Ts(2,e)},Fn.orderBy=function(e,t,n,o){return null==e?[]:(Ws(t)||(t=null==t?[]:[t]),Ws(n=o?r:n)||(n=null==n?[]:[n]),Ko(e,t,n))},Fn.over=cl,Fn.overArgs=Rs,Fn.overEvery=dl,Fn.overSome=ul,Fn.partial=Ns,Fn.partialRight=Ds,Fn.partition=ks,Fn.pick=Ra,Fn.pickBy=Na,Fn.property=hl,Fn.propertyOf=function(e){return function(t){return null==e?r:ko(e,t)}},Fn.pull=Zi,Fn.pullAll=Qi,Fn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?qo(e,t,ci(n,2)):e},Fn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?qo(e,t,r,n):e},Fn.pullAt=Ji,Fn.range=pl,Fn.rangeRight=fl,Fn.rearg=zs,Fn.reject=function(e,t){return(Ws(e)?jt:vo)(e,Bs(ci(t,3)))},Fn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var o=-1,r=[],i=e.length;for(t=ci(t,3);++o<i;){var s=e[o];t(s,o,e)&&(n.push(s),r.push(o))}return Yo(e,r),n},Fn.rest=function(e,t){if("function"!=typeof e)throw new Pe(i);return Zo(e,t=t===r?t:fa(t))},Fn.reverse=es,Fn.sampleSize=function(e,t,n){return t=(n?wi(e,t,n):t===r)?1:fa(t),(Ws(e)?Qn:Jo)(e,t)},Fn.set=function(e,t,n){return null==e?e:er(e,t,n)},Fn.setWith=function(e,t,n,o){return o="function"==typeof o?o:r,null==e?e:er(e,t,n,o)},Fn.shuffle=function(e){return(Ws(e)?Jn:or)(e)},Fn.slice=function(e,t,n){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&wi(e,t,n)?(t=0,n=o):(t=null==t?0:fa(t),n=n===r?o:fa(n)),rr(e,t,n)):[]},Fn.sortBy=Cs,Fn.sortedUniq=function(e){return e&&e.length?lr(e):[]},Fn.sortedUniqBy=function(e,t){return e&&e.length?lr(e,ci(t,2)):[]},Fn.split=function(e,t,n){return n&&"number"!=typeof n&&wi(e,t,n)&&(t=n=r),(n=n===r?m:n>>>0)?(e=ya(e))&&("string"==typeof t||null!=t&&!ia(t))&&!(t=dr(t))&&ln(e)?Sr(gn(e),0,n):e.split(t,n):[]},Fn.spread=function(e,t){if("function"!=typeof e)throw new Pe(i);return t=null==t?0:Yt(fa(t),0),Zo((function(n){var o=n[t],r=Sr(n,0,t);return o&&Rt(r,o),It(e,this,r)}))},Fn.tail=function(e){var t=null==e?0:e.length;return t?rr(e,1,t):[]},Fn.take=function(e,t,n){return e&&e.length?rr(e,0,(t=n||t===r?1:fa(t))<0?0:t):[]},Fn.takeRight=function(e,t,n){var o=null==e?0:e.length;return o?rr(e,(t=o-(t=n||t===r?1:fa(t)))<0?0:t,o):[]},Fn.takeRightWhile=function(e,t){return e&&e.length?fr(e,ci(t,3),!1,!0):[]},Fn.takeWhile=function(e,t){return e&&e.length?fr(e,ci(t,3)):[]},Fn.tap=function(e,t){return t(e),e},Fn.throttle=function(e,t,n){var o=!0,r=!0;if("function"!=typeof e)throw new Pe(i);return ea(n)&&(o="leading"in n?!!n.leading:o,r="trailing"in n?!!n.trailing:r),Ms(e,t,{leading:o,maxWait:t,trailing:r})},Fn.thru=ps,Fn.toArray=ha,Fn.toPairs=Da,Fn.toPairsIn=za,Fn.toPath=function(e){return Ws(e)?Bt(e,Ni):la(e)?[e]:Ar(Ri(ya(e)))},Fn.toPlainObject=va,Fn.transform=function(e,t,n){var o=Ws(e),r=o||Ys(e)||ca(e);if(t=ci(t,4),null==n){var i=e&&e.constructor;n=r?o?new i:[]:ea(e)&&Zs(i)?Un(Ge(e)):{}}return(r?Pt:xo)(e,(function(e,o,r){return t(n,e,o,r)})),n},Fn.unary=function(e){return Is(e,1)},Fn.union=ts,Fn.unionBy=ns,Fn.unionWith=os,Fn.uniq=function(e){return e&&e.length?ur(e):[]},Fn.uniqBy=function(e,t){return e&&e.length?ur(e,ci(t,2)):[]},Fn.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?ur(e,r,t):[]},Fn.unset=function(e,t){return null==e||hr(e,t)},Fn.unzip=rs,Fn.unzipWith=is,Fn.update=function(e,t,n){return null==e?e:pr(e,t,br(n))},Fn.updateWith=function(e,t,n,o){return o="function"==typeof o?o:r,null==e?e:pr(e,t,br(n),o)},Fn.values=Fa,Fn.valuesIn=function(e){return null==e?[]:en(e,ja(e))},Fn.without=ss,Fn.words=Za,Fn.wrap=function(e,t){return Ns(br(t),e)},Fn.xor=as,Fn.xorBy=ls,Fn.xorWith=cs,Fn.zip=ds,Fn.zipObject=function(e,t){return vr(e||[],t||[],to)},Fn.zipObjectDeep=function(e,t){return vr(e||[],t||[],er)},Fn.zipWith=us,Fn.entries=Da,Fn.entriesIn=za,Fn.extend=wa,Fn.extendWith=xa,al(Fn,Fn),Fn.add=vl,Fn.attempt=Qa,Fn.camelCase=Ua,Fn.capitalize=Ha,Fn.ceil=yl,Fn.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=ma(n))===n?n:0),t!==r&&(t=(t=ma(t))===t?t:0),ao(ma(e),t,n)},Fn.clone=function(e){return lo(e,4)},Fn.cloneDeep=function(e){return lo(e,5)},Fn.cloneDeepWith=function(e,t){return lo(e,5,t="function"==typeof t?t:r)},Fn.cloneWith=function(e,t){return lo(e,4,t="function"==typeof t?t:r)},Fn.conformsTo=function(e,t){return null==t||co(e,t,Ma(t))},Fn.deburr=Va,Fn.defaultTo=function(e,t){return null==e||e!==e?t:e},Fn.divide=bl,Fn.endsWith=function(e,t,n){e=ya(e),t=dr(t);var o=e.length,i=n=n===r?o:ao(fa(n),0,o);return(n-=t.length)>=0&&e.slice(n,i)==t},Fn.eq=Fs,Fn.escape=function(e){return(e=ya(e))&&Z.test(e)?e.replace(X,sn):e},Fn.escapeRegExp=function(e){return(e=ya(e))&&ie.test(e)?e.replace(re,"\\$&"):e},Fn.every=function(e,t,n){var o=Ws(e)?Mt:go;return n&&wi(e,t,n)&&(t=r),o(e,ci(t,3))},Fn.find=ms,Fn.findIndex=Vi,Fn.findKey=function(e,t){return Ut(e,ci(t,3),xo)},Fn.findLast=vs,Fn.findLastIndex=Wi,Fn.findLastKey=function(e,t){return Ut(e,ci(t,3),So)},Fn.floor=wl,Fn.forEach=ys,Fn.forEachRight=bs,Fn.forIn=function(e,t){return null==e?e:bo(e,ci(t,3),ja)},Fn.forInRight=function(e,t){return null==e?e:wo(e,ci(t,3),ja)},Fn.forOwn=function(e,t){return e&&xo(e,ci(t,3))},Fn.forOwnRight=function(e,t){return e&&So(e,ci(t,3))},Fn.get=Ea,Fn.gt=Us,Fn.gte=Hs,Fn.has=function(e,t){return null!=e&&mi(e,t,To)},Fn.hasIn=Ia,Fn.head=Gi,Fn.identity=ol,Fn.includes=function(e,t,n,o){e=Gs(e)?e:Fa(e),n=n&&!o?fa(n):0;var r=e.length;return n<0&&(n=Yt(r+n,0)),aa(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&Vt(e,t,n)>-1},Fn.indexOf=function(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var r=null==n?0:fa(n);return r<0&&(r=Yt(o+r,0)),Vt(e,t,r)},Fn.inRange=function(e,t,n){return t=pa(t),n===r?(n=t,t=0):n=pa(n),function(e,t,n){return e>=bn(t,n)&&e<Yt(t,n)}(e=ma(e),t,n)},Fn.invoke=Aa,Fn.isArguments=Vs,Fn.isArray=Ws,Fn.isArrayBuffer=Ks,Fn.isArrayLike=Gs,Fn.isArrayLikeObject=qs,Fn.isBoolean=function(e){return!0===e||!1===e||ta(e)&&Eo(e)==w},Fn.isBuffer=Ys,Fn.isDate=Xs,Fn.isElement=function(e){return ta(e)&&1===e.nodeType&&!ra(e)},Fn.isEmpty=function(e){if(null==e)return!0;if(Gs(e)&&(Ws(e)||"string"==typeof e||"function"==typeof e.splice||Ys(e)||ca(e)||Vs(e)))return!e.length;var t=gi(e);if(t==C||t==A)return!e.size;if(ki(e))return!No(e).length;for(var n in e)if(Be.call(e,n))return!1;return!0},Fn.isEqual=function(e,t){return Oo(e,t)},Fn.isEqualWith=function(e,t,n){var o=(n="function"==typeof n?n:r)?n(e,t):r;return o===r?Oo(e,t,r,n):!!o},Fn.isError=$s,Fn.isFinite=function(e){return"number"==typeof e&&bt(e)},Fn.isFunction=Zs,Fn.isInteger=Qs,Fn.isLength=Js,Fn.isMap=na,Fn.isMatch=function(e,t){return e===t||Lo(e,t,ui(t))},Fn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,Lo(e,t,ui(t),n)},Fn.isNaN=function(e){return oa(e)&&e!=+e},Fn.isNative=function(e){if(_i(e))throw new ae("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Bo(e)},Fn.isNil=function(e){return null==e},Fn.isNull=function(e){return null===e},Fn.isNumber=oa,Fn.isObject=ea,Fn.isObjectLike=ta,Fn.isPlainObject=ra,Fn.isRegExp=ia,Fn.isSafeInteger=function(e){return Qs(e)&&e>=-9007199254740991&&e<=f},Fn.isSet=sa,Fn.isString=aa,Fn.isSymbol=la,Fn.isTypedArray=ca,Fn.isUndefined=function(e){return e===r},Fn.isWeakMap=function(e){return ta(e)&&gi(e)==O},Fn.isWeakSet=function(e){return ta(e)&&"[object WeakSet]"==Eo(e)},Fn.join=function(e,t){return null==e?"":wt.call(e,t)},Fn.kebabCase=Wa,Fn.last=$i,Fn.lastIndexOf=function(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var i=o;return n!==r&&(i=(i=fa(n))<0?Yt(o+i,0):bn(i,o-1)),t===t?function(e,t,n){for(var o=n+1;o--;)if(e[o]===t)return o;return o}(e,t,i):Ht(e,Kt,i,!0)},Fn.lowerCase=Ka,Fn.lowerFirst=Ga,Fn.lt=da,Fn.lte=ua,Fn.max=function(e){return e&&e.length?mo(e,ol,Io):r},Fn.maxBy=function(e,t){return e&&e.length?mo(e,ci(t,2),Io):r},Fn.mean=function(e){return Gt(e,ol)},Fn.meanBy=function(e,t){return Gt(e,ci(t,2))},Fn.min=function(e){return e&&e.length?mo(e,ol,zo):r},Fn.minBy=function(e,t){return e&&e.length?mo(e,ci(t,2),zo):r},Fn.stubArray=gl,Fn.stubFalse=ml,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=xl,Fn.nth=function(e,t){return e&&e.length?Wo(e,fa(t)):r},Fn.noConflict=function(){return gt._===this&&(gt._=Fe),this},Fn.noop=ll,Fn.now=Es,Fn.pad=function(e,t,n){e=ya(e);var o=(t=fa(t))?fn(e):0;if(!t||o>=t)return e;var r=(t-o)/2;return Kr(ft(r),n)+e+Kr(pt(r),n)},Fn.padEnd=function(e,t,n){e=ya(e);var o=(t=fa(t))?fn(e):0;return t&&o<t?e+Kr(t-o,n):e},Fn.padStart=function(e,t,n){e=ya(e);var o=(t=fa(t))?fn(e):0;return t&&o<t?Kr(t-o,n)+e:e},Fn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(ya(e).replace(se,""),t||0)},Fn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&wi(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=pa(e),t===r?(t=e,e=0):t=pa(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var i=Sn();return bn(e+i*(t-e+ut("1e-"+((i+"").length-1))),t)}return Xo(e,t)},Fn.reduce=function(e,t,n){var o=Ws(e)?Nt:Xt,r=arguments.length<3;return o(e,ci(t,4),n,r,po)},Fn.reduceRight=function(e,t,n){var o=Ws(e)?Dt:Xt,r=arguments.length<3;return o(e,ci(t,4),n,r,fo)},Fn.repeat=function(e,t,n){return t=(n?wi(e,t,n):t===r)?1:fa(t),$o(ya(e),t)},Fn.replace=function(){var e=arguments,t=ya(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fn.result=function(e,t,n){var o=-1,i=(t=wr(t,e)).length;for(i||(i=1,e=r);++o<i;){var s=null==e?r:e[Ni(t[o])];s===r&&(o=i,s=n),e=Zs(s)?s.call(e):s}return e},Fn.round=Sl,Fn.runInContext=e,Fn.sample=function(e){return(Ws(e)?Zn:Qo)(e)},Fn.size=function(e){if(null==e)return 0;if(Gs(e))return aa(e)?fn(e):e.length;var t=gi(e);return t==C||t==A?e.size:No(e).length},Fn.snakeCase=qa,Fn.some=function(e,t,n){var o=Ws(e)?zt:ir;return n&&wi(e,t,n)&&(t=r),o(e,ci(t,3))},Fn.sortedIndex=function(e,t){return sr(e,t)},Fn.sortedIndexBy=function(e,t,n){return ar(e,t,ci(n,2))},Fn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var o=sr(e,t);if(o<n&&Fs(e[o],t))return o}return-1},Fn.sortedLastIndex=function(e,t){return sr(e,t,!0)},Fn.sortedLastIndexBy=function(e,t,n){return ar(e,t,ci(n,2),!0)},Fn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=sr(e,t,!0)-1;if(Fs(e[n],t))return n}return-1},Fn.startCase=Ya,Fn.startsWith=function(e,t,n){return e=ya(e),n=null==n?0:ao(fa(n),0,e.length),t=dr(t),e.slice(n,n+t.length)==t},Fn.subtract=_l,Fn.sum=function(e){return e&&e.length?$t(e,ol):0},Fn.sumBy=function(e,t){return e&&e.length?$t(e,ci(t,2)):0},Fn.template=function(e,t,n){var o=Fn.templateSettings;n&&wi(e,t,n)&&(t=r),e=ya(e),t=xa({},t,o,Jr);var i,s,a=xa({},t.imports,o.imports,Jr),l=Ma(a),c=en(a,l),d=0,u=t.interpolate||Se,h="__p += '",p=Ie((t.escape||Se).source+"|"+u.source+"|"+(u===ee?fe:Se).source+"|"+(t.evaluate||Se).source+"|$","g"),f="//# sourceURL="+(Be.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(p,(function(t,n,o,r,a,l){return o||(o=r),h+=e.slice(d,l).replace(_e,an),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),a&&(s=!0,h+="';\n"+a+";\n__p += '"),o&&(h+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),d=l+t.length,t})),h+="';\n";var g=Be.call(t,"variable")&&t.variable;if(g){if(he.test(g))throw new ae("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(s?h.replace(K,""):h).replace(G,"$1").replace(q,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Qa((function(){return ke(l,f+"return "+h).apply(r,c)}));if(m.source=h,$s(m))throw m;return m},Fn.times=function(e,t){if((e=fa(e))<1||e>f)return[];var n=m,o=bn(e,m);t=ci(t),e-=m;for(var r=Zt(o,t);++n<e;)t(n);return r},Fn.toFinite=pa,Fn.toInteger=fa,Fn.toLength=ga,Fn.toLower=function(e){return ya(e).toLowerCase()},Fn.toNumber=ma,Fn.toSafeInteger=function(e){return e?ao(fa(e),-9007199254740991,f):0===e?e:0},Fn.toString=ya,Fn.toUpper=function(e){return ya(e).toUpperCase()},Fn.trim=function(e,t,n){if((e=ya(e))&&(n||t===r))return Qt(e);if(!e||!(t=dr(t)))return e;var o=gn(e),i=gn(t);return Sr(o,nn(o,i),on(o,i)+1).join("")},Fn.trimEnd=function(e,t,n){if((e=ya(e))&&(n||t===r))return e.slice(0,mn(e)+1);if(!e||!(t=dr(t)))return e;var o=gn(e);return Sr(o,0,on(o,gn(t))+1).join("")},Fn.trimStart=function(e,t,n){if((e=ya(e))&&(n||t===r))return e.replace(se,"");if(!e||!(t=dr(t)))return e;var o=gn(e);return Sr(o,nn(o,gn(t))).join("")},Fn.truncate=function(e,t){var n=30,o="...";if(ea(t)){var i="separator"in t?t.separator:i;n="length"in t?fa(t.length):n,o="omission"in t?dr(t.omission):o}var s=(e=ya(e)).length;if(ln(e)){var a=gn(e);s=a.length}if(n>=s)return e;var l=n-fn(o);if(l<1)return o;var c=a?Sr(a,0,l).join(""):e.slice(0,l);if(i===r)return c+o;if(a&&(l+=c.length-l),ia(i)){if(e.slice(l).search(i)){var d,u=c;for(i.global||(i=Ie(i.source,ya(ge.exec(i))+"g")),i.lastIndex=0;d=i.exec(u);)var h=d.index;c=c.slice(0,h===r?l:h)}}else if(e.indexOf(dr(i),l)!=l){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+o},Fn.unescape=function(e){return(e=ya(e))&&$.test(e)?e.replace(Y,vn):e},Fn.uniqueId=function(e){var t=++Re;return ya(e)+t},Fn.upperCase=Xa,Fn.upperFirst=$a,Fn.each=ys,Fn.eachRight=bs,Fn.first=Gi,al(Fn,function(){var e={};return xo(Fn,(function(t,n){Be.call(Fn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Fn.VERSION="4.17.21",Pt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Fn[e].placeholder=Fn})),Pt(["drop","take"],(function(e,t){Wn.prototype[e]=function(n){n=n===r?1:Yt(fa(n),0);var o=this.__filtered__&&!t?new Wn(this):this.clone();return o.__filtered__?o.__takeCount__=bn(n,o.__takeCount__):o.__views__.push({size:bn(n,m),type:e+(o.__dir__<0?"Right":"")}),o},Wn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Pt(["filter","map","takeWhile"],(function(e,t){var n=t+1,o=1==n||3==n;Wn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ci(e,3),type:n}),t.__filtered__=t.__filtered__||o,t}})),Pt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Wn.prototype[e]=function(){return this[n](1).value()[0]}})),Pt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Wn.prototype[e]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(ol)},Wn.prototype.find=function(e){return this.filter(e).head()},Wn.prototype.findLast=function(e){return this.reverse().find(e)},Wn.prototype.invokeMap=Zo((function(e,t){return"function"==typeof e?new Wn(this):this.map((function(n){return Mo(n,e,t)}))})),Wn.prototype.reject=function(e){return this.filter(Bs(ci(e)))},Wn.prototype.slice=function(e,t){e=fa(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Wn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=fa(t))<0?n.dropRight(-t):n.take(t-e)),n)},Wn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wn.prototype.toArray=function(){return this.take(m)},xo(Wn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),i=Fn[o?"take"+("last"==t?"Right":""):t],s=o||/^find/.test(t);i&&(Fn.prototype[t]=function(){var t=this.__wrapped__,a=o?[1]:arguments,l=t instanceof Wn,c=a[0],d=l||Ws(t),u=function(e){var t=i.apply(Fn,Rt([e],a));return o&&h?t[0]:t};d&&n&&"function"==typeof c&&1!=c.length&&(l=d=!1);var h=this.__chain__,p=!!this.__actions__.length,f=s&&!h,g=l&&!p;if(!s&&d){t=g?t:new Wn(this);var m=e.apply(t,a);return m.__actions__.push({func:ps,args:[u],thisArg:r}),new Vn(m,h)}return f&&g?e.apply(this,a):(m=this.thru(u),f?o?m.value()[0]:m.value():m)})})),Pt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ae[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);Fn.prototype[e]=function(){var e=arguments;if(o&&!this.__chain__){var r=this.value();return t.apply(Ws(r)?r:[],e)}return this[n]((function(n){return t.apply(Ws(n)?n:[],e)}))}})),xo(Wn.prototype,(function(e,t){var n=Fn[t];if(n){var o=n.name+"";Be.call(Mn,o)||(Mn[o]=[]),Mn[o].push({name:t,func:n})}})),Mn[Ur(r,2).name]=[{name:"wrapper",func:r}],Wn.prototype.clone=function(){var e=new Wn(this.__wrapped__);return e.__actions__=Ar(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ar(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ar(this.__views__),e},Wn.prototype.reverse=function(){if(this.__filtered__){var e=new Wn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ws(e),o=t<0,r=n?e.length:0,i=function(e,t,n){var o=-1,r=n.length;for(;++o<r;){var i=n[o],s=i.size;switch(i.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=bn(t,e+s);break;case"takeRight":e=Yt(e,t-s)}}return{start:e,end:t}}(0,r,this.__views__),s=i.start,a=i.end,l=a-s,c=o?a:s-1,d=this.__iteratees__,u=d.length,h=0,p=bn(l,this.__takeCount__);if(!n||!o&&r==l&&p==l)return gr(e,this.__actions__);var f=[];e:for(;l--&&h<p;){for(var g=-1,m=e[c+=t];++g<u;){var v=d[g],y=v.iteratee,b=v.type,w=y(m);if(2==b)m=w;else if(!w){if(1==b)continue e;break e}}f[h++]=m}return f},Fn.prototype.at=fs,Fn.prototype.chain=function(){return hs(this)},Fn.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===r&&(this.__values__=ha(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},Fn.prototype.plant=function(e){for(var t,n=this;n instanceof Hn;){var o=zi(n);o.__index__=0,o.__values__=r,t?i.__wrapped__=o:t=o;var i=o;n=n.__wrapped__}return i.__wrapped__=e,t},Fn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wn){var t=e;return this.__actions__.length&&(t=new Wn(this)),(t=t.reverse()).__actions__.push({func:ps,args:[es],thisArg:r}),new Vn(t,this.__chain__)}return this.thru(es)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return gr(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,Ze&&(Fn.prototype[Ze]=function(){return this}),Fn}();gt._=yn,(o=function(){return yn}.call(t,n,t,e))===r||(e.exports=o)}.call(this)},3393:(e,t,n)=>{var o,r=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function r(e,t){if(!o[e]){o[e]={};for(var n=0;n<e.length;n++)o[e][e.charAt(n)]=n}return o[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var n=i._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(n){return r(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),o=0,r=t.length;o<r;o++){var s=t.charCodeAt(o);n[2*o]=s>>>8,n[2*o+1]=s%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return i.decompress(t);for(var n=new Array(t.length/2),o=0,r=n.length;o<r;o++)n[o]=256*t[2*o]+t[2*o+1];var s=[];return n.forEach((function(t){s.push(e(t))})),i.decompress(s.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(t){return r(n,e.charAt(t))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var o,r,i,s={},a={},l="",c="",d="",u=2,h=3,p=2,f=[],g=0,m=0;for(i=0;i<e.length;i+=1)if(l=e.charAt(i),Object.prototype.hasOwnProperty.call(s,l)||(s[l]=h++,a[l]=!0),c=d+l,Object.prototype.hasOwnProperty.call(s,c))d=c;else{if(Object.prototype.hasOwnProperty.call(a,d)){if(d.charCodeAt(0)<256){for(o=0;o<p;o++)g<<=1,m==t-1?(m=0,f.push(n(g)),g=0):m++;for(r=d.charCodeAt(0),o=0;o<8;o++)g=g<<1|1&r,m==t-1?(m=0,f.push(n(g)),g=0):m++,r>>=1}else{for(r=1,o=0;o<p;o++)g=g<<1|r,m==t-1?(m=0,f.push(n(g)),g=0):m++,r=0;for(r=d.charCodeAt(0),o=0;o<16;o++)g=g<<1|1&r,m==t-1?(m=0,f.push(n(g)),g=0):m++,r>>=1}0==--u&&(u=Math.pow(2,p),p++),delete a[d]}else for(r=s[d],o=0;o<p;o++)g=g<<1|1&r,m==t-1?(m=0,f.push(n(g)),g=0):m++,r>>=1;0==--u&&(u=Math.pow(2,p),p++),s[c]=h++,d=String(l)}if(""!==d){if(Object.prototype.hasOwnProperty.call(a,d)){if(d.charCodeAt(0)<256){for(o=0;o<p;o++)g<<=1,m==t-1?(m=0,f.push(n(g)),g=0):m++;for(r=d.charCodeAt(0),o=0;o<8;o++)g=g<<1|1&r,m==t-1?(m=0,f.push(n(g)),g=0):m++,r>>=1}else{for(r=1,o=0;o<p;o++)g=g<<1|r,m==t-1?(m=0,f.push(n(g)),g=0):m++,r=0;for(r=d.charCodeAt(0),o=0;o<16;o++)g=g<<1|1&r,m==t-1?(m=0,f.push(n(g)),g=0):m++,r>>=1}0==--u&&(u=Math.pow(2,p),p++),delete a[d]}else for(r=s[d],o=0;o<p;o++)g=g<<1|1&r,m==t-1?(m=0,f.push(n(g)),g=0):m++,r>>=1;0==--u&&(u=Math.pow(2,p),p++)}for(r=2,o=0;o<p;o++)g=g<<1|1&r,m==t-1?(m=0,f.push(n(g)),g=0):m++,r>>=1;for(;;){if(g<<=1,m==t-1){f.push(n(g));break}m++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,o){var r,i,s,a,l,c,d,u=[],h=4,p=4,f=3,g="",m=[],v={val:o(0),position:n,index:1};for(r=0;r<3;r+=1)u[r]=r;for(s=0,l=Math.pow(2,2),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=o(v.index++)),s|=(a>0?1:0)*c,c<<=1;switch(s){case 0:for(s=0,l=Math.pow(2,8),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=o(v.index++)),s|=(a>0?1:0)*c,c<<=1;d=e(s);break;case 1:for(s=0,l=Math.pow(2,16),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=o(v.index++)),s|=(a>0?1:0)*c,c<<=1;d=e(s);break;case 2:return""}for(u[3]=d,i=d,m.push(d);;){if(v.index>t)return"";for(s=0,l=Math.pow(2,f),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=o(v.index++)),s|=(a>0?1:0)*c,c<<=1;switch(d=s){case 0:for(s=0,l=Math.pow(2,8),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=o(v.index++)),s|=(a>0?1:0)*c,c<<=1;u[p++]=e(s),d=p-1,h--;break;case 1:for(s=0,l=Math.pow(2,16),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=o(v.index++)),s|=(a>0?1:0)*c,c<<=1;u[p++]=e(s),d=p-1,h--;break;case 2:return m.join("")}if(0==h&&(h=Math.pow(2,f),f++),u[d])g=u[d];else{if(d!==p)return null;g=i+i.charAt(0)}m.push(g),u[p++]=i+g.charAt(0),i=g,0==--h&&(h=Math.pow(2,f),f++)}}};return i}();void 0===(o=function(){return r}.call(t,n,t,e))||(e.exports=o)},2730:(e,t,n)=>{"use strict";var o=n(5043),r=n(8853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,n,o,r,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,o){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:o||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,o){if(null===t||"undefined"===typeof t||function(e,t,n,o){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!o&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,o))return!0;if(o)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,o)&&(n=null),o||null===r?function(e){return!!u.call(f,e)||!u.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,o=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var R,N=Object.assign;function D(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var z=!1;function F(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var o=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){o=c}e.call(t.prototype)}else{try{throw Error()}catch(c){o=c}e()}}catch(c){if(c&&o&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),i=o.stack.split("\n"),s=r.length-1,a=i.length-1;1<=s&&0<=a&&r[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==i[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==i[a]){var l="\n"+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function U(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case C:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){o=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(e){o=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=K(e)?e.checked?"true":"false":e.value),(e=o)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,o=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){Z(e,t);var n=W(t.value),o=t.type;if(null!=n)"number"===o?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===o||"reset"===o)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!("submit"!==o&&"reset"!==o||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,o){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&o&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(o&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ie(e,t){var n=W(t.value),o=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=o&&(e.defaultValue=""+o)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,o){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var o=0===n.indexOf("--"),r=ge(n,t[n],o);"float"===n&&(n="cssFloat"),o?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,_e=null,ke=null;function Ce(e){if(e=wr(e)){if("function"!==typeof Se)throw Error(i(280));var t=e.stateNode;t&&(t=Sr(t),Se(e.stateNode,e.type,t))}}function Ee(e){_e?ke?ke.push(e):ke=[e]:_e=e}function Ie(){if(_e){var e=_e,t=ke;if(ke=_e=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Te(e,t){return e(t)}function Pe(){}var Ae=!1;function Me(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Te(e,t,n)}finally{Ae=!1,(null!==_e||null!==ke)&&(Pe(),Ie())}}function je(e,t){var n=e.stateNode;if(null===n)return null;var o=Sr(n);if(null===o)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!o;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(d)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(de){Oe=!1}function Be(e,t,n,o,r,i,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Re=!1,Ne=null,De=!1,ze=null,Fe={onError:function(e){Re=!0,Ne=e}};function Ue(e,t,n,o,r,i,s,a,l){Re=!1,Ne=null,Be.apply(Fe,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(i(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,o=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(o=r.return)){n=o;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return We(r),e;if(s===o)return We(r),t;s=s.sibling}throw Error(i(188))}if(n.return!==o.return)n=r,o=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,o=s;break}if(l===o){a=!0,o=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,o=r;break}if(l===o){a=!0,o=s,n=r;break}l=l.sibling}if(!a)throw Error(i(189))}}if(n.alternate!==o)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var qe=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,$e=r.unstable_requestPaint,Ze=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,ot=r.unstable_IdlePriority,rt=null,it=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var o=0,r=e.suspendedLanes,i=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~r;0!==a?o=ut(a):0!==(i&=s)&&(o=ut(i))}else 0!==(s=n&~r)?o=ut(s):0!==i&&(o=ut(i));if(0===o)return 0;if(0!==t&&t!==o&&0===(t&r)&&((r=o&-o)>=(i=t&-t)||16===r&&0!==(4194240&i)))return t;if(0!==(4&o)&&(o|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=o;0<t;)r=1<<(n=31-st(t)),o|=e[n],t&=~r;return o}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-st(n),r=1<<o;r&t|e[o]&t&&(e[o]|=t),n&=~r}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,_t,kt,Ct,Et=!1,It=[],Tt=null,Pt=null,At=null,Mt=new Map,jt=new Map,Ot=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(t.pointerId)}}function Rt(e,t,n,o,r,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:i,targetContainers:[r]},null!==t&&(null!==(t=wr(t))&&St(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Nt(e){var t=br(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Ct(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wr(n))&&St(t),e.blockedOn=n,!1;var o=new(n=e.nativeEvent).constructor(n.type,n);we=o,n.target.dispatchEvent(o),we=null,t.shift()}return!0}function zt(e,t,n){Dt(e)&&n.delete(t)}function Ft(){Et=!1,null!==Tt&&Dt(Tt)&&(Tt=null),null!==Pt&&Dt(Pt)&&(Pt=null),null!==At&&Dt(At)&&(At=null),Mt.forEach(zt),jt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ft)))}function Ht(e){function t(t){return Ut(t,e)}if(0<It.length){Ut(It[0],e);for(var n=1;n<It.length;n++){var o=It[n];o.blockedOn===e&&(o.blockedOn=null)}}for(null!==Tt&&Ut(Tt,e),null!==Pt&&Ut(Pt,e),null!==At&&Ut(At,e),Mt.forEach(t),jt.forEach(t),n=0;n<Ot.length;n++)(o=Ot[n]).blockedOn===e&&(o.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Nt(n),null===n.blockedOn&&Ot.shift()}var Vt=w.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,o){var r=bt,i=Vt.transition;Vt.transition=null;try{bt=1,qt(e,t,n,o)}finally{bt=r,Vt.transition=i}}function Gt(e,t,n,o){var r=bt,i=Vt.transition;Vt.transition=null;try{bt=4,qt(e,t,n,o)}finally{bt=r,Vt.transition=i}}function qt(e,t,n,o){if(Wt){var r=Xt(e,t,n,o);if(null===r)Ko(e,t,o,Yt,n),Bt(e,o);else if(function(e,t,n,o,r){switch(t){case"focusin":return Tt=Rt(Tt,e,t,n,o,r),!0;case"dragenter":return Pt=Rt(Pt,e,t,n,o,r),!0;case"mouseover":return At=Rt(At,e,t,n,o,r),!0;case"pointerover":var i=r.pointerId;return Mt.set(i,Rt(Mt.get(i)||null,e,t,n,o,r)),!0;case"gotpointercapture":return i=r.pointerId,jt.set(i,Rt(jt.get(i)||null,e,t,n,o,r)),!0}return!1}(r,e,t,n,o))o.stopPropagation();else if(Bt(e,o),4&t&&-1<Lt.indexOf(e)){for(;null!==r;){var i=wr(r);if(null!==i&&xt(i),null===(i=Xt(e,t,n,o))&&Ko(e,t,o,Yt,n),i===r)break;r=i}null!==r&&o.stopPropagation()}else Ko(e,t,o,null,n)}}var Yt=null;function Xt(e,t,n,o){if(Yt=null,null!==(e=br(e=xe(o))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case ot:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,o=n.length,r="value"in Zt?Zt.value:Zt.textContent,i=r.length;for(e=0;e<o&&n[e]===r[e];e++);var s=o-e;for(t=1;t<=s&&n[o-t]===r[i-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function on(){return!1}function rn(e){function t(t,n,o,r,i){for(var s in this._reactName=t,this._targetInst=o,this.type=n,this.nativeEvent=r,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:on,this.isPropagationStopped=on,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=rn(cn),un=N({},cn,{view:0,detail:0}),hn=rn(un),pn=N({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=rn(pn),gn=rn(N({},pn,{dataTransfer:0})),mn=rn(N({},un,{relatedTarget:0})),vn=rn(N({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=N({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=rn(yn),wn=rn(N({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Cn(){return kn}var En=N({},un,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=rn(En),Tn=rn(N({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=rn(N({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),An=rn(N({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=N({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=rn(Mn),On=[9,13,27,32],Ln=d&&"CompositionEvent"in window,Bn=null;d&&"documentMode"in document&&(Bn=document.documentMode);var Rn=d&&"TextEvent"in window&&!Bn,Nn=d&&(!Ln||Bn&&8<Bn&&11>=Bn),Dn=String.fromCharCode(32),zn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Kn(e,t,n,o){Ee(o),0<(t=qo(t,"onChange")).length&&(n=new dn("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Gn=null,qn=null;function Yn(e){zo(e,0)}function Xn(e){if(q(xr(e)))return e}function $n(e,t){if("change"===e)return t}var Zn=!1;if(d){var Qn;if(d){var Jn="oninput"in document;if(!Jn){var eo=document.createElement("div");eo.setAttribute("oninput","return;"),Jn="function"===typeof eo.oninput}Qn=Jn}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function to(){Gn&&(Gn.detachEvent("onpropertychange",no),qn=Gn=null)}function no(e){if("value"===e.propertyName&&Xn(qn)){var t=[];Kn(t,qn,e,xe(e)),Me(Yn,t)}}function oo(e,t,n){"focusin"===e?(to(),qn=n,(Gn=t).attachEvent("onpropertychange",no)):"focusout"===e&&to()}function ro(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(qn)}function io(e,t){if("click"===e)return Xn(t)}function so(e,t){if("input"===e||"change"===e)return Xn(t)}var ao="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lo(e,t){if(ao(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!u.call(t,r)||!ao(e[r],t[r]))return!1}return!0}function co(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uo(e,t){var n,o=co(e);for(e=0;o;){if(3===o.nodeType){if(n=e+o.textContent.length,e<=t&&n>=t)return{node:o,offset:t-e};e=n}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=co(o)}}function ho(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ho(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function po(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(o){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function go(e){var t=po(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ho(n.ownerDocument.documentElement,n)){if(null!==o&&fo(n))if(t=o.start,void 0===(e=o.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(o.start,r);o=void 0===o.end?i:Math.min(o.end,r),!e.extend&&i>o&&(r=o,o=i,i=r),r=uo(n,i);var s=uo(n,o);r&&s&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),i>o?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mo=d&&"documentMode"in document&&11>=document.documentMode,vo=null,yo=null,bo=null,wo=!1;function xo(e,t,n){var o=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wo||null==vo||vo!==Y(o)||("selectionStart"in(o=vo)&&fo(o)?o={start:o.selectionStart,end:o.selectionEnd}:o={anchorNode:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset},bo&&lo(bo,o)||(bo=o,0<(o=qo(yo,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=vo)))}function So(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _o={animationend:So("Animation","AnimationEnd"),animationiteration:So("Animation","AnimationIteration"),animationstart:So("Animation","AnimationStart"),transitionend:So("Transition","TransitionEnd")},ko={},Co={};function Eo(e){if(ko[e])return ko[e];if(!_o[e])return e;var t,n=_o[e];for(t in n)if(n.hasOwnProperty(t)&&t in Co)return ko[e]=n[t];return e}d&&(Co=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);var Io=Eo("animationend"),To=Eo("animationiteration"),Po=Eo("animationstart"),Ao=Eo("transitionend"),Mo=new Map,jo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oo(e,t){Mo.set(e,t),l(t,[e])}for(var Lo=0;Lo<jo.length;Lo++){var Bo=jo[Lo];Oo(Bo.toLowerCase(),"on"+(Bo[0].toUpperCase()+Bo.slice(1)))}Oo(Io,"onAnimationEnd"),Oo(To,"onAnimationIteration"),Oo(Po,"onAnimationStart"),Oo("dblclick","onDoubleClick"),Oo("focusin","onFocus"),Oo("focusout","onBlur"),Oo(Ao,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),No=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ro));function Do(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,o,r,s,a,l,c){if(Ue.apply(this,arguments),Re){if(!Re)throw Error(i(198));var d=Ne;Re=!1,Ne=null,De||(De=!0,ze=d)}}(o,t,void 0,e),e.currentTarget=null}function zo(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var o=e[n],r=o.event;o=o.listeners;e:{var i=void 0;if(t)for(var s=o.length-1;0<=s;s--){var a=o[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;Do(r,a,c),i=l}else for(s=0;s<o.length;s++){if(l=(a=o[s]).instance,c=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;Do(r,a,c),i=l}}}if(De)throw e=ze,De=!1,ze=null,e}function Fo(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var o=e+"__bubble";n.has(o)||(Wo(t,e,2,!1),n.add(o))}function Uo(e,t,n){var o=0;t&&(o|=4),Wo(n,e,o,t)}var Ho="_reactListening"+Math.random().toString(36).slice(2);function Vo(e){if(!e[Ho]){e[Ho]=!0,s.forEach((function(t){"selectionchange"!==t&&(No.has(t)||Uo(t,!1,e),Uo(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ho]||(t[Ho]=!0,Uo("selectionchange",!1,t))}}function Wo(e,t,n,o){switch($t(t)){case 1:var r=Kt;break;case 4:r=Gt;break;default:r=qt}n=r.bind(null,t,n,e),r=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),o?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Ko(e,t,n,o,r){var i=o;if(0===(1&t)&&0===(2&t)&&null!==o)e:for(;;){if(null===o)return;var s=o.tag;if(3===s||4===s){var a=o.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=o.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=br(a)))return;if(5===(l=s.tag)||6===l){o=i=s;continue e}a=a.parentNode}}o=o.return}Me((function(){var o=i,r=xe(n),s=[];e:{var a=Mo.get(e);if(void 0!==a){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Io:case To:case Po:l=vn;break;case Ao:l=An;break;case"scroll":l=hn;break;case"wheel":l=jn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==a?a+"Capture":null:a;d=[];for(var p,f=o;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==h&&(null!=(g=je(f,h))&&d.push(Go(f,g,p)))),u)break;f=f.return}0<d.length&&(a=new l(a,c,null,n,r),s.push({event:a,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!br(c)&&!c[gr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=o,null!==(c=(c=n.relatedTarget||n.toElement)?br(c):null)&&(c!==(u=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=o),l!==c)){if(d=fn,g="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=Tn,g="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?a:xr(l),p=null==c?a:xr(c),(a=new d(g,f+"leave",l,n,r)).target=u,a.relatedTarget=p,g=null,br(r)===o&&((d=new d(h,f+"enter",c,n,r)).target=p,d.relatedTarget=u,g=d),u=g,l&&c)e:{for(h=c,f=0,p=d=l;p;p=Yo(p))f++;for(p=0,g=h;g;g=Yo(g))p++;for(;0<f-p;)d=Yo(d),f--;for(;0<p-f;)h=Yo(h),p--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Yo(d),h=Yo(h)}d=null}else d=null;null!==l&&Xo(s,a,l,d,!1),null!==c&&null!==u&&Xo(s,u,c,d,!0)}if("select"===(l=(a=o?xr(o):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=$n;else if(Wn(a))if(Zn)m=so;else{m=ro;var v=oo}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=io);switch(m&&(m=m(e,o))?Kn(s,m,n,r):(v&&v(e,a,o),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=o?xr(o):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(vo=v,yo=o,bo=null);break;case"focusout":bo=yo=vo=null;break;case"mousedown":wo=!0;break;case"contextmenu":case"mouseup":case"dragend":wo=!1,xo(s,n,r);break;case"selectionchange":if(mo)break;case"keydown":case"keyup":xo(s,n,r)}var y;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?Fn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Nn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=en()):(Qt="value"in(Zt=r)?Zt.value:Zt.textContent,Hn=!0)),0<(v=qo(o,b)).length&&(b=new wn(b,e,null,n,r),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Rn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Dn);case"textInput":return(e=t.data)===Dn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Ln&&Fn(e,t)?(e=en(),Jt=Qt=Zt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(o=qo(o,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:o}),r.data=y))}zo(s,t)}))}function Go(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qo(e,t){for(var n=t+"Capture",o=[];null!==e;){var r=e,i=r.stateNode;5===r.tag&&null!==i&&(r=i,null!=(i=je(e,n))&&o.unshift(Go(e,i,r)),null!=(i=je(e,t))&&o.push(Go(e,i,r))),e=e.return}return o}function Yo(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xo(e,t,n,o,r){for(var i=t._reactName,s=[];null!==n&&n!==o;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===o)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=je(n,i))&&s.unshift(Go(n,l,a)):r||null!=(l=je(n,i))&&s.push(Go(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var $o=/\r\n?/g,Zo=/\u0000|\uFFFD/g;function Qo(e){return("string"===typeof e?e:""+e).replace($o,"\n").replace(Zo,"")}function Jo(e,t,n){if(t=Qo(t),Qo(e)!==t&&n)throw Error(i(425))}function er(){}var tr=null,nr=null;function or(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rr="function"===typeof setTimeout?setTimeout:void 0,ir="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(lr)}:rr;function lr(e){setTimeout((function(){throw e}))}function cr(e,t){var n=t,o=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===o)return e.removeChild(r),void Ht(t);o--}else"$"!==n&&"$?"!==n&&"$!"!==n||o++;n=r}while(n);Ht(t)}function dr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),pr="__reactFiber$"+hr,fr="__reactProps$"+hr,gr="__reactContainer$"+hr,mr="__reactEvents$"+hr,vr="__reactListeners$"+hr,yr="__reactHandles$"+hr;function br(e){var t=e[pr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gr]||n[pr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[pr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function wr(e){return!(e=e[pr]||e[gr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Sr(e){return e[fr]||null}var _r=[],kr=-1;function Cr(e){return{current:e}}function Er(e){0>kr||(e.current=_r[kr],_r[kr]=null,kr--)}function Ir(e,t){kr++,_r[kr]=e.current,e.current=t}var Tr={},Pr=Cr(Tr),Ar=Cr(!1),Mr=Tr;function jr(e,t){var n=e.type.contextTypes;if(!n)return Tr;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var r,i={};for(r in n)i[r]=t[r];return o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Or(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Lr(){Er(Ar),Er(Pr)}function Br(e,t,n){if(Pr.current!==Tr)throw Error(i(168));Ir(Pr,t),Ir(Ar,n)}function Rr(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,"function"!==typeof o.getChildContext)return n;for(var r in o=o.getChildContext())if(!(r in t))throw Error(i(108,V(e)||"Unknown",r));return N({},n,o)}function Nr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Mr=Pr.current,Ir(Pr,e),Ir(Ar,Ar.current),!0}function Dr(e,t,n){var o=e.stateNode;if(!o)throw Error(i(169));n?(e=Rr(e,t,Mr),o.__reactInternalMemoizedMergedChildContext=e,Er(Ar),Er(Pr),Ir(Pr,e)):Er(Ar),Ir(Ar,n)}var zr=null,Fr=!1,Ur=!1;function Hr(e){null===zr?zr=[e]:zr.push(e)}function Vr(){if(!Ur&&null!==zr){Ur=!0;var e=0,t=bt;try{var n=zr;for(bt=1;e<n.length;e++){var o=n[e];do{o=o(!0)}while(null!==o)}zr=null,Fr=!1}catch(r){throw null!==zr&&(zr=zr.slice(e+1)),qe(Je,Vr),r}finally{bt=t,Ur=!1}}return null}var Wr=[],Kr=0,Gr=null,qr=0,Yr=[],Xr=0,$r=null,Zr=1,Qr="";function Jr(e,t){Wr[Kr++]=qr,Wr[Kr++]=Gr,Gr=e,qr=t}function ei(e,t,n){Yr[Xr++]=Zr,Yr[Xr++]=Qr,Yr[Xr++]=$r,$r=e;var o=Zr;e=Qr;var r=32-st(o)-1;o&=~(1<<r),n+=1;var i=32-st(t)+r;if(30<i){var s=r-r%5;i=(o&(1<<s)-1).toString(32),o>>=s,r-=s,Zr=1<<32-st(t)+r|n<<r|o,Qr=i+e}else Zr=1<<i|n<<r|o,Qr=e}function ti(e){null!==e.return&&(Jr(e,1),ei(e,1,0))}function ni(e){for(;e===Gr;)Gr=Wr[--Kr],Wr[Kr]=null,qr=Wr[--Kr],Wr[Kr]=null;for(;e===$r;)$r=Yr[--Xr],Yr[Xr]=null,Qr=Yr[--Xr],Yr[Xr]=null,Zr=Yr[--Xr],Yr[Xr]=null}var oi=null,ri=null,ii=!1,si=null;function ai(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function li(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,oi=e,ri=dr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,oi=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$r?{id:Zr,overflow:Qr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,oi=e,ri=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function di(e){if(ii){var t=ri;if(t){var n=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=dr(n.nextSibling);var o=oi;t&&li(e,t)?ai(o,n):(e.flags=-4097&e.flags|2,ii=!1,oi=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,oi=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;oi=e}function hi(e){if(e!==oi)return!1;if(!ii)return ui(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!or(e.type,e.memoizedProps)),t&&(t=ri)){if(ci(e))throw pi(),Error(i(418));for(;t;)ai(e,t),t=dr(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=dr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=oi?dr(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=ri;e;)e=dr(e.nextSibling)}function fi(){ri=oi=null,ii=!1}function gi(e){null===si?si=[e]:si.push(e)}var mi=w.ReactCurrentBatchConfig;function vi(e,t){if(e&&e.defaultProps){for(var n in t=N({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yi=Cr(null),bi=null,wi=null,xi=null;function Si(){xi=wi=bi=null}function _i(e){var t=yi.current;Er(yi),e._currentValue=t}function ki(e,t,n){for(;null!==e;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==o&&(o.childLanes|=t)):null!==o&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function Ci(e,t){bi=e,xi=wi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Ei(e){var t=e._currentValue;if(xi!==e)if(e={context:e,memoizedValue:t,next:null},null===wi){if(null===bi)throw Error(i(308));wi=e,bi.dependencies={lanes:0,firstContext:e}}else wi=wi.next=e;return t}var Ii=null;function Ti(e){null===Ii?Ii=[e]:Ii.push(e)}function Pi(e,t,n,o){var r=t.interleaved;return null===r?(n.next=n,Ti(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ai(e,o)}function Ai(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mi=!1;function ji(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bi(e,t,n){var o=e.updateQueue;if(null===o)return null;if(o=o.shared,0!==(2&Pl)){var r=o.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),o.pending=t,Ai(e,n)}return null===(r=o.interleaved)?(t.next=t,Ti(o)):(t.next=r.next,r.next=t),o.interleaved=t,Ai(e,n)}function Ri(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var o=t.lanes;n|=o&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ni(e,t){var n=e.updateQueue,o=e.alternate;if(null!==o&&n===(o=o.updateQueue)){var r=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?r=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?r=i=t:i=i.next=t}else r=i=t;return n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:o.shared,effects:o.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Di(e,t,n,o){var r=e.updateQueue;Mi=!1;var i=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var d=e.alternate;null!==d&&((a=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===a?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(null!==i){var u=r.baseState;for(s=0,d=c=l=null,a=i;;){var h=a.lane,p=a.eventTime;if((o&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,g=a;switch(h=t,p=n,g.tag){case 1:if("function"===typeof(f=g.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=g.payload)?f.call(p,u,h):f)||void 0===h)break e;u=N({},u,h);break e;case 2:Mi=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,s|=h;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(h=a).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===d&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===i&&(r.shared.lanes=0);Nl|=s,e.lanes=s,e.memoizedState=u}}function zi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var o=e[t],r=o.callback;if(null!==r){if(o.callback=null,o=n,"function"!==typeof r)throw Error(i(191,r));r.call(o)}}}var Fi=(new o.Component).refs;function Ui(e,t,n,o){n=null===(n=n(o,t=e.memoizedState))||void 0===n?t:N({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Hi={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=tc(),r=nc(e),i=Li(o,r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Bi(e,i,r))&&(oc(t,e,r,o),Ri(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=tc(),r=nc(e),i=Li(o,r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Bi(e,i,r))&&(oc(t,e,r,o),Ri(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),o=nc(e),r=Li(n,o);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Bi(e,r,o))&&(oc(t,e,o,n),Ri(t,e,o))}};function Vi(e,t,n,o,r,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(o,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!lo(n,o)||!lo(r,i))}function Wi(e,t,n){var o=!1,r=Tr,i=t.contextType;return"object"===typeof i&&null!==i?i=Ei(i):(r=Or(t)?Mr:Pr.current,i=(o=null!==(o=t.contextTypes)&&void 0!==o)?jr(e,r):Tr),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Hi,e.stateNode=t,t._reactInternals=e,o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ki(e,t,n,o){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,o),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&Hi.enqueueReplaceState(t,t.state,null)}function Gi(e,t,n,o){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=Fi,ji(e);var i=t.contextType;"object"===typeof i&&null!==i?r.context=Ei(i):(i=Or(t)?Mr:Pr.current,r.context=jr(e,i)),r.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(Ui(e,t,i,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Hi.enqueueReplaceState(r,r.state,null),Di(e,n,r,o),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function qi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var o=n.stateNode}if(!o)throw Error(i(147,e));var r=o,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;t===Fi&&(t=r.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xi(e){return(0,e._init)(e._payload)}function $i(e){function t(t,n){if(e){var o=t.deletions;null===o?(t.deletions=[n],t.flags|=16):o.push(n)}}function n(n,o){if(!e)return null;for(;null!==o;)t(n,o),o=o.sibling;return null}function o(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function s(t,n,o){return t.index=o,e?null!==(o=t.alternate)?(o=o.index)<n?(t.flags|=2,n):o:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,o){return null===t||6!==t.tag?((t=Dc(n,e.mode,o)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,o){var i=n.type;return i===_?u(e,t,n.props.children,o,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===j&&Xi(i)===t.type)?((o=r(t,n.props)).ref=qi(e,t,n),o.return=e,o):((o=Bc(n.type,n.key,n.props,null,e.mode,o)).ref=qi(e,t,n),o.return=e,o)}function d(e,t,n,o){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,o)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,o,i){return null===t||7!==t.tag?((t=Rc(n,e.mode,o,i)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Bc(t.type,t.key,t.props,null,e.mode,n)).ref=qi(e,null,t),n.return=e,n;case S:return(t=zc(t,e.mode,n)).return=e,t;case j:return h(e,(0,t._init)(t._payload),n)}if(te(t)||B(t))return(t=Rc(t,e.mode,n,null)).return=e,t;Yi(e,t)}return null}function p(e,t,n,o){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,o);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===r?c(e,t,n,o):null;case S:return n.key===r?d(e,t,n,o):null;case j:return p(e,t,(r=n._init)(n._payload),o)}if(te(n)||B(n))return null!==r?null:u(e,t,n,o,null);Yi(e,n)}return null}function f(e,t,n,o,r){if("string"===typeof o&&""!==o||"number"===typeof o)return l(t,e=e.get(n)||null,""+o,r);if("object"===typeof o&&null!==o){switch(o.$$typeof){case x:return c(t,e=e.get(null===o.key?n:o.key)||null,o,r);case S:return d(t,e=e.get(null===o.key?n:o.key)||null,o,r);case j:return f(e,t,n,(0,o._init)(o._payload),r)}if(te(o)||B(o))return u(t,e=e.get(n)||null,o,r,null);Yi(t,o)}return null}function g(r,i,a,l){for(var c=null,d=null,u=i,g=i=0,m=null;null!==u&&g<a.length;g++){u.index>g?(m=u,u=null):m=u.sibling;var v=p(r,u,a[g],l);if(null===v){null===u&&(u=m);break}e&&u&&null===v.alternate&&t(r,u),i=s(v,i,g),null===d?c=v:d.sibling=v,d=v,u=m}if(g===a.length)return n(r,u),ii&&Jr(r,g),c;if(null===u){for(;g<a.length;g++)null!==(u=h(r,a[g],l))&&(i=s(u,i,g),null===d?c=u:d.sibling=u,d=u);return ii&&Jr(r,g),c}for(u=o(r,u);g<a.length;g++)null!==(m=f(u,r,g,a[g],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?g:m.key),i=s(m,i,g),null===d?c=m:d.sibling=m,d=m);return e&&u.forEach((function(e){return t(r,e)})),ii&&Jr(r,g),c}function m(r,a,l,c){var d=B(l);if("function"!==typeof d)throw Error(i(150));if(null==(l=d.call(l)))throw Error(i(151));for(var u=d=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=p(r,g,y.value,c);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(r,g),a=s(b,a,m),null===u?d=b:u.sibling=b,u=b,g=v}if(y.done)return n(r,g),ii&&Jr(r,m),d;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=h(r,y.value,c))&&(a=s(y,a,m),null===u?d=y:u.sibling=y,u=y);return ii&&Jr(r,m),d}for(g=o(r,g);!y.done;m++,y=l.next())null!==(y=f(g,r,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=s(y,a,m),null===u?d=y:u.sibling=y,u=y);return e&&g.forEach((function(e){return t(r,e)})),ii&&Jr(r,m),d}return function e(o,i,s,l){if("object"===typeof s&&null!==s&&s.type===_&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:e:{for(var c=s.key,d=i;null!==d;){if(d.key===c){if((c=s.type)===_){if(7===d.tag){n(o,d.sibling),(i=r(d,s.props.children)).return=o,o=i;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===j&&Xi(c)===d.type){n(o,d.sibling),(i=r(d,s.props)).ref=qi(o,d,s),i.return=o,o=i;break e}n(o,d);break}t(o,d),d=d.sibling}s.type===_?((i=Rc(s.props.children,o.mode,l,s.key)).return=o,o=i):((l=Bc(s.type,s.key,s.props,null,o.mode,l)).ref=qi(o,i,s),l.return=o,o=l)}return a(o);case S:e:{for(d=s.key;null!==i;){if(i.key===d){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){n(o,i.sibling),(i=r(i,s.children||[])).return=o,o=i;break e}n(o,i);break}t(o,i),i=i.sibling}(i=zc(s,o.mode,l)).return=o,o=i}return a(o);case j:return e(o,i,(d=s._init)(s._payload),l)}if(te(s))return g(o,i,s,l);if(B(s))return m(o,i,s,l);Yi(o,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==i&&6===i.tag?(n(o,i.sibling),(i=r(i,s)).return=o,o=i):(n(o,i),(i=Dc(s,o.mode,l)).return=o,o=i),a(o)):n(o,i)}}var Zi=$i(!0),Qi=$i(!1),Ji={},es=Cr(Ji),ts=Cr(Ji),ns=Cr(Ji);function os(e){if(e===Ji)throw Error(i(174));return e}function rs(e,t){switch(Ir(ns,t),Ir(ts,e),Ir(es,Ji),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Er(es),Ir(es,t)}function is(){Er(es),Er(ts),Er(ns)}function ss(e){os(ns.current);var t=os(es.current),n=le(t,e.type);t!==n&&(Ir(ts,e),Ir(es,n))}function as(e){ts.current===e&&(Er(es),Er(ts))}var ls=Cr(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ds=[];function us(){for(var e=0;e<ds.length;e++)ds[e]._workInProgressVersionPrimary=null;ds.length=0}var hs=w.ReactCurrentDispatcher,ps=w.ReactCurrentBatchConfig,fs=0,gs=null,ms=null,vs=null,ys=!1,bs=!1,ws=0,xs=0;function Ss(){throw Error(i(321))}function _s(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ao(e[n],t[n]))return!1;return!0}function ks(e,t,n,o,r,s){if(fs=s,gs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hs.current=null===e||null===e.memoizedState?aa:la,e=n(o,r),bs){s=0;do{if(bs=!1,ws=0,25<=s)throw Error(i(301));s+=1,vs=ms=null,t.updateQueue=null,hs.current=ca,e=n(o,r)}while(bs)}if(hs.current=sa,t=null!==ms&&null!==ms.next,fs=0,vs=ms=gs=null,ys=!1,t)throw Error(i(300));return e}function Cs(){var e=0!==ws;return ws=0,e}function Es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?gs.memoizedState=vs=e:vs=vs.next=e,vs}function Is(){if(null===ms){var e=gs.alternate;e=null!==e?e.memoizedState:null}else e=ms.next;var t=null===vs?gs.memoizedState:vs.next;if(null!==t)vs=t,ms=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ms=e).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===vs?gs.memoizedState=vs=e:vs=vs.next=e}return vs}function Ts(e,t){return"function"===typeof t?t(e):t}function Ps(e){var t=Is(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var o=ms,r=o.baseQueue,s=n.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}o.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,o=o.baseState;var l=a=null,c=null,d=s;do{var u=d.lane;if((fs&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),o=d.hasEagerState?d.eagerState:e(o,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,a=o):c=c.next=h,gs.lanes|=u,Nl|=u}d=d.next}while(null!==d&&d!==s);null===c?a=o:c.next=l,ao(o,t.memoizedState)||(wa=!0),t.memoizedState=o,t.baseState=a,t.baseQueue=c,n.lastRenderedState=o}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,gs.lanes|=s,Nl|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function As(e){var t=Is(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var o=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{s=e(s,a.action),a=a.next}while(a!==r);ao(s,t.memoizedState)||(wa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,o]}function Ms(){}function js(e,t){var n=gs,o=Is(),r=t(),s=!ao(o.memoizedState,r);if(s&&(o.memoizedState=r,wa=!0),o=o.queue,Ws(Bs.bind(null,n,o,e),[e]),o.getSnapshot!==t||s||null!==vs&&1&vs.memoizedState.tag){if(n.flags|=2048,zs(9,Ls.bind(null,n,o,r,t),void 0,null),null===Al)throw Error(i(349));0!==(30&fs)||Os(n,t,r)}return r}function Os(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ls(e,t,n,o){t.value=n,t.getSnapshot=o,Rs(t)&&Ns(e)}function Bs(e,t,n){return n((function(){Rs(t)&&Ns(e)}))}function Rs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ao(e,n)}catch(o){return!0}}function Ns(e){var t=Ai(e,1);null!==t&&oc(t,e,1,-1)}function Ds(e){var t=Es();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,gs,e),[t.memoizedState,e]}function zs(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e),e}function Fs(){return Is().memoizedState}function Us(e,t,n,o){var r=Es();gs.flags|=e,r.memoizedState=zs(1|t,n,void 0,void 0===o?null:o)}function Hs(e,t,n,o){var r=Is();o=void 0===o?null:o;var i=void 0;if(null!==ms){var s=ms.memoizedState;if(i=s.destroy,null!==o&&_s(o,s.deps))return void(r.memoizedState=zs(t,n,i,o))}gs.flags|=e,r.memoizedState=zs(1|t,n,i,o)}function Vs(e,t){return Us(8390656,8,e,t)}function Ws(e,t){return Hs(2048,8,e,t)}function Ks(e,t){return Hs(4,2,e,t)}function Gs(e,t){return Hs(4,4,e,t)}function qs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ys(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Hs(4,4,qs.bind(null,t,e),n)}function Xs(){}function $s(e,t){var n=Is();t=void 0===t?null:t;var o=n.memoizedState;return null!==o&&null!==t&&_s(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function Zs(e,t){var n=Is();t=void 0===t?null:t;var o=n.memoizedState;return null!==o&&null!==t&&_s(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function Qs(e,t,n){return 0===(21&fs)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ao(n,t)||(n=gt(),gs.lanes|=n,Nl|=n,e.baseState=!0),t)}function Js(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var o=ps.transition;ps.transition={};try{e(!1),t()}finally{bt=n,ps.transition=o}}function ea(){return Is().memoizedState}function ta(e,t,n){var o=nc(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},oa(e))ra(t,n);else if(null!==(n=Pi(e,t,n,o))){oc(n,e,o,tc()),ia(n,t,o)}}function na(e,t,n){var o=nc(e),r={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(oa(e))ra(t,r);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=i(s,n);if(r.hasEagerState=!0,r.eagerState=a,ao(a,s)){var l=t.interleaved;return null===l?(r.next=r,Ti(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Pi(e,t,r,o))&&(oc(n,e,o,r=tc()),ia(n,t,o))}}function oa(e){var t=e.alternate;return e===gs||null!==t&&t===gs}function ra(e,t){bs=ys=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ia(e,t,n){if(0!==(4194240&n)){var o=t.lanes;n|=o&=e.pendingLanes,t.lanes=n,yt(e,n)}}var sa={readContext:Ei,useCallback:Ss,useContext:Ss,useEffect:Ss,useImperativeHandle:Ss,useInsertionEffect:Ss,useLayoutEffect:Ss,useMemo:Ss,useReducer:Ss,useRef:Ss,useState:Ss,useDebugValue:Ss,useDeferredValue:Ss,useTransition:Ss,useMutableSource:Ss,useSyncExternalStore:Ss,useId:Ss,unstable_isNewReconciler:!1},aa={readContext:Ei,useCallback:function(e,t){return Es().memoizedState=[e,void 0===t?null:t],e},useContext:Ei,useEffect:Vs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Us(4194308,4,qs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Us(4194308,4,e,t)},useInsertionEffect:function(e,t){return Us(4,2,e,t)},useMemo:function(e,t){var n=Es();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=Es();return t=void 0!==n?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=ta.bind(null,gs,e),[o.memoizedState,e]},useRef:function(e){return e={current:e},Es().memoizedState=e},useState:Ds,useDebugValue:Xs,useDeferredValue:function(e){return Es().memoizedState=e},useTransition:function(){var e=Ds(!1),t=e[0];return e=Js.bind(null,e[1]),Es().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=gs,r=Es();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Al)throw Error(i(349));0!==(30&fs)||Os(o,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Vs(Bs.bind(null,o,s,e),[e]),o.flags|=2048,zs(9,Ls.bind(null,o,s,n,t),void 0,null),n},useId:function(){var e=Es(),t=Al.identifierPrefix;if(ii){var n=Qr;t=":"+t+"R"+(n=(Zr&~(1<<32-st(Zr)-1)).toString(32)+n),0<(n=ws++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ei,useCallback:$s,useContext:Ei,useEffect:Ws,useImperativeHandle:Ys,useInsertionEffect:Ks,useLayoutEffect:Gs,useMemo:Zs,useReducer:Ps,useRef:Fs,useState:function(){return Ps(Ts)},useDebugValue:Xs,useDeferredValue:function(e){return Qs(Is(),ms.memoizedState,e)},useTransition:function(){return[Ps(Ts)[0],Is().memoizedState]},useMutableSource:Ms,useSyncExternalStore:js,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Ei,useCallback:$s,useContext:Ei,useEffect:Ws,useImperativeHandle:Ys,useInsertionEffect:Ks,useLayoutEffect:Gs,useMemo:Zs,useReducer:As,useRef:Fs,useState:function(){return As(Ts)},useDebugValue:Xs,useDeferredValue:function(e){var t=Is();return null===ms?t.memoizedState=e:Qs(t,ms.memoizedState,e)},useTransition:function(){return[As(Ts)[0],Is().memoizedState]},useMutableSource:Ms,useSyncExternalStore:js,useId:ea,unstable_isNewReconciler:!1};function da(e,t){try{var n="",o=t;do{n+=U(o),o=o.return}while(o);var r=n}catch(i){r="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:r,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Li(-1,n)).tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){Kl||(Kl=!0,Gl=o),ha(0,t)},n}function ga(e,t,n){(n=Li(-1,n)).tag=3;var o=e.type.getDerivedStateFromError;if("function"===typeof o){var r=t.value;n.payload=function(){return o(r)},n.callback=function(){ha(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof o&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var o=e.pingCache;if(null===o){o=e.pingCache=new pa;var r=new Set;o.set(t,r)}else void 0===(r=o.get(t))&&(r=new Set,o.set(t,r));r.has(n)||(r.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,o,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Li(-1,1)).tag=2,Bi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ba=w.ReactCurrentOwner,wa=!1;function xa(e,t,n,o){t.child=null===e?Qi(t,null,n,o):Zi(t,e.child,n,o)}function Sa(e,t,n,o,r){n=n.render;var i=t.ref;return Ci(t,r),o=ks(e,t,n,o,i,r),n=Cs(),null===e||wa?(ii&&n&&ti(t),t.flags|=1,xa(e,t,o,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ka(e,t,r))}function _a(e,t,n,o,r){if(null===e){var i=n.type;return"function"!==typeof i||Oc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Bc(n.type,null,o,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ka(e,t,i,o,r))}if(i=e.child,0===(e.lanes&r)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:lo)(s,o)&&e.ref===t.ref)return Ka(e,t,r)}return t.flags|=1,(e=Lc(i,o)).ref=t.ref,e.return=t,t.child=e}function ka(e,t,n,o,r){if(null!==e){var i=e.memoizedProps;if(lo(i,o)&&e.ref===t.ref){if(wa=!1,t.pendingProps=o=i,0===(e.lanes&r))return t.lanes=e.lanes,Ka(e,t,r);0!==(131072&e.flags)&&(wa=!0)}}return Ia(e,t,n,o,r)}function Ca(e,t,n){var o=t.pendingProps,r=o.children,i=null!==e?e.memoizedState:null;if("hidden"===o.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ir(Ll,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ir(Ll,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=null!==i?i.baseLanes:n,Ir(Ll,Ol),Ol|=o}else null!==i?(o=i.baseLanes|n,t.memoizedState=null):o=n,Ir(Ll,Ol),Ol|=o;return xa(e,t,r,n),t.child}function Ea(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ia(e,t,n,o,r){var i=Or(n)?Mr:Pr.current;return i=jr(t,i),Ci(t,r),n=ks(e,t,n,o,i,r),o=Cs(),null===e||wa?(ii&&o&&ti(t),t.flags|=1,xa(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ka(e,t,r))}function Ta(e,t,n,o,r){if(Or(n)){var i=!0;Nr(t)}else i=!1;if(Ci(t,r),null===t.stateNode)Wa(e,t),Wi(t,n,o),Gi(t,n,o,r),o=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ei(c):c=jr(t,c=Or(n)?Mr:Pr.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate;u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==o||l!==c)&&Ki(t,s,o,c),Mi=!1;var h=t.memoizedState;s.state=h,Di(t,o,s,r),l=t.memoizedState,a!==o||h!==l||Ar.current||Mi?("function"===typeof d&&(Ui(t,n,d,o),l=t.memoizedState),(a=Mi||Vi(t,n,a,o,h,l,c))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=l),s.props=o,s.state=l,s.context=c,o=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),o=!1)}else{s=t.stateNode,Oi(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:vi(t.type,a),s.props=c,u=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ei(l):l=jr(t,l=Or(n)?Mr:Pr.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==u||h!==l)&&Ki(t,s,o,l),Mi=!1,h=t.memoizedState,s.state=h,Di(t,o,s,r);var f=t.memoizedState;a!==u||h!==f||Ar.current||Mi?("function"===typeof p&&(Ui(t,n,p,o),f=t.memoizedState),(c=Mi||Vi(t,n,c,o,h,f,l)||!1)?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(o,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(o,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=f),s.props=o,s.state=f,s.context=l,o=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),o=!1)}return Pa(e,t,n,o,i,r)}function Pa(e,t,n,o,r,i){Ea(e,t);var s=0!==(128&t.flags);if(!o&&!s)return r&&Dr(t,n,!1),Ka(e,t,i);o=t.stateNode,ba.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:o.render();return t.flags|=1,null!==e&&s?(t.child=Zi(t,e.child,null,i),t.child=Zi(t,null,a,i)):xa(e,t,a,i),t.memoizedState=o.state,r&&Dr(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Br(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Br(0,t.context,!1),rs(e,t.containerInfo)}function Ma(e,t,n,o,r){return fi(),gi(r),t.flags|=256,xa(e,t,n,o),t.child}var ja,Oa,La,Ba,Ra={dehydrated:null,treeContext:null,retryLane:0};function Na(e){return{baseLanes:e,cachePool:null,transitions:null}}function Da(e,t,n){var o,r=t.pendingProps,s=ls.current,a=!1,l=0!==(128&t.flags);if((o=l)||(o=(null===e||null!==e.memoizedState)&&0!==(2&s)),o?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ir(ls,1&s),null===e)return di(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Nc(l,r,0,null),e=Rc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Na(n),t.memoizedState=Ra,e):za(t,l));if(null!==(s=e.memoizedState)&&null!==(o=s.dehydrated))return function(e,t,n,o,r,s,a){if(n)return 256&t.flags?(t.flags&=-257,Fa(e,t,a,o=ua(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=o.fallback,r=t.mode,o=Nc({mode:"visible",children:o.children},r,0,null),(s=Rc(s,r,a,null)).flags|=2,o.return=t,s.return=t,o.sibling=s,t.child=o,0!==(1&t.mode)&&Zi(t,e.child,null,a),t.child.memoizedState=Na(a),t.memoizedState=Ra,s);if(0===(1&t.mode))return Fa(e,t,a,null);if("$!"===r.data){if(o=r.nextSibling&&r.nextSibling.dataset)var l=o.dgst;return o=l,Fa(e,t,a,o=ua(s=Error(i(419)),o,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(o=Al)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(o.suspendedLanes|a))?0:r)&&r!==s.retryLane&&(s.retryLane=r,Ai(e,r),oc(o,e,r,-1))}return mc(),Fa(e,t,a,o=ua(Error(i(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,ri=dr(r.nextSibling),oi=t,ii=!0,si=null,null!==e&&(Yr[Xr++]=Zr,Yr[Xr++]=Qr,Yr[Xr++]=$r,Zr=e.id,Qr=e.overflow,$r=t),t=za(t,o.children),t.flags|=4096,t)}(e,t,l,r,o,s,n);if(a){a=r.fallback,l=t.mode,o=(s=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Lc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==o?a=Lc(o,a):(a=Rc(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?Na(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ra,r}return e=(a=e.child).sibling,r=Lc(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function za(e,t){return(t=Nc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fa(e,t,n,o){return null!==o&&gi(o),Zi(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var o=e.alternate;null!==o&&(o.lanes|=t),ki(e.return,t,n)}function Ha(e,t,n,o,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=n,i.tailMode=r)}function Va(e,t,n){var o=t.pendingProps,r=o.revealOrder,i=o.tail;if(xa(e,t,o.children,n),0!==(2&(o=ls.current)))o=1&o|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Ir(ls,o),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Ha(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===cs(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Ha(t,!0,n,null,i);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;null!==n;)null!==n.alternate&&(o=n),n=n.sibling;null===o?t||null===e.tail?e.tail=null:e.tail.sibling=null:o.sibling=null}}function qa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,o=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,o|=14680064&r.subtreeFlags,o|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function Ya(e,t,n){var o=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qa(t),null;case 1:case 17:return Or(t.type)&&Lr(),qa(t),null;case 3:return o=t.stateNode,is(),Er(Ar),Er(Pr),us(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==si&&(ac(si),si=null))),Oa(e,t),qa(t),null;case 5:as(t);var r=os(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,o,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(null===t.stateNode)throw Error(i(166));return qa(t),null}if(e=os(es.current),hi(t)){o=t.stateNode,n=t.type;var s=t.memoizedProps;switch(o[pr]=t,o[fr]=s,e=0!==(1&t.mode),n){case"dialog":Fo("cancel",o),Fo("close",o);break;case"iframe":case"object":case"embed":Fo("load",o);break;case"video":case"audio":for(r=0;r<Ro.length;r++)Fo(Ro[r],o);break;case"source":Fo("error",o);break;case"img":case"image":case"link":Fo("error",o),Fo("load",o);break;case"details":Fo("toggle",o);break;case"input":$(o,s),Fo("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!s.multiple},Fo("invalid",o);break;case"textarea":re(o,s),Fo("invalid",o)}for(var l in ye(n,s),r=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?o.textContent!==c&&(!0!==s.suppressHydrationWarning&&Jo(o.textContent,c,e),r=["children",c]):"number"===typeof c&&o.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Jo(o.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fo("scroll",o)}switch(n){case"input":G(o),J(o,s,!0);break;case"textarea":G(o),se(o);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(o.onclick=er)}o=r,t.updateQueue=o,null!==o&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof o.is?e=l.createElement(n,{is:o.is}):(e=l.createElement(n),"select"===n&&(l=e,o.multiple?l.multiple=!0:o.size&&(l.size=o.size))):e=l.createElementNS(e,n),e[pr]=t,e[fr]=o,ja(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,o),n){case"dialog":Fo("cancel",e),Fo("close",e),r=o;break;case"iframe":case"object":case"embed":Fo("load",e),r=o;break;case"video":case"audio":for(r=0;r<Ro.length;r++)Fo(Ro[r],e);r=o;break;case"source":Fo("error",e),r=o;break;case"img":case"image":case"link":Fo("error",e),Fo("load",e),r=o;break;case"details":Fo("toggle",e),r=o;break;case"input":$(e,o),r=X(e,o),Fo("invalid",e);break;case"option":default:r=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},r=N({},o,{value:void 0}),Fo("invalid",e);break;case"textarea":re(e,o),r=oe(e,o),Fo("invalid",e)}for(s in ye(n,r),c=r)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?me(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Fo("scroll",e):null!=d&&b(e,s,d,l))}switch(n){case"input":G(e),J(e,o,!1);break;case"textarea":G(e),se(e);break;case"option":null!=o.value&&e.setAttribute("value",""+W(o.value));break;case"select":e.multiple=!!o.multiple,null!=(s=o.value)?ne(e,!!o.multiple,s,!1):null!=o.defaultValue&&ne(e,!!o.multiple,o.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=er)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qa(t),null;case 6:if(e&&null!=t.stateNode)Ba(e,t,e.memoizedProps,o);else{if("string"!==typeof o&&null===t.stateNode)throw Error(i(166));if(n=os(ns.current),os(es.current),hi(t)){if(o=t.stateNode,n=t.memoizedProps,o[pr]=t,(s=o.nodeValue!==n)&&null!==(e=oi))switch(e.tag){case 3:Jo(o.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jo(o.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(o=(9===n.nodeType?n:n.ownerDocument).createTextNode(o))[pr]=t,t.stateNode=o}return qa(t),null;case 13:if(Er(ls),o=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))pi(),fi(),t.flags|=98560,s=!1;else if(s=hi(t),null!==o&&null!==o.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[pr]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qa(t),s=!1}else null!==si&&(ac(si),si=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((o=null!==o)!==(null!==e&&null!==e.memoizedState)&&o&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Bl&&(Bl=3):mc())),null!==t.updateQueue&&(t.flags|=4),qa(t),null);case 4:return is(),Oa(e,t),null===e&&Vo(t.stateNode.containerInfo),qa(t),null;case 10:return _i(t.type._context),qa(t),null;case 19:if(Er(ls),null===(s=t.memoizedState))return qa(t),null;if(o=0!==(128&t.flags),null===(l=s.rendering))if(o)Ga(s,!1);else{if(0!==Bl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=cs(e))){for(t.flags|=128,Ga(s,!1),null!==(o=l.updateQueue)&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;null!==n;)e=o,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ir(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&Ze()>Vl&&(t.flags|=128,o=!0,Ga(s,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=cs(l))){if(t.flags|=128,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ii)return qa(t),null}else 2*Ze()-s.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,o=!0,Ga(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ze(),t.sibling=null,n=ls.current,Ir(ls,o?1&n|2:1&n),t):(qa(t),null);case 22:case 23:return hc(),o=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==o&&(t.flags|=8192),o&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(qa(t),6&t.subtreeFlags&&(t.flags|=8192)):qa(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Xa(e,t){switch(ni(t),t.tag){case 1:return Or(t.type)&&Lr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return is(),Er(Ar),Er(Pr),us(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Er(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Er(ls),null;case 4:return is(),null;case 10:return _i(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}ja=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},La=function(e,t,n,o){var r=e.memoizedProps;if(r!==o){e=t.stateNode,os(es.current);var i,s=null;switch(n){case"input":r=X(e,r),o=X(e,o),s=[];break;case"select":r=N({},r,{value:void 0}),o=N({},o,{value:void 0}),s=[];break;case"textarea":r=oe(e,r),o=oe(e,o),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof o.onClick&&(e.onclick=er)}for(d in ye(n,o),n=null,r)if(!o.hasOwnProperty(d)&&r.hasOwnProperty(d)&&null!=r[d])if("style"===d){var l=r[d];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(a.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in o){var c=o[d];if(l=null!=r?r[d]:void 0,o.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(s||(s=[]),s.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(a.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fo("scroll",e),s||l===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Ba=function(e,t,n,o){n!==o&&(t.flags|=4)};var $a=!1,Za=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(o){Cc(e,t,o)}else n.current=null}function tl(e,t,n){try{n()}catch(o){Cc(e,t,o)}}var nl=!1;function ol(e,t,n){var o=t.updateQueue;if(null!==(o=null!==o?o.lastEffect:null)){var r=o=o.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,void 0!==i&&tl(t,n,i)}r=r.next}while(r!==o)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pr],delete t[fr],delete t[mr],delete t[vr],delete t[yr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=er));else if(4!==o&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function dl(e,t,n){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==o&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}var ul=null,hl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:Za||el(n,t);case 6:var o=ul,r=hl;ul=null,pl(e,t,n),hl=r,null!==(ul=o)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?cr(e.parentNode,n):1===e.nodeType&&cr(e,n),Ht(e)):cr(ul,n.stateNode));break;case 4:o=ul,r=hl,ul=n.stateNode.containerInfo,hl=!0,pl(e,t,n),ul=o,hl=r;break;case 0:case 11:case 14:case 15:if(!Za&&(null!==(o=n.updateQueue)&&null!==(o=o.lastEffect))){r=o=o.next;do{var i=r,s=i.destroy;i=i.tag,void 0!==s&&(0!==(2&i)||0!==(4&i))&&tl(n,t,s),r=r.next}while(r!==o)}pl(e,t,n);break;case 1:if(!Za&&(el(n,t),"function"===typeof(o=n.stateNode).componentWillUnmount))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(a){Cc(n,t,a)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Za=(o=Za)||null!==n.memoizedState,pl(e,t,n),Za=o):pl(e,t,n);break;default:pl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qa),t.forEach((function(t){var o=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(o,o))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var o=0;o<n.length;o++){var r=n[o];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));fl(s,a,r),ul=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(d){Cc(r,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&o){try{ol(3,e,e.return),rl(3,e)}catch(m){Cc(e,e.return,m)}try{ol(5,e,e.return)}catch(m){Cc(e,e.return,m)}}break;case 1:ml(t,e),yl(e),512&o&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),yl(e),512&o&&null!==n&&el(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(m){Cc(e,e.return,m)}}if(4&o&&null!=(r=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Z(r,s),be(l,a);var d=be(l,s);for(a=0;a<c.length;a+=2){var u=c[a],h=c[a+1];"style"===u?me(r,h):"dangerouslySetInnerHTML"===u?ue(r,h):"children"===u?he(r,h):b(r,u,h,d)}switch(l){case"input":Q(r,s);break;case"textarea":ie(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(r,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(r,!!s.multiple,s.defaultValue,!0):ne(r,!!s.multiple,s.multiple?[]:"",!1))}r[fr]=s}catch(m){Cc(e,e.return,m)}}break;case 6:if(ml(t,e),yl(e),4&o){if(null===e.stateNode)throw Error(i(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(m){Cc(e,e.return,m)}}break;case 3:if(ml(t,e),yl(e),4&o&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(m){Cc(e,e.return,m)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(r=e.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||(Hl=Ze())),4&o&&gl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Za=(d=Za)||u,ml(t,e),Za=d):ml(t,e),yl(e),8192&o){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Ja=e,u=e.child;null!==u;){for(h=Ja=u;null!==Ja;){switch(f=(p=Ja).child,p.tag){case 0:case 11:case 14:case 15:ol(4,p,p.return);break;case 1:el(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){o=p,n=p.return;try{t=o,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Cc(o,n,m)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){Sl(h);continue}}null!==f?(f.return=p,Ja=f):Sl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{r=h.stateNode,d?"function"===typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Cc(e,e.return,m)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(m){Cc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&o&&gl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var o=n;break e}n=n.return}throw Error(i(160))}switch(o.tag){case 5:var r=o.stateNode;32&o.flags&&(he(r,""),o.flags&=-33),dl(e,ll(e),r);break;case 3:case 4:var s=o.stateNode.containerInfo;cl(e,ll(e),s);break;default:throw Error(i(161))}}catch(a){Cc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Ja=e,wl(e,t,n)}function wl(e,t,n){for(var o=0!==(1&e.mode);null!==Ja;){var r=Ja,i=r.child;if(22===r.tag&&o){var s=null!==r.memoizedState||$a;if(!s){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Za;a=$a;var c=Za;if($a=s,(Za=l)&&!c)for(Ja=r;null!==Ja;)l=(s=Ja).child,22===s.tag&&null!==s.memoizedState?_l(r):null!==l?(l.return=s,Ja=l):_l(r);for(;null!==i;)Ja=i,wl(i,t,n),i=i.sibling;Ja=r,$a=a,Za=c}xl(e)}else 0!==(8772&r.subtreeFlags)&&null!==i?(i.return=r,Ja=i):xl(e)}}function xl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Za||rl(5,t);break;case 1:var o=t.stateNode;if(4&t.flags&&!Za)if(null===n)o.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:vi(t.type,n.memoizedProps);o.componentDidUpdate(r,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&zi(t,s,o);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zi(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(i(163))}Za||512&t.flags&&il(t)}catch(p){Cc(t,t.return,p)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function Sl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function _l(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Cc(t,n,l)}break;case 1:var o=t.stateNode;if("function"===typeof o.componentDidMount){var r=t.return;try{o.componentDidMount()}catch(l){Cc(t,r,l)}}var i=t.return;try{il(t)}catch(l){Cc(t,i,l)}break;case 5:var s=t.return;try{il(t)}catch(l){Cc(t,s,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var kl,Cl=Math.ceil,El=w.ReactCurrentDispatcher,Il=w.ReactCurrentOwner,Tl=w.ReactCurrentBatchConfig,Pl=0,Al=null,Ml=null,jl=0,Ol=0,Ll=Cr(0),Bl=0,Rl=null,Nl=0,Dl=0,zl=0,Fl=null,Ul=null,Hl=0,Vl=1/0,Wl=null,Kl=!1,Gl=null,ql=null,Yl=!1,Xl=null,$l=0,Zl=0,Ql=null,Jl=-1,ec=0;function tc(){return 0!==(6&Pl)?Ze():-1!==Jl?Jl:Jl=Ze()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Pl)&&0!==jl?jl&-jl:null!==mi.transition?(0===ec&&(ec=gt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function oc(e,t,n,o){if(50<Zl)throw Zl=0,Ql=null,Error(i(185));vt(e,n,o),0!==(2&Pl)&&e===Al||(e===Al&&(0===(2&Pl)&&(Dl|=n),4===Bl&&lc(e,jl)),rc(e,o),1===n&&0===Pl&&0===(1&t.mode)&&(Vl=Ze()+500,Fr&&Vr()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-st(i),a=1<<s,l=r[s];-1===l?0!==(a&n)&&0===(a&o)||(r[s]=pt(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}(e,t);var o=ht(e,e===Al?jl:0);if(0===o)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Fr=!0,Hr(e)}(cc.bind(null,e)):Hr(cc.bind(null,e)),ar((function(){0===(6&Pl)&&Vr()})),n=null;else{switch(wt(o)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=ot}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,ec=0,0!==(6&Pl))throw Error(i(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var o=ht(e,e===Al?jl:0);if(0===o)return null;if(0!==(30&o)||0!==(o&e.expiredLanes)||t)t=vc(e,o);else{t=o;var r=Pl;Pl|=2;var s=gc();for(Al===e&&jl===t||(Wl=null,Vl=Ze()+500,pc(e,t));;)try{bc();break}catch(l){fc(e,l)}Si(),El.current=s,Pl=r,null!==Ml?t=0:(Al=null,jl=0,t=Bl)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(o=r,t=sc(e,r))),1===t)throw n=Rl,pc(e,0),lc(e,o),rc(e,Ze()),n;if(6===t)lc(e,o);else{if(r=e.current.alternate,0===(30&o)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var o=0;o<n.length;o++){var r=n[o],i=r.getSnapshot;r=r.value;try{if(!ao(i(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=vc(e,o))&&(0!==(s=ft(e))&&(o=s,t=sc(e,s))),1===t))throw n=Rl,pc(e,0),lc(e,o),rc(e,Ze()),n;switch(e.finishedWork=r,e.finishedLanes=o,t){case 0:case 1:throw Error(i(345));case 2:case 5:Sc(e,Ul,Wl);break;case 3:if(lc(e,o),(130023424&o)===o&&10<(t=Hl+500-Ze())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&o)!==o){tc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=rr(Sc.bind(null,e,Ul,Wl),t);break}Sc(e,Ul,Wl);break;case 4:if(lc(e,o),(4194240&o)===o)break;for(t=e.eventTimes,r=-1;0<o;){var a=31-st(o);s=1<<a,(a=t[a])>r&&(r=a),o&=~s}if(o=r,10<(o=(120>(o=Ze()-o)?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Cl(o/1960))-o)){e.timeoutHandle=rr(Sc.bind(null,e,Ul,Wl),o);break}Sc(e,Ul,Wl);break;default:throw Error(i(329))}}}return rc(e,Ze()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lc(e,t){for(t&=~zl,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),o=1<<n;e[n]=-1,t&=~o}}function cc(e){if(0!==(6&Pl))throw Error(i(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Ze()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var o=ft(e);0!==o&&(t=o,n=sc(e,o))}if(1===n)throw n=Rl,pc(e,0),lc(e,t),rc(e,Ze()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Ul,Wl),rc(e,Ze()),null}function dc(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Vl=Ze()+500,Fr&&Vr())}}function uc(e){null!==Xl&&0===Xl.tag&&0===(6&Pl)&&_c();var t=Pl;Pl|=1;var n=Tl.transition,o=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=o,Tl.transition=n,0===(6&(Pl=t))&&Vr()}}function hc(){Ol=Ll.current,Er(Ll)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ir(n)),null!==Ml)for(n=Ml.return;null!==n;){var o=n;switch(ni(o),o.tag){case 1:null!==(o=o.type.childContextTypes)&&void 0!==o&&Lr();break;case 3:is(),Er(Ar),Er(Pr),us();break;case 5:as(o);break;case 4:is();break;case 13:case 19:Er(ls);break;case 10:_i(o.type._context);break;case 22:case 23:hc()}n=n.return}if(Al=e,Ml=e=Lc(e.current,null),jl=Ol=t,Bl=0,Rl=null,zl=Dl=Nl=0,Ul=Fl=null,null!==Ii){for(t=0;t<Ii.length;t++)if(null!==(o=(n=Ii[t]).interleaved)){n.interleaved=null;var r=o.next,i=n.pending;if(null!==i){var s=i.next;i.next=r,o.next=s}n.pending=o}Ii=null}return e}function fc(e,t){for(;;){var n=Ml;try{if(Si(),hs.current=sa,ys){for(var o=gs.memoizedState;null!==o;){var r=o.queue;null!==r&&(r.pending=null),o=o.next}ys=!1}if(fs=0,vs=ms=gs=null,bs=!1,ws=0,Il.current=null,null===n||null===n.return){Bl=1,Rl=t,Ml=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=va(a);if(null!==f){f.flags&=-257,ya(f,a,l,0,t),1&f.mode&&ma(s,d,t),c=d;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ma(s,d,t),mc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),gi(da(c,l));break e}}s=c=da(c,l),4!==Bl&&(Bl=2),null===Fl?Fl=[s]:Fl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ni(s,fa(0,c,t));break e;case 1:l=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Ni(s,ga(s,l,t));break e}}s=s.return}while(null!==s)}xc(n)}catch(w){t=w,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function gc(){var e=El.current;return El.current=sa,null===e?sa:e}function mc(){0!==Bl&&3!==Bl&&2!==Bl||(Bl=4),null===Al||0===(268435455&Nl)&&0===(268435455&Dl)||lc(Al,jl)}function vc(e,t){var n=Pl;Pl|=2;var o=gc();for(Al===e&&jl===t||(Wl=null,pc(e,t));;)try{yc();break}catch(r){fc(e,r)}if(Si(),Pl=n,El.current=o,null!==Ml)throw Error(i(261));return Al=null,jl=0,Bl}function yc(){for(;null!==Ml;)wc(Ml)}function bc(){for(;null!==Ml&&!Xe();)wc(Ml)}function wc(e){var t=kl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?xc(e):Ml=t,Il.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ya(n,t,Ol)))return void(Ml=n)}else{if(null!==(n=Xa(n,t)))return n.flags&=32767,void(Ml=n);if(null===e)return Bl=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===Bl&&(Bl=5)}function Sc(e,t,n){var o=bt,r=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,o){do{_c()}while(null!==Xl);if(0!==(6&Pl))throw Error(i(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-st(n),i=1<<r;t[r]=0,o[r]=-1,e[r]=-1,n&=~i}}(e,s),e===Al&&(Ml=Al=null,jl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Ac(tt,(function(){return _c(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Tl.transition,Tl.transition=null;var a=bt;bt=1;var l=Pl;Pl|=4,Il.current=null,function(e,t){if(tr=Wt,fo(e=po())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var o=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(o&&0!==o.rangeCount){n=o.anchorNode;var r=o.anchorOffset,s=o.focusNode;o=o.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(l=a+r),h!==s||0!==o&&3!==h.nodeType||(c=a+o),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++d===r&&(l=a),p===s&&++u===o&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nr={focusedElem:e,selectionRange:n},Wt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:vi(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(x){Cc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}g=nl,nl=!1}(e,n),vl(n,e),go(nr),Wt=!!tr,nr=tr=null,e.current=n,bl(n,e,r),$e(),Pl=l,bt=a,Tl.transition=s}else e.current=n;if(Yl&&(Yl=!1,Xl=e,$l=r),s=e.pendingLanes,0===s&&(ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ze()),null!==t)for(o=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],o(r.value,{componentStack:r.stack,digest:r.digest});if(Kl)throw Kl=!1,e=Gl,Gl=null,e;0!==(1&$l)&&0!==e.tag&&_c(),s=e.pendingLanes,0!==(1&s)?e===Ql?Zl++:(Zl=0,Ql=e):Zl=0,Vr()}(e,t,n,o)}finally{Tl.transition=r,bt=o}return null}function _c(){if(null!==Xl){var e=wt($l),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===Xl)var o=!1;else{if(e=Xl,Xl=null,$l=0,0!==(6&Pl))throw Error(i(331));var r=Pl;for(Pl|=4,Ja=e.current;null!==Ja;){var s=Ja,a=s.child;if(0!==(16&Ja.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Ja=d;null!==Ja;){var u=Ja;switch(u.tag){case 0:case 11:case 15:ol(8,u,s)}var h=u.child;if(null!==h)h.return=u,Ja=h;else for(;null!==Ja;){var p=(u=Ja).sibling,f=u.return;if(sl(u),u===d){Ja=null;break}if(null!==p){p.return=f,Ja=p;break}Ja=f}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Ja=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(s=Ja).flags))switch(s.tag){case 0:case 11:case 15:ol(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Ja=y;break e}Ja=s.return}}var b=e.current;for(Ja=b;null!==Ja;){var w=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Ja=w;else e:for(a=b;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){Cc(l,l.return,S)}if(l===a){Ja=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Ja=x;break e}Ja=l.return}}if(Pl=r,Vr(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(S){}o=!0}return o}finally{bt=n,Tl.transition=t}}return!1}function kc(e,t,n){e=Bi(e,t=fa(0,t=da(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var o=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof o.componentDidCatch&&(null===ql||!ql.has(o))){t=Bi(t,e=ga(t,e=da(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var o=e.pingCache;null!==o&&o.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(jl&n)===n&&(4===Bl||3===Bl&&(130023424&jl)===jl&&500>Ze()-Hl?pc(e,0):zl|=n),rc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=tc();null!==(e=Ai(e,t))&&(vt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(i(314))}null!==o&&o.delete(t),Ic(e,n)}function Ac(e,t){return qe(e,t)}function Mc(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,o){return new Mc(e,t,n,o)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bc(e,t,n,o,r,s){var a=2;if(o=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case _:return Rc(n.children,r,s,t);case k:a=8,r|=8;break;case C:return(e=jc(12,n,t,2|r)).elementType=C,e.lanes=s,e;case P:return(e=jc(13,n,t,r)).elementType=P,e.lanes=s,e;case A:return(e=jc(19,n,t,r)).elementType=A,e.lanes=s,e;case O:return Nc(n,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case I:a=9;break e;case T:a=11;break e;case M:a=14;break e;case j:a=16,o=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=jc(a,n,t,r)).elementType=e,t.type=o,t.lanes=s,t}function Rc(e,t,n,o){return(e=jc(7,e,o,t)).lanes=n,e}function Nc(e,t,n,o){return(e=jc(22,e,o,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,o,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,o,r,i,s,a,l){return e=new Fc(e,t,n,a,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=jc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ji(i),e}function Hc(e){if(!e)return Tr;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Or(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Or(n))return Rr(e,n,t)}return t}function Vc(e,t,n,o,r,i,s,a,l){return(e=Uc(n,o,!0,e,0,i,0,a,l)).context=Hc(null),n=e.current,(i=Li(o=tc(),r=nc(n))).callback=void 0!==t&&null!==t?t:null,Bi(n,i,r),e.current.lanes=r,vt(e,r,o),rc(e,o),e}function Wc(e,t,n,o){var r=t.current,i=tc(),s=nc(r);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Li(i,s)).payload={element:e},null!==(o=void 0===o?null:o)&&(t.callback=o),null!==(e=Bi(r,t,s))&&(oc(e,r,s,i),Ri(e,r,s)),s}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ar.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fi();break;case 5:ss(t);break;case 1:Or(t.type)&&Nr(t);break;case 4:rs(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,r=t.memoizedProps.value;Ir(yi,o._currentValue),o._currentValue=r;break;case 13:if(null!==(o=t.memoizedState))return null!==o.dehydrated?(Ir(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Da(e,t,n):(Ir(ls,1&ls.current),null!==(e=Ka(e,t,n))?e.sibling:null);Ir(ls,1&ls.current);break;case 19:if(o=0!==(n&t.childLanes),0!==(128&e.flags)){if(o)return Va(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ir(ls,ls.current),o)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Ka(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,ii&&0!==(1048576&t.flags)&&ei(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Wa(e,t),e=t.pendingProps;var r=jr(t,Pr.current);Ci(t,n),r=ks(null,t,o,e,r,n);var s=Cs();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Or(o)?(s=!0,Nr(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,ji(t),r.updater=Hi,t.stateNode=r,r._reactInternals=t,Gi(t,o,e,n),t=Pa(null,t,o,!0,s,n)):(t.tag=0,ii&&s&&ti(t),xa(null,t,r,n),t=t.child),t;case 16:o=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,o=(r=o._init)(o._payload),t.type=o,r=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===M)return 14}return 2}(o),e=vi(o,e),r){case 0:t=Ia(null,t,o,e,n);break e;case 1:t=Ta(null,t,o,e,n);break e;case 11:t=Sa(null,t,o,e,n);break e;case 14:t=_a(null,t,o,vi(o.type,e),n);break e}throw Error(i(306,o,""))}return t;case 0:return o=t.type,r=t.pendingProps,Ia(e,t,o,r=t.elementType===o?r:vi(o,r),n);case 1:return o=t.type,r=t.pendingProps,Ta(e,t,o,r=t.elementType===o?r:vi(o,r),n);case 3:e:{if(Aa(t),null===e)throw Error(i(387));o=t.pendingProps,r=(s=t.memoizedState).element,Oi(e,t),Di(t,o,null,n);var a=t.memoizedState;if(o=a.element,s.isDehydrated){if(s={element:o,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ma(e,t,o,n,r=da(Error(i(423)),t));break e}if(o!==r){t=Ma(e,t,o,n,r=da(Error(i(424)),t));break e}for(ri=dr(t.stateNode.containerInfo.firstChild),oi=t,ii=!0,si=null,n=Qi(t,null,o,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),o===r){t=Ka(e,t,n);break e}xa(e,t,o,n)}t=t.child}return t;case 5:return ss(t),null===e&&di(t),o=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,a=r.children,or(o,r)?a=null:null!==s&&or(o,s)&&(t.flags|=32),Ea(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&di(t),null;case 13:return Da(e,t,n);case 4:return rs(t,t.stateNode.containerInfo),o=t.pendingProps,null===e?t.child=Zi(t,null,o,n):xa(e,t,o,n),t.child;case 11:return o=t.type,r=t.pendingProps,Sa(e,t,o,r=t.elementType===o?r:vi(o,r),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value,Ir(yi,o._currentValue),o._currentValue=a,null!==s)if(ao(s.value,a)){if(s.children===r.children&&!Ar.current){t=Ka(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===o){if(1===s.tag){(c=Li(-1,n&-n)).tag=2;var d=s.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),ki(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(i(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ki(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}xa(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,o=t.pendingProps.children,Ci(t,n),o=o(r=Ei(r)),t.flags|=1,xa(e,t,o,n),t.child;case 14:return r=vi(o=t.type,t.pendingProps),_a(e,t,o,r=vi(o.type,r),n);case 15:return ka(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:vi(o,r),Wa(e,t),t.tag=1,Or(o)?(e=!0,Nr(t)):e=!1,Ci(t,n),Wi(t,o,r),Gi(t,o,r,n),Pa(null,t,o,!0,e,n);case 19:return Va(e,t,n);case 22:return Ca(e,t,n)}throw Error(i(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function ed(e,t,n,o,r){var i=n._reactRootContainer;if(i){var s=i;if("function"===typeof r){var a=r;r=function(){var e=Kc(s);a.call(e)}}Wc(t,s,e,r)}else s=function(e,t,n,o,r){if(r){if("function"===typeof o){var i=o;o=function(){var e=Kc(s);i.call(e)}}var s=Vc(t,o,e,0,null,!1,0,"",Jc);return e._reactRootContainer=s,e[gr]=s.current,Vo(8===e.nodeType?e.parentNode:e),uc(),s}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof o){var a=o;o=function(){var e=Kc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[gr]=l.current,Vo(8===e.nodeType?e.parentNode:e),uc((function(){Wc(t,l,n,o)})),l}(n,t,e,r,o);return Kc(s)}$c.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Wc(e,t,null,null)},$c.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Wc(null,e,null,null)})),t[gr]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Nt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Ze()),0===(6&Pl)&&(Vl=Ze()+500,Vr()))}break;case 13:uc((function(){var t=Ai(e,1);if(null!==t){var n=tc();oc(t,e,1,n)}})),qc(e,1)}},St=function(e){if(13===e.tag){var t=Ai(e,134217728);if(null!==t)oc(t,e,134217728,tc());qc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Ai(e,t);if(null!==n)oc(n,e,t,tc());qc(e,t)}},kt=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var r=Sr(o);if(!r)throw Error(i(90));q(o),Q(o,r)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=dc,Pe=uc;var td={usingClientEntryPoint:!1,Events:[wr,xr,Sr,Ee,Ie,dc]},nd={findFiberByHostInstance:br,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},od={bundleType:nd.bundleType,version:nd.version,rendererPackageName:nd.rendererPackageName,rendererConfig:nd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nd.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{rt=rd.inject(od),it=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=td,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(i(200));return function(e,t,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==o?null:""+o,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(i(299));var n=!1,o="",r=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,o,r),e[gr]=t.current,Vo(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(i(200));return ed(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(i(405));var o=null!=n&&n.hydratedSources||null,r=!1,s="",a=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,r,0,s,a),e[gr]=t.current,Vo(e),o)for(e=0;e<o.length;e++)r=(r=(n=o[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new $c(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(i(200));return ed(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc((function(){ed(null,null,e,!1,(function(){e._reactRootContainer=null,e[gr]=null}))})),!0)},t.unstable_batchedUpdates=dc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!Qc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return ed(e,t,n,!1,o)},t.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,n)=>{"use strict";var o=n(7950);t.createRoot=o.createRoot,t.hydrateRoot=o.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},1153:(e,t,n)=>{"use strict";var o=n(5043),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var o,i={},c=null,d=null;for(o in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,o)&&!l.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===i[o]&&(i[o]=t[o]);return{$$typeof:r,type:e,key:c,ref:d,props:i,_owner:a.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),o=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,o){var r,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&!k.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=o;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:n,type:e,key:s,ref:a,props:i,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,r,i,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case o:l=!0}}if(l)return s=s(l=e),e=""===i?"."+T(l,0):i,x(s)?(r="",null!=e&&(r=e.replace(I,"$&/")+"/"),P(s,t,r,"",(function(e){return e}))):null!=s&&(E(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(I,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=""===i?".":i+":",x(e))for(var c=0;c<e.length;c++){var d=i+T(a=e[c],c);l+=P(a,t,r,d,s)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(a=e.next()).done;)l+=P(a=a.value,t,r,d=i+T(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var o=[],r=0;return P(e,o,"","",(function(e){return t.call(n,e,r++)})),o}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},O={transition:null},L={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:O,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=s,t.PureComponent=b,t.StrictMode=i,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,o){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!k.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=o;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:n,type:e.type,key:i,ref:s,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return j.current.useCallback(e,t)},t.useContext=function(e){return j.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return j.current.useDeferredValue(e)},t.useEffect=function(e,t){return j.current.useEffect(e,t)},t.useId=function(){return j.current.useId()},t.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.current.useMemo(e,t)},t.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},t.useRef=function(e){return j.current.useRef(e)},t.useState=function(e){return j.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var o=n-1>>>1,r=e[o];if(!(0<i(r,t)))break e;e[o]=t,e[n]=r,n=o}}function o(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var o=0,r=e.length,s=r>>>1;o<s;){var a=2*(o+1)-1,l=e[a],c=a+1,d=e[c];if(0>i(l,n))c<r&&0>i(d,l)?(e[o]=d,e[c]=n,o=c):(e[o]=l,e[a]=n,o=a);else{if(!(c<r&&0>i(d,n)))break e;e[o]=d,e[c]=n,o=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],u=1,h=null,p=3,f=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=o(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,n(c,t)}t=o(d)}}function x(e){if(m=!1,w(e),!g)if(null!==o(c))g=!0,O(S);else{var t=o(d);null!==t&&L(x,t.startTime-e)}}function S(e,n){g=!1,m&&(m=!1,y(E),E=-1),f=!0;var i=p;try{for(w(n),h=o(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===o(c)&&r(c),w(n)}else r(c);h=o(c)}if(null!==h)var l=!0;else{var u=o(d);null!==u&&L(x,u.startTime-n),l=!1}return l}finally{h=null,p=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,k=!1,C=null,E=-1,I=5,T=-1;function P(){return!(t.unstable_now()-T<I)}function A(){if(null!==C){var e=t.unstable_now();T=e;var n=!0;try{n=C(!0,e)}finally{n?_():(k=!1,C=null)}}else k=!1}if("function"===typeof b)_=function(){b(A)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,j=M.port2;M.port1.onmessage=A,_=function(){j.postMessage(null)}}else _=function(){v(A,0)};function O(e){C=e,k||(k=!0,_())}function L(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,O(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return o(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>s?(e.sortIndex=i,n(d,e),null===o(c)&&e===o(d)&&(m?(y(E),E=-1):m=!0,L(x,i-s))):(e.sortIndex=a,n(c,e),g||f||(g=!0,O(S))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},64:function(e){e.exports=function(){"use strict";function e(e,t,o){return t=u(t),f(e,n()?Reflect.construct(t,o||[],u(e).constructor):t.apply(e,o))}function t(e,t,o){if(n())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return o&&h(i,o.prototype),i}function n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(n=function(){return!!e})()}function o(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=i.call(n)).done)&&(a.push(o.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}function r(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function i(e){var t=r(e,"string");return"symbol"==typeof t?t:String(t)}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,i(o.key),o)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function m(){return m="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=g(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},m.apply(this,arguments)}function v(e,t){return w(e)||o(e,t)||S(e,t)||C()}function y(e){return b(e)||x(e)||S(e)||k()}function b(e){if(Array.isArray(e))return _(e)}function w(e){if(Array.isArray(e))return e}function x(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function S(e,t){if(e){if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){return P(e,T(e,t,"get"))}function I(e,t,n){return A(e,T(e,t,"set"),n),n}function T(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function P(e,t){return t.get?t.get.call(e):t.value}function A(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function M(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function j(e,t,n){M(e,t),t.set(e,n)}var O=100,L={},B=function(){L.previousActiveElement instanceof HTMLElement?(L.previousActiveElement.focus(),L.previousActiveElement=null):document.body&&document.body.focus()},R=function(e){return new Promise((function(t){if(!e)return t();var n=window.scrollX,o=window.scrollY;L.restoreFocusTimeout=setTimeout((function(){B(),t()}),O),window.scrollTo(n,o)}))},N="swal2-",D=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((function(e,t){return e[t]=N+t,e}),{}),z=["success","warning","info","question","error"].reduce((function(e,t){return e[t]=N+t,e}),{}),F="SweetAlert2:",U=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},H=function(e){console.warn("".concat(F," ").concat("object"===s(e)?e.join(" "):e))},V=function(e){console.error("".concat(F," ").concat(e))},W=[],K=function(e){W.includes(e)||(W.push(e),H(e))},G=function(e,t){K('"'.concat(e,'" is deprecated and will be removed in the next major release. Please use "').concat(t,'" instead.'))},q=function(e){return"function"===typeof e?e():e},Y=function(e){return e&&"function"===typeof e.toPromise},X=function(e){return Y(e)?e.toPromise():Promise.resolve(e)},$=function(e){return e&&Promise.resolve(e)===e},Z=function(){return document.body.querySelector(".".concat(D.container))},Q=function(e){var t=Z();return t?t.querySelector(e):null},J=function(e){return Q(".".concat(e))},ee=function(){return J(D.popup)},te=function(){return J(D.icon)},ne=function(){return J(D["icon-content"])},oe=function(){return J(D.title)},re=function(){return J(D["html-container"])},ie=function(){return J(D.image)},se=function(){return J(D["progress-steps"])},ae=function(){return J(D["validation-message"])},le=function(){return Q(".".concat(D.actions," .").concat(D.confirm))},ce=function(){return Q(".".concat(D.actions," .").concat(D.cancel))},de=function(){return Q(".".concat(D.actions," .").concat(D.deny))},ue=function(){return J(D["input-label"])},he=function(){return Q(".".concat(D.loader))},pe=function(){return J(D.actions)},fe=function(){return J(D.footer)},ge=function(){return J(D["timer-progress-bar"])},me=function(){return J(D.close)},ve='\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n',ye=function(){var e=ee();if(!e)return[];var t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort((function(e,t){var n=parseInt(e.getAttribute("tabindex")||"0"),o=parseInt(t.getAttribute("tabindex")||"0");return n>o?1:n<o?-1:0})),o=e.querySelectorAll(ve),r=Array.from(o).filter((function(e){return"-1"!==e.getAttribute("tabindex")}));return y(new Set(n.concat(r))).filter((function(e){return De(e)}))},be=function(){return _e(document.body,D.shown)&&!_e(document.body,D["toast-shown"])&&!_e(document.body,D["no-backdrop"])},we=function(){var e=ee();return!!e&&_e(e,D.toast)},xe=function(){var e=ee();return!!e&&e.hasAttribute("data-loading")},Se=function(e,t){if(e.textContent="",t){var n=(new DOMParser).parseFromString(t,"text/html"),o=n.querySelector("head");o&&Array.from(o.childNodes).forEach((function(t){e.appendChild(t)}));var r=n.querySelector("body");r&&Array.from(r.childNodes).forEach((function(t){t instanceof HTMLVideoElement||t instanceof HTMLAudioElement?e.appendChild(t.cloneNode(!0)):e.appendChild(t)}))}},_e=function(e,t){if(!t)return!1;for(var n=t.split(/\s+/),o=0;o<n.length;o++)if(!e.classList.contains(n[o]))return!1;return!0},ke=function(e,t){Array.from(e.classList).forEach((function(n){Object.values(D).includes(n)||Object.values(z).includes(n)||Object.values(t.showClass||{}).includes(n)||e.classList.remove(n)}))},Ce=function(e,t,n){if(ke(e,t),t.customClass&&t.customClass[n]){if("string"!==typeof t.customClass[n]&&!t.customClass[n].forEach)return void H("Invalid type of customClass.".concat(n,'! Expected string or iterable object, got "').concat(s(t.customClass[n]),'"'));Pe(e,t.customClass[n])}},Ee=function(e,t){if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(".".concat(D.popup," > .").concat(D[t]));case"checkbox":return e.querySelector(".".concat(D.popup," > .").concat(D.checkbox," input"));case"radio":return e.querySelector(".".concat(D.popup," > .").concat(D.radio," input:checked"))||e.querySelector(".".concat(D.popup," > .").concat(D.radio," input:first-child"));case"range":return e.querySelector(".".concat(D.popup," > .").concat(D.range," input"));default:return e.querySelector(".".concat(D.popup," > .").concat(D.input))}},Ie=function(e){if(e.focus(),"file"!==e.type){var t=e.value;e.value="",e.value=t}},Te=function(e,t,n){e&&t&&("string"===typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach((function(t){Array.isArray(e)?e.forEach((function(e){n?e.classList.add(t):e.classList.remove(t)})):n?e.classList.add(t):e.classList.remove(t)})))},Pe=function(e,t){Te(e,t,!0)},Ae=function(e,t){Te(e,t,!1)},Me=function(e,t){for(var n=Array.from(e.children),o=0;o<n.length;o++){var r=n[o];if(r instanceof HTMLElement&&_e(r,t))return r}},je=function(e,t,n){n==="".concat(parseInt(n))&&(n=parseInt(n)),n||0===parseInt(n)?e.style.setProperty(t,"number"===typeof n?"".concat(n,"px"):n):e.style.removeProperty(t)},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";e&&(e.style.display=t)},Le=function(e){e&&(e.style.display="none")},Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";e&&new MutationObserver((function(){Ne(e,e.innerHTML,t)})).observe(e,{childList:!0,subtree:!0})},Re=function(e,t,n,o){var r=e.querySelector(t);r&&r.style.setProperty(n,o)},Ne=function(e,t){t?Oe(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Le(e)},De=function(e){return!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length))},ze=function(){return!De(le())&&!De(de())&&!De(ce())},Fe=function(e){return!!(e.scrollHeight>e.clientHeight)},Ue=function(e){var t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),o=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||o>0},He=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=ge();n&&De(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout((function(){n.style.transition="width ".concat(e/1e3,"s linear"),n.style.width="0%"}),10))},Ve=function(){var e=ge();if(e){var t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";var n=t/parseInt(window.getComputedStyle(e).width)*100;e.style.width="".concat(n,"%")}},We=function(){return"undefined"===typeof window||"undefined"===typeof document},Ke='\n <div aria-labelledby="'.concat(D.title,'" aria-describedby="').concat(D["html-container"],'" class="').concat(D.popup,'" tabindex="-1">\n   <button type="button" class="').concat(D.close,'"></button>\n   <ul class="').concat(D["progress-steps"],'"></ul>\n   <div class="').concat(D.icon,'"></div>\n   <img class="').concat(D.image,'" />\n   <h2 class="').concat(D.title,'" id="').concat(D.title,'"></h2>\n   <div class="').concat(D["html-container"],'" id="').concat(D["html-container"],'"></div>\n   <input class="').concat(D.input,'" id="').concat(D.input,'" />\n   <input type="file" class="').concat(D.file,'" />\n   <div class="').concat(D.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(D.select,'" id="').concat(D.select,'"></select>\n   <div class="').concat(D.radio,'"></div>\n   <label class="').concat(D.checkbox,'">\n     <input type="checkbox" id="').concat(D.checkbox,'" />\n     <span class="').concat(D.label,'"></span>\n   </label>\n   <textarea class="').concat(D.textarea,'" id="').concat(D.textarea,'"></textarea>\n   <div class="').concat(D["validation-message"],'" id="').concat(D["validation-message"],'"></div>\n   <div class="').concat(D.actions,'">\n     <div class="').concat(D.loader,'"></div>\n     <button type="button" class="').concat(D.confirm,'"></button>\n     <button type="button" class="').concat(D.deny,'"></button>\n     <button type="button" class="').concat(D.cancel,'"></button>\n   </div>\n   <div class="').concat(D.footer,'"></div>\n   <div class="').concat(D["timer-progress-bar-container"],'">\n     <div class="').concat(D["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Ge=function(){var e=Z();return!!e&&(e.remove(),Ae([document.documentElement,document.body],[D["no-backdrop"],D["toast-shown"],D["has-column"]]),!0)},qe=function(){L.currentInstance.resetValidationMessage()},Ye=function(){var e=ee(),t=Me(e,D.input),n=Me(e,D.file),o=e.querySelector(".".concat(D.range," input")),r=e.querySelector(".".concat(D.range," output")),i=Me(e,D.select),s=e.querySelector(".".concat(D.checkbox," input")),a=Me(e,D.textarea);t.oninput=qe,n.onchange=qe,i.onchange=qe,s.onchange=qe,a.oninput=qe,o.oninput=function(){qe(),r.value=o.value},o.onchange=function(){qe(),r.value=o.value}},Xe=function(e){return"string"===typeof e?document.querySelector(e):e},$e=function(e){var t=ee();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},Ze=function(e){"rtl"===window.getComputedStyle(e).direction&&Pe(Z(),D.rtl)},Qe=function(e){var t=Ge();if(We())V("SweetAlert2 requires document to initialize");else{var n=document.createElement("div");n.className=D.container,t&&Pe(n,D["no-transition"]),Se(n,Ke);var o=Xe(e.target);o.appendChild(n),$e(e),Ze(o),Ye()}},Je=function(e,t){e instanceof HTMLElement?t.appendChild(e):"object"===s(e)?et(e,t):e&&Se(t,e)},et=function(e,t){e.jquery?tt(t,e):Se(t,e.toString())},tt=function(e,t){if(e.textContent="",0 in t)for(var n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},nt=function(){if(We())return!1;var e=document.createElement("div");return"undefined"!==typeof e.style.webkitAnimation?"webkitAnimationEnd":"undefined"!==typeof e.style.animation&&"animationend"}(),ot=function(e,t){var n=pe(),o=he();n&&o&&(t.showConfirmButton||t.showDenyButton||t.showCancelButton?Oe(n):Le(n),Ce(n,t,"actions"),rt(n,o,t),Se(o,t.loaderHtml||""),Ce(o,t,"loader"))};function rt(e,t,n){var o=le(),r=de(),i=ce();o&&r&&i&&(st(o,"confirm",n),st(r,"deny",n),st(i,"cancel",n),it(o,r,i,n),n.reverseButtons&&(n.toast?(e.insertBefore(i,o),e.insertBefore(r,o)):(e.insertBefore(i,t),e.insertBefore(r,t),e.insertBefore(o,t))))}function it(e,t,n,o){o.buttonsStyling?(Pe([e,t,n],D.styled),o.confirmButtonColor&&(e.style.backgroundColor=o.confirmButtonColor,Pe(e,D["default-outline"])),o.denyButtonColor&&(t.style.backgroundColor=o.denyButtonColor,Pe(t,D["default-outline"])),o.cancelButtonColor&&(n.style.backgroundColor=o.cancelButtonColor,Pe(n,D["default-outline"]))):Ae([e,t,n],D.styled)}function st(e,t,n){var o=U(t);Ne(e,n["show".concat(o,"Button")],"inline-block"),Se(e,n["".concat(t,"ButtonText")]||""),e.setAttribute("aria-label",n["".concat(t,"ButtonAriaLabel")]||""),e.className=D[t],Ce(e,n,"".concat(t,"Button"))}var at=function(e,t){var n=me();n&&(Se(n,t.closeButtonHtml||""),Ce(n,t,"closeButton"),Ne(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},lt=function(e,t){var n=Z();n&&(ct(n,t.backdrop),dt(n,t.position),ut(n,t.grow),Ce(n,t,"container"))};function ct(e,t){"string"===typeof t?e.style.background=t:t||Pe([document.documentElement,document.body],D["no-backdrop"])}function dt(e,t){t&&(t in D?Pe(e,D[t]):(H('The "position" parameter is not valid, defaulting to "center"'),Pe(e,D.center)))}function ut(e,t){t&&Pe(e,D["grow-".concat(t)])}var ht={innerParams:new WeakMap,domCache:new WeakMap},pt=["input","file","range","select","radio","checkbox","textarea"],ft=function(e,t){var n=ee();if(n){var o=ht.innerParams.get(e),r=!o||t.input!==o.input;pt.forEach((function(e){var o=Me(n,D[e]);o&&(vt(e,t.inputAttributes),o.className=D[e],r&&Le(o))})),t.input&&(r&&gt(t),yt(t))}},gt=function(e){if(e.input)if(_t[e.input]){var t=xt(e.input),n=_t[e.input](t,e);Oe(t),e.inputAutoFocus&&setTimeout((function(){Ie(n)}))}else V("Unexpected type of input! Expected ".concat(Object.keys(_t).join(" | "),', got "').concat(e.input,'"'))},mt=function(e){for(var t=0;t<e.attributes.length;t++){var n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},vt=function(e,t){var n=Ee(ee(),e);if(n)for(var o in mt(n),t)n.setAttribute(o,t[o])},yt=function(e){var t=xt(e.input);"object"===s(e.customClass)&&Pe(t,e.customClass.input)},bt=function(e,t){e.placeholder&&!t.inputPlaceholder||(e.placeholder=t.inputPlaceholder)},wt=function(e,t,n){if(n.inputLabel){var o=document.createElement("label"),r=D["input-label"];o.setAttribute("for",e.id),o.className=r,"object"===s(n.customClass)&&Pe(o,n.customClass.inputLabel),o.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",o)}},xt=function(e){return Me(ee(),D[e]||D.input)},St=function(e,t){["string","number"].includes(s(t))?e.value="".concat(t):$(t)||H('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(s(t),'"'))},_t={};_t.text=_t.email=_t.password=_t.number=_t.tel=_t.url=_t.search=_t.date=_t["datetime-local"]=_t.time=_t.week=_t.month=function(e,t){return St(e,t.inputValue),wt(e,e,t),bt(e,t),e.type=t.input,e},_t.file=function(e,t){return wt(e,e,t),bt(e,t),e},_t.range=function(e,t){var n=e.querySelector("input"),o=e.querySelector("output");return St(n,t.inputValue),n.type=t.input,St(o,t.inputValue),wt(n,e,t),e},_t.select=function(e,t){if(e.textContent="",t.inputPlaceholder){var n=document.createElement("option");Se(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return wt(e,e,t),e},_t.radio=function(e){return e.textContent="",e},_t.checkbox=function(e,t){var n=Ee(ee(),"checkbox");n.value="1",n.checked=Boolean(t.inputValue);var o=e.querySelector("span");return Se(o,t.inputPlaceholder),n},_t.textarea=function(e,t){St(e,t.inputValue),bt(e,t),wt(e,e,t);var n=function(e){return parseInt(window.getComputedStyle(e).marginLeft)+parseInt(window.getComputedStyle(e).marginRight)};return setTimeout((function(){if("MutationObserver"in window){var o=parseInt(window.getComputedStyle(ee()).width);new MutationObserver((function(){if(document.body.contains(e)){var r=e.offsetWidth+n(e);r>o?ee().style.width="".concat(r,"px"):je(ee(),"width",t.width)}})).observe(e,{attributes:!0,attributeFilter:["style"]})}})),e};var kt=function(e,t){var n=re();n&&(Be(n),Ce(n,t,"htmlContainer"),t.html?(Je(t.html,n),Oe(n,"block")):t.text?(n.textContent=t.text,Oe(n,"block")):Le(n),ft(e,t))},Ct=function(e,t){var n=fe();n&&(Be(n),Ne(n,t.footer,"block"),t.footer&&Je(t.footer,n),Ce(n,t,"footer"))},Et=function(e,t){var n=ht.innerParams.get(e),o=te();if(o){if(n&&t.icon===n.icon)return Mt(o,t),void It(o,t);if(t.icon||t.iconHtml){if(t.icon&&-1===Object.keys(z).indexOf(t.icon))return V('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(t.icon,'"')),void Le(o);Oe(o),Mt(o,t),It(o,t),Pe(o,t.showClass&&t.showClass.icon)}else Le(o)}},It=function(e,t){for(var n=0,o=Object.entries(z);n<o.length;n++){var r=v(o[n],2),i=r[0],s=r[1];t.icon!==i&&Ae(e,s)}Pe(e,t.icon&&z[t.icon]),jt(e,t),Tt(),Ce(e,t,"icon")},Tt=function(){var e=ee();if(e)for(var t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),o=0;o<n.length;o++)n[o].style.backgroundColor=t},Pt='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',At='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n',Mt=function(e,t){if(t.icon||t.iconHtml){var n=e.innerHTML,o="";t.iconHtml?o=Ot(t.iconHtml):"success"===t.icon?(o=Pt,n=n.replace(/ style=".*?"/g,"")):"error"===t.icon?o=At:t.icon&&(o=Ot({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==o.trim()&&Se(e,o)}},jt=function(e,t){if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(var n=0,o=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];n<o.length;n++){var r=o[n];Re(e,r,"background-color",t.iconColor)}Re(e,".swal2-success-ring","border-color",t.iconColor)}},Ot=function(e){return'<div class="'.concat(D["icon-content"],'">').concat(e,"</div>")},Lt=function(e,t){var n=ie();n&&(t.imageUrl?(Oe(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),je(n,"width",t.imageWidth),je(n,"height",t.imageHeight),n.className=D.image,Ce(n,t,"image")):Le(n))},Bt=function(e,t){var n=Z(),o=ee();if(n&&o){if(t.toast){je(n,"width",t.width),o.style.width="100%";var r=he();r&&o.insertBefore(r,te())}else je(o,"width",t.width);je(o,"padding",t.padding),t.color&&(o.style.color=t.color),t.background&&(o.style.background=t.background),Le(ae()),Rt(o,t)}},Rt=function(e,t){var n=t.showClass||{};e.className="".concat(D.popup," ").concat(De(e)?n.popup:""),t.toast?(Pe([document.documentElement,document.body],D["toast-shown"]),Pe(e,D.toast)):Pe(e,D.modal),Ce(e,t,"popup"),"string"===typeof t.customClass&&Pe(e,t.customClass),t.icon&&Pe(e,D["icon-".concat(t.icon)])},Nt=function(e,t){var n=se();if(n){var o=t.progressSteps,r=t.currentProgressStep;o&&0!==o.length&&void 0!==r?(Oe(n),n.textContent="",r>=o.length&&H("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),o.forEach((function(e,i){var s=Dt(e);if(n.appendChild(s),i===r&&Pe(s,D["active-progress-step"]),i!==o.length-1){var a=zt(t);n.appendChild(a)}}))):Le(n)}},Dt=function(e){var t=document.createElement("li");return Pe(t,D["progress-step"]),Se(t,e),t},zt=function(e){var t=document.createElement("li");return Pe(t,D["progress-step-line"]),e.progressStepsDistance&&je(t,"width",e.progressStepsDistance),t},Ft=function(e,t){var n=oe();n&&(Be(n),Ne(n,t.title||t.titleText,"block"),t.title&&Je(t.title,n),t.titleText&&(n.innerText=t.titleText),Ce(n,t,"title"))},Ut=function(e,t){Bt(e,t),lt(e,t),Nt(e,t),Et(e,t),Lt(e,t),Ft(e,t),at(e,t),kt(e,t),ot(e,t),Ct(e,t);var n=ee();"function"===typeof t.didRender&&n&&t.didRender(n)},Ht=function(){return De(ee())},Vt=function(){var e;return null===(e=le())||void 0===e?void 0:e.click()},Wt=function(){var e;return null===(e=de())||void 0===e?void 0:e.click()},Kt=function(){var e;return null===(e=ce())||void 0===e?void 0:e.click()},Gt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),qt=function(e){e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},Yt=function(e,t,n){qt(e),t.toast||(e.keydownHandler=function(e){return Qt(t,e,n)},e.keydownTarget=t.keydownListenerCapture?window:ee(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},Xt=function(e,t){var n,o=ye();if(o.length)return(e+=t)===o.length?e=0:-1===e&&(e=o.length-1),void o[e].focus();null===(n=ee())||void 0===n||n.focus()},$t=["ArrowRight","ArrowDown"],Zt=["ArrowLeft","ArrowUp"],Qt=function(e,t,n){e&&(t.isComposing||229===t.keyCode||(e.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?Jt(t,e):"Tab"===t.key?en(t):[].concat($t,Zt).includes(t.key)?tn(t.key):"Escape"===t.key&&nn(t,e,n)))},Jt=function(e,t){if(q(t.allowEnterKey)){var n=Ee(ee(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;Vt(),e.preventDefault()}}},en=function(e){for(var t=e.target,n=ye(),o=-1,r=0;r<n.length;r++)if(t===n[r]){o=r;break}e.shiftKey?Xt(o,-1):Xt(o,1),e.stopPropagation(),e.preventDefault()},tn=function(e){var t=pe(),n=le(),o=de(),r=ce();if(t&&n&&o&&r){var i=[n,o,r];if(!(document.activeElement instanceof HTMLElement)||i.includes(document.activeElement)){var s=$t.includes(e)?"nextElementSibling":"previousElementSibling",a=document.activeElement;if(a){for(var l=0;l<t.children.length;l++){if(!(a=a[s]))return;if(a instanceof HTMLButtonElement&&De(a))break}a instanceof HTMLButtonElement&&a.focus()}}}},nn=function(e,t,n){q(t.allowEscapeKey)&&(e.preventDefault(),n(Gt.esc))},on={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},rn=function(){Array.from(document.body.children).forEach((function(e){e===Z()||e.contains(Z())||(e.hasAttribute("aria-hidden")&&e.setAttribute("data-previous-aria-hidden",e.getAttribute("aria-hidden")||""),e.setAttribute("aria-hidden","true"))}))},sn=function(){Array.from(document.body.children).forEach((function(e){e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")}))},an="undefined"!==typeof window&&!!window.GestureEvent,ln=function(){if(an&&!_e(document.body,D.iosfix)){var e=document.body.scrollTop;document.body.style.top="".concat(-1*e,"px"),Pe(document.body,D.iosfix),cn()}},cn=function(){var e,t=Z();t&&(t.ontouchstart=function(t){e=dn(t)},t.ontouchmove=function(t){e&&(t.preventDefault(),t.stopPropagation())})},dn=function(e){var t=e.target,n=Z(),o=re();return!(!n||!o)&&!un(e)&&!hn(e)&&(t===n||!Fe(n)&&t instanceof HTMLElement&&"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&(!Fe(o)||!o.contains(t)))},un=function(e){return e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType},hn=function(e){return e.touches&&e.touches.length>1},pn=function(){if(_e(document.body,D.iosfix)){var e=parseInt(document.body.style.top,10);Ae(document.body,D.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}},fn=function(){var e=document.createElement("div");e.className=D["scrollbar-measure"],document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},gn=null,mn=function(e){null===gn&&(document.body.scrollHeight>window.innerHeight||"scroll"===e)&&(gn=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(gn+fn(),"px"))},vn=function(){null!==gn&&(document.body.style.paddingRight="".concat(gn,"px"),gn=null)};function yn(e,t,n,o){we()?In(e,o):(R(n).then((function(){return In(e,o)})),qt(L)),an?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),be()&&(vn(),pn(),sn()),bn()}function bn(){Ae([document.documentElement,document.body],[D.shown,D["height-auto"],D["no-backdrop"],D["toast-shown"]])}function wn(e){e=kn(e);var t=on.swalPromiseResolve.get(this),n=xn(this);this.isAwaitingPromise?e.isDismissed||(_n(this),t(e)):n&&t(e)}var xn=function(e){var t=ee();if(!t)return!1;var n=ht.innerParams.get(e);if(!n||_e(t,n.hideClass.popup))return!1;Ae(t,n.showClass.popup),Pe(t,n.hideClass.popup);var o=Z();return Ae(o,n.showClass.backdrop),Pe(o,n.hideClass.backdrop),Cn(e,t,n),!0};function Sn(e){var t=on.swalPromiseReject.get(this);_n(this),t&&t(e)}var _n=function(e){e.isAwaitingPromise&&(delete e.isAwaitingPromise,ht.innerParams.get(e)||e._destroy())},kn=function(e){return"undefined"===typeof e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e)},Cn=function(e,t,n){var o=Z(),r=nt&&Ue(t);"function"===typeof n.willClose&&n.willClose(t),r?En(e,t,o,n.returnFocus,n.didClose):yn(e,o,n.returnFocus,n.didClose)},En=function(e,t,n,o,r){nt&&(L.swalCloseEventFinishedCallback=yn.bind(null,e,n,o,r),t.addEventListener(nt,(function(e){e.target===t&&(L.swalCloseEventFinishedCallback(),delete L.swalCloseEventFinishedCallback)})))},In=function(e,t){setTimeout((function(){"function"===typeof t&&t.bind(e.params)(),e._destroy&&e._destroy()}))},Tn=function(e){var t=ee();if(t||new Ar,t=ee()){var n=he();we()?Le(te()):Pn(t,e),Oe(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()}},Pn=function(e,t){var n=pe(),o=he();n&&o&&(!t&&De(le())&&(t=le()),Oe(n),t&&(Le(t),o.setAttribute("data-button-to-replace",t.className),n.insertBefore(o,t)),Pe([e,n],D.loading))},An=function(e,t){"select"===t.input||"radio"===t.input?Bn(e,t):["text","email","number","tel","textarea"].some((function(e){return e===t.input}))&&(Y(t.inputValue)||$(t.inputValue))&&(Tn(le()),Rn(e,t))},Mn=function(e,t){var n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return jn(n);case"radio":return On(n);case"file":return Ln(n);default:return t.inputAutoTrim?n.value.trim():n.value}},jn=function(e){return e.checked?1:0},On=function(e){return e.checked?e.value:null},Ln=function(e){return e.files&&e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null},Bn=function(e,t){var n=ee();if(n){var o=function(e){"select"===t.input?Nn(n,zn(e),t):"radio"===t.input&&Dn(n,zn(e),t)};Y(t.inputOptions)||$(t.inputOptions)?(Tn(le()),X(t.inputOptions).then((function(t){e.hideLoading(),o(t)}))):"object"===s(t.inputOptions)?o(t.inputOptions):V("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(s(t.inputOptions)))}},Rn=function(e,t){var n=e.getInput();n&&(Le(n),X(t.inputValue).then((function(o){n.value="number"===t.input?"".concat(parseFloat(o)||0):"".concat(o),Oe(n),n.focus(),e.hideLoading()})).catch((function(t){V("Error in inputValue promise: ".concat(t)),n.value="",Oe(n),n.focus(),e.hideLoading()})))};function Nn(e,t,n){var o=Me(e,D.select);if(o){var r=function(e,t,o){var r=document.createElement("option");r.value=o,Se(r,t),r.selected=Fn(o,n.inputValue),e.appendChild(r)};t.forEach((function(e){var t=e[0],n=e[1];if(Array.isArray(n)){var i=document.createElement("optgroup");i.label=t,i.disabled=!1,o.appendChild(i),n.forEach((function(e){return r(i,e[1],e[0])}))}else r(o,n,t)})),o.focus()}}function Dn(e,t,n){var o=Me(e,D.radio);if(o){t.forEach((function(e){var t=e[0],r=e[1],i=document.createElement("input"),s=document.createElement("label");i.type="radio",i.name=D.radio,i.value=t,Fn(t,n.inputValue)&&(i.checked=!0);var a=document.createElement("span");Se(a,r),a.className=D.label,s.appendChild(i),s.appendChild(a),o.appendChild(s)}));var r=o.querySelectorAll("input");r.length&&r[0].focus()}}var zn=function e(t){var n=[];return t instanceof Map?t.forEach((function(t,o){var r=t;"object"===s(r)&&(r=e(r)),n.push([o,r])})):Object.keys(t).forEach((function(o){var r=t[o];"object"===s(r)&&(r=e(r)),n.push([o,r])})),n},Fn=function(e,t){return!!t&&t.toString()===e.toString()},Un=void 0,Hn=function(e){var t=ht.innerParams.get(e);e.disableButtons(),t.input?Kn(e,"confirm"):$n(e,!0)},Vn=function(e){var t=ht.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?Kn(e,"deny"):qn(e,!1)},Wn=function(e,t){e.disableButtons(),t(Gt.cancel)},Kn=function(e,t){var n=ht.innerParams.get(e);if(n.input){var o=e.getInput(),r=Mn(e,n);n.inputValidator?Gn(e,r,t):o&&!o.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||o.validationMessage)):"deny"===t?qn(e,r):$n(e,r)}else V('The "input" parameter is needed to be set when using returnInputValueOn'.concat(U(t)))},Gn=function(e,t,n){var o=ht.innerParams.get(e);e.disableInput(),Promise.resolve().then((function(){return X(o.inputValidator(t,o.validationMessage))})).then((function(o){e.enableButtons(),e.enableInput(),o?e.showValidationMessage(o):"deny"===n?qn(e,t):$n(e,t)}))},qn=function(e,t){var n=ht.innerParams.get(e||Un);n.showLoaderOnDeny&&Tn(de()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then((function(){return X(n.preDeny(t,n.validationMessage))})).then((function(n){!1===n?(e.hideLoading(),_n(e)):e.close({isDenied:!0,value:"undefined"===typeof n?t:n})})).catch((function(t){return Xn(e||Un,t)}))):e.close({isDenied:!0,value:t})},Yn=function(e,t){e.close({isConfirmed:!0,value:t})},Xn=function(e,t){e.rejectPromise(t)},$n=function(e,t){var n=ht.innerParams.get(e||Un);n.showLoaderOnConfirm&&Tn(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then((function(){return X(n.preConfirm(t,n.validationMessage))})).then((function(n){De(ae())||!1===n?(e.hideLoading(),_n(e)):Yn(e,"undefined"===typeof n?t:n)})).catch((function(t){return Xn(e||Un,t)}))):Yn(e,t)};function Zn(){var e=ht.innerParams.get(this);if(e){var t=ht.domCache.get(this);Le(t.loader),we()?e.icon&&Oe(te()):Qn(t),Ae([t.popup,t.actions],D.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}}var Qn=function(e){var t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?Oe(t[0],"inline-block"):ze()&&Le(e.actions)};function Jn(){var e=ht.innerParams.get(this),t=ht.domCache.get(this);return t?Ee(t.popup,e.input):null}function eo(e,t,n){var o=ht.domCache.get(e);t.forEach((function(e){o[e].disabled=n}))}function to(e,t){var n=ee();if(n&&e)if("radio"===e.type)for(var o=n.querySelectorAll('[name="'.concat(D.radio,'"]')),r=0;r<o.length;r++)o[r].disabled=t;else e.disabled=t}function no(){eo(this,["confirmButton","denyButton","cancelButton"],!1)}function oo(){eo(this,["confirmButton","denyButton","cancelButton"],!0)}function ro(){to(this.getInput(),!1)}function io(){to(this.getInput(),!0)}function so(e){var t=ht.domCache.get(this),n=ht.innerParams.get(this);Se(t.validationMessage,e),t.validationMessage.className=D["validation-message"],n.customClass&&n.customClass.validationMessage&&Pe(t.validationMessage,n.customClass.validationMessage),Oe(t.validationMessage);var o=this.getInput();o&&(o.setAttribute("aria-invalid","true"),o.setAttribute("aria-describedby",D["validation-message"]),Ie(o),Pe(o,D.inputerror))}function ao(){var e=ht.domCache.get(this);e.validationMessage&&Le(e.validationMessage);var t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Ae(t,D.inputerror))}var lo={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},co=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],uo={},ho=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],po=function(e){return Object.prototype.hasOwnProperty.call(lo,e)},fo=function(e){return-1!==co.indexOf(e)},go=function(e){return uo[e]},mo=function(e){po(e)||H('Unknown parameter "'.concat(e,'"'))},vo=function(e){ho.includes(e)&&H('The parameter "'.concat(e,'" is incompatible with toasts'))},yo=function(e){var t=go(e);t&&G(e,t)},bo=function(e){for(var t in!1===e.backdrop&&e.allowOutsideClick&&H('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e)mo(t),e.toast&&vo(t),yo(t)};function wo(e){var t=ee(),n=ht.innerParams.get(this);if(t&&!_e(t,n.hideClass.popup)){var o=xo(e),r=Object.assign({},n,o);Ut(this,r),ht.innerParams.set(this,r),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}else H("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.")}var xo=function(e){var t={};return Object.keys(e).forEach((function(n){fo(n)?t[n]=e[n]:H("Invalid parameter to update: ".concat(n))})),t};function So(){var e=ht.domCache.get(this),t=ht.innerParams.get(this);t?(e.popup&&L.swalCloseEventFinishedCallback&&(L.swalCloseEventFinishedCallback(),delete L.swalCloseEventFinishedCallback),"function"===typeof t.didDestroy&&t.didDestroy(),_o(this)):ko(this)}var _o=function(e){ko(e),delete e.params,delete L.keydownHandler,delete L.keydownTarget,delete L.currentInstance},ko=function(e){e.isAwaitingPromise?(Co(ht,e),e.isAwaitingPromise=!0):(Co(on,e),Co(ht,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},Co=function(e,t){for(var n in e)e[n].delete(t)},Eo=Object.freeze({__proto__:null,_destroy:So,close:wn,closeModal:wn,closePopup:wn,closeToast:wn,disableButtons:oo,disableInput:io,disableLoading:Zn,enableButtons:no,enableInput:ro,getInput:Jn,handleAwaitingPromise:_n,hideLoading:Zn,rejectPromise:Sn,resetValidationMessage:ao,showValidationMessage:so,update:wo}),Io=function(e,t,n){e.toast?To(e,t,n):(Mo(t),jo(t),Oo(e,t,n))},To=function(e,t,n){t.popup.onclick=function(){e&&(Po(e)||e.timer||e.input)||n(Gt.close)}},Po=function(e){return!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton)},Ao=!1,Mo=function(e){e.popup.onmousedown=function(){e.container.onmouseup=function(t){e.container.onmouseup=function(){},t.target===e.container&&(Ao=!0)}}},jo=function(e){e.container.onmousedown=function(){e.popup.onmouseup=function(t){e.popup.onmouseup=function(){},(t.target===e.popup||t.target instanceof HTMLElement&&e.popup.contains(t.target))&&(Ao=!0)}}},Oo=function(e,t,n){t.container.onclick=function(o){Ao?Ao=!1:o.target===t.container&&q(e.allowOutsideClick)&&n(Gt.backdrop)}},Lo=function(e){return"object"===s(e)&&e.jquery},Bo=function(e){return e instanceof Element||Lo(e)},Ro=function(e){var t={};return"object"!==s(e[0])||Bo(e[0])?["title","html","icon"].forEach((function(n,o){var r=e[o];"string"===typeof r||Bo(r)?t[n]=r:void 0!==r&&V("Unexpected type of ".concat(n,'! Expected "string" or "Element", got ').concat(s(r)))})):Object.assign(t,e[0]),t};function No(){for(var e=this,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t(e,o)}function Do(t){var n=function(n){function o(){return a(this,o),e(this,o,arguments)}return d(o,n),c(o,[{key:"_main",value:function(e,n){return m(u(o.prototype),"_main",this).call(this,e,Object.assign({},t,n))}}]),o}(this);return n}var zo=function(){return L.timeout&&L.timeout.getTimerLeft()},Fo=function(){if(L.timeout)return Ve(),L.timeout.stop()},Uo=function(){if(L.timeout){var e=L.timeout.start();return He(e),e}},Ho=function(){var e=L.timeout;return e&&(e.running?Fo():Uo())},Vo=function(e){if(L.timeout){var t=L.timeout.increase(e);return He(t,!0),t}},Wo=function(){return!(!L.timeout||!L.timeout.isRunning())},Ko=!1,Go={};function qo(){Go[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Ko||(document.body.addEventListener("click",Xo),Ko=!0)}var Yo,Xo=function(e){for(var t=e.target;t&&t!==document;t=t.parentNode)for(var n in Go){var o=t.getAttribute(n);if(o)return void Go[n].fire({template:o})}},$o=Object.freeze({__proto__:null,argsToParams:Ro,bindClickHandler:qo,clickCancel:Kt,clickConfirm:Vt,clickDeny:Wt,enableLoading:Tn,fire:No,getActions:pe,getCancelButton:ce,getCloseButton:me,getConfirmButton:le,getContainer:Z,getDenyButton:de,getFocusableElements:ye,getFooter:fe,getHtmlContainer:re,getIcon:te,getIconContent:ne,getImage:ie,getInputLabel:ue,getLoader:he,getPopup:ee,getProgressSteps:se,getTimerLeft:zo,getTimerProgressBar:ge,getTitle:oe,getValidationMessage:ae,increaseTimer:Vo,isDeprecatedParameter:go,isLoading:xe,isTimerRunning:Wo,isUpdatableParameter:fo,isValidParameter:po,isVisible:Ht,mixin:Do,resumeTimer:Uo,showLoading:Tn,stopTimer:Fo,toggleTimer:Ho}),Zo=function(){function e(t,n){a(this,e),this.callback=t,this.remaining=n,this.running=!1,this.start()}return c(e,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(e){var t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),e}(),Qo=["swal-title","swal-html","swal-footer"],Jo=function(e){var t="string"===typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};var n=t.content;return ar(n),Object.assign(er(n),tr(n),nr(n),or(n),rr(n),ir(n),sr(n,Qo))},er=function(e){var t={};return Array.from(e.querySelectorAll("swal-param")).forEach((function(e){lr(e,["name","value"]);var n=e.getAttribute("name"),o=e.getAttribute("value");"boolean"===typeof lo[n]?t[n]="false"!==o:"object"===s(lo[n])?t[n]=JSON.parse(o):t[n]=o})),t},tr=function(e){var t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach((function(e){var n=e.getAttribute("name"),o=e.getAttribute("value");t[n]=new Function("return ".concat(o))()})),t},nr=function(e){var t={};return Array.from(e.querySelectorAll("swal-button")).forEach((function(e){lr(e,["type","color","aria-label"]);var n=e.getAttribute("type");t["".concat(n,"ButtonText")]=e.innerHTML,t["show".concat(U(n),"Button")]=!0,e.hasAttribute("color")&&(t["".concat(n,"ButtonColor")]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(t["".concat(n,"ButtonAriaLabel")]=e.getAttribute("aria-label"))})),t},or=function(e){var t={},n=e.querySelector("swal-image");return n&&(lr(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt"))),t},rr=function(e){var t={},n=e.querySelector("swal-icon");return n&&(lr(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},ir=function(e){var t={},n=e.querySelector("swal-input");n&&(lr(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));var o=Array.from(e.querySelectorAll("swal-input-option"));return o.length&&(t.inputOptions={},o.forEach((function(e){lr(e,["value"]);var n=e.getAttribute("value"),o=e.innerHTML;t.inputOptions[n]=o}))),t},sr=function(e,t){var n={};for(var o in t){var r=t[o],i=e.querySelector(r);i&&(lr(i,[]),n[r.replace(/^swal-/,"")]=i.innerHTML.trim())}return n},ar=function(e){var t=Qo.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach((function(e){var n=e.tagName.toLowerCase();t.includes(n)||H("Unrecognized element <".concat(n,">"))}))},lr=function(e,t){Array.from(e.attributes).forEach((function(n){-1===t.indexOf(n.name)&&H(['Unrecognized attribute "'.concat(n.name,'" on <').concat(e.tagName.toLowerCase(),">."),"".concat(t.length?"Allowed attributes are: ".concat(t.join(", ")):"To set the value, use HTML within the element.")])}))},cr=10,dr=function(e){var t=Z(),n=ee();"function"===typeof e.willOpen&&e.willOpen(n);var o=window.getComputedStyle(document.body).overflowY;fr(t,n,e),setTimeout((function(){hr(t,n)}),cr),be()&&(pr(t,e.scrollbarPadding,o),rn()),we()||L.previousActiveElement||(L.previousActiveElement=document.activeElement),"function"===typeof e.didOpen&&setTimeout((function(){return e.didOpen(n)})),Ae(t,D["no-transition"])},ur=function e(t){var n=ee();if(t.target===n&&nt){var o=Z();n.removeEventListener(nt,e),o.style.overflowY="auto"}},hr=function(e,t){nt&&Ue(t)?(e.style.overflowY="hidden",t.addEventListener(nt,ur)):e.style.overflowY="auto"},pr=function(e,t,n){ln(),t&&"hidden"!==n&&mn(n),setTimeout((function(){e.scrollTop=0}))},fr=function(e,t,n){Pe(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),Oe(t,"grid"),setTimeout((function(){Pe(t,n.showClass.popup),t.style.removeProperty("opacity")}),cr)):Oe(t,"grid"),Pe([document.documentElement,document.body],D.shown),n.heightAuto&&n.backdrop&&!n.toast&&Pe([document.documentElement,document.body],D["height-auto"])},gr={email:function(e,t){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address")},url:function(e,t){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")}};function mr(e){e.inputValidator||("email"===e.input&&(e.inputValidator=gr.email),"url"===e.input&&(e.inputValidator=gr.url))}function vr(e){(!e.target||"string"===typeof e.target&&!document.querySelector(e.target)||"string"!==typeof e.target&&!e.target.appendChild)&&(H('Target parameter is not valid, defaulting to "body"'),e.target="body")}function yr(e){mr(e),e.showLoaderOnConfirm&&!e.preConfirm&&H("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),vr(e),"string"===typeof e.title&&(e.title=e.title.split("\n").join("<br />")),Qe(e)}var br=new WeakMap,wr=function(){function e(){if(a(this,e),j(this,br,{writable:!0,value:void 0}),"undefined"!==typeof window){Yo=this;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=Object.freeze(this.constructor.argsToParams(n));this.params=r,this.isAwaitingPromise=!1,I(this,br,this._main(Yo.params))}}return c(e,[{key:"_main",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(bo(Object.assign({},t,e)),L.currentInstance){var n=on.swalPromiseResolve.get(L.currentInstance),o=L.currentInstance.isAwaitingPromise;L.currentInstance._destroy(),o||n({isDismissed:!0}),be()&&sn()}L.currentInstance=Yo;var r=Sr(e,t);yr(r),Object.freeze(r),L.timeout&&(L.timeout.stop(),delete L.timeout),clearTimeout(L.restoreFocusTimeout);var i=_r(Yo);return Ut(Yo,r),ht.innerParams.set(Yo,r),xr(Yo,i,r)}},{key:"then",value:function(e){return E(this,br).then(e)}},{key:"finally",value:function(e){return E(this,br).finally(e)}}]),e}(),xr=function(e,t,n){return new Promise((function(o,r){var i=function(t){e.close({isDismissed:!0,dismiss:t})};on.swalPromiseResolve.set(e,o),on.swalPromiseReject.set(e,r),t.confirmButton.onclick=function(){Hn(e)},t.denyButton.onclick=function(){Vn(e)},t.cancelButton.onclick=function(){Wn(e,i)},t.closeButton.onclick=function(){i(Gt.close)},Io(n,t,i),Yt(L,n,i),An(e,n),dr(n),kr(L,n,i),Cr(t,n),setTimeout((function(){t.container.scrollTop=0}))}))},Sr=function(e,t){var n=Jo(e),o=Object.assign({},lo,t,n,e);return o.showClass=Object.assign({},lo.showClass,o.showClass),o.hideClass=Object.assign({},lo.hideClass,o.hideClass),!1===o.animation&&(o.showClass={backdrop:"swal2-noanimation"},o.hideClass={}),o},_r=function(e){var t={popup:ee(),container:Z(),actions:pe(),confirmButton:le(),denyButton:de(),cancelButton:ce(),loader:he(),closeButton:me(),validationMessage:ae(),progressSteps:se()};return ht.domCache.set(e,t),t},kr=function(e,t,n){var o=ge();Le(o),t.timer&&(e.timeout=new Zo((function(){n("timer"),delete e.timeout}),t.timer),t.timerProgressBar&&(Oe(o),Ce(o,t,"timerProgressBar"),setTimeout((function(){e.timeout&&e.timeout.running&&He(t.timer)}))))},Cr=function(e,t){t.toast||(q(t.allowEnterKey)?Er(e,t)||Xt(-1,1):Ir())},Er=function(e,t){return t.focusDeny&&De(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&De(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!De(e.confirmButton))&&(e.confirmButton.focus(),!0)},Ir=function(){document.activeElement instanceof HTMLElement&&"function"===typeof document.activeElement.blur&&document.activeElement.blur()};if("undefined"!==typeof window&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var Tr=new Date,Pr=localStorage.getItem("swal-initiation");Pr?(Tr.getTime()-Date.parse(Pr))/864e5>3&&setTimeout((function(){document.body.style.pointerEvents="none";var e=document.createElement("audio");e.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",e.loop=!0,document.body.appendChild(e),setTimeout((function(){e.play().catch((function(){}))}),2500)}),500):localStorage.setItem("swal-initiation","".concat(Tr))}wr.prototype.disableButtons=oo,wr.prototype.enableButtons=no,wr.prototype.getInput=Jn,wr.prototype.disableInput=io,wr.prototype.enableInput=ro,wr.prototype.hideLoading=Zn,wr.prototype.disableLoading=Zn,wr.prototype.showValidationMessage=so,wr.prototype.resetValidationMessage=ao,wr.prototype.close=wn,wr.prototype.closePopup=wn,wr.prototype.closeModal=wn,wr.prototype.closeToast=wn,wr.prototype.rejectPromise=Sn,wr.prototype.update=wo,wr.prototype._destroy=So,Object.assign(wr,$o),Object.keys(Eo).forEach((function(e){wr[e]=function(){var t;return Yo&&Yo[e]?(t=Yo)[e].apply(t,arguments):null}})),wr.DismissReason=Gt,wr.version="11.10.6";var Ar=wr;return Ar.default=Ar,Ar}(),"undefined"!==typeof this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},6884:(e,t,n)=>{const o=n(7346);e.exports={recognize:async(e,t,n)=>{const r=await o(t,1,n);return r.recognize(e).finally((async()=>{await r.terminate()}))},detect:async(e,t)=>{const n=await o("osd",0,t);return n.detect(e).finally((async()=>{await n.terminate()}))}}},9511:e=>{e.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},4588:e=>{e.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},5147:e=>{e.exports={workerBlobURL:!0,logger:()=>{}}},5571:e=>{e.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},5701:(e,t,n)=>{const o=n(9593);let r=0;e.exports=e=>{let{id:t,action:n,payload:i={}}=e,s=t;return"undefined"===typeof s&&(s=o("Job",r),r+=1),{id:s,action:n,payload:i}}},4447:function(e,t,n){const o=n(5701),{log:r}=n(9926),i=n(9593);let s=0;e.exports=()=>{const e=i("Scheduler",s),t={},n={};let a=[];s+=1;const l=()=>Object.keys(t).length,c=()=>{if(0!==a.length){const e=Object.keys(t);for(let o=0;o<e.length;o+=1)if("undefined"===typeof n[e[o]]){a[0](t[e[o]]);break}}},d=(t,i)=>new Promise(((s,l)=>{const d=o({action:t,payload:i});a.push((async e=>{a.shift(),n[e.id]=d;try{s(await e[t].apply(this,[...i,d.id]))}catch(o){l(o)}finally{delete n[e.id],c()}})),r("[".concat(e,"]: Add ").concat(d.id," to JobQueue")),r("[".concat(e,"]: JobQueue length=").concat(a.length)),c()}));return{addWorker:n=>(t[n.id]=n,r("[".concat(e,"]: Add ").concat(n.id)),r("[".concat(e,"]: Number of workers=").concat(l())),c(),n.id),addJob:async function(t){if(0===l())throw Error("[".concat(e,"]: You need to have at least one worker before adding jobs"));for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return d(t,o)},terminate:async()=>{Object.keys(t).forEach((async e=>{await t[e].terminate()})),a=[]},getQueueLen:()=>a.length,getNumWorkers:l}}},7346:(e,t,n)=>{const o=n(4402),r=n(3057),i=n(5701),{log:s}=n(9926),a=n(9593),l=n(9511),{defaultOptions:c,spawnWorker:d,terminateWorker:u,onMessage:h,loadImage:p,send:f}=n(2034);let g=0;e.exports=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.LSTM_ONLY,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const v=a("Worker",g),{logger:y,errorHandler:b,...w}=o({...c,...n}),x={},S={},_="string"===typeof e?e.split("+"):e;let k=t,C=m;const E=[l.DEFAULT,l.LSTM_ONLY].includes(t)&&!w.legacyCore;let I,T;const P=new Promise(((e,t)=>{T=e,I=t}));let A=d(w);A.onerror=e=>{I(e.message)},g+=1;const M=(e,t)=>{x[e]=t},j=(e,t)=>{S[e]=t},O=e=>{let{id:t,action:n,payload:o}=e;return new Promise(((e,r)=>{s("[".concat(v,"]: Start ").concat(t,", action=").concat(n));const i="".concat(n,"-").concat(t);M(i,e),j(i,r),f(A,{workerId:v,jobId:t,action:n,payload:o})}))},L=(e,t)=>O(i({id:t,action:"loadLanguage",payload:{langs:e,options:{langPath:w.langPath,dataPath:w.dataPath,cachePath:w.cachePath,cacheMethod:w.cacheMethod,gzip:w.gzip,lstmOnly:[l.LSTM_ONLY,l.TESSERACT_LSTM_COMBINED].includes(k)&&!w.legacyLang}}})),B=(e,t,n,o)=>O(i({id:o,action:"initialize",payload:{langs:e,oem:t,config:n}}));h(A,(e=>{let{workerId:t,jobId:n,status:o,action:i,data:a}=e;const l="".concat(i,"-").concat(n);if("resolve"===o){s("[".concat(t,"]: Complete ").concat(n));let e=a;"recognize"===i?e=r(a):"getPDF"===i&&(e=Array.from({...a,length:Object.keys(a).length})),x[l]({jobId:n,data:e})}else if("reject"===o){if(S[l](a),"load"===i&&I(a),!b)throw Error(a);b(a)}else"progress"===o&&y({...a,userJobId:n})}));const R={id:v,worker:A,setResolve:M,setReject:j,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(e,t,n)=>O(i({id:n,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>O(i({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>O(i({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,n)=>O(i({id:n,action:"FS",payload:{method:e,args:t}})),loadLanguage:()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),initialize:()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),reinitialize:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(E&&[l.TESSERACT_ONLY,l.TESSERACT_LSTM_COMBINED].includes(t))throw Error("Legacy model requested but code missing.");const r=t||k;k=r;const i=n||C;C=i;const s=("string"===typeof e?e.split("+"):e).filter((e=>!_.includes(e)));return _.push(...s),s.length>0?L(s,o).then((()=>B(e,r,i,o))):B(e,r,i,o)},setParameters:function(){return O(i({id:arguments.length>1?arguments[1]:void 0,action:"setParameters",payload:{params:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}))},recognize:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{blocks:!0,text:!0,hocr:!0,tsv:!0};return O(i({id:arguments.length>3?arguments[3]:void 0,action:"recognize",payload:{image:await p(e),options:t,output:n}}))},getPDF:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tesseract OCR Result",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),O(i({id:n,action:"getPDF",payload:{title:e,textonly:t}}))},detect:async(e,t)=>{if(E)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return O(i({id:t,action:"detect",payload:{image:await p(e)}}))},terminate:async()=>(null!==A&&(u(A),A=null),Promise.resolve())};var N;return O(i({id:N,action:"load",payload:{options:{lstmOnly:E,corePath:w.corePath,logging:w.logging}}})).then((()=>L(e))).then((()=>B(e,t,m))).then((()=>T(R))).catch((()=>{})),P}},9938:(e,t,n)=>{const o=n(4447),r=n(7346),i=n(6884),s=n(5571),a=n(9511),l=n(4588),{setLogging:c}=n(9926);e.exports={languages:s,OEM:a,PSM:l,createScheduler:o,createWorker:r,setLogging:c,...i}},3057:e=>{e.exports=e=>{const t=[],n=[],o=[],r=[],i=[];return e.blocks&&e.blocks.forEach((s=>{s.paragraphs.forEach((t=>{t.lines.forEach((n=>{n.words.forEach((o=>{o.symbols.forEach((r=>{i.push({...r,page:e,block:s,paragraph:t,line:n,word:o})})),r.push({...o,page:e,block:s,paragraph:t,line:n})})),o.push({...n,page:e,block:s,paragraph:t})})),n.push({...t,page:e,block:s})})),t.push({...s,page:e})})),{...e,blocks:t,paragraphs:n,lines:o,words:r,symbols:i}}},9003:(e,t,n)=>{const o=n(4053);e.exports=e=>{const t={};return"undefined"!==typeof WorkerGlobalScope?t.type="webworker":o()?t.type="electron":"object"===typeof document?t.type="browser":"object"===typeof process&&(t.type="node"),"undefined"===typeof e?t:t[e]}},9593:e=>{e.exports=(e,t)=>"".concat(e,"-").concat(t,"-").concat(Math.random().toString(16).slice(3,8))},9926:function(e,t){var n=this;let o=!1;t.logging=o,t.setLogging=e=>{o=e},t.log=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o?console.log.apply(n,t):null}},4402:(e,t,n)=>{const o="browser"===n(9003)("type")?e=>new URL(e,window.location.href).href:e=>e;e.exports=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach((n=>{e[n]&&(t[n]=o(t[n]))})),t}},1597:(e,t,n)=>{const o=n(6125).rE,r=n(5147);e.exports={...r,workerPath:"https://cdn.jsdelivr.net/npm/tesseract.js@v".concat(o,"/dist/worker.min.js")}},2034:(e,t,n)=>{const o=n(1597),r=n(5095),i=n(4871),s=n(1942),a=n(7870),l=n(383);e.exports={defaultOptions:o,spawnWorker:r,terminateWorker:i,onMessage:s,send:a,loadImage:l}},383:e=>{const t=e=>new Promise(((t,n)=>{const o=new FileReader;o.onload=()=>{t(o.result)},o.onerror=e=>{let{target:{error:{code:t}}}=e;n(Error("File could not be read! Code=".concat(t)))},o.readAsArrayBuffer(e)})),n=async e=>{let o=e;if("undefined"===typeof e)return"undefined";if("string"===typeof e)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e))o=atob(e.split(",")[1]).split("").map((e=>e.charCodeAt(0)));else{const t=await fetch(e);o=await t.arrayBuffer()}else if("undefined"!==typeof HTMLElement&&e instanceof HTMLElement)"IMG"===e.tagName&&(o=await n(e.src)),"VIDEO"===e.tagName&&(o=await n(e.poster)),"CANVAS"===e.tagName&&await new Promise((n=>{e.toBlob((async e=>{o=await t(e),n()}))}));else if("undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas){const n=await e.convertToBlob();o=await t(n)}else(e instanceof File||e instanceof Blob)&&(o=await t(e));return new Uint8Array(o)};e.exports=n},1942:e=>{e.exports=(e,t)=>{e.onmessage=e=>{let{data:n}=e;t(n)}}},7870:e=>{e.exports=async(e,t)=>{e.postMessage(t)}},5095:e=>{e.exports=e=>{let t,{workerPath:n,workerBlobURL:o}=e;if(Blob&&URL&&o){const e=new Blob(['importScripts("'.concat(n,'");')],{type:"application/javascript"});t=new Worker(URL.createObjectURL(e))}else t=new Worker(n);return t}},4871:e=>{e.exports=e=>{e.terminate()}},5956:(e,t,n)=>{"use strict";var o=n(5043);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=o.useState,s=o.useEffect,a=o.useLayoutEffect,l=o.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(o){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),o=i({inst:{value:n,getSnapshot:t}}),r=o[0].inst,d=o[1];return a((function(){r.value=n,r.getSnapshot=t,c(r)&&d({inst:r})}),[e,n,t]),s((function(){return c(r)&&d({inst:r}),e((function(){c(r)&&d({inst:r})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:d},9461:(e,t,n)=>{"use strict";e.exports=n(5956)},8139:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,i(n)))}return e}function i(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},1239:(e,t,n)=>{"use strict";var o=n(4706),r=n(5464),i=TypeError;e.exports=function(e){if(o(e))return e;throw new i(r(e)+" is not a function")}},3348:(e,t,n)=>{"use strict";var o=n(4352),r=n(6115),i=n(3572).f,s=o("unscopables"),a=Array.prototype;void 0===a[s]&&i(a,s,{configurable:!0,value:r(null)}),e.exports=function(e){a[s][e]=!0}},880:(e,t,n)=>{"use strict";var o=n(7398).charAt;e.exports=function(e,t,n){return t+(n?o(e,t).length:1)}},1608:(e,t,n)=>{"use strict";var o=n(6821),r=String,i=TypeError;e.exports=function(e){if(o(e))return e;throw new i(r(e)+" is not an object")}},972:(e,t,n)=>{"use strict";var o=n(6774),r=n(2201),i=n(1591),s=function(e){return function(t,n,s){var a=o(t),l=i(a);if(0===l)return!e&&-1;var c,d=r(s,l);if(e&&n!==n){for(;l>d;)if((c=a[d++])!==c)return!0}else for(;l>d;d++)if((e||d in a)&&a[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},5687:(e,t,n)=>{"use strict";var o=n(7707),r=o({}.toString),i=o("".slice);e.exports=function(e){return i(r(e),8,-1)}},7972:(e,t,n)=>{"use strict";var o=n(1415),r=n(4706),i=n(5687),s=n(4352)("toStringTag"),a=Object,l="Arguments"===i(function(){return arguments}());e.exports=o?i:function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=a(e),s))?n:l?i(t):"Object"===(o=i(t))&&r(t.callee)?"Arguments":o}},5555:(e,t,n)=>{"use strict";var o=n(6164),r=n(2682),i=n(5214),s=n(3572);e.exports=function(e,t,n){for(var a=r(t),l=s.f,c=i.f,d=0;d<a.length;d++){var u=a[d];o(e,u)||n&&o(n,u)||l(e,u,c(t,u))}}},9266:(e,t,n)=>{"use strict";var o=n(9519),r=n(3572),i=n(6369);e.exports=o?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},6369:e=>{"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},5551:(e,t,n)=>{"use strict";var o=n(4706),r=n(3572),i=n(4416),s=n(3036);e.exports=function(e,t,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:t;if(o(n)&&i(n,c,a),a.global)l?e[t]=n:s(t,n);else{try{a.unsafe?e[t]&&(l=!0):delete e[t]}catch(d){}l?e[t]=n:r.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},3036:(e,t,n)=>{"use strict";var o=n(8986),r=Object.defineProperty;e.exports=function(e,t){try{r(o,e,{value:t,configurable:!0,writable:!0})}catch(n){o[e]=t}return t}},9519:(e,t,n)=>{"use strict";var o=n(8084);e.exports=!o((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2760:(e,t,n)=>{"use strict";var o=n(8986),r=n(6821),i=o.document,s=r(i)&&r(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},8971:e=>{"use strict";e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},5083:(e,t,n)=>{"use strict";var o,r,i=n(8986),s=n(8971),a=i.process,l=i.Deno,c=a&&a.versions||l&&l.version,d=c&&c.v8;d&&(r=(o=d.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!r&&s&&(!(o=s.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=s.match(/Chrome\/(\d+)/))&&(r=+o[1]),e.exports=r},6672:e=>{"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6715:(e,t,n)=>{"use strict";var o=n(8986),r=n(5214).f,i=n(9266),s=n(5551),a=n(3036),l=n(5555),c=n(6079);e.exports=function(e,t){var n,d,u,h,p,f=e.target,g=e.global,m=e.stat;if(n=g?o:m?o[f]||a(f,{}):o[f]&&o[f].prototype)for(d in t){if(h=t[d],u=e.dontCallGetSet?(p=r(n,d))&&p.value:n[d],!c(g?d:f+(m?".":"#")+d,e.forced)&&void 0!==u){if(typeof h==typeof u)continue;l(h,u)}(e.sham||u&&u.sham)&&i(h,"sham",!0),s(n,d,h,e)}}},8084:e=>{"use strict";e.exports=function(e){try{return!!e()}catch(t){return!0}}},3589:(e,t,n)=>{"use strict";n(1054);var o=n(4850),r=n(5551),i=n(1180),s=n(8084),a=n(4352),l=n(9266),c=a("species"),d=RegExp.prototype;e.exports=function(e,t,n,u){var h=a(e),p=!s((function(){var t={};return t[h]=function(){return 7},7!==""[e](t)})),f=p&&!s((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!p||!f||n){var g=/./[h],m=t(h,""[e],(function(e,t,n,r,s){var a=t.exec;return a===i||a===d.exec?p&&!s?{done:!0,value:o(g,t,n,r)}:{done:!0,value:o(e,n,t,r)}:{done:!1}}));r(String.prototype,e,m[0]),r(d,h,m[1])}u&&l(d[h],"sham",!0)}},6464:(e,t,n)=>{"use strict";var o=n(5897),r=Function.prototype,i=r.apply,s=r.call;e.exports="object"==typeof Reflect&&Reflect.apply||(o?s.bind(i):function(){return s.apply(i,arguments)})},5897:(e,t,n)=>{"use strict";var o=n(8084);e.exports=!o((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},4850:(e,t,n)=>{"use strict";var o=n(5897),r=Function.prototype.call;e.exports=o?r.bind(r):function(){return r.apply(r,arguments)}},2345:(e,t,n)=>{"use strict";var o=n(9519),r=n(6164),i=Function.prototype,s=o&&Object.getOwnPropertyDescriptor,a=r(i,"name"),l=a&&"something"===function(){}.name,c=a&&(!o||o&&s(i,"name").configurable);e.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},7707:(e,t,n)=>{"use strict";var o=n(5897),r=Function.prototype,i=r.call,s=o&&r.bind.bind(i,i);e.exports=o?s:function(e){return function(){return i.apply(e,arguments)}}},3542:(e,t,n)=>{"use strict";var o=n(8986),r=n(4706);e.exports=function(e,t){return arguments.length<2?(n=o[e],r(n)?n:void 0):o[e]&&o[e][t];var n}},7151:(e,t,n)=>{"use strict";var o=n(1239),r=n(3192);e.exports=function(e,t){var n=e[t];return r(n)?void 0:o(n)}},6207:(e,t,n)=>{"use strict";var o=n(7707),r=n(2522),i=Math.floor,s=o("".charAt),a=o("".replace),l=o("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,o,u,h){var p=n+e.length,f=o.length,g=d;return void 0!==u&&(u=r(u),g=c),a(h,g,(function(r,a){var c;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,n);case"'":return l(t,p);case"<":c=u[l(a,1,-1)];break;default:var d=+a;if(0===d)return r;if(d>f){var h=i(d/10);return 0===h?r:h<=f?void 0===o[h-1]?s(a,1):o[h-1]+s(a,1):r}c=o[d-1]}return void 0===c?"":c}))}},8986:function(e,t,n){"use strict";var o=function(e){return e&&e.Math===Math&&e};e.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof n.g&&n.g)||o("object"==typeof this&&this)||function(){return this}()||Function("return this")()},6164:(e,t,n)=>{"use strict";var o=n(7707),r=n(2522),i=o({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(r(e),t)}},3114:e=>{"use strict";e.exports={}},904:(e,t,n)=>{"use strict";var o=n(3542);e.exports=o("document","documentElement")},9704:(e,t,n)=>{"use strict";var o=n(9519),r=n(8084),i=n(2760);e.exports=!o&&!r((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},1178:(e,t,n)=>{"use strict";var o=n(7707),r=n(8084),i=n(5687),s=Object,a=o("".split);e.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"===i(e)?a(e,""):s(e)}:s},5167:(e,t,n)=>{"use strict";var o=n(7707),r=n(4706),i=n(5704),s=o(Function.toString);r(i.inspectSource)||(i.inspectSource=function(e){return s(e)}),e.exports=i.inspectSource},2428:(e,t,n)=>{"use strict";var o,r,i,s=n(9279),a=n(8986),l=n(6821),c=n(9266),d=n(6164),u=n(5704),h=n(4658),p=n(3114),f="Object already initialized",g=a.TypeError,m=a.WeakMap;if(s||u.state){var v=u.state||(u.state=new m);v.get=v.get,v.has=v.has,v.set=v.set,o=function(e,t){if(v.has(e))throw new g(f);return t.facade=e,v.set(e,t),t},r=function(e){return v.get(e)||{}},i=function(e){return v.has(e)}}else{var y=h("state");p[y]=!0,o=function(e,t){if(d(e,y))throw new g(f);return t.facade=e,c(e,y,t),t},r=function(e){return d(e,y)?e[y]:{}},i=function(e){return d(e,y)}}e.exports={set:o,get:r,has:i,enforce:function(e){return i(e)?r(e):o(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=r(t)).type!==e)throw new g("Incompatible receiver, "+e+" required");return n}}}},4706:e=>{"use strict";var t="object"==typeof document&&document.all;e.exports="undefined"==typeof t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},6079:(e,t,n)=>{"use strict";var o=n(8084),r=n(4706),i=/#|\.prototype\./,s=function(e,t){var n=l[a(e)];return n===d||n!==c&&(r(t)?o(t):!!t)},a=s.normalize=function(e){return String(e).replace(i,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",d=s.POLYFILL="P";e.exports=s},3192:e=>{"use strict";e.exports=function(e){return null===e||void 0===e}},6821:(e,t,n)=>{"use strict";var o=n(4706);e.exports=function(e){return"object"==typeof e?null!==e:o(e)}},7592:e=>{"use strict";e.exports=!1},7970:(e,t,n)=>{"use strict";var o=n(3542),r=n(4706),i=n(6864),s=n(4111),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=o("Symbol");return r(t)&&i(t.prototype,a(e))}},1591:(e,t,n)=>{"use strict";var o=n(8249);e.exports=function(e){return o(e.length)}},4416:(e,t,n)=>{"use strict";var o=n(7707),r=n(8084),i=n(4706),s=n(6164),a=n(9519),l=n(2345).CONFIGURABLE,c=n(5167),d=n(2428),u=d.enforce,h=d.get,p=String,f=Object.defineProperty,g=o("".slice),m=o("".replace),v=o([].join),y=a&&!r((function(){return 8!==f((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=e.exports=function(e,t,n){"Symbol("===g(p(t),0,7)&&(t="["+m(p(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!s(e,"name")||l&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),y&&n&&s(n,"arity")&&e.length!==n.arity&&f(e,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(r){}var o=u(e);return s(o,"source")||(o.source=v(b,"string"==typeof t?t:"")),e};Function.prototype.toString=w((function(){return i(this)&&h(this).source||c(this)}),"toString")},9344:e=>{"use strict";var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var o=+e;return(o>0?n:t)(o)}},6115:(e,t,n)=>{"use strict";var o,r=n(1608),i=n(8612),s=n(6672),a=n(3114),l=n(904),c=n(2760),d=n(4658),u="prototype",h="script",p=d("IE_PROTO"),f=function(){},g=function(e){return"<"+h+">"+e+"</"+h+">"},m=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{o=new ActiveXObject("htmlfile")}catch(t){}v="undefined"!=typeof document?document.domain&&o?m(o):function(){var e,t=c("iframe"),n="java"+h+":";return t.style.display="none",l.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(g("document.F=Object")),e.close(),e.F}():m(o);for(var e=s.length;e--;)delete v[u][s[e]];return v()};a[p]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f[u]=r(e),n=new f,f[u]=null,n[p]=e):n=v(),void 0===t?n:i.f(n,t)}},8612:(e,t,n)=>{"use strict";var o=n(9519),r=n(253),i=n(3572),s=n(1608),a=n(6774),l=n(1523);t.f=o&&!r?Object.defineProperties:function(e,t){s(e);for(var n,o=a(t),r=l(t),c=r.length,d=0;c>d;)i.f(e,n=r[d++],o[n]);return e}},3572:(e,t,n)=>{"use strict";var o=n(9519),r=n(9704),i=n(253),s=n(1608),a=n(3326),l=TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u="enumerable",h="configurable",p="writable";t.f=o?i?function(e,t,n){if(s(e),t=a(t),s(n),"function"===typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var o=d(e,t);o&&o[p]&&(e[t]=n.value,n={configurable:h in n?n[h]:o[h],enumerable:u in n?n[u]:o[u],writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(s(e),t=a(t),s(n),r)try{return c(e,t,n)}catch(o){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},5214:(e,t,n)=>{"use strict";var o=n(9519),r=n(4850),i=n(4022),s=n(6369),a=n(6774),l=n(3326),c=n(6164),d=n(9704),u=Object.getOwnPropertyDescriptor;t.f=o?u:function(e,t){if(e=a(e),t=l(t),d)try{return u(e,t)}catch(n){}if(c(e,t))return s(!r(i.f,e,t),e[t])}},7251:(e,t,n)=>{"use strict";var o=n(4061),r=n(6672).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,r)}},6842:(e,t)=>{"use strict";t.f=Object.getOwnPropertySymbols},6864:(e,t,n)=>{"use strict";var o=n(7707);e.exports=o({}.isPrototypeOf)},4061:(e,t,n)=>{"use strict";var o=n(7707),r=n(6164),i=n(6774),s=n(972).indexOf,a=n(3114),l=o([].push);e.exports=function(e,t){var n,o=i(e),c=0,d=[];for(n in o)!r(a,n)&&r(o,n)&&l(d,n);for(;t.length>c;)r(o,n=t[c++])&&(~s(d,n)||l(d,n));return d}},1523:(e,t,n)=>{"use strict";var o=n(4061),r=n(6672);e.exports=Object.keys||function(e){return o(e,r)}},4022:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,r=o&&!n.call({1:2},1);t.f=r?function(e){var t=o(this,e);return!!t&&t.enumerable}:n},2509:(e,t,n)=>{"use strict";var o=n(4850),r=n(4706),i=n(6821),s=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&r(n=e.toString)&&!i(a=o(n,e)))return a;if(r(n=e.valueOf)&&!i(a=o(n,e)))return a;if("string"!==t&&r(n=e.toString)&&!i(a=o(n,e)))return a;throw new s("Can't convert object to primitive value")}},2682:(e,t,n)=>{"use strict";var o=n(3542),r=n(7707),i=n(7251),s=n(6842),a=n(1608),l=r([].concat);e.exports=o("Reflect","ownKeys")||function(e){var t=i.f(a(e)),n=s.f;return n?l(t,n(e)):t}},1107:(e,t,n)=>{"use strict";var o=n(4850),r=n(1608),i=n(4706),s=n(5687),a=n(1180),l=TypeError;e.exports=function(e,t){var n=e.exec;if(i(n)){var c=o(n,e,t);return null!==c&&r(c),c}if("RegExp"===s(e))return o(a,e,t);throw new l("RegExp#exec called on incompatible receiver")}},1180:(e,t,n)=>{"use strict";var o=n(4850),r=n(7707),i=n(4776),s=n(9550),a=n(3198),l=n(816),c=n(6115),d=n(2428).get,u=n(3118),h=n(9547),p=l("native-string-replace",String.prototype.replace),f=RegExp.prototype.exec,g=f,m=r("".charAt),v=r("".indexOf),y=r("".replace),b=r("".slice),w=function(){var e=/a/,t=/b*/g;return o(f,e,"a"),o(f,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),x=a.BROKEN_CARET,S=void 0!==/()??/.exec("")[1];(w||S||x||u||h)&&(g=function(e){var t,n,r,a,l,u,h,_=this,k=d(_),C=i(e),E=k.raw;if(E)return E.lastIndex=_.lastIndex,t=o(g,E,C),_.lastIndex=E.lastIndex,t;var I=k.groups,T=x&&_.sticky,P=o(s,_),A=_.source,M=0,j=C;if(T&&(P=y(P,"y",""),-1===v(P,"g")&&(P+="g"),j=b(C,_.lastIndex),_.lastIndex>0&&(!_.multiline||_.multiline&&"\n"!==m(C,_.lastIndex-1))&&(A="(?: "+A+")",j=" "+j,M++),n=new RegExp("^(?:"+A+")",P)),S&&(n=new RegExp("^"+A+"$(?!\\s)",P)),w&&(r=_.lastIndex),a=o(f,T?n:_,j),T?a?(a.input=b(a.input,M),a[0]=b(a[0],M),a.index=_.lastIndex,_.lastIndex+=a[0].length):_.lastIndex=0:w&&a&&(_.lastIndex=_.global?a.index+a[0].length:r),S&&a&&a.length>1&&o(p,a[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(a[l]=void 0)})),a&&I)for(a.groups=u=c(null),l=0;l<I.length;l++)u[(h=I[l])[0]]=a[h[1]];return a}),e.exports=g},9550:(e,t,n)=>{"use strict";var o=n(1608);e.exports=function(){var e=o(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},3198:(e,t,n)=>{"use strict";var o=n(8084),r=n(8986).RegExp,i=o((function(){var e=r("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),s=i||o((function(){return!r("a","y").sticky})),a=i||o((function(){var e=r("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:i}},3118:(e,t,n)=>{"use strict";var o=n(8084),r=n(8986).RegExp;e.exports=o((function(){var e=r(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},9547:(e,t,n)=>{"use strict";var o=n(8084),r=n(8986).RegExp;e.exports=o((function(){var e=r("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},327:(e,t,n)=>{"use strict";var o=n(3192),r=TypeError;e.exports=function(e){if(o(e))throw new r("Can't call method on "+e);return e}},4658:(e,t,n)=>{"use strict";var o=n(816),r=n(7899),i=o("keys");e.exports=function(e){return i[e]||(i[e]=r(e))}},5704:(e,t,n)=>{"use strict";var o=n(7592),r=n(8986),i=n(3036),s="__core-js_shared__",a=e.exports=r[s]||i(s,{});(a.versions||(a.versions=[])).push({version:"3.36.0",mode:o?"pure":"global",copyright:"\xa9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.0/LICENSE",source:"https://github.com/zloirock/core-js"})},816:(e,t,n)=>{"use strict";var o=n(5704);e.exports=function(e,t){return o[e]||(o[e]=t||{})}},7398:(e,t,n)=>{"use strict";var o=n(7707),r=n(466),i=n(4776),s=n(327),a=o("".charAt),l=o("".charCodeAt),c=o("".slice),d=function(e){return function(t,n){var o,d,u=i(s(t)),h=r(n),p=u.length;return h<0||h>=p?e?"":void 0:(o=l(u,h))<55296||o>56319||h+1===p||(d=l(u,h+1))<56320||d>57343?e?a(u,h):o:e?c(u,h,h+2):d-56320+(o-55296<<10)+65536}};e.exports={codeAt:d(!1),charAt:d(!0)}},4030:(e,t,n)=>{"use strict";var o=n(5083),r=n(8084),i=n(8986).String;e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},2201:(e,t,n)=>{"use strict";var o=n(466),r=Math.max,i=Math.min;e.exports=function(e,t){var n=o(e);return n<0?r(n+t,0):i(n,t)}},6774:(e,t,n)=>{"use strict";var o=n(1178),r=n(327);e.exports=function(e){return o(r(e))}},466:(e,t,n)=>{"use strict";var o=n(9344);e.exports=function(e){var t=+e;return t!==t||0===t?0:o(t)}},8249:(e,t,n)=>{"use strict";var o=n(466),r=Math.min;e.exports=function(e){var t=o(e);return t>0?r(t,9007199254740991):0}},2522:(e,t,n)=>{"use strict";var o=n(327),r=Object;e.exports=function(e){return r(o(e))}},9140:(e,t,n)=>{"use strict";var o=n(4850),r=n(6821),i=n(7970),s=n(7151),a=n(2509),l=n(4352),c=TypeError,d=l("toPrimitive");e.exports=function(e,t){if(!r(e)||i(e))return e;var n,l=s(e,d);if(l){if(void 0===t&&(t="default"),n=o(l,e,t),!r(n)||i(n))return n;throw new c("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},3326:(e,t,n)=>{"use strict";var o=n(9140),r=n(7970);e.exports=function(e){var t=o(e,"string");return r(t)?t:t+""}},1415:(e,t,n)=>{"use strict";var o={};o[n(4352)("toStringTag")]="z",e.exports="[object z]"===String(o)},4776:(e,t,n)=>{"use strict";var o=n(7972),r=String;e.exports=function(e){if("Symbol"===o(e))throw new TypeError("Cannot convert a Symbol value to a string");return r(e)}},5464:e=>{"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},7899:(e,t,n)=>{"use strict";var o=n(7707),r=0,i=Math.random(),s=o(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++r+i,36)}},4111:(e,t,n)=>{"use strict";var o=n(4030);e.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},253:(e,t,n)=>{"use strict";var o=n(9519),r=n(8084);e.exports=o&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},9279:(e,t,n)=>{"use strict";var o=n(8986),r=n(4706),i=o.WeakMap;e.exports=r(i)&&/native code/.test(String(i))},4352:(e,t,n)=>{"use strict";var o=n(8986),r=n(816),i=n(6164),s=n(7899),a=n(4030),l=n(4111),c=o.Symbol,d=r("wks"),u=l?c.for||c:c&&c.withoutSetter||s;e.exports=function(e){return i(d,e)||(d[e]=a&&i(c,e)?c[e]:u("Symbol."+e)),d[e]}},9494:(e,t,n)=>{"use strict";n(3348)("flatMap")},1001:(e,t,n)=>{"use strict";n(3348)("flat")},1054:(e,t,n)=>{"use strict";var o=n(6715),r=n(1180);o({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},483:(e,t,n)=>{"use strict";var o=n(6464),r=n(4850),i=n(7707),s=n(3589),a=n(8084),l=n(1608),c=n(4706),d=n(3192),u=n(466),h=n(8249),p=n(4776),f=n(327),g=n(880),m=n(7151),v=n(6207),y=n(1107),b=n(4352)("replace"),w=Math.max,x=Math.min,S=i([].concat),_=i([].push),k=i("".indexOf),C=i("".slice),E="$0"==="a".replace(/./,"$0"),I=!!/./[b]&&""===/./[b]("a","$0");s("replace",(function(e,t,n){var i=I?"$":"$0";return[function(e,n){var o=f(this),i=d(e)?void 0:m(e,b);return i?r(i,e,o,n):r(t,p(o),e,n)},function(e,r){var s=l(this),a=p(e);if("string"==typeof r&&-1===k(r,i)&&-1===k(r,"$<")){var d=n(t,s,a,r);if(d.done)return d.value}var f=c(r);f||(r=p(r));var m,b=s.global;b&&(m=s.unicode,s.lastIndex=0);for(var E,I=[];null!==(E=y(s,a))&&(_(I,E),b);){""===p(E[0])&&(s.lastIndex=g(a,h(s.lastIndex),m))}for(var T,P="",A=0,M=0;M<I.length;M++){for(var j,O=p((E=I[M])[0]),L=w(x(u(E.index),a.length),0),B=[],R=1;R<E.length;R++)_(B,void 0===(T=E[R])?T:String(T));var N=E.groups;if(f){var D=S([O],B,L,a);void 0!==N&&_(D,N),j=p(o(r,void 0,D))}else j=v(O,a,L,B,N,r);L>=A&&(P+=C(a,A,L)+j,A=L+O.length)}return P+C(a,A)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!E||I)},6125:e=>{"use strict";e.exports={rE:"5.0.5"}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(o,r){if(1&r&&(o=this(o)),8&r)return o;if("object"===typeof o&&o){if(4&r&&o.__esModule)return o;if(16&r&&"function"===typeof o.then)return o}var i=Object.create(null);n.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&o;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>o[e]));return s.default=()=>o,n.d(i,s),i}})(),n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,o)=>(n.f[o](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{453:"6ef6bdf7",726:"8c11f7b5"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="cookie-data:";n.l=(o,r,i,s)=>{if(e[o])e[o].push(r);else{var a,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+i){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+i),a.src=o),e[o]=[r];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var r=e[o];if(delete e[o],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="./",(()=>{n.b=document.baseURI||self.location.href;var e={792:0};n.f.j=(t,o)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var i=new Promise(((n,o)=>r=e[t]=[n,o]));o.push(r[2]=i);var s=n.p+n.u(t),a=new Error;n.l(s,(o=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,r[1](a)}}),"chunk-"+t,t)}};var t=(t,o)=>{var r,i,s=o[0],a=o[1],l=o[2],c=0;if(s.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(t&&t(o);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},o=self.webpackChunkcookie_data=self.webpackChunkcookie_data||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})(),n.nc=void 0,(()=>{"use strict";var e=n(5043),t=n.t(e,2),o=n(4391);n.p;var r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i=e.createContext&&e.createContext(r),s=["attr","size","title"];function a(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(t){return t&&t.map(((t,n)=>e.createElement(t.tag,d({key:n},t.attr),h(t.child))))}function p(t){return n=>e.createElement(f,l({attr:d({},t.attr)},n),h(t.child))}function f(t){var n=n=>{var o,{attr:r,size:i,title:c}=t,u=a(t,s),h=i||n.size||"1em";return n.className&&(o=n.className),t.className&&(o=(o?o+" ":"")+t.className),e.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,u,{className:o,style:d(d({color:t.color||n.color},n.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),c&&e.createElement("title",null,c),t.children)};return void 0!==i?e.createElement(i.Consumer,null,(e=>n(e))):n(r)}function g(e){return p({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function m(e){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M160 144h288M160 256h288M160 368h288"},child:[]},{tag:"circle",attr:{cx:"80",cy:"144",r:"16",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"80",cy:"256",r:"16",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"80",cy:"368",r:"16",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(e)}function v(e){return p({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.806 0a12 12 0 0 0-4.512.885A12 12 0 0 0 .858 12.978a12 12 0 0 0 9.303 10.724 12 12 0 0 0 13.021-5.656L12.817 12l9.244-7.65A12 12 0 0 0 12.806 0zM9.218 2.143c.34-.003.701.123 1.193.378.847.437 1.013 1.027.36 1.277-.487.187-2.457.177-2.932-.015-.526-.212-.38-.781.32-1.24.402-.263.72-.396 1.059-.4zm4.077 4.052a1.292 1.292 0 0 1 .022 0 1.292 1.292 0 0 1 1.292 1.291 1.292 1.292 0 0 1-1.292 1.292 1.292 1.292 0 0 1-1.292-1.292 1.292 1.292 0 0 1 1.27-1.291zm-6.259 3.8c1.033 0 1.788.434 1.788 1.028 0 .694-1.961 2.384-2.766 2.384-.365 0-.727-.166-.804-.368-.078-.203.117-.97.434-1.706.505-1.176.67-1.338 1.348-1.338zm8.637 9.187c.372 0 1.362 2.316 1.186 2.775-.201.524-1.046.467-1.564-.105-.676-.747-.404-2.67.378-2.67z"},child:[]}]})(e)}function y(e){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.125 48 48 141.125 48 256s93.125 208 208 208 208-93.125 208-208S370.875 48 256 48zm107 229h-86v86h-42v-86h-86v-42h86v-86h42v86h86v42z"},child:[]}]})(e)}function b(e){return p({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"},child:[]}]})(e)}function w(e){return p({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494zM429 481.2c-1.9-4.4-6.2-7.2-11-7.2h-35c-6.6 0-12 5.4-12 12v272c0 6.6 5.4 12 12 12h27.1c6.6 0 12-5.4 12-12V582.1l66.8 150.2a12 12 0 0 0 11 7.1H524c4.7 0 9-2.8 11-7.1l66.8-150.6V758c0 6.6 5.4 12 12 12H641c6.6 0 12-5.4 12-12V486c0-6.6-5.4-12-12-12h-34.7c-4.8 0-9.1 2.8-11 7.2l-83.1 191-83.2-191z"},child:[]}]})(e)}function x(e){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m18.85 10.39 1.06-1.06c.78-.78.78-2.05 0-2.83L18.5 5.09c-.78-.78-2.05-.78-2.83 0l-1.06 1.06 4.24 4.24zm-5.66-2.83L4 16.76V21h4.24l9.19-9.19-4.24-4.25zM19 17.5c0 2.19-2.54 3.5-5 3.5-.55 0-1-.45-1-1s.45-1 1-1c1.54 0 3-.73 3-1.5 0-.47-.48-.87-1.23-1.2l1.48-1.48c1.07.63 1.75 1.47 1.75 2.68zM4.58 13.35C3.61 12.79 3 12.06 3 11c0-1.8 1.89-2.63 3.56-3.36C7.59 7.18 9 6.56 9 6c0-.41-.78-1-2-1-1.26 0-1.8.61-1.83.64-.35.41-.98.46-1.4.12a.992.992 0 0 1-.15-1.38C3.73 4.24 4.76 3 7 3s4 1.32 4 3c0 1.87-1.93 2.72-3.64 3.47C6.42 9.88 5 10.5 5 11c0 .31.43.6 1.07.86l-1.49 1.49z"},child:[]}]})(e)}function S(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];throw new Error("number"===typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var _={};function k(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:_}var C=Object.assign,E=Object.getOwnPropertyDescriptor,I=Object.defineProperty,T=Object.prototype,P=[];Object.freeze(P);var A={};Object.freeze(A);var M="undefined"!==typeof Proxy,j=Object.toString();function O(){M||S("Proxy not available")}function L(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var B=function(){};function R(e){return"function"===typeof e}function N(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function D(e){return null!==e&&"object"===typeof e}function z(e){if(!D(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"===typeof n&&n.toString()===j}function F(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function U(e,t,n){I(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function H(e,t,n){I(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function V(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return D(e)&&!0===e[n]}}function W(e){return e instanceof Map}function K(e){return e instanceof Set}var G="undefined"!==typeof Object.getOwnPropertySymbols;var q="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:G?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function Y(e){return null===e?null:"object"===typeof e?""+e:e}function X(e,t){return T.hasOwnProperty.call(e,t)}var $=Object.getOwnPropertyDescriptors||function(e){var t={};return q(e).forEach((function(n){t[n]=E(e,n)})),t};function Z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ie(o.key),o)}}function Q(e,t,n){return t&&Z(e.prototype,t),n&&Z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},J.apply(this,arguments)}function ee(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,te(e,t)}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function re(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ie(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var se=Symbol("mobx-stored-annotations");function ae(e){return Object.assign((function(t,n){if(ce(n))return e.decorate_20223_(t,n);le(t,n,e)}),e)}function le(e,t,n){X(e,se)||U(e,se,J({},e[se])),function(e){return e.annotationType_===ve}(n)||(e[se][t]=n)}function ce(e){return"object"==typeof e&&"string"==typeof e.kind}var de=Symbol("mobx administration"),ue=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=mt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return Ut(this)},t.reportChanged=function(){zt(),Ht(this),Ft()},t.toString=function(){return this.name_},e}(),he=V("Atom",ue);function pe(e,t,n){void 0===t&&(t=B),void 0===n&&(n=B);var o,r=new ue(e);return t!==B&&pn(dn,r,t,o),n!==B&&hn(r,n),r}var fe={identity:function(e,t){return e===t},structural:function(e,t){return No(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e===1/t:e!==e&&t!==t},shallow:function(e,t){return No(e,t,1)}};function ge(e,t,n){return Pn(e)?e:Array.isArray(e)?et.array(e,{name:n}):z(e)?et.object(e,void 0,{name:n}):W(e)?et.map(e,{name:n}):K(e)?et.set(e,{name:n}):"function"!==typeof e||sn(e)||In(e)?e:F(e)?Cn(e):rn(n,e)}function me(e){return e}var ve="override";function ye(e,t){return{annotationType_:e,options_:t,make_:be,extend_:we,decorate_20223_:xe}}function be(e,t,n,o){var r;if(null!=(r=this.options_)&&r.bound)return null===this.extend_(e,t,n,!1)?0:1;if(o===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(sn(n.value))return 1;var i=Se(e,this,t,n,!1);return I(o,t,i),2}function we(e,t,n,o){var r=Se(e,this,t,n);return e.defineProperty_(t,r,o)}function xe(e,t){var n=t.kind,o=t.name,r=t.addInitializer,i=this;if("field"!=n){var s;if("method"==n)return sn(e)||(e=function(e){var t,n,r,s;return dt(null!=(t=null==(n=i.options_)?void 0:n.name)?t:o.toString(),e,null!=(r=null==(s=i.options_)?void 0:s.autoAction)&&r)}(e)),null!=(s=this.options_)&&s.bound&&r((function(){var e=this,t=e[o].bind(e);t.isMobxAction=!0,e[o]=t})),e;S("Cannot apply '"+i.annotationType_+"' to '"+String(o)+"' (kind: "+n+"):\n'"+i.annotationType_+"' can only be used on properties with a function value.")}else r((function(){le(this,o,i)}))}function Se(e,t,n,o,r){var i,s,a,l,c,d,u;void 0===r&&(r=Bt.safeDescriptors),function(e,t,n,o){t.annotationType_,o.value}(0,t,0,o);var h,p=o.value;null!=(i=t.options_)&&i.bound&&(p=p.bind(null!=(h=e.proxy_)?h:e.target_));return{value:dt(null!=(s=null==(a=t.options_)?void 0:a.name)?s:n.toString(),p,null!=(l=null==(c=t.options_)?void 0:c.autoAction)&&l,null!=(d=t.options_)&&d.bound?null!=(u=e.proxy_)?u:e.target_:void 0),configurable:!r||e.isPlainObject_,enumerable:!1,writable:!r}}function _e(e,t){return{annotationType_:e,options_:t,make_:ke,extend_:Ce,decorate_20223_:Ee}}function ke(e,t,n,o){var r;if(o===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(r=this.options_)&&r.bound&&(!X(e.target_,t)||!In(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(In(n.value))return 1;var i=Ie(e,this,t,n,!1,!1);return I(o,t,i),2}function Ce(e,t,n,o){var r,i=Ie(e,this,t,n,null==(r=this.options_)?void 0:r.bound);return e.defineProperty_(t,i,o)}function Ee(e,t){var n;var o=t.name,r=t.addInitializer;return In(e)||(e=Cn(e)),null!=(n=this.options_)&&n.bound&&r((function(){var e=this,t=e[o].bind(e);t.isMobXFlow=!0,e[o]=t})),e}function Ie(e,t,n,o,r,i){void 0===i&&(i=Bt.safeDescriptors),function(e,t,n,o){t.annotationType_,o.value}(0,t,0,o);var s,a=o.value;(In(a)||(a=Cn(a)),r)&&((a=a.bind(null!=(s=e.proxy_)?s:e.target_)).isMobXFlow=!0);return{value:a,configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function Te(e,t){return{annotationType_:e,options_:t,make_:Pe,extend_:Ae,decorate_20223_:Me}}function Pe(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Ae(e,t,n,o){return function(e,t,n,o){t.annotationType_,o.get;0}(0,this,0,n),e.defineComputedProperty_(t,J({},this.options_,{get:n.get,set:n.set}),o)}function Me(e,t){var n=this,o=t.name;return(0,t.addInitializer)((function(){var t=go(this)[de],r=J({},n.options_,{get:e,context:this});r.name||(r.name="ObservableObject."+o.toString()),t.values_.set(o,new yt(r))})),function(){return this[de].getObservablePropValue_(o)}}function je(e,t){return{annotationType_:e,options_:t,make_:Oe,extend_:Le,decorate_20223_:Be}}function Oe(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Le(e,t,n,o){var r,i;return function(e,t,n,o){t.annotationType_;0}(0,this),e.defineObservableProperty_(t,n.value,null!=(r=null==(i=this.options_)?void 0:i.enhancer)?r:ge,o)}function Be(e,t){var n=this,o=t.kind,r=t.name,i=new WeakSet;function s(e,t){var o,s,a=go(e)[de],l=new gt(t,null!=(o=null==(s=n.options_)?void 0:s.enhancer)?o:ge,"ObservableObject."+r.toString(),!1);a.values_.set(r,l),i.add(e)}if("accessor"==o)return{get:function(){return i.has(this)||s(this,e.get.call(this)),this[de].getObservablePropValue_(r)},set:function(e){return i.has(this)||s(this,e),this[de].setObservablePropValue_(r,e)},init:function(e){return i.has(this)||s(this,e),e}}}var Re="true",Ne=De();function De(e){return{annotationType_:Re,options_:e,make_:ze,extend_:Fe,decorate_20223_:Ue}}function ze(e,t,n,o){var r,i,s,a;if(n.get)return rt.make_(e,t,n,o);if(n.set){var l=dt(t.toString(),n.set);return o===e.target_?null===e.defineProperty_(t,{configurable:!Bt.safeDescriptors||e.isPlainObject_,set:l})?0:2:(I(o,t,{configurable:!0,set:l}),2)}if(o!==e.target_&&"function"===typeof n.value)return F(n.value)?(null!=(a=this.options_)&&a.autoBind?Cn.bound:Cn).make_(e,t,n,o):(null!=(s=this.options_)&&s.autoBind?rn.bound:rn).make_(e,t,n,o);var c,d=!1===(null==(r=this.options_)?void 0:r.deep)?et.ref:et;"function"===typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(c=e.proxy_)?c:e.target_));return d.make_(e,t,n,o)}function Fe(e,t,n,o){var r,i,s;if(n.get)return rt.extend_(e,t,n,o);if(n.set)return e.defineProperty_(t,{configurable:!Bt.safeDescriptors||e.isPlainObject_,set:dt(t.toString(),n.set)},o);"function"===typeof n.value&&null!=(r=this.options_)&&r.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(i=this.options_)?void 0:i.deep)?et.ref:et).extend_(e,t,n,o)}function Ue(e,t){S("'"+this.annotationType_+"' cannot be used as a decorator")}var He={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Ve(e){return e||He}Object.freeze(He);var We=je("observable"),Ke=je("observable.ref",{enhancer:me}),Ge=je("observable.shallow",{enhancer:function(e,t,n){return void 0===e||null===e||yo(e)||eo(e)||ao(e)||uo(e)?e:Array.isArray(e)?et.array(e,{name:n,deep:!1}):z(e)?et.object(e,void 0,{name:n,deep:!1}):W(e)?et.map(e,{name:n,deep:!1}):K(e)?et.set(e,{name:n,deep:!1}):void 0}}),qe=je("observable.struct",{enhancer:function(e,t){return No(e,t)?t:e}}),Ye=ae(We);function Xe(e){return!0===e.deep?ge:!1===e.deep?me:function(e){var t,n;return e&&null!=(t=null==(n=e.options_)?void 0:n.enhancer)?t:ge}(e.defaultDecorator)}function $e(e,t,n){return ce(t)?We.decorate_20223_(e,t):N(t)?void le(e,t,We):Pn(e)?e:z(e)?et.object(e,t,n):Array.isArray(e)?et.array(e,t):W(e)?et.map(e,t):K(e)?et.set(e,t):"object"===typeof e&&null!==e?e:et.box(e,t)}C($e,Ye);var Ze,Qe,Je={box:function(e,t){var n=Ve(t);return new gt(e,Xe(n),n.name,!0,n.equals)},array:function(e,t){var n=Ve(t);return(!1===Bt.useProxies||!1===n.proxy?Mo:Kn)(e,Xe(n),n.name)},map:function(e,t){var n=Ve(t);return new so(e,Xe(n),n.name)},set:function(e,t){var n=Ve(t);return new co(e,Xe(n),n.name)},object:function(e,t,n){return Bo((function(){return yn(!1===Bt.useProxies||!1===(null==n?void 0:n.proxy)?go({},n):function(e,t){var n,o;return O(),e=go(e,t),null!=(o=(n=e[de]).proxy_)?o:n.proxy_=new Proxy(e,jn)}({},n),e,t)}))},ref:ae(Ke),shallow:ae(Ge),deep:Ye,struct:ae(qe)},et=C($e,Je),tt="computed",nt=Te(tt),ot=Te("computed.struct",{equals:fe.structural}),rt=function(e,t){if(ce(t))return nt.decorate_20223_(e,t);if(N(t))return le(e,t,nt);if(z(e))return ae(Te(tt,e));var n=z(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new yt(n)};Object.assign(rt,nt),rt.struct=ae(ot);var it,st=0,at=1,lt=null!=(Ze=null==(Qe=E((function(){}),"name"))?void 0:Qe.configurable)&&Ze,ct={value:"action",configurable:!0,writable:!1,enumerable:!1};function dt(e,t,n,o){function r(){return ut(e,n,t,o||this,arguments)}return void 0===n&&(n=!1),r.isMobxAction=!0,r.toString=function(){return t.toString()},lt&&(ct.value=e,I(r,"name",ct)),r}function ut(e,t,n,o,r){var i=function(e,t,n,o){var r=!1,i=0;0;var s=Bt.trackingDerivation,a=!t||!s;zt();var l=Bt.allowStateChanges;a&&(It(),l=ht(!0));var c=Pt(!0),d={runAsAction_:a,prevDerivation_:s,prevAllowStateChanges_:l,prevAllowStateReads_:c,notifySpy_:r,startTime_:i,actionId_:at++,parentActionId_:st};return st=d.actionId_,d}(0,t);try{return n.apply(o,r)}catch(s){throw i.error_=s,s}finally{!function(e){st!==e.actionId_&&S(30);st=e.parentActionId_,void 0!==e.error_&&(Bt.suppressReactionErrors=!0);pt(e.prevAllowStateChanges_),At(e.prevAllowStateReads_),Ft(),e.runAsAction_&&Tt(e.prevDerivation_);0;Bt.suppressReactionErrors=!1}(i)}}function ht(e){var t=Bt.allowStateChanges;return Bt.allowStateChanges=e,t}function pt(e){Bt.allowStateChanges=e}it=Symbol.toPrimitive;var ft,gt=function(e){function t(t,n,o,r,i){var s;return void 0===o&&(o="ObservableValue"),void 0===r&&(r=!0),void 0===i&&(i=fe.default),(s=e.call(this,o)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=o,s.equals=i,s.value_=n(t,void 0,o),s}ee(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_;if((e=this.prepareNewValue_(e))!==Bt.UNCHANGED){0,this.setNewValue_(e)}},n.prepareNewValue_=function(e){if(_t(this),On(this)){var t=Bn(this,{object:this,type:Hn,newValue:e});if(!t)return Bt.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?Bt.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),Rn(this)&&Dn(this,{type:Hn,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return Ln(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:Hn,newValue:this.value_,oldValue:void 0}),Nn(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return Y(this.get())},n[it]=function(){return this.valueOf()},t}(ue);ft=Symbol.toPrimitive;var mt,vt,yt=function(){function e(e){this.dependenciesState_=mt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=mt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new wt(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=vt.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||S(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=dt("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?fe.structural:fe.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==mt.UP_TO_DATE_)return;e.lowestObserverState_=mt.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===mt.UP_TO_DATE_&&(e.dependenciesState_=mt.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&S(32,this.name_,this.derivation),0!==Bt.inBatch||0!==this.observers_.size||this.keepAlive_){if(Ut(this),St(this)){var e=Bt.trackingContext;this.keepAlive_&&!e&&(Bt.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===mt.STALE_)return;e.lowestObserverState_=mt.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===mt.POSSIBLY_STALE_?t.dependenciesState_=mt.STALE_:t.dependenciesState_===mt.UP_TO_DATE_&&(e.lowestObserverState_=mt.UP_TO_DATE_)}))}(this),Bt.trackingContext=e}}else St(this)&&(this.warnAboutUntrackedRead_(),zt(),this.value_=this.computeValue_(!1),Ft());var t=this.value_;if(xt(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&S(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else S(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===mt.NOT_TRACKING_,n=this.computeValue_(!0),o=t||xt(e)||xt(n)||!this.equals_(e,n);return o&&(this.value_=n),o},t.computeValue_=function(e){this.isComputing_=!0;var t,n=ht(!1);if(e)t=kt(this,this.derivation,this.scope_);else if(!0===Bt.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(o){t=new wt(o)}return pt(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(Ct(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,o=!0,r=void 0;return an((function(){var i=n.get();if(!o||t){var s=It();e({observableKind:"computed",debugObjectName:n.name_,type:Hn,object:n,newValue:i,oldValue:r}),Tt(s)}o=!1,r=i}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return Y(this.get())},t[ft]=function(){return this.valueOf()},e}(),bt=V("ComputedValue",yt);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(mt||(mt={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(vt||(vt={}));var wt=function(e){this.cause=void 0,this.cause=e};function xt(e){return e instanceof wt}function St(e){switch(e.dependenciesState_){case mt.UP_TO_DATE_:return!1;case mt.NOT_TRACKING_:case mt.STALE_:return!0;case mt.POSSIBLY_STALE_:for(var t=Pt(!0),n=It(),o=e.observing_,r=o.length,i=0;i<r;i++){var s=o[i];if(bt(s)){if(Bt.disableErrorBoundaries)s.get();else try{s.get()}catch(a){return Tt(n),At(t),!0}if(e.dependenciesState_===mt.STALE_)return Tt(n),At(t),!0}}return Mt(e),Tt(n),At(t),!1}}function _t(e){}function kt(e,t,n){var o=Pt(!0);Mt(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++Bt.runId;var r,i=Bt.trackingDerivation;if(Bt.trackingDerivation=e,Bt.inBatch++,!0===Bt.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(s){r=new wt(s)}return Bt.inBatch--,Bt.trackingDerivation=i,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,o=mt.UP_TO_DATE_,r=0,i=e.unboundDepsCount_,s=0;s<i;s++){var a=n[s];0===a.diffValue_&&(a.diffValue_=1,r!==s&&(n[r]=a),r++),a.dependenciesState_>o&&(o=a.dependenciesState_)}n.length=r,e.newObserving_=null,i=t.length;for(;i--;){var l=t[i];0===l.diffValue_&&Nt(l,e),l.diffValue_=0}for(;r--;){var c=n[r];1===c.diffValue_&&(c.diffValue_=0,Rt(c,e))}o!==mt.UP_TO_DATE_&&(e.dependenciesState_=o,e.onBecomeStale_())}(e),At(o),r}function Ct(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)Nt(t[n],e);e.dependenciesState_=mt.NOT_TRACKING_}function Et(e){var t=It();try{return e()}finally{Tt(t)}}function It(){var e=Bt.trackingDerivation;return Bt.trackingDerivation=null,e}function Tt(e){Bt.trackingDerivation=e}function Pt(e){var t=Bt.allowStateReads;return Bt.allowStateReads=e,t}function At(e){Bt.allowStateReads=e}function Mt(e){if(e.dependenciesState_!==mt.UP_TO_DATE_){e.dependenciesState_=mt.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=mt.UP_TO_DATE_}}var jt=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Ot=!0,Lt=!1,Bt=function(){var e=k();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Ot=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new jt).version&&(Ot=!1),Ot?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new jt):(setTimeout((function(){Lt||S(35)}),1),new jt)}();function Rt(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function Nt(e,t){e.observers_.delete(t),0===e.observers_.size&&Dt(e)}function Dt(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,Bt.pendingUnobservations.push(e))}function zt(){Bt.inBatch++}function Ft(){if(0===--Bt.inBatch){Gt();for(var e=Bt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof yt&&n.suspend_())}Bt.pendingUnobservations=[]}}function Ut(e){var t=Bt.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&Bt.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&Bt.inBatch>0&&Dt(e),!1)}function Ht(e){e.lowestObserverState_!==mt.STALE_&&(e.lowestObserverState_=mt.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===mt.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=mt.STALE_})))}var Vt=function(){function e(e,t,n,o){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=mt.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=vt.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=o}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Bt.pendingReactions.push(this),Gt())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){zt(),this.isScheduled_=!1;var e=Bt.trackingContext;if(Bt.trackingContext=this,St(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(t){this.reportExceptionInDerivation_(t)}}Bt.trackingContext=e,Ft()}},t.track=function(e){if(!this.isDisposed_){zt();0,this.isRunning_=!0;var t=Bt.trackingContext;Bt.trackingContext=this;var n=kt(this,e,void 0);Bt.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Ct(this),xt(n)&&this.reportExceptionInDerivation_(n.cause),Ft()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(Bt.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";Bt.suppressReactionErrors||console.error(n,e),Bt.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(zt(),Ct(this),Ft()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",n)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[de]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1)},e}();var Wt=100,Kt=function(e){return e()};function Gt(){Bt.inBatch>0||Bt.isRunningReactions||Kt(qt)}function qt(){Bt.isRunningReactions=!0;for(var e=Bt.pendingReactions,t=0;e.length>0;){++t===Wt&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),o=0,r=n.length;o<r;o++)n[o].runReaction_()}Bt.isRunningReactions=!1}var Yt=V("Reaction",Vt);var Xt="action",$t="autoAction",Zt="<unnamed action>",Qt=ye(Xt),Jt=ye("action.bound",{bound:!0}),en=ye($t,{autoAction:!0}),tn=ye("autoAction.bound",{autoAction:!0,bound:!0});function nn(e){return function(t,n){return R(t)?dt(t.name||Zt,t,e):R(n)?dt(t,n,e):ce(n)?(e?en:Qt).decorate_20223_(t,n):N(n)?le(t,n,e?en:Qt):N(t)?ae(ye(e?$t:Xt,{name:t,autoAction:e})):void 0}}var on=nn(!1);Object.assign(on,Qt);var rn=nn(!0);function sn(e){return R(e)&&!0===e.isMobxAction}function an(e,t){var n,o,r,i,s;void 0===t&&(t=A);var a,l=null!=(n=null==(o=t)?void 0:o.name)?n:"Autorun";if(!t.scheduler&&!t.delay)a=new Vt(l,(function(){this.track(u)}),t.onError,t.requiresObservable);else{var c=cn(t),d=!1;a=new Vt(l,(function(){d||(d=!0,c((function(){d=!1,a.isDisposed_||a.track(u)})))}),t.onError,t.requiresObservable)}function u(){e(a)}return null!=(r=t)&&null!=(i=r.signal)&&i.aborted||a.schedule_(),a.getDisposer_(null==(s=t)?void 0:s.signal)}Object.assign(rn,en),on.bound=ae(Jt),rn.bound=ae(tn);var ln=function(e){return e()};function cn(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:ln}var dn="onBO",un="onBUO";function hn(e,t,n){return pn(un,e,t,n)}function pn(e,t,n,o){var r="function"===typeof o?jo(t,n):jo(t),i=R(o)?o:n,s=e+"L";return r[s]?r[s].add(i):r[s]=new Set([i]),function(){var e=r[s];e&&(e.delete(i),0===e.size&&delete r[s])}}var fn="never",gn="always",mn="observed";function vn(e){!0===e.isolateGlobalState&&function(){if((Bt.pendingReactions.length||Bt.inBatch||Bt.isRunningReactions)&&S(36),Lt=!0,Ot){var e=k();0===--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),Bt=new jt}}();var t=e.useProxies,n=e.enforceActions;if(void 0!==t&&(Bt.useProxies=t===gn||t!==fn&&"undefined"!==typeof Proxy),"ifavailable"===t&&(Bt.verifyProxies=!0),void 0!==n){var o=n===gn?gn:n===mn;Bt.enforceActions=o,Bt.allowStateChanges=!0!==o&&o!==gn}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(Bt[t]=!!e[t])})),Bt.allowStateReads=!Bt.observableRequiresReaction,e.reactionScheduler&&function(e){var t=Kt;Kt=function(n){return e((function(){return t(n)}))}}(e.reactionScheduler)}function yn(e,t,n,o){var r=$(t);return Bo((function(){var t=go(e,o)[de];q(r).forEach((function(e){t.extend_(e,r[e],!n||(!(e in n)||n[e]))}))})),e}function bn(e,t){return wn(jo(e,t))}function wn(e){var t,n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=(t=e.observing_,Array.from(new Set(t))).map(wn)),n}var xn=0;function Sn(){this.message="FLOW_CANCELLED"}Sn.prototype=Object.create(Error.prototype);var _n=_e("flow"),kn=_e("flow.bound",{bound:!0}),Cn=Object.assign((function(e,t){if(ce(t))return _n.decorate_20223_(e,t);if(N(t))return le(e,t,_n);var n=e,o=n.name||"<unnamed flow>",r=function(){var e,t=arguments,r=++xn,i=on(o+" - runid: "+r+" - init",n).apply(this,t),s=void 0,a=new Promise((function(t,n){var a=0;function l(e){var t;s=void 0;try{t=on(o+" - runid: "+r+" - yield "+a++,i.next).call(i,e)}catch(l){return n(l)}d(t)}function c(e){var t;s=void 0;try{t=on(o+" - runid: "+r+" - yield "+a++,i.throw).call(i,e)}catch(l){return n(l)}d(t)}function d(e){if(!R(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(l,c);e.then(d,n)}e=n,l(void 0)}));return a.cancel=on(o+" - runid: "+r+" - cancel",(function(){try{s&&En(s);var t=i.return(void 0),n=Promise.resolve(t.value);n.then(B,B),En(n),e(new Sn)}catch(o){e(o)}})),a};return r.isMobXFlow=!0,r}),_n);function En(e){R(e.cancel)&&e.cancel()}function In(e){return!0===(null==e?void 0:e.isMobXFlow)}function Tn(e,t){return!!e&&(void 0!==t?!!yo(e)&&e[de].values_.has(t):yo(e)||!!e[de]||he(e)||Yt(e)||bt(e))}function Pn(e){return Tn(e)}function An(e,t){void 0===t&&(t=void 0),zt();try{return e.apply(t)}finally{Ft()}}function Mn(e){return e[de]}Cn.bound=ae(kn);var jn={has:function(e,t){return Mn(e).has_(t)},get:function(e,t){return Mn(e).get_(t)},set:function(e,t,n){var o;return!!N(t)&&(null==(o=Mn(e).set_(t,n,!0))||o)},deleteProperty:function(e,t){var n;return!!N(t)&&(null==(n=Mn(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var o;return null==(o=Mn(e).defineProperty_(t,n))||o},ownKeys:function(e){return Mn(e).ownKeys_()},preventExtensions:function(e){S(13)}};function On(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function Ln(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),L((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Bn(e,t){var n=It();try{for(var o=[].concat(e.interceptors_||[]),r=0,i=o.length;r<i&&((t=o[r](t))&&!t.type&&S(14),t);r++);return t}finally{Tt(n)}}function Rn(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function Nn(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),L((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Dn(e,t){var n=It(),o=e.changeListeners_;if(o){for(var r=0,i=(o=o.slice()).length;r<i;r++)o[r](t);Tt(n)}}var zn=Symbol("mobx-keys");function Fn(e,t,n){return z(e)?yn(e,e,t,n):(Bo((function(){var o=go(e,n)[de];if(!e[zn]){var r=Object.getPrototypeOf(e),i=new Set([].concat(q(e),q(r)));i.delete("constructor"),i.delete(de),U(r,zn,i)}e[zn].forEach((function(e){return o.make_(e,!t||(!(e in t)||t[e]))}))})),e)}var Un="splice",Hn="update",Vn={get:function(e,t){var n=e[de];return t===de?n:"length"===t?n.getArrayLength_():"string"!==typeof t||isNaN(t)?X(Gn,t)?Gn[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var o=e[de];return"length"===t&&o.setArrayLength_(n),"symbol"===typeof t||isNaN(t)?e[t]=n:o.set_(parseInt(t),n),!0},preventExtensions:function(){S(15)}},Wn=function(){function e(e,t,n,o){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=o,this.atom_=new ue(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return Ln(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Nn(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!==typeof e||isNaN(e)||e<0)&&S("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),o=0;o<e-t;o++)n[o]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&S(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&Ao(e+t+1)},t.spliceWithArray_=function(e,t,n){var o=this;this.atom_;var r=this.values_.length;if(void 0===e?e=0:e>r?e=r:e<0&&(e=Math.max(0,r+e)),t=1===arguments.length?r-e:void 0===t||null===t?0:Math.max(0,Math.min(t,r-e)),void 0===n&&(n=P),On(this)){var i=Bn(this,{object:this.proxy_,type:Un,index:e,removedCount:t,added:n});if(!i)return P;t=i.removedCount,n=i.added}if(n=0===n.length?n:n.map((function(e){return o.enhancer_(e,void 0)})),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(r,s)}var a=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,a),this.dehanceValues_(a)},t.spliceItemsIntoValues_=function(e,t,n){var o;if(n.length<1e4)return(o=this.values_).splice.apply(o,[e,t].concat(n));var r=this.values_.slice(e,e+t),i=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var a=0;a<i.length;a++)this.values_[e+n.length+a]=i[a];return r},t.notifyArrayChildUpdate_=function(e,t,n){var o=!this.owned_&&!1,r=Rn(this),i=r||o?{observableKind:"array",object:this.proxy_,type:Hn,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),r&&Dn(this,i)},t.notifyArraySplice_=function(e,t,n){var o=!this.owned_&&!1,r=Rn(this),i=r||o?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Un,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),r&&Dn(this,i)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&S(17,e,n.length),e<n.length){this.atom_;var o=n[e];if(On(this)){var r=Bn(this,{type:Hn,object:this.proxy_,index:e,newValue:t});if(!r)return;t=r.newValue}(t=this.enhancer_(t,o))!==o&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,o))}else{for(var i=new Array(e+1-n.length),s=0;s<i.length-1;s++)i[s]=void 0;i[i.length-1]=t,this.spliceWithArray_(n.length,0,i)}},e}();function Kn(e,t,n,o){return void 0===n&&(n="ObservableArray"),void 0===o&&(o=!1),O(),Bo((function(){var r=new Wn(n,t,o,!1);H(r.values_,de,r);var i=new Proxy(r.values_,Vn);return r.proxy_=i,e&&e.length&&r.spliceWithArray_(0,0,e),i}))}var Gn={clear:function(){return this.splice(0)},replace:function(e){var t=this[de];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];var i=this[de];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray_(e);case 2:return i.spliceWithArray_(e,t)}return i.spliceWithArray_(e,t,o)},spliceWithArray:function(e,t,n){return this[de].spliceWithArray_(e,t,n)},push:function(){for(var e=this[de],t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[de].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[de],t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return Bt.trackingDerivation&&S(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Bt.trackingDerivation&&S(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[de],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function qn(e,t){"function"===typeof Array.prototype[e]&&(Gn[e]=t(e))}function Yn(e){return function(){var t=this[de];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function Xn(e){return function(t,n){var o=this,r=this[de];return r.atom_.reportObserved(),r.dehanceValues_(r.values_)[e]((function(e,r){return t.call(n,e,r,o)}))}}function $n(e){return function(){var t=this,n=this[de];n.atom_.reportObserved();var o=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(e,n,o){return r(e,n,o,t)},o[e].apply(o,arguments)}}qn("at",Yn),qn("concat",Yn),qn("flat",Yn),qn("includes",Yn),qn("indexOf",Yn),qn("join",Yn),qn("lastIndexOf",Yn),qn("slice",Yn),qn("toString",Yn),qn("toLocaleString",Yn),qn("toSorted",Yn),qn("toSpliced",Yn),qn("with",Yn),qn("every",Xn),qn("filter",Xn),qn("find",Xn),qn("findIndex",Xn),qn("findLast",Xn),qn("findLastIndex",Xn),qn("flatMap",Xn),qn("forEach",Xn),qn("map",Xn),qn("some",Xn),qn("toReversed",Xn),qn("reduce",$n),qn("reduceRight",$n);var Zn,Qn,Jn=V("ObservableArrayAdministration",Wn);function eo(e){return D(e)&&Jn(e[de])}var to={},no="add",oo="delete";Zn=Symbol.iterator,Qn=Symbol.toStringTag;var ro,io,so=function(){function e(e,t,n){var o=this;void 0===t&&(t=ge),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[de]=to,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,R(Map)||S(18),Bo((function(){o.keysAtom_=pe("ObservableMap.keys()"),o.data_=new Map,o.hasMap_=new Map,e&&o.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!Bt.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var o=n=new gt(this.has_(e),me,"ObservableMap.key?",!1);this.hasMap_.set(e,o),hn(o,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(On(this)){var o=Bn(this,{type:n?Hn:no,object:this,newValue:t,name:e});if(!o)return this;t=o.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,On(this))&&!Bn(this,{type:oo,object:this,name:e}))return!1;if(this.has_(e)){var n=Rn(this),o=n?{observableKind:"map",debugObjectName:this.name_,type:oo,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return An((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&Dn(this,o),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==Bt.UNCHANGED){var o=Rn(this),r=o?{observableKind:"map",debugObjectName:this.name_,type:Hn,object:this,oldValue:n.value_,name:e,newValue:t}:null;0,n.setNewValue_(t),o&&Dn(this,r)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,An((function(){var o,r=new gt(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,r),t=r.value_,null==(o=n.hasMap_.get(e))||o.setNewValue_(!0),n.keysAtom_.reportChanged()}));var o=Rn(this),r=o?{observableKind:"map",debugObjectName:this.name_,type:no,object:this,name:e,newValue:t}:null;o&&Dn(this,r)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return Fo({next:function(){var n=t.next(),o=n.done,r=n.value;return{done:o,value:o?void 0:e.get(r)}}})},t.entries=function(){var e=this,t=this.keys();return Fo({next:function(){var n=t.next(),o=n.done,r=n.value;return{done:o,value:o?void 0:[r,e.get(r)]}}})},t[Zn]=function(){return this.entries()},t.forEach=function(e,t){for(var n,o=re(this);!(n=o()).done;){var r=n.value,i=r[0],s=r[1];e.call(t,s,i,this)}},t.merge=function(e){var t=this;return ao(e)&&(e=new Map(e)),An((function(){z(e)?function(e){var t=Object.keys(e);if(!G)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return T.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],o=e[1];return t.set(n,o)})):W(e)?(e.constructor!==Map&&S(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!==e&&void 0!==e&&S(20,e)})),this},t.clear=function(){var e=this;An((function(){Et((function(){for(var t,n=re(e.keys());!(t=n()).done;){var o=t.value;e.delete(o)}}))}))},t.replace=function(e){var t=this;return An((function(){for(var n,o=function(e){if(W(e)||ao(e))return e;if(Array.isArray(e))return new Map(e);if(z(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return S(21,e)}(e),r=new Map,i=!1,s=re(t.data_.keys());!(n=s()).done;){var a=n.value;if(!o.has(a))if(t.delete(a))i=!0;else{var l=t.data_.get(a);r.set(a,l)}}for(var c,d=re(o.entries());!(c=d()).done;){var u=c.value,h=u[0],p=u[1],f=t.data_.has(h);if(t.set(h,p),t.data_.has(h)){var g=t.data_.get(h);r.set(h,g),f||(i=!0)}}if(!i)if(t.data_.size!==r.size)t.keysAtom_.reportChanged();else for(var m=t.data_.keys(),v=r.keys(),y=m.next(),b=v.next();!y.done;){if(y.value!==b.value){t.keysAtom_.reportChanged();break}y=m.next(),b=v.next()}t.data_=r})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return Nn(this,e)},t.intercept_=function(e){return Ln(this,e)},Q(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Qn,get:function(){return"Map"}}]),e}(),ao=V("ObservableMap",so);var lo={};ro=Symbol.iterator,io=Symbol.toStringTag;var co=function(){function e(e,t,n){var o=this;void 0===t&&(t=ge),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[de]=lo,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,R(Set)||S(22),this.enhancer_=function(e,o){return t(e,o,n)},Bo((function(){o.atom_=pe(o.name_),e&&o.replace(e)}))}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;An((function(){Et((function(){for(var t,n=re(e.data_.values());!(t=n()).done;){var o=t.value;e.delete(o)}}))}))},t.forEach=function(e,t){for(var n,o=re(this);!(n=o()).done;){var r=n.value;e.call(t,r,r,this)}},t.add=function(e){var t=this;if((this.atom_,On(this))&&!Bn(this,{type:no,object:this,newValue:e}))return this;if(!this.has(e)){An((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=!1,o=Rn(this),r=o?{observableKind:"set",debugObjectName:this.name_,type:no,object:this,newValue:e}:null;n,o&&Dn(this,r)}return this},t.delete=function(e){var t=this;if(On(this)&&!Bn(this,{type:oo,object:this,oldValue:e}))return!1;if(this.has(e)){var n=Rn(this),o=n?{observableKind:"set",debugObjectName:this.name_,type:oo,object:this,oldValue:e}:null;return An((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&Dn(this,o),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Fo({next:function(){var o=e;return e+=1,o<n.length?{value:[t[o],n[o]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return Fo({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return uo(e)&&(e=new Set(e)),An((function(){Array.isArray(e)||K(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!==e&&void 0!==e&&S("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return Nn(this,e)},t.intercept_=function(e){return Ln(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[ro]=function(){return this.values()},Q(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:io,get:function(){return"Set"}}]),e}(),uo=V("ObservableSet",co),ho=Object.create(null),po="remove",fo=function(){function e(e,t,n,o){void 0===t&&(t=new Map),void 0===o&&(o=Ne),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=o,this.keysAtom_=new ue("ObservableObject.keys"),this.isPlainObject_=z(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof yt)return n.set(t),!0;if(On(this)){var o=Bn(this,{type:Hn,object:this.proxy_||this.target_,name:e,newValue:t});if(!o)return null;t=o.newValue}if((t=n.prepareNewValue_(t))!==Bt.UNCHANGED){var r=Rn(this),i=r?{type:Hn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;0,n.setNewValue_(t),r&&Dn(this,i)}return!0},t.get_=function(e){return Bt.trackingDerivation&&!X(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),X(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!Bt.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new gt(e in this.target_,me,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(wo(this,t,e),!(e in this.target_)){var n;if(null!=(n=this.target_[se])&&n[e])return;S(1,t.annotationType_,this.name_+"."+e.toString())}for(var o=this.target_;o&&o!==T;){var r=E(o,e);if(r){var i=t.make_(this,e,r,o);if(0===i)return;if(1===i)break}o=Object.getPrototypeOf(o)}bo(this,t,e)}},t.extend_=function(e,t,n,o){if(void 0===o&&(o=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,o);wo(this,n,e);var r=n.extend_(this,e,t,o);return r&&bo(this,n,e),r},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{zt();var o=this.delete_(e);if(!o)return o;if(On(this)){var r=Bn(this,{object:this.proxy_||this.target_,name:e,type:no,newValue:t.value});if(!r)return null;var i=r.newValue;t.value!==i&&(t=J({},t,{value:i}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else I(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{Ft()}return!0},t.defineObservableProperty_=function(e,t,n,o){void 0===o&&(o=!1),this.keysAtom_;try{zt();var r=this.delete_(e);if(!r)return r;if(On(this)){var i=Bn(this,{object:this.proxy_||this.target_,name:e,type:no,newValue:t});if(!i)return null;t=i.newValue}var s=vo(e),a={configurable:!Bt.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(o){if(!Reflect.defineProperty(this.target_,e,a))return!1}else I(this.target_,e,a);var l=new gt(t,n,"ObservableObject.key",!1);this.values_.set(e,l),this.notifyPropertyAddition_(e,l.value_)}finally{Ft()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{zt();var o=this.delete_(e);if(!o)return o;if(On(this))if(!Bn(this,{object:this.proxy_||this.target_,name:e,type:no,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var r=vo(e),i={configurable:!Bt.safeDescriptors||this.isPlainObject_,enumerable:!1,get:r.get,set:r.set};if(n){if(!Reflect.defineProperty(this.target_,e,i))return!1}else I(this.target_,e,i);this.values_.set(e,new yt(t)),this.notifyPropertyAddition_(e,void 0)}finally{Ft()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!X(this.target_,e))return!0;if(On(this)&&!Bn(this,{object:this.proxy_||this.target_,name:e,type:po}))return null;try{var n,o;zt();var r,i=Rn(this),s=this.values_.get(e),a=void 0;if(!s&&i)a=null==(r=E(this.target_,e))?void 0:r.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof gt&&(a=s.value_),Ht(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(o=n.get(e))||o.set(e in this.target_),i){var l={type:po,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:a,name:e};0,i&&Dn(this,l)}}finally{Ft()}return!0},t.observe_=function(e,t){return Nn(this,e)},t.intercept_=function(e){return Ln(this,e)},t.notifyPropertyAddition_=function(e,t){var n,o,r=Rn(this);if(r){var i=r?{type:no,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;0,r&&Dn(this,i)}null==(n=this.pendingKeys_)||null==(o=n.get(e))||o.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),q(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function go(e,t){var n;if(X(e,de))return e;var o=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",r=new fo(e,new Map,String(o),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:De(e):void 0}(t));return U(e,de,r),e}var mo=V("ObservableObjectAdministration",fo);function vo(e){return ho[e]||(ho[e]={get:function(){return this[de].getObservablePropValue_(e)},set:function(t){return this[de].setObservablePropValue_(e,t)}})}function yo(e){return!!D(e)&&mo(e[de])}function bo(e,t,n){var o;null==(o=e.target_[se])||delete o[n]}function wo(e,t,n){}var xo,So,_o=To(0),ko=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),Co=0,Eo=function(){};xo=Eo,So=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(xo.prototype,So):void 0!==xo.prototype.__proto__?xo.prototype.__proto__=So:xo.prototype=So;var Io=function(e,t,n){function o(t,n,o,r){var i;return void 0===o&&(o="ObservableArray"),void 0===r&&(r=!1),i=e.call(this)||this,Bo((function(){var e=new Wn(o,n,r,!0);e.proxy_=ne(i),H(ne(i),de,e),t&&t.length&&i.spliceWithArray(0,0,t),ko&&Object.defineProperty(ne(i),"0",_o)})),i}ee(o,e);var r=o.prototype;return r.concat=function(){this[de].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return eo(e)?e.slice():e})))},r[n]=function(){var e=this,t=0;return Fo({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},Q(o,[{key:"length",get:function(){return this[de].getArrayLength_()},set:function(e){this[de].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),o}(Eo,Symbol.toStringTag,Symbol.iterator);function To(e){return{enumerable:!1,configurable:!0,get:function(){return this[de].get_(e)},set:function(t){this[de].set_(e,t)}}}function Po(e){I(Io.prototype,""+e,To(e))}function Ao(e){if(e>Co){for(var t=Co;t<e+100;t++)Po(t);Co=e}}function Mo(e,t,n){return new Io(e,t,n)}function jo(e,t){if("object"===typeof e&&null!==e){if(eo(e))return void 0!==t&&S(23),e[de].atom_;if(uo(e))return e.atom_;if(ao(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||S(25,t,Lo(e)),n}if(yo(e)){if(!t)return S(26);var o=e[de].values_.get(t);return o||S(27,t,Lo(e)),o}if(he(e)||bt(e)||Yt(e))return e}else if(R(e)&&Yt(e[de]))return e[de];S(28)}function Oo(e,t){return e||S(29),void 0!==t?Oo(jo(e,t)):he(e)||bt(e)||Yt(e)||ao(e)||uo(e)?e:e[de]?e[de]:void S(24,e)}function Lo(e,t){var n;if(void 0!==t)n=jo(e,t);else{if(sn(e))return e.name;n=yo(e)||ao(e)||uo(e)?Oo(e):jo(e)}return n.name_}function Bo(e){var t=It(),n=ht(!0);zt();try{return e()}finally{Ft(),pt(n),Tt(t)}}Object.entries(Gn).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&U(Io.prototype,t,n)})),Ao(1e3);var Ro=T.toString;function No(e,t,n){return void 0===n&&(n=-1),Do(e,t,n)}function Do(e,t,n,o,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var i=typeof e;if("function"!==i&&"object"!==i&&"object"!=typeof t)return!1;var s=Ro.call(e);if(s!==Ro.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=zo(e),t=zo(t);var a="[object Array]"===s;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,c=t.constructor;if(l!==c&&!(R(l)&&l instanceof l&&R(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),r=r||[];for(var d=(o=o||[]).length;d--;)if(o[d]===e)return r[d]===t;if(o.push(e),r.push(t),a){if((d=e.length)!==t.length)return!1;for(;d--;)if(!Do(e[d],t[d],n-1,o,r))return!1}else{var u,h=Object.keys(e);if(d=h.length,Object.keys(t).length!==d)return!1;for(;d--;)if(!X(t,u=h[d])||!Do(e[u],t[u],n-1,o,r))return!1}return o.pop(),r.pop(),!0}function zo(e){return eo(e)?e.slice():W(e)||ao(e)||K(e)||uo(e)?Array.from(e.entries()):e}function Fo(e){return e[Symbol.iterator]=Uo,e}function Uo(){return this}if(["Symbol","Map","Set"].forEach((function(e){"undefined"===typeof k()[e]&&S("MobX requires global '"+e+"' to be available or polyfilled")})),"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:Lo},$mobx:de}),!e.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!function(e,t,n){return Bo((function(){var o=go(e,n)[de];null!=t||(t=function(e){return X(e,se)||U(e,se,J({},e[se])),e[se]}(e)),q(t).forEach((function(e){return o.make_(e,t[e])}))})),e})throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var Ho=n(7950);function Vo(e){e()}function Wo(e){return bn(e)}var Ko=!1;function Go(){return Ko}var qo=function(){function e(e){var t=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=1e4),clearTimeout(t.sweepTimeout),t.sweepTimeout=void 0;var n=Date.now();t.registrations.forEach((function(o,r){n-o.registeredAt>=e&&(t.finalize(o.value),t.registrations.delete(r))})),t.registrations.size>0&&t.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.registrations.set(n,{value:t,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),e}(),Yo=new("undefined"!==typeof FinalizationRegistry?FinalizationRegistry:qo)((function(e){var t;null===(t=e.reaction)||void 0===t||t.dispose(),e.reaction=null})),Xo=n(9461),$o=function(){};function Zo(e){e.reaction=new Vt("observer".concat(e.name),(function(){var t;e.stateVersion=Symbol(),null===(t=e.onStoreChange)||void 0===t||t.call(e)}))}function Qo(t,n){if(void 0===n&&(n="observed"),Go())return t();var o=e.useRef(null);if(!o.current){var r={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:n,subscribe:function(e){return Yo.unregister(r),r.onStoreChange=e,r.reaction||(Zo(r),r.stateVersion=Symbol()),function(){var e;r.onStoreChange=null,null===(e=r.reaction)||void 0===e||e.dispose(),r.reaction=null}},getSnapshot:function(){return r.stateVersion}};o.current=r}var i,s,a=o.current;if(a.reaction||(Zo(a),Yo.register(o,a,a)),e.useDebugValue(a.reaction,Wo),(0,Xo.useSyncExternalStore)(a.subscribe,a.getSnapshot,$o),a.reaction.track((function(){try{i=t()}catch(e){s=e}})),s)throw s;return i}var Jo="function"===typeof Symbol&&Symbol.for,er=Jo?Symbol.for("react.forward_ref"):"function"===typeof e.forwardRef&&(0,e.forwardRef)((function(e){return null})).$$typeof,tr=Jo?Symbol.for("react.memo"):"function"===typeof e.memo&&(0,e.memo)((function(e){return null})).$$typeof;function nr(t,n){var o;if(tr&&t.$$typeof===tr)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(Go())return t;var r=null!==(o=null===n||void 0===n?void 0:n.forwardRef)&&void 0!==o&&o,i=t,s=t.displayName||t.name;if(er&&t.$$typeof===er&&(r=!0,"function"!==typeof(i=t.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var a,l,c=function(e,t){return Qo((function(){return i(e,t)}),s)};return c.displayName=t.displayName,Object.defineProperty(c,"name",{value:t.name,writable:!0,configurable:!0}),t.contextTypes&&(c.contextTypes=t.contextTypes),r&&(c=(0,e.forwardRef)(c)),c=(0,e.memo)(c),a=t,l=c,Object.keys(a).forEach((function(e){or[e]||Object.defineProperty(l,e,Object.getOwnPropertyDescriptor(a,e))})),c}var or={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};var rr;!function(e){e||(e=Vo),vn({reactionScheduler:e})}(Ho.unstable_batchedUpdates);rr=Yo.finalizeAllImmediately;var ir=n(3536),sr=n.n(ir);const ar=new class{constructor(e,t){this.dbName=e,this.storeName=t,this.db=null}async open(){return new Promise(((e,t)=>{const n=indexedDB.open(this.dbName,1);n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:"id"})},n.onsuccess=t=>{this.db=t.target.result,e()},n.onerror=e=>{t(e.target.error)}}))}async patch(e){return new Promise(((t,n)=>{const o=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(e);o.onsuccess=()=>{t(o.result)},o.onerror=e=>{n(e.target.error)}}))}async get(e){return new Promise(((t,n)=>{const o=this.db.transaction([this.storeName]).objectStore(this.storeName).get(e);o.onsuccess=()=>{t(o.result)},o.onerror=e=>{n(e.target.error)}}))}}("CookieDataDB","CookieDataStore");class lr{static secondsToHMS(e){const t=Math.floor(e/3600),n=Math.floor(e%3600/60),o=e%60,r=String(t).padStart(2,"0"),i=String(n).padStart(2,"0"),s=String(o).padStart(2,"0");return"".concat(r,":").concat(i,":").concat(s)}static formatTime(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0"),s=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(o,"__").concat(r,"-").concat(i,"-").concat(s)}static getJSDateObjFromBackend(e){const[t,n]=e.split(" "),[o,r,i]=t.split("-"),[s,a,l]=n.split(":");return new Date(o,r-1,i,s,a,l)}static setElementDisabled(e,t){try{const n=document.getElementById(e);if(void 0===n)return;t?(n.style.backgroundColor="#AFAFAF",n.style.pointerEvents="none"):(n.style.backgroundColor="#FFF",n.style.pointerEvents="auto")}catch(n){}}static blobToBase64(e){return new Promise(((t,n)=>{const o=new FileReader;o.onloadend=()=>{t(o.result)},o.onerror=n,o.readAsDataURL(e)}))}static async convertMp4ToBlob(e){try{const t=await fetch(e);if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));return await t.blob()}catch(t){console.error("Error converting MP4 to Blob:",t)}}}lr.getContainerSize=e=>{var t;return null===(t=document.getElementById(e))||void 0===t?void 0:t.getBoundingClientRect()};const cr=lr;const dr=class{patchSearchEngineConfig(e){const t=sr().cloneDeep(this.searchEngineConfig);void 0!==e.searchResultMenuOpen&&(t.searchResultMenuOpen=e.searchResultMenuOpen),void 0!==e.searchedText&&(t.searchedText=e.searchedText),void 0!==e.searchResultList&&(t.searchResultList=e.searchResultList),void 0!==e.isCaseSensitive&&(t.isCaseSensitive=e.isCaseSensitive),void 0!==e.findAllMatches&&(t.findAllMatches=e.findAllMatches),void 0!==e.minMatchCharLength&&(t.minMatchCharLength=e.minMatchCharLength),void 0!==e.location&&(t.location=e.location),void 0!==e.threshold&&(t.threshold=e.threshold),void 0!==e.distance&&(t.distance=e.distance),void 0!==e.ignoreLocation&&(t.ignoreLocation=e.ignoreLocation),this.searchEngineConfig=t}updateAddDocumentName(e){this.addDocumentName=e}updateAppCompOpenConfig(e){const t=sr().cloneDeep(this.appCompOpenConfig);void 0!==e.markdownAppOpen&&(t.markdownAppOpen=e.markdownAppOpen),void 0!==e.processAppOpen&&(t.processAppOpen=e.processAppOpen),void 0!==e.toolboxAppOpen&&(t.toolboxAppOpen=e.toolboxAppOpen),void 0!==e.errorPageAppOpen&&(t.errorPageAppOpen=e.errorPageAppOpen),this.appCompOpenConfig=t}updateDocumentSelectionOpen(e){this.documentSelectionOpen=e}updateProcessDrawObj(e){this.processDrawObj=e}updateMarkdownObj(e){this.markdownObj=e}setIsDocumentsGroupDataUpdate(e){this.isDocumentsGroupDataUpdate=e}addDocumentsGroup(e){const t=sr().cloneDeep(this.documentsGroup);t.push(e),this.documentsGroup=t}updateDocumentsGroup(e){this.documentsGroup=e}downloadMarkdown(){const e=this.getCurrentDocumentObj(),t=new Blob([e.markdownData],{type:"text/markdown;charset=utf-8"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=e.name+".md",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)}downloadAllData(){const e=new Blob([JSON.stringify(sr().cloneDeep(this.documentsGroup))],{type:"application/json;charset=utf-8"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=cr.formatTime(new Date)+"_backup.json",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}mergeArrays(e){let t=new Map;return e.forEach((e=>{e.forEach((e=>{t.set(e.id,e)}))})),Array.from(t.values())}async parsingBackupData(e){try{const n=Array.from(e);async function o(e){let t=[];for(const n of e){const e=e=>new Promise(((n,o)=>{const r=new FileReader;r.onload=function(e){const o=JSON.parse(e.target.result);t.push(o),n()},r.readAsText(e)}));await e(n)}return t}n.sort((function(e,t){return e.lastModified-t.lastModified}));const r=await o(n);return r.push(sr().cloneDeep(this.documentsGroup)),this.updateDocumentsGroup(this.mergeArrays(r)),await this.saveIndexedDB()}catch(t){return{state:!1,error:t}}}async initDocumentsGroup(){await ar.open();const e=await ar.get(1);void 0!==e&&(this.updateDocumentsGroup(e.documentsGroup),void 0!==e.documentsGroup&&e.documentsGroup.length>0&&this.updateCurrentDocumentID(e.documentsGroup[e.documentsGroup.length-1].id))}async saveIndexedDB(){try{if(null!==this.markdownObj){const e=await this.markdownObj.save();this.patchDocumentsGroup(e,"markdownData")}if(null!==this.processDrawObj){const e=this.processDrawObj.store.getSnapshot();this.patchDocumentsGroup(e,"processData")}return await ar.open(),await ar.patch({id:1,documentsGroup:sr().cloneDeep(this.documentsGroup)}),{state:!0}}catch(e){return{state:!1,error:e}}}deleteDocumentsGroup(e){const t=sr().cloneDeep(this.documentsGroup);this.documentsGroup=t.filter((t=>t.id!==e))}patchDocumentsGroup(e,t){const n=sr().cloneDeep(this.documentsGroup),o=n.find((e=>e.id===this.currentDocumentID));void 0!==o&&("markdownData"===t&&(o.markdownData=e,this.documentsGroup=n),"processData"===t&&(o.processData=e,this.documentsGroup=n))}getCurrentDocumentObj(){if(0===this.documentsGroup.length)return null;const e=this.documentsGroup.find((e=>e.id===this.currentDocumentID));return void 0===e?null:sr().cloneDeep(e)}updateCurrentDocumentID(e){this.currentDocumentID=e}constructor(e){this.initMarkdownData={time:1711019875915,blocks:[],version:"2.29.0"},this.initProcessData={store:{"document:document":{gridSize:10,name:"",meta:{},id:"document:document",typeName:"document"},"page:page":{meta:{},id:"page:page",name:"Page 1",index:"a1",typeName:"page"}},schema:{schemaVersion:1,storeVersion:4,recordVersions:{asset:{version:1,subTypeKey:"type",subTypeVersions:{image:3,video:3,bookmark:1}},camera:{version:1},document:{version:2},instance:{version:24},instance_page_state:{version:5},page:{version:1},shape:{version:3,subTypeKey:"type",subTypeVersions:{group:0,text:1,bookmark:2,draw:1,geo:8,note:5,line:4,frame:0,arrow:3,highlight:0,embed:4,image:3,video:2}},instance_presence:{version:5},pointer:{version:1}}}},this.searchEngineConfig={searchResultMenuOpen:!1,searchedText:"",searchResultList:[],isCaseSensitive:!1,findAllMatches:!0,minMatchCharLength:5,location:0,threshold:.6,distance:100,ignoreLocation:!0},this.VERSION="V1.3",this.addDocumentName="default",this.appCompOpenConfig={markdownAppOpen:!0,errorPageAppOpen:!1,processAppOpen:!1,toolboxAppOpen:!1},this.documentSelectionOpen=!1,this.markdownObj=null,this.processDrawObj=null,this.documentsGroup=[],this.isDocumentsGroupDataUpdate=!1,this.currentDocumentID="",this.rootStore=e,Fn(this)}};n(1001),n(9494),n(483);function ur(e){return e&&"object"===typeof e&&"parents"in e}function hr(e){for(let t=0,n=e.parents.length;t<n;t++)if(e.parents[t].__unsafe__getWithoutCapture(!0),e.parents[t].lastChangedEpoch!==e.parentEpochs[t])return!0;return!1}const pr=(e,t)=>{if(e.children.remove(t)&&e.children.isEmpty&&ur(e))for(let n=0,o=e.parents.length;n<o;n++)pr(e.parents[n],e)},fr=(e,t)=>{if(e.children.add(t)&&ur(e))for(let n=0,o=e.parents.length;n<o;n++)fr(e.parents[n],e)};function gr(e,t){return e===t||Object.is(e,t)||Boolean(e&&t&&"function"===typeof e.equals&&e.equals(t))}function mr(e,t){var n;const o=Symbol.for("com.tldraw.state/".concat(e)),r=globalThis;return null!==(n=r[o])&&void 0!==n||(r[o]=t()),r[o]}const vr=mr("empty_array",(()=>Object.freeze([])));function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}function br(e){var t=function(e,t){if("object"!=yr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=yr(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yr(t)?t:t+""}function wr(e,t,n){return(t=br(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class xr{constructor(){wr(this,"arraySize",0),wr(this,"array",Array(8)),wr(this,"set",null)}get isEmpty(){if(this.array)return 0===this.arraySize;if(this.set)return 0===this.set.size;throw new Error("no set or array")}add(e){if(this.array){return-1===this.array.indexOf(e)&&(this.arraySize<8?(this.array[this.arraySize]=e,this.arraySize++,!0):(this.set=new Set(this.array),this.array=null,this.set.add(e),!0))}if(this.set)return!this.set.has(e)&&(this.set.add(e),!0);throw new Error("no set or array")}remove(e){if(this.array){const t=this.array.indexOf(e);return-1!==t&&(this.array[t]=void 0,this.arraySize--,t!==this.arraySize&&(this.array[t]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return!!this.set.has(e)&&(this.set.delete(e),!0);throw new Error("no set or array")}visit(e){if(this.array)for(let t=0;t<this.arraySize;t++){const n=this.array[t];"undefined"!==typeof n&&e(n)}else{if(!this.set)throw new Error("no set or array");this.set.forEach(e)}}}const Sr=Symbol.for("com.tldraw.state/RESET_VALUE");class _r{constructor(e){wr(this,"index",0),wr(this,"buffer",void 0),this.capacity=e,this.buffer=new Array(e)}pushEntry(e,t,n){void 0!==n&&(n!==Sr?(this.buffer[this.index]=[e,t,n],this.index=(this.index+1)%this.capacity):this.clear())}clear(){this.index=0,this.buffer.fill(void 0)}getChangesSince(e){const{index:t,capacity:n,buffer:o}=this;for(let r=0;r<n;r++){const i=(t-1+n-r)%n,s=o[i];if(!s)return Sr;const[a,l]=s;if(0===r&&e>=l)return[];if(a<=e&&e<l){const e=r+1,t=new Array(e);for(let r=0;r<e;r++)t[r]=o[(i+r)%n][2];return t}}return Sr}}class kr{constructor(e,t){wr(this,"offset",0),wr(this,"numNewParents",0),wr(this,"maybeRemoved",void 0),this.below=e,this.child=t}}const Cr=mr("capture",(()=>({stack:null})));function Er(e){Cr.stack=new kr(Cr.stack,e)}function Ir(){var e;const t=Cr.stack;Cr.stack=t.below;if(t.numNewParents>0||t.offset!==t.child.parents.length){for(let e=t.offset;e<t.child.parents.length;e++){const n=t.child.parents[e];t.child.parents.indexOf(n)>=t.offset&&pr(n,t.child)}if(t.child.parents.length=t.offset,t.child.parentEpochs.length=t.offset,null!==(e=Cr.stack)&&void 0!==e&&e.maybeRemoved)for(let e=0;e<Cr.stack.maybeRemoved.length;e++){const n=Cr.stack.maybeRemoved[e];-1===t.child.parents.indexOf(n)&&pr(n,t.child)}}}function Tr(e){if(Cr.stack){const t=Cr.stack.child.parents.indexOf(e);if(t<0&&(Cr.stack.numNewParents++,Cr.stack.child.isActivelyListening&&fr(e,Cr.stack.child)),t<0||t>=Cr.stack.offset){if(t!==Cr.stack.offset&&t>0){const e=Cr.stack.child.parents[Cr.stack.offset];Cr.stack.maybeRemoved?-1===Cr.stack.maybeRemoved.indexOf(e)&&Cr.stack.maybeRemoved.push(e):Cr.stack.maybeRemoved=[e]}Cr.stack.child.parents[Cr.stack.offset]=e,Cr.stack.child.parentEpochs[Cr.stack.offset]=e.lastChangedEpoch,Cr.stack.offset++}}}const Pr=-1;class Ar{constructor(e,t,n){wr(this,"_isActivelyListening",!1),wr(this,"lastTraversedEpoch",Pr),wr(this,"lastReactedEpoch",Pr),wr(this,"_scheduleCount",0),wr(this,"parentEpochs",[]),wr(this,"parents",[]),wr(this,"_scheduleEffect",void 0),wr(this,"maybeExecute",(()=>{this._isActivelyListening&&this.execute()})),this.name=e,this.runEffect=t,this._scheduleEffect=null===n||void 0===n?void 0:n.scheduleEffect}get isActivelyListening(){return this._isActivelyListening}get scheduleCount(){return this._scheduleCount}maybeScheduleEffect(){this._isActivelyListening&&this.lastReactedEpoch!==Br()&&(!this.parents.length||hr(this)?this.scheduleEffect():this.lastReactedEpoch=Br())}scheduleEffect(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}attach(){this._isActivelyListening=!0;for(let e=0,t=this.parents.length;e<t;e++)fr(this.parents[e],this)}detach(){this._isActivelyListening=!1;for(let e=0,t=this.parents.length;e<t;e++)pr(this.parents[e],this)}execute(){try{Er(this);const e=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=Br(),e}finally{Ir()}}}const Mr=mr("EffectScheduler",(()=>Ar));function jr(e,t,n){const o=new Mr(e,t,n);return o.attach(),o.scheduleEffect(),()=>{o.detach()}}class Or{constructor(e){wr(this,"initialAtomValues",new Map),this.parent=e}get isRoot(){return null===this.parent}commit(){if(this.isRoot){const e=this.initialAtomValues;this.initialAtomValues=new Map,Rr(e.keys())}else this.initialAtomValues.forEach(((e,t)=>{this.parent.initialAtomValues.has(t)||this.parent.initialAtomValues.set(t,e)}))}abort(){Lr.globalEpoch++,this.initialAtomValues.forEach(((e,t)=>{var n;t.set(e),null===(n=t.historyBuffer)||void 0===n||n.clear()})),this.commit()}}const Lr=mr("transactions",(()=>({globalEpoch:0,globalIsReacting:!1,currentTransaction:null})));function Br(){return Lr.globalEpoch}function Rr(e){if(Lr.globalIsReacting)throw new Error("cannot change atoms during reaction cycle");try{Lr.globalIsReacting=!0;const t=new Set,n=e=>{e.lastTraversedEpoch!==Lr.globalEpoch&&(e.lastTraversedEpoch=Lr.globalEpoch,e instanceof Mr?t.add(e):e.children.visit(n))};for(const o of e)o.children.visit(n);for(const e of t)e.maybeScheduleEffect()}finally{Lr.globalIsReacting=!1}}function Nr(e){return Lr.currentTransaction?e():function(e){const t=new Or(Lr.currentTransaction);Lr.currentTransaction=t;try{let n=!1;const o=e((()=>n=!0));return n?t.abort():t.commit(),o}catch(n){throw t.abort(),n}finally{Lr.currentTransaction=Lr.currentTransaction.parent}}(e)}class Dr{constructor(e,t,n){var o;wr(this,"isEqual",void 0),wr(this,"computeDiff",void 0),wr(this,"lastChangedEpoch",Br()),wr(this,"children",new xr),wr(this,"historyBuffer",void 0),this.name=e,this.current=t,this.isEqual=null!==(o=null===n||void 0===n?void 0:n.isEqual)&&void 0!==o?o:null,n&&(n.historyLength&&(this.historyBuffer=new _r(n.historyLength)),this.computeDiff=n.computeDiff)}__unsafe__getWithoutCapture(e){return this.current}get(){return Tr(this),this.current}set(e,t){var n,o,r,i;if(null!==(n=null===(o=this.isEqual)||void 0===o?void 0:o.call(this,this.current,e))&&void 0!==n?n:gr(this.current,e))return this.current;(Lr.globalEpoch++,this.historyBuffer)&&this.historyBuffer.pushEntry(this.lastChangedEpoch,Br(),null!==(r=null!==t&&void 0!==t?t:null===(i=this.computeDiff)||void 0===i?void 0:i.call(this,this.current,e,this.lastChangedEpoch,Br()))&&void 0!==r?r:Sr);this.lastChangedEpoch=Br();const s=this.current;return this.current=e,function(e,t){Lr.currentTransaction?Lr.currentTransaction.initialAtomValues.has(e)||Lr.currentTransaction.initialAtomValues.set(e,t):Rr([e])}(this,s),e}update(e){return this.set(e(this.current))}getDiffSince(e){var t,n;return Tr(this),e>=this.lastChangedEpoch?vr:null!==(t=null===(n=this.historyBuffer)||void 0===n?void 0:n.getChangesSince(e))&&void 0!==t?t:Sr}}const zr=mr("Atom",(()=>Dr));function Fr(e,t,n){return new zr(e,t,n)}let Ur=!1;const Hr=Symbol.for("com.tldraw.state/UNINITIALIZED"),Vr=e=>e===Hr,Wr=mr("WithDiff",(()=>class{constructor(e,t){this.value=e,this.diff=t}}));function Kr(e,t){return new Wr(e,t)}class Gr{constructor(e,t,n){var o;wr(this,"lastChangedEpoch",Pr),wr(this,"lastTraversedEpoch",Pr),wr(this,"lastCheckedEpoch",Pr),wr(this,"parents",[]),wr(this,"parentEpochs",[]),wr(this,"children",new xr),wr(this,"historyBuffer",void 0),wr(this,"state",Hr),wr(this,"error",null),wr(this,"computeDiff",void 0),wr(this,"isEqual",void 0),this.name=e,this.derive=t,null!==n&&void 0!==n&&n.historyLength&&(this.historyBuffer=new _r(n.historyLength)),this.computeDiff=null===n||void 0===n?void 0:n.computeDiff,this.isEqual=null!==(o=null===n||void 0===n?void 0:n.isEqual)&&void 0!==o?o:gr}get isActivelyListening(){return!this.children.isEmpty}__unsafe__getWithoutCapture(e){if(!(this.lastChangedEpoch===Pr)&&(this.lastCheckedEpoch===Br()||!hr(this))){if(this.lastCheckedEpoch=Br(),this.error){if(e)return this.state;throw this.error.thrownValue}return this.state}try{Er(this);const e=this.derive(this.state,this.lastCheckedEpoch),o=e instanceof Wr?e.value:e,r=this.state===Hr;if(r||!this.isEqual(o,this.state)){if(this.historyBuffer&&!r){var t,n;const r=e instanceof Wr?e.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,Br(),null!==(t=null!==r&&void 0!==r?r:null===(n=this.computeDiff)||void 0===n?void 0:n.call(this,this.state,o,this.lastCheckedEpoch,Br()))&&void 0!==t?t:Sr)}this.lastChangedEpoch=Br(),this.state=o}return this.error=null,this.lastCheckedEpoch=Br(),this.state}catch(o){if(this.state!==Hr&&(this.state=Hr,this.lastChangedEpoch=Br()),this.lastCheckedEpoch=Br(),this.historyBuffer&&this.historyBuffer.clear(),this.error={thrownValue:o},!e)throw o;return this.state}finally{Ir()}}get(){try{return this.__unsafe__getWithoutCapture()}finally{Tr(this)}}getDiffSince(e){var t,n;return this.__unsafe__getWithoutCapture(!0),Tr(this),e>=this.lastChangedEpoch?vr:null!==(t=null===(n=this.historyBuffer)||void 0===n?void 0:n.getChangesSince(e))&&void 0!==t?t:Sr}}const qr=mr("Computed",(()=>Gr));function Yr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return o.get?(Ur||(Ur=!0,console.warn("Using `@computed` as a decorator for getters is deprecated and will be removed in the near future. Please refactor to use `@computed` as a decorator for methods.\n\n// Before\n@computed\nget foo() {\n\treturn 'foo'\n}\n\n// After\n@computed\ngetFoo() {\n\treturn 'foo'\n}\n")),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const o=n.get,r=Symbol.for("__@tldraw/state__computed__"+t);return n.get=function(){let n=this[r];return n||(n=new qr(t,o.bind(this),e),Object.defineProperty(this,r,{enumerable:!1,configurable:!1,writable:!1,value:n})),n.get()},n}(e,t,n,o)):function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const o=n.value,r=Symbol.for("__@tldraw/state__computed__"+t);return n.value=function(){let n=this[r];return n||(n=new qr(t,o.bind(this),e),Object.defineProperty(this,r,{enumerable:!1,configurable:!1,writable:!1,value:n})),n.get()},n.value[Xr]=!0,n}(e,t,n,o)}const Xr="@@__isComputedMethod__@@";function $r(){if(1===arguments.length){const e=arguments[0];return(t,n,o)=>Yr(e,t,n,o)}return"string"===typeof arguments[0]?new qr(arguments[0],arguments[1],arguments[2]):Yr(void 0,arguments[0],arguments[1],arguments[2])}if(1!==mr("apiVersion",(()=>1)))throw new Error("You have multiple incompatible versions of @tldraw/state in your app. Please deduplicate the package.");function Zr(t,n){const o=e.useRef(n);o.current=n;const[r,i,s]=e.useMemo((()=>{let e=null;const n=new Mr("useStateTracking(".concat(t,")"),(()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.call(o)}),{scheduleEffect(){var t;null===(t=e)||void 0===t||t()}});return[n,t=>(e=t,()=>{e=null}),()=>n.scheduleCount]}),[t]);return e.useSyncExternalStore(i,s,s),e.useEffect((()=>(r.attach(),r.maybeScheduleEffect(),()=>{r.detach()})),[r]),r.execute()}const Qr={apply(e,t,n){var o,r;return Zr(null!==(o=null!==(r=e.displayName)&&void 0!==r?r:e.name)&&void 0!==o?o:"tracked(???)",(()=>e.apply(t,n)))}},Jr=Symbol.for("react.memo"),ei=Symbol.for("react.forward_ref");function ti(t){let n=null;const o=t.$$typeof;return o===Jr&&(n=(t=t.type).compare),o===ei?(0,e.memo)((0,e.forwardRef)(new Proxy(t.render,Qr))):(0,e.memo)(new Proxy(t,Qr),n)}function ni(){const t=arguments[0],n=arguments[1],o=3===arguments.length?void 0:arguments[2],r=3===arguments.length?arguments[2]:arguments[3];return(0,e.useMemo)((()=>$r("useComputed(".concat(t,")"),n,o)),r)}function oi(t,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vr;(0,e.useEffect)((()=>{const e=new Mr(t,n);return e.attach(),e.execute(),()=>{e.detach()}}),o)}function ri(){const t=arguments,n=3===t.length?t[2]:[t[0]],o=3===t.length?t[0]:"useValue(".concat(t[0].name,")"),r=(0,e.useRef)(!0);r.current=!0;const i=(0,e.useMemo)((()=>1===t.length?t[0]:$r(o,(()=>{if(r.current)return t[1]();try{return t[1]()}catch{return{}}}))),n);try{const{subscribe:t,getSnapshot:n}=(0,e.useMemo)((()=>({subscribe:e=>jr("useValue(".concat(o,")"),(()=>{i.get(),e()})),getSnapshot:()=>i.get()})),[i]);return(0,e.useSyncExternalStore)(t,n,n)}finally{r.current=!1}}class ii{constructor(e){wr(this,"nextValue",void 0),wr(this,"diff",void 0),this.previousValue=e}get(){var e,t,n,o;const r=null!==(e=null===(t=this.diff)||void 0===t||null===(t=t.removed)||void 0===t?void 0:t.size)&&void 0!==e?e:0,i=null!==(n=null===(o=this.diff)||void 0===o||null===(o=o.added)||void 0===o?void 0:o.size)&&void 0!==n?n:0;if(0!==r||0!==i)return{value:this.nextValue,diff:this.diff}}_add(e,t){var n,o,r,i,s;(null!==(n=this.nextValue)&&void 0!==n||(this.nextValue=new Set(this.previousValue)),this.nextValue.add(e),null!==(o=this.diff)&&void 0!==o||(this.diff={}),t)?null===(r=this.diff.removed)||void 0===r||r.delete(e):(null!==(s=(i=this.diff).added)&&void 0!==s||(i.added=new Set),this.diff.added.add(e))}add(e){var t;const n=this.previousValue.has(e);if(n){var o;if(!(null===(o=this.diff)||void 0===o||null===(o=o.removed)||void 0===o?void 0:o.has(e)))return;return this._add(e,n)}(null===(t=this.nextValue)||void 0===t?void 0:t.has(e))||this._add(e,n)}_remove(e,t){var n,o,r,i,s;(null!==(n=this.nextValue)&&void 0!==n||(this.nextValue=new Set(this.previousValue)),this.nextValue.delete(e),null!==(o=this.diff)&&void 0!==o||(this.diff={}),t)?(null!==(i=(r=this.diff).removed)&&void 0!==i||(r.removed=new Set),this.diff.removed.add(e)):null===(s=this.diff.added)||void 0===s||s.delete(e)}remove(e){var t;const n=this.previousValue.has(e);if(!n){var o;if(!(null===(o=this.diff)||void 0===o||null===(o=o.added)||void 0===o?void 0:o.has(e)))return;return this._remove(e,n)}(null===(t=this.diff)||void 0===t||null===(t=t.removed)||void 0===t?void 0:t.has(e))||this._remove(e,n)}}function si(e,t){const n=[];e:for(const o of e){for(const e of n)if(t?t(o,e):o===e)continue e;n.push(o)}return n}function ai(e){return e.filter((e=>void 0!==e&&null!==e))}function li(e){return e[e.length-1]}function ci(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Object.is(e[n],t[n]))return!1;return!0}function di(e){const t=function(){try{return e(...arguments)}catch(n){throw n instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(n,t),n}};return t}function ui(e,t){const n=t&&e&&"object"===typeof e&&t in e?e[t]:e;throw new Error("Unknown switch case ".concat(n))}const hi=di(((e,t)=>{if(!e)throw new Error(t||"Assertion Error")})),pi=di(((e,t)=>{if(null==e)throw new Error(null!==t&&void 0!==t?t:"value must be defined");return e}));function fi(e,t){let n;const o=function(){n||(n={},n.promise=new Promise(((e,t)=>{n.resolve=e,n.reject=t}))),clearTimeout(n.timeout);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return n.latestArgs=r,n.timeout=setTimeout((()=>{const t=n;n=void 0;try{t.resolve(e(...t.latestArgs))}catch(o){t.reject(o)}}),t),n.promise};return o.cancel=()=>{n&&clearTimeout(n.timeout)},o}const gi=new WeakMap;function mi(e,t){if("object"!==typeof e||null===e)return;let n=gi.get(e);n||(n={tags:{},extras:{}},gi.set(e,n)),t.tags&&(n.tags={...n.tags,...t.tags}),t.extras&&(n.extras={...n.extras,...t.extras})}function vi(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t+""}let yi=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!==typeof Int32Array&&(yi=new Int32Array(yi));class bi{static isPng(e,t){return 137===e.getUint8(t+0)&&80===e.getUint8(t+1)&&78===e.getUint8(t+2)&&71===e.getUint8(t+3)&&13===e.getUint8(t+4)&&10===e.getUint8(t+5)&&26===e.getUint8(t+6)&&10===e.getUint8(t+7)}static getChunkType(e,t){return[String.fromCharCode(e.getUint8(t)),String.fromCharCode(e.getUint8(t+1)),String.fromCharCode(e.getUint8(t+2)),String.fromCharCode(e.getUint8(t+3))].join("")}static readChunks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={};if(!bi.isPng(e,t))throw new Error("Not a PNG");for(t+=8;t<=e.buffer.byteLength;){const o=t,r=e.getInt32(t);t+=4;const i=bi.getChunkType(e,t);if("IDAT"===i&&n[i])t+=r+4+4;else{if("IEND"===i)break;n[i]={start:o,dataOffset:t+4,size:r},t+=r+4+4}}return n}static parsePhys(e,t){return{ppux:e.getUint32(t),ppuy:e.getUint32(t+4),unit:e.getUint8(t+4)}}static findChunk(e,t){return bi.readChunks(e)[t]}static setPhysChunk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,o=46,r=0;const i=bi.findChunk(e,"pHYs");i&&(o=i.start,r=i.size);const s=bi.findChunk(e,"IDAT");s&&(o=s.start,r=0);const a=new ArrayBuffer(21),l=new DataView(a);l.setUint32(0,9),l.setUint8(4,"p".charCodeAt(0)),l.setUint8(5,"H".charCodeAt(0)),l.setUint8(6,"Y".charCodeAt(0)),l.setUint8(7,"s".charCodeAt(0));const c=2835.5;l.setInt32(8,c*t),l.setInt32(12,c*t),l.setInt8(16,1);const d=new Uint8Array(a.slice(4,17));l.setInt32(17,((e,t)=>{let n=0===t?0:-1^~~t;for(let o=0;o<e.length;o++)n=yi[255&(n^e[o])]^n>>>8;return-1^n})(d));const u=e.buffer.slice(0,o),h=e.buffer.slice(o+r);return new Blob([u,a,h],n)}}class wi{static loadVideo(e){return new Promise(((t,n)=>{const o=document.createElement("video");o.onloadeddata=()=>t(o),o.onerror=e=>{console.error(e),n(new Error("Could not load video"))},o.crossOrigin="anonymous",o.src=e}))}static loadImage(e){return new Promise(((t,n)=>{const o=new Image;o.onload=()=>t(o),o.onerror=e=>{console.error(e),n(new Error("Could not load image"))},o.crossOrigin="anonymous",o.src=e}))}static blobToDataUrl(e){return new Promise(((t,n)=>{const o=new FileReader;o.onload=()=>t(o.result),o.onerror=e=>{console.error(e),n(new Error("Could not read blob"))},o.readAsDataURL(e)}))}static async getVideoSize(e){return wi.usingObjectURL(e,(async e=>{const t=await wi.loadVideo(e);return{w:t.videoWidth,h:t.videoHeight}}))}static async getImageSize(e){const t=await wi.usingObjectURL(e,wi.loadImage);try{if("image/png"===e.type){const n=new DataView(await e.arrayBuffer());if(bi.isPng(n,0)){const e=bi.findChunk(n,"pHYs");if(e){const o=bi.parsePhys(n,e.dataOffset);if(0===o.unit&&o.ppux===o.ppuy){const e=Math.max(o.ppux/2834.5,1);return{w:Math.round(t.naturalWidth/e),h:Math.round(t.naturalHeight/e)}}}}}}catch(n){return console.error(n),{w:t.naturalWidth,h:t.naturalHeight}}return{w:t.naturalWidth,h:t.naturalHeight}}static async usingObjectURL(e,t){const n=URL.createObjectURL(e);try{return await t(n)}finally{URL.revokeObjectURL(n)}}}function xi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,n=0,o=0,r=0;function i(){const e=t^t<<11;return t=n,n=o,o=r,r^=(r>>>19^e^e>>>8)>>>0,r/4294967296*2}for(let s=0;s<e.length+64;s++)t^=0|e.charCodeAt(s),i();return i}function Si(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const[r,i]=t,[s,a]=n,l=s+(e-r)/(i-r)*(a-s);return o?s<a?Math.max(Math.min(l,a),s):Math.max(Math.min(l,s),a):l}function _i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ki(e,t){if(_i(e,t))return e[t]}function Ci(e){if(!e)return e;if(Array.isArray(e)){const t=[],n=e.length;for(let o=0;o<n;o++)t.push(Ci(e[o]));return t}if("object"===typeof e){const t=Object.keys(e),n=t.length,o={};for(let r=0;r<n;r++){const n=t[r];o[n]=Ci(e[n])}return o}return e}function Ei(e){return Object.keys(e)}function Ii(e){return Object.values(e)}function Ti(e){return Object.entries(e)}function Pi(e){return Object.fromEntries(e)}function Ai(e,t){const n={};let o=!1;for(const[r,i]of Ti(e))t(r,i)?n[r]=i:o=!0;return o?n:e}function Mi(e,t){const n={};for(const[o,r]of Ti(e)){const e=t(o,r);n[o]=e}return n}function ji(e,t){if(e===t)return!0;const n=new Set(Object.keys(e)),o=new Set(Object.keys(t));if(n.size!==o.size)return!1;for(const r of n){if(!o.has(r))return!1;if(!Object.is(e[r],t[r]))return!1}return!0}const Oi=()=>"undefined"!==typeof process&&!1,Li=[],Bi=()=>{const e=Li.splice(0,Li.length);for(const t of e)t()};let Ri;function Ni(){Ri||(Ri=requestAnimationFrame((()=>{Ri=void 0,Bi()})))}const Di="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",zi="a0",Fi="A00000000000000000000000000";function Ui(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-"a".charCodeAt(0)+2;if(e>="A"&&e<="Z")return"Z".charCodeAt(0)-e.charCodeAt(0)+2;throw new Error("Invalid index key head: "+e)}function Hi(e){if(e.length!==Ui(e.charAt(0)))throw new Error("invalid integer part of index key: "+e)}function Vi(e){if(void 0===e)throw Error("n is undefined")}function Wi(e){Hi(e);const[t,...n]=e.split("");let o=!0;for(let r=n.length-1;o&&r>=0;r--){const e=Di.indexOf(n[r])+1;e===Di.length?n[r]="0":(n[r]=Di.charAt(e),o=!1)}if(o){if("Z"===t)return"a0";if("z"===t)return;const e=String.fromCharCode(t.charCodeAt(0)+1);return e>"a"?n.push("0"):n.pop(),e+n.join("")}return t+n.join("")}function Ki(e,t){if(void 0!==t&&e>=t)throw new Error(e+" >= "+t);if("0"===e.slice(-1)||t&&"0"===t.slice(-1))throw new Error("trailing zero");if(t){let n=0;for(;(e.charAt(n)||"0")===t.charAt(n);)n++;if(n>0)return t.slice(0,n)+Ki(e.slice(n),t.slice(n))}const n=e?Di.indexOf(e.charAt(0)):0,o=void 0!==t?Di.indexOf(t.charAt(0)):Di.length;if(o-n>1){const e=Math.round(.5*(n+o));return Di.charAt(e)}return t&&t.length>1?t.slice(0,1):Di.charAt(n)+Ki(e.slice(1),void 0)}function Gi(e){const t=Ui(e.charAt(0));if(t>e.length)throw new Error("invalid index: "+e);return e.slice(0,t)}function qi(e){if(e===Fi)throw new Error("invalid index: "+e);const t=Gi(e);if("0"===e.slice(t.length).slice(-1))throw new Error("invalid index: "+e)}function Yi(e,t){if(void 0!==e&&qi(e),void 0!==t&&qi(t),void 0!==e&&void 0!==t&&e>=t)throw new Error(e+" >= "+t);if(void 0===e&&void 0===t)return zi;if(void 0===e){if(void 0===t)throw Error("b is undefined");const e=Gi(t),n=t.slice(e.length);if(e===Fi)return e+Ki("",n);if(e<t)return e;const o=function(e){Hi(e);const[t,...n]=e.split("");let o=!0;for(let r=n.length-1;o&&r>=0;r--){const e=Di.indexOf(n[r])-1;-1===e?n[r]=Di.slice(-1):(n[r]=Di.charAt(e),o=!1)}if(o){if("a"===t)return"Z"+Di.slice(-1);if("A"===t)return;const e=String.fromCharCode(t.charCodeAt(0)-1);return e<"Z"?n.push(Di.slice(-1)):n.pop(),e+n.join("")}return t+n.join("")}(e);return Vi(o),o}if(void 0===t){const t=Gi(e),n=e.slice(t.length),o=Wi(t);return void 0===o?t+Ki(n,void 0):o}const n=Gi(e),o=e.slice(n.length),r=Gi(t),i=t.slice(r.length);if(n===r)return n+Ki(o,i);const s=Wi(n);return Vi(s),s<t?s:n+Ki(o,void 0)}function Xi(e,t,n){if(0===n)return[];if(1===n)return[Yi(e,t)];if(void 0===t){let o=Yi(e,t);const r=[o];for(let e=0;e<n-1;e++)o=Yi(o,t),r.push(o);return r}if(void 0===e){let o=Yi(e,t);const r=[o];for(let t=0;t<n-1;t++)o=Yi(e,o),r.push(o);return r.reverse(),r}const o=Math.floor(n/2),r=Yi(e,t);return[...Xi(e,r,o),r,...Xi(r,t,n-o-1)]}const $i=zi;function Zi(e,t,n){return Xi(e,t,n)}function Qi(e,t){return Xi(e,void 0,t)}function Ji(e,t){return Xi(e,t,1)[0]}function es(e){return Xi(e,void 0,1)[0]}function ts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a1";return[t,...Xi(t,void 0,e)]}function ns(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function os(e,t){return e.id>t.id?1:-1}function rs(e){return null!==e}const is="undefined"!==typeof window&&window.structuredClone?window.structuredClone:e=>e?JSON.parse(JSON.stringify(e)):e;let ss=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")};class as{constructor(e,t){var n,o;wr(this,"createDefaultProperties",void 0),wr(this,"migrations",void 0),wr(this,"validator",void 0),wr(this,"scope",void 0),wr(this,"isInstance",(e=>(null===e||void 0===e?void 0:e.typeName)===this.typeName)),this.typeName=e,this.createDefaultProperties=t.createDefaultProperties,this.migrations=t.migrations,this.validator=null!==(n=t.validator)&&void 0!==n?n:{validate:e=>e},this.scope=null!==(o=t.scope)&&void 0!==o?o:"document"}create(e){const t={...this.createDefaultProperties(),id:this.createId()};for(const[n,o]of Object.entries(e))void 0!==o&&(t[n]=o);return t.typeName=this.typeName,t}clone(e){return{...is(e),id:this.createId()}}createId(e){return this.typeName+":"+(null!==e&&void 0!==e?e:ss())}createCustomId(e){return this.typeName+":"+e}parseId(e){if(!this.isId(e))throw new Error('ID "'.concat(e,'" is not a valid ID for type "').concat(this.typeName,'"'));return e.slice(this.typeName.length+1)}isId(e){if(!e)return!1;for(let t=0;t<this.typeName.length;t++)if(e[t]!==this.typeName[t])return!1;return":"===e[this.typeName.length]}withDefaultProperties(e){return new as(this.typeName,{createDefaultProperties:e,migrations:this.migrations,validator:this.validator,scope:this.scope})}validate(e,t){return t&&this.validator.validateUsingKnownGoodVersion?this.validator.validateUsingKnownGoodVersion(t,e):this.validator.validate(e)}}function ls(e,t){var n;return new as(e,{createDefaultProperties:()=>({}),migrations:null!==(n=t.migrations)&&void 0!==n?n:{currentVersion:0,firstVersion:0,migrators:{}},validator:t.validator,scope:t.scope})}class cs{constructor(){wr(this,"items",new WeakMap)}get(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}}var ds=n(67);function us(e,t){for(const[n,o]of Object.entries(e)){const e=o,r=t[n];if("eq"in e&&r!==e.eq)return!1;if("neq"in e&&r===e.neq)return!1;if("gt"in e&&("number"!==typeof r||r<=e.gt))return!1}return!0}function hs(e,t,n){const o=Object.fromEntries(Object.keys(n).map((e=>[e,new Set])));for(const[r,i]of Object.entries(n))if("eq"in i){const n=e.index(t,r).get().get(i.eq);if(n)for(const e of n)o[r].add(e)}else if("neq"in i){const n=e.index(t,r);for(const[e,t]of n.get())if(e!==i.neq)for(const n of t)o[r].add(n)}else if("gt"in i){const n=e.index(t,r);for(const[e,t]of n.get())if(e>i.gt)for(const n of t)o[r].add(n)}return function(e){if(0===e.length)return new Set;const t=e[0],n=e.slice(1),o=new Set;for(const r of t)n.every((e=>e.has(r)))&&o.add(r);return o}(Object.values(o))}class ps{constructor(e,t){wr(this,"indexCache",new Map),wr(this,"historyCache",new Map),this.atoms=e,this.history=t}filterHistory(e){if(this.historyCache.has(e))return this.historyCache.get(e);const t=$r("filterHistory:"+e,((t,n)=>{if(Vr(t))return this.history.get();const o=this.history.getDiffSince(n);if(o===Sr)return this.history.get();const r={added:{},removed:{},updated:{}};let i=0,s=0,a=0;for(const l of o){for(const t of Ii(l.added))if(t.typeName===e)if(r.removed[t.id]){const e=r.removed[t.id];delete r.removed[t.id],s--,e!==t&&(r.updated[t.id]=[e,t],a++)}else r.added[t.id]=t,i++;for(const[t,n]of Ii(l.updated))n.typeName===e&&(r.added[n.id]?r.added[n.id]=n:r.updated[n.id]?r.updated[n.id]=[r.updated[n.id][0],n]:(r.updated[n.id]=[t,n],a++));for(const t of Ii(l.removed))t.typeName===e&&(r.added[t.id]?(delete r.added[t.id],i--):r.updated[t.id]?(r.removed[t.id]=r.updated[t.id][0],delete r.updated[t.id],a--,s++):(r.removed[t.id]=t,s++))}return i||s||a?Kr(this.history.get(),r):t}),{historyLength:100});return this.historyCache.set(e,t),t}index(e,t){const n=e+":"+t;if(this.indexCache.has(n))return this.indexCache.get(n);const o=this.__uncached_createIndex(e,t);return this.indexCache.set(n,o),o}__uncached_createIndex(e,t){const n=this.filterHistory(e),o=()=>{n.get();const o=new Map;for(const n of Ii(this.atoms.get())){const r=n.get();if(r.typeName===e){const e=r[t];o.has(e)||o.set(e,new Set),o.get(e).add(r.id)}}return o};return $r("index:"+e+":"+t,((r,i)=>{if(Vr(r))return o();const s=n.getDiffSince(i);if(s===Sr)return o();const a=new Map,l=(e,t)=>{var n;let o=a.get(e);o||(o=new ii(null!==(n=r.get(e))&&void 0!==n?n:new Set)),o.add(t),a.set(e,o)},c=(e,t)=>{var n;let o=a.get(e);o||(o=new ii(null!==(n=r.get(e))&&void 0!==n?n:new Set)),o.remove(t),a.set(e,o)};for(const n of s){for(const o of Ii(n.added))if(o.typeName===e){l(o[t],o.id)}for(const[o,r]of Ii(n.updated))if(r.typeName===e){const e=o[t],n=r[t];e!==n&&(c(e,r.id),l(n,r.id))}for(const o of Ii(n.removed))if(o.typeName===e){c(o[t],o.id)}}let d,u;for(const[e,t]of a){const n=t.get();n&&(d||(d=new Map(r)),u||(u=new Map),0===n.value.size?d.delete(e):d.set(e,n.value),u.set(e,n.diff))}return d&&u?Kr(d,u):r}),{historyLength:100})}record(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>({}),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"record:"+e+(t?":"+t.toString():"");const o=this.ids(e,t,n);return $r(n,(()=>{for(const t of o.get()){var e;return null===(e=this.atoms.get()[t])||void 0===e?void 0:e.get()}}))}records(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>({}),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"records:"+e+(t?":"+t.toString():"");const o=this.ids(e,t,"ids:"+n);return $r(n,(()=>[...o.get()].map((e=>{const t=this.atoms.get()[e];if(!t)throw new Error("no atom found for record id: "+e);return t.get()}))))}ids(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>({}),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ids:"+e+(t?":"+t.toString():"");const o=this.filterHistory(e),r=()=>{o.get();const n=t();return 0===Object.keys(n).length?new Set(Ii(this.atoms.get()).flatMap((t=>{const n=t.get();return n.typeName===e?n.id:[]}))):hs(this,e,n)},i=e=>{const t=r(),n=function(e,t){const n={};for(const i of t){var o;e.has(i)||(null!==(o=n.added)&&void 0!==o||(n.added=new Set),n.added.add(i))}for(const i of e){var r;t.has(i)||(null!==(r=n.removed)&&void 0!==r||(n.removed=new Set),n.removed.add(i))}return n.added||n.removed?n:void 0}(e,t);return n?Kr(t,n):e},s=$r("ids_query:"+n,t,{isEqual:ds});return $r("query:"+n,((t,n)=>{const a=s.get();if(Vr(t))return r();if(n<s.lastChangedEpoch)return i(t);const l=o.getDiffSince(n);if(l===Sr)return i(t);const c=new ii(t);for(const o of l){for(const t of Ii(o.added))t.typeName===e&&us(a,t)&&c.add(t.id);for(const[t,n]of Ii(o.updated))n.typeName===e&&(us(a,n)?c.add(n.id):c.remove(n.id));for(const t of Ii(o.removed))t.typeName===e&&c.remove(t.id)}const d=c.get();return d?Kr(d.value,d.diff):t}),{historyLength:50})}exec(e,t){const n=hs(this,e,t);if(0===n.size)return vr;const o=this.atoms.get();return[...n].map((e=>o[e].get()))}}class fs{constructor(e){var t=this;wr(this,"id",ss()),wr(this,"atoms",Fr("store_atoms",{})),wr(this,"history",Fr("history",0,{historyLength:1e3})),wr(this,"query",new ps(this.atoms,this.history)),wr(this,"listeners",new Set),wr(this,"historyAccumulator",new ms),wr(this,"historyReactor",void 0),wr(this,"schema",void 0),wr(this,"props",void 0),wr(this,"scopedTypes",void 0),wr(this,"onBeforeCreate",void 0),wr(this,"onAfterCreate",void 0),wr(this,"onBeforeChange",void 0),wr(this,"onAfterChange",void 0),wr(this,"onBeforeDelete",void 0),wr(this,"onAfterDelete",void 0),wr(this,"_runCallbacks",!0),wr(this,"put",((e,t)=>{Nr((()=>{const n={},o={},r=this.atoms.__unsafe__getWithoutCapture();let i,s=null,a=!1;const l=this.onBeforeCreate&&this._runCallbacks?this.onBeforeCreate:null,c=this.onBeforeChange&&this._runCallbacks?this.onBeforeChange:null,d=this.isMergingRemoteChanges?"remote":"user";for(let h=0,p=e.length;h<p;h++){var u;i=e[h];const p=(null!==(u=s)&&void 0!==u?u:r)[i.id];if(p){const e=p.__unsafe__getWithoutCapture();c&&(i=c(e,i,d));if(this.schema.validateRecord(this,i,null!==t&&void 0!==t?t:"updateRecord",e)===e)continue;p.set(i),a=!0,n[i.id]=[e,p.__unsafe__getWithoutCapture()]}else l&&(i=l(i,d)),a=!0,i=this.schema.validateRecord(this,i,null!==t&&void 0!==t?t:"createRecord",null),o[i.id]=i,s||(s={...r}),s[i.id]=Fr("atom:"+i.id,i)}if(s&&this.atoms.set(s),a&&(this.updateHistory({added:o,updated:n,removed:{}}),this._runCallbacks)){const{onAfterCreate:e,onAfterChange:t}=this;e&&Object.values(o).forEach((t=>{e(t,d)})),t&&Object.values(n).forEach((e=>{let[n,o]=e;t(n,o,d)}))}}))})),wr(this,"remove",(e=>{Nr((()=>{const t=[],n=this.isMergingRemoteChanges?"remote":"user";if(this.onBeforeDelete&&this._runCallbacks)for(const r of e){const e=this.atoms.__unsafe__getWithoutCapture()[r];e&&(!1===this.onBeforeDelete(e.get(),n)&&t.push(r))}let o;if(this.atoms.update((n=>{var r;let i;for(const s of e)t.includes(s)||s in n&&(i||(i={...n}),o||(o={}),delete i[s],o[s]=n[s].get());return null!==(r=i)&&void 0!==r?r:n})),o&&(this.updateHistory({added:{},updated:{},removed:o}),this.onAfterDelete&&this._runCallbacks)){let t;for(let r=0,i=e.length;r<i;r++)t=o[e[r]],t&&this.onAfterDelete(t,n)}}))})),wr(this,"get",(e=>{var t;return null===(t=this.atoms.get()[e])||void 0===t?void 0:t.get()})),wr(this,"unsafeGetWithoutCapture",(e=>{var t;return null===(t=this.atoms.get()[e])||void 0===t?void 0:t.__unsafe__getWithoutCapture()})),wr(this,"serialize",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"document";const n={};for(const[o,r]of Ti(t.atoms.get())){const i=r.get();("all"===e||t.scopedTypes[e].has(i.typeName))&&(n[o]=i)}return n})),wr(this,"allRecords",(()=>Ii(this.atoms.get()).map((e=>e.get())))),wr(this,"clear",(()=>{this.remove(Ei(this.atoms.get()))})),wr(this,"update",((e,t)=>{const n=this.atoms.get()[e];n?this.put([t(n.__unsafe__getWithoutCapture())]):console.error("Record ".concat(e," not found. This is probably an error"))})),wr(this,"has",(e=>!!this.atoms.get()[e])),wr(this,"listen",((e,t)=>{var n,o;this._flushHistory();const r={onHistory:e,filters:{source:null!==(n=null===t||void 0===t?void 0:t.source)&&void 0!==n?n:"all",scope:null!==(o=null===t||void 0===t?void 0:t.scope)&&void 0!==o?o:"all"}};return this.listeners.add(r),this.historyReactor.scheduler.isActivelyListening||this.historyReactor.start(),()=>{this.listeners.delete(r),0===this.listeners.size&&this.historyReactor.stop()}})),wr(this,"isMergingRemoteChanges",!1),wr(this,"mergeRemoteChanges",(e=>{if(this.isMergingRemoteChanges)return e();try{this.isMergingRemoteChanges=!0,Nr(e)}finally{this.isMergingRemoteChanges=!1}})),wr(this,"createComputedCache",((e,t,n)=>{const o=new cs;return{get:r=>{const i=this.atoms.get()[r];if(i)return o.get(i,(()=>{const o=n?$r(i.name+":equals",(()=>i.get()),{isEqual:n}):i;return $r(e+":"+r,(()=>t(o.get())))})).get()}}})),wr(this,"createSelectedComputedCache",((e,t,n)=>{const o=new cs;return{get:r=>{const i=this.atoms.get()[r];if(!i)return;const s=$r(e+":"+r+":selector",(()=>t(i.get())));return o.get(i,(()=>$r(e+":"+r,(()=>n(s.get()))))).get()}}})),wr(this,"getRecordType",(e=>{const t=this.schema.types[e.typeName];if(!t)throw new Error("Record type ".concat(e.typeName," not found"));return t})),wr(this,"_integrityChecker",void 0),wr(this,"_isPossiblyCorrupted",!1);const{initialData:n,schema:o}=e;this.schema=o,this.props=e.props,n&&this.atoms.set(Pi(Ti(n).map((e=>{let[t,n]=e;return[t,Fr("atom:"+t,this.schema.validateRecord(this,n,"initialize",null))]})))),this.historyReactor=function(e,t,n){const o=new Mr(e,t,n);return{scheduler:o,start:e=>{var t;const n=null!==(t=null===e||void 0===e?void 0:e.force)&&void 0!==t&&t;o.attach(),n?o.scheduleEffect():o.maybeScheduleEffect()},stop:()=>{o.detach()}}}("Store.historyReactor",(()=>{this.history.get(),this._flushHistory()}),{scheduleEffect:e=>function(e){if(Oi())return e();Li.includes(e)||(Li.push(e),Ni())}(e)}),this.scopedTypes={document:new Set(Ii(this.schema.types).filter((e=>"document"===e.scope)).map((e=>e.typeName))),session:new Set(Ii(this.schema.types).filter((e=>"session"===e.scope)).map((e=>e.typeName))),presence:new Set(Ii(this.schema.types).filter((e=>"presence"===e.scope)).map((e=>e.typeName)))}}_flushHistory(){if(this.historyAccumulator.hasChanges()){const o=this.historyAccumulator.flush();for(const{changes:r,source:i}of o){let o=null,s=null,a=null;for(const{onHistory:l,filters:c}of this.listeners)if("all"===c.source||c.source===i)if("all"!==c.scope)if("document"===c.scope){var e;if(null!==(e=s)&&void 0!==e||(s=this.filterChangesByScope(r,"document")),!s)continue;l({changes:s,source:i})}else if("session"===c.scope){var t;if(null!==(t=o)&&void 0!==t||(o=this.filterChangesByScope(r,"session")),!o)continue;l({changes:o,source:i})}else{var n;if(null!==(n=a)&&void 0!==n||(a=this.filterChangesByScope(r,"presence")),!a)continue;l({changes:a,source:i})}else l({changes:r,source:i})}}}filterChangesByScope(e,t){const n={added:Ai(e.added,((e,n)=>this.scopedTypes[t].has(n.typeName))),updated:Ai(e.updated,((e,n)=>this.scopedTypes[t].has(n[1].typeName))),removed:Ai(e.removed,((e,n)=>this.scopedTypes[t].has(n.typeName)))};return 0===Object.keys(n.added).length&&0===Object.keys(n.updated).length&&0===Object.keys(n.removed).length?null:n}updateHistory(e){this.historyAccumulator.add({changes:e,source:this.isMergingRemoteChanges?"remote":"user"}),0===this.listeners.size&&this.historyAccumulator.clear(),this.history.set(this.history.get()+1,e)}validate(e){this.allRecords().forEach((t=>this.schema.validateRecord(this,t,e,null)))}getSnapshot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"document";return{store:this.serialize(e),schema:this.schema.serialize()}}migrateSnapshot(e){const t=this.schema.migrateStoreSnapshot(e);if("error"===t.type)throw new Error("Failed to migrate snapshot: ".concat(t.reason));return{store:t.value,schema:this.schema.serialize()}}loadSnapshot(e){const t=this.schema.migrateStoreSnapshot(e);if("error"===t.type)throw new Error("Failed to migrate snapshot: ".concat(t.reason));Nr((()=>{this.clear(),this.put(Object.values(t.value)),this.ensureStoreIsUsable()}))}extractingChanges(e){const t=[],n=this.historyAccumulator.intercepting((e=>t.push(e.changes)));try{return Nr(e),gs(t)}finally{n()}}applyDiff(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this._runCallbacks;try{this._runCallbacks=t,Nr((()=>{const t=Ii(e.added).concat(Ii(e.updated).map((e=>{let[t,n]=e;return n}))),n=Ei(e.removed);t.length&&this.put(t),n.length&&this.remove(n)}))}finally{this._runCallbacks=n}}ensureStoreIsUsable(){var e,t;null!==(e=this._integrityChecker)&&void 0!==e||(this._integrityChecker=this.schema.createIntegrityChecker(this)),null===(t=this._integrityChecker)||void 0===t||t.call(this)}markAsPossiblyCorrupted(){this._isPossiblyCorrupted=!0}isPossiblyCorrupted(){return this._isPossiblyCorrupted}}function gs(e){const t={added:{},removed:{},updated:{}};for(const n of e){for(const[e,o]of Ti(n.added))if(t.removed[e]){const n=t.removed[e];delete t.removed[e],n!==o&&(t.updated[e]=[n,o])}else t.added[e]=o;for(const[e,[o,r]]of Ti(n.updated))t.added[e]?(t.added[e]=r,delete t.updated[e],delete t.removed[e]):t.updated[e]?(t.updated[e]=[t.updated[e][0],r],delete t.removed[e]):(t.updated[e]=n.updated[e],delete t.removed[e]);for(const[e,o]of Ti(n.removed))t.added[e]?delete t.added[e]:t.updated[e]?(t.removed[e]=t.updated[e][0],delete t.updated[e]):t.removed[e]=o}return t}class ms{constructor(){wr(this,"_history",[]),wr(this,"_interceptors",new Set)}intercepting(e){return this._interceptors.add(e),()=>{this._interceptors.delete(e)}}add(e){this._history.push(e);for(const t of this._interceptors)t(e)}flush(){const e=function(e){const t=[];let n,o=e[0];for(let r=1,i=e.length;r<i;r++)n=e[r],o.source!==n.source?(t.push(o),o=n):o={source:o.source,changes:gs([o.changes,n.changes])};return t.push(o),t}(this._history);return this._history=[],e}clear(){this._history=[]}hasChanges(){return this._history.length>0}}function vs(e){const{currentVersion:t,firstVersion:n,migrators:o={},subTypeKey:r,subTypeMigrations:i}=e;if("number"===typeof t&&"number"===typeof n){if(t===n)throw Error("Current version is equal to initial version.");if(t<n)throw Error("Current version is lower than initial version.")}return{firstVersion:null!==n&&void 0!==n?n:0,currentVersion:null!==t&&void 0!==t?t:0,migrators:o,subTypeKey:r,subTypeMigrations:i}}var ys=(e=>(e.IncompatibleSubtype="incompatible-subtype",e.UnknownType="unknown-type",e.TargetVersionTooNew="target-version-too-new",e.TargetVersionTooOld="target-version-too-old",e.MigrationError="migration-error",e.UnrecognizedSubtype="unrecognized-subtype",e))(ys||{});function bs(e){let{record:t,migrations:n,fromVersion:o,toVersion:r}=e,i=o;if(!function(e){return"object"===typeof e&&null!==e&&"id"in e&&"typeName"in e}(t))throw new Error("[migrateRecord] object is not a record");const{typeName:s,id:a,...l}=t;let c=l;for(;i<r;){const e=i+1,t=n.migrators[e];if(!t)return{type:"error",reason:"target-version-too-new"};c=t.up(c),i=e}for(;i>r;){const e=i-1,t=n.migrators[i];if(!t)return{type:"error",reason:"target-version-too-old"};c=t.down(c),i=e}return{type:"success",value:{...c,id:a,typeName:s}}}function ws(e){let{value:t,migrations:n,fromVersion:o,toVersion:r}=e,i=o;for(;i<r;){const e=i+1,o=n.migrators[e];if(!o)return{type:"error",reason:"target-version-too-new"};t=o.up(t),i=e}for(;i>r;){const e=i-1,o=n.migrators[i];if(!o)return{type:"error",reason:"target-version-too-old"};t=o.down(t),i=e}return{type:"success",value:t}}class xs{constructor(e,t){this.types=e,this.options=t}static create(e,t){return new xs(e,null!==t&&void 0!==t?t:{})}get currentStoreVersion(){var e,t;return null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.currentVersion)&&void 0!==e?e:0}validateRecord(e,t,n,o){try{const e=ki(this.types,t.typeName);if(!e)throw new Error("Missing definition for record type ".concat(t.typeName));return e.validate(t,null!==o&&void 0!==o?o:void 0)}catch(r){if(this.options.onValidationFailure)return this.options.onValidationFailure({store:e,record:t,phase:n,recordBefore:o,error:r});throw r}}migratePersistedRecord(e,t){var n;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"up";const r=ki(this.types,e.typeName),i=t.recordVersions[e.typeName];if(!i||!r)return{type:"error",reason:ys.UnknownType};const s=r.migrations.currentVersion,a=i.version;if(s!==a){const t=bs("up"===o?{record:e,migrations:r.migrations,fromVersion:a,toVersion:s}:{record:e,migrations:r.migrations,fromVersion:s,toVersion:a});if("error"===t.type)return t;e=t.value}if(!r.migrations.subTypeKey)return{type:"success",value:e};const l=null===(n=r.migrations.subTypeMigrations)||void 0===n?void 0:n[e[r.migrations.subTypeKey]],c="subTypeVersions"in i?i.subTypeVersions[e[r.migrations.subTypeKey]]:void 0;if(void 0===l)return{type:"error",reason:ys.UnrecognizedSubtype};if(void 0===c)return{type:"error",reason:ys.IncompatibleSubtype};const d=bs("up"===o?{record:e,migrations:l,fromVersion:c,toVersion:l.currentVersion}:{record:e,migrations:l,fromVersion:l.currentVersion,toVersion:c});return"error"===d.type?d:{type:"success",value:d.value}}migrateStoreSnapshot(e){var t;let{store:n}=e;const o=this.options.snapshotMigrations;if(!o)return{type:"success",value:n};const r=o.currentVersion,i=null!==(t=e.schema.storeVersion)&&void 0!==t?t:0;if(r<i)return{type:"error",reason:ys.TargetVersionTooOld};if(r>i){const e=ws({value:n,migrations:o,fromVersion:i,toVersion:r});if("error"===e.type)return e;n=e.value}const s=[];for(const a of Ii(n)){const t=this.migratePersistedRecord(a,e.schema);if("error"===t.type)return t;t.value&&t.value!==a&&s.push(t.value)}if(s.length){n={...n};for(const e of s)n[e.id]=e}return{type:"success",value:n}}createIntegrityChecker(e){var t,n,o;return null!==(t=null===(n=(o=this.options).createIntegrityChecker)||void 0===n?void 0:n.call(o,e))&&void 0!==t?t:void 0}serialize(){var e,t;return{schemaVersion:1,storeVersion:null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.currentVersion)&&void 0!==e?e:0,recordVersions:Object.fromEntries(Ii(this.types).map((e=>[e.typeName,e.migrations.subTypeKey&&e.migrations.subTypeMigrations?{version:e.migrations.currentVersion,subTypeKey:e.migrations.subTypeKey,subTypeVersions:e.migrations.subTypeMigrations?Object.fromEntries(Object.entries(e.migrations.subTypeMigrations).map((e=>{let[t,n]=e;return[t,n.currentVersion]}))):void 0}:{version:e.migrations.currentVersion}])))}}serializeEarliestVersion(){var e,t;return{schemaVersion:1,storeVersion:null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.firstVersion)&&void 0!==e?e:0,recordVersions:Object.fromEntries(Ii(this.types).map((e=>[e.typeName,e.migrations.subTypeKey&&e.migrations.subTypeMigrations?{version:e.migrations.firstVersion,subTypeKey:e.migrations.subTypeKey,subTypeVersions:e.migrations.subTypeMigrations?Object.fromEntries(Object.entries(e.migrations.subTypeMigrations).map((e=>{let[t,n]=e;return[t,n.firstVersion]}))):void 0}:{version:e.migrations.firstVersion}])))}}}class Ss extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=function(e){if(!e.length)return null;let t="";for(const n of e)"number"===typeof n?t+=".".concat(n):n.startsWith("(")?t.endsWith(")")?t="".concat(t.slice(0,-1),", ").concat(n.slice(1)):t+=n:t+=".".concat(n);return t=t.replace(/id = [^,]+, /,"").replace(/id = [^)]+/,""),t.startsWith(".")?t.slice(1):t}(t),o=e.split("\n").map(((e,t)=>0===t?e:"  ".concat(e))).join("\n");super(t?"At ".concat(n,": ").concat(o):o),wr(this,"name","ValidationError"),this.rawMessage=e,this.path=t}}function _s(e,t){try{return t()}catch(n){if(n instanceof Ss)throw new Ss(n.rawMessage,[e,...n.path]);throw new Ss(n.toString(),[e])}}function ks(e){if(null===e)return"null";if(Array.isArray(e))return"an array";const t=typeof e;switch(t){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return"a ".concat(t);case"object":return"an ".concat(t);case"undefined":return"undefined";default:ui(t)}}class Cs{constructor(e,t){this.validationFn=e,this.validateUsingKnownGoodVersionFn=t}validate(e){return this.validationFn(e)}validateUsingKnownGoodVersion(e,t){return Object.is(e,t)?e:this.validateUsingKnownGoodVersionFn?this.validateUsingKnownGoodVersionFn(e,t):this.validate(t)}isValid(e){try{return this.validate(e),!0}catch{return!1}}nullable(){return e=this,new Cs((t=>null===t?null:e.validate(t)),((t,n)=>null===n?null:e.validateUsingKnownGoodVersion&&null!==t?e.validateUsingKnownGoodVersion(t,n):e.validate(n)));var e}optional(){return Zs(this)}refine(e){return new Cs((t=>e(this.validate(t))),((t,n)=>{const o=this.validateUsingKnownGoodVersion(t,n);return Object.is(t,o)?t:e(o)}))}check(e,t){return"string"===typeof e?this.refine((n=>(_s("(check ".concat(e,")"),(()=>t(n))),n))):this.refine((t=>(e(t),t)))}}class Es extends Cs{constructor(e){super((t=>{const n=Us.validate(t);for(let o=0;o<n.length;o++)_s(o,(()=>e.validate(n[o])));return n}),((t,n)=>{if(!e.validateUsingKnownGoodVersion)return this.validate(n);const o=Us.validate(n);let r=t.length!==o.length;for(let i=0;i<o.length;i++){const n=o[i];if(i>=t.length){r=!0,_s(i,(()=>e.validate(n)));continue}if(Object.is(t[i],n))continue;const s=_s(i,(()=>e.validateUsingKnownGoodVersion(t[i],n)));Object.is(s,t[i])||(r=!0)}return r?n:t})),this.itemValidator=e}nonEmpty(){return this.check((e=>{if(0===e.length)throw new Ss("Expected a non-empty array")}))}lengthGreaterThan1(){return this.check((e=>{if(e.length<=1)throw new Ss("Expected an array with length greater than 1")}))}}class Is extends Cs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super((n=>{if("object"!==typeof n||null===n)throw new Ss("Expected object, got ".concat(ks(n)));for(const[t,o]of Object.entries(e))_s(t,(()=>{o.validate(ki(n,t))}));if(!t)for(const t of Object.keys(n))if(!_i(e,t))throw new Ss("Unexpected property",[t]);return n}),((n,o)=>{if("object"!==typeof o||null===o)throw new Ss("Expected object, got ".concat(ks(o)));let r=!1;for(const[t,i]of Object.entries(e)){const e=ki(n,t),s=ki(o,t);if(Object.is(e,s))continue;const a=_s(t,(()=>{const t=i;return t.validateUsingKnownGoodVersion?t.validateUsingKnownGoodVersion(e,s):t.validate(s)}));Object.is(a,e)||(r=!0)}if(!t)for(const t of Object.keys(o))if(!_i(e,t))throw new Ss("Unexpected property",[t]);for(const e of Object.keys(n))if(!_i(o,e)){r=!0;break}return r?o:n})),this.config=e,this.shouldAllowUnknownProperties=t}allowUnknownProperties(){return new Is(this.config,!0)}extend(e){return new Is({...this.config,...e})}}class Ts extends Cs{constructor(e,t,n){super((t=>{this.expectObject(t);const{matchingSchema:n,variant:o}=this.getMatchingSchemaAndVariant(t);return void 0===n?this.unknownValueValidation(t,o):_s("(".concat(e," = ").concat(o,")"),(()=>n.validate(t)))}),((t,n)=>{this.expectObject(n),this.expectObject(t);const{matchingSchema:o,variant:r}=this.getMatchingSchemaAndVariant(n);return void 0===o?this.unknownValueValidation(n,r):ki(t,e)!==ki(n,e)?_s("(".concat(e," = ").concat(r,")"),(()=>o.validate(n))):_s("(".concat(e," = ").concat(r,")"),(()=>o.validateUsingKnownGoodVersion?o.validateUsingKnownGoodVersion(t,n):o.validate(n)))})),this.key=e,this.config=t,this.unknownValueValidation=n}expectObject(e){if("object"!==typeof e||null===e)throw new Ss("Expected an object, got ".concat(ks(e)),[])}getMatchingSchemaAndVariant(e){const t=ki(e,this.key);if("string"!==typeof t)throw new Ss('Expected a string for key "'.concat(this.key,'", got ').concat(ks(t)));return{matchingSchema:_i(this.config,t)?this.config[t]:void 0,variant:t}}validateUnknownVariants(e){return new Ts(this.key,this.config,e)}}class Ps extends Cs{constructor(e,t){super((n=>{if("object"!==typeof n||null===n)throw new Ss("Expected object, got ".concat(ks(n)));for(const[o,r]of Object.entries(n))_s(o,(()=>{e.validate(o),t.validate(r)}));return n}),((n,o)=>{if("object"!==typeof o||null===o)throw new Ss("Expected object, got ".concat(ks(o)));let r=!1;for(const[i,s]of Object.entries(o)){if(!_i(n,i)){r=!0,_s(i,(()=>{e.validate(i),t.validate(s)}));continue}const o=ki(n,i),a=s;if(Object.is(o,a))continue;const l=_s(i,(()=>t.validateUsingKnownGoodVersion?t.validateUsingKnownGoodVersion(o,a):t.validate(a)));Object.is(l,o)||(r=!0)}for(const e of Object.keys(n))if(!_i(o,e)){r=!0;break}return r?o:n})),this.keyValidator=e,this.valueValidator=t}}function As(e){return new Cs((t=>{if(typeof t!==e)throw new Ss("Expected ".concat(e,", got ").concat(ks(t)));return t}))}new Cs((e=>e));const Ms=new Cs((e=>e)),js=As("string"),Os=As("number").check((e=>{if(Number.isNaN(e))throw new Ss("Expected a number, got NaN");if(!Number.isFinite(e))throw new Ss("Expected a finite number, got ".concat(e))})),Ls=Os.check((e=>{if(e<0)throw new Ss("Expected a positive number, got ".concat(e))})),Bs=Os.check((e=>{if(e<=0)throw new Ss("Expected a non-zero positive number, got ".concat(e))})),Rs=Os.check((e=>{if(!Number.isInteger(e))throw new Ss("Expected an integer, got ".concat(e))})),Ns=Rs.check((e=>{if(e<0)throw new Ss("Expected a positive integer, got ".concat(e))})),Ds=Rs.check((e=>{if(e<=0)throw new Ss("Expected a non-zero positive integer, got ".concat(e))})),zs=As("boolean");As("bigint");function Fs(e){return new Cs((t=>{if(t!==e)throw new Ss("Expected ".concat(e,", got ").concat(JSON.stringify(t)));return e}))}const Us=new Cs((e=>{if(!Array.isArray(e))throw new Ss("Expected an array, got ".concat(ks(e)));return e}));function Hs(e){return new Es(e)}new Cs((e=>{if("object"!==typeof e||null===e)throw new Ss("Expected object, got ".concat(ks(e)));return e}));function Vs(e){return new Is(e)}function Ws(e){return"object"===typeof e&&null!==e&&(e.constructor===Object||!e.constructor)}function Ks(e){return null===e||"number"===typeof e||"string"===typeof e||"boolean"===typeof e||(Array.isArray(e)?e.every(Ks):!!Ws(e)&&Object.values(e).every(Ks))}const Gs=new Cs((e=>{if(Ks(e))return e;throw new Ss("Expected json serializable value, got ".concat(typeof e))}),((e,t)=>{if(Array.isArray(e)&&Array.isArray(t)){let n=e.length!==t.length;for(let o=0;o<t.length;o++){if(o>=e.length){n=!0,Gs.validate(t[o]);continue}const r=e[o],i=t[o];if(Object.is(r,i))continue;const s=Gs.validateUsingKnownGoodVersion(r,i);Object.is(s,r)||(n=!0)}return n?t:e}if(Ws(e)&&Ws(t)){let n=!1;for(const o of Object.keys(t)){if(!_i(e,o)){n=!0,Gs.validate(t[o]);continue}const r=e[o],i=t[o];if(Object.is(r,i))continue;const s=Gs.validateUsingKnownGoodVersion(r,i);Object.is(s,r)||(n=!0)}for(const o of Object.keys(e))if(!_i(t,o)){n=!0;break}return n?t:e}return Gs.validate(t)}));function qs(e,t){return new Ps(e,t)}function Ys(e,t){return new Ts(e,t,((n,o)=>{throw new Ss("Expected one of ".concat(Object.keys(t).map((e=>JSON.stringify(e))).join(" or "),", got ").concat(JSON.stringify(o)),[e])}))}function Xs(e,t){return new Cs((n=>_s(e,(()=>t.validate(n)))),((n,o)=>_s(e,(()=>t.validateUsingKnownGoodVersion?t.validateUsingKnownGoodVersion(n,o):t.validate(o)))))}function $s(e){return new Cs((t=>{if(!e.has(t)){const n=Array.from(e,(e=>JSON.stringify(e))).join(" or ");throw new Ss("Expected ".concat(n,", got ").concat(t))}return t}))}function Zs(e){return new Cs((t=>{if(void 0!==t)return e.validate(t)}),((t,n)=>{if((void 0!==t||void 0!==n)&&void 0!==n)return e.validateUsingKnownGoodVersion&&void 0!==t?e.validateUsingKnownGoodVersion(t,n):e.validate(n)}))}function Qs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $s(new Set(t))}function Js(e){try{return new URL(e)}catch(t){if(e.startsWith("/")||e.startsWith("./"))try{return new URL(e,"http://example.com")}catch(n){throw new Ss("Expected a valid url, got ".concat(JSON.stringify(e)))}throw new Ss("Expected a valid url, got ".concat(JSON.stringify(e)))}}const ea=new Set(["http:","https:","mailto:"]),ta=js.check((e=>{if(""===e)return;const t=Js(e);if(!ea.has(t.protocol.toLowerCase()))throw new Ss("Expected a valid url, got ".concat(JSON.stringify(e)," (invalid protocol)"))})),na=new Set(["http:","https:","data:"]),oa=js.check((e=>{if(""===e)return;const t=Js(e);if(!na.has(t.protocol.toLowerCase()))throw new Ss("Expected a valid url, got ".concat(JSON.stringify(e)," (invalid protocol)"))})),ra=js.refine((e=>{try{return function(e){qi(e)}(e),e}catch{throw new Ss("Expected an index key, got ".concat(JSON.stringify(e)))}}));function ia(e){return js.refine((t=>{if(!t.startsWith("".concat(e,":")))throw new Error("".concat(e,' ID must start with "').concat(e,':"'));return t}))}const sa=ia("asset");function aa(e,t){return Vs({id:sa,typeName:Fs("asset"),type:Fs(e),props:t,meta:Gs})}const la=Xs("camera",Vs({typeName:Fs("camera"),id:ia("camera"),x:Os,y:Os,z:Os,meta:Gs})),ca=1,da=vs({currentVersion:ca,migrators:{[ca]:{up:e=>({...e,meta:{}}),down:e=>{let{meta:t,...n}=e;return{...n}}}}}),ua=ls("camera",{validator:la,migrations:da,scope:"session"}).withDefaultProperties((()=>({x:0,y:0,z:1,meta:{}}))),ha=Vs({x:Os,y:Os,z:Os.optional()}),pa=Vs({x:Os,y:Os,w:Os,h:Os}),fa=$s(new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate","zoom-in","zoom-out"])),ga=Vs({type:fa,rotation:Os}),ma=Os.check((e=>{if(e<0||e>1)throw new Ss("Opacity must be between 0 and 1")})),va=$s(new Set(["accent","white","black","selection-stroke","selection-fill","laser","muted-1"])),ya=new Set(["starting","paused","active","stopping"]),ba=Vs({id:js,points:Hs(ha),size:Ls,color:va,opacity:Os,state:$s(ya),delay:Os,shrink:Os,taper:zs}),wa=ia("page"),xa=Xs("page",Vs({typeName:Fs("page"),id:wa,name:js,index:ra,meta:Gs})),Sa=1,_a=vs({currentVersion:Sa,migrators:{[Sa]:{up:e=>({...e,meta:{}}),down:e=>{let{meta:t,...n}=e;return{...n}}}}}),ka=ls("page",{validator:xa,migrations:_a,scope:"document"}).withDefaultProperties((()=>({meta:{}})));function Ca(e){return ka.isId(e)}ia("instance");const Ea=24,Ia=vs({currentVersion:Ea,migrators:{[1]:{up:e=>({...e,exportBackground:!0}),down:e=>{let{exportBackground:t,...n}=e;return n}},[2]:{up:e=>{let{dialog:t,...n}=e;return n},down:e=>({...e,dialog:null})},[3]:{up:e=>({...e,isToolLocked:!1}),down:e=>{let{isToolLocked:t,...n}=e;return n}},[4]:{up:e=>{let{propsForNextShape:t,...n}=e;return{...n,propsForNextShape:Object.fromEntries(Object.entries(t).filter((e=>{let[t]=e;return["color","labelColor","dash","fill","size","font","align","verticalAlign","icon","geo","arrowheadStart","arrowheadEnd","spline"].includes(t)})))}},down:e=>e},[5]:{up:e=>{let{propsForNextShape:t,...n}=e;return{...n,propsForNextShape:{...t,labelColor:"black"}}},down:e=>{const{labelColor:t,...n}=e.propsForNextShape;return{...e,propsForNextShape:{...n}}}},[6]:{up:e=>({...e,followingUserId:null}),down:e=>{let{followingUserId:t,...n}=e;return n}},[7]:{up:e=>{let t=e.propsForNextShape.align;return"justify"===t&&(t="start"),{...e,propsForNextShape:{...e.propsForNextShape,align:t}}},down:e=>({...e})},[8]:{up:e=>({...e,zoomBrush:null}),down:e=>{let{zoomBrush:t,...n}=e;return n}},[9]:{up:e=>({...e,propsForNextShape:{...e.propsForNextShape,verticalAlign:"middle"}}),down:e=>{const{verticalAlign:t,...n}=e.propsForNextShape;return{...e,propsForNextShape:n}}},[10]:{up:e=>null!==e.scribble?{...e,scribble:{...e.scribble,delay:0}}:{...e},down:e=>{if(null!==e.scribble){const{delay:t,...n}=e.scribble;return{...e,scribble:n}}return{...e}}},[11]:{up:e=>{let{userId:t,...n}=e;return n},down:e=>({...e,userId:"user:none"})},[12]:{up:e=>({...e,isPenMode:!1,isGridMode:!1}),down:e=>{let{isPenMode:t,isGridMode:n,...o}=e;return o}},[13]:{up:e=>{let{propsForNextShape:{opacity:t,...n},...o}=e;return{...o,opacityForNextShape:Number(null!==t&&void 0!==t?t:"1"),propsForNextShape:n}},down:e=>{let{opacityForNextShape:t,...n}=e;return{...n,propsForNextShape:{...n.propsForNextShape,opacity:t<.175?"0.1":t<.375?"0.25":t<.625?"0.5":t<.875?"0.75":"1"}}}},[14]:{up:e=>({...e,chatMessage:"",isChatting:!1}),down:e=>{let{chatMessage:t,isChatting:n,...o}=e;return o}},[15]:{up:e=>({...e,highlightedUserIds:[]}),down:e=>{let{highlightedUserIds:t,...n}=e;return n}},[16]:{up:e=>{let{propsForNextShape:t,...n}=e;return{...n,stylesForNextShape:{}}},down:e=>{let{stylesForNextShape:t,...n}=e;return{...n,propsForNextShape:{color:"black",labelColor:"black",dash:"draw",fill:"none",size:"m",icon:"file",font:"draw",align:"middle",verticalAlign:"middle",geo:"rectangle",arrowheadStart:"none",arrowheadEnd:"arrow",spline:"line"}}}},[17]:{up:e=>({...e,meta:{}}),down:e=>{let{meta:t,...n}=e;return{...n}}},[18]:{up:e=>{const{color:t,...n}=e.cursor;return{...e,cursor:n}},down:e=>({...e,cursor:{...e.cursor,color:"black"}})},[19]:{up:e=>({...e,canMoveCamera:!0,isFocused:!1,devicePixelRatio:1,isCoarsePointer:!1,openMenus:[],isChangingStyle:!1,isReadOnly:!1}),down:e=>{let{canMoveCamera:t,isFocused:n,devicePixelRatio:o,isCoarsePointer:r,openMenus:i,isChangingStyle:s,isReadOnly:a,...l}=e;return{...l}}},[20]:{up:e=>{let{isReadOnly:t,...n}=e;return{...n,isReadonly:t}},down:e=>{let{isReadonly:t,...n}=e;return{...n,isReadOnly:t}}},[21]:{up:e=>({...e,isHoveringCanvas:null}),down:e=>{let{isHoveringCanvas:t,...n}=e;return{...n}}},[22]:{up:e=>{let{scribble:t,...n}=e;return{...n,scribbles:[]}},down:e=>{let{scribbles:t,...n}=e;return{...n,scribble:null}}},[23]:{up:e=>({...e,insets:[!1,!1,!1,!1]}),down:e=>{let{insets:t,...n}=e;return{...n}}},[Ea]:{up:e=>({...e,duplicateProps:null}),down:e=>{let{duplicateProps:t,...n}=e;return{...n}}}}}),Ta="instance:instance",Pa=js.refine((e=>{if(!e.startsWith("page:")&&!e.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return e})),Aa=ia("shape");const Ma=Xs("instance_page_state",Vs({typeName:Fs("instance_page_state"),id:ia("instance_page_state"),pageId:wa,selectedShapeIds:Hs(Aa),hintingShapeIds:Hs(Aa),erasingShapeIds:Hs(Aa),hoveredShapeId:Aa.nullable(),editingShapeId:Aa.nullable(),croppingShapeId:Aa.nullable(),focusedGroupId:Aa.nullable(),meta:Gs})),ja=5,Oa=vs({currentVersion:ja,migrators:{[1]:{up:e=>({...e,croppingShapeId:null}),down(e){let{croppingShapeId:t,...n}=e;return n}},[2]:{up(e){let{instanceId:t,cameraId:n,...o}=e;return o},down:e=>({...e,instanceId:Ta,cameraId:ua.createId("void")})},[3]:{up:e=>({...e,meta:{}}),down:e=>{let{meta:t,...n}=e;return{...n}}},[4]:{up:e=>{const{selectedShapeIds:t,hintingShapeIds:n,erasingShapeIds:o,hoveredShapeId:r,editingShapeId:i,croppingShapeId:s,focusedGroupId:a,...l}=e;return{selectedShapeIds:t,hintingShapeIds:n,erasingShapeIds:o,hoveredShapeId:r,editingShapeId:i,croppingShapeId:s,focusedGroupId:a,...l}},down:e=>{const{selectedShapeIds:t,hintingShapeIds:n,erasingShapeIds:o,hoveredShapeId:r,editingShapeId:i,croppingShapeId:s,focusedGroupId:a,...l}=e;return{selectedShapeIds:t,hintingShapeIds:n,erasingShapeIds:o,hoveredShapeId:r,editingShapeId:i,croppingShapeId:s,focusedGroupId:a,...l}}},[ja]:{up:e=>{var t;const{selectedIds:n,hintingIds:o,erasingIds:r,hoveredId:i,editingId:s,croppingShapeId:a,croppingId:l,focusLayerId:c,...d}=e;return{...d,selectedShapeIds:n,hintingShapeIds:o,erasingShapeIds:r,hoveredShapeId:i,editingShapeId:s,croppingShapeId:null!==(t=null!==a&&void 0!==a?a:l)&&void 0!==t?t:null,focusedGroupId:c}},down:e=>{const{selectedShapeIds:t,hintingShapeIds:n,erasingShapeIds:o,hoveredShapeId:r,editingShapeId:i,croppingShapeId:s,focusedGroupId:a,...l}=e;return{...l,selectedIds:t,hintingIds:n,erasingIds:o,hoveredId:r,editingId:i,croppingId:s,focusLayerId:a}}}}}),La=ls("instance_page_state",{migrations:Oa,validator:Ma,scope:"session"}).withDefaultProperties((()=>({editingShapeId:null,croppingShapeId:null,selectedShapeIds:[],hoveredShapeId:null,erasingShapeIds:[],hintingShapeIds:[],focusedGroupId:null,meta:{}}))),Ba=Xs("pointer",Vs({typeName:Fs("pointer"),id:ia("pointer"),x:Os,y:Os,lastActivityTimestamp:Os,meta:Gs})),Ra=1,Na=vs({currentVersion:Ra,migrators:{[Ra]:{up:e=>({...e,meta:{}}),down:e=>{let{meta:t,...n}=e;return{...n}}}}}),Da=ls("pointer",{validator:Ba,migrations:Na,scope:"session"}).withDefaultProperties((()=>({x:0,y:0,lastActivityTimestamp:0,meta:{}}))),za=Da.createId("pointer"),Fa=Xs("instance_presence",Vs({typeName:Fs("instance_presence"),id:ia("instance_presence"),userId:js,userName:js,lastActivityTimestamp:Os,followingUserId:js.nullable(),cursor:Vs({x:Os,y:Os,type:fa,rotation:Os}),color:js,camera:Vs({x:Os,y:Os,z:Os}),screenBounds:pa,selectedShapeIds:Hs(ia("shape")),currentPageId:ia("page"),brush:pa.nullable(),scribbles:Hs(ba),chatMessage:js,meta:Gs})),Ua=5,Ha=vs({currentVersion:Ua,migrators:{[1]:{up:e=>null!==e.scribble?{...e,scribble:{...e.scribble,delay:0}}:{...e},down:e=>{if(null!==e.scribble){const{delay:t,...n}=e.scribble;return{...e,scribble:n}}return{...e}}},[2]:{up:e=>{let{instanceId:t,...n}=e;return n},down:e=>({...e,instanceId:Ta})},[3]:{up:e=>({...e,chatMessage:""}),down:e=>{let{chatMessage:t,...n}=e;return n}},[4]:{up:e=>({...e,meta:{}}),down:e=>{let{meta:t,...n}=e;return{...n}}},[Ua]:{up:e=>{const{selectedShapeIds:t,...n}=e;return{selectedShapeIds:t,...n}},down:e=>{const{selectedShapeIds:t,...n}=e;return{selectedShapeIds:t,...n}}}}}),Va=ls("instance_presence",{migrations:Ha,validator:Fa,scope:"presence"}).withDefaultProperties((()=>({lastActivityTimestamp:0,followingUserId:null,color:"#FF0000",camera:{x:0,y:0,z:1},cursor:{x:0,y:0,type:"default",rotation:0},screenBounds:{x:0,y:0,w:1,h:1},selectedShapeIds:[],brush:null,scribbles:[],chatMessage:"",meta:{}}))),Wa=Xs("document",Vs({typeName:Fs("document"),id:Fs("document:document"),gridSize:Os,name:js,meta:Gs})),Ka=2,Ga=vs({currentVersion:Ka,migrators:{[1]:{up:e=>({...e,name:""}),down:e=>{let{name:t,...n}=e;return n}},[Ka]:{up:e=>({...e,meta:{}}),down:e=>{let{meta:t,...n}=e;return{...n}}}}}),qa=ls("document",{migrations:Ga,validator:Wa,scope:"document"}).withDefaultProperties((()=>({gridSize:10,name:"",meta:{}}))),Ya=qa.createId("document");function Xa(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function $a(e){"asset"===e.typeName&&("src"in e&&(e.src="<redacted>"),"src"in e.props&&(e.props.src="<redacted>"))}const Za=e=>{let{error:t,phase:n,record:o,recordBefore:r}=e;throw mi(t,{tags:{origin:"store.validateRecord",storePhase:n,isExistingValidationIssue:"initialize"===n},extras:{recordBefore:r?$a(is(r)):void 0,recordAfter:$a(is(o))}}),t};function Qa(e){const t=e.query.ids("page"),n=()=>{if(!e.has(Ya))return e.put([qa.create({id:Ya,name:e.props.defaultName})]),n();if(!e.has(za))return e.put([Da.create({id:za})]),n();const o=t.get();if(0===o.size)return e.put([ka.create({id:"page:page",name:"Page 1",index:"a1",meta:{}})]),n();const r=()=>[...o].map((t=>e.get(t))).sort(Xa)[0].id,i=e.get(Ta);if(!i)return e.put([e.schema.types.instance.create({id:Ta,currentPageId:r(),exportBackground:!0})]),n();if(!o.has(i.currentPageId))return e.put([{...i,currentPageId:r()}]),n();const s=new Set,a=new Set;for(const t of o){const n=La.createId(t);e.has(n)||s.add(n);const o=ua.createId(t);e.has(o)||a.add(o)}s.size>0&&e.put([...s].map((e=>La.create({id:e,pageId:La.parseId(e)})))),a.size>0&&e.put([...a].map((e=>ua.create({id:e}))))};return n}const Ja=aa("bookmark",Vs({title:js,description:js,image:js,src:oa.nullable()})),el=1,tl=vs({currentVersion:el,migrators:{[el]:{up:e=>{const t=e.props.src;return t&&!oa.isValid(t)?{...e,props:{...e.props,src:""}}:e},down:e=>e}}}),nl=aa("image",Vs({w:Os,h:Os,name:js,isAnimated:zs,mimeType:js.nullable(),src:oa.nullable()})),ol=3,rl=vs({currentVersion:ol,migrators:{[1]:{up:e=>({...e,props:{...e.props,isAnimated:!1}}),down:e=>{const{isAnimated:t,...n}=e.props;return{...e,props:n}}},[2]:{up:e=>{const{width:t,height:n,...o}=e.props;return{...e,props:{w:t,h:n,...o}}},down:e=>{const{w:t,h:n,...o}=e.props;return{...e,props:{width:t,height:n,...o}}}},[ol]:{up:e=>{const t=e.props.src;return t&&!oa.isValid(t)?{...e,props:{...e.props,src:""}}:e},down:e=>e}}}),il=aa("video",Vs({w:Os,h:Os,name:js,isAnimated:zs,mimeType:js.nullable(),src:oa.nullable()})),sl=3,al=vs({currentVersion:sl,migrators:{[1]:{up:e=>({...e,props:{...e.props,isAnimated:!1}}),down:e=>{const{isAnimated:t,...n}=e.props;return{...e,props:n}}},[2]:{up:e=>{const{width:t,height:n,...o}=e.props;return{...e,props:{w:t,h:n,...o}}},down:e=>{const{w:t,h:n,...o}=e.props;return{...e,props:{width:t,height:n,...o}}}},[sl]:{up:e=>{const t=e.props.src;return t&&!oa.isValid(t)?{...e,props:{...e.props,src:""}}:e},down:e=>e}}}),ll=Xs("asset",Ys("type",{image:nl,video:il,bookmark:Ja})),cl=1,dl=vs({subTypeKey:"type",subTypeMigrations:{image:rl,video:al,bookmark:tl},currentVersion:cl,migrators:{[cl]:{up:e=>({...e,meta:{}}),down:e=>{let{meta:t,...n}=e;return{...n}}}}}),ul=ls("asset",{migrations:dl,validator:ll,scope:"document"}).withDefaultProperties((()=>({meta:{}})));let hl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")};class pl{constructor(e,t,n){this.id=e,this.defaultValue=t,this.type=n}static define(e,t){const{defaultValue:n,type:o=Ms}=t;return new pl(e,n,o)}static defineEnum(e,t){const{defaultValue:n,values:o}=t;return new fl(e,n,o)}validate(e){return this.type.validate(e)}validateUsingKnownGoodVersion(e,t){return this.type.validateUsingKnownGoodVersion?this.type.validateUsingKnownGoodVersion(e,t):this.validate(t)}}class fl extends pl{constructor(e,t,n){super(e,t,Qs(...n)),this.values=n}}const gl=3,ml=vs({currentVersion:gl,migrators:{[1]:{up:e=>({...e,isLocked:!1}),down:e=>{const{isLocked:t,...n}=e;return{...n}}},[2]:{up:e=>{let{props:{opacity:t,...n},...o}=e;return{...o,opacity:Number(null!==t&&void 0!==t?t:"1"),props:n}},down:e=>{let{opacity:t,...n}=e;return{...n,props:{...n.props,opacity:t<.175?"0.1":t<.375?"0.25":t<.625?"0.5":t<.875?"0.75":"1"}}}},[gl]:{up:e=>({...e,meta:{}}),down:e=>{let{meta:t,...n}=e;return{...n}}}}});function vl(e){return!!e&&"shape"===e.typeName}function yl(e){return!!e&&e.startsWith("shape:")}function bl(e){return"shape:".concat(null!==e&&void 0!==e?e:hl())}function wl(e){const t=new Map;for(const[n,o]of Object.entries(e))if(o instanceof pl){if(t.has(o))throw new Error("Duplicate style prop ".concat(o.id,". Each style prop can only be used once within a shape."));t.set(o,n)}return t}function xl(e){return ls("shape",{migrations:vs({currentVersion:ml.currentVersion,firstVersion:ml.firstVersion,migrators:ml.migrators,subTypeKey:"type",subTypeMigrations:Mi(e,((e,t)=>{var n;return null!==(n=t.migrations)&&void 0!==n?n:vs({})}))}),scope:"document",validator:Xs("shape",Ys("type",Mi(e,((e,t)=>{let{props:n,meta:o}=t;return function(e,t,n){return Vs({id:Aa,typeName:Fs("shape"),x:Os,y:Os,rotation:Os,index:ra,parentId:Pa,type:Fs(e),isLocked:zs,opacity:ma,props:t?Vs(t):Gs,meta:n?Vs(n):Gs})}(e,n,o)}))))}).withDefaultProperties((()=>({x:0,y:0,rotation:0,isLocked:!1,opacity:1,meta:{}})))}const Sl=["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red"],_l={lightMode:{id:"light",text:"#000000",background:"rgb(249, 250, 251)",solid:"#fcfffe",black:{solid:"#1d1d1d",semi:"#e8e8e8",pattern:"#494949",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}},blue:{solid:"#4263eb",semi:"#dce1f8",pattern:"#6681ee",highlight:{srgb:"#10acff",p3:"color(display-p3 0.308 0.6632 0.9996)"}},green:{solid:"#099268",semi:"#d3e9e3",pattern:"#39a785",highlight:{srgb:"#00ffc8",p3:"color(display-p3 0.2536 0.984 0.7981)"}},grey:{solid:"#adb5bd",semi:"#eceef0",pattern:"#bcc3c9",highlight:{srgb:"#cbe7f1",p3:"color(display-p3 0.8163 0.9023 0.9416)"}},"light-blue":{solid:"#4dabf7",semi:"#ddedfa",pattern:"#6fbbf8",highlight:{srgb:"#00f4ff",p3:"color(display-p3 0.1512 0.9414 0.9996)"}},"light-green":{solid:"#40c057",semi:"#dbf0e0",pattern:"#65cb78",highlight:{srgb:"#65f641",p3:"color(display-p3 0.563 0.9495 0.3857)"}},"light-red":{solid:"#ff8787",semi:"#f4dadb",pattern:"#fe9e9e",highlight:{srgb:"#ff7fa3",p3:"color(display-p3 0.9988 0.5301 0.6397)"}},"light-violet":{solid:"#e599f7",semi:"#f5eafa",pattern:"#e9acf8",highlight:{srgb:"#ff88ff",p3:"color(display-p3 0.9676 0.5652 0.9999)"}},orange:{solid:"#f76707",semi:"#f8e2d4",pattern:"#f78438",highlight:{srgb:"#ffa500",p3:"color(display-p3 0.9988 0.6905 0.266)"}},red:{solid:"#e03131",semi:"#f4dadb",pattern:"#e55959",highlight:{srgb:"#ff636e",p3:"color(display-p3 0.9992 0.4376 0.45)"}},violet:{solid:"#ae3ec9",semi:"#ecdcf2",pattern:"#bd63d3",highlight:{srgb:"#c77cff",p3:"color(display-p3 0.7469 0.5089 0.9995)"}},yellow:{solid:"#ffc078",semi:"#f9f0e6",pattern:"#fecb92",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}}},darkMode:{id:"dark",text:"hsl(210, 17%, 98%)",background:"hsl(240, 5%, 8%)",solid:"#010403",black:{solid:"#e1e1e1",semi:"#2c3036",pattern:"#989898",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}},blue:{solid:"#4263eb",semi:"#262d40",pattern:"#3a4b9e",highlight:{srgb:"#0079d2",p3:"color(display-p3 0.0032 0.4655 0.7991)"}},green:{solid:"#099268",semi:"#253231",pattern:"#366a53",highlight:{srgb:"#009774",p3:"color(display-p3 0.0085 0.582 0.4604)"}},grey:{solid:"#9398b0",semi:"#33373c",pattern:"#7c8187",highlight:{srgb:"#9cb4cb",p3:"color(display-p3 0.6299 0.7012 0.7856)"}},"light-blue":{solid:"#4dabf7",semi:"#2a3642",pattern:"#4d7aa9",highlight:{srgb:"#00bdc8",p3:"color(display-p3 0.0023 0.7259 0.7735)"}},"light-green":{solid:"#40c057",semi:"#2a3830",pattern:"#4e874e",highlight:{srgb:"#00a000",p3:"color(display-p3 0.2711 0.6172 0.0195)"}},"light-red":{solid:"#ff8787",semi:"#3b3235",pattern:"#a56767",highlight:{srgb:"#db005b",p3:"color(display-p3 0.7849 0.0585 0.3589)"}},"light-violet":{solid:"#e599f7",semi:"#383442",pattern:"#9770a9",highlight:{srgb:"#c400c7",p3:"color(display-p3 0.7024 0.0403 0.753)"}},orange:{solid:"#f76707",semi:"#3a2e2a",pattern:"#9f552d",highlight:{srgb:"#d07a00",p3:"color(display-p3 0.7699 0.4937 0.0085)"}},red:{solid:"#e03131",semi:"#36292b",pattern:"#8f3734",highlight:{srgb:"#de002c",p3:"color(display-p3 0.7978 0.0509 0.2035)"}},violet:{solid:"#ae3ec9",semi:"#31293c",pattern:"#763a8b",highlight:{srgb:"#9e00ee",p3:"color(display-p3 0.5651 0.0079 0.8986)"}},yellow:{solid:"#ffc034",semi:"#3c3934",pattern:"#fecb92",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}}}};function kl(e){return e.isDarkMode?_l.darkMode:_l.lightMode}const Cl=pl.defineEnum("tldraw:color",{defaultValue:"black",values:Sl}),El=pl.defineEnum("tldraw:labelColor",{defaultValue:"black",values:Sl}),Il=pl.defineEnum("tldraw:dash",{defaultValue:"draw",values:["draw","solid","dashed","dotted"]}),Tl=pl.defineEnum("tldraw:fill",{defaultValue:"none",values:["none","semi","solid","pattern"]}),Pl=pl.defineEnum("tldraw:font",{defaultValue:"draw",values:["draw","sans","serif","mono"]}),Al={draw:"'tldraw_draw', sans-serif",sans:"'tldraw_sans', sans-serif",serif:"'tldraw_serif', serif",mono:"'tldraw_mono', monospace"},Ml=pl.defineEnum("tldraw:size",{defaultValue:"m",values:["s","m","l","xl"]}),jl=["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"],Ol=pl.defineEnum("tldraw:arrowheadStart",{defaultValue:"none",values:jl}),Ll=pl.defineEnum("tldraw:arrowheadEnd",{defaultValue:"arrow",values:jl}),Bl=Ys("type",{binding:Vs({type:Fs("binding"),boundShapeId:Aa,normalizedAnchor:ha,isExact:zs,isPrecise:zs}),point:Vs({type:Fs("point"),x:Os,y:Os})}),Rl={labelColor:El,color:Cl,fill:Tl,dash:Il,size:Ml,arrowheadStart:Ol,arrowheadEnd:Ll,font:Pl,start:Bl,end:Bl,bend:Os,text:js,labelPosition:Os},Nl=3,Dl=vs({currentVersion:Nl,migrators:{[1]:{up:e=>({...e,props:{...e.props,labelColor:"black"}}),down:e=>{const{labelColor:t,...n}=e.props;return{...e,props:n}}},[2]:{up:e=>{const{start:t,end:n}=e.props;return{...e,props:{...e.props,start:"binding"===t.type?{...t,isPrecise:!(.5===t.normalizedAnchor.x&&.5===t.normalizedAnchor.y)}:t,end:"binding"===n.type?{...n,isPrecise:!(.5===n.normalizedAnchor.x&&.5===n.normalizedAnchor.y)}:n}}},down:e=>{const{start:t,end:n}=e.props,o={...t},r={...n};return"binding"===o.type&&(o.isPrecise||(o.normalizedAnchor={x:.5,y:.5}),delete o.isPrecise),"binding"===r.type&&(r.isPrecise||(r.normalizedAnchor={x:.5,y:.5}),delete r.isPrecise),{...e,props:{...e.props,start:o,end:r}}}},[Nl]:{up:e=>({...e,props:{...e.props,labelPosition:.5}}),down:e=>{const{labelPosition:t,...n}=e.props;return{...e,props:n}}}}}),zl={w:Bs,h:Bs,assetId:sa.nullable(),url:ta},Fl=2,Ul=vs({currentVersion:Fl,migrators:{[1]:{up:e=>void 0===e.props.assetId?{...e,props:{...e.props,assetId:null}}:e,down:e=>{if(null===e.props.assetId){const{assetId:t,...n}=e.props;return{...e,props:n}}return e}},[Fl]:{up:e=>""===e.props.url||ta.isValid(e.props.url)?e:{...e,props:{...e.props,url:""}},down:e=>e}}}),Hl=Vs({type:Qs("free","straight"),points:Hs(ha)}),Vl={color:Cl,fill:Tl,dash:Il,size:Ml,segments:Hs(Hl),isComplete:zs,isClosed:zs,isPen:zs},Wl=1,Kl=vs({currentVersion:Wl,migrators:{[Wl]:{up:e=>{const{points:t}=e.props.segments[0];if(0===t.length)return{...e,props:{...e.props,isPen:!1}};let n=!(0===t[0].z||.5===t[0].z);return t[1]&&(n=n&&!(0===t[1].z||.5===t[1].z)),{...e,props:{...e.props,isPen:n}}},down:e=>{const{isPen:t,...n}=e.props;return{...e,props:{...n}}}}}}),Gl=/(^\/r\/[^/]+\/?$)/,ql=e=>{try{return new URL(e)}catch(t){return}},Yl=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","tldraw.com","localhost:3000"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,canUnmount:!0,overridePermissions:{"allow-top-navigation":!0},toEmbedUrl:e=>{const t=ql(e);if(t&&t.pathname.match(Gl))return e},fromEmbedUrl:e=>{const t=ql(e);if(t&&t.pathname.match(Gl))return e}},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:e=>{if(e.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!e.includes("figma.com/embed"))return"https://www.figma.com/embed?embed_host=share&url=".concat(e)},fromEmbedUrl:e=>{const t=ql(e);if(t&&t.pathname.match(/^\/embed\/?$/)){const e=t.searchParams.get("url");if(e)return e}}},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:e=>{if(e.includes("/maps/")){const t=e.match(/@(.*),(.*),(.*)z/);let n;if(t){const[,o,r,i]=t,s=new URL(e).host.replace("www.","");n="https://".concat(s,"/maps/embed/v1/view?key=").concat({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NEXT_PUBLIC_GC_API_KEY,"&center=").concat(o,",").concat(r,"&zoom=").concat(i)}else n="";return n}},fromEmbedUrl:e=>{const t=ql(e);if(!t)return;if(t.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&t.searchParams.has("center")&&t.searchParams.get("zoom")){const e=t.searchParams.get("zoom"),[n,o]=t.searchParams.get("center").split(",");return"https://www.google.com/maps/@".concat(n,",").concat(o,",").concat(e,"z")}}},{type:"val_town",title:"Val Town",hostnames:["val.town"],minWidth:260,minHeight:100,width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:e=>{const t=ql(e),n=t&&t.pathname.match(/\/v\/([^/]+)\/?/);if(n)return"https://www.val.town/embed/".concat(n[1])},fromEmbedUrl:e=>{const t=ql(e),n=t&&t.pathname.match(/\/embed\/([^/]+)\/?/);if(n)return"https://www.val.town/v/".concat(n[1])}},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:e=>{const t=ql(e),n=t&&t.pathname.match(/\/s\/([^/]+)\/?/);if(n)return"https://codesandbox.io/embed/".concat(n[1])},fromEmbedUrl:e=>{const t=ql(e),n=t&&t.pathname.match(/\/embed\/([^/]+)\/?/);if(n)return"https://codesandbox.io/s/".concat(n[1])}},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,canUnmount:!1,toEmbedUrl:e=>{const t=e.match(/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/);if(t){const[e,n,o]=t;return"https://codepen.io/".concat(n,"/embed/").concat(o)}},fromEmbedUrl:e=>{const t=e.match(/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/);if(t){const[e,n,o]=t;return"https://codepen.io/".concat(n,"/pen/").concat(o)}}},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,canUnmount:!1,toEmbedUrl:e=>{const t=e.match(/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/);if(t){const[e,n]=t;return"https://scratch.mit.edu/projects/embed/".concat(n)}},fromEmbedUrl:e=>{const t=e.match(/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/);if(t){const[e,n]=t;return"https://scratch.mit.edu/projects/".concat(n)}}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,canUnmount:!1,overridePermissions:{"allow-presentation":!0},isAspectRatioLocked:!0,toEmbedUrl:e=>{const t=ql(e);if(!t)return;const n=t.hostname.replace(/^www./,"");if("youtu.be"===n){const e=t.pathname.split("/").filter(Boolean)[0];return"https://www.youtube.com/embed/".concat(e)}if(("youtube.com"===n||"m.youtube.com"===n)&&t.pathname.match(/^\/watch/)){const e=t.searchParams.get("v");return"https://www.youtube.com/embed/".concat(e)}},fromEmbedUrl:e=>{const t=ql(e);if(!t)return;if("youtube.com"===t.hostname.replace(/^www./,"")){const e=t.pathname.match(/^\/embed\/([^/]+)\/?/);if(e)return"https://www.youtube.com/watch?v=".concat(e[1])}}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,canUnmount:!1,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",toEmbedUrl:e=>{const t=ql(e),n=null===t||void 0===t?void 0:t.searchParams.get("cid");if(null!==t&&void 0!==t&&t.pathname.match(/\/calendar\/u\/0/)&&n){t.pathname="/calendar/embed";const e=Array.from(t.searchParams.keys());for(const n of e)t.searchParams.delete(n);return t.searchParams.set("src",n),t.href}},fromEmbedUrl:e=>{const t=ql(e),n=null===t||void 0===t?void 0:t.searchParams.get("src");if(null!==t&&void 0!==t&&t.pathname.match(/\/calendar\/embed/)&&n){t.pathname="/calendar/u/0";const e=Array.from(t.searchParams.keys());for(const n of e)t.searchParams.delete(n);return t.searchParams.set("cid",n),t.href}}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,canUnmount:!1,toEmbedUrl:e=>{const t=ql(e);if(null!==t&&void 0!==t&&t.pathname.match(/^\/presentation/)&&null!==t&&void 0!==t&&t.pathname.match(/\/pub\/?$/)){t.pathname=t.pathname.replace(/\/pub$/,"/embed");const e=Array.from(t.searchParams.keys());for(const n of e)t.searchParams.delete(n);return t.href}},fromEmbedUrl:e=>{const t=ql(e);if(null!==t&&void 0!==t&&t.pathname.match(/^\/presentation/)&&null!==t&&void 0!==t&&t.pathname.match(/\/embed\/?$/)){t.pathname=t.pathname.replace(/\/embed$/,"/pub");const e=Array.from(t.searchParams.keys());for(const n of e)t.searchParams.delete(n);return t.href}}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:e=>{const t=ql(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/)){if(!e.split("/").pop())return;return e}},fromEmbedUrl:e=>{const t=ql(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/)){if(!e.split("/").pop())return;return e}}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:e=>{const t=ql(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/))return"".concat(e,"?embed=true")},fromEmbedUrl:e=>{const t=ql(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/)&&t.searchParams.has("embed"))return t.searchParams.delete("embed"),t.href}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:e=>{const t=ql(e);if(t&&t.pathname.match(/^\/map\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:e=>{const t=ql(e);if(t&&t.pathname.match(/^\/embed\/map\//))return t.pathname=t.pathname.replace(/^\/embed/,""),t.href}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,canUnmount:!1,toEmbedUrl:e=>{const t=ql(e);if(t&&t.pathname.match(/^\/(artist|album)\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:e=>{const t=ql(e);if(t&&t.pathname.match(/^\/embed\/(artist|album)\//))return t.origin+t.pathname.replace(/^\/embed/,"")}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!0,toEmbedUrl:e=>{const t=ql(e);if(t&&"vimeo.com"===t.hostname&&t.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+t.pathname.split("/")[1]+"?title=0&byline=0"},fromEmbedUrl:e=>{const t=ql(e);if(t&&"player.vimeo.com"===t.hostname){const e=t.pathname.match(/^\/video\/([^/]+)\/?$/);if(e)return"https://vimeo.com/"+e[1]}}},{type:"excalidraw",title:"Excalidraw",hostnames:["excalidraw.com"],width:720,height:500,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!0,toEmbedUrl:e=>{const t=ql(e);if(t&&t.hash.match(/#room=/))return e},fromEmbedUrl:e=>{const t=ql(e);if(t&&t.hash.match(/#room=/))return e}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!1,backgroundColor:"#fff",toEmbedUrl:e=>{const t=ql(e);if(t&&t.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return"".concat(t.origin,"/embed").concat(t.pathname,"?cell=*");if(t&&t.pathname.match(/^\/d\/([^/]+)\/?$/)){const e=t.pathname.replace(/^\/d/,"");return"".concat(t.origin,"/embed").concat(e,"?cell=*")}},fromEmbedUrl:e=>{const t=ql(e);return t&&t.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/)?"".concat(t.origin).concat(t.pathname.replace("/embed",""),"#cell-*"):t&&t.pathname.match(/^\/embed\/([^/]+)\/?$/)?"".concat(t.origin).concat(t.pathname.replace("/embed","/d"),"#cell-*"):void 0}}],Xl={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},$l={w:Bs,h:Bs,url:js},Zl=4,Ql=vs({currentVersion:Zl,migrators:{[1]:{up:e=>{var t;const n=e.props.url,o=new URL(n).host.replace("www.","");let r;for(const s of Yl)if(s.hostnames.includes(o))try{r=s.fromEmbedUrl(n)}catch(i){console.warn(i)}return{...e,props:{...e.props,tmpOldUrl:e.props.url,url:null!==(t=r)&&void 0!==t?t:""}}},down:e=>{var t;let n=e.props.tmpOldUrl;if(!n||""===n){const t=e.props.url,o=new URL(t).host.replace("www.","");for(const e of Yl)if(e.hostnames.includes(o))try{n=e.toEmbedUrl(t)}catch(i){console.warn(i)}}const{tmpOldUrl:o,...r}=e.props;return{...e,props:{...r,url:null!==(t=n)&&void 0!==t?t:""}}}},[2]:{up:e=>{const{doesResize:t,...n}=e.props;return{...e,props:{...n}}},down:e=>({...e,props:{...e.props,doesResize:!0}})},[3]:{up:e=>{const{tmpOldUrl:t,...n}=e.props;return{...e,props:{...n}}},down:e=>({...e,props:{...e.props}})},[Zl]:{up:e=>{const{overridePermissions:t,...n}=e.props;return{...e,props:{...n}}},down:e=>({...e,props:{...e.props}})}}}),Jl={w:Bs,h:Bs,name:js},ec=vs({}),tc=pl.defineEnum("tldraw:horizontalAlign",{defaultValue:"middle",values:["start","middle","end","start-legacy","end-legacy","middle-legacy"]}),nc=pl.defineEnum("tldraw:verticalAlign",{defaultValue:"middle",values:["start","middle","end"]}),oc=pl.defineEnum("tldraw:geo",{defaultValue:"rectangle",values:["cloud","rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box","check-box"]}),rc={geo:oc,labelColor:El,color:Cl,fill:Tl,dash:Il,size:Ml,font:Pl,align:tc,verticalAlign:nc,url:ta,w:Bs,h:Bs,growY:Ls,text:js},ic=8,sc=vs({currentVersion:ic,migrators:{[1]:{up:e=>({...e,props:{...e.props,url:""}}),down:e=>{const{url:t,...n}=e.props;return{...e,props:n}}},[2]:{up:e=>({...e,props:{...e.props,labelColor:"black"}}),down:e=>{const{labelColor:t,...n}=e.props;return{...e,props:n}}},[3]:{up:e=>{let t=e.props.align;return"justify"===t&&(t="start"),{...e,props:{...e.props,align:t}}},down:e=>({...e})},[4]:{up:e=>({...e}),down:e=>({...e,props:{...e.props,geo:"check-box"===e.props.geo?"rectangle":e.props.geo}})},[5]:{up:e=>({...e,props:{...e.props,verticalAlign:"middle"}}),down:e=>{const{verticalAlign:t,...n}=e.props;return{...e,props:n}}},[6]:{up:e=>{let t;switch(e.props.align){case"start":t="start-legacy";break;case"end":t="end-legacy";break;default:t="middle-legacy"}return{...e,props:{...e.props,align:t}}},down:e=>{let t;switch(e.props.align){case"start-legacy":t="start";break;case"end-legacy":t="end";break;case"middle-legacy":t="middle";break;default:t=e.props.align}return{...e,props:{...e.props,align:t}}}},[7]:{up:e=>e,down:e=>{if("cloud"===e.props.geo)return{...e,props:{...e.props,geo:"rectangle"}}}},[ic]:{up:e=>""===e.props.url||ta.isValid(e.props.url)?e:{...e,props:{...e.props,url:""}},down:e=>e}}}),ac={},lc=vs({}),cc={color:Cl,size:Ml,segments:Hs(Hl),isComplete:zs,isPen:zs},dc=vs({}),uc=Vs({topLeft:ha,bottomRight:ha}),hc={w:Bs,h:Bs,playing:zs,url:ta,assetId:sa.nullable(),crop:uc.nullable()},pc=3,fc=vs({currentVersion:pc,migrators:{[1]:{up:e=>({...e,props:{...e.props,url:""}}),down:e=>{const{url:t,...n}=e.props;return{...e,props:n}}},[2]:{up:e=>({...e,props:{...e.props,crop:null}}),down:e=>{const{crop:t,...n}=e.props;return{...e,props:n}}},[pc]:{up:e=>""===e.props.url||ta.isValid(e.props.url)?e:{...e,props:{...e.props,url:""}},down:e=>e}}}),gc=pl.defineEnum("tldraw:spline",{defaultValue:"line",values:["cubic","line"]}),mc=Vs({id:js,index:ra,x:Os,y:Os}),vc={color:Cl,dash:Il,size:Ml,spline:gc,points:qs(js,mc)},yc=4,bc=vs({currentVersion:yc,migrators:{[1]:{up:e=>{const t=Ci(e.props.handles);for(const n in t)t[n].canSnap=!0;return{...e,props:{...e.props,handles:t}}},down:e=>{const t=Ci(e.props.handles);for(const n in t)delete t[n].canSnap;return{...e,props:{...e.props,handles:t}}}},[2]:{up:e=>({...e,props:{...e.props,handles:Pi(Object.values(e.props.handles).map((e=>[e.index,{x:e.x,y:e.y}])))}}),down:e=>{const t=Object.entries(e.props.handles).map((e=>{let[t,n]=e;return{index:t,...n}})).sort(ns);return{...e,props:{...e.props,handles:Object.fromEntries(t.map(((e,n)=>{const o=0===n?"start":n===t.length-1?"end":"handle:".concat(e.index);return[o,{id:o,type:"vertex",canBind:!1,canSnap:!0,index:e.index,x:e.x,y:e.y}]})))}}}},[3]:{up:e=>{const{handles:t,...n}=e.props,o=Object.entries(t).map((e=>{let[t,{x:n,y:o}]=e;return{x:n,y:o,index:t}})).sort(ns);return{...e,props:{...n,points:o.map((e=>{let{x:t,y:n}=e;return{x:t,y:n}}))}}},down:e=>{const{points:t,...n}=e.props,o=ts(t.length);return{...e,props:{...n,handles:Object.fromEntries(t.map(((e,t)=>[o[t],{x:e.x,y:e.y}])))}}}},[yc]:{up:e=>{const{points:t,...n}=e.props,o=ts(t.length);return{...e,props:{...n,points:Object.fromEntries(t.map(((e,t)=>{const n=o[t];return[n,{id:n,index:n,x:e.x,y:e.y}]})))}}},down:e=>{const t=Object.values(e.props.points).sort(ns);return{...e,props:{...e.props,points:t.map((e=>{let{x:t,y:n}=e;return{x:t,y:n}}))}}}}}}),wc={color:Cl,size:Ml,font:Pl,align:tc,verticalAlign:nc,growY:Ls,url:ta,text:js},xc=5,Sc=vs({currentVersion:xc,migrators:{[1]:{up:e=>({...e,props:{...e.props,url:""}}),down:e=>{const{url:t,...n}=e.props;return{...e,props:n}}},[2]:{up:e=>{let t=e.props.align;return"justify"===t&&(t="start"),{...e,props:{...e.props,align:t}}},down:e=>({...e})},[3]:{up:e=>{let t;switch(e.props.align){case"start":t="start-legacy";break;case"end":t="end-legacy";break;default:t="middle-legacy"}return{...e,props:{...e.props,align:t}}},down:e=>{let t;switch(e.props.align){case"start-legacy":t="start";break;case"end-legacy":t="end";break;case"middle-legacy":t="middle";break;default:t=e.props.align}return{...e,props:{...e.props,align:t}}}},[4]:{up:e=>({...e,props:{...e.props,verticalAlign:"middle"}}),down:e=>{const{verticalAlign:t,...n}=e.props;return{...e,props:n}}},[xc]:{up:e=>""===e.props.url||ta.isValid(e.props.url)?e:{...e,props:{...e.props,url:""}},down:e=>e}}}),_c={color:Cl,size:Ml,font:Pl,align:tc,w:Bs,text:js,scale:Bs,autoSize:zs},kc=1,Cc=vs({currentVersion:kc,migrators:{[kc]:{up:e=>{let t=e.props.align;return"justify"===t&&(t="start"),{...e,props:{...e.props,align:t}}},down:e=>({...e})}}}),Ec={w:Bs,h:Bs,time:Os,playing:zs,url:ta,assetId:sa.nullable()},Ic=2,Tc=vs({currentVersion:Ic,migrators:{[1]:{up:e=>({...e,props:{...e.props,url:""}}),down:e=>{const{url:t,...n}=e.props;return{...e,props:n}}},[Ic]:{up:e=>""===e.props.url||ta.isValid(e.props.url)?e:{...e,props:{...e.props,url:""}},down:e=>e}}}),Pc=4,Ac=vs({currentVersion:Pc,migrators:{[1]:{up:e=>Object.fromEntries(Object.entries(e).filter((e=>{let[t,n]=e;return"shape"!==n.typeName||"icon"!==n.type&&"code"!==n.type}))),down:e=>e},[2]:{up:e=>e,down:e=>Object.fromEntries(Object.entries(e).filter((e=>{let[t,n]=e;return"instance_presence"!==n.typeName})))},[3]:{up:e=>Object.fromEntries(Object.entries(e).filter((e=>{let[t,n]=e;return!n.typeName.match(/^(user|user_presence)$/)}))),down:e=>Object.fromEntries(Object.entries(e).filter((e=>{let[t,n]=e;return"pointer"!==n.typeName})))},[Pc]:{up:e=>Object.fromEntries(Object.entries(e).filter((e=>{let[t,n]=e;return!n.typeName.match("user_document")}))),down:e=>e}}}),Mc={arrow:{migrations:Dl,props:Rl},bookmark:{migrations:Ul,props:zl},draw:{migrations:Kl,props:Vl},embed:{migrations:Ql,props:$l},frame:{migrations:ec,props:Jl},geo:{migrations:sc,props:rc},group:{migrations:lc,props:ac},highlight:{migrations:dc,props:cc},image:{migrations:fc,props:hc},line:{migrations:bc,props:vc},note:{migrations:Sc,props:wc},text:{migrations:Cc,props:_c},video:{migrations:Tc,props:Ec}};function jc(){let{shapes:e=Mc}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Map;for(const i of Ii(e))for(const e of wl(null!==(n=i.props)&&void 0!==n?n:{}).keys()){var n;if(t.has(e.id)&&t.get(e.id)!==e)throw new Error("Multiple StyleProp instances with the same id: ".concat(e.id));t.set(e.id,e)}const o=xl(e),r=function(e){const t={};for(const[o,r]of e)t[o]=Zs(r);const n=Xs("instance",Vs({typeName:Fs("instance"),id:ia("instance"),currentPageId:wa,followingUserId:js.nullable(),brush:pa.nullable(),opacityForNextShape:ma,stylesForNextShape:Vs(t),cursor:ga,scribbles:Hs(ba),isFocusMode:zs,isDebugMode:zs,isToolLocked:zs,exportBackground:zs,screenBounds:pa,insets:Hs(zs),zoomBrush:pa.nullable(),isPenMode:zs,isGridMode:zs,chatMessage:js,isChatting:zs,highlightedUserIds:Hs(js),canMoveCamera:zs,isFocused:zs,devicePixelRatio:Os,isCoarsePointer:zs,isHoveringCanvas:zs.nullable(),openMenus:Hs(js),isChangingStyle:zs,isReadonly:zs,meta:Gs,duplicateProps:Vs({shapeIds:Hs(ia("shape")),offset:Vs({x:Os,y:Os})}).nullable()}));return ls("instance",{migrations:Ia,validator:n,scope:"session"}).withDefaultProperties((()=>({followingUserId:null,opacityForNextShape:1,stylesForNextShape:{},brush:null,scribbles:[],cursor:{type:"default",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:!1,isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720},insets:[!1,!1,!1,!1],zoomBrush:null,isGridMode:!1,isPenMode:!1,chatMessage:"",isChatting:!1,highlightedUserIds:[],canMoveCamera:!0,isFocused:!1,devicePixelRatio:"undefined"===typeof window?1:window.devicePixelRatio,isCoarsePointer:!1,isHoveringCanvas:null,openMenus:[],isChangingStyle:!1,isReadonly:!1,meta:{},duplicateProps:null})))}(t);return xs.create({asset:ul,camera:ua,document:qa,instance:r,instance_page_state:La,page:ka,shape:o,instance_presence:Va,pointer:Da},{snapshotMigrations:Ac,onValidationFailure:Za,createIntegrityChecker:Qa})}const Oc=[{locale:"ca",label:"Catal\xe0"},{locale:"cs",label:"\u010ce\u0161tina"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Espa\xf1ol"},{locale:"fr",label:"Fran\xe7ais"},{locale:"gl",label:"Galego"},{locale:"hr",label:"Hrvatski"},{locale:"it",label:"Italiano"},{locale:"hu",label:"Magyar"},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Portugu\xeas - Brasil"},{locale:"pt-pt",label:"Portugu\xeas - Europeu"},{locale:"ro",label:"Rom\xe2n\u0103"},{locale:"ru",label:"Russian"},{locale:"sl",label:"Sloven\u0161\u010dina"},{locale:"fi",label:"Suomi"},{locale:"sv",label:"Svenska"},{locale:"vi",label:"Ti\u1ebfng Vi\u1ec7t"},{locale:"tr",label:"T\xfcrk\xe7e"},{locale:"uk",label:"Ukrainian"},{locale:"he",label:"\u05e2\u05d1\u05e8\u05d9\u05ea"},{locale:"ar",label:"\u0639\u0631\u0628\u064a"},{locale:"fa",label:"\u0641\u0627\u0631\u0633\u06cc"},{locale:"ku",label:"\u06a9\u0648\u0631\u062f\u06cc"},{locale:"ne",label:"\u0928\u0947\u092a\u093e\u0932\u0940"},{locale:"hi-in",label:"\u0939\u093f\u0928\u094d\u0926\u0940"},{locale:"te",label:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41"},{locale:"th",label:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22"},{locale:"my",label:"\u1019\u103c\u1014\u103a\u1019\u102c\u1005\u102c"},{locale:"ko-kr",label:"\ud55c\uad6d\uc5b4"},{locale:"ja",label:"\u65e5\u672c\u8a9e"},{locale:"zh-cn",label:"\u7b80\u4f53\u4e2d\u6587"},{locale:"zh-tw",label:"\u7e41\u9ad4\u4e2d\u6587 (\u53f0\u7063)"}];const Lc={zh:"zh-cn",pt:"pt-br",ko:"ko-kr",hi:"hi-in"};function Bc(e){const t=Oc.find((t=>t.locale===e.toLowerCase()));if(t)return t.locale;const[n,o]=e.split(/[-_]/).map((e=>e.toLowerCase()));if(o){const e=Oc.find((e=>e.locale===n));if(e)return e.locale}return n in Lc?Lc[n]:null}var Rc=n(579),Nc=n(8139);const Dc={error:null};class zc extends e.Component{constructor(){super(...arguments),wr(this,"state",Dc)}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e){var t,n;null===(t=(n=this.props).onError)||void 0===t||t.call(n,e)}render(){const{error:e}=this.state;if(null!==e){const{fallback:t}=this.props;return(0,Rc.jsx)(t,{error:e})}return this.props.children}}function Fc(e){let{children:t,fallback:n,...o}=e;return null===n?(0,Rc.jsx)(Rc.Fragment,{children:t}):(0,Rc.jsx)(zc,{fallback:n,...o,children:t})}const Uc=e.createContext({});function Hc(){return e.useContext(Uc)}function Vc(){return(0,Rc.jsx)("div",{className:"tl-background"})}function Wc(t,n,o,r,i,s){(0,e.useLayoutEffect)((()=>{const e=t.current;if(!e)return;if(void 0===n)return;let a="translate(".concat(n,"px, ").concat(o,"px)");void 0!==r&&(a+=" scale(".concat(r,")")),void 0!==i&&(a+=" rotate(".concat(i,"rad)")),s&&(a+=" translate(".concat(s.x,"px, ").concat(s.y,"px)")),e.style.transform=a}))}const Kc={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,easeInCubic:e=>e*e*e,easeOutCubic:e=>--e*e*e+1,easeInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1- --e*e*e*e,easeInOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1+--e*e*e*e*e,easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e<=0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e>=1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e<=0?0:e>=1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2};class Gc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.x=e,this.y=t,this.z=n}get pressure(){return this.z}set(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.z;return this.x=e,this.y=t,this.z=n,this}setTo(e){let{x:t=0,y:n=0,z:o=1}=e;return this.x=t,this.y=n,this.z=o,this}rot(e){if(0===e)return this;const{x:t,y:n}=this,o=Math.sin(e),r=Math.cos(e);return this.x=t*r-n*o,this.y=t*o+n*r,this}rotWith(e,t){if(0===t)return this;const n=this.x-e.x,o=this.y-e.y,r=Math.sin(t),i=Math.cos(t);return this.x=e.x+(n*i-o*r),this.y=e.y+(n*r+o*i),this}clone(){const{x:e,y:t,z:n}=this;return new Gc(e,t,n)}sub(e){return this.x-=e.x,this.y-=e.y,this}subXY(e,t){return this.x-=e,this.y-=t,this}subScalar(e){return this.x-=e,this.y-=e,this}add(e){return this.x+=e.x,this.y+=e.y,this}addXY(e,t){return this.x+=e,this.y+=t,this}addScalar(e){return this.x+=e,this.y+=e,this}clamp(e,t){return this.x=Math.max(this.x,e),this.y=Math.max(this.y,e),void 0!==t&&(this.x=Math.min(this.x,t),this.y=Math.min(this.y,t)),this}div(e){return this.x/=e,this.y/=e,this}divV(e){return this.x/=e.x,this.y/=e.y,this}mul(e){return this.x*=e,this.y*=e,this}mulV(e){return this.x*=e.x,this.y*=e.y,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}nudge(e,t){const n=Gc.Tan(e,this);return this.add(n.mul(t))}neg(){return this.x*=-1,this.y*=-1,this}cross(e){return this.x=this.y*e.z-this.z*e.y,this.y=this.z*e.x-this.x*e.z,this}dpr(e){return Gc.Dpr(this,e)}cpr(e){return Gc.Cpr(this,e)}len2(){return Gc.Len2(this)}len(){return Gc.Len(this)}pry(e){return Gc.Pry(this,e)}per(){const{x:e,y:t}=this;return this.x=t,this.y=-e,this}uni(){return Gc.Uni(this)}tan(e){return Gc.Tan(this,e)}dist(e){return Gc.Dist(this,e)}distanceToLineSegment(e,t){return Gc.DistanceToLineSegment(e,t,this)}slope(e){return Gc.Slope(this,e)}snapToGrid(e){return this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this}angle(e){return Gc.Angle(this,e)}toAngle(){return Gc.ToAngle(this)}lrp(e,t){return this.x=this.x+(e.x-this.x)*t,this.y=this.y+(e.y-this.y)*t,this}equals(e){return Gc.Equals(this,e)}equalsXY(e,t){return Gc.EqualsXY(this,e,t)}norm(){const e=this.len();return this.x=0===e?0:this.x/e,this.y=0===e?0:this.y/e,this}toFixed(){return Gc.ToFixed(this)}toString(){return Gc.ToString(Gc.ToFixed(this))}toJson(){return Gc.ToJson(this)}toArray(){return Gc.ToArray(this)}static Add(e,t){return new Gc(e.x+t.x,e.y+t.y)}static AddXY(e,t,n){return new Gc(e.x+t,e.y+n)}static Sub(e,t){return new Gc(e.x-t.x,e.y-t.y)}static SubXY(e,t,n){return new Gc(e.x-t,e.y-n)}static AddScalar(e,t){return new Gc(e.x+t,e.y+t)}static SubScalar(e,t){return new Gc(e.x-t,e.y-t)}static Div(e,t){return new Gc(e.x/t,e.y/t)}static Mul(e,t){return new Gc(e.x*t,e.y*t)}static DivV(e,t){return new Gc(e.x/t.x,e.y/t.y)}static MulV(e,t){return new Gc(e.x*t.x,e.y*t.y)}static Neg(e){return new Gc(-e.x,-e.y)}static Per(e){return new Gc(e.y,-e.x)}static Dist2(e,t){return Gc.Sub(e,t).len2()}static Abs(e){return new Gc(Math.abs(e.x),Math.abs(e.y))}static Dist(e,t){return Math.hypot(e.y-t.y,e.x-t.x)}static Dpr(e,t){return e.x*t.x+e.y*t.y}static Cross(e,t){return new Gc(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z)}static Cpr(e,t){return e.x*t.y-t.x*e.y}static Len2(e){return e.x*e.x+e.y*e.y}static Len(e){return Math.hypot(e.x,e.y)}static Pry(e,t){return Gc.Dpr(e,t)/Gc.Len(t)}static Uni(e){return Gc.Div(e,Gc.Len(e))}static Tan(e,t){return Gc.Uni(Gc.Sub(e,t))}static Min(e,t){return new Gc(Math.min(e.x,t.x),Math.min(e.y,t.y))}static Max(e,t){return new Gc(Math.max(e.x,t.x),Math.max(e.y,t.y))}static From(e){let{x:t,y:n,z:o=1}=e;return new Gc(t,n,o)}static FromArray(e){return new Gc(e[0],e[1])}static Rot(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Math.sin(t),o=Math.cos(t);return new Gc(e.x*o-e.y*n,e.x*n+e.y*o)}static RotWith(e,t,n){const o=e.x-t.x,r=e.y-t.y,i=Math.sin(n),s=Math.cos(n);return new Gc(t.x+(o*s-r*i),t.y+(o*i+r*s))}static NearestPointOnLineThroughPoint(e,t,n){return Gc.Mul(t,Gc.Sub(n,e).pry(t)).add(e)}static NearestPointOnLineSegment(e,t,n){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=Gc.Tan(t,e),i=Gc.Add(e,Gc.Mul(r,Gc.Sub(n,e).pry(r)));if(o){if(i.x<Math.min(e.x,t.x))return Gc.Cast(e.x<t.x?e:t);if(i.x>Math.max(e.x,t.x))return Gc.Cast(e.x>t.x?e:t);if(i.y<Math.min(e.y,t.y))return Gc.Cast(e.y<t.y?e:t);if(i.y>Math.max(e.y,t.y))return Gc.Cast(e.y>t.y?e:t)}return i}static DistanceToLineThroughPoint(e,t,n){return Gc.Dist(n,Gc.NearestPointOnLineThroughPoint(e,t,n))}static DistanceToLineSegment(e,t,n){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Gc.Dist(n,Gc.NearestPointOnLineSegment(e,t,n,o))}static Snap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Gc(Math.round(e.x/t)*t,Math.round(e.y/t)*t)}static Cast(e){return e instanceof Gc?e:Gc.From(e)}static Slope(e,t){return e.x===t.y?NaN:(e.y-t.y)/(e.x-t.x)}static IsNaN(e){return isNaN(e.x)||isNaN(e.y)}static Angle(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}static Lrp(e,t,n){return Gc.Sub(t,e).mul(n).add(e)}static Med(e,t){return new Gc((e.x+t.x)/2,(e.y+t.y)/2)}static Equals(e,t){return Math.abs(e.x-t.x)<1e-4&&Math.abs(e.y-t.y)<1e-4}static EqualsXY(e,t,n){return e.x===t&&e.y===n}static Clockwise(e,t,n){return(n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y)<0}static Rescale(e,t){const n=Gc.Len(e);return new Gc(t*e.x/n,t*e.y/n)}static ScaleWithOrigin(e,t,n){return Gc.Sub(e,n).mul(t).add(n)}static ToFixed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return new Gc(+e.x.toFixed(t),+e.y.toFixed(t),+e.z.toFixed(t))}static Nudge(e,t,n){return Gc.Add(e,Gc.Tan(t,e).mul(n))}static ToString(e){return"".concat(e.x,", ").concat(e.y)}static ToAngle(e){let t=Math.atan2(e.y,e.x);return t<0&&(t+=2*Math.PI),t}static FromAngle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Gc(Math.cos(e)*t,Math.sin(e)*t)}static ToArray(e){return[e.x,e.y,e.z]}static ToJson(e){const{x:t,y:n,z:o}=e;return{x:t,y:n,z:o}}static Average(e){const t=e.length,n=new Gc(0,0);for(let o=0;o<t;o++)n.add(e[o]);return n.div(t)}static Clamp(e,t,n){return void 0===n?new Gc(Math.min(Math.max(e.x,t)),Math.min(Math.max(e.y,t))):new Gc(Math.min(Math.max(e.x,t),n),Math.min(Math.max(e.y,t),n))}static PointsBetween(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;const o=[];for(let r=0;r<n;r++){const i=Kc.easeInQuad(r/(n-1)),s=Gc.Lrp(e,t,i);s.z=Math.min(1,.5+.65*Math.abs(.5-qc(i))),o.push(s)}return o}static SnapToGrid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return new Gc(Math.round(e.x/t)*t,Math.round(e.y/t)*t)}}const qc=e=>e<.5?2*e*e:(4-2*e)*e-1;function Yc(e){return"".concat(vd(e.x),",").concat(vd(e.y)," ")}function Xc(e,t){return"".concat(vd((e.x+t.x)/2),",").concat(vd((e.y+t.y)/2)," ")}const $c=Math.PI,Zc=$c/2,Qc=2*$c,Jc=Math.sin;function ed(e,t,n){return Math.max(t,"undefined"!==typeof n?Math.min(e,n):e)}function td(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return e?Math.round(e*t)/t:0}function nd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;return Math.abs(e-t)<=n}function od(e,t){const n=Math.pow(e-t,2)/Math.pow(e+t,2);return $c*(e+t)*(1+3*n/(10+Math.sqrt(4-3*n)))}function rd(e){return(e%=Qc)<0?e+=Qc:0===e&&(e=0),e}function id(e,t){return(e=rd(e))>(t=rd(t))&&(t+=Qc),t-e}function sd(e,t){return Qc-id(e,t)}function ad(e,t){const n=(t-e)%Qc;return 2*n%Qc-n}function ld(e){return(Qc+e)%Qc}function cd(e,t){const n=Qc/t;let o=Math.floor((ld(e)+n/2)/n)*n%Qc;return o<$c&&(o+=Qc),o>$c&&(o-=Qc),o}function dd(e,t){return e===t||nd(e%(Math.PI/2)-t%(Math.PI/2),0)}function ud(e,t,n){return new Gc(e.x,e.y).add(Gc.FromAngle(n,t))}function hd(e,t,n){const o=e/2,r=t/2,i=[];let s=1/0,a=-1/0,l=1/0,c=-1/0;for(let h=0;h<n;h++){const e=h*(Qc/n)-Zc,t=o+o*Math.cos(e),d=r+r*Math.sin(e);t<s&&(s=t),d<l&&(l=d),t>a&&(a=t),d>c&&(c=d),i.push(new Gc(t,d))}const d=a-s,u=c-l;if(0!==e-d||0!==t-u)for(let h=0;h<i.length;h++){const n=i[h];n.x=(n.x-s)/d*e,n.y=(n.y-l)/u*t}return i}function pd(e,t,n,o){return e<o&&n<t}function fd(e,t,n,o){const r=Math.max(e,n),i=Math.min(t,o);return r<=i?[r,i]:null}function gd(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}function md(e,t){let n,o,r=0;for(let i=0;i<t.length;i++){if(n=t[i],n.x===e.x&&n.y===e.y)return!0;if(o=t[(i+1)%t.length],Gc.Dist(e,n)+Gc.Dist(e,o)===Gc.Dist(n,o))return!0;n.y<=e.y?o.y>e.y&&gd(n,o,e)>0&&(r+=1):o.y<=e.y&&gd(n,o,e)<0&&(r-=1)}return 0!==r}function vd(e){return+e.toFixed(4)}function yd(e){return+e.toFixed(2)}const bd=e=>Math.abs(e)<Number.MAX_SAFE_INTEGER;function wd(e,t,n){return n<0?id(e,t):sd(e,t)}function xd(e,t,n,o){let r;if(Math.abs(e)>$c){r=ad(t,o);const i=ad(o,n);return Math.abs(r)<Math.abs(i)?r/e:(e-i)/e}{r=ad(t,o);const n=r/e;return Math.sign(r)!==Math.sign(e)?Math.abs(n)>.5?1:0:n}}const Sd=t=>{let{brush:n,color:o,opacity:r,className:i}=t;const s=(0,e.useRef)(null);Wc(s,n.x,n.y);const a=vd(Math.max(1,n.w)),l=vd(Math.max(1,n.h));return(0,Rc.jsx)("svg",{className:"tl-overlays__item",ref:s,children:o?(0,Rc.jsxs)("g",{className:"tl-brush",opacity:r,children:[(0,Rc.jsx)("rect",{width:a,height:l,fill:o,opacity:.75}),(0,Rc.jsx)("rect",{width:a,height:l,fill:"none",stroke:o,opacity:.1})]}):(0,Rc.jsx)("rect",{className:"tl-brush tl-brush__default ".concat(i),width:a,height:l})})},_d=2e3,kd=320,Cd=[.1,.25,.5,1,2,4,8],Ed=.1,Id=8,Td=32,Pd={};for(let n=1;n<=Math.ceil(Id);n++)Pd[n+"_dark"]="hash_pattern_zoom_".concat(n,"_dark"),Pd[n+"_light"]="hash_pattern_zoom_".concat(n,"_light");const Ad={duration:0,easing:Kc.easeInOutCubic},Md=.09,jd=[{min:-1,mid:.15,step:64},{min:.05,mid:.375,step:16},{min:.15,mid:1,step:4},{min:.7,mid:2.5,step:1}],Od=6e4,Ld=3e3,Bd=-10,Rd=8,Nd=12,Dd=20,zd=12,Fd={},Ud=Vd("pointerCaptureTrackingObject",{defaults:{all:new Map},shouldStoreForSession:!1}),Hd={preventDefaultLogging:Vd("preventDefaultLogging",{defaults:{all:!1}}),pointerCaptureTracking:Vd("pointerCaptureTracking",{defaults:{all:!1}}),elementRemovalLogging:Vd("elementRemovalLogging",{defaults:{all:!1}}),debugSvg:Vd("debugSvg",{defaults:{all:!1}}),showFps:Vd("showFps",{defaults:{all:!1}}),throwToBlob:Vd("throwToBlob",{defaults:{all:!1}}),resetConnectionEveryPing:Vd("resetConnectionEveryPing",{defaults:{all:!1}}),debugCursors:Vd("debugCursors",{defaults:{all:!1}}),forceSrgb:Vd("forceSrgbColors",{defaults:{all:!1}}),debugGeometry:Vd("debugGeometry",{defaults:{all:!1}}),hideShapes:Vd("hideShapes",{defaults:{all:!1}}),documentName:Vd("documentName",{defaults:{all:!1}})};if("undefined"!==typeof Element){const e=Element.prototype.removeChild;jr("element removal logging",(()=>{Hd.elementRemovalLogging.get()?Element.prototype.removeChild=function(t){return console.warn("[tldraw] removing child:",t),e.call(this,t)}:Element.prototype.removeChild=e}))}function Vd(e,t){let{defaults:n,shouldStoreForSession:o=!0}=t;return function(e){const t=function(e){var t,n,o,r,i,s;switch(null!==(t=null!==(n=null!==(o=Wd((()=>({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.TLDRAW_ENV))))&&void 0!==o?o:Wd((()=>({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.VERCEL_PUBLIC_TLDRAW_ENV))))&&void 0!==n?n:Wd((()=>({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NEXT_PUBLIC_TLDRAW_ENV))))&&void 0!==t?t:"production"){case"production":return null!==(r=e.defaults.production)&&void 0!==r?r:e.defaults.all;case"preview":case"staging":return null!==(i=e.defaults.staging)&&void 0!==i?i:e.defaults.all;default:return null!==(s=e.defaults.development)&&void 0!==s?s:e.defaults.all}}(e),n=e.shouldStoreForSession?function(e){try{var t,n;return JSON.parse(null!==(t=null===(n=window)||void 0===n?void 0:n.sessionStorage.getItem("tldraw_debug:".concat(e)))&&void 0!==t?t:"null")}catch(o){return null}}(e.name):null,o=Fr("debug:".concat(e.name),null!==n&&void 0!==n?n:t);"undefined"!==typeof window&&(e.shouldStoreForSession&&jr("debug:".concat(e.name),(()=>{const n=o.get();try{n===t?window.sessionStorage.removeItem("tldraw_debug:".concat(e.name)):window.sessionStorage.setItem("tldraw_debug:".concat(e.name),JSON.stringify(n))}catch{}})),Object.defineProperty(window,"tldraw".concat(e.name.replace(/^[a-z]/,(e=>e.toUpperCase()))),{get:()=>o.get(),set(e){o.set(e)},configurable:!0}));return Object.assign(o,e)}({name:e,defaults:n,shouldStoreForSession:o})}function Wd(e){try{return e()}catch{return null}}function Kd(e){if(e instanceof HTMLElement)return e;if(e.parentElement)return Kd(e.parentElement);throw Error("Could not find a parent element of an HTML type!")}function Gd(e){e.preventDefault(),Hd.preventDefaultLogging.get()&&console.warn("preventDefault called on event:",e)}function qd(e,t){if(e.setPointerCapture(t.pointerId),Hd.pointerCaptureTracking.get()){var n;const o=Ud.get();o.set(e,(null!==(n=o.get(e))&&void 0!==n?n:0)+1),console.warn("setPointerCapture called on element:",e,t)}}function Yd(e,t){if(e.hasPointerCapture(t.pointerId)&&(e.releasePointerCapture(t.pointerId),Hd.pointerCaptureTracking.get())){const n=Ud.get();1===n.get(e)?n.delete(e):n.has(e)?n.set(e,n.get(e)-1):console.warn("Release without capture"),console.warn("releasePointerCapture called on element:",e,t)}}const Xd=e=>e.stopPropagation();function $d(e){return e.isKilled=!0,{point:{x:e.clientX,y:e.clientY,z:e.pressure},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:e.pointerId,button:e.button,isPen:"pen"===e.pointerType}}const Zd=(0,e.createContext)(null);function Qd(e){let{container:t,children:n}=e;return(0,Rc.jsx)(Zd.Provider,{value:t,children:n})}function Jd(){return pi((0,e.useContext)(Zd),"useContainer used outside of <Tldraw />")}const eu=["input","select","button","textarea"];function tu(){const{activeElement:e}=document;return!(!e||!(e.getAttribute("contenteditable")||eu.indexOf(e.tagName.toLowerCase())>-1))}const nu=["textarea","input"];const ou={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function ru(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function iu(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===o?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-ru(t-e,n-t,o)+t:e>n?+ru(e-n,n-t,o)+n:e}function su(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function au(e,t,n){return(t=su(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function cu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lu(Object(n),!0).forEach((function(t){au(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const du={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function uu(e){return e?e[0].toUpperCase()+e.slice(1):""}const hu=["enter","leave"];function pu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=du[e],r=o&&o[t]||t;return"on"+uu(e)+uu(r)+(function(){let e=arguments.length>1?arguments[1]:void 0;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!hu.includes(e)}(n,r)?"Capture":"")}const fu=["gotpointercapture","lostpointercapture"];function gu(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const o=fu.includes(t)?"capturecapture":"capture",r=!!~t.indexOf(o);return r&&(t=t.replace("capture","")),{device:t,capture:r,passive:n}}function mu(e){return"touches"in e}function vu(e){return mu(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function yu(e,t){try{const n=t.clientX-e.clientX,o=t.clientY-e.clientY,r=(t.clientX+e.clientX)/2,i=(t.clientY+e.clientY)/2,s=Math.hypot(n,o),a=-180*Math.atan2(n,o)/Math.PI;return{angle:a,distance:s,origin:[r,i]}}catch(n){}return null}function bu(e){return function(e){return Array.from(e.touches).filter((t=>{var n,o;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(o=n.contains)||void 0===o?void 0:o.call(n,t.target))}))}(e).map((e=>e.identifier))}function wu(e,t){const[n,o]=Array.from(e.touches).filter((e=>t.includes(e.identifier)));return yu(n,o)}function xu(e){let{deltaX:t,deltaY:n,deltaMode:o}=e;return 1===o?(t*=40,n*=40):2===o&&(t*=800,n*=800),[t,n]}function Su(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return e(...n)}return e}function _u(){}function ku(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?_u:1===t.length?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function Cu(e,t){return Object.assign({},t,e||{})}class Eu{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:o}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=o,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?Su(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:o}=this;t.args=this.args;let r=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:o,metaKey:r,ctrlKey:i}=e;Object.assign(t,{shiftKey:n,altKey:o,metaKey:r,ctrlKey:i})}return t}(e)),o.down=o.pressed=o.buttons%2===1||o.touches>0,r=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);ou.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);const[i,s]=t._movement,[a,l]=n.threshold,{_step:c,values:d}=t;if(n.hasCustomTransform?(!1===c[0]&&(c[0]=Math.abs(i)>=a&&d[0]),!1===c[1]&&(c[1]=Math.abs(s)>=l&&d[1])):(!1===c[0]&&(c[0]=Math.abs(i)>=a&&Math.sign(i)*a),!1===c[1]&&(c[1]=Math.abs(s)>=l&&Math.sign(s)*l)),t.intentional=!1!==c[0]||!1!==c[1],!t.intentional)return;const u=[0,0];if(n.hasCustomTransform){const[e,t]=d;u[0]=!1!==c[0]?e-c[0]:0,u[1]=!1!==c[1]?t-c[1]:0}else u[0]=!1!==c[0]?i-c[0]:0,u[1]=!1!==c[1]?s-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(u);const h=t.offset,p=t._active&&!t._blocked||t.active;p&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=o[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=Su(n.bounds,t)),this.setup&&this.setup()),t.movement=u,this.computeOffset()));const[f,g]=t.offset,[[m,v],[y,b]]=t._bounds;t.overflow=[f<m?-1:f>v?1:0,g<y?-1:g>b?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);const w=t._active&&n.rubberband||[0,0];if(t.offset=function(e,t,n){let[o,r]=t,[i,s]=n;const[[a,l],[c,d]]=e;return[iu(o,a,l,i),iu(r,c,d,s)]}(t._bounds,t.offset,w),t.delta=ou.sub(t.offset,h),this.computeMovement(),p&&(!t.last||r>32)){t.delta=ou.sub(t.offset,h);const e=t.delta.map(Math.abs);ou.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&r>0&&(t.velocity=[e[0]/r,e[1]/r],t.timeDelta=r)}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const o=this.handler(cu(cu(cu({},t),e),{},{[this.aliasKey]:e.values}));void 0!==o&&(e.memo=o)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class Iu extends Eu{constructor(){super(...arguments),au(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ou.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ou.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const o="object"===typeof n.axisThreshold?n.axisThreshold[vu(e)]:n.axisThreshold;t.axis=function(e,t){let[n,o]=e;const r=Math.abs(n),i=Math.abs(o);return r>i&&r>t?"x":i>r&&i>t?"y":void 0}(t._movement,o)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const Tu=e=>e,Pu={enabled(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},eventOptions:(e,t,n)=>cu(cu({},n.shared.eventOptions),e),preventDefault(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},triggerAllEvents(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},rubberband(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return ou.toVector(e)}},from:e=>"function"===typeof e?e:null!=e?ou.toVector(e):void 0,transform(e,t,n){const o=e||n.shared.transform;return this.hasCustomTransform=!!o,o||Tu},threshold:e=>ou.toVector(e,0)};const Au=cu(cu({},Pu),{},{axis(e,t,n){let{axis:o}=n;if(this.lockDirection="lock"===o,!this.lockDirection)return o},axisThreshold(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},bounds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof e)return t=>Au.bounds(e(t));if("current"in e)return()=>e.current;if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:o=-1/0,bottom:r=1/0}=e;return[[t,n],[o,r]]}});const Mu="undefined"!==typeof window&&window.document&&window.document.createElement;function ju(){return Mu&&"ontouchstart"in window}const Ou={isBrowser:Mu,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:ju(),touchscreen:ju()||Mu&&window.navigator.maxTouchPoints>1,pointer:Mu&&"onpointerdown"in window,pointerLock:Mu&&"exitPointerLock"in window.document},Lu=.5,Bu=50,Ru=250,Nu={mouse:0,touch:0,pen:8};cu(cu({},Au),{},{device(e,t,n){let{pointer:{touch:o=!1,lock:r=!1,mouse:i=!1}={}}=n;return this.pointerLock=r&&Ou.pointerLock,Ou.touch&&o?"touch":this.pointerLock?"mouse":Ou.pointer&&!i?"pointer":Ou.touch?"touch":"mouse"},preventScrollAxis(e,t,n){let{preventScroll:o}=n;if(this.preventScrollDelay="number"===typeof o?o:o||void 0===o&&e?250:void 0,Ou.touchscreen&&!1!==o)return e||(void 0!==o?"y":void 0)},pointerCapture(e,t,n){let{pointer:{capture:o=!0,buttons:r=1,keys:i=!0}={}}=n;return this.pointerButtons=r,this.keys=i,!this.pointerLock&&"pointer"===this.device&&o},threshold(e,t,n){let{filterTaps:o=!1,tapsThreshold:r=3,axis:i}=n;const s=ou.toVector(e,o?r:i?1:0);return this.filterTaps=o,this.tapsThreshold=r,s},swipe(){let{velocity:e=Lu,distance:t=Bu,duration:n=Ru}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{velocity:this.transform(ou.toVector(e)),distance:this.transform(ou.toVector(t)),duration:n}},delay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?cu(cu({},Nu),e):Nu,keyboardDisplacement(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:10}});function Du(e){const[t,n]=e.overflow,[o,r]=e._delta,[i,s]=e._direction;(t<0&&o>0&&i<0||t>0&&o<0&&i>0)&&(e._movement[0]=e._movementBound[0]),(n<0&&r>0&&s<0||n>0&&r<0&&s>0)&&(e._movement[1]=e._movementBound[1])}const zu=cu(cu({},Pu),{},{device(e,t,n){let{shared:o,pointer:{touch:r=!1}={}}=n;if(o.target&&!Ou.touch&&Ou.gesture)return"gesture";if(Ou.touch&&r)return"touch";if(Ou.touchscreen){if(Ou.pointer)return"pointer";if(Ou.touch)return"touch"}},bounds(e,t,n){let{scaleBounds:o={},angleBounds:r={}}=n;const i=e=>{const t=Cu(Su(o,e),{min:-1/0,max:1/0});return[t.min,t.max]},s=e=>{const t=Cu(Su(r,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof o&&"function"!==typeof r?[i(),s()]:e=>[i(e),s(e)]},threshold(e,t,n){this.lockDirection="lock"===n.axis;return ou.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}});cu(cu({},Au),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}});const Fu=Au;cu(cu({},Au),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}});const Uu=new Map,Hu=new Map;function Vu(e){Uu.set(e.key,e.engine),Hu.set(e.key,e.resolver)}const Wu={key:"pinch",engine:class extends Eu{constructor(){super(...arguments),au(this,"ingKey","pinching"),au(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:n}=this.state;this.state.offset="wheel"===e?ou.add(t,n):[(1+t[0])*n[0],t[1]+n[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,n]=e._movement;if(!e.axis){const o=30*Math.abs(t)-Math.abs(n);o<0?e.axis="angle":o>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout((()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()}),0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,n=this.ctrl.touchIds;if(t._active&&t._touchIds.every((e=>n.has(e))))return;if(n.size<2)return;this.start(e),t._touchIds=Array.from(n).slice(0,2);const o=wu(e,t._touchIds);o&&this.pinchStart(e,o)}pointerStart(e){if(null!=e.buttons&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,n=t._pointerEvents,o=this.ctrl.pointerIds;if(t._active&&Array.from(n.keys()).every((e=>o.has(e))))return;if(n.size<2&&n.set(e.pointerId,e),t._pointerEvents.size<2)return;this.start(e);const r=yu(...Array.from(n.values()));r&&this.pinchStart(e,r)}pinchStart(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=wu(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const n=yu(...Array.from(t.values()));n&&this.pinchMove(e,n)}pinchMove(e,t){const n=this.state,o=n._values[1],r=t.angle-o;let i=0;Math.abs(r)>270&&(i+=Math.sign(r)),this.computeValues([t.distance,t.angle-360*i]),n.origin=t.origin,n.turns=i,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some((e=>!this.ctrl.touchIds.has(e)))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(n){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=ou.sub(t._movement,n),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&!(Array.isArray(t)?t.find((t=>e[t])):e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const t=this.state;t._delta=[-xu(e)[1]/100*t.offset[0],0],ou.addTo(t._movement,t._delta),Du(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}},resolver:zu},Ku={key:"wheel",engine:class extends Iu{constructor(){super(...arguments),au(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=xu(e),ou.addTo(t._movement,t._delta),Du(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},resolver:Fu};function Gu(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const qu={target(e){if(e)return()=>"current"in e?e.current:e},enabled(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},window(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ou.isBrowser?window:void 0},eventOptions(){let{passive:e=!0,capture:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{passive:e,capture:t}},transform:e=>e},Yu=["target","eventOptions","window","enabled","transform"];function Xu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n={};for(const[o,r]of Object.entries(t))switch(typeof r){case"function":n[o]=r.call(n,e[o],o,e);break;case"object":n[o]=Xu(e[o],r);break;case"boolean":r&&(n[o]=e[o])}return n}class $u{constructor(e,t){au(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,o,r){const i=this._listeners,s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=du[e];return e+(n&&n[t]||t)}(t,n),a=cu(cu({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),r);e.addEventListener(s,o,a);const l=()=>{e.removeEventListener(s,o,a),i.delete(l)};return i.add(l),l}clean(){this._listeners.forEach((e=>e())),this._listeners.clear()}}class Zu{constructor(){au(this,"_timeouts",new Map)}add(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var o=arguments.length,r=new Array(o>3?o-3:0),i=3;i<o;i++)r[i-3]=arguments[i];this._timeouts.set(e,window.setTimeout(t,n,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class Qu{constructor(e){au(this,"gestures",new Set),au(this,"_targetEventStore",new $u(this)),au(this,"gestureEventStores",{}),au(this,"gestureTimeoutStores",{}),au(this,"handlers",{}),au(this,"config",{}),au(this,"pointerIds",new Set),au(this,"touchIds",new Set),au(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&Ju(e,"drag");t.wheel&&Ju(e,"wheel");t.scroll&&Ju(e,"scroll");t.move&&Ju(e,"move");t.pinch&&Ju(e,"pinch");t.hover&&Ju(e,"hover")}(this,e)}setEventIds(e){return mu(e)?(this.touchIds=new Set(bu(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e,{target:r,eventOptions:i,window:s,enabled:a,transform:l}=o,c=Gu(o,Yu);if(n.shared=Xu({target:r,eventOptions:i,window:s,enabled:a,transform:l},qu),t){const e=Hu.get(t);n[t]=Xu(cu({shared:n.shared},c),e)}else for(const d in c){const e=Hu.get(d);e&&(n[d]=Xu(cu({shared:n.shared},c[d]),e))}return n}(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o=this.config.shared,r={};let i;if(!o.target||(i=o.target(),i)){if(o.enabled){for(const n of this.gestures){const e=this.config[n],o=eh(r,e.eventOptions,!!i);if(e.enabled){new(Uu.get(n))(this,t,n).bind(o)}}const e=eh(r,o.eventOptions,!!i);for(const n in this.nativeHandlers)e(n,"",(e=>this.nativeHandlers[n](cu(cu({},this.state.shared),{},{event:e,args:t}))),void 0,!0)}for(const e in r)r[e]=ku(...r[e]);if(!i)return r;for(const e in r){const{device:t,capture:n,passive:o}=gu(e);this._targetEventStore.add(i,t,"",r[e],{capture:n,passive:o})}}}}function Ju(e,t){e.gestures.add(t),e.gestureEventStores[t]=new $u(e,t),e.gestureTimeoutStores[t]=new Zu}const eh=(e,t,n)=>function(o,r,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var l,c;const d=null!==(l=s.capture)&&void 0!==l?l:t.capture,u=null!==(c=s.passive)&&void 0!==c?c:t.passive;let h=a?o:pu(o,r,d);n&&u&&(h+="Passive"),e[h]=e[h]||[],e[h].push(i)},th=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function nh(e,t,n,o,r,i){if(!e.has(n))return;if(!Uu.has(o))return void 0;const s=n+"Start",a=n+"End";r[o]=e=>{let o;return e.first&&s in t&&t[s](e),n in t&&(o=t[n](e)),e.last&&a in t&&t[a](e),o},i[o]=i[o]||{}}function oh(e,t){const[n,o,r]=function(e){const t={},n={},o=new Set;for(let r in e)th.test(r)?(o.add(RegExp.lastMatch),n[r]=e[r]):t[r]=e[r];return[n,t,o]}(e),i={};return nh(r,n,"onDrag","drag",i,t),nh(r,n,"onWheel","wheel",i,t),nh(r,n,"onScroll","scroll",i,t),nh(r,n,"onPinch","pinch",i,t),nh(r,n,"onMove","move",i,t),nh(r,n,"onHover","hover",i,t),{handlers:i,config:t,nativeHandlers:o}}function rh(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const i=e.useMemo((()=>new Qu(t)),[]);if(i.applyHandlers(t,r),i.applyConfig(n,o),e.useEffect(i.effect.bind(i)),e.useEffect((()=>i.clean.bind(i)),[]),void 0===n.target)return i.bind.bind(i)}function ih(e){return e.forEach(Vu),function(e,t){const{handlers:n,nativeHandlers:o,config:r}=oh(e,t||{});return rh(n,r,void 0,o)}}const sh=10,ah=/Mac|iPod|iPhone|iPad/.test("undefined"===typeof window?"node":window.navigator.platform);function lh(e){let{deltaY:t,deltaX:n}=e,o=0;if(e.ctrlKey||e.altKey||e.metaKey){const n=Math.sign(e.deltaY);let r=t;Math.abs(e.deltaY)>sh&&(r=sh*n),o=r/100}else e.shiftKey&&!ah&&(n=t,t=0);return{x:-n,y:-t,z:-o}}const ch=ih([Ku,Wu]);let dh;const uh=e=>void 0===dh?(dh=e,!1):e-dh>120&&e-dh<160?(dh=e,!0):(dh=e,!1);function hh(t){const n=Hc(),o=e.useMemo((()=>{let e="not sure";let o=1,r=1,i=1,s=0;const a=new Gc,l=new Gc;return{onWheel:t=>{let{event:o}=t;if(!n.getInstanceState().isFocused)return;if(e="not sure",uh(Date.now()))return;const r=n.getEditingShapeId();if(r){const e=n.getShape(r);if(e){if(n.getShapeUtil(e).canScroll(e)){const e=n.getShapePageBounds(r);if(null!==e&&void 0!==e&&e.containsPoint(n.inputs.currentPagePoint))return}}}Gd(o);const i=lh(o);if(0===i.x&&0===i.y)return;const s={type:"wheel",name:"wheel",delta:i,point:new Gc(o.clientX,o.clientY),shiftKey:o.shiftKey,altKey:o.altKey,ctrlKey:o.metaKey||o.ctrlKey};n.dispatch(s)},onPinchStart:i=>{const s=t.current;e="not sure";const{event:c,origin:d,da:u}=i;c instanceof WheelEvent||(c.target===s||null!==s&&void 0!==s&&s.contains(c.target))&&(l.x=d[0],l.y=d[1],a.x=d[0],a.y=d[1],o=u[0],r=n.getZoomLevel(),n.dispatch({type:"pinch",name:"pinch_start",point:{x:d[0],y:d[1],z:n.getZoomLevel()},delta:{x:0,y:0},shiftKey:c.shiftKey,altKey:c.altKey,ctrlKey:c.metaKey||c.ctrlKey}))},onPinchEnd:o=>{const r=t.current,{event:i,origin:s,offset:a}=o;if(i instanceof WheelEvent)return;if(!(i.target===r||null!==r&&void 0!==r&&r.contains(i.target)))return;const l=a[0];e="not sure",requestAnimationFrame((()=>{n.dispatch({type:"pinch",name:"pinch_end",point:{x:s[0],y:s[1],z:l},delta:{x:s[0],y:s[1]},shiftKey:i.shiftKey,altKey:i.altKey,ctrlKey:i.metaKey||i.ctrlKey})}))},onPinch:c=>{const d=t.current,{event:u,origin:h,offset:p,da:f}=c;if(u instanceof WheelEvent)return;if(!(u.target===d||null!==d&&void 0!==d&&d.contains(u.target)))return;const g="gesturechange"===c.type||"gestureend"===c.type;s=f[0];const m=h[0]-l.x,v=h[1]-l.y;switch(l.x=h[0],l.y=h[1],(t=>{if(t&&(e="zooming"),"zooming"===e)return;const n=Math.abs(s-o),r=Gc.Dist(a,l);switch(e){case"not sure":n>24?e="zooming":r>16&&(e="panning");break;case"panning":n>64&&(e="zooming")}})(g),e){case"zooming":i=p[0],n.dispatch({type:"pinch",name:"pinch",point:{x:h[0],y:h[1],z:i},delta:{x:m,y:v},shiftKey:u.shiftKey,altKey:u.altKey,ctrlKey:u.metaKey||u.ctrlKey});break;case"panning":n.dispatch({type:"pinch",name:"pinch",point:{x:h[0],y:h[1],z:r},delta:{x:m,y:v},shiftKey:u.shiftKey,altKey:u.altKey,ctrlKey:u.metaKey||u.ctrlKey})}}}}),[n,t]);ch(o,{target:t,eventOptions:{passive:!1},pinch:{from:()=>[n.getZoomLevel(),0],scaleBounds:()=>({from:n.getZoomLevel(),max:8,min:.05})}})}function ph(e,t,n){const o=e.getShape(t);return{shape:o,handle:e.getShapeHandles(o).find((e=>e.id===n))}}var fh,gh=n(381);class mh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;wr(this,"x",0),wr(this,"y",0),wr(this,"w",0),wr(this,"h",0),this.x=e,this.y=t,this.w=n,this.h=o}get point(){return new Gc(this.x,this.y)}set point(e){this.x=e.x,this.y=e.y}get minX(){return this.x}set minX(e){this.x=e}get midX(){return this.x+this.w/2}get maxX(){return this.x+this.w}get minY(){return this.y}set minY(e){this.y=e}get midY(){return this.y+this.h/2}get maxY(){return this.y+this.h}get width(){return this.w}set width(e){this.w=e}get height(){return this.h}set height(e){this.h=e}get aspectRatio(){return this.width/this.height}get center(){return new Gc(this.midX,this.midY)}set center(e){this.minX=e.x-this.width/2,this.minY=e.y-this.height/2}get corners(){return[new Gc(this.minX,this.minY),new Gc(this.maxX,this.minY),new Gc(this.maxX,this.maxY),new Gc(this.minX,this.maxY)]}get cornersAndCenter(){return[new Gc(this.minX,this.minY),new Gc(this.maxX,this.minY),new Gc(this.maxX,this.maxY),new Gc(this.minX,this.maxY),this.center]}get sides(){const{corners:e}=this;return[[e[0],e[1]],[e[1],e[2]],[e[2],e[3]],[e[3],e[0]]]}get size(){return new Gc(this.w,this.h)}toFixed(){return this.x=td(this.x),this.y=td(this.y),this.w=td(this.w),this.h=td(this.h),this}setTo(e){return this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h,this}set(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.x=e,this.y=t,this.w=n,this.h=o,this}expand(e){const t=Math.min(this.minX,e.minX),n=Math.min(this.minY,e.minY),o=Math.max(this.maxX,e.maxX),r=Math.max(this.maxY,e.maxY);return this.x=t,this.y=n,this.w=o-t,this.h=r-n,this}expandBy(e){return this.x-=e,this.y-=e,this.w+=2*e,this.h+=2*e,this}scale(e){return this.x/=e,this.y/=e,this.w/=e,this.h/=e,this}clone(){const{x:e,y:t,w:n,h:o}=this;return new mh(e,t,n,o)}translate(e){return this.x+=e.x,this.y+=e.y,this}snapToGrid(e){const t=Math.round(this.minX/e)*e,n=Math.round(this.minY/e)*e,o=Math.round(this.maxX/e)*e,r=Math.round(this.maxY/e)*e;this.minX=t,this.minY=n,this.width=Math.max(1,o-t),this.height=Math.max(1,r-n)}collides(e){return mh.Collides(this,e)}contains(e){return mh.Contains(this,e)}includes(e){return mh.Includes(this,e)}containsPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return mh.ContainsPoint(this,e,t)}getHandlePoint(e){switch(e){case"top_left":return new Gc(this.minX,this.minY);case"top_right":return new Gc(this.maxX,this.minY);case"bottom_left":return new Gc(this.minX,this.maxY);case"bottom_right":return new Gc(this.maxX,this.maxY);case"top":return new Gc(this.midX,this.minY);case"right":return new Gc(this.maxX,this.midY);case"bottom":return new Gc(this.midX,this.maxY);case"left":return new Gc(this.minX,this.midY)}}toJson(){return{x:this.minX,y:this.minY,w:this.w,h:this.h}}resize(e,t,n){const{minX:o,minY:r,maxX:i,maxY:s}=this;let{minX:a,minY:l,maxX:c,maxY:d}=this;switch(e){case"left":case"top_left":case"bottom_left":a+=t;break;case"right":case"top_right":case"bottom_right":c+=t}switch(e){case"top":case"top_left":case"top_right":l+=n;break;case"bottom":case"bottom_left":case"bottom_right":d+=n}if((c-a)/(i-o)<0){const e=c;c=a,a=e}if((d-l)/(s-r)<0){const e=d;d=l,l=e}this.minX=a,this.minY=l,this.width=Math.abs(c-a),this.height=Math.abs(d-l)}union(e){const t=Math.min(this.minX,e.x),n=Math.min(this.minY,e.y),o=Math.max(this.maxX,e.w+e.x),r=Math.max(this.maxY,e.h+e.y);return this.x=t,this.y=n,this.width=o-t,this.height=r-n,this}static From(e){return new mh(e.x,e.y,e.w,e.h)}static FromCenter(e,t){return new mh(e.x-t.x/2,e.y-t.y/2,t.x,t.y)}static FromPoints(e){if(0===e.length)return new mh;let t,n=1/0,o=1/0,r=-1/0,i=-1/0;for(let s=0,a=e.length;s<a;s++)t=e[s],n=Math.min(t.x,n),o=Math.min(t.y,o),r=Math.max(t.x,r),i=Math.max(t.y,i);return new mh(n,o,r-n,i-o)}static Expand(e,t){const n=Math.min(t.minX,e.minX),o=Math.min(t.minY,e.minY),r=Math.max(t.maxX,e.maxX),i=Math.max(t.maxY,e.maxY);return new mh(n,o,r-n,i-o)}static ExpandBy(e,t){return new mh(e.minX-t,e.minY-t,e.width+2*t,e.height+2*t)}static Resize(e,t,n,o){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{minX:i,minY:s,maxX:a,maxY:l}=e;let{minX:c,minY:d,maxX:u,maxY:h}=e;switch(t){case"left":case"top_left":case"bottom_left":c+=n;break;case"right":case"top_right":case"bottom_right":u+=n}switch(t){case"top":case"top_left":case"top_right":d+=o;break;case"bottom":case"bottom_left":case"bottom_right":h+=o}const p=(u-c)/(a-i),f=(h-d)/(l-s),g=p<0,m=f<0;if(r){const e=(a-i)/(l-s),n=Math.abs(u-c),o=Math.abs(h-d),r=n*(f<0?1:-1)*(1/e),g=o*(p<0?1:-1)*e,m=e<n/o;switch(t){case"top_left":m?d=h+r:c=u+g;break;case"top_right":m?d=h+r:u=c-g;break;case"bottom_right":m?h=d-r:u=c-g;break;case"bottom_left":m?h=d-r:c=u+g;break;case"bottom":case"top":{const t=(c+u)/2,n=o*e;c=t-n/2,u=t+n/2;break}case"left":case"right":{const t=(d+h)/2,o=n/e;d=t-o/2,h=t+o/2;break}}}if(g){const e=u;u=c,c=e}if(m){const e=h;h=d,d=e}const v=new mh(c,d,Math.abs(u-c),Math.abs(h-d));return{box:v,scaleX:+(v.width/e.width*(p>0?1:-1)).toFixed(5),scaleY:+(v.height/e.height*(f>0?1:-1)).toFixed(5)}}equals(e){return mh.Equals(this,e)}static Equals(e,t){return t.x===e.x&&t.y===e.y&&t.w===e.w&&t.h===e.h}zeroFix(){return this.w=Math.max(1,this.w),this.h=Math.max(1,this.h),this}static ZeroFix(e){return new mh(e.x,e.y,Math.max(1,e.w),Math.max(1,e.h))}}fh=mh,wr(mh,"Collides",((e,t)=>!(e.maxX<t.minX||e.minX>t.maxX||e.maxY<t.minY||e.minY>t.maxY))),wr(mh,"Contains",((e,t)=>e.minX<t.minX&&e.minY<t.minY&&e.maxY>t.maxY&&e.maxX>t.maxX)),wr(mh,"Includes",((e,t)=>fh.Collides(e,t)||fh.Contains(e,t))),wr(mh,"ContainsPoint",(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!(t.x<e.minX-n||t.y<e.minY-n||t.x>e.maxX+n||t.y>e.maxY+n)})),wr(mh,"Common",(e=>{let t=1/0,n=1/0,o=-1/0,r=-1/0;for(let i=0;i<e.length;i++){const s=e[i];t=Math.min(t,s.minX),n=Math.min(n,s.minY),o=Math.max(o,s.maxX),r=Math.max(r,s.maxY)}return new fh(t,n,o-t,r-n)})),wr(mh,"Sides",(function(e){const{corners:t}=e;return[[t[0],t[1]],[t[1],t[2]],[t[2],t[3]],[t[3],t[0]]]}));const vh=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;const{overflowY:e}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&("auto"===e||"scroll"===e||"overlay"===e))return t;t=t.parentElement}return document};var yh;class bh{constructor(e,t,n,o,r,i){wr(this,"a",1),wr(this,"b",0),wr(this,"c",0),wr(this,"d",1),wr(this,"e",0),wr(this,"f",0),this.a=e,this.b=t,this.c=n,this.d=o,this.e=r,this.f=i}equals(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}multiply(e){const t=e,{a:n,b:o,c:r,d:i,e:s,f:a}=this;return this.a=n*t.a+r*t.b,this.c=n*t.c+r*t.d,this.e=n*t.e+r*t.f+s,this.b=o*t.a+i*t.b,this.d=o*t.c+i*t.d,this.f=o*t.e+i*t.f+a,this}rotate(e,t,n){return 0===e?this:void 0===t?this.multiply(bh.Rotate(e)):this.translate(t,n).multiply(bh.Rotate(e)).translate(-t,-n)}translate(e,t){return this.multiply(bh.Translate(e,t))}scale(e,t){return this.multiply(bh.Scale(e,t))}invert(){const{a:e,b:t,c:n,d:o,e:r,f:i}=this,s=e*o-t*n;return this.a=o/s,this.b=t/-s,this.c=n/-s,this.d=e/s,this.e=(o*r-n*i)/-s,this.f=(t*r-e*i)/s,this}applyToPoint(e){return bh.applyToPoint(this,e)}applyToPoints(e){return bh.applyToPoints(this,e)}rotation(){return bh.Rotation(this)}point(){return bh.Point(this)}decomposed(){return bh.Decompose(this)}toCssString(){return bh.toCssString(this)}setTo(e){return Object.assign(this,e),this}decompose(){return bh.Decompose(this)}clone(){return new bh(this.a,this.b,this.c,this.d,this.e,this.f)}static Identity(){return new bh(1,0,0,1,0,0)}static Translate(e,t){return new bh(1,0,0,1,e,t)}static Rotate(e,t,n){if(0===e)return bh.Identity();const o=Math.cos(e),r=Math.sin(e),i=new bh(o,r,-r,o,0,0);return void 0===t?i:bh.Compose(bh.Translate(t,n),i,bh.Translate(-t,-n))}static Multiply(e,t){return{a:e.a*t.a+e.c*t.b,c:e.a*t.c+e.c*t.d,e:e.a*t.e+e.c*t.f+e.e,b:e.b*t.a+e.d*t.b,d:e.b*t.c+e.d*t.d,f:e.b*t.e+e.d*t.f+e.f}}static Inverse(e){const t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/-t,f:(e.b*e.e-e.a*e.f)/t}}static Absolute(e){const t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/t,f:(e.b*e.e-e.a*e.f)/-t}}static Compose(){const e=bh.Identity();for(let t=0,n=arguments.length;t<n;t++)e.multiply(t<0||arguments.length<=t?void 0:arguments[t]);return e}static Point(e){return new Gc(e.e,e.f)}static Rotation(e){let t;if(0!==e.a||0!==e.c){const n=Math.hypot(e.a,e.c);t=Math.acos(e.a/n)*(e.c>0?-1:1)}else if(0!==e.b||0!==e.d){const n=Math.hypot(e.b,e.d);t=Zc+Math.acos(e.b/n)*(e.d>0?-1:1)}else t=0;return ld(t)}static Decompose(e){let t,n,o;if(0!==e.a||0!==e.c){const r=Math.hypot(e.a,e.c);t=r,n=(e.a*e.d-e.b*e.c)/r,o=Math.acos(e.a/r)*(e.c>0?-1:1)}else if(0!==e.b||0!==e.d){const r=Math.hypot(e.b,e.d);t=(e.a*e.d-e.b*e.c)/r,n=r,o=Zc+Math.acos(e.b/r)*(e.d>0?-1:1)}else t=0,n=0,o=0;return{x:e.e,y:e.f,scaleX:t,scaleY:n,rotation:ld(o)}}static Smooth(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return e.a=Math.round(e.a*t)/t,e.b=Math.round(e.b*t)/t,e.c=Math.round(e.c*t)/t,e.d=Math.round(e.d*t)/t,e.e=Math.round(e.e*t)/t,e.f=Math.round(e.f*t)/t,e}static toCssString(e){return"matrix(".concat(vd(e.a),", ").concat(vd(e.b),", ").concat(vd(e.c),", ").concat(vd(e.d),", ").concat(vd(e.e),", ").concat(vd(e.f),")")}static applyToPoint(e,t){return new Gc(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)}static applyToXY(e,t,n){return[e.a*t+e.c*n+e.e,e.b*t+e.d*n+e.f]}static applyToPoints(e,t){return t.map((t=>new Gc(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)))}static applyToBounds(e,t){return new mh(e.e+t.minX,e.f+t.minY,t.width,t.height)}static From(e){return new bh(e.a,e.b,e.c,e.d,e.e,e.f)}static Cast(e){return e instanceof bh?e:bh.From(e)}}yh=bh,wr(bh,"Scale",((e,t,n,o)=>{const r=new yh(e,0,0,t,0,0);return void 0===n?r:yh.Compose(yh.Translate(n,o),r,yh.Translate(-n,-o))}));class wh{constructor(e){var t;wr(this,"isFilled",!1),wr(this,"isClosed",!0),wr(this,"isLabel",!1),wr(this,"debugColor",void 0),wr(this,"ignore",void 0),wr(this,"_vertices",void 0),wr(this,"_bounds",void 0),wr(this,"_area",void 0),this.isFilled=e.isFilled,this.isClosed=e.isClosed,this.isLabel=null!==(t=e.isLabel)&&void 0!==t&&t,this.debugColor=e.debugColor,this.ignore=e.ignore}hitTestPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.distanceToPoint(e,n)<=t}distanceToPoint(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.dist(this.nearestPoint(e));return this.isClosed&&(this.isFilled||t)&&md(e,this.vertices)?-n:n}distanceToLineSegment(e,t){const n=this.nearestPointOnLineSegment(e,t),o=Gc.DistanceToLineSegment(e,t,n);return this.isClosed&&this.isFilled&&md(n,this.vertices)?-o:o}hitTestLineSegment(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.distanceToLineSegment(e,t)<=n}nearestPointOnLineSegment(e,t){let n,o=1/0;for(let r=0;r<this.vertices.length;r++){const i=this.vertices[r],s=Gc.DistanceToLineSegment(e,t,i);s<o&&(o=s,n=i)}if(!n)throw Error("nearest point not found");return n}isPointInBounds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{bounds:n}=this;return!(e.x<n.minX-t||e.y<n.minY-t||e.x>n.maxX+t||e.y>n.maxY+t)}get vertices(){return this._vertices||(this._vertices=this.getVertices()),this._vertices}getBounds(){return mh.FromPoints(this.vertices)}get bounds(){return this._bounds||(this._bounds=this.getBounds()),this._bounds}get center(){return this.bounds.center}get area(){return this._area||(this._area=this.getArea()),this._area}getArea(){if(!this.isClosed)return 0;const{vertices:e}=this;let t=0;for(let n=0,o=e.length;n<o;n++){const r=e[n],i=e[(n+1)%o];t+=r.x*i.y-i.x*r.y}return t/2}toSimpleSvgPath(){let e="";const{vertices:t}=this,n=t.length;if(0===n)return e;e+="M".concat(t[0].x,",").concat(t[0].y);for(let o=1;o<n;o++)e+="L".concat(t[o].x,",").concat(t[o].y);return this.isClosed&&(e+="Z"),e}}class xh extends wh{constructor(e){super({...e,isClosed:!0,isFilled:!1}),wr(this,"children",[]),wr(this,"ignoredChildren",[]);for(const t of e.children)t.ignore?this.ignoredChildren.push(t):this.children.push(t);if(0===this.children.length)throw Error("Group2d must have at least one child")}getVertices(){return this.children.filter((e=>!e.isLabel)).flatMap((e=>e.vertices))}nearestPoint(e){let t,n=1/0;const{children:o}=this;if(0===o.length)throw Error("no children");for(const r of o){const o=r.nearestPoint(e),i=o.dist(e);i<n&&(n=i,t=o)}if(!t)throw Error("nearest point not found");return t}distanceToPoint(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.min(...this.children.map(((n,o)=>n.distanceToPoint(e,t||o>0))))}hitTestPoint(e,t,n){return!!this.children.filter((e=>!e.isLabel)).find((o=>o.hitTestPoint(e,t,n)))}hitTestLineSegment(e,t,n){return!!this.children.filter((e=>!e.isLabel)).find((o=>o.hitTestLineSegment(e,t,n)))}getArea(){return this.children[0].area}toSimpleSvgPath(){let e="";for(const n of this.children)e+=n.toSimpleSvgPath();const t=mh.FromPoints(this.vertices).corners;for(let n=0,o=t.length;n<o;n++){const r=t[n],i=t[(n-1+o)%o],s=r.dist(i),a=t[(n+1)%o],l=r.dist(a),c=r.clone().lrp(i,4/s),d=r,u=r.clone().lrp(a,4/l);e+="M".concat(c.x,",").concat(c.y," L").concat(d.x,",").concat(d.y," L").concat(u.x,",").concat(u.y," ")}return e}}const Sh=ti((function(t){let{showStroke:n=!0,showVertices:o=!0,showClosestPointOnOutline:r=!0}=t;const i=Hc();!function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[n,o]=(0,e.useState)(0),r=Hc();(0,e.useEffect)((()=>{if(!t)return;const e=()=>o((e=>e+1));return r.on("tick",e),()=>{r.off("tick",e)}}),[r,t])}(r);const s=i.getZoomLevel(),a=i.getRenderingShapes(),{inputs:{currentPagePoint:l}}=i;return(0,Rc.jsx)("svg",{style:{position:"absolute",pointerEvents:"none",zIndex:999999999,top:0,left:0,overflow:"visible"},children:a.map((e=>{const t=i.getShape(e.id);if("group"===t.type)return null;const a=i.getShapeGeometry(t),c=i.getShapePageTransform(t),d=i.getPointInShapeSpace(t,l),u=a.nearestPoint(d),h=a.distanceToPoint(d,!0),p=Math.abs(h)*s,f=h<0,{vertices:g}=a;return(0,Rc.jsxs)("g",{transform:c.toCssString(),strokeLinecap:"round",strokeLinejoin:"round",children:[n&&(0,Rc.jsx)(_h,{geometry:a}),o&&g.map(((e,t)=>(0,Rc.jsx)("circle",{cx:e.x,cy:e.y,r:"2",fill:"hsl(".concat(Si(t,[0,g.length-1],[120,200]),", 100%, 50%)"),stroke:"black",strokeWidth:"1"},"v".concat(t)))),r&&p<150&&(0,Rc.jsx)("line",{x1:u.x,y1:u.y,x2:d.x,y2:d.y,opacity:1-p/150,stroke:f?"goldenrod":"dodgerblue",strokeWidth:"2"})]},e.id+"_outline")}))})}));function _h(e){var t;let{geometry:n}=e;return n instanceof xh?(0,Rc.jsx)(Rc.Fragment,{children:[...n.children,...n.ignoredChildren].map(((e,t)=>(0,Rc.jsx)(_h,{geometry:e},t)))}):(0,Rc.jsx)("path",{stroke:null!==(t=n.debugColor)&&void 0!==t?t:"red",strokeWidth:"2",fill:"none",opacity:"1",d:n.toSimpleSvgPath()})}var kh=n(5040);function Ch(e){return kh(e)}function Eh(t){const n=Hc(),o=(0,e.useMemo)((()=>n.store.query.records("instance_presence",(()=>({userId:{eq:t}})))),[n,t]),r=ri("latestPresence:".concat(t),(()=>o.get().slice().sort(((e,t)=>t.lastActivityTimestamp-e.lastActivityTimestamp))[0]),[]);return null!==r&&void 0!==r?r:null}const Ih=ti((function(){const t=function(){const t=Hc(),n=(0,e.useMemo)((()=>t.store.query.records("instance_presence",(()=>({userId:{neq:t.user.getId()}})))),[t]),o=ni("userIds",(()=>Ch(n.get().map((e=>e.userId))).sort()),{isEqual:(e,t)=>{var n;return e.join(",")===(null===(n=t.join)||void 0===n?void 0:n.call(t,","))}},[n]);return ri(o)}();return(0,Rc.jsx)(Rc.Fragment,{children:t.map((e=>(0,Rc.jsx)(Th,{collaboratorId:e},e)))})})),Th=ti((function(t){let{collaboratorId:n}=t;const o=Hc(),r=Eh(n),i=function(t){var n;const o=(0,e.useRef)(null!==(n=null===t||void 0===t?void 0:t.lastActivityTimestamp)&&void 0!==n?n:-1),[r,i]=(0,e.useState)((()=>Ah(Date.now()-o.current)));(0,e.useEffect)((()=>{const e=setInterval((()=>{i(Ah(Date.now()-o.current))}),1200);return()=>clearInterval(e)}),[]),t&&(o.current=t.lastActivityTimestamp);return r}(r);if(!r||r.currentPageId!==o.getCurrentPageId())return null;switch(i){case"inactive":{const{followingUserId:e,highlightedUserIds:t}=o.getInstanceState();if(e!==r.userId&&!t.includes(r.userId))return null;break}case"idle":{const{highlightedUserIds:e}=o.getInstanceState();if(r.followingUserId===o.user.getId()&&!r.chatMessage&&!e.includes(r.userId))return null;break}}return(0,Rc.jsx)(Ph,{latestPresence:r})})),Ph=ti((function(e){let{latestPresence:t}=e;const n=Hc(),{CollaboratorBrush:o,CollaboratorScribble:r,CollaboratorCursor:i,CollaboratorHint:s,CollaboratorShapeIndicator:a}=Mp(),l=n.getZoomLevel(),c=n.getViewportPageBounds(),{userId:d,chatMessage:u,brush:h,scribbles:p,selectedShapeIds:f,userName:g,cursor:m,color:v}=t,y=!(m.x<c.minX-12/l||m.y<c.minY-16/l||m.x>c.maxX-12/l||m.y>c.maxY-16/l);return(0,Rc.jsxs)(Rc.Fragment,{children:[h&&o?(0,Rc.jsx)(o,{className:"tl-collaborator__brush",brush:h,color:v,opacity:.1},d+"_brush"):null,y&&i?(0,Rc.jsx)(i,{className:"tl-collaborator__cursor",point:m,color:v,zoom:l,name:"New User"!==g?g:null,chatMessage:u},d+"_cursor"):s?(0,Rc.jsx)(s,{className:"tl-collaborator__cursor-hint",point:m,color:v,zoom:l,viewport:c},d+"_cursor_hint"):null,r&&p.length?(0,Rc.jsx)(Rc.Fragment,{children:p.map((e=>(0,Rc.jsx)(r,{className:"tl-collaborator__scribble",scribble:e,color:v,zoom:l,opacity:"laser"===e.color?.5:.1},d+"_scribble_"+e.id)))}):null,a&&f.map((e=>(0,Rc.jsx)(a,{className:"tl-collaborator__shape-indicator",shapeId:e,color:v,opacity:.5},d+"_"+e)))]})}));function Ah(e){return e>Od?"inactive":e>Ld?"idle":"active"}function Mh(e,t){return 0===t?e:Mh(t,e%t)}function jh(e){const t=e.toString().split(".")[1];if(!t)return 1;const n=Math.pow(10,t.length);return n/Mh(parseInt(t,10),n)}const Oh=ti((function(t){let{id:n,shape:o,util:r,index:i,backgroundIndex:s,opacity:a,isCulled:l}=t;const c=Hc(),{ShapeErrorFallback:d}=Mp(),u=e.useRef(null),h=e.useRef(null),p=e.useCallback(((e,t)=>{var n,o;null===(n=u.current)||void 0===n||n.style.setProperty(e,t),null===(o=h.current)||void 0===o||o.style.setProperty(e,t)}),[]);oi("set shape container transform position",(()=>{if(!c.getShape(n))return;const e=c.getShapePageTransform(n),t=bh.toCssString(e);p("transform",t)}),[c,p]),oi("set shape container clip path",(()=>{if(!c.getShape(n))return null;const e=c.getShapeClipPath(n);p("clip-path",null!==e&&void 0!==e?e:"none")}),[c,p]),oi("set shape height and width",(()=>{const e=c.getShape(n);if(!e)return null;const t=c.getShapeGeometry(e).bounds,o=jh(Math.floor(100*c.getInstanceState().devicePixelRatio)/100),r=t.w%o,i=0===r?t.w:t.w+(o-r),s=t.h%o,a=0===s?t.h:t.h+(o-s);p("width",Math.max(i,o)+"px"),p("height",Math.max(a,o)+"px")}),[c]),e.useLayoutEffect((()=>{var e,t;p("opacity",a+""),null===(e=u.current)||void 0===e||e.style.setProperty("z-index",i+""),null===(t=h.current)||void 0===t||t.style.setProperty("z-index",s+"")}),[a,i,s,p]);const f=e.useCallback((e=>{c.annotateError(e,{origin:"react.shape",willCrashApp:!1})}),[c]);return o?(0,Rc.jsxs)(Rc.Fragment,{children:[r.backgroundComponent&&(0,Rc.jsx)("div",{ref:h,className:"tl-shape tl-shape-background","data-shape-type":o.type,draggable:!1,children:!l&&(0,Rc.jsx)(Fc,{fallback:d,onError:f,children:(0,Rc.jsx)(Bh,{shape:o,util:r})})}),(0,Rc.jsx)("div",{ref:u,className:"tl-shape","data-shape-type":o.type,draggable:!1,children:l?(0,Rc.jsx)(Rh,{shape:o}):(0,Rc.jsx)(Fc,{fallback:d,onError:f,children:(0,Rc.jsx)(Lh,{shape:o,util:r})})})]}):null})),Lh=e.memo((function(e){let{shape:t,util:n}=e;return Zr("InnerShape:"+t.type,(()=>n.component(t)))}),((e,t)=>e.shape.props===t.shape.props&&e.shape.meta===t.shape.meta&&e.util===t.util)),Bh=e.memo((function(e){let{shape:t,util:n}=e;return Zr("InnerShape:"+t.type,(()=>{var e;return null===(e=n.backgroundComponent)||void 0===e?void 0:e.call(n,t)}))}),((e,t)=>e.shape.props===t.shape.props&&e.shape.meta===t.shape.meta)),Rh=e.memo((function(e){let{shape:t}=e;const n=Hc().getShapeGeometry(t).bounds;return(0,Rc.jsx)("div",{className:"tl-shape__culled",style:{transform:"translate(".concat(vd(n.minX),"px, ").concat(vd(n.minY),"px)"),width:Math.max(1,vd(n.width)),height:Math.max(1,vd(n.height))}})}),(()=>!0));function Nh(t){let{className:n}=t;const o=Hc(),{Background:r,SvgDefs:i}=Mp(),s=e.useRef(null),a=e.useRef(null),l=e.useRef(null);!function(t){const n=Hc();(0,e.useLayoutEffect)((()=>{function e(){const e=t.current;if(!e)return null;const o=e.getBoundingClientRect();n.updateViewportScreenBounds(new mh(o.left||o.x,o.top||o.y,Math.max(o.width,1),Math.max(o.height,1)))}e();const o=gh(e,200,{trailing:!0}),r=setInterval(o,1e3);window.addEventListener("resize",o);const i=new ResizeObserver((e=>{e[0].contentRect&&o()})),s=t.current;let a=null;return s&&(i.observe(s),a=vh(s),a.addEventListener("scroll",o)),()=>{var e;clearInterval(r),window.removeEventListener("resize",o),i.disconnect(),null===(e=a)||void 0===e||e.removeEventListener("scroll",o)}}),[n,t])}(s),function(){const t=Hc(),n=Jd(),o=ri("isFocused",(()=>t.getInstanceState().isFocused),[t]);(0,e.useEffect)((()=>{if(void 0===typeof matchMedia)return;let e=null;const n=()=>{null!=e&&e();const o="(resolution: ".concat(window.devicePixelRatio,"dppx)"),r=matchMedia(o),i=e=>{"change"===e.type&&n()};r.addEventListener?r.addEventListener("change",n):r.addListener&&r.addListener(i),e=()=>{r.removeEventListener?r.removeEventListener("change",n):r.removeListener&&r.removeListener(i)},t.updateInstanceState({devicePixelRatio:window.devicePixelRatio})};return n(),()=>{var t;null===(t=e)||void 0===t||t()}}),[t]),(0,e.useEffect)((()=>{if(!o)return;const e=e=>{if(!e.altKey||!t.isIn("zoom")&&t.getPath().endsWith(".idle")||tu()||Gd(e),e.isKilled)return;switch(e.isKilled=!0,e.key){case"=":case"-":case"0":if(e.metaKey||e.ctrlKey)return void Gd(e);break;case"Tab":default:if(tu()||t.getIsMenuOpen())return;break;case",":return;case"Escape":if((t.getEditingShape()||t.getSelectedShapeIds().length>0)&&e.preventDefault(),t.getOpenMenus().length>0)return;return void(t.inputs.keys.has("Escape")||(t.inputs.keys.add("Escape"),t.cancel(),n.focus()))}const o={type:"keyboard",name:e.repeat?"key_repeat":"key_down",key:e.key,code:e.code,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey};t.dispatch(o)},r=e=>{if(e.isKilled)return;if(e.isKilled=!0,tu()||t.getIsMenuOpen())return;if(","===e.key)return;const n={type:"keyboard",name:"key_up",key:e.key,code:e.code,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey};t.dispatch(n)};function i(e){if(n.contains(e.target)){const n=e.touches[0].pageX,i=e.touches[0].radiusX||0;var o,r;if(n-i<10||n+i>t.getViewportScreenBounds().width-10)"BUTTON"===(null===(o=e.target)||void 0===o?void 0:o.tagName)&&(null===(r=e.target)||void 0===r||r.click()),Gd(e)}}const s=e=>{n.contains(e.target)&&(e.ctrlKey||e.metaKey)&&Gd(e)};return n.addEventListener("touchstart",i,{passive:!1}),n.addEventListener("wheel",s,{passive:!1}),document.addEventListener("gesturestart",Gd),document.addEventListener("gesturechange",Gd),document.addEventListener("gestureend",Gd),n.addEventListener("keydown",e),n.addEventListener("keyup",r),()=>{n.removeEventListener("touchstart",i),n.removeEventListener("wheel",s),document.removeEventListener("gesturestart",Gd),document.removeEventListener("gesturechange",Gd),document.removeEventListener("gestureend",Gd),n.removeEventListener("keydown",e),n.removeEventListener("keyup",r)}}),[t,n,o])}(),function(){const t=Hc();(0,e.useEffect)((()=>{if(!t.environment.isFirefox||t.environment.isAndroid||t.environment.isIos){if(window.matchMedia){const e=window.matchMedia("(pointer: coarse)"),n=()=>{t.updateInstanceState({isCoarsePointer:!!e.matches})};if(n(),e)return e.addEventListener("change",n),()=>e.removeEventListener("change",n)}}else t.updateInstanceState({isCoarsePointer:!1})}),[t])}(),hh(s),function(t){const n=Hc();(0,e.useEffect)((()=>{const e=t.current;if(!e)return;const o=e=>{if(e instanceof PointerEvent&&"pen"===e.pointerType){var t;e.isKilled=!0;const{target:o}=e;if(nu.includes(null===(t=o.tagName)||void 0===t?void 0:t.toLocaleLowerCase())||n.isIn("select.editing_shape"))return;Gd(e)}};return e.addEventListener("touchstart",o),e.addEventListener("touchend",o),()=>{e.removeEventListener("touchstart",o),e.removeEventListener("touchend",o)}}),[n,t])}(s),oi("position layers",(()=>{const e=a.current;if(!e)return;const t=l.current;if(!t)return;const{x:n,y:r,z:i}=o.getCamera(),s=i>=1?Si(i,[1,8],[.125,.5],!0):Si(i,[.1,1],[-2,.125],!0),c="scale(".concat(vd(i),") translate(").concat(vd(n+s),"px,").concat(vd(r+s),"px)");e.style.setProperty("transform",c),t.style.setProperty("transform",c)}),[o]);const c=function(){const t=Hc();return(0,e.useMemo)((function(){let e,n;return{onPointerDown:function(e){e.isKilled||(2!==e.button?0!==e.button&&1!==e.button&&5!==e.button||(qd(e.currentTarget,e),t.dispatch({type:"pointer",target:"canvas",name:"pointer_down",...$d(e)}),t.getOpenMenus().length>0&&(t.updateInstanceState({openMenus:[]}),document.body.click(),t.getContainer().focus())):t.dispatch({type:"pointer",target:"canvas",name:"right_click",...$d(e)}))},onPointerMove:function(o){o.isKilled||o.clientX===e&&o.clientY===n||(e=o.clientX,n=o.clientY,t.dispatch({type:"pointer",target:"canvas",name:"pointer_move",...$d(o)}))},onPointerUp:function(o){o.isKilled||0!==o.button&&1!==o.button&&2!==o.button&&5!==o.button||(e=o.clientX,n=o.clientY,Yd(o.currentTarget,o),t.dispatch({type:"pointer",target:"canvas",name:"pointer_up",...$d(o)}))},onPointerEnter:function(e){if(e.isKilled)return;if(t.getInstanceState().isPenMode&&"pen"!==e.pointerType)return;const n="mouse"===e.pointerType||"pen"===e.pointerType;t.updateInstanceState({isHoveringCanvas:!!n||null})},onPointerLeave:function(e){if(e.isKilled)return;if(t.getInstanceState().isPenMode&&"pen"!==e.pointerType)return;const n="mouse"===e.pointerType||"pen"===e.pointerType;t.updateInstanceState({isHoveringCanvas:!n&&null})},onDragOver:function(e){Gd(e)},onDrop:async function(e){var n;if(Gd(e),null===(n=e.dataTransfer)||void 0===n||null===(n=n.files)||void 0===n||!n.length)return;const o=Array.from(e.dataTransfer.files);await t.putExternalContent({type:"files",files:o,point:t.screenToPage({x:e.clientX,y:e.clientY}),ignoreParent:!1})},onTouchStart:function(e){e.isKilled=!0,document.body.click(),Gd(e)},onTouchEnd:function(e){e.isKilled=!0,"A"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&Gd(e)},onClick:function(e){Xd(e)}}}),[t])}(),d=ri("shapeSvgDefs",(()=>{const e=new Map;for(const t of Ii(o.shapeUtils)){if(!t)return;const n=t.getCanvasSvgDefs();for(const{key:t,component:o}of n)e.has(t)||e.set(t,(0,Rc.jsx)(o,{},t))}return[...e.values()]}),[o]),u=ri("debug_shapes",(()=>Hd.hideShapes.get()),[Hd]),h=ri("debug_svg",(()=>Hd.debugSvg.get()),[Hd]),p=ri("debug_geometry",(()=>Hd.debugGeometry.get()),[Hd]);return(0,Rc.jsxs)("div",{ref:s,draggable:!1,className:Nc("tl-canvas",n),"data-testid":"canvas",...c,children:[(0,Rc.jsx)("svg",{className:"tl-svg-context",children:(0,Rc.jsxs)("defs",{children:[d,$h&&(0,Rc.jsx)($h,{}),(0,Rc.jsx)(Zh,{}),(0,Rc.jsx)(Qh,{}),(0,Rc.jsx)(Jh,{}),i&&(0,Rc.jsx)(i,{})]})}),r&&(0,Rc.jsx)(r,{}),(0,Rc.jsx)(Dh,{}),(0,Rc.jsxs)("div",{ref:a,className:"tl-html-layer tl-shapes",draggable:!1,children:[(0,Rc.jsx)(op,{}),(0,Rc.jsx)(np,{}),u?null:h?(0,Rc.jsx)(Kh,{}):(0,Rc.jsx)(Gh,{})]}),(0,Rc.jsxs)("div",{className:"tl-overlays",children:[(0,Rc.jsxs)("div",{ref:l,className:"tl-html-layer",children:[p?(0,Rc.jsx)(Sh,{}):null,(0,Rc.jsx)(Vh,{}),(0,Rc.jsx)(Fh,{}),(0,Rc.jsx)(zh,{}),(0,Rc.jsx)(Uh,{}),(0,Rc.jsx)(qh,{}),(0,Rc.jsx)(Yh,{}),(0,Rc.jsx)(Xh,{}),(0,Rc.jsx)(Hh,{}),(0,Rc.jsx)(tp,{}),(0,Rc.jsx)(Ih,{})]}),(0,Rc.jsx)(rp,{})]})]})}function Dh(){const e=Hc(),t=ri("gridSize",(()=>e.getDocumentSettings().gridSize),[e]),{x:n,y:o,z:r}=ri("camera",(()=>e.getCamera()),[e]),i=ri("isGridMode",(()=>e.getInstanceState().isGridMode),[e]),{Grid:s}=Mp();return s&&i?(0,Rc.jsx)(s,{x:n,y:o,z:r,size:t}):null}function zh(){const e=Hc(),t=ri("scribbles",(()=>e.getInstanceState().scribbles),[e]),n=ri("zoomLevel",(()=>e.getZoomLevel()),[e]),{Scribble:o}=Mp();return o&&t.length?(0,Rc.jsx)(Rc.Fragment,{children:t.map((e=>(0,Rc.jsx)(o,{className:"tl-user-scribble",scribble:e,zoom:n},e.id)))}):null}function Fh(){const e=Hc(),t=ri("brush",(()=>e.getInstanceState().brush),[e]),{Brush:n}=Mp();return n&&t?(0,Rc.jsx)(n,{className:"tl-user-brush",brush:t}):null}function Uh(){const e=Hc(),t=ri("zoomBrush",(()=>e.getInstanceState().zoomBrush),[e]),{ZoomBrush:n}=Mp();return n&&t?(0,Rc.jsx)(n,{className:"tl-user-brush tl-zoom-brush",brush:t}):null}function Hh(){const e=Hc(),t=ri("snapLines",(()=>e.snaps.getIndicators()),[e]),n=ri("zoomLevel",(()=>e.getZoomLevel()),[e]),{SnapIndicator:o}=Mp();return o&&t.length>0?(0,Rc.jsx)(Rc.Fragment,{children:t.map((e=>(0,Rc.jsx)(o,{className:"tl-user-snapline",line:e,zoom:n},e.id)))}):null}function Vh(){const e=Hc(),{Handles:t}=Mp(),n=ri("zoomLevel",(()=>e.getZoomLevel()),[e]),o=ri("coarse pointer",(()=>e.getInstanceState().isCoarsePointer),[e]),r=ri("isChangingStyle",(()=>e.getInstanceState().isReadonly),[e]),i=ri("isChangingStyle",(()=>e.getInstanceState().isChangingStyle),[e]),s=ri("onlySelectedShape",(()=>e.getOnlySelectedShape()),[e]),a=ri("transform",(()=>s?e.getShapePageTransform(s):null),[e,s]),l=ri("handles",(()=>{if(!s)return null;const t=e.getShapeHandles(s);if(!t)return null;const r=(o?Dd:zd)/n*2;return t.filter((e=>"virtual"!==e.type||!t.some((t=>t!==e&&"vertex"===t.type&&Gc.Dist(e,t)<r)))).sort((e=>"vertex"===e.type?1:-1))}),[e,s,n,o]);return t&&s&&!i&&!r&&l&&a?(0,Rc.jsx)(t,{children:(0,Rc.jsx)("g",{transform:bh.toCssString(a),children:l.map((e=>(0,Rc.jsx)(Wh,{shapeId:s.id,handle:e,zoom:n,isCoarse:o},e.id)))})}):null}function Wh(t){let{shapeId:n,handle:o,zoom:r,isCoarse:i}=t;const s=function(t,n){const o=Hc();return e.useMemo((()=>{let e,r;return{onPointerDown:e=>{if(e.isKilled)return;qd(Kd(e.currentTarget),e);const{shape:r,handle:i}=ph(o,t,n);i&&o.dispatch({type:"pointer",target:"handle",handle:i,shape:r,name:"pointer_down",...$d(e)})},onPointerMove:i=>{if(i.isKilled)return;if(i.clientX===e&&i.clientY===r)return;e=i.clientX,r=i.clientY;const{shape:s,handle:a}=ph(o,t,n);a&&o.dispatch({type:"pointer",target:"handle",handle:a,shape:s,name:"pointer_move",...$d(i)})},onPointerUp:e=>{if(e.isKilled)return;Yd(Kd(e.currentTarget),e);const{shape:r,handle:i}=ph(o,t,n);i&&o.dispatch({type:"pointer",target:"handle",handle:i,shape:r,name:"pointer_up",...$d(e)})}}}),[o,t,n])}(n,o.id),{Handle:a}=Mp();return a?(0,Rc.jsx)("g",{"aria-label":"handle",transform:"translate(".concat(o.x,", ").concat(o.y,")"),...s,children:(0,Rc.jsx)(a,{shapeId:n,handle:o,zoom:r,isCoarse:i})}):null}function Kh(){const t=Hc(),n=ri("rendering shapes",(()=>t.getRenderingShapes()),[t]);return(0,Rc.jsx)(Rc.Fragment,{children:n.map((t=>(0,Rc.jsxs)(e.Fragment,{children:[(0,Rc.jsx)(Oh,{...t}),(0,Rc.jsx)(ep,{id:t.id})]},t.id+"_fragment")))})}function Gh(){const e=Hc(),t=ri("rendering shapes",(()=>e.getRenderingShapes()),[e]);return(0,Rc.jsx)(Rc.Fragment,{children:t.map((e=>(0,Rc.jsx)(Oh,{...e},e.id+"_shape")))})}function qh(){const e=Hc(),t=ri("selectedShapeIds",(()=>e.getSelectedShapeIds()),[e]),n=ri("should display selected ids",(()=>e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.editing_shape","select.pointing_shape","select.pointing_selection","select.pointing_handle")&&!e.getInstanceState().isChangingStyle),[e]),{ShapeIndicator:o}=Mp();return o&&n?(0,Rc.jsx)(Rc.Fragment,{children:t.map((e=>(0,Rc.jsx)(o,{className:"tl-user-indicator__selected",shapeId:e},e+"_indicator")))}):null}const Yh=function(){const e=Hc(),{HoveredShapeIndicator:t}=Mp(),n=ri("coarse pointer",(()=>e.getInstanceState().isCoarsePointer),[e]),o=ri("hovering canvas",(()=>e.getInstanceState().isHoveringCanvas),[e]),r=ri("hovered id",(()=>e.getCurrentPageState().hoveredShapeId),[e]);return!n&&o&&r&&t?(0,Rc.jsx)(t,{shapeId:r}):null},Xh=ti((function(){const e=Hc(),{ShapeIndicator:t}=Mp(),n=si(e.getHintingShapeIds());return n.length&&t?(0,Rc.jsx)(Rc.Fragment,{children:n.map((e=>(0,Rc.jsx)(t,{className:"tl-user-indicator__hint",shapeId:e},e+"_hinting")))}):null}));function $h(){return(0,Rc.jsxs)("g",{id:"cursor",children:[(0,Rc.jsxs)("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[(0,Rc.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,Rc.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,Rc.jsxs)("g",{fill:"white",transform:"translate(-12,-12)",children:[(0,Rc.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,Rc.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,Rc.jsxs)("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[(0,Rc.jsx)("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),(0,Rc.jsx)("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})}function Zh(){return(0,Rc.jsx)("path",{id:"cursor_hint",fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z"})}function Qh(){return(0,Rc.jsx)("marker",{id:"arrowhead-dot",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:(0,Rc.jsx)("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})})}function Jh(){return(0,Rc.jsxs)("marker",{id:"arrowhead-cross",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[(0,Rc.jsx)("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),(0,Rc.jsx)("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})}const ep=ti((function(t){let{id:n}=t;const o=Hc(),r=o.getShape(n),[i,s]=e.useState(""),a=(null===r||void 0===r?void 0:r.parentId)===o.getCurrentPageId();return e.useEffect((()=>{if(!a)return;let e=null;const t=jr("shape to svg",(async()=>{const t=Math.random();e=t;const r=o.getShapePageBounds(n),i=await o.getSvg([n],{padding:0,background:o.getInstanceState().exportBackground});i&&r&&e===t&&(i.style.setProperty("overflow","visible"),i.setAttribute("preserveAspectRatio","xMidYMin slice"),i.style.setProperty("transform","translate(".concat(r.x,"px, ").concat(r.y+r.h+12,"px)")),i.style.setProperty("border","1px solid black"),s(null===i||void 0===i?void 0:i.outerHTML))}));return()=>{e=null,t()}}),[o,n,a]),a?(0,Rc.jsx)("div",{style:{paddingTop:12,position:"absolute"},children:(0,Rc.jsx)("div",{style:{display:"flex"},dangerouslySetInnerHTML:{__html:i}})}):null}));function tp(){const e=Hc(),t=ri("selection rotation",(()=>e.getSelectionRotation()),[e]),n=ri("selection bounds",(()=>e.getSelectionRotatedPageBounds()),[e]),{SelectionForeground:o}=Mp();return n&&o?(0,Rc.jsx)(o,{bounds:n,rotation:t}):null}function np(){const e=Hc(),t=ri("selection rotation",(()=>e.getSelectionRotation()),[e]),n=ri("selection bounds",(()=>e.getSelectionRotatedPageBounds()),[e]),{SelectionBackground:o}=Mp();return n&&o?(0,Rc.jsx)(o,{bounds:n,rotation:t}):null}function op(){const{OnTheCanvas:e}=Mp();return e?(0,Rc.jsx)(e,{}):null}function rp(){const{InFrontOfTheCanvas:e}=Mp();return e?(0,Rc.jsx)(e,{}):null}function ip(t){let{className:n,zoom:o,point:r,color:i,viewport:s,opacity:a=1}=t;const l=(0,e.useRef)(null);return Wc(l,ed(r.x,s.minX+5/o,s.maxX-5/o),ed(r.y,s.minY+5/o,s.maxY-5/o),1/o,Gc.Angle(s.center,r)),(0,Rc.jsxs)("svg",{ref:l,className:Nc("tl-overlays__item",n),children:[(0,Rc.jsx)("use",{href:"#cursor_hint",color:i,strokeWidth:3,stroke:"var(--color-background)"}),(0,Rc.jsx)("use",{href:"#cursor_hint",color:i,opacity:a})]})}const sp=(0,e.memo)((function(t){let{className:n,zoom:o,point:r,color:i,name:s,chatMessage:a}=t;const l=(0,e.useRef)(null);return Wc(l,null===r||void 0===r?void 0:r.x,null===r||void 0===r?void 0:r.y,1/o),r?(0,Rc.jsxs)("div",{ref:l,className:Nc("tl-overlays__item",n),children:[(0,Rc.jsx)("svg",{className:"tl-cursor",children:(0,Rc.jsx)("use",{href:"#cursor",color:i})}),a?(0,Rc.jsxs)(Rc.Fragment,{children:[s&&(0,Rc.jsx)("div",{className:"tl-nametag-title",style:{color:i},children:s}),(0,Rc.jsx)("div",{className:"tl-nametag-chat",style:{backgroundColor:i},children:a})]}):s&&(0,Rc.jsx)("div",{className:"tl-nametag",style:{backgroundColor:i},children:s})]}):null}));function ap(e){let{x:t,y:n,z:o,size:r}=e;return(0,Rc.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,Rc.jsx)("defs",{children:jd.map(((e,i)=>{let{min:s,mid:a,step:l}=e;const c=l*r*o,d=.5+t*o,u=.5+n*o,h=d>0?d%c:c+d%c,p=u>0?u%c:c+u%c,f=o<a?Si(o,[s,a],[0,1]):1;return(0,Rc.jsx)("pattern",{id:"grid-".concat(l),width:c,height:c,patternUnits:"userSpaceOnUse",children:(0,Rc.jsx)("circle",{className:"tl-grid-dot",cx:h,cy:p,r:1,opacity:f})},"grid-pattern-".concat(i))}))}),jd.map(((e,t)=>{let{step:n}=e;return(0,Rc.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid-".concat(n,")")},"grid-rect-".concat(t))}))]})}function lp(e){let{handle:t,isCoarse:n,className:o,zoom:r}=e;const i=(n?Dd:zd)/r,s=("create"===t.type&&n?3:4)/r;return(0,Rc.jsxs)("g",{className:Nc("tl-handle",{"tl-handle__virtual":"virtual"===t.type,"tl-handle__create":"create"===t.type},o),children:[(0,Rc.jsx)("circle",{className:"tl-handle__bg",r:i}),(0,Rc.jsx)("circle",{className:"tl-handle__fg",r:s})]})}const cp=e=>{let{children:t}=e;return(0,Rc.jsx)("svg",{className:"tl-user-handles tl-overlays__item",children:t})};function dp(e){let{shapeId:t}=e;const{ShapeIndicator:n}=Mp();return n?(0,Rc.jsx)(n,{className:"tl-user-indicator__hovered",shapeId:t}):null}function up(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e.length;if(n<2)return"";let o=e[0],r=e[1];if(2===n)return"M".concat(Yc(o),"L").concat(Yc(r));let i="";for(let s=2,a=n-1;s<a;s++)o=e[s],r=e[s+1],i+=Xc(o,r);return t?"M".concat(Xc(e[0],e[1]),"Q").concat(Yc(e[1])).concat(Xc(e[1],e[2]),"T").concat(i).concat(Xc(e[n-1],e[0])).concat(Xc(e[0],e[1]),"Z"):"M".concat(Yc(e[0]),"Q").concat(Yc(e[1])).concat(Xc(e[1],e[2])).concat(e.length>3?"T":"").concat(i,"L").concat(Yc(e[n-1]))}function hp(e){let{scribble:t,zoom:n,color:o,opacity:r,className:i}=e;return t.points.length?(0,Rc.jsx)("svg",{className:i?Nc("tl-overlays__item",i):i,children:(0,Rc.jsx)("path",{className:"tl-scribble",d:up(t.points,!1),stroke:null!==o&&void 0!==o?o:"var(--color-".concat(t.color,")"),fill:"none",strokeWidth:8/n,opacity:null!==r&&void 0!==r?r:t.opacity})}):null}function pp(t){let{bounds:n,rotation:o}=t;const r=e.useRef(null);return Wc(r,n.x,n.y,1,o),e.useLayoutEffect((()=>{const e=r.current;e&&(e.style.width=vd(Math.max(1,n.width))+"px",e.style.height=vd(Math.max(1,n.height))+"px")}),[n.width,n.height]),(0,Rc.jsx)("div",{ref:r,className:"tl-selection__bg",draggable:!1})}function fp(t){var n,o;let{bounds:r,rotation:i}=t;const s=Hc(),a=(0,e.useRef)(null),l=ri("only selected shape",(()=>s.getOnlySelectedShape()),[s]),c=l?s.getShapeUtil(l).expandSelectionOutlinePx(l):0;return Wc(a,null===(n=r)||void 0===n?void 0:n.x,null===(o=r)||void 0===o?void 0:o.y,1,i,{x:-c,y:-c}),r=r.clone().expandBy(c).zeroFix(),(0,Rc.jsx)("svg",{ref:a,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:(0,Rc.jsx)("rect",{className:Nc("tl-selection__fg__outline"),width:vd(r.width),height:vd(r.height)})})}const gp=()=>(0,Rc.jsx)("div",{className:"tl-shape-error-boundary"});class mp{constructor(e){this.shape=e}equals(e){var t,n,o,r,i,s;return(null===(t=this.shape)||void 0===t?void 0:t.isLocked)===(null===e||void 0===e||null===(n=e.shape)||void 0===n?void 0:n.isLocked)&&(null===(o=this.shape)||void 0===o?void 0:o.props)===(null===e||void 0===e||null===(r=e.shape)||void 0===r?void 0:r.props)&&(null===(i=this.shape)||void 0===i?void 0:i.meta)===(null===e||void 0===e||null===(s=e.shape)||void 0===s?void 0:s.meta)}}const vp=e=>{let{shape:t,util:n}=e;return Zr("Indicator:"+t.type,(()=>n.indicator(t)))},yp=e=>{let{editor:t,id:n}=e;const o=ri("shape",(()=>new mp(t.store.get(n))),[t,n]),{ShapeIndicatorErrorFallback:r}=Mp();return!o.shape||o.shape.isLocked?null:(0,Rc.jsx)(Fc,{fallback:r,onError:e=>t.annotateError(e,{origin:"react.shapeIndicator",willCrashApp:!1}),children:(0,Rc.jsx)(vp,{shape:o.shape,util:t.getShapeUtil(o.shape)},o.shape.id)})},bp=(0,e.memo)((function(e){let{shapeId:t,className:n,color:o,opacity:r}=e;const i=Hc(),s=ri("transform",(()=>{const e=i.getShapePageTransform(t);return e?e.toCssString():""}),[i,t]);return(0,Rc.jsx)("svg",{className:Nc("tl-overlays__item",n),children:(0,Rc.jsx)("g",{className:"tl-shape-indicator",transform:s,stroke:null!==o&&void 0!==o?o:"var(--color-selected)",opacity:r,children:(0,Rc.jsx)(yp,{editor:i,id:t})})})})),wp=()=>(0,Rc.jsx)("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"});function xp(e){let{points:t,zoom:n}=e;const o=2.5/n,r=t.reduce(((e,t)=>Math.min(e,t.x)),1/0),i=t.reduce(((e,t)=>Math.max(e,t.x)),-1/0),s=t.reduce(((e,t)=>Math.min(e,t.y)),1/0),a=t.reduce(((e,t)=>Math.max(e,t.y)),-1/0),l=t.some((e=>e.x===r&&e.y===s));let c,d,u,h;return l?(c=r,d=s,u=i,h=a):(c=r,d=a,u=i,h=s),(0,Rc.jsxs)("g",{className:"tl-snap-indicator",stroke:"lime",children:[(0,Rc.jsx)("line",{x1:c,y1:d,x2:u,y2:h}),t.map(((e,t)=>(0,Rc.jsx)("g",{transform:"translate(".concat(e.x,",").concat(e.y,")"),children:(0,Rc.jsx)("path",{className:"tl-snap-point",d:"M ".concat(-o,",").concat(-o," L ").concat(o,",").concat(o," M ").concat(-o,",").concat(o," L ").concat(o,",").concat(-o)})},t)))]})}function Sp(t){let{gaps:n,direction:o,zoom:r}=t;const i=3.5/r;let s=[-1/0,1/0],a=null;const l="horizontal"===o;for(const e of n)a=fd(s[0],s[1],l?e.startEdge[0].y:e.startEdge[0].x,l?e.startEdge[1].y:e.startEdge[1].x),a&&(s=a,a=fd(s[0],s[1],l?e.endEdge[0].y:e.endEdge[0].x,l?e.endEdge[1].y:e.endEdge[1].x),a&&(s=a));if(null===s)return null;const c=(s[0]+s[1])/2;return(0,Rc.jsx)("g",{className:"tl-snap-indicator",stroke:"cyan",children:n.map(((t,n)=>{let{startEdge:o,endEdge:r}=t;return(0,Rc.jsx)(e.Fragment,{children:l?(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)("line",{x1:o[0].x,y1:c-2*i,x2:o[1].x,y2:c+2*i}),(0,Rc.jsx)("line",{x1:r[0].x,y1:c-2*i,x2:r[1].x,y2:c+2*i}),(0,Rc.jsx)("line",{x1:o[0].x,y1:c,x2:r[0].x,y2:c}),(0,Rc.jsx)("line",{x1:(o[0].x+r[0].x)/2,y1:c-i,x2:(o[0].x+r[0].x)/2,y2:c+i})]}):(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)("line",{x1:c-2*i,y1:o[0].y,x2:c+2*i,y2:o[1].y}),(0,Rc.jsx)("line",{x1:c-2*i,y1:r[0].y,x2:c+2*i,y2:r[1].y}),(0,Rc.jsx)("line",{x1:c,y1:o[0].y,x2:c,y2:r[0].y}),(0,Rc.jsx)("line",{x1:c-i,y1:(o[0].y+r[0].y)/2,x2:c+i,y2:(o[0].y+r[0].y)/2})]})},n)}))})}function _p(e){let{className:t,line:n,zoom:o}=e;return(0,Rc.jsx)("svg",{className:Nc("tl-overlays__item",t),children:"points"===n.type?(0,Rc.jsx)(xp,{...n,zoom:o}):"gaps"===n.type?(0,Rc.jsx)(Sp,{...n,zoom:o}):null})}function kp(){return(0,Rc.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",children:(0,Rc.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,Rc.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"var(--color-text-1)"}),(0,Rc.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"var(--color-text-1)",children:(0,Rc.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})}const Cp=()=>null;function Ep(t,n){const o=(0,e.useRef)(t);return n(t,o.current)?o.current:(o.current=t,t)}function Ip(e){return Ep(e,ci)}function Tp(e){return Ep(e,ji)}const Pp=(0,e.createContext)({});function Ap(t){let{overrides:n={},children:o}=t;const r=Tp(n);return(0,Rc.jsx)(Pp.Provider,{value:(0,e.useMemo)((()=>({Background:Vc,SvgDefs:Cp,Brush:Sd,ZoomBrush:Sd,ScreenshotBrush:Sd,CollaboratorBrush:Sd,Cursor:sp,CollaboratorCursor:sp,CollaboratorHint:ip,CollaboratorShapeIndicator:bp,Grid:ap,Scribble:hp,SnapIndicator:_p,Handles:cp,Handle:lp,CollaboratorScribble:hp,ErrorFallback:Bp,ShapeErrorFallback:gp,ShapeIndicatorErrorFallback:wp,Spinner:kp,SelectionBackground:pp,SelectionForeground:fp,HoveredShapeIndicator:dp,ShapeIndicator:bp,OnTheCanvas:null,InFrontOfTheCanvas:null,Canvas:Nh,...r})),[r]),children:o})}function Mp(){return(0,e.useContext)(Pp)}const jp={openWindow:(e,t)=>window.open(e,t,"noopener noreferrer"),refreshPage:()=>window.location.reload(),hardReset:async()=>{var e,t;return await(null===(e=(t=window).__tldraw__hardReset)||void 0===e?void 0:e.call(t))}};function Op(){jp.hardReset()}function Lp(){}const Bp=t=>{let{error:n,editor:o}=t;const r=(0,e.useRef)(null),[i,s]=(0,e.useState)(!1),[a,l]=(0,e.useState)(!1),[c,d]=(0,e.useState)(!1),{Canvas:u}=Mp(),h=n instanceof Error?n.message:String(n),p=n instanceof Error?n.stack:null,f=ri("isDarkMode",(()=>{try{if(o)return o.user.getIsDarkMode()}catch{}return null}),[o]),[g,m]=(0,e.useState)(null);(0,e.useLayoutEffect)((()=>{var e;null!==f&&m(f);let t=null===(e=r.current)||void 0===e?void 0:e.parentElement,n=!1;for(;t;){if(t.classList.contains("tl-theme__dark")||t.classList.contains("tl-theme__light")){n=!0;break}t=t.parentElement}m(n?null:window.matchMedia("(prefers-color-scheme: dark)").matches)}),[f]),(0,e.useEffect)((()=>{if(a){const e=setTimeout((()=>{l(!1)}),2e3);return()=>clearTimeout(e)}}),[a]);const v=new URL("https://github.com/tldraw/tldraw/issues/new");return v.searchParams.set("title",h),v.searchParams.set("labels","bug"),v.searchParams.set("body","Hey, I ran into an error while using tldraw:\n\n```js\n".concat(null!==p&&void 0!==p?p:h,"\n```\n\nMy browser: ").concat(navigator.userAgent)),(0,Rc.jsxs)("div",{ref:r,className:Nc("tl-container tl-error-boundary",null===g?"":g?"tl-theme__dark":"tl-theme__light"),children:[(0,Rc.jsx)("div",{className:"tl-error-boundary__overlay"}),o&&(0,Rc.jsx)(zc,{onError:Lp,fallback:()=>null,children:(0,Rc.jsx)(Uc.Provider,{value:o,children:(0,Rc.jsx)("div",{className:"tl-overlay tl-error-boundary__canvas",children:u?(0,Rc.jsx)(u,{}):null})})}),(0,Rc.jsx)("div",{className:Nc("tl-modal","tl-error-boundary__content",{"tl-error-boundary__content__expanded":i&&!c}),children:c?(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)("h2",{children:"Are you sure?"}),(0,Rc.jsx)("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),(0,Rc.jsxs)("div",{className:"tl-error-boundary__content__actions",children:[(0,Rc.jsx)("button",{onClick:()=>d(!1),children:"Cancel"}),(0,Rc.jsx)("button",{className:"tl-error-boundary__reset",onClick:async()=>{Op()},children:"Reset data"})]})]}):(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)("h2",{children:"Something's gone wrong."}),(0,Rc.jsxs)("p",{children:["Sorry, we encountered an error. Please refresh the page to continue. If you keep seeing this error, you can ",(0,Rc.jsx)("a",{href:v.toString(),children:"create a GitHub issue"})," or"," ",(0,Rc.jsx)("a",{href:"https://discord.gg/Cq6cPsTfNy",children:"ask for help on Discord"}),"."]}),i&&(0,Rc.jsxs)(Rc.Fragment,{children:["Message:",(0,Rc.jsx)("h4",{children:(0,Rc.jsx)("code",{children:h})}),"Stack trace:",(0,Rc.jsxs)("div",{className:"tl-error-boundary__content__error",children:[(0,Rc.jsx)("pre",{children:(0,Rc.jsx)("code",{children:null!==p&&void 0!==p?p:h})}),(0,Rc.jsx)("button",{onClick:()=>{const e=document.createElement("textarea");e.value=null!==p&&void 0!==p?p:h,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),l(!0)},children:a?"Copied!":"Copy"})]})]}),(0,Rc.jsxs)("div",{className:"tl-error-boundary__content__actions",children:[(0,Rc.jsx)("button",{onClick:()=>s(!i),children:i?"Hide details":"Show details"}),(0,Rc.jsxs)("div",{className:"tl-error-boundary__content__actions__group",children:[(0,Rc.jsx)("button",{className:"tl-error-boundary__reset",onClick:()=>d(!0),children:"Reset data"}),(0,Rc.jsx)("button",{className:"tl-error-boundary__refresh",onClick:()=>{jp.refreshPage()},children:"Refresh Page"})]})]})]})})]})};let Rp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")};function Np(){return Rp()}const Dp="TLDRAW_USER_DATA_v3",zp=Vs({id:js,name:js.nullable().optional(),locale:js.nullable().optional(),color:js.nullable().optional(),isDarkMode:zs.nullable().optional(),animationSpeed:Os.nullable().optional(),edgeScrollSpeed:Os.nullable().optional(),isSnapMode:zs.nullable().optional(),isWrapMode:zs.nullable().optional()}),Fp=5,Up=vs({currentVersion:Fp,migrators:{[1]:{up:e=>({...e,animationSpeed:1}),down:e=>{let{animationSpeed:t,...n}=e;return n}},[2]:{up:e=>({...e,isSnapMode:!1}),down:e=>{let{isSnapMode:t,...n}=e;return n}},[3]:{up:e=>e,down:e=>{var t,n,o,r,i,s,a;return{id:e.id,name:null!==(t=e.name)&&void 0!==t?t:Vp.name,locale:null!==(n=e.locale)&&void 0!==n?n:Vp.locale,color:null!==(o=e.color)&&void 0!==o?o:Vp.color,animationSpeed:null!==(r=e.animationSpeed)&&void 0!==r?r:Vp.animationSpeed,isDarkMode:null!==(i=e.isDarkMode)&&void 0!==i?i:Vp.isDarkMode,isSnapMode:null!==(s=e.isSnapMode)&&void 0!==s?s:Vp.isSnapMode,isWrapMode:null!==(a=e.isWrapMode)&&void 0!==a?a:Vp.isWrapMode}}},[4]:{up:e=>({...e,edgeScrollSpeed:1}),down:e=>{let{edgeScrollSpeed:t,...n}=e;return n}},[Fp]:{up:e=>({...e,isWrapMode:!1}),down:e=>{let{isWrapMode:t,...n}=e;return n}}}}),Hp=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"];const Vp=Object.freeze({name:"New User",locale:function(){var e;return function(e){for(const t of e){const e=Bc(t);if(e)return e}return"en"}("undefined"!==typeof window&&null!==(e=window.navigator.languages)&&void 0!==e?e:["en"])}(),color:Hp[Math.floor(Math.random()*Hp.length)],isDarkMode:!1,edgeScrollSpeed:1,animationSpeed:function(){var e,t,n;return"undefined"!==typeof window&&(null!==(e=null===(t=(n=window).matchMedia)||void 0===t||null===(t=t.call(n,"(prefers-reduced-motion: reduce)"))||void 0===t?void 0:t.matches)&&void 0!==e&&e)}()?0:1,isSnapMode:!1,isWrapMode:!1});function Wp(){return{id:Np()}}function Kp(e){var t;if(null===e||"object"!==typeof e)return Wp();if(!("version"in e)||!("user"in e)||"number"!==typeof e.version)return Wp();const n=ws({value:e.user,fromVersion:e.version,toVersion:null!==(t=Up.currentVersion)&&void 0!==t?t:0,migrations:Up});if("error"===n.type)return Wp();try{zp.validate(n.value)}catch(o){return Wp()}return n.value}const Gp=Fr("globalUserData",null);function qp(e){zp.validate(e),Gp.set(e),"undefined"!==typeof window&&window.localStorage&&window.localStorage.setItem(Dp,JSON.stringify({version:Up.currentVersion,user:Gp.get()})),null===Xp||void 0===Xp||Xp.postMessage({type:Qp,origin:Zp(),data:{user:Jp(),version:Up.currentVersion}})}const Yp="undefined"!==typeof process&&!1,Xp="undefined"===typeof BroadcastChannel||Yp?null:new BroadcastChannel("tldraw-user-sync");null===Xp||void 0===Xp||Xp.addEventListener("message",(e=>{const t=e.data;(null===t||void 0===t?void 0:t.type)===Qp&&(null===t||void 0===t?void 0:t.origin)!==Zp()&&Gp.set(Kp(t.data))}));let $p=null;function Zp(){return null===$p&&($p=Np()),$p}const Qp="tldraw-user-preferences-change";function Jp(){let e=Gp.get();return e||(e=function(){var e,t;return Kp("undefined"===typeof window?null:null!==(e=JSON.parse((null===(t=window)||void 0===t||null===(t=t.localStorage)||void 0===t?void 0:t.getItem(Dp))||"null"))&&void 0!==e?e:null)}(),Gp.set(e)),e}function ef(){var e,t,n;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{derivePresenceState:null!==(e=o.derivePresenceState)&&void 0!==e?e:()=>$r("presence",(()=>null)),userPreferences:null!==(t=o.userPreferences)&&void 0!==t?t:$r("userPreferences",(()=>Jp())),setUserPreferences:null!==(n=o.setUserPreferences)&&void 0!==n?n:qp}}var tf=n(7283);function nf(e){let{children:t,className:n="",...o}=e;return(0,Rc.jsx)("svg",{...o,className:"tl-svg-container ".concat(n),children:t})}function of(e,t,n,o){const r=e.x-n.x,i=e.y-n.y,s=o.x-n.x,a=o.y-n.y,l=t.x-e.x,c=t.y-e.y,d=s*i-a*r,u=l*i-c*r,h=a*l-s*c;if(0===d||0===u)return null;if(0===h)return null;if(0!==h){const t=d/h,n=u/h;if(0<=t&&t<=1&&0<=n&&n<=1)return Gc.AddXY(e,t*l,t*c)}return null}function rf(e,t,n,o){const r=(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y),i=2*((t.x-e.x)*(e.x-n.x)+(t.y-e.y)*(e.y-n.y)),s=i*i-4*r*(n.x*n.x+n.y*n.y+e.x*e.x+e.y*e.y-2*(n.x*e.x+n.y*e.y)-o*o);if(s<0)return null;if(0===s)return null;const a=Math.sqrt(s),l=(-i+a)/(2*r),c=(-i-a)/(2*r);if((l<0||l>1)&&(c<0||c>1))return null;const d=[];return 0<=l&&l<=1&&d.push(Gc.Lrp(e,t,l)),0<=c&&c<=1&&d.push(Gc.Lrp(e,t,c)),0===d.length?null:d}function sf(e,t,n){const o=[];let r;for(let i=0,s=n.length-1;i<s;i++)r=of(e,t,n[i],n[i+1]),r&&o.push(r);return 0===o.length?null:o}function af(e,t,n){const o=[];let r;for(let i=1,s=n.length;i<s+1;i++)r=of(e,t,n[i-1],n[i%n.length]),r&&o.push(r);return 0===o.length?null:o}function lf(e,t,n){const o=[];let r,i,s;for(let a=0,l=n.length;a<l;a++)r=n[a],i=n[(a+1)%n.length],s=rf(r,i,e,t),s&&o.push(...s);return 0===o.length?null:o}function cf(e,t,n){const o=[];let r,i,s;for(let a=1,l=n.length;a<l;a++)r=n[a-1],i=n[a],s=rf(r,i,e,t),s&&o.push(...s);return 0===o.length?null:o}function df(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function uf(e,t,n,o){return df(e,n,o)!==df(t,n,o)&&df(e,t,n)!==df(e,t,o)}function hf(e,t){const n=new Map;let o,r,i,s;for(let a=0,l=e.length;a<l;a++)if(o=e[a],md(o,t)){const e=pf(o);n.has(e)||n.set(e,o)}for(let a=0,l=t.length;a<l;a++)if(o=t[a],md(o,e)){const e=pf(o);n.has(e)||n.set(e,o)}for(let a=0,l=e.length;a<l;a++){o=e[a],r=e[(a+1)%e.length];for(let e=0,a=t.length;e<a;e++){i=t[e],s=t[(e+1)%t.length];const a=of(o,r,i,s);if(null!==a){const e=pf(a);n.has(e)||n.set(e,a)}}}return 0===n.size?null:function(e){const t=Gc.Average(e);return e.sort(((e,n)=>Gc.Angle(t,e)-Gc.Angle(t,n)))}([...n.values()])}function pf(e){return"".concat(e.x,",").concat(e.y)}class ff extends wh{constructor(e){super({...e,isClosed:!1,isFilled:!1}),wr(this,"start",void 0),wr(this,"end",void 0),wr(this,"d",void 0),wr(this,"u",void 0),wr(this,"ul",void 0),wr(this,"_length",void 0);const{start:t,end:n}=e;this.start=t,this.end=n,this.d=t.clone().sub(n),this.u=this.d.clone().uni(),this.ul=this.u.len()}get length(){return this._length?this._length:this.d.len()}midPoint(){return this.start.lrp(this.end,.5)}getVertices(){return[this.start,this.end]}nearestPoint(e){const{start:t,end:n,u:o,ul:r}=this;if(0===r)return t;const i=Gc.Sub(e,t).dpr(o)/r,s=t.x+o.x*i;if(s<Math.min(t.x,n.x))return t.x<n.x?t:n;if(s>Math.max(t.x,n.x))return t.x>n.x?t:n;const a=t.y+o.y*i;return a<Math.min(t.y,n.y)?t.y<n.y?t:n:a>Math.max(t.y,n.y)?t.y>n.y?t:n:new Gc(s,a)}hitTestLineSegment(e,t,n){return uf(e,t,this.start,this.end)}}class gf extends wh{constructor(e){super({isClosed:!1,isFilled:!1,...e}),wr(this,"points",void 0),wr(this,"_segments",void 0),wr(this,"_length",void 0);const{points:t}=e;this.points=t}get segments(){if(!this._segments){this._segments=[];const{vertices:e}=this;for(let t=0,n=e.length-1;t<n;t++){const n=e[t],o=e[t+1];this._segments.push(new ff({start:n,end:o}))}this.isClosed&&this._segments.push(new ff({start:e[e.length-1],end:e[0]}))}return this._segments}get length(){return this._length||(this._length=this.segments.reduce(((e,t)=>e+t.length),0)),this._length}getVertices(){return this.points}nearestPoint(e){const{segments:t}=this;let n,o,r=this.points[0],i=1/0;for(let s=0;s<t.length;s++)n=t[s].nearestPoint(e),o=n.dist(e),o<i&&(r=n,i=o);return r}hitTestLineSegment(e,t,n){return this.segments.some((o=>o.hitTestLineSegment(e,t,n)))}}class mf extends gf{constructor(e){super({...e}),this.isClosed=!0}}class vf extends mf{constructor(e){const{x:t=0,y:n=0,width:o,height:r}=e;super({...e,points:[new Gc(t,n),new Gc(t+o,n),new Gc(t+o,n+r),new Gc(t,n+r)]}),wr(this,"x",void 0),wr(this,"y",void 0),wr(this,"w",void 0),wr(this,"h",void 0),this.x=t,this.y=n,this.w=o,this.h=r}getBounds(){return new mh(this.x,this.y,this.w,this.h)}}class yf{constructor(e){wr(this,"canSnap",(()=>!0)),wr(this,"canScroll",(()=>!1)),wr(this,"canUnmount",(()=>!0)),wr(this,"canBind",((e,t)=>!0)),wr(this,"canEdit",(()=>!1)),wr(this,"canResize",(()=>!0)),wr(this,"canEditInReadOnly",(()=>!1)),wr(this,"canCrop",(()=>!1)),wr(this,"hideResizeHandles",(()=>!1)),wr(this,"hideRotateHandle",(()=>!1)),wr(this,"hideSelectionBoundsBg",(()=>!1)),wr(this,"hideSelectionBoundsFg",(()=>!1)),wr(this,"isAspectRatioLocked",(()=>!1)),wr(this,"onBeforeCreate",void 0),wr(this,"onBeforeUpdate",void 0),wr(this,"onDragShapesOver",void 0),wr(this,"onDragShapesOut",void 0),wr(this,"onDropShapesOver",void 0),wr(this,"onResizeStart",void 0),wr(this,"onResize",void 0),wr(this,"onResizeEnd",void 0),wr(this,"onTranslateStart",void 0),wr(this,"onTranslate",void 0),wr(this,"onTranslateEnd",void 0),wr(this,"onHandleDrag",void 0),wr(this,"onRotateStart",void 0),wr(this,"onRotate",void 0),wr(this,"onRotateEnd",void 0),wr(this,"onBindingChange",void 0),wr(this,"onChildrenChange",void 0),wr(this,"onDoubleClickHandle",void 0),wr(this,"onDoubleClickEdge",void 0),wr(this,"onDoubleClick",void 0),wr(this,"onClick",void 0),wr(this,"onEditEnd",void 0),this.editor=e}providesBackgroundForChildren(e){return!1}canReceiveNewChildrenOfType(e,t){return!1}canDropShapes(e,t){return!1}expandSelectionOutlinePx(e){return 0}getCanvasSvgDefs(){return[]}getBoundsSnapGeometry(e){return{}}getHandleSnapGeometry(e){return{}}}function bf(e){let{bounds:t,className:n}=e;const o=Hc(),r=ri("zoom level",(()=>o.getZoomLevel()),[o]);return(0,Rc.jsx)("g",{className:n,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:t.sides.map(((e,t)=>{const{strokeDasharray:n,strokeDashoffset:o}=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{closed:o=!1,snap:r=1,start:i="outset",end:s="outset",lengthRatio:a=2,style:l="dashed"}=n;let c=0,d=0,u=1,h=0,p=0;switch(l){case"dashed":u=1,c=Math.min(t*a,e/4);break;case"dotted":u=100,c=t/u;break;default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return o||("outset"===i?(e+=c/2,p+=c/2):"skip"===i&&(e-=c,p-=c),"outset"===s?e+=c/2:"skip"===s&&(e-=c)),d=Math.floor(e/c/(2*u)),d-=d%r,d<3&&"dashed"===l?e/t<5?(c=e,d=1,h=0):(c=.333*e,h=.333*e):(d=Math.max(d,3),c=e/d/(2*u),o?(p=c/2,h=(e-d*c)/d):h=(e-d*c)/Math.max(1,d-1)),{strokeDasharray:[c,h].join(" "),strokeDashoffset:p.toString()}}(e[0].dist(e[1]),1/r,{style:"dashed",lengthRatio:4});return(0,Rc.jsx)("line",{x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y,strokeDasharray:n,strokeDashoffset:o},t)}))})}wr(yf,"props",void 0),wr(yf,"migrations",void 0),wr(yf,"type",void 0);class wf extends yf{constructor(){super(...arguments),wr(this,"hideSelectionBoundsFg",(()=>!0)),wr(this,"canBind",(()=>!1)),wr(this,"onChildrenChange",(e=>{const t=this.editor.getSortedChildIdsForParent(e.id);return 0===t.length?(this.editor.getCurrentPageState().focusedGroupId===e.id&&this.editor.popFocusedGroupId(),void this.editor.deleteShapes([e.id])):1===t.length?(this.editor.getCurrentPageState().focusedGroupId===e.id&&this.editor.popFocusedGroupId(),this.editor.reparentShapes(t,e.parentId),void this.editor.deleteShapes([e.id])):void 0}))}getDefaultProps(){return{}}getGeometry(e){const t=this.editor.getSortedChildIdsForParent(e.id);return 0===t.length?new vf({width:1,height:1,isFilled:!1}):new xh({children:t.map((e=>{const t=this.editor.getShape(e),n=this.editor.getShapeGeometry(e),o=this.editor.getShapeLocalTransform(t).applyToPoints(n.vertices);return n.isClosed?new mf({points:o,isFilled:!0}):new gf({points:o})}))})}component(e){const t=this.editor.getErasingShapeIds().includes(e.id),{hintingShapeIds:n}=this.editor.getCurrentPageState(),o=n.length>0&&n.some((t=>t!==e.id&&this.editor.isShapeOfType(this.editor.getShape(t),"group"))),r=this.editor.getCurrentPageState().focusedGroupId!==e.id;if(!t&&(r||o))return null;const i=this.editor.getShapeGeometry(e).bounds;return(0,Rc.jsx)(nf,{id:e.id,children:(0,Rc.jsx)(bf,{className:"tl-group",bounds:i})})}indicator(e){const t=this.editor.getShapeGeometry(e).bounds;return(0,Rc.jsx)(bf,{className:"",bounds:t})}}wr(wf,"type","group"),wr(wf,"props",ac),wr(wf,"migrations",lc);const xf=[wf],Sf=new Set(xf.map((e=>e.type)));function _f(e){const t=[...xf],n=new Set;for(const o of e){if(Sf.has(o.type))throw new Error('Shape type "'.concat(o.type,'" is a core shapes type and cannot be overridden'));if(n.has(o.type))throw new Error('Shape type "'.concat(o.type,'" is defined more than once'));t.push(o),n.add(o.type)}return t}let kf;function Cf(e,t){if(!t)return!1;switch(e.type){case"mixed":return"mixed"===t.type;case"shared":return"shared"===t.type&&e.value===t.value;default:throw ui(e)}}kf=Symbol.iterator;class Ef{constructor(e){wr(this,"map",void 0),this.map=new Map(e)}get(e){return this.map.get(e)}getAsKnownValue(e){const t=this.get(e);if(t&&"mixed"!==t.type)return t.value}get size(){return this.map.size}equals(e){if(this.size!==e.size)return!1;const t=new Set;for(const[n,o]of this){if(!Cf(o,e.get(n)))return!1;t.add(n)}for(const[n,o]of e)if(!t.has(n)&&!Cf(o,this.get(n)))return!1;return!0}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}[kf](){return this.map[Symbol.iterator]()}}class If extends Ef{set(e,t){this.map.set(e,t)}applyValue(e,t){const n=this.get(e);if(n)switch(n.type){case"mixed":return;case"shared":return void(n.value!==t&&this.set(e,{type:"mixed"}));default:ui(n,"type")}else this.set(e,{type:"shared",value:t})}}class Tf{constructor(){wr(this,"items",new WeakMap)}get(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}access(e){return this.items.get(e)}set(e,t){this.items.set(e,t)}has(e){return this.items.has(e)}invalidate(e){this.items.delete(e)}bust(){this.items=new WeakMap}}function Pf(e,t,n){if(0===n.length)return[];const o=new Map;for(const i of ai(n.map((t=>e.getShape(t))))){const{parentId:t}=i;o.has(t)||o.set(t,{children:ai(e.getSortedChildIdsForParent(t).map((t=>e.getShape(t)))),moving:new Set}),o.get(t).moving.add(i)}const r=[];switch(t){case"toBack":o.forEach((e=>{let{moving:t,children:n}=e;return function(e,t,n){const o=t.length;if(e.size===o)return;let r,i;for(let s=0;s<o;s++){const n=t[s];if(!e.has(n)){i=n.index;break}r=n.index,e.delete(n)}if(0===e.size)return;{const t=Zi(r,i,e.size);n.push(...Array.from(e.values()).sort(ns).map(((e,n)=>({...e,index:t[n]}))))}}(t,n,r)}));break;case"toFront":o.forEach((e=>{let{moving:t,children:n}=e;return function(e,t,n){const o=t.length;if(e.size===o)return;let r,i;for(let s=o-1;s>-1;s--){const n=t[s];if(!e.has(n)){r=n.index;break}i=n.index,e.delete(n)}if(0===e.size)return;{const t=Zi(r,i,e.size);n.push(...Array.from(e.values()).sort(ns).map(((e,n)=>({...e,index:t[n]}))))}}(t,n,r)}));break;case"forward":o.forEach((e=>{let{moving:t,children:n}=e;return function(e,t,n){const o=t.length;if(e.size===o)return;let r={name:"skipping"};for(let s=0;s<o;s++){const o=e.has(t[s]);switch(r.name){case"skipping":if(!o)continue;r={name:"selecting",selectIndex:s};break;case"selecting":{var i;if(o)continue;const{selectIndex:e}=r;Zi(t[s].index,null===(i=t[s+1])||void 0===i?void 0:i.index,s-e).forEach(((o,r)=>n.push({...t[e+r],index:o}))),r={name:"skipping"};break}}}}(t,n,r)}));break;case"backward":o.forEach((e=>{let{moving:t,children:n}=e;return function(e,t,n){const o=t.length;if(e.size===o)return;let r={name:"skipping"};for(let s=o-1;s>-1;s--){const o=e.has(t[s]);switch(r.name){case"skipping":if(!o)continue;r={name:"selecting",selectIndex:s};break;case"selecting":var i;if(o)continue;Zi(null===(i=t[s-1])||void 0===i?void 0:i.index,t[s].index,r.selectIndex-s).forEach(((e,o)=>{n.push({...t[s+o+1],index:e})})),r={name:"skipping"}}}}(t,n,r)}))}return r}function Af(e){let{editor:t}=e;const n=t.getSelectedShapes(),o=t.getSelectionRotation(),r=t.getSelectionRotatedPageBounds(),{inputs:{originPagePoint:i}}=t;if(!r)return null;const s=r.center.clone().rotWith(r.point,o);return{selectionPageCenter:s,initialCursorAngle:s.angle(i),initialSelectionRotation:o,shapeSnapshots:n.map((e=>({shape:is(e),initialPagePoint:t.getShapePageTransform(e.id).point()})))}}function Mf(e){let{delta:t,editor:n,snapshot:o,stage:r}=e;const{selectionPageCenter:i,shapeSnapshots:s}=o;n.updateShapes(s.map((e=>{let{shape:o,initialPagePoint:r}=e;const s=yl(o.parentId)?n.getShapePageTransform(o.parentId):bh.Identity(),a=Gc.RotWith(r,i,t),l=bh.applyToPoint(bh.Inverse(s),a),c=rd(o.rotation+t);return{id:o.id,type:o.type,x:l.x,y:l.y,rotation:c}})));const a=[];s.forEach((e=>{var t;let{shape:o}=e;const i=n.getShape(o.id);if(!i)return;const s=n.getShapeUtil(o);if("start"===r||"one-off"===r){var l;const e=null===(l=s.onRotateStart)||void 0===l?void 0:l.call(s,o);e&&a.push(e)}const c=null===(t=s.onRotate)||void 0===t?void 0:t.call(s,o,i);if(c&&a.push(c),"end"===r||"one-off"===r){var d;const e=null===(d=s.onRotateEnd)||void 0===d?void 0:d.call(s,o,i);e&&a.push(e)}})),a.length>0&&n.updateShapes(a)}const jf=(e,t,n)=>{for(;!Ca(n.parentId);){const t=e.get(n.parentId);if(!t)return!1;n=t}return n.parentId===t};class Of{constructor(e){var t=this;wr(this,"_clickId",""),wr(this,"_clickTimeout",void 0),wr(this,"_clickScreenPoint",void 0),wr(this,"_previousScreenPoint",void 0),wr(this,"_getClickTimeout",(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Np();t._clickId=n,clearTimeout(t._clickTimeout),t._clickTimeout=setTimeout((()=>{if(t._clickState===e&&t._clickId===n){switch(t._clickState){case"pendingTriple":t.editor.dispatch({...t.lastPointerInfo,type:"click",name:"double_click",phase:"settle"});break;case"pendingQuadruple":t.editor.dispatch({...t.lastPointerInfo,type:"click",name:"triple_click",phase:"settle"});break;case"pendingOverflow":t.editor.dispatch({...t.lastPointerInfo,type:"click",name:"quadruple_click",phase:"settle"})}t._clickState="idle"}}),"idle"===e||"pendingDouble"===e?450:200)})),wr(this,"_clickState","idle"),wr(this,"lastPointerInfo",{}),wr(this,"transformPointerDownEvent",(e=>{if(!this._clickState)return e;switch(this._clickScreenPoint=Gc.From(e.point),this._previousScreenPoint&&this._previousScreenPoint.dist(this._clickScreenPoint)>40&&(this._clickState="idle"),this._previousScreenPoint=this._clickScreenPoint,this.lastPointerInfo=e,this._clickState){case"idle":return this._clickState="pendingDouble",this._clickTimeout=this._getClickTimeout(this._clickState),e;case"pendingDouble":return this._clickState="pendingTriple",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"double_click",phase:"down"};case"pendingTriple":return this._clickState="pendingQuadruple",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"triple_click",phase:"down"};case"pendingQuadruple":return this._clickState="pendingOverflow",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"quadruple_click",phase:"down"};case"pendingOverflow":return this._clickState="overflow",this._clickTimeout=this._getClickTimeout(this._clickState),e;default:return this._clickTimeout=this._getClickTimeout(this._clickState),e}})),wr(this,"transformPointerUpEvent",(e=>{if(!this._clickState)return e;switch(this._clickScreenPoint=Gc.From(e.point),this._clickState){case"pendingTriple":return{...this.lastPointerInfo,type:"click",name:"double_click",phase:"up"};case"pendingQuadruple":return{...this.lastPointerInfo,type:"click",name:"triple_click",phase:"up"};case"pendingOverflow":return{...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"up"};default:return e}})),wr(this,"cancelDoubleClickTimeout",(()=>{this._clickTimeout=clearTimeout(this._clickTimeout),this._clickState="idle"})),wr(this,"handleMove",(()=>{"idle"!==this._clickState&&this._clickScreenPoint&&this._clickScreenPoint.dist(this.editor.inputs.currentScreenPoint)>(this.editor.getInstanceState().isCoarsePointer?6:4)&&this.cancelDoubleClickTimeout()})),this.editor=e}get clickState(){return this._clickState}}class Lf{constructor(e){wr(this,"isSafari",void 0),wr(this,"isIos",void 0),wr(this,"isChromeForIos",void 0),wr(this,"isFirefox",void 0),wr(this,"isAndroid",void 0),this.editor=e,"undefined"!==typeof window&&"navigator"in window?(this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),this.isChromeForIos=/crios.*safari/i.test(navigator.userAgent),this.isFirefox=/firefox/i.test(navigator.userAgent),this.isAndroid=/android/i.test(navigator.userAgent)):(this.isSafari=!1,this.isIos=!1,this.isChromeForIos=!1,this.isFirefox=!1,this.isAndroid=!1)}}let Bf,Rf;function Nf(e){if(e){let t=Df;for(;e.length;)t=t.push(e.pop());return t}return Df}Bf=Symbol.iterator;const Df=new class{constructor(){wr(this,"length",0),wr(this,"head",null),wr(this,"tail",this)}push(e){return new zf(e,this)}toArray(){return vr}[Bf](){return{next:()=>({value:void 0,done:!0})}}};Rf=Symbol.iterator;class zf{constructor(e,t){wr(this,"length",void 0),this.head=e,this.tail=t,this.length=t.length+1}push(e){return new zf(e,this)}toArray(){return Array.from(this)}[Rf](){let e=this;return{next(){if(e.length){const t=e.head;return e=e.tail,{value:t,done:!1}}return{value:void 0,done:!0}}}}}class Ff{constructor(e,t){var n=this;wr(this,"_undos",Fr("HistoryManager.undos",Nf())),wr(this,"_redos",Fr("HistoryManager.redos",Nf())),wr(this,"_batchDepth",0),wr(this,"onBatchComplete",(()=>{})),wr(this,"_commands",{}),wr(this,"createCommand",((e,t,o)=>{if(this._commands[e])throw new Error("Duplicate command: ".concat(e));this._commands[e]=o;const r=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];if(!n._batchDepth)return n.batch((()=>r(...s))),n.ctx;const l=t(...s);if(!l)return n.ctx;const{data:c,ephemeral:d,squashing:u,preservesRedoStack:h}=l;if(n.ignoringUpdates(((e,t)=>(o.do(c),{undos:e,redos:t}))),!d){const t=n._undos.get().head;u&&t&&"command"===t.type&&t.name===e&&t.preservesRedoStack===h?n._undos.update((e=>e.tail.push({...t,id:Np(),data:o.squash(t.data,c)}))):n._undos.update((t=>t.push({type:"command",name:e,data:c,id:Np(),preservesRedoStack:h}))),l.preservesRedoStack||n._redos.set(Nf()),n.ctx.emit("change-history",{reason:"push"})}return n.ctx};return r})),wr(this,"batch",(e=>{try{this._batchDepth++,1===this._batchDepth?Nr((()=>{var t,n;const o=null===(t=this._undos.get().head)||void 0===t?void 0:t.id;e(),o!==(null===(n=this._undos.get().head)||void 0===n?void 0:n.id)&&this.onBatchComplete()})):e()}catch(t){throw this.annotateError(t),t}finally{this._batchDepth--}return this})),wr(this,"ignoringUpdates",(e=>{let t=this._undos.get(),n=this._redos.get();this._undos.set(Nf()),this._redos.set(Nf());try{({undos:t,redos:n}=Nr((()=>e(t,n))))}finally{this._undos.set(t),this._redos.set(n)}})),wr(this,"_undo",(e=>{let{pushToRedoStack:t,toMark:n}=e;return this.ignoringUpdates(((e,o)=>{if(0===e.length)return{undos:e,redos:o};for(;"STOP"===(null===(r=e.head)||void 0===r?void 0:r.type);){var r;const i=e.head;if(e=e.tail,t&&(o=o.push(i)),i.id===n)return this.ctx.emit("change-history",t?{reason:"undo"}:{reason:"bail",markId:n}),{undos:e,redos:o}}if(0===e.length)return this.ctx.emit("change-history",t?{reason:"undo"}:{reason:"bail",markId:n}),{undos:e,redos:o};for(;e.head;){const r=e.head;if(e=e.tail,t&&(o=o.push(r)),"STOP"===r.type){if(r.onUndo&&(!n||r.id===n))return this.ctx.emit("change-history",t?{reason:"undo"}:{reason:"bail",markId:n}),{undos:e,redos:o}}else{this._commands[r.name].undo(r.data)}}return this.ctx.emit("change-history",t?{reason:"undo"}:{reason:"bail",markId:n}),{undos:e,redos:o}})),this})),wr(this,"undo",(()=>(this._undo({pushToRedoStack:!0}),this))),wr(this,"redo",(()=>(this.ignoringUpdates(((e,t)=>{if(0===t.length)return{undos:e,redos:t};for(;"STOP"===(null===(n=t.head)||void 0===n?void 0:n.type);){var n;e=e.push(t.head),t=t.tail}if(0===t.length)return this.ctx.emit("change-history",{reason:"redo"}),{undos:e,redos:t};for(;t.head;){const n=t.head;if(e=e.push(t.head),t=t.tail,"STOP"===n.type){if(n.onRedo)break}else{const e=this._commands[n.name];e.redo?e.redo(n.data):e.do(n.data)}}return this.ctx.emit("change-history",{reason:"redo"}),{undos:e,redos:t}})),this))),wr(this,"bail",(()=>(this._undo({pushToRedoStack:!1}),this))),wr(this,"bailToMark",(e=>(this._undo({pushToRedoStack:!1,toMark:e}),this))),wr(this,"mark",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Np(),t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=n._undos.get().head;return r&&"STOP"===r.type&&r.id===e&&r.onUndo===t&&r.onRedo===o?r.id:(n._undos.update((n=>n.push({type:"STOP",id:e,onUndo:t,onRedo:o}))),n.ctx.emit("mark-history",{id:e}),e)})),this.ctx=e,this.annotateError=t}getNumUndos(){return this._undos.get().length}getNumRedos(){return this._redos.get().length}clear(){this._undos.set(Nf()),this._redos.set(Nf())}}class Uf{constructor(e){var t=this;wr(this,"scribbleItems",new Map),wr(this,"state","paused"),wr(this,"addScribble",(function(e){var n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Np();const r={id:o,scribble:{id:o,size:20,color:"accent",opacity:.8,delay:0,points:[],shrink:.1,taper:!0,...e,state:"starting"},timeoutMs:0,delayRemaining:null!==(n=e.delay)&&void 0!==n?n:0,prev:null,next:null};return t.scribbleItems.set(o,r),"paused"===t.state&&t.resume(),r})),wr(this,"stop",(e=>{const t=this.scribbleItems.get(e);if(!t)throw Error("Scribble with id ".concat(e," not found"));return t.delayRemaining=Math.min(t.delayRemaining,200),t.scribble.state="stopping",t})),wr(this,"addPoint",((e,t,n)=>{const o=this.scribbleItems.get(e);if(!o)throw Error("Scribble with id ".concat(e," not found"));const{prev:r}=o,i={x:t,y:n,z:.5};return(!r||Gc.Dist(r,i)>=1)&&(o.next=i),o})),wr(this,"tick",(e=>{this.editor.batch((()=>{this.scribbleItems.forEach((t=>{if("starting"===t.scribble.state){const{next:e,prev:n}=t;return e&&e!==n&&(t.prev=e,t.scribble.points.push(e)),void(t.scribble.points.length>8&&(t.scribble.state="active"))}t.delayRemaining>0&&(t.delayRemaining=Math.max(0,t.delayRemaining-e)),t.timeoutMs+=e,t.timeoutMs>=16&&(t.timeoutMs=0);const{delayRemaining:n,timeoutMs:o,prev:r,next:i,scribble:s}=t;switch(s.state){case"active":i&&i!==r?(t.prev=i,s.points.push(i),0===n&&s.points.length>8&&s.points.shift()):0===o&&(s.points.length>1?s.points.shift():t.delayRemaining=s.delay);break;case"stopping":if(0===t.delayRemaining&&0===o){if(1===s.points.length)return void this.scribbleItems.delete(t.id);s.shrink&&(s.size=Math.max(1,s.size*(1-s.shrink))),s.points.shift()}}})),this.editor.updateInstanceState({scribbles:Array.from(this.scribbleItems.values()).map((e=>{let{scribble:t}=e;return{...t,points:[...t.points]}})).slice(-5)}),0===this.scribbleItems.size&&this.pause()}))})),this.editor=e}resume(){this.state="running",this.editor.addListener("tick",this.tick)}pause(){this.editor.removeListener("tick",this.tick),this.state="paused"}reset(){this.editor.updateInstanceState({scribbles:[]}),this.scribbleItems.clear(),this.pause()}}class Hf{constructor(e){wr(this,"_beforeCreateHandlers",{}),wr(this,"_afterCreateHandlers",{}),wr(this,"_beforeChangeHandlers",{}),wr(this,"_afterChangeHandlers",{}),wr(this,"_beforeDeleteHandlers",{}),wr(this,"_afterDeleteHandlers",{}),wr(this,"_batchCompleteHandlers",[]),this.editor=e,e.store.onBeforeCreate=(e,t)=>{const n=this._beforeCreateHandlers[e.typeName];if(n){let o=e;for(const e of n)o=e(o,t);return o}return e},e.store.onAfterCreate=(e,t)=>{const n=this._afterCreateHandlers[e.typeName];if(n)for(const o of n)o(e,t)},e.store.onBeforeChange=(e,t,n)=>{const o=this._beforeChangeHandlers[t.typeName];if(o){let r=t;for(const t of o)r=t(e,r,n);return r}return t};let t=0;e.store.onAfterChange=(e,n,o)=>{if(t++,t>1e3)console.error("[CleanupManager.onAfterChange] Maximum update depth exceeded, bailing out.");else{const t=this._afterChangeHandlers[n.typeName];if(t)for(const r of t)r(e,n,o)}t--},e.store.onBeforeDelete=(e,t)=>{const n=this._beforeDeleteHandlers[e.typeName];if(n)for(const o of n)if(!1===o(e,t))return!1},e.store.onAfterDelete=(e,t)=>{const n=this._afterDeleteHandlers[e.typeName];if(n)for(const o of n)o(e,t)},e.history.onBatchComplete=()=>{this._batchCompleteHandlers.forEach((e=>e()))}}registerBeforeCreateHandler(e,t){return this._beforeCreateHandlers[e]||(this._beforeCreateHandlers[e]=[]),this._beforeCreateHandlers[e].push(t),()=>Vf(this._beforeCreateHandlers[e],t)}registerAfterCreateHandler(e,t){return this._afterCreateHandlers[e]||(this._afterCreateHandlers[e]=[]),this._afterCreateHandlers[e].push(t),()=>Vf(this._afterCreateHandlers[e],t)}registerBeforeChangeHandler(e,t){return this._beforeChangeHandlers[e]||(this._beforeChangeHandlers[e]=[]),this._beforeChangeHandlers[e].push(t),()=>Vf(this._beforeChangeHandlers[e],t)}registerAfterChangeHandler(e,t){return this._afterChangeHandlers[e]||(this._afterChangeHandlers[e]=[]),this._afterChangeHandlers[e].push(t),()=>Vf(this._afterChangeHandlers[e],t)}registerBeforeDeleteHandler(e,t){return this._beforeDeleteHandlers[e]||(this._beforeDeleteHandlers[e]=[]),this._beforeDeleteHandlers[e].push(t),()=>Vf(this._beforeDeleteHandlers[e],t)}registerAfterDeleteHandler(e,t){return this._afterDeleteHandlers[e]||(this._afterDeleteHandlers[e]=[]),this._afterDeleteHandlers[e].push(t),()=>Vf(this._afterDeleteHandlers[e],t)}registerBatchCompleteHandler(e){return this._batchCompleteHandlers.push(e),()=>Vf(this._batchCompleteHandlers,e)}}function Vf(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}var Wf=Object.defineProperty,Kf=Object.getOwnPropertyDescriptor,Gf=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?Kf(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&Wf(t,n,i),i};const qf=e=>Math.round(e*10**8)/10**8;function Yf(e,t,n,o,r){const i=e.filter((e=>("forward"===o?e.startNode.id===t:e.endNode.id===t)&&qf(e.length)===qf(n)&&fd(e.breadthIntersection[0],e.breadthIntersection[1],r[0],r[1])));if(0===i.length)return[];const s=new Set;return i.forEach((t=>{const a="forward"===o?t.endNode.id:t.startNode.id;if(!s.has(a)){s.add(a);const l=Yf(e,a,n,o,fd(t.breadthIntersection[0],t.breadthIntersection[1],r[0],r[1]));i.push(...l)}})),i}class Xf{constructor(e){wr(this,"editor",void 0),this.manager=e,this.editor=e.editor}getSnapPointsCache(){const{editor:e}=this;return e.store.createComputedCache("snapPoints",(t=>{var n;const o=e.getShapePageTransform(t.id);if(!o)return;const r=null!==(n=e.getShapeUtil(t).getBoundsSnapGeometry(t).points)&&void 0!==n?n:e.getShapeGeometry(t).bounds.cornersAndCenter;return o&&r?r.map(((e,n)=>{const{x:r,y:i}=bh.applyToPoint(o,e);return{x:r,y:i,id:"".concat(t.id,":").concat(n)}})):void 0}))}getSnapPoints(e){var t;return null!==(t=this.getSnapPointsCache().get(e))&&void 0!==t?t:[]}getSnappablePoints(){const e=this.getSnapPointsCache(),t=this.manager.getSnappableShapes(),n=[];for(const o of t){const t=e.get(o);t&&n.push(...t)}return n}getSnappableGapNodes(){return Array.from(this.manager.getSnappableShapes(),(e=>({id:e,pageBounds:pi(this.editor.getShapePageBounds(e))})))}getVisibleGaps(){const e=[],t=[];let n,o;const r=this.getSnappableGapNodes().sort(((e,t)=>e.pageBounds.minX-t.pageBounds.minX));for(let s=0;s<r.length;s++){n=r[s];for(let t=s+1;t<r.length;t++)o=r[t],n.pageBounds.maxX<o.pageBounds.minX&&pd(n.pageBounds.minY,n.pageBounds.maxY,o.pageBounds.minY,o.pageBounds.maxY)&&e.push({startNode:n,endNode:o,startEdge:[new Gc(n.pageBounds.maxX,n.pageBounds.minY),new Gc(n.pageBounds.maxX,n.pageBounds.maxY)],endEdge:[new Gc(o.pageBounds.minX,o.pageBounds.minY),new Gc(o.pageBounds.minX,o.pageBounds.maxY)],length:o.pageBounds.minX-n.pageBounds.maxX,breadthIntersection:fd(n.pageBounds.minY,n.pageBounds.maxY,o.pageBounds.minY,o.pageBounds.maxY)})}const i=r.sort(((e,t)=>e.pageBounds.minY-t.pageBounds.minY));for(let s=0;s<i.length;s++){n=i[s];for(let e=s+1;e<i.length;e++)o=i[e],n.pageBounds.maxY<o.pageBounds.minY&&pd(n.pageBounds.minX,n.pageBounds.maxX,o.pageBounds.minX,o.pageBounds.maxX)&&t.push({startNode:n,endNode:o,startEdge:[new Gc(n.pageBounds.minX,n.pageBounds.maxY),new Gc(n.pageBounds.maxX,n.pageBounds.maxY)],endEdge:[new Gc(o.pageBounds.minX,o.pageBounds.minY),new Gc(o.pageBounds.maxX,o.pageBounds.minY)],length:o.pageBounds.minY-n.pageBounds.maxY,breadthIntersection:fd(n.pageBounds.minX,n.pageBounds.maxX,o.pageBounds.minX,o.pageBounds.maxX)})}return{horizontal:e,vertical:t}}snapTranslateShapes(e){var t,n,o,r;let{lockedAxis:i,initialSelectionPageBounds:s,initialSelectionSnapPoints:a,dragDelta:l}=e;const c=this.manager.getSnapThreshold(),d=this.getSnappablePoints(),u=s.clone().translate(l),h=a.map(((e,t)=>{let{x:n,y:o}=e;return{id:"selection:"+t,x:n+l.x,y:o+l.y}})),p=d,f=[],g=[],m=new Gc(c,c);this.collectPointSnaps({minOffset:m,nearestSnapsX:f,nearestSnapsY:g,otherNodeSnapPoints:p,selectionSnapPoints:h}),this.collectGapSnaps({selectionPageBounds:u,nearestSnapsX:f,nearestSnapsY:g,minOffset:m});const v=new Gc("x"===i?0:null!==(t=null===(n=f[0])||void 0===n?void 0:n.nudge)&&void 0!==t?t:0,"y"===i?0:null!==(o=null===(r=g[0])||void 0===r?void 0:r.nudge)&&void 0!==o?o:0);m.x=0,m.y=0,f.length=0,g.length=0,h.forEach((e=>{e.x+=v.x,e.y+=v.y})),u.translate(v),this.collectPointSnaps({minOffset:m,nearestSnapsX:f,nearestSnapsY:g,otherNodeSnapPoints:p,selectionSnapPoints:h}),this.collectGapSnaps({selectionPageBounds:u,nearestSnapsX:f,nearestSnapsY:g,minOffset:m});const y=this.getPointSnapLines({nearestSnapsX:f,nearestSnapsY:g}),b=this.getGapSnapLines({selectionPageBounds:u,nearestSnapsX:f,nearestSnapsY:g});return this.manager.setIndicators([...b,...y]),{nudge:v}}snapResizeShapes(e){var t,n,o,r;let{initialSelectionPageBounds:i,dragDelta:s,handle:a,isAspectRatioLocked:l,isResizingFromCenter:c}=e;const d=this.manager.getSnapThreshold(),{box:u,scaleX:h,scaleY:p}=mh.Resize(i,a,c?2*s.x:s.x,c?2*s.y:s.y,l);let f=a;h<0&&(f=function(e){switch(e){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return e}}(f)),p<0&&(f=function(e){switch(e){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return e}}(f)),c&&(u.center=i.center);const g="top"===f||"bottom"===f,m="left"===f||"right"===f,v=$f(f,u),y=this.getSnappablePoints(),b=[],w=[],x=new Gc(d,d);this.collectPointSnaps({minOffset:x,nearestSnapsX:b,nearestSnapsY:w,otherNodeSnapPoints:y,selectionSnapPoints:v});const S=new Gc(g?0:null!==(t=null===(n=b[0])||void 0===n?void 0:n.nudge)&&void 0!==t?t:0,m?0:null!==(o=null===(r=w[0])||void 0===r?void 0:r.nudge)&&void 0!==o?o:0);if(l&&("top_left"===(_=f)||"top_right"===_||"bottom_right"===_||"bottom_left"===_)&&0!==S.len()){const e=b.length&&w.length?Math.abs(S.x)<Math.abs(S.y)?"x":"y":b.length?"x":"y",t=i.aspectRatio;"x"===e?(w.length=0,S.y=S.x/t,"bottom_left"!==f&&"top_right"!==f||(S.y=-S.y)):(b.length=0,S.x=S.y*t,"bottom_left"!==f&&"top_right"!==f||(S.x=-S.x))}var _;const k=Gc.Add(s,S),{box:C}=mh.Resize(i,a,c?2*k.x:k.x,c?2*k.y:k.y,l);c&&(C.center=i.center);const E=$f("any",C);b.length=0,w.length=0,x.x=0,x.y=0,this.collectPointSnaps({minOffset:x,nearestSnapsX:b,nearestSnapsY:w,otherNodeSnapPoints:y,selectionSnapPoints:E});const I=this.getPointSnapLines({nearestSnapsX:b,nearestSnapsY:w});return this.manager.setIndicators([...I]),{nudge:S}}collectPointSnaps(e){let{selectionSnapPoints:t,otherNodeSnapPoints:n,minOffset:o,nearestSnapsX:r,nearestSnapsY:i}=e;for(const s of t)for(const e of n){const t=Gc.Sub(s,e),n=Math.abs(t.x),a=Math.abs(t.y);qf(n)<=qf(o.x)&&(qf(n)<qf(o.x)&&(r.length=0),r.push({type:"points",points:{thisPoint:s,otherPoint:e},nudge:e.x-s.x}),o.x=n),qf(a)<=qf(o.y)&&(qf(a)<qf(o.y)&&(i.length=0),i.push({type:"points",points:{thisPoint:s,otherPoint:e},nudge:e.y-s.y}),o.y=a)}}collectGapSnaps(e){let{selectionPageBounds:t,minOffset:n,nearestSnapsX:o,nearestSnapsY:r}=e;const{horizontal:i,vertical:s}=this.getVisibleGaps();for(const a of i){if(!pd(a.breadthIntersection[0],a.breadthIntersection[1],t.minY,t.maxY))continue;const e=a.startEdge[0].x+a.length/2-t.center.x;if(a.length>t.width&&qf(Math.abs(e))<=qf(n.x)){qf(Math.abs(e))<qf(n.x)&&(o.length=0),n.x=Math.abs(e);const t={type:"gap_center",gap:a,nudge:e},r=o.find((e=>{let{type:t}=e;return"gap_center"===t})),i=r&&fd(a.breadthIntersection[0],a.breadthIntersection[1],r.gap.breadthIntersection[0],r.gap.breadthIntersection[1]);r&&r.gap.length>a.length&&i?o[o.indexOf(r)]=t:r&&i||o.push(t)}const r=a.startNode.pageBounds.minX-a.length-t.maxX;qf(Math.abs(r))<=qf(n.x)&&(qf(Math.abs(r))<qf(n.x)&&(o.length=0),n.x=Math.abs(r),o.push({type:"gap_duplicate",gap:a,protrusionDirection:"left",nudge:r}));const i=a.endNode.pageBounds.maxX+a.length-t.minX;qf(Math.abs(i))<=qf(n.x)&&(qf(Math.abs(i))<qf(n.x)&&(o.length=0),n.x=Math.abs(i),o.push({type:"gap_duplicate",gap:a,protrusionDirection:"right",nudge:i}))}for(const a of s){if(!pd(a.breadthIntersection[0],a.breadthIntersection[1],t.minX,t.maxX))continue;const e=a.startEdge[0].y+a.length/2-t.center.y;if(a.length>t.height&&qf(Math.abs(e))<=qf(n.y)){qf(Math.abs(e))<qf(n.y)&&(r.length=0),n.y=Math.abs(e);const t={type:"gap_center",gap:a,nudge:e},o=r.find((e=>{let{type:t}=e;return"gap_center"===t})),i=o&&pd(o.gap.breadthIntersection[0],o.gap.breadthIntersection[1],a.breadthIntersection[0],a.breadthIntersection[1]);o&&o.gap.length>a.length&&i?r[r.indexOf(o)]=t:o&&i||r.push(t);continue}const o=a.startNode.pageBounds.minY-a.length-t.maxY;qf(Math.abs(o))<=qf(n.y)&&(qf(Math.abs(o))<qf(n.y)&&(r.length=0),n.y=Math.abs(o),r.push({type:"gap_duplicate",gap:a,protrusionDirection:"top",nudge:o}));const i=a.endNode.pageBounds.maxY+a.length-t.minY;qf(Math.abs(i))<=qf(n.y)&&(qf(Math.abs(i))<qf(n.y)&&(r.length=0),n.y=Math.abs(i),r.push({type:"gap_duplicate",gap:a,protrusionDirection:"bottom",nudge:i}))}}getPointSnapLines(e){let{nearestSnapsX:t,nearestSnapsY:n}=e;const o={},r={};if(t.length>0)for(const i of t)if("points"===i.type){const e=qf(i.points.otherPoint.x);o[e]||(o[e]=[]),o[e].push(i.points)}if(n.length>0)for(const i of n)if("points"===i.type){const e=qf(i.points.otherPoint.y);r[e]||(r[e]=[]),r[e].push(i.points)}return Object.values(o).concat(Object.values(r)).map((e=>({id:Np(),type:"points",points:si(e.map((e=>Gc.From(e.otherPoint))).concat(e.map((e=>Gc.From(e.thisPoint)))),((e,t)=>e.equals(t)))})))}getGapSnapLines(e){let{selectionPageBounds:t,nearestSnapsX:n,nearestSnapsY:o}=e;const{vertical:r,horizontal:i}=this.getVisibleGaps(),s={top:t.sides[0],right:t.sides[1],bottom:[t.corners[3],t.corners[2]],left:[t.corners[0],t.corners[3]]},a=[];if(n.length>0)for(const l of n){if("points"===l.type)continue;const{gap:{breadthIntersection:e,startEdge:n,startNode:o,endNode:r,length:c,endEdge:d}}=l;switch(l.type){case"gap_center":{const l=(c-t.width)/2,u=fd(e[0],e[1],t.minY,t.maxY);a.push({type:"gaps",direction:"horizontal",id:Np(),gaps:[...Yf(i,o.id,l,"backward",u),{startEdge:n,endEdge:s.left},{startEdge:s.right,endEdge:d},...Yf(i,r.id,l,"forward",u)]});break}case"gap_duplicate":{const u=fd(e[0],e[1],t.minY,t.maxY);a.push({type:"gaps",direction:"horizontal",id:Np(),gaps:"left"===l.protrusionDirection?[{startEdge:s.right,endEdge:n.map((e=>e.clone().addXY(-o.pageBounds.width,0)))},{startEdge:n,endEdge:d},...Yf(i,r.id,c,"forward",u)]:[...Yf(i,o.id,c,"backward",u),{startEdge:n,endEdge:d},{startEdge:d.map((e=>e.clone().addXY(l.gap.endNode.pageBounds.width,0))),endEdge:s.left}]});break}}}if(o.length>0)for(const l of o){if("points"===l.type)continue;const{gap:{breadthIntersection:e,startEdge:n,startNode:o,endNode:i,length:c,endEdge:d}}=l;switch(l.type){case"gap_center":{const i=(c-t.height)/2,u=fd(e[0],e[1],t.minX,t.maxX);a.push({type:"gaps",direction:"vertical",id:Np(),gaps:[...Yf(r,o.id,i,"backward",u),{startEdge:n,endEdge:s.top},{startEdge:s.bottom,endEdge:d},...Yf(r,l.gap.endNode.id,i,"forward",u)]});break}case"gap_duplicate":{const u=fd(e[0],e[1],t.minX,t.maxX);a.push({type:"gaps",direction:"vertical",id:Np(),gaps:"top"===l.protrusionDirection?[{startEdge:s.bottom,endEdge:n.map((e=>e.clone().addXY(0,-o.pageBounds.height)))},{startEdge:n,endEdge:d},...Yf(r,i.id,c,"forward",u)]:[...Yf(r,o.id,c,"backward",u),{startEdge:n,endEdge:d},{startEdge:d.map((e=>e.clone().addXY(0,i.pageBounds.height))),endEdge:s.top}]})}}}return function(e){e.sort(((e,t)=>t.gaps.length-e.gaps.length));for(let t=e.length-1;t>0;t--){const n=e[t];for(let o=t-1;o>=0;o--){const r=e[o];if(r.direction===n.direction&&n.gaps.every((e=>r.gaps.some((t=>qf(e.startEdge[0].x)===qf(t.startEdge[0].x)&&qf(e.startEdge[0].y)===qf(t.startEdge[0].y)&&qf(e.startEdge[1].x)===qf(t.startEdge[1].x)&&qf(e.startEdge[1].y)===qf(t.startEdge[1].y)))&&r.gaps.some((t=>qf(e.endEdge[0].x)===qf(t.endEdge[0].x)&&qf(e.endEdge[0].y)===qf(t.endEdge[0].y)&&qf(e.endEdge[1].x)===qf(t.endEdge[1].x)&&qf(e.endEdge[1].y)===qf(t.endEdge[1].y)))))){e.splice(t,1);break}}}}(a),a}}function $f(e,t){const{minX:n,maxX:o,minY:r,maxY:i}=t,s=[];switch(e){case"top":case"left":case"top_left":case"any":s.push({id:"top_left",handle:"top_left",x:n,y:r})}switch(e){case"top":case"right":case"top_right":case"any":s.push({id:"top_right",handle:"top_right",x:o,y:r})}switch(e){case"bottom":case"right":case"bottom_right":case"any":s.push({id:"bottom_right",handle:"bottom_right",x:o,y:i})}switch(e){case"bottom":case"left":case"bottom_left":case"any":s.push({id:"bottom_left",handle:"bottom_left",x:n,y:i})}return s}Gf([$r],Xf.prototype,"getSnapPointsCache",1),Gf([$r],Xf.prototype,"getSnappablePoints",1),Gf([$r],Xf.prototype,"getSnappableGapNodes",1),Gf([$r],Xf.prototype,"getVisibleGaps",1);var Zf=Object.defineProperty,Qf=Object.getOwnPropertyDescriptor;const Jf=()=>null,eg=()=>[];class tg{constructor(e){wr(this,"editor",void 0),this.manager=e,this.editor=e.editor}getSnapGeometryCache(){const{editor:e}=this;return e.store.createComputedCache("handle snap geometry",(t=>{var n,o,r;const i=e.getShapeUtil(t).getHandleSnapGeometry(t);return{outline:void 0===i.outline?e.getShapeGeometry(t):i.outline,points:null!==(n=i.points)&&void 0!==n?n:[],getSelfSnapOutline:null!==(o=i.getSelfSnapOutline)&&void 0!==o?o:Jf,getSelfSnapPoints:null!==(r=i.getSelfSnapPoints)&&void 0!==r?r:eg}}))}*iterateSnapPointsInPageSpace(e,t){var n;const o=null===(n=this.getSnapGeometryCache().get(e))||void 0===n?void 0:n.getSelfSnapPoints(t);if(o&&o.length){const t=pi(this.editor.getShapePageTransform(e));for(const e of o)yield t.applyToPoint(e)}for(const i of this.manager.getSnappableShapes()){var r;if(i===e)continue;const t=null===(r=this.getSnapGeometryCache().get(i))||void 0===r?void 0:r.points;if(!t||!t.length)continue;const n=pi(this.editor.getShapePageTransform(i));for(const e of t)yield n.applyToPoint(e)}}*iterateSnapOutlines(e,t){var n;const o=null===(n=this.getSnapGeometryCache().get(e))||void 0===n?void 0:n.getSelfSnapOutline(t);o&&(yield{shapeId:e,outline:o});for(const i of this.manager.getSnappableShapes()){var r;if(i===e)continue;const t=null===(r=this.getSnapGeometryCache().get(i))||void 0===r?void 0:r.outline;t&&(yield{shapeId:i,outline:t})}}getHandleSnapPosition(e){let{currentShapeId:t,handle:n,handleInPageSpace:o}=e;const r=this.manager.getSnapThreshold();let i=r,s=null;for(const c of this.iterateSnapPointsInPageSpace(t,n)){const e=Gc.Dist(o,c);e<i&&(i=e,s=c)}if(s)return s;let a=r,l=null;for(const{shapeId:c,outline:d}of this.iterateSnapOutlines(t,n)){const e=pi(this.editor.getShapePageTransform(c)),t=this.editor.getPointInShapeSpace(c,o),n=d.nearestPoint(t),r=e.applyToPoint(n),i=Gc.Dist(o,r);i<a&&(a=i,l=r)}return l||null}snapHandle(e){let{currentShapeId:t,handle:n}=e;const o=pi(this.editor.getShapePageTransform(t)).applyToPoint(n),r=this.getHandleSnapPosition({currentShapeId:t,handle:n,handleInPageSpace:o});return r?(this.manager.setIndicators([{id:Np(),type:"points",points:[r]}]),{nudge:Gc.Sub(r,o)}):null}}((e,t,n,o)=>{for(var r,i=o>1?void 0:o?Qf(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);o&&i&&Zf(t,n,i)})([$r],tg.prototype,"getSnapGeometryCache",1);var ng=Object.defineProperty,og=Object.getOwnPropertyDescriptor,rg=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?og(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&ng(t,n,i),i};class ig{constructor(e){wr(this,"shapeBounds",void 0),wr(this,"handles",void 0),wr(this,"_snapIndicators",Fr("snapLines",void 0)),this.editor=e,this.shapeBounds=new Xf(this),this.handles=new tg(this)}getIndicators(){var e;return null!==(e=this._snapIndicators.get())&&void 0!==e?e:vr}clearIndicators(){this.getIndicators().length&&this._snapIndicators.set(void 0)}setIndicators(e){this._snapIndicators.set(e)}getSnapThreshold(){return 8/this.editor.getZoomLevel()}getSnappableShapes(){var e;const{editor:t}=this,n=t.getRenderingBounds(),o=t.getSelectedShapeIds(),r=new Set,i=e=>{if(yl(e)){const n=t.getShape(e);n&&t.isShapeOfType(n,"frame")&&r.add(e)}const s=t.getSortedChildIdsForParent(e);for(const a of s){if(o.includes(a))continue;const e=t.getShape(a);if(!e)continue;if(!t.getShapeUtil(e).canSnap(e))continue;const s=t.getShapePageBounds(a);s&&n.includes(s)&&(t.isShapeOfType(e,"group")?i(a):r.add(a))}};return i(null!==(e=this.getCurrentCommonAncestor())&&void 0!==e?e:t.getCurrentPageId()),r}getCurrentCommonAncestor(){return this.editor.findCommonAncestor(this.editor.getSelectedShapes())}}rg([$r],ig.prototype,"getSnapThreshold",1),rg([$r],ig.prototype,"getSnappableShapes",1),rg([$r],ig.prototype,"getCurrentCommonAncestor",1);const sg=/\r?\n|\r/g;function ag(e){return e.replace(sg,"\n").split("\n").map((e=>e||" ")).join("\n")}const lg={start:"left","start-legacy":"left",middle:"center","middle-legacy":"center",end:"right","end-legacy":"right"},cg=/\s/;class dg{constructor(e){wr(this,"baseElm",void 0),wr(this,"measureText",((e,t)=>{var n,o;const r=null===(n=this.baseElm)||void 0===n?void 0:n.cloneNode();this.baseElm.insertAdjacentElement("afterend",r),r.setAttribute("dir","ltr"),r.style.setProperty("font-family",t.fontFamily),r.style.setProperty("font-style",t.fontStyle),r.style.setProperty("font-weight",t.fontWeight),r.style.setProperty("font-size",t.fontSize+"px"),r.style.setProperty("line-height",t.lineHeight*t.fontSize+"px"),r.style.setProperty("max-width",null===t.maxWidth?null:t.maxWidth+"px"),r.style.setProperty("min-width",null!==(o=t.minWidth)&&void 0!==o?o:null),r.style.setProperty("padding",t.padding),r.textContent=ag(e);const i=r.getBoundingClientRect();return r.remove(),{x:0,y:0,w:i.width,h:i.height}})),this.editor=e;const t=document.createElement("div");t.id="tldraw_text_measure",t.classList.add("tl-text"),t.classList.add("tl-text-measure"),t.tabIndex=-1,this.editor.getContainer().appendChild(t),this.baseElm=t}measureElementTextNodeSpans(e){let{shouldTruncateToFirstLine:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[],o=e.getBoundingClientRect(),r=-o.left,i=-o.top,s=new Range,a=e.childNodes[0];let l=0,c=null,d=null,u=0,h=!1;for(const f of e.childNodes)if(f.nodeType===Node.TEXT_NODE)for(const e of null!==(p=f.textContent)&&void 0!==p?p:""){var p;s.setStart(a,l),s.setEnd(a,l+e.length);const o=s.getClientRects(),f=o[o.length-1],g=f.top+i,m=f.left+r,v=f.right+r,y=cg.test(e);if(y===d&&g===u&&c)c.box.w=v-c.box.x,c.text+=e;else{if(c){if(t&&g!==u){h=!0;break}n.push(c)}c={box:{x:m,y:g,w:f.width,h:f.height},text:e}}d=y,u=g,l+=e.length}return c&&n.push(c),{spans:n,didTruncate:h}}measureTextSpans(e,t){var n;if(""===e)return[];const o=null===(n=this.baseElm)||void 0===n?void 0:n.cloneNode();this.baseElm.insertAdjacentElement("afterend",o);const r=Math.ceil(t.width-2*t.padding);o.style.setProperty("width","".concat(r,"px")),o.style.setProperty("height","min-content"),o.style.setProperty("dir","ltr"),o.style.setProperty("font-size","".concat(t.fontSize,"px")),o.style.setProperty("font-family",t.fontFamily),o.style.setProperty("font-weight",t.fontWeight),o.style.setProperty("line-height","".concat(t.lineHeight*t.fontSize,"px")),o.style.setProperty("text-align",lg[t.textAlign]);const i="truncate-ellipsis"===t.overflow||"truncate-clip"===t.overflow;i&&(o.style.setProperty("overflow-wrap","anywhere"),o.style.setProperty("word-break","break-all"));const s=ag(e);o.textContent=s;const{spans:a,didTruncate:l}=this.measureElementTextNodeSpans(o,{shouldTruncateToFirstLine:i});if("truncate-ellipsis"===t.overflow&&l){o.textContent="\u2026";const e=Math.ceil(this.measureElementTextNodeSpans(o).spans[0].box.w);o.style.setProperty("width","".concat(r-e,"px")),o.textContent=s;const n=this.measureElementTextNodeSpans(o,{shouldTruncateToFirstLine:!0}).spans,i=n[n.length-1];return n.push({text:"\u2026",box:{x:Math.min(i.box.x+i.box.w,t.width-t.padding-e),y:i.box.y,w:e,h:i.box.h}}),n}return o.remove(),a}}class ug{constructor(e){wr(this,"raf",void 0),wr(this,"isPaused",!0),wr(this,"last",0),wr(this,"t",0),wr(this,"start",(()=>{this.isPaused=!1,cancelAnimationFrame(this.raf),this.raf=requestAnimationFrame(this.tick),this.last=Date.now()})),wr(this,"tick",(()=>{if(this.isPaused)return;const e=Date.now(),t=e-this.last;this.last=e,this.t+=t,this.editor.emit("frame",t),this.t<16||(this.t-=16,this.updatePointerVelocity(t),this.editor.emit("tick",t)),this.raf=requestAnimationFrame(this.tick)})),wr(this,"dispose",(()=>{this.isPaused=!0,cancelAnimationFrame(this.raf)})),wr(this,"prevPoint",new Gc),wr(this,"updatePointerVelocity",(e=>{const{prevPoint:t,editor:{inputs:{currentScreenPoint:n,pointerVelocity:o}}}=this;if(0===e)return;const r=Gc.Sub(n,t);this.prevPoint=n.clone();const i=r.len(),s=i?r.div(i):new Gc(0,0),a=o.clone().lrp(s.mul(i/e),.5);Math.abs(a.x)<.01&&(a.x=0),Math.abs(a.y)<.01&&(a.y=0),o.equals(a)||(this.editor.inputs.pointerVelocity=a)})),this.editor=e,this.editor.disposables.add(this.dispose),this.start()}}var hg=Object.defineProperty,pg=Object.getOwnPropertyDescriptor,fg=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?pg(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&hg(t,n,i),i};class gg{constructor(e,t){wr(this,"updateUserPreferences",(e=>{this.user.setUserPreferences({...this.user.userPreferences.get(),...e})})),this.user=e,this.inferDarkMode=t}getUserPreferences(){return{id:this.getId(),name:this.getName(),locale:this.getLocale(),color:this.getColor(),animationSpeed:this.getAnimationSpeed(),isSnapMode:this.getIsSnapMode(),isDarkMode:this.getIsDarkMode(),isWrapMode:this.getIsWrapMode()}}getIsDarkMode(){var e;return null!==(e=this.user.userPreferences.get().isDarkMode)&&void 0!==e?e:!!this.inferDarkMode&&function(){var e,t,n;return"undefined"!==typeof window&&null!==(e=null===(t=(n=window).matchMedia)||void 0===t||null===(t=t.call(n,"(prefers-color-scheme: dark)"))||void 0===t?void 0:t.matches)&&void 0!==e&&e}()}getEdgeScrollSpeed(){var e;return null!==(e=this.user.userPreferences.get().edgeScrollSpeed)&&void 0!==e?e:Vp.edgeScrollSpeed}getAnimationSpeed(){var e;return null!==(e=this.user.userPreferences.get().animationSpeed)&&void 0!==e?e:Vp.animationSpeed}getId(){return this.user.userPreferences.get().id}getName(){var e;return null!==(e=this.user.userPreferences.get().name)&&void 0!==e?e:Vp.name}getLocale(){var e;return null!==(e=this.user.userPreferences.get().locale)&&void 0!==e?e:Vp.locale}getColor(){var e;return null!==(e=this.user.userPreferences.get().color)&&void 0!==e?e:Vp.color}getIsSnapMode(){var e;return null!==(e=this.user.userPreferences.get().isSnapMode)&&void 0!==e?e:Vp.isSnapMode}getIsWrapMode(){var e;return null!==(e=this.user.userPreferences.get().isWrapMode)&&void 0!==e?e:Vp.isWrapMode}}function mg(e){return Math.abs(e.props.bend)<8}function vg(e,t){if("point"===t.type)return;const n=e.getShape(t.boundShapeId),o=e.getShapePageTransform(n),r=e.getShapeGeometry(n),i=r instanceof xh?r.children[0].vertices:r.vertices;return{shape:n,transform:o,isClosed:r.isClosed,isExact:t.isExact,didIntersect:!1,outline:i}}function yg(e,t,n,o){if("point"===n.type)return Gc.From(n);const r=e.getShape(n.boundShapeId);if(r){const{point:i,size:s}=e.getShapeGeometry(r).bounds,a=Gc.Add(i,Gc.MulV(n.isPrecise||o?n.normalizedAnchor:{x:.5,y:.5},s)),l=bh.applyToPoint(e.getShapePageTransform(r),a);return bh.applyToPoint(bh.Inverse(t),l)}return new Gc(0,0)}function bg(e,t){const n=e.getShapePageTransform(t);let o,r;"binding"===t.props.start.type&&"binding"===t.props.end.type&&(o=t.props.start.boundShapeId,r=t.props.end.boundShapeId);const i=_g(e,o,r);return{start:yg(e,n,t.props.start,"double-bound"===i||"start-contains-end"===i),end:yg(e,n,t.props.end,"double-bound"===i||"end-contains-start"===i)}}fg([$r],gg.prototype,"getUserPreferences",1),fg([$r],gg.prototype,"getIsDarkMode",1),fg([$r],gg.prototype,"getEdgeScrollSpeed",1),fg([$r],gg.prototype,"getAnimationSpeed",1),fg([$r],gg.prototype,"getId",1),fg([$r],gg.prototype,"getName",1),fg([$r],gg.prototype,"getLocale",1),fg([$r],gg.prototype,"getColor",1),fg([$r],gg.prototype,"getIsSnapMode",1),fg([$r],gg.prototype,"getIsWrapMode",1);const wg=10,xg=10,Sg={s:2,m:3.5,l:5,xl:10};function _g(e,t,n){if(!t||!n)return"safe";if(t===n)return"double-bound";const o=e.getShapePageBounds(t),r=e.getShapePageBounds(n);if(o&&r){if(o.contains(r))return"start-contains-end";if(r.contains(o))return"end-contains-start"}return"safe"}function kg(e,t){const{start:n,end:o,arrowheadStart:r,arrowheadEnd:i}=t.props,s=bg(e,t),a=s.start.clone(),l=s.end.clone(),c=Gc.Med(a,l);if(Gc.Equals(a,l))return{isStraight:!0,start:{handle:a,point:a,arrowhead:t.props.arrowheadStart},end:{handle:l,point:l,arrowhead:t.props.arrowheadEnd},middle:c,isValid:!1,length:0};const d=Gc.Sub(l,a).uni(),u=vg(e,n),h=vg(e,o),p=e.getShapePageTransform(t);Cg(l,s.start,p,h),Cg(a,s.end,p,u);let f=0,g=0,m=0,v=0,y=wg;const b=u&&h&&u.shape===h.shape,w=u&&h?_g(e,u.shape.id,h.shape.id):"safe";"safe"!==w||!u||!h||b||u.isExact||h.isExact||(h.didIntersect&&!u.didIntersect?u.isClosed&&a.setTo(l.clone().add(d.clone().mul(wg))):h.didIntersect||h.isClosed&&l.setTo(a.clone().sub(d.clone().mul(wg))));const x=Gc.Sub(l,a),S=Gc.Len(x)?x.uni():Gc.From(x),_=!Gc.Equals(S,d);b||("start-contains-end"!==w&&u&&"none"!==r&&!u.isExact&&(m=Sg[t.props.size]/2+("size"in u.shape.props?Sg[u.shape.props.size]/2:0),f=xg+m,y+=m),"end-contains-start"!==w&&h&&"none"!==i&&!h.isExact&&(v=Sg[t.props.size]/2+("size"in h.shape.props?Sg[h.shape.props.size]/2:0),g=xg+v,y+=v));const k=a.clone().add(S.clone().mul(f*(_?-1:1))),C=l.clone().sub(S.clone().mul(g*(_?-1:1)));Gc.Dist(k,C)<y&&(0!==f&&0!==g?(f*=-1.5,g*=-1.5):0!==f?f*=-1:0!==g&&(g*=-1)),a.add(S.clone().mul(f*(_?-1:1))),l.sub(S.clone().mul(g*(_?-1:1))),_?(u&&h&&l.setTo(Gc.Add(a,S.clone().mul(-wg))),c.setTo(Gc.Med(s.start,s.end))):c.setTo(Gc.Med(a,l));const E=Gc.Dist(a,l);return{isStraight:!0,start:{handle:s.start,point:a,arrowhead:t.props.arrowheadStart},end:{handle:s.end,point:l,arrowhead:t.props.arrowheadEnd},middle:c,isValid:E>0,length:E}}function Cg(e,t,n,o){if(void 0===o)return;if(o.isExact)return;const r=bh.applyToPoint(n,t),i=bh.applyToPoint(n,e),s=bh.applyToPoint(bh.Inverse(o.transform),r),a=bh.applyToPoint(bh.Inverse(o.transform),i),l=o.isClosed,c=(l?af:sf)(s,a,o.outline);let d;var u;null!==c&&(d=null!==(u=c.sort(((e,t)=>Gc.Dist(e,s)-Gc.Dist(t,s)))[0])&&void 0!==u?u:l?void 0:a);if(void 0===d)return;const h=bh.applyToPoint(o.transform,d),p=bh.applyToPoint(bh.Inverse(n),h);e.setTo(p),o.didIntersect=!0}function Eg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{arrowheadEnd:o,arrowheadStart:r}=t.props,i=t.props.bend+n;if(Math.abs(i)>Math.abs(10*t.props.bend))return kg(e,t);const s=bg(e,t),a=Gc.Med(s.start,s.end),l=Gc.Sub(s.end,s.start),c=Gc.Len(l)?l.uni():Gc.From(l),d=Gc.Add(a,c.per().mul(-i)),u=vg(e,t.props.start),h=vg(e,t.props.end),p=s.start.clone(),f=s.end.clone(),g=d.clone();if(Gc.Equals(p,f))return{isStraight:!0,start:{handle:p,point:p,arrowhead:t.props.arrowheadStart},end:{handle:f,point:f,arrowhead:t.props.arrowheadEnd},middle:g,isValid:!1,length:0};const m=t.props.bend<0,v=m?id:sd,y=Ig(p,f,g),b=Gc.Angle(y.center,p),w=Gc.Angle(y.center,f),x=v(b,w);if(0===y.length||0===y.size||!bd(y.length)||!bd(y.size))return kg(e,t);const S=p.clone(),_=f.clone(),k=g.clone(),C=e.getShapePageTransform(t);let E=0,I=0,T=wg;if(u&&!u.isExact){const n=bh.applyToPoint(C,S),o=bh.applyToPoint(C,y.center),i=bh.applyToPoint(C,_),s=bh.Inverse(u.transform),a=bh.applyToPoint(s,n),l=bh.applyToPoint(s,o),c=bh.applyToPoint(s,i),{isClosed:d}=u;let h,p=(d?lf:cf)(l,y.radius,u.outline);if(p){var P;const e=l.angle(a),t=l.angle(c),n=v(e,t);p=p.filter((t=>v(e,l.angle(t))<=n));const o=.25*n;p.sort(d?(t,n)=>Math.abs(v(e,l.angle(t))-o)<Math.abs(v(e,l.angle(n))-o)?-1:1:(t,n)=>v(e,l.angle(t))<v(e,l.angle(n))?-1:1),h=null!==(P=p[0])&&void 0!==P?P:d?void 0:a}else h=d?void 0:a;if(h&&(S.setTo(e.getPointInShapeSpace(t,bh.applyToPoint(u.transform,h))),u.didIntersect=!0,"none"!==r)){const e=Sg[t.props.size]/2+("size"in u.shape.props?Sg[u.shape.props.size]/2:0);E=xg+e,T+=e}}if(h&&!h.isExact){const n=bh.applyToPoint(C,S),r=bh.applyToPoint(C,_),i=bh.applyToPoint(C,y.center),s=bh.Inverse(h.transform),a=bh.applyToPoint(s,n),l=bh.applyToPoint(s,i),c=bh.applyToPoint(s,r),d=h.isClosed;let u,p=(d?lf:cf)(l,y.radius,h.outline);if(p){const e=l.angle(a),t=l.angle(c),n=v(e,t),o=.75*n;p=p.filter((t=>v(e,l.angle(t))<=n)),p.sort(d?(t,n)=>Math.abs(v(e,l.angle(t))-o)<Math.abs(v(e,l.angle(n))-o)?-1:1:(t,n)=>v(e,l.angle(t))<v(e,l.angle(n))?-1:1),u=p[0]?p[0]:d?void 0:c}else u=d?void 0:c;if(u&&(_.setTo(e.getPointInShapeSpace(t,bh.applyToPoint(h.transform,u))),h.didIntersect=!0,"none"!==o)){const e=Sg[t.props.size]/2+("size"in h.shape.props?Sg[h.shape.props.size]/2:0);I=xg+e,T+=e}}let A=Gc.Angle(y.center,S),M=Gc.Angle(y.center,_),j=v(A,M),O=j*y.radius;const L=S.clone(),B=_.clone();if(0!==E){const e=E/O*(m?1:-1),t=Gc.FromAngle(A+j*e);L.setTo(y.center).add(t.mul(y.radius))}if(0!==I){const e=I/O*(m?-1:1),t=Gc.FromAngle(M+j*e);B.setTo(y.center).add(t.mul(y.radius))}if(Gc.Dist(L,B)<T&&(0!==E&&0!==I?(E*=-1.5,I*=-1.5):0!==E?E*=-2:0!==I&&(I*=-2)),0!==E){const e=E/O*(m?1:-1),t=Gc.FromAngle(A+j*e);S.setTo(y.center).add(t.mul(y.radius))}if(0!==I){const e=I/O*(m?-1:1),t=Gc.FromAngle(M+j*e);_.setTo(y.center).add(t.mul(y.radius))}if(u&&h&&!u.isExact&&!h.isExact){A=Gc.Angle(y.center,S),M=Gc.Angle(y.center,_),j=v(A,M),O=j*y.radius;const t=_g(e,u.shape.id,h.shape.id);if("double-bound"===t&&O<30)S.setTo(p),_.setTo(f),k.setTo(g);else if("safe"===t&&(u&&!u.didIntersect&&S.setTo(p),h&&!h.didIntersect||v(b,A)>v(b,M))){const e=Math.min(.9,wg/O)*(m?1:-1),t=Gc.FromAngle(A+j*e);_.setTo(y.center).add(t.mul(y.radius))}}!function(e,t,n,o,r,i,s){const a=Gc.Angle(e,n),l=Gc.Angle(e,o);let c=id(a,l);s||(c=Qc-c);const d=.5*(s?1:-1),u=Gc.FromAngle(a+c*d);if(r.setTo(e).add(u.mul(t)),c>i){r.rotWith(e,$c);const t=o.clone();o.setTo(n),n.setTo(t)}}(y.center,y.radius,S,_,k,x,m),S.equals(_)&&(S.setTo(k.clone().addXY(1,1)),_.setTo(k.clone().subXY(1,1))),p.setTo(S),f.setTo(_),g.setTo(k);const R=Ig(p,f,g);return{isStraight:!1,start:{point:p,handle:s.start,arrowhead:t.props.arrowheadStart},end:{point:f,handle:s.end,arrowhead:t.props.arrowheadEnd},middle:g,handleArc:y,bodyArc:R,isValid:0!==R.length&&isFinite(R.center.x)&&isFinite(R.center.y)}}function Ig(e,t,n){const o=-2*(e.x*(t.y-n.y)-e.y*(t.x-n.x)+t.x*n.y-n.x*t.y),r={x:((e.x*e.x+e.y*e.y)*(n.y-t.y)+(t.x*t.x+t.y*t.y)*(e.y-n.y)+(n.x*n.x+n.y*n.y)*(t.y-e.y))/o,y:((e.x*e.x+e.y*e.y)*(t.x-n.x)+(t.x*t.x+t.y*t.y)*(n.x-e.x)+(n.x*n.x+n.y*n.y)*(e.x-t.x))/o},i=Gc.Dist(r,e),s=+Gc.Clockwise(e,n,t),a=Math.hypot(e.y-t.y,e.x-t.x),l=Math.hypot(t.y-n.y,t.x-n.x),c=Math.hypot(n.y-e.y,n.x-e.x),d=2*Math.acos((l*l+c*c-a*a)/(2*l*c)),u=(Qc-d)*(s?1:-1);return{center:r,radius:i,size:u,length:u*i,largeArcFlag:+($c>d),sweepFlag:s}}const Tg={wheel:"onWheel",pointer_down:"onPointerDown",pointer_move:"onPointerMove",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",key_down:"onKeyDown",key_up:"onKeyUp",key_repeat:"onKeyRepeat",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick"};class Pg{constructor(e,t){var n=this;wr(this,"id",void 0),wr(this,"type",void 0),wr(this,"shapeType",void 0),wr(this,"initial",void 0),wr(this,"children",void 0),wr(this,"parent",void 0),wr(this,"_path",void 0),wr(this,"_current",void 0),wr(this,"_isActive",void 0),wr(this,"transition",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=e.split(".");let r=n;for(let n=0;n<o.length;n++){var i;const e=o[n],s=r.getCurrent(),a=null===(i=r.children)||void 0===i?void 0:i[e];if(!a)throw Error("".concat(r.id," - no child state exists with the id ").concat(e,"."));if((null===s||void 0===s?void 0:s.id)!==a.id&&(null===s||void 0===s||s.exit(t,e),r._current.set(a),a.enter(t,(null===s||void 0===s?void 0:s.id)||"initial"),!a.getIsActive()))break;r=a}return n})),wr(this,"handleEvent",(e=>{var t;const n=Tg[e.name],o=this.getCurrent();null===(t=this[n])||void 0===t||t.call(this,e),this.getCurrent()===o&&this.getIsActive()&&(null===o||void 0===o||o.handleEvent(e))})),wr(this,"enter",((e,t)=>{var n;if(this._isActive.set(!0),null===(n=this.onEnter)||void 0===n||n.call(this,e,t),this.onTick&&this.editor.on("tick",this.onTick),this.children&&this.initial&&this.getIsActive()){const n=this.children[this.initial];this._current.set(n),n.enter(e,t)}})),wr(this,"exit",((e,t)=>{var n,o;(this._isActive.set(!1),this.onTick&&this.editor.off("tick",this.onTick),null===(n=this.onExit)||void 0===n||n.call(this,e,t),this.getIsActive())||(null===(o=this.getCurrent())||void 0===o||o.exit(e,t))})),wr(this,"_currentToolIdMask",Fr("curent tool id mask",void 0)),wr(this,"onWheel",void 0),wr(this,"onPointerDown",void 0),wr(this,"onPointerMove",void 0),wr(this,"onPointerUp",void 0),wr(this,"onDoubleClick",void 0),wr(this,"onTripleClick",void 0),wr(this,"onQuadrupleClick",void 0),wr(this,"onRightClick",void 0),wr(this,"onMiddleClick",void 0),wr(this,"onKeyDown",void 0),wr(this,"onKeyUp",void 0),wr(this,"onKeyRepeat",void 0),wr(this,"onCancel",void 0),wr(this,"onComplete",void 0),wr(this,"onInterrupt",void 0),wr(this,"onEnter",void 0),wr(this,"onExit",void 0),wr(this,"onTick",void 0),this.editor=e;const{id:o,children:r,initial:i}=this.constructor;this.id=o,this._isActive=Fr("toolIsActive"+this.id,!1),this._current=Fr("toolState"+this.id,void 0),this._path=$r("toolPath"+this.id,(()=>{const e=this.getCurrent();return this.id+(e?".".concat(e.getPath()):"")})),this.parent=null!==t&&void 0!==t?t:{},this.parent?r&&i?(this.type="branch",this.initial=i,this.children=Object.fromEntries(r().map((e=>[e.id,new e(this.editor,this)]))),this._current.set(this.children[this.initial])):this.type="leaf":(this.type="root",r&&i&&(this.initial=i,this.children=Object.fromEntries(r().map((e=>[e.id,new e(this.editor,this)]))),this._current.set(this.children[this.initial])))}getPath(){return this._path.get()}getCurrent(){return this._current.get()}getIsActive(){return this._isActive.get()}getCurrentToolIdMask(){return this._currentToolIdMask.get()}setCurrentToolIdMask(e){this._currentToolIdMask.set(e)}}wr(Pg,"id",void 0),wr(Pg,"initial",void 0),wr(Pg,"children",void 0);class Ag extends Pg{constructor(){super(...arguments),wr(this,"onKeyDown",(e=>{if("KeyZ"===e.code)if(!e.shiftKey&&!e.ctrlKey){var t;const n=this.getCurrent();n&&"idle"===(null===(t=n.getCurrent())||void 0===t?void 0:t.id)&&this.children.zoom&&this.editor.setCurrentTool("zoom",{...e,onInteractionEnd:n.id})}}))}}wr(Ag,"id","root"),wr(Ag,"initial",""),wr(Ag,"children",(()=>[]));var Mg=Object.defineProperty,jg=Object.getOwnPropertyDescriptor,Og=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?jg(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&Mg(t,n,i),i};class Lg extends tf.EventEmitter{constructor(e){let{store:t,user:n,shapeUtils:o,tools:r,getContainer:i,initialState:s,inferDarkMode:a}=e;super(),wr(this,"store",void 0),wr(this,"root",void 0),wr(this,"disposables",new Set),wr(this,"_tickManager",new ug(this)),wr(this,"snaps",void 0),wr(this,"user",void 0),wr(this,"textMeasure",void 0),wr(this,"environment",void 0),wr(this,"scribbles",void 0),wr(this,"getContainer",void 0),wr(this,"sideEffects",void 0),wr(this,"shapeUtils",void 0),wr(this,"styleProps",void 0),wr(this,"history",new Ff(this,(e=>{this.annotateError(e,{origin:"history.batch",willCrashApp:!0}),this.crash(e)}))),wr(this,"_crashingError",null),wr(this,"_updateInstanceState",this.history.createCommand("updateInstanceState",((e,t)=>{const n=this.store.get(this.getInstanceState().id);return{data:{prev:n,next:{...n,...e}},ephemeral:!1,squashing:!1,...t}}),{do:e=>{let{next:t}=e;this.store.put([t])},undo:e=>{let{prev:t}=e;this.store.put([t])},squash(e,t){let{prev:n}=e,{next:o}=t;return{prev:n,next:o}}})),wr(this,"_isChangingStyleTimeout",-1),wr(this,"setCursor",(e=>(this.updateInstanceState({cursor:{...this.getInstanceState().cursor,...e}},{ephemeral:!0}),this))),wr(this,"_setInstancePageState",this.history.createCommand("setInstancePageState",((e,t)=>{var n;return{data:{prev:this.store.get(null!==(n=e.id)&&void 0!==n?n:this.getCurrentPageState().id),partial:e},...t}}),{do:e=>{let{prev:t,partial:n}=e;this.store.update(t.id,(e=>({...e,...n})))},undo:e=>{let{prev:t}=e;this.store.update(t.id,(()=>t))}})),wr(this,"_setSelectedShapes",this.history.createCommand("setSelectedShapes",((e,t)=>{const{selectedShapeIds:n}=this.getCurrentPageState(),o=new Set(n);return e.length===o.size&&e.every((e=>o.has(e)))?null:{data:{selectedShapeIds:e,prevSelectedShapeIds:n},preservesRedoStack:!0,...t}}),{do:e=>{let{selectedShapeIds:t}=e;this.store.put([{...this.getCurrentPageState(),selectedShapeIds:t}])},undo:e=>{let{prevSelectedShapeIds:t}=e;this.store.put([{...this.getCurrentPageState(),selectedShapeIds:t}])},squash(e,t){let{prevSelectedShapeIds:n}=e,{selectedShapeIds:o}=t;return{selectedShapeIds:o,prevSelectedShapeIds:n}}})),wr(this,"_setFocusedGroupId",this.history.createCommand("setFocusedGroupId",(e=>{const t=this.getCurrentPageState().focusedGroupId;if(t!==e)return{data:{prev:t,next:e},preservesRedoStack:!0,squashing:!0}}),{do:e=>{let{next:t}=e;this.store.update(this.getCurrentPageState().id,(e=>({...e,focusedGroupId:t})))},undo:e=>{let{prev:t}=e;this.store.update(this.getCurrentPageState().id,(e=>({...e,focusedGroupId:t})))},squash(e,t){let{prev:n}=e,{next:o}=t;return{prev:n,next:o}}})),wr(this,"_viewportAnimation",null),wr(this,"_willSetInitialBounds",!0),wr(this,"_wasInset",!1),wr(this,"_cameraState",Fr("camera state","idle")),wr(this,"_cameraStateTimeoutRemaining",0),wr(this,"_lastUpdateRenderingBoundsTimestamp",Date.now()),wr(this,"_decayCameraStateTimeout",(e=>{this._cameraStateTimeoutRemaining-=e,this._cameraStateTimeoutRemaining<=0&&(this.off("tick",this._decayCameraStateTimeout),this._cameraState.set("idle"),this.updateRenderingBounds())})),wr(this,"_tickCameraState",(()=>{this._cameraStateTimeoutRemaining=64;const e=Date.now();"idle"===this._cameraState.__unsafe__getWithoutCapture()?(this._lastUpdateRenderingBoundsTimestamp=e,this._cameraState.set("moving"),this.on("tick",this._decayCameraStateTimeout)):e-this._lastUpdateRenderingBoundsTimestamp>620&&this.updateRenderingBounds()})),wr(this,"_renderingBounds",Fr("rendering viewport",new mh)),wr(this,"_renderingBoundsExpanded",Fr("rendering viewport expanded",new mh)),wr(this,"renderingBoundsMargin",100),wr(this,"_currentPageShapeIds",void 0),wr(this,"_setCurrentPageId",this.history.createCommand("setCurrentPage",((e,t)=>{if(this.store.has(e))return this.stopFollowingUser(),{data:{toId:e,fromId:this.getCurrentPageId()},squashing:!0,preservesRedoStack:!0,...t};console.error("Tried to set the current page id to a page that doesn't exist.")}),{do:e=>{let{toId:t}=e;if(this.store.has(t)){if(!this.getPageStates().find((e=>e.pageId===t))){const e=ua.create({id:ua.createId(t)});this.store.put([e,La.create({id:La.createId(t),pageId:t})])}this.store.put([{...this.getInstanceState(),currentPageId:t}]),this.updateRenderingBounds()}},undo:e=>{let{fromId:t}=e;this.store.has(t)&&(this.store.put([{...this.getInstanceState(),currentPageId:t}]),this.updateRenderingBounds())},squash:(e,t)=>{let{fromId:n}=e,{toId:o}=t;return{toId:o,fromId:n}}})),wr(this,"_updatePage",this.history.createCommand("updatePage",((e,t)=>{if(this.getInstanceState().isReadonly)return null;const n=this.getPage(e.id);return n?{data:{prev:n,partial:e},...t}:null}),{do:e=>{let{partial:t}=e;this.store.update(t.id,(e=>({...e,...t})))},undo:e=>{let{prev:t,partial:n}=e;this.store.update(n.id,(()=>t))},squash:(e,t)=>({prev:{...e.prev,...t.prev},partial:t.partial})})),wr(this,"_createPage",this.history.createCommand("createPage",(e=>{var t;if(this.getInstanceState().isReadonly)return null;if(this.getPages().length>=40)return null;const n=this.getPages(),o=function(e,t){let n=e;const o=new Set(t);for(;o.has(n);){var r;n=null!==(r=/^.*(\d+)$/.exec(n))&&void 0!==r&&r[1]?n.replace(/(\d+)(?=\D?)$/,(e=>(+e+1).toString())):"".concat(n," 1")}return n}(null!==(t=e.name)&&void 0!==t?t:"Page 1",n.map((e=>e.name)));let r=e.index;r&&!n.some((e=>e.index===r))||(r=es(n[n.length-1].index));const i=ka.create({meta:{},...e,name:o,index:r}),s=ua.create({id:ua.createId(i.id)});return{data:{newPage:i,newTabPageState:La.create({id:La.createId(i.id),pageId:i.id}),newCamera:s}}}),{do:e=>{let{newPage:t,newTabPageState:n,newCamera:o}=e;this.store.put([t,o,n])},undo:e=>{let{newPage:t,newTabPageState:n,newCamera:o}=e;1!==this.getPages().length&&this.store.remove([n.id,t.id,o.id])}})),wr(this,"_deletePage",this.history.createCommand("delete_page",(e=>{if(this.getInstanceState().isReadonly)return null;const t=this.getPages();if(1===t.length)return null;const n=this.getPage(e),o=this.getPageStates().filter((t=>t.pageId===e));if(!n)return null;if(e===this.getCurrentPageId()){var r;const n=t.findIndex((t=>t.id===e)),o=null!==(r=t[n-1])&&void 0!==r?r:t[n+1];this.setCurrentPage(o.id)}return{data:{id:e,deletedPage:n,deletedPageStates:o}}}),{do:e=>{let{deletedPage:t,deletedPageStates:n}=e;const o=this.getPages();if(1!==o.length){if(t.id===this.getCurrentPageId()){var r;const e=o.findIndex((e=>e.id===t.id)),n=null!==(r=o[e-1])&&void 0!==r?r:o[e+1];this.setCurrentPage(n.id)}this.store.remove(n.map((e=>e.id))),this.store.remove([t.id]),this.updateRenderingBounds()}},undo:e=>{let{deletedPage:t,deletedPageStates:n}=e;this.store.put([t]),this.store.put(n),this.updateRenderingBounds()}})),wr(this,"_createAssets",this.history.createCommand("createAssets",(e=>this.getInstanceState().isReadonly||e.length<=0?null:{data:{assets:e}}),{do:e=>{let{assets:t}=e;this.store.put(t)},undo:e=>{let{assets:t}=e;this.store.remove(t.map((e=>e.id)))}})),wr(this,"_updateAssets",this.history.createCommand("updateAssets",(e=>{if(this.getInstanceState().isReadonly)return;if(e.length<=0)return;return{data:{snapshots:{},assets:e}}}),{do:e=>{let{assets:t,snapshots:n}=e;this.store.put(t.map((e=>{const t=this.store.get(e.id);return n[e.id]=t,{...t,...e}})))},undo:e=>{let{snapshots:t}=e;this.store.put(Object.values(t))}})),wr(this,"_deleteAssets",this.history.createCommand("deleteAssets",(e=>{if(this.getInstanceState().isReadonly)return;if(e.length<=0)return;const t=ai(e.map((e=>this.store.get(e))));return{data:{ids:e,prev:t}}}),{do:e=>{let{ids:t}=e;this.store.remove(t)},undo:e=>{let{prev:t}=e;this.store.put(t)}})),wr(this,"_parentIdsToChildIds",void 0),wr(this,"_childIdsCache",new Tf),wr(this,"_createShapes",this.history.createCommand("createShapes",(e=>{if(this.getInstanceState().isReadonly)return null;if(e.length<=0)return null;const t=this.getCurrentPageShapeIds();if(!(e.length+t.size>_d))return 0===e.length?null:{data:{currentPageId:this.getCurrentPageId(),partials:e.map((e=>e.id?e:{...e,id:bl()}))}};Bg(this)}),{do:e=>{let{partials:t}=e;const n=this.getFocusedGroupId(),o=this.getCurrentPageShapesSorted();t=t.map((e=>{if(!e.parentId||!this.store.has(e.parentId)&&!t.some((t=>t.id===e.parentId))){let t=this.getFocusedGroupId();for(let n=o.length-1;n>=0;n--){var r,i;const s=o[n];if(this.getShapeUtil(s).canReceiveNewChildrenOfType(s,e.type)&&this.isPointInShape(s,{x:null!==(r=e.x)&&void 0!==r?r:0,y:null!==(i=e.y)&&void 0!==i?i:0},{margin:0,hitInside:!0})){t=s.id;break}}const c=e.parentId;if(t===e.id&&(t=n),t!==c&&((e={...e}).parentId=t,yl(t))){var s,a,l;const n=this.getPointInShapeSpace(this.getShape(t),{x:null!==(s=e.x)&&void 0!==s?s:0,y:null!==(a=e.y)&&void 0!==a?a:0});e.x=n.x,e.y=n.y,e.rotation=-this.getShapePageTransform(t).rotation()+(null!==(l=e.rotation)&&void 0!==l?l:0)}}return e}));const r=new Map,i=[];for(const u of t){var s,a,l,c;const e=this.getShapeUtil(u);let t=u.index;if(!t){var d;const e=null!==(d=u.parentId)&&void 0!==d?d:n;r.has(e)||r.set(e,this.getHighestIndexForParent(e)),t=r.get(e),r.set(e,es(t))}const o=e.getDefaultProps();for(const[n,r]of this.styleProps[u.type])o[r]=this.getStyleForNextShape(n);let h=this.store.schema.types.shape.create({...u,index:t,opacity:null!==(s=u.opacity)&&void 0!==s?s:this.getInstanceState().opacityForNextShape,parentId:null!==(a=u.parentId)&&void 0!==a?a:n,props:"props"in u?{...o,...u.props}:o});if(void 0===h.index)throw Error("no index!");const p=null===(l=(c=this.getShapeUtil(h)).onBeforeCreate)||void 0===l?void 0:l.call(c,h);p&&(h=p),i.push(h)}i.forEach((e=>{e.meta={...this.getInitialMetaForShape(e),...e.meta}})),this.store.put(i)},undo:e=>{let{partials:t}=e;this.store.remove(t.map((e=>e.id)))}})),wr(this,"animatingShapes",new Map),wr(this,"_updateShapes",this.history.createCommand("updateShapes",((e,t)=>{if(this.getInstanceState().isReadonly)return null;const n={},o={};let r,i;for(let s=0,a=e.length;s<a;s++){const t=e[s];t&&(r=this.getShape(t.id),r&&(i=Rg(r,t),i!==r&&(n[r.id]=r,o[r.id]=i)))}return{data:{snapshots:n,updates:o},...t}}),{do:e=>{let{updates:t}=e;this.store.put(Ii(t).map((e=>{const t=this.store.get(e.id);if(t){var n,o;const r=null===(n=(o=this.getShapeUtil(e)).onBeforeUpdate)||void 0===n?void 0:n.call(o,t,e);if(r)return r}return e})))},undo:e=>{let{snapshots:t}=e;this.store.put(Object.values(t))},squash:(e,t)=>({snapshots:{...t.snapshots,...e.snapshots},updates:{...e.updates,...t.updates}})})),wr(this,"_deleteShapes",this.history.createCommand("delete_shapes",(e=>{if(this.getInstanceState().isReadonly)return null;if(0===e.length)return null;const t=[...this.getCurrentPageState().selectedShapeIds],n=new Set(e);for(const a of e)this.visitDescendants(a,(e=>{n.add(e)}));const o=[...n],r=this._getArrowBindingsIndex().get(),i=ai(o.flatMap((e=>{const t=this.getShape(e),n=r[e];return n&&n.length>0?n.map((e=>{let{arrowId:t}=e;return this.getShape(t)})).concat(t):t}))),s=t.filter((e=>!n.has(e)));return{data:{deletedIds:o,snapshots:i,prevSelectedShapeIds:t,postSelectedShapeIds:s}}}),{do:e=>{let{deletedIds:t,postSelectedShapeIds:n}=e;this.store.remove(t),this.store.update(this.getCurrentPageState().id,(e=>({...e,selectedShapeIds:n})))},undo:e=>{let{snapshots:t,prevSelectedShapeIds:n}=e;this.store.put(t),this.store.update(this.getCurrentPageState().id,(e=>({...e,selectedShapeIds:n})))}})),wr(this,"externalAssetContentHandlers",{file:null,url:null}),wr(this,"externalContentHandlers",{text:null,files:null,embed:null,"svg-text":null,url:null}),wr(this,"inputs",{originPagePoint:new Gc,originScreenPoint:new Gc,previousPagePoint:new Gc,previousScreenPoint:new Gc,currentPagePoint:new Gc,currentScreenPoint:new Gc,keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,pointerVelocity:new Gc}),wr(this,"_clickManager",new Of(this)),wr(this,"_prevCursor","default"),wr(this,"_shiftKeyTimeout",-1),wr(this,"_setShiftKeyTimeout",(()=>{this.inputs.shiftKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"ShiftLeft"})})),wr(this,"_altKeyTimeout",-1),wr(this,"_setAltKeyTimeout",(()=>{this.inputs.altKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"AltLeft"})})),wr(this,"_ctrlKeyTimeout",-1),wr(this,"_setCtrlKeyTimeout",(()=>{this.inputs.ctrlKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"ControlLeft"})})),wr(this,"_restoreToolId","select"),wr(this,"_pinchStart",1),wr(this,"_didPinch",!1),wr(this,"_selectedShapeIdsAtPointerDown",[]),wr(this,"capturedPointerId",null),wr(this,"dispatch",(e=>{if(this.getCrashingError())return this;const{inputs:t}=this,{type:n}=e;return this.batch((()=>{if("misc"===e.type)return"cancel"!==e.name&&"complete"!==e.name||(this.inputs.isDragging=!1,this.inputs.isPanning&&(this.inputs.isPanning=!1,this.updateInstanceState({cursor:{type:this._prevCursor,rotation:0}}))),void this.root.handleEvent(e);e.shiftKey?(clearInterval(this._shiftKeyTimeout),this._shiftKeyTimeout=-1,t.shiftKey=!0):!e.shiftKey&&t.shiftKey&&-1===this._shiftKeyTimeout&&(this._shiftKeyTimeout=setTimeout(this._setShiftKeyTimeout,150)),e.altKey?(clearInterval(this._altKeyTimeout),this._altKeyTimeout=-1,t.altKey=!0):!e.altKey&&t.altKey&&-1===this._altKeyTimeout&&(this._altKeyTimeout=setTimeout(this._setAltKeyTimeout,150)),e.ctrlKey?(clearInterval(this._ctrlKeyTimeout),this._ctrlKeyTimeout=-1,t.ctrlKey=!0):!e.ctrlKey&&t.ctrlKey&&-1===this._ctrlKeyTimeout&&(this._ctrlKeyTimeout=setTimeout(this._setCtrlKeyTimeout,150));const{originPagePoint:o,originScreenPoint:r,currentPagePoint:i,currentScreenPoint:s}=t;switch(t.isPointing||(t.isDragging=!1),n){case"pinch":if(!this.getInstanceState().canMoveCamera)return;switch(this._updateInputsFromEvent(e),e.name){case"pinch_start":if(t.isPinching)return;return void(t.isEditing||(this._pinchStart=this.getCamera().z,this._selectedShapeIdsAtPointerDown.length||(this._selectedShapeIdsAtPointerDown=this.getSelectedShapeIds()),this._didPinch=!0,t.isPinching=!0,this.interrupt()));case"pinch":{if(!t.isPinching)return;const{point:{z:n=1},delta:{x:o,y:r}}=e,{screenBounds:i}=this.store.unsafeGetWithoutCapture(Ta),{x:s,y:a}=Gc.SubXY(e.point,i.x,i.y),{x:l,y:c,z:d}=this.getCamera(),u=Math.min(Id,Math.max(Ed,n));return void this.setCamera({x:l+o/d-s/d+s/u,y:c+r/d-a/d+a/u,z:u})}case"pinch_end":{if(!t.isPinching)return this;t.isPinching=!1;const{_selectedShapeIdsAtPointerDown:e}=this;return this.setSelectedShapes(this._selectedShapeIdsAtPointerDown,{squashing:!0}),this._selectedShapeIdsAtPointerDown=[],void(this._didPinch&&(this._didPinch=!1,requestAnimationFrame((()=>{this._didPinch||this.setSelectedShapes(e,{squashing:!0})}))))}}case"wheel":if(!this.getInstanceState().canMoveCamera)return;if(this._updateInputsFromEvent(e),this.getIsMenuOpen());else{if(t.ctrlKey){var a;const{x:t,y:n}=this.inputs.currentScreenPoint,{x:o,y:r,z:i}=this.getCamera(),s=Math.min(Id,Math.max(Ed,i+(null!==(a=e.delta.z)&&void 0!==a?a:0)*i));return void this.setCamera({x:o+(t/s-t)-(t/i-t),y:r+(n/s-n)-(n/i-n),z:s})}this.pan(e.delta),!t.isDragging&&t.isPointing&&o.dist(i)>(this.getInstanceState().isCoarsePointer?6:4)/this.getZoomLevel()&&(t.isDragging=!0)}break;case"pointer":{if(t.isPinching)return;this._updateInputsFromEvent(e);const{isPen:n}=e;switch(e.name){case"pointer_down":if(this.clearOpenMenus(),this._selectedShapeIdsAtPointerDown=this.getSelectedShapeIds(),0===e.button&&(this.capturedPointerId=e.pointerId),t.buttons.add(e.button),t.isPointing=!0,t.isDragging=!1,this.getInstanceState().isPenMode){if(!n)return}else n&&this.updateInstanceState({isPenMode:!0});if(5===e.button?(this._restoreToolId=this.getCurrentToolId(),this.complete(),this.setCurrentTool("eraser")):1===e.button&&(this.inputs.isPanning||(this._prevCursor=this.getInstanceState().cursor.type),this.inputs.isPanning=!0),this.inputs.isPanning)return this.stopCameraAnimation(),this.updateInstanceState({cursor:{type:"grabbing",rotation:0}}),this;r.setTo(s),o.setTo(i);break;case"pointer_move":if(!n&&this.getInstanceState().isPenMode)return;if(this.inputs.isPanning&&this.inputs.isPointing){const{currentScreenPoint:e,previousScreenPoint:t}=this.inputs;return void this.pan(Gc.Sub(e,t))}!t.isDragging&&t.isPointing&&o.dist(i)>(this.getInstanceState().isCoarsePointer?6:4)/this.getZoomLevel()&&(t.isDragging=!0);break;case"pointer_up":if(t.buttons.delete(e.button),t.isPointing=!1,t.isDragging=!1,this.getIsMenuOpen())return;if(!n&&this.getInstanceState().isPenMode)return;this.capturedPointerId===e.pointerId&&(this.capturedPointerId=null,e.button=0),t.isPanning?1===e.button?this.inputs.keys.has(" ")?(this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:Md}),this.updateInstanceState({cursor:{type:"grab",rotation:0}})):(t.isPanning=!1,this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:Md}),this.updateInstanceState({cursor:{type:this._prevCursor,rotation:0}})):0===e.button&&(this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:Md}),this.updateInstanceState({cursor:{type:"grab",rotation:0}})):5===e.button&&(this.complete(),this.setCurrentTool(this._restoreToolId))}break}case"keyboard":switch("ShiftRight"===e.key&&(e.key="ShiftLeft"),"AltRight"===e.key&&(e.key="AltLeft"),"ControlRight"===e.code&&(e.code="ControlLeft"),e.name){case"key_down":t.keys.add(e.code),e.ctrlKey||"Space"!==e.code||(this.inputs.isPanning||(this._prevCursor=this.getInstanceState().cursor.type),this.inputs.isPanning=!0,this.updateInstanceState({cursor:{type:this.inputs.isPointing?"grabbing":"grab",rotation:0}}));break;case"key_up":t.keys.delete(e.code),"Space"!==e.code||this.inputs.buttons.has(1)||(this.inputs.isPanning=!1,this.updateInstanceState({cursor:{type:this._prevCursor,rotation:0}}))}}if("pointer"===e.type&&(1===e.button?e.name="middle_click":2===e.button&&(e.name="right_click"),e.isPen===this.getInstanceState().isPenMode))switch(e.name){case"pointer_down":{const t=this._clickManager.transformPointerDownEvent(e);if(e.name!==t.name)return this.root.handleEvent(e),this.emit("event",e),this.root.handleEvent(t),void this.emit("event",t);break}case"pointer_up":{const t=this._clickManager.transformPointerUpEvent(e);if(e.name!==t.name)return this.root.handleEvent(e),this.emit("event",e),this.root.handleEvent(t),void this.emit("event",t);break}case"pointer_move":this._clickManager.handleMove()}this.root.handleEvent(e),this.emit("event",e)})),this})),this.store=t,this.snaps=new ig(this),this.user=new gg(null!==n&&void 0!==n?n:ef(),null!==a&&void 0!==a&&a),this.getContainer=null!==i&&void 0!==i?i:()=>document.body,this.textMeasure=new dg(this);class l extends Ag{}wr(l,"initial",null!==s&&void 0!==s?s:""),this.root=new l(this),this.root.children={};const c=_f(o),d=new Set(Object.keys(t.schema.types.shape.migrations.subTypeMigrations));for(const w of c){if(!d.has(w.type))throw Error('Editor and store have different shapes: "'.concat(w.type,'" was passed into the editor but not the schema'));d.delete(w.type)}if(d.size>0)throw Error('Editor and store have different shapes: "'.concat([...d][0],'" is present in the store schema but not provided to the editor'));const u={},h={},p=new Map;for(const w of c){var f;const e=new w(this);u[w.type]=e;const t=wl(null!==(f=w.props)&&void 0!==f?f:{});h[w.type]=t;for(const n of t.keys())if(p.has(n.id)){if(p.get(n.id)!==n)throw Error('Multiple style props with id "'.concat(n.id,'" in use. Style prop IDs must be unique.'))}else p.set(n.id,n)}this.shapeUtils=u,this.styleProps=h;for(const w of[...r]){if(_i(this.root.children,w.id))throw Error("Can't override tool with id \"".concat(w.id,'"'));this.root.children[w.id]=new w(this,this.root)}this.environment=new Lf(this),this.scribbles=new Uf(this);const g=new Set,m=e=>{const t=this.getShape(e);if(!t)return;const{start:n,end:o}=t.props,r="binding"===n.type?this.getShape(n.boundShapeId):void 0,i="binding"===o.type?this.getShape(o.boundShapeId):void 0,s=this.getAncestorPageId(t);if(!s)return;let a;if(r&&i){var l;a=null!==(l=this.findCommonAncestor([r,i]))&&void 0!==l?l:s}else{if(!r&&!i)return;{var c;const e=null===(c=r||i)||void 0===c?void 0:c.parentId;a=e&&e===t.parentId?t.parentId:s}}a&&a!==t.parentId&&this.reparentShapes([e],a);const d=this.getShape(e);if(!d)throw Error("no reparented arrow");const u=this.getShapeNearestSibling(d,r),h=this.getShapeNearestSibling(d,i);let p,f;if(u&&h)p=u.index>h.index?u:h;else if(u&&!h)p=u;else{if(!h||u)return;p=h}const g=this.getSortedChildIdsForParent(p.parentId).map((e=>this.getShape(e))).filter((e=>e.index>p.index));if(g.length){const e=g.find((e=>"arrow"!==e.type));if(d.index>p.index&&(!e||d.index<e.index))return;f=Ji(p.index,g[0].index)}else f=es(p.index);f!==d.index&&this.updateShapes([{id:e,type:"arrow",index:f}])},v=(e,t)=>{const{x:n,y:o}=bg(this,e)[t];this.store.put([{...e,props:{...e.props,[t]:{type:"point",x:n,y:o}}}])},y=e=>{for(const t of["start","end"]){const n=e.props[t];if("binding"!==n.type)continue;const o=this.getShape(n.boundShapeId),r=this.getAncestorPageId(e)===this.getAncestorPageId(o);o&&r||v(e,t)}m(e.id)},b=(e,t)=>{let n=null;const o=e.selectedShapeIds.filter((e=>!t.has(e)));o.length!==e.selectedShapeIds.length&&(n||(n={...e}),n.selectedShapeIds=o);const r=e.erasingShapeIds.filter((e=>!t.has(e)));r.length!==e.erasingShapeIds.length&&(n||(n={...e}),n.erasingShapeIds=r),e.hoveredShapeId&&t.has(e.hoveredShapeId)&&(n||(n={...e}),n.hoveredShapeId=null),e.editingShapeId&&t.has(e.editingShapeId)&&(n||(n={...e}),n.editingShapeId=null);const i=e.hintingShapeIds.filter((e=>!t.has(e)));return i.length!==e.hintingShapeIds.length&&(n||(n={...e}),n.hintingShapeIds=i),e.focusedGroupId&&t.has(e.focusedGroupId)&&(n||(n={...e}),n.focusedGroupId=null),n};if(this.sideEffects=new Hf(this),this.sideEffects.registerBatchCompleteHandler((()=>{for(const t of g){var e;g.delete(t);const n=this.getShape(t);if(!n)continue;const o=this.getShapeUtil(n),r=null===(e=o.onChildrenChange)||void 0===e?void 0:e.call(o,n);null!==r&&void 0!==r&&r.length&&this.updateShapes(r,{squashing:!0})}this.emit("update")})),this.sideEffects.registerBeforeDeleteHandler("shape",(e=>{e.parentId&&yl(e.parentId)&&g.add(e.parentId);const t=this._getArrowBindingsIndex().get()[e.id];if(null!==t&&void 0!==t&&t.length)for(const{arrowId:r,handleId:i}of t){const e=this.getShape(r);e&&v(e,i)}const n=new Set([e.id]),o=ai(this.getPageStates().map((e=>b(e,n))));o.length&&this.store.put(o)})),this.sideEffects.registerBeforeDeleteHandler("page",(e=>{var t;if(this.getInstanceState().currentPageId!==e.id)return;const n=null===(t=this.getPages().find((t=>t.id!==e.id)))||void 0===t?void 0:t.id;if(!n)return;this.store.put([{...this.getInstanceState(),currentPageId:n}]);const o=ua.createId(e.id),r=La.createId(e.id);this.store.remove([o,r])})),this.sideEffects.registerAfterChangeHandler("shape",((e,t)=>{if(this.isShapeOfType(t,"arrow")&&y(t),e.parentId!==t.parentId){const e=e=>{const t=this._getArrowBindingsIndex().get()[e];if(null!==t&&void 0!==t&&t.length)for(const n of t)m(n.arrowId)};e(t.id),this.visitDescendants(t.id,e)}if(e.parentId!==t.parentId&&Ca(t.parentId)){const n=new Set([e.id]);this.visitDescendants(e.id,(e=>{n.add(e)}));for(const e of this.getPageStates()){if(e.pageId===t.parentId)continue;const o=b(e,n);o&&this.store.put([o])}}e.parentId&&yl(e.parentId)&&g.add(e.parentId),t.parentId!==e.parentId&&yl(t.parentId)&&g.add(t.parentId)})),this.sideEffects.registerAfterChangeHandler("instance_page_state",((e,t)=>{if((null===e||void 0===e?void 0:e.selectedShapeIds)!==(null===t||void 0===t?void 0:t.selectedShapeIds)){const e=t.selectedShapeIds.filter((e=>{var n;let o=null===(n=this.getShape(e))||void 0===n?void 0:n.parentId;for(;yl(o);){var r;if(t.selectedShapeIds.includes(o))return!1;o=null===(r=this.getShape(o))||void 0===r?void 0:r.parentId}return!0}));let o=null;if(e.length>0){const t=this.findCommonAncestor(ai(e.map((e=>this.getShape(e)))),(e=>this.isShapeOfType(e,"group")));t&&(o=t)}else null!==t&&void 0!==t&&t.focusedGroupId&&(o=t.focusedGroupId);var n;if(e.length!==t.selectedShapeIds.length||o!==t.focusedGroupId)this.store.put([{...t,selectedShapeIds:e,focusedGroupId:null!==(n=o)&&void 0!==n?n:null}])}})),this.sideEffects.registerAfterCreateHandler("shape",(e=>{this.isShapeOfType(e,"arrow")&&y(e)})),this.sideEffects.registerAfterCreateHandler("page",(e=>{const t=ua.createId(e.id),n=La.createId(e.id);this.store.has(t)||this.store.put([ua.create({id:t})]),this.store.has(n)||this.store.put([La.create({id:n,pageId:e.id})])})),this._currentPageShapeIds=((e,t)=>{const n=e.query.ids("shape");let o=null;function r(){const r=t();return o=r,new Set([...n.get()].filter((t=>jf(e,r,e.get(t)))))}return $r("_shapeIdsInCurrentPage",((n,i)=>{if(Vr(n))return r();const s=t();if(s!==o)return r();const a=e.history.getDiffSince(i);if(a===Sr)return r();const l=new ii(n);for(const t of a){for(const n of Object.values(t.added))vl(n)&&jf(e,s,n)&&l.add(n.id);for(const[n,o]of Object.values(t.updated))vl(o)&&(jf(e,s,o)?l.add(o.id):l.remove(o.id));for(const e of Object.keys(t.removed))yl(e)&&l.remove(e)}const c=l.get();return c?Kr(c.value,c.diff):n}))})(this.store,(()=>this.getCurrentPageId())),this._parentIdsToChildIds=(e=>{const t=e.query.ids("shape");function n(){const n={},o=t.get(),r=Array(o.size);return o.forEach((t=>r.push(e.get(t)))),r.sort(ns),r.forEach((e=>{n[e.parentId]||(n[e.parentId]=[]),n[e.parentId].push(e.id)})),n}return $r("parentsToChildrenWithIndexes",((t,o)=>{var r;if(Vr(t))return n();const i=e.history.getDiffSince(o);if(i===Sr)return n();if(0===i.length)return t;let s=null;const a=e=>{s||(s={...t}),s[e]?s[e]===t[e]&&(s[e]=[...s[e]]):s[e]=[]},l=new Set;let c;for(let e=0,n=i.length;e<n;e++){c=i[e];for(const e of Object.values(c.added))vl(e)&&(a(e.parentId),s[e.parentId].push(e.id),l.add(s[e.parentId]));for(const[e,t]of Object.values(c.updated))if(vl(t)&&vl(e))if(e.parentId!==t.parentId)a(e.parentId),a(t.parentId),s[e.parentId].splice(s[e.parentId].indexOf(t.id),1),s[t.parentId].push(t.id),l.add(s[t.parentId]);else if(e.index!==t.index){a(t.parentId);const e=s[t.parentId].indexOf(t.id);s[t.parentId][e]=t.id,l.add(s[t.parentId])}for(const e of Object.values(c.removed))vl(e)&&(a(e.parentId),s[e.parentId].splice(s[e.parentId].indexOf(e.id),1))}for(const n of l){const t=ai(n.map((t=>e.get(t))));t.sort(ns),n.splice(0,n.length,...t.map((e=>e.id)))}return null!==(r=s)&&void 0!==r?r:t}))})(this.store),this.disposables.add(this.store.listen((e=>{this.emit("change",e)}))),this.store.ensureStoreIsUsable(),this._setInstancePageState({editingShapeId:null,hoveredShapeId:null,erasingShapeIds:[]},{ephemeral:!0}),s&&void 0===this.root.children[s])throw Error('No state found for initialState "'.concat(s,'".'));this.root.enter(void 0,"initial"),this.getInstanceState().followingUserId&&this.stopFollowingUser(),this.updateRenderingBounds(),requestAnimationFrame((()=>{this._tickManager.start()}))}dispose(){this.disposables.forEach((e=>e())),this.disposables.clear()}getShapeUtil(e){const t="string"===typeof e?e:e.type,n=ki(this.shapeUtils,t);return hi(n,'No shape util found for type "'.concat(t,'"')),n}undo(){return this.history.undo(),this}getCanUndo(){return this.history.getNumUndos()>0}redo(){return this.history.redo(),this}getCanRedo(){return this.history.getNumRedos()>0}mark(e,t,n){return this.history.mark(e,t,n),this}bail(){return this.history.bail(),this}bailToMark(e){return this.history.bailToMark(e),this}batch(e){return this.history.batch(e),this}_getArrowBindingsIndex(){return(e=>{const{store:t}=e,n=t.query.filterHistory("shape"),o=t.query.records("shape",(()=>({type:{eq:"arrow"}})));function r(){const e=o.get(),t={};for(const n of e){const{start:e,end:o}=n.props;if("binding"===e.type){const o=t[e.boundShapeId];o?o.push({arrowId:n.id,handleId:"start"}):t[e.boundShapeId]=[{arrowId:n.id,handleId:"start"}]}if("binding"===o.type){const e=t[o.boundShapeId];e?e.push({arrowId:n.id,handleId:"end"}):t[o.boundShapeId]=[{arrowId:n.id,handleId:"end"}]}}return t}return $r("arrowBindingsIndex",((t,o)=>{var i;if(Vr(t))return r();const s=t,a=n.getDiffSince(o);if(a===Sr)return r();let l;function c(e){l||(l={...s}),l[e]?l[e]===s[e]&&(l[e]=[...l[e]]):l[e]=[]}function d(e,t,n){c(e),l[e]=l[e].filter((e=>e.arrowId!==t||e.handleId!==n)),0===l[e].length&&delete l[e]}function u(e,t,n){c(e),l[e].push({arrowId:t,handleId:n})}for(const n of a){for(const t of Object.values(n.added))if(e.isShapeOfType(t,"arrow")){const{start:e,end:n}=t.props;"binding"===e.type&&u(e.boundShapeId,t.id,"start"),"binding"===n.type&&u(n.boundShapeId,t.id,"end")}for(const[t,o]of Object.values(n.updated))if(e.isShapeOfType(t,"arrow")&&e.isShapeOfType(o,"arrow"))for(const e of["start","end"]){const n=t.props[e],r=o.props[e];"binding"===n.type&&"point"===r.type?d(n.boundShapeId,t.id,e):"point"===n.type&&"binding"===r.type?u(r.boundShapeId,o.id,e):"binding"===n.type&&"binding"===r.type&&n.boundShapeId!==r.boundShapeId&&(d(n.boundShapeId,t.id,e),u(r.boundShapeId,o.id,e))}for(const t of Object.values(n.removed))if(e.isShapeOfType(t,"arrow")){const{start:e,end:n}=t.props;"binding"===e.type&&d(e.boundShapeId,t.id,"start"),"binding"===n.type&&d(n.boundShapeId,t.id,"end")}}return null!==(i=l)&&void 0!==i?i:s}))})(this)}getArrowsBoundTo(e){return this._getArrowBindingsIndex().get()[e]||vr}getArrowInfoCache(){return this.store.createComputedCache("arrow infoCache",(e=>mg(e)?kg(this,e):Eg(this,e)))}getArrowInfo(e){const t="string"===typeof e?e:e.id;return this.getArrowInfoCache().get(t)}annotateError(e,t){let{origin:n,willCrashApp:o,tags:r,extras:i}=t;const s=this.createErrorAnnotations(n,o);return mi(e,{tags:{...s.tags,...r},extras:{...s.extras,...i}}),o&&this.store.markAsPossiblyCorrupted(),this}createErrorAnnotations(e,t){try{const n=this.getEditingShapeId();return{tags:{origin:e,willCrashApp:t},extras:{activeStateNode:this.root.getPath(),selectedShapes:this.getSelectedShapes(),editingShape:n?this.getShape(n):void 0,inputs:this.inputs}}}catch{return{tags:{origin:e,willCrashApp:t},extras:{}}}}getCrashingError(){return this._crashingError}crash(e){return this._crashingError=e,this.store.markAsPossiblyCorrupted(),this.emit("crash",{error:e}),this}getPath(){return this.root.getPath().split("root.")[1]}isIn(e){const t=e.split(".").reverse();let n=this.root;for(;t.length>0;){const e=t.pop();if(!e)return!0;const o=n.getCurrent();if((null===o||void 0===o?void 0:o.id)!==e)return!1;if(0===t.length)return!0;n=o}return!1}isInAny(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((e=>this.isIn(e)))}setCurrentTool(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.root.transition(e,t),this}getCurrentTool(){return this.root.getCurrent()}getCurrentToolId(){var e;const t=this.getCurrentTool();return t?null!==(e=t.getCurrentToolIdMask())&&void 0!==e?e:t.id:""}getStateDescendant(e){const t=e.split(".").reverse();let n=this.root;for(;t.length>0;){var o;const e=t.pop();if(!e)return n;const r=null===(o=n.children)||void 0===o?void 0:o[e];if(!r)return;n=r}return n}getDocumentSettings(){return this.store.get(Ya)}updateDocumentSettings(e){return this.store.put([{...this.getDocumentSettings(),...e}]),this}getInstanceState(){return this.store.get(Ta)}updateInstanceState(e,t){return this._updateInstanceState(e,{ephemeral:!0,squashing:!0,...t}),void 0!==e.isChangingStyle&&(clearTimeout(this._isChangingStyleTimeout),!0===e.isChangingStyle&&(this._isChangingStyleTimeout=setTimeout((()=>{this.updateInstanceState({isChangingStyle:!1},{ephemeral:!0})}),2e3))),this}getOpenMenus(){return this.getInstanceState().openMenus}addOpenMenu(e){const t=new Set(this.getOpenMenus());return t.has(e)||(t.add(e),this.updateInstanceState({openMenus:[...t]})),this}deleteOpenMenu(e){const t=new Set(this.getOpenMenus());return t.has(e)&&(t.delete(e),this.updateInstanceState({openMenus:[...t]})),this}clearOpenMenus(){return this.getOpenMenus().length&&this.updateInstanceState({openMenus:[]}),this}getIsMenuOpen(){return this.getOpenMenus().length>0}getPageStates(){return this._getPageStatesQuery().get()}_getPageStatesQuery(){return this.store.query.records("instance_page_state")}getCurrentPageState(){return this.store.get(this._getCurrentPageStateId())}_getCurrentPageStateId(){return La.createId(this.getCurrentPageId())}updateCurrentPageState(e,t){return this._setInstancePageState(e,t),this}getSelectedShapeIds(){return this.getCurrentPageState().selectedShapeIds}getSelectedShapes(){const{selectedShapeIds:e}=this.getCurrentPageState();return ai(e.map((e=>this.store.get(e))))}setSelectedShapes(e,t){const n=e.map((e=>"string"===typeof e?e:e.id));return this._setSelectedShapes(n,t),this}isAncestorSelected(e){var t;const n="string"===typeof e?e:null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:null,o=this.getShape(n);if(!o)return!1;const r=this.getSelectedShapeIds();return!!this.findShapeAncestor(o,(e=>r.includes(e.id)))}select(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o="string"===typeof t[0]?t:t.map((e=>e.id));return this.setSelectedShapes(o),this}deselect(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o="string"===typeof t[0]?t:t.map((e=>e.id)),r=this.getSelectedShapeIds();return r.length>0&&o.length>0&&this.setSelectedShapes(r.filter((e=>!o.includes(e)))),this}selectAll(){const e=this.getSortedChildIdsForParent(this.getCurrentPageId());return e.length<=0||this.setSelectedShapes(this._getUnlockedShapeIds(e)),this}selectNone(){return this.getSelectedShapeIds().length>0&&this.setSelectedShapes([]),this}getOnlySelectedShape(){const e=this.getSelectedShapes();return 1===e.length?e[0]:null}getSelectionPageBounds(){const e=this.getCurrentPageState().selectedShapeIds;return 0===e.length?null:mh.Common(ai(e.map((e=>this.getShapePageBounds(e)))))}getSelectionRotation(){const e=this.getSelectedShapeIds();if(0===e.length)return 0;if(1===e.length)return this.getShapePageTransform(this.getSelectedShapeIds()[0]).rotation();const t=e.map((e=>this.getShapePageTransform(e).rotation()));return t.every((e=>Math.abs(e-t[0])<Math.PI/180))?this.getShapePageTransform(e[0]).rotation():0}getSelectionRotatedPageBounds(){const e=this.getSelectedShapeIds();if(0===e.length)return;const t=this.getSelectionRotation();if(0===t)return this.getSelectionPageBounds();if(1===e.length){const t=this.getShapeGeometry(e[0]).bounds.clone(),n=this.getShapePageTransform(e[0]);return t.point=n.applyToPoint(t.point),t}const n=mh.FromPoints(this.getSelectedShapeIds().flatMap((e=>{const t=this.getShapePageTransform(e);return t?t.applyToPoints(this.getShapeGeometry(e).vertices):[]})).map((e=>Gc.Rot(e,-t))));return n.point=n.point.rot(t),n}getFocusedGroupId(){var e;return null!==(e=this.getCurrentPageState().focusedGroupId)&&void 0!==e?e:this.getCurrentPageId()}getFocusedGroup(){const e=this.getFocusedGroupId();return e?this.getShape(e):void 0}setFocusedGroup(e){var t;const n="string"===typeof e?e:null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:null;if(null!==n){const e=this.getShape(n);if(!e)throw Error("Editor.setFocusedGroup: Shape with id ".concat(n," does not exist"));if(!this.isShapeOfType(e,"group"))throw Error("Editor.setFocusedGroup: Cannot set focused group to shape of type ".concat(e.type))}return n===this.getFocusedGroupId()||this._setFocusedGroupId(n),this}popFocusedGroupId(){const e=this.getFocusedGroup();if(e){var t;const n=this.findShapeAncestor(e,(e=>this.isShapeOfType(e,"group")));this.setFocusedGroup(null!==(t=null===n||void 0===n?void 0:n.id)&&void 0!==t?t:null),this.select(e.id)}else this.setFocusedGroup(null),this.selectNone();return this}getEditingShapeId(){return this.getCurrentPageState().editingShapeId}getEditingShape(){const e=this.getEditingShapeId();return e?this.getShape(e):void 0}setEditingShape(e){var t;const n="string"===typeof e?e:null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:null;if(n!==this.getEditingShapeId()){if(n){const e=this.getShape(n);if(e&&this.getShapeUtil(e).canEdit(e))return this._setInstancePageState({editingShapeId:n}),this}this._setInstancePageState({editingShapeId:null})}return this}getHoveredShapeId(){return this.getCurrentPageState().hoveredShapeId}getHoveredShape(){const e=this.getHoveredShapeId();return e?this.getShape(e):void 0}setHoveredShape(e){var t;const n="string"===typeof e?e:null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:null;return n===this.getHoveredShapeId()||this.updateCurrentPageState({hoveredShapeId:n},{ephemeral:!0}),this}getHintingShapeIds(){return this.getCurrentPageState().hintingShapeIds}getHintingShape(){return ai(this.getHintingShapeIds().map((e=>this.getShape(e))))}setHintingShapes(e){const t="string"===typeof e[0]?e:e.map((e=>e.id));return this.updateCurrentPageState({hintingShapeIds:si(t)},{ephemeral:!0}),this}getErasingShapeIds(){return this.getCurrentPageState().erasingShapeIds}getErasingShapes(){return ai(this.getErasingShapeIds().map((e=>this.getShape(e))))}setErasingShapes(e){const t="string"===typeof e[0]?e:e.map((e=>e.id));t.sort();const n=this.getErasingShapeIds();if(t.length===n.length){for(let o=0;o<t.length;o++)if(t[o]!==n[o]){this._setInstancePageState({erasingShapeIds:t},{ephemeral:!0});break}}else this._setInstancePageState({erasingShapeIds:t},{ephemeral:!0});return this}getCroppingShapeId(){return this.getCurrentPageState().croppingShapeId}setCroppingShape(e){var t;const n="string"===typeof e?e:null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:null;if(n!==this.getCroppingShapeId())if(n){const e=this.getShape(n),t=this.getShapeUtil(e);e&&t.canCrop(e)&&this.updateCurrentPageState({croppingShapeId:n})}else this.updateCurrentPageState({croppingShapeId:null});return this}getCameraId(){return ua.createId(this.getCurrentPageId())}getCamera(){return this.store.get(this.getCameraId())}getZoomLevel(){return this.getCamera().z}_setCamera(e){const t=this.getCamera();return t.x===e.x&&t.y===e.y&&t.z===e.z||this.batch((()=>{var n;this.store.put([{...t,...e}]);const{currentScreenPoint:o}=this.inputs,{screenBounds:r}=this.store.unsafeGetWithoutCapture(Ta);this.dispatch({type:"pointer",target:"canvas",name:"pointer_move",point:Gc.AddXY(o,r.x,r.y),pointerId:Bd,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,shiftKey:this.inputs.shiftKey,button:0,isPen:null!==(n=this.getInstanceState().isPenMode)&&void 0!==n&&n}),this._tickCameraState()})),this}setCamera(e,t){const n=Number.isFinite(e.x)?e.x:0,o=Number.isFinite(e.y)?e.y:0,r=Number.isFinite(e.z)?e.z:this.getZoomLevel();if(this.stopCameraAnimation(),this.getInstanceState().followingUserId&&this.stopFollowingUser(),t){const{width:e,height:i}=this.getViewportScreenBounds();return this._animateToViewport(new mh(-n,-o,e/r,i/r),t)}return this._setCamera({x:n,y:o,z:r}),this}centerOnPoint(e,t){if(!this.getInstanceState().canMoveCamera)return this;const{width:n,height:o}=this.getViewportPageBounds();return this.setCamera({x:-(e.x-n/2),y:-(e.y-o/2),z:this.getCamera().z},t),this}zoomToContent(){var e;const t=null!==(e=this.getSelectionPageBounds())&&void 0!==e?e:this.getCurrentPageBounds();return t&&this.zoomToBounds(t,{targetZoom:Math.min(1,this.getZoomLevel()),duration:220}),this}zoomToFit(e){if(!this.getInstanceState().canMoveCamera)return this;const t=[...this.getCurrentPageShapeIds()];if(t.length<=0)return this;const n=mh.Common(ai(t.map((e=>this.getShapePageBounds(e)))));return this.zoomToBounds(n,e),this}resetZoom(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getViewportScreenCenter(),t=arguments.length>1?arguments[1]:void 0;if(!this.getInstanceState().canMoveCamera)return this;const{x:n,y:o,z:r}=this.getCamera(),{x:i,y:s}=e;return this.setCamera({x:n+(i/1-i)-(i/r-i),y:o+(s/1-s)-(s/r-s),z:1},t),this}zoomIn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getViewportScreenCenter(),t=arguments.length>1?arguments[1]:void 0;if(!this.getInstanceState().canMoveCamera)return this;const{x:n,y:o,z:r}=this.getCamera();let i=Id;for(let l=1;l<Cd.length;l++){const e=Cd[l];if(!(e-r<=(e-Cd[l-1])/2)){i=e;break}}const{x:s,y:a}=e;return this.setCamera({x:n+(s/i-s)-(s/r-s),y:o+(a/i-a)-(a/r-a),z:i},t),this}zoomOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getViewportScreenCenter(),t=arguments.length>1?arguments[1]:void 0;if(!this.getInstanceState().canMoveCamera)return this;const{x:n,y:o,z:r}=this.getCamera();let i=Ed;for(let l=Cd.length-1;l>0;l--){const e=Cd[l-1],t=Cd[l];if(!(t-r>=(t-e)/2)){i=e;break}}const{x:s,y:a}=e;return this.setCamera({x:n+(s/i-s)-(s/r-s),y:o+(a/i-a)-(a/r-a),z:i},t),this}zoomToSelection(e){if(!this.getInstanceState().canMoveCamera)return this;const t=this.getSelectionPageBounds();return t?(this.zoomToBounds(t,{targetZoom:Math.max(1,this.getZoomLevel()),...e}),this):this}panZoomIntoView(e,t){if(!this.getInstanceState().canMoveCamera)return this;if(e.length<=0)return this;const n=mh.Common(ai(e.map((e=>this.getShapePageBounds(e))))),o=this.getViewportPageBounds();if(o.h<n.h||o.w<n.w)return this.zoomToBounds(n,{targetZoom:this.getCamera().z,...t}),this;{const e=this.getViewportPageBounds().clone().expandBy(-32/this.getZoomLevel());let o=0,r=0;e.maxY<n.maxY?r=e.maxY-n.maxY:e.minY>n.minY&&(r=e.minY-n.minY),e.maxX<n.maxX?o=e.maxX-n.maxX:e.minX>n.minX&&(o=e.minX-n.minX);const i=this.getCamera();this.setCamera({x:i.x+o,y:i.y+r,z:i.z},t)}return this}zoomToBounds(e,t){var n;if(!this.getInstanceState().canMoveCamera)return this;const o=this.getViewportScreenBounds(),r=null!==(n=null===t||void 0===t?void 0:t.inset)&&void 0!==n?n:Math.min(256,.28*o.width);let i=ed(Math.min((o.width-r)/e.width,(o.height-r)/e.height),Ed,Id);return void 0!==(null===t||void 0===t?void 0:t.targetZoom)&&(i=Math.min(t.targetZoom,i)),this.setCamera({x:-e.minX+(o.width-e.width*i)/2/i,y:-e.minY+(o.height-e.height*i)/2/i,z:i},t),this}pan(e,t){if(!this.getInstanceState().canMoveCamera)return this;const{x:n,y:o,z:r}=this.getCamera();return this.setCamera({x:n+e.x/r,y:o+e.y/r,z:r},t),this}stopCameraAnimation(){return this.emit("stop-camera-animation"),this}_animateViewport(e){if(!this._viewportAnimation)return;const t=()=>{this.removeListener("tick",this._animateViewport),this.removeListener("stop-camera-animation",t),this._viewportAnimation=null};this.once("stop-camera-animation",t),this._viewportAnimation.elapsed+=e;const{elapsed:n,easing:o,duration:r,start:i,end:s}=this._viewportAnimation;if(n>r)return this._setCamera({x:-s.x,y:-s.y,z:this.getViewportScreenBounds().width/s.width}),void t();const a=o(1-(r-n)/r),l=i.minX+(s.minX-i.minX)*a,c=i.minY+(s.minY-i.minY)*a,d=i.maxX+(s.maxX-i.maxX)*a;this._setCamera({x:-l,y:-c,z:this.getViewportScreenBounds().width/(d-l)})}_animateToViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:n=0,easing:o=Kc.easeInOutCubic}=t,r=this.user.getAnimationSpeed(),i=this.getViewportPageBounds();return this.stopCameraAnimation(),this.getInstanceState().followingUserId&&this.stopFollowingUser(),0===n||0===r?this._setCamera({x:-e.x,y:-e.y,z:this.getViewportScreenBounds().width/e.width}):(this._viewportAnimation={elapsed:0,duration:n/r,easing:o,start:i.clone(),end:e.clone()},this.addListener("tick",this._animateViewport),this)}slideCamera(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.getInstanceState().canMoveCamera)return this;this.stopCameraAnimation();if(0===this.user.getAnimationSpeed())return this;const{speed:t,friction:n,direction:o,speedThreshold:r=.01}=e;let i=Math.min(t,1);const s=()=>{this.removeListener("tick",a),this.removeListener("stop-camera-animation",s)};this.once("stop-camera-animation",s);const a=e=>{const{x:t,y:a,z:l}=this.getCamera(),c=Gc.Mul(o,i*e/l);i*=1-n,i<r?s():this._setCamera({x:t+c.x,y:a+c.y,z:l})};return this.addListener("tick",a),this}animateToUser(e){const t=[...this.store.query.records("instance_presence",(()=>({userId:{eq:e}}))).get()].sort(((e,t)=>e.lastActivityTimestamp-t.lastActivityTimestamp)).pop();return t?(this.batch((()=>{null!==this.getInstanceState().followingUserId&&this.stopFollowingUser();const n=t.currentPageId===this.getCurrentPageId();n||this.setCurrentPage(t.currentPageId);const o=n?{duration:500}:void 0;this.centerOnPoint(t.cursor,o);const{highlightedUserIds:r}=this.getInstanceState();this.updateInstanceState({highlightedUserIds:[...r,e]}),setTimeout((()=>{const t=[...this.getInstanceState().highlightedUserIds],n=t.indexOf(e);n<0||(t.splice(n,1),this.updateInstanceState({highlightedUserIds:t}))}),Ld)})),this):this}animateToShape(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ad;if(!this.getInstanceState().canMoveCamera)return this;const n=this.getViewportScreenBounds().clone().expandBy(-32),o=n.width/n.height,r=this.getShapePageBounds(e);if(!r)return this;const i=r.width/r.height,s=r.clone(),a=r.width/n.width;return s.width+=(n.minX+n.maxX)*a,s.height+=(n.minY+n.maxY)*a,s.x-=n.minX*a,s.y-=n.minY*a,i>o?(s.height=r.width/o,s.y-=(s.height-r.height)/2):(s.width=r.height*o,s.x-=(s.width-r.width)/2),this._animateToViewport(s,t)}updateViewportScreenBounds(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.width=Math.max(e.width,1),e.height=Math.max(e.height,1);const n=[0!==e.minY,document.body.scrollWidth!==e.maxX,document.body.scrollHeight!==e.maxY,0!==e.minX],o=e.equals(this.getViewportScreenBounds()),{_willSetInitialBounds:r}=this;if(o)this._willSetInitialBounds=!1;else if(r)this._willSetInitialBounds=!1,this.updateInstanceState({screenBounds:e.toJson(),insets:n},{squashing:!0,ephemeral:!0});else if(t&&!this.getInstanceState().followingUserId){const t=this.getViewportPageCenter();this.updateInstanceState({screenBounds:e.toJson(),insets:n},{squashing:!0,ephemeral:!0}),this.centerOnPoint(t)}else this.updateInstanceState({screenBounds:e.toJson(),insets:n},{squashing:!0,ephemeral:!0});return this._tickCameraState(),this.updateRenderingBounds(),this}getViewportScreenBounds(){const{x:e,y:t,w:n,h:o}=this.getInstanceState().screenBounds;return new mh(e,t,n,o)}getViewportScreenCenter(){const e=this.getViewportScreenBounds();return new Gc(e.midX-e.minX,e.midY-e.minY)}getViewportPageBounds(){const{w:e,h:t}=this.getViewportScreenBounds(),{x:n,y:o,z:r}=this.getCamera();return new mh(-n,-o,e/r,t/r)}getViewportPageCenter(){return this.getViewportPageBounds().center}screenToPage(e){var t;const{screenBounds:n}=this.store.unsafeGetWithoutCapture(Ta),{x:o,y:r,z:i=1}=this.getCamera();return{x:(e.x-n.x)/i-o,y:(e.y-n.y)/i-r,z:null!==(t=e.z)&&void 0!==t?t:.5}}pageToScreen(e){var t;const{screenBounds:n}=this.store.unsafeGetWithoutCapture(Ta),{x:o,y:r,z:i=1}=this.getCamera();return{x:(e.x+o)*i+n.x,y:(e.y+r)*i+n.y,z:null!==(t=e.z)&&void 0!==t?t:.5}}startFollowingUser(e){const t=this.store.query.records("instance_presence",(()=>({userId:{eq:e}}))),n=this.user.getId();if(n||console.warn("You should set the userId for the current instance before following a user"),t.get().some((e=>e.followingUserId===n)))return this;Nr((()=>{this.stopFollowingUser(),this.updateInstanceState({followingUserId:e},{ephemeral:!0})}));const o=()=>{this.removeListener("frame",i),this.removeListener("stop-following",o)};let r=!1;const i=()=>{const o=[...t.get()].sort(((e,t)=>e.lastActivityTimestamp-t.lastActivityTimestamp)).pop();if(!o)return void this.stopFollowingUser();const i=o.currentPageId===this.getCurrentPageId(),s=i?.5:1;if(!i)return this.stopFollowingUser(),this.setCurrentPage(o.currentPageId),void this.startFollowingUser(e);const{center:a,width:l,height:c}=this.getViewportPageBounds(),d=mh.From(o.screenBounds),u=d.width/o.camera.z,h=d.height/o.camera.z,p=new Gc(u/2-o.camera.x,h/2-o.camera.y),f=l+(u-l)*s,g=c+(h-c)*s,m=o.followingUserId===n?c/g:Math.min(l/f,c/g),v=ed(this.getCamera().z*m,Ed,Id),y=this.getViewportScreenBounds().w/v,b=this.getViewportScreenBounds().h/v,w=p.sub(a),x=Gc.Add(a,Gc.Mul(w,s)),S=Gc.Sub(x,a).len(),_=Math.abs(v-this.getCamera().z);S<.1&&_<.005?r=!0:r&&S<.2&&_<.05||(r=!1,this.stopCameraAnimation(),this._setCamera({x:-(x.x-y/2),y:-(x.y-b/2),z:v}))};return this.once("stop-following",o),this.addListener("frame",i),this}stopFollowingUser(){return this.updateInstanceState({followingUserId:null},{ephemeral:!0}),this.emit("stop-following"),this}getCameraState(){return this._cameraState.get()}getUnorderedRenderingShapes(e){const t=[];let n=4e3,o=_d;const r=this.getEditingShapeId(),i=this.getSelectedShapeIds(),s=this.getErasingShapeIds(),a=this.getRenderingBoundsExpanded(),l=Number.isFinite(this.renderingBoundsMargin),c=(d,u,h)=>{const p=this.getShape(d);if(!p)return;u*=p.opacity;let f=!1,g=!1;const m=this.getShapeUtil(p),v=this.getShapeMaskedPageBounds(d);e&&(g=!h&&s.includes(d),g&&(u*=.32),f=l&&m.canUnmount(p)&&r!==d&&(void 0===v||!a.includes(v)&&!i.includes(d))),t.push({id:d,shape:p,util:m,index:n,backgroundIndex:o,opacity:u,isCulled:f,maskedPageBounds:v}),n+=1,o+=1;const y=this.getSortedChildIdsForParent(d);if(!y.length)return;let b=null;m.providesBackgroundForChildren(p)&&(b=o,o=n,n+=_d);for(const e of y)c(e,u,h||g);null!==b&&(o=b)},d=e?[this.getCurrentPage()]:this.getPages();for(const u of d)for(const e of this.getSortedChildIdsForParent(u.id))c(e,1,!1);return t}getRenderingShapes(){return this.getUnorderedRenderingShapes(!0).sort(os)}getRenderingBounds(){return this._renderingBounds.get()}getRenderingBoundsExpanded(){return this._renderingBoundsExpanded.get()}updateRenderingBounds(){const e=this.getViewportPageBounds();return e.equals(this._renderingBounds.__unsafe__getWithoutCapture())||(this._renderingBounds.set(e.clone()),Number.isFinite(this.renderingBoundsMargin)?this._renderingBoundsExpanded.set(e.clone().expandBy(this.renderingBoundsMargin/this.getZoomLevel())):this._renderingBoundsExpanded.set(e)),this}_getAllPagesQuery(){return this.store.query.records("page")}getPages(){return this._getAllPagesQuery().get().sort(ns)}getCurrentPage(){return this.getPage(this.getCurrentPageId())}getCurrentPageId(){return this.getInstanceState().currentPageId}getPage(e){return this.store.get("string"===typeof e?e:e.id)}getCurrentPageShapeIds(){return this._currentPageShapeIds.get()}getPageShapeIds(e){const t="string"===typeof e?e:e.id,n=this.store.query.exec("shape",{parentId:{eq:t}});return this.getShapeAndDescendantIds(n.map((e=>e.id)))}setCurrentPage(e,t){const n="string"===typeof e?e:e.id;return this._setCurrentPageId(n,t),this}updatePage(e,t){return this._updatePage(e,t),this}createPage(e){return this._createPage(e),this}deletePage(e){const t="string"===typeof e?e:e.id;return this._deletePage(t),this}duplicatePage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ka.createId();if(this.getPages().length>=40)return this;const n="string"===typeof e?e:e.id,o=this.getPage(n);if(!o)return this;const r={...this.getCamera()},i=this.getContentFromCurrentPage(this.getSortedChildIdsForParent(o.id));return this.batch((()=>{var e;const n=this.getPages(),s=Ji(o.index,null===(e=n[n.indexOf(o)+1])||void 0===e?void 0:e.index);if(this.createPage({name:o.name+" Copy",id:t,index:s}),this.setCurrentPage(t),this.setCamera(r),i)return this.putContentOntoCurrentPage(i)})),this}renamePage(e,t,n){const o="string"===typeof e?e:e.id;return this.getInstanceState().isReadonly||this.updatePage({id:o,name:t},n),this}_getAllAssetsQuery(){return this.store.query.records("asset")}getAssets(){return this._getAllAssetsQuery().get()}createAssets(e){return this._createAssets(e),this}updateAssets(e){return this._updateAssets(e),this}deleteAssets(e){const t="string"===typeof e[0]?e:e.map((e=>e.id));return this._deleteAssets(t),this}getAsset(e){return this.store.get("string"===typeof e?e:e.id)}_getShapeGeometryCache(){return this.store.createComputedCache("bounds",(e=>this.getShapeUtil(e).getGeometry(e)),((e,t)=>e.props===t.props))}getShapeGeometry(e){return this._getShapeGeometryCache().get("string"===typeof e?e:e.id)}_getShapeHandlesCache(){return this.store.createComputedCache("handles",(e=>{var t,n;return null===(t=(n=this.getShapeUtil(e)).getHandles)||void 0===t?void 0:t.call(n,e)}))}getShapeHandles(e){return this._getShapeHandlesCache().get("string"===typeof e?e:e.id)}getShapeLocalTransform(e){const t="string"===typeof e?e:e.id,n=this.getShape(t);if(!n)throw Error("Editor.getTransform: shape not found");return bh.Identity().translate(n.x,n.y).rotate(n.rotation)}_getShapePageTransformCache(){return this.store.createComputedCache("pageTransformCache",(e=>{var t;if(Ca(e.parentId))return this.getShapeLocalTransform(e);const n=null!==(t=this._getShapePageTransformCache().get(e.parentId))&&void 0!==t?t:bh.Identity();return bh.Compose(n,this.getShapeLocalTransform(e))}))}getShapeParentTransform(e){var t;const n="string"===typeof e?e:e.id,o=this.getShape(n);return!o||Ca(o.parentId)?bh.Identity():null!==(t=this._getShapePageTransformCache().get(o.parentId))&&void 0!==t?t:bh.Identity()}getShapePageTransform(e){var t;const n="string"===typeof e?e:this.getShape(e).id;return null!==(t=this._getShapePageTransformCache().get(n))&&void 0!==t?t:bh.Identity()}_getShapePageBoundsCache(){return this.store.createComputedCache("pageBoundsCache",(e=>{const t=this._getShapePageTransformCache().get(e.id);if(!t)return new mh;return mh.FromPoints(bh.applyToPoints(t,this.getShapeGeometry(e).vertices))}))}getShapePageBounds(e){return this._getShapePageBoundsCache().get("string"===typeof e?e:e.id)}_getShapeClipPathCache(){return this.store.createComputedCache("clipPathCache",(e=>{const t=this._getShapeMaskCache().get(e.id);if(!t)return;if(0===t.length)return"polygon(0px 0px, 0px 0px, 0px 0px)";const n=this._getShapePageTransformCache().get(e.id);if(!n)return;const o=bh.applyToPoints(bh.Inverse(n),t);return"polygon(".concat(o.map((e=>"".concat(e.x,"px ").concat(e.y,"px"))).join(","),")")}))}getShapeClipPath(e){return this._getShapeClipPathCache().get("string"===typeof e?e:e.id)}_getShapeMaskCache(){return this.store.createComputedCache("pageMaskCache",(e=>{if(Ca(e.parentId))return;const t=this.getShapeAncestors(e.id).filter((e=>this.isShapeOfType(e,"frame")));if(0===t.length)return;const n=t.map((e=>this._getShapePageTransformCache().get(e.id).applyToPoints(this.getShapeGeometry(e).vertices))).reduce(((e,t)=>{if(!t||!e)return;const n=hf(e,t);return n?n.map(Gc.Cast):[]}));return n}))}getShapeMask(e){return this._getShapeMaskCache().get("string"===typeof e?e:e.id)}getShapeMaskedPageBounds(e){"string"!==typeof e&&(e=e.id);const t=this._getShapePageBoundsCache().get(e);if(!t)return;const n=this._getShapeMaskCache().get(e);if(n){if(0===n.length)return;const{corners:e}=t;if(e.every(((e,t)=>e&&Gc.Equals(e,n[t]))))return t.clone();const o=hf(n,e);if(!o)return;return mh.FromPoints(o)}return t}getShapeAncestors(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n="string"===typeof e?e:e.id,o=this.getShape(n);if(!o)return t;const r=o.parentId;if(Ca(r))return t.reverse(),t;const i=this.store.get(r);return i?(t.push(i),this.getShapeAncestors(i,t)):t}findShapeAncestor(e,t){const n="string"===typeof e?e:e.id,o=this.getShape(n);if(!o)return;const r=o.parentId;if(Ca(r))return;const i=this.getShape(r);return i?t(i)?i:this.findShapeAncestor(i,t):void 0}hasAncestor(e,t){const n="string"===typeof e?e:null===e||void 0===e?void 0:e.id,o=n&&this.getShape(n);return!!o&&(o.parentId===t||this.hasAncestor(this.getShapeParent(o),t))}findCommonAncestor(e,t){if(0===e.length)return;const n="string"===typeof e[0]?e:e.map((e=>e.id)),o=ai(n.map((e=>this.getShape(e))));if(1===o.length){var r;const e=o[0].parentId;if(Ca(e))return;return t?null===(r=this.findShapeAncestor(o[0],t))||void 0===r?void 0:r.id:e}const[i,...s]=o;let a=this.getShapeParent(i);for(;a;)if(!t||t(a)){if(s.every((e=>this.hasAncestor(e,a.id))))return a.id;a=this.getShapeParent(a)}else a=this.getShapeParent(a)}isShapeOrAncestorLocked(e){const t="string"===typeof e?this.getShape(e):e;return void 0!==t&&(!!t.isLocked||this.isShapeOrAncestorLocked(this.getShapeParent(t)))}getCurrentPageBounds(){let e;return this.getCurrentPageShapeIds().forEach((t=>{const n=this.getShapeMaskedPageBounds(t);n&&(e=e?e.expand(n):n.clone())})),e}getSelectedShapeAtPoint(e){const t=this.getSelectedShapeIds();return this.getCurrentPageShapesSorted().filter((e=>"group"!==e.type&&t.includes(e.id))).reverse().find((t=>this.isPointInShape(t,e,{hitInside:!0,margin:0})))}getShapeAtPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getZoomLevel(),o=this.getViewportPageBounds(),{filter:r,margin:i=0,hitLabels:s=!1,hitInside:a=!1,hitFrameInside:l=!1}=t;let c=1/0,d=null,u=1/0,h=null;const p=(t.renderingOnly?this.getCurrentPageRenderingShapesSorted():this.getCurrentPageShapesSorted()).filter((t=>{if(this.isShapeOfType(t,"group"))return!1;const n=this.getShapeMask(t);return!(n&&!md(e,n))&&(!r||r(t))}));for(let f=p.length-1;f>=0;f--){const t=p[f],r=this.getShapeGeometry(t),g=r instanceof xh,m=this.getPointInShapeSpace(t,e);if((this.isShapeOfType(t,"arrow")||this.isShapeOfType(t,"geo")&&"none"===t.props.fill)&&t.props.text.trim())for(const e of r.children)if(e.isLabel&&e.isPointInBounds(m))return t;if(this.isShapeOfType(t,"frame")){const e=r.distanceToPoint(m,a);if(Math.abs(e)<=i)return h||t;if(r.hitTestPoint(m,0,!0))return h||d||(l?t:void 0);continue}let v;if(g){let e=1/0;for(const t of r.children){if(t.isLabel&&!s)continue;const n=t.distanceToPoint(m,a);n<e&&(e=n)}v=e}else v=0===i&&(r.bounds.w<1||r.bounds.h<1)||r.bounds.containsPoint(m,i)?r.distanceToPoint(m,a):1/0;if(r.isClosed){if(v<=i){if(r.isFilled||g&&r.children[0].isFilled)return h||t;if(this.getShapePageBounds(t).contains(o))continue;if(Math.abs(v)<i)Math.abs(v)<u&&(u=Math.abs(v),h=t);else if(!h){const{area:e}=r;e<c&&(c=e,d=t)}}}else if(v<8/n)return t}return h||d||void 0}getShapesAtPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getCurrentPageShapes().filter((n=>this.isPointInShape(n,e,t)))}isPointInShape(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{hitInside:o=!1,margin:r=0}=n,i="string"===typeof e?e:e.id,s=this.getShapeMask(i);return!(s&&!md(t,s))&&this.getShapeGeometry(i).hitTestPoint(this.getPointInShapeSpace(e,t),r,o)}getPointInShapeSpace(e,t){const n="string"===typeof e?e:e.id;return this._getShapePageTransformCache().get(n).clone().invert().applyToPoint(t)}getPointInParentSpace(e,t){const n="string"===typeof e?e:e.id,o=this.getShape(n);if(!o)return new Gc(0,0);if(Ca(o.parentId))return Gc.From(t);const r=this.getShapePageTransform(o.parentId);return r?r.clone().invert().applyToPoint(t):Gc.From(t)}getCurrentPageShapes(){return Array.from(this.getCurrentPageShapeIds(),(e=>this.store.get(e)))}getCurrentPageShapesSorted(){const e=new Set(this.getCurrentPageShapes().sort(ns)),t=[];function n(o){t.push(o),e.delete(o),e.forEach((e=>{e.parentId===o.id&&n(e)}))}return e.forEach((e=>{vl(this.getShape(e.parentId))||n(e)})),t}getCurrentPageRenderingShapesSorted(){return this.getRenderingShapes().filter((e=>{let{isCulled:t}=e;return!t})).sort(((e,t)=>e.index-t.index)).map((e=>{let{shape:t}=e;return t}))}isShapeOfType(e,t){return("string"===typeof e?this.getShape(e):e).type===t}getShape(e){const t="string"===typeof e?e:e.id;if(yl(t))return this.store.get(t)}getShapeParent(e){const t="string"===typeof e?e:null===e||void 0===e?void 0:e.id;if(!t)return;const n=this.getShape(t);return void 0!==n&&yl(n.parentId)?this.store.get(n.parentId):void 0}getShapeNearestSibling(e,t){if(!t)return;if(t.parentId===e.parentId)return t;return this.findShapeAncestor(t,(t=>t.parentId===e.parentId))}isShapeInPage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCurrentPageId();const n="string"===typeof e?e:e.id,o=this.getShape(n);if(!o)return!1;let r=!1;if(o.parentId===t)r=!0;else{let e=this.getShape(o.parentId);e:for(;e;){if(e.parentId===t){r=!0;break e}e=this.getShape(e.parentId)}}return r}getAncestorPageId(e){const t="string"===typeof e?e:null===e||void 0===e?void 0:e.id,n=t&&this.getShape(t);if(n)return Ca(n.parentId)?n.parentId:this.getAncestorPageId(this.getShape(n.parentId))}reparentShapes(e,t,n){const o="string"===typeof e[0]?e:e.map((e=>e.id));if(0===o.length)return this;const r=[],i=Ca(t)?bh.Identity():this.getShapePageTransform(t),s=i.rotation();let a=[];const l=ai(this.getSortedChildIdsForParent(t).map((e=>this.getShape(e))));if(n){const e=l.find((e=>e.index===n));if(e){const t=l[l.indexOf(e)+1];a=t?Zi(n,t.index,o.length):Qi(n,o.length)}else{const e=l.sort(ns).find((e=>e.index>n));a=e?Zi(n,e.index,o.length):Qi(n,o.length)}}else{const e=l.length&&l[l.length-1];a=e?Qi(e.index,o.length):ts(o.length)}const c=i.clone().invert(),d=ai(o.map((e=>this.getShape(e)))),u=d.filter((e=>e.isLocked));u.length&&this.updateShapes(u.map((e=>{let{id:t,type:n}=e;return{id:t,type:n,isLocked:!1}})));for(let h=0;h<d.length;h++){const e=d[h],n=this.getShapePageTransform(e);if(!n)continue;const o=n.point();if(!o)continue;const i=c.applyToPoint(o),l=n.rotation()-s;r.push({id:e.id,type:e.type,parentId:t,x:i.x,y:i.y,rotation:l,index:a[h],isLocked:e.isLocked})}return this.updateShapes(r),this}getHighestIndexForParent(e){const t="string"===typeof e?e:e.id,n=this._parentIdsToChildIds.get()[t];if(!n||0===n.length)return"a1";return es(this.getShape(n[n.length-1]).index)}getSortedChildIdsForParent(e){const t="string"===typeof e?e:e.id,n=this._parentIdsToChildIds.get()[t];return n?this._childIdsCache.get(n,(()=>n)):vr}visitDescendants(e,t){const n="string"===typeof e?e:e.id,o=this.getSortedChildIdsForParent(n);for(const r of o)!1!==t(r)&&this.visitDescendants(r,t);return this}getShapeAndDescendantIds(e){const t=new Set,n=[...e];for(;n.length>0;){const e=n.pop();if(!e)break;if(!t.has(e)){t.add(e);for(const t of this.getSortedChildIdsForParent(e))n.push(t)}}return t}getDroppingOverShape(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=this.getCurrentPageShapesSorted();for(let o=n.length-1;o>=0;o--){const r=n[o];if(!this.getShapeUtil(r).canDropShapes(r,t)||t.find((e=>e.id===r.id||this.hasAncestor(r,e.id))))continue;const i=this.getShapeMaskedPageBounds(r.id);if(i&&i.containsPoint(e)&&this.getShapeGeometry(r).hitTestPoint(this.getPointInShapeSpace(r,e),0,!0))return r}}getOutermostSelectableShape(e,t){const n="string"===typeof e?e:e.id,o=this.getShape(n);let r=o,i=o;const s=this.getFocusedGroup();for(;i;){var a;if(!this.isShapeOfType(i,"group")||(null===s||void 0===s?void 0:s.id)===i.id||this.hasAncestor(s,i.id)||null!==(a=null===t||void 0===t?void 0:t(i))&&void 0!==a&&!a){if((null===s||void 0===s?void 0:s.id)===i.id)break}else r=i;i=this.getShapeParent(i)}return r}rotateShapesBy(e,t){const n="string"===typeof e[0]?e:e.map((e=>e.id));if(n.length<=0)return this;const o=Af({editor:this});return o?(Mf({delta:t,snapshot:o,editor:this,stage:"one-off"}),this):this}getChangesToTranslateShape(e,t){var n,o,r,i,s,a;let l=e;const c=this.getShapeUtil(e);return l=Rg(l,null!==(n=null===(o=c.onTranslateStart)||void 0===o?void 0:o.call(c,l))&&void 0!==n?n:void 0),l=Rg(l,{id:e.id,type:e.type,x:t.x,y:t.y}),l=Rg(l,null!==(r=null===(i=c.onTranslate)||void 0===i?void 0:i.call(c,e,l))&&void 0!==r?r:void 0),l=Rg(l,null!==(s=null===(a=c.onTranslateEnd)||void 0===a?void 0:a.call(c,e,l))&&void 0!==s?s:void 0),l}nudgeShapes(e,t,n){const o="string"===typeof e[0]?e:e.map((e=>e.id));if(o.length<=0)return this;const r=[];for(const i of o){const e=this.getShape(i),n=Gc.From(t),o=this.getShapeParentTransform(e);o&&n.rot(-o.rotation()),r.push(this.getChangesToTranslateShape(e,n.add(e)))}return this.updateShapes(r,{squashing:!0,...n}),this}duplicateShapes(e,t){const n="string"===typeof e[0]?e:e.map((e=>e.id));if(n.length<=0)return this;const o=new Set(n),r=[],i=[...n];for(;i.length>0;){const e=i.pop();if(!e)break;r.push(e),this.getSortedChildIdsForParent(e).forEach((e=>i.push(e)))}r.reverse();const s=new Map(r.map((e=>[e,bl()]))),a=ai(r.map((e=>{var n;const r=this.getShape(e);if(!r)return null;const i=s.get(e);let a=0,l=0;if(t&&o.has(e)){const e=this.getShapeParentTransform(r),n=new Gc(t.x,t.y).rot(-e.rotation());a=n.x,l=n.y}const c=null!==(n=r.parentId)&&void 0!==n?n:this.getCurrentPageId(),d=this.getSortedChildIdsForParent(c),u=d.indexOf(r.id),h=d[u+1],p=h?this.getShape(h):null,f=p?Ji(r.index,p.index):es(r.index);let g=Ci(r);if(this.isShapeOfType(r,"arrow")&&this.isShapeOfType(g,"arrow")){const e=this.getArrowInfo(r);let t,n;if("binding"===r.props.start.type&&(t=s.get(r.props.start.boundShapeId),!t))if(null!==e&&void 0!==e&&e.isValid){const{x:t,y:n}=e.start.point;g.props.start={type:"point",x:t,y:n}}else{const{start:e}=bg(this,r);g.props.start={type:"point",x:e.x,y:e.y}}if("binding"===r.props.end.type&&(n=s.get(r.props.end.boundShapeId),!n))if(null!==e&&void 0!==e&&e.isValid){const{x:t,y:n}=e.end.point;g.props.end={type:"point",x:t,y:n}}else{const{end:e}=bg(this,r);g.props.start={type:"point",x:e.x,y:e.y}}const o=mg(g)?kg(this,g):Eg(this,g);if(null!==e&&void 0!==e&&e.isValid&&null!==o&&void 0!==o&&o.isValid&&!mg(r)){const t=Gc.Med(e.start.handle,e.end.handle),n=Gc.Dist(e.middle,t),r=Gc.Dist(o.middle,t);g.props.bend<0?g.props.bend+=r-n:g.props.bend-=r-n}"binding"===g.props.start.type&&t&&(g.props.start.boundShapeId=t),"binding"===g.props.end.type&&n&&(g.props.end.boundShapeId=n)}return g={...g,id:i,x:r.x+a,y:r.y+l,index:f},g})));return a.forEach((e=>{yl(e.parentId)&&s.has(e.parentId)&&(e.parentId=s.get(e.parentId))})),this.history.batch((()=>{const e=a.length+this.getCurrentPageShapeIds().size>_d;e&&Bg(this);const n=e?a.slice(0,_d-this.getCurrentPageShapeIds().size):a,o=n.map((e=>e.id));if(this.createShapes(n),this.setSelectedShapes(o),void 0!==t){const e=this.getSelectionPageBounds(),t=this.getViewportPageBounds();e&&!t.contains(e)&&this.centerOnPoint(e.center,{duration:kd})}})),this}moveShapesToPage(e,t){const n="string"===typeof e[0]?e:e.map((e=>e.id));if(0===n.length)return this;if(this.getInstanceState().isReadonly)return this;const o=this.getCurrentPageId();if(t===o)return this;if(!this.store.has(t))return this;const r=this.getContentFromCurrentPage(n);if(!r)return this;if(this.getPageShapeIds(t).size+r.shapes.length>_d)return Bg(this,t),this;const i=this.getCamera().z;return this.history.batch((()=>{this.deleteShapes(n),this.setCurrentPage(t),this.setFocusedGroup(null),this.selectNone(),this.putContentOntoCurrentPage(r,{select:!0,preserveIds:!0,preservePosition:!0}),this.setCamera({...this.getCamera(),z:i}),this.centerOnPoint(this.getSelectionRotatedPageBounds().center)})),this}toggleLock(e){const t="string"===typeof e[0]?e:e.map((e=>e.id));if(this.getInstanceState().isReadonly||0===t.length)return this;let n=!0,o=!0;const r=[];for(const i of t){const e=this.getShape(i);e&&(r.push(e),e.isLocked?o=!1:n=!1)}return this.batch((()=>{o?(this.updateShapes(r.map((e=>({id:e.id,type:e.type,isLocked:!0})))),this.setSelectedShapes([])):n?this.updateShapes(r.map((e=>({id:e.id,type:e.type,isLocked:!1})))):this.updateShapes(r.map((e=>({id:e.id,type:e.type,isLocked:!0}))))})),this}sendToBack(e){const t="string"===typeof e[0]?e:e.map((e=>e.id)),n=Pf(this,"toBack",t);return n&&this.updateShapes(n),this}sendBackward(e){const t="string"===typeof e[0]?e:e.map((e=>e.id)),n=Pf(this,"backward",t);return n&&this.updateShapes(n),this}bringForward(e){const t="string"===typeof e[0]?e:e.map((e=>e.id)),n=Pf(this,"forward",t);return n&&this.updateShapes(n),this}bringToFront(e){const t="string"===typeof e[0]?e:e.map((e=>e.id)),n=Pf(this,"toFront",t);return n&&this.updateShapes(n),this}flipShapes(e,t){const n="string"===typeof e[0]?e:e.map((e=>e.id));if(this.getInstanceState().isReadonly)return this;let o=ai(n.map((e=>this.getShape(e))));if(!o.length)return this;o=ai(o.map((e=>this.isShapeOfType(e,"group")?this.getSortedChildIdsForParent(e.id).map((e=>this.getShape(e))):e)).flat());const r=mh.Common(ai(o.map((e=>this.getShapePageBounds(e))))).center;return this.batch((()=>{for(const e of o){const n=this.getShapeGeometry(e).bounds,o=this.getShapePageTransform(e.id);o&&this.resizeShape(e.id,{x:"horizontal"===t?-1:1,y:"vertical"===t?-1:1},{initialBounds:n,initialPageTransform:o,initialShape:e,mode:"scale_shape",scaleOrigin:r,scaleAxisRotation:0})}})),this}stackShapes(e,t,n){const o="string"===typeof e[0]?e:e.map((e=>e.id));if(this.getInstanceState().isReadonly)return this;const r=ai(o.map((e=>this.getShape(e))).filter((e=>!!e&&(!this.isShapeOfType(e,"arrow")||"binding"!==e.props.start.type&&"binding"!==e.props.end.type)))),i=r.length;if(0===n&&i<3||i<2)return this;const s=Object.fromEntries(r.map((e=>[e.id,this.getShapePageBounds(e)])));let a,l,c,d,u;if("horizontal"===t?(a="x",l="minX",c="maxX",d="width"):(a="y",l="minY",c="maxY",d="height"),0===n){const e=[];r.sort(((e,t)=>s[e.id][l]-s[t.id][l]));for(let n=0;n<i-1;n++){const t=r[n],o=r[n+1],i=s[t.id],a=s[o.id][l]-i[c],d=e.find((e=>e.gap===a));d?d.count++:e.push({gap:a,count:1})}let t=0;e.forEach((e=>{e.count>t&&(t=e.count,u=e.gap)})),1===t&&(u=Math.max(0,e.reduce(((e,t)=>e+t.gap*t.count),0)/(i-1)))}else u=n;const h=[];let p=s[r[0].id][c];return r.forEach(((e,t)=>{var n,o;if(0===t)return;const r={x:0,y:0};r[a]=p+u-s[e.id][a];const i=this.getShapeParent(e),l=i?Gc.Rot(r,-this.getShapePageTransform(i).decompose().rotation):r,c=null===(n=(o=this.getShapeUtil(e)).onTranslateStart)||void 0===n?void 0:n.call(o,e);h.push(c?{...c,[a]:e[a]+l[a]}:{id:e.id,type:e.type,[a]:e[a]+l[a]}),p+=s[e.id][d]+u})),this.updateShapes(h),this}packShapes(e,t){const n="string"===typeof e[0]?e:e.map((e=>e.id));if(this.getInstanceState().isReadonly)return this;if(n.length<2)return this;const o=ai(n.map((e=>this.getShape(e))).filter((e=>!!e&&(!this.isShapeOfType(e,"arrow")||"binding"!==e.props.start.type&&"binding"!==e.props.end.type)))),r={},i={};let s,a,l=0;for(let _=0;_<o.length;_++)s=o[_],a=this.getShapePageBounds(s),r[s.id]=a,i[s.id]=a.clone(),l+=a.width*a.height;const c=mh.Common(ai(Object.values(r))),d=c.width;o.sort(((e,t)=>r[t.id].height-r[e.id].height));const u=Math.max(Math.ceil(Math.sqrt(l/.95)),d),h=[new mh(c.x,c.y,u,1/0)];let p,f,g=0,m=0;for(let _=0;_<o.length;_++){s=o[_],a=i[s.id];for(let e=h.length-1;e>=0;e--)if(p=h[e],!(a.width>p.width||a.height>p.height)){a.x=p.x,a.y=p.y,m=Math.max(m,a.maxY),g=Math.max(g,a.maxX),a.width===p.width&&a.height===p.height?(f=h.pop(),e<h.length&&(h[e]=f)):a.height===p.height?(p.x+=a.width+t,p.width-=a.width+t):a.width===p.width?(p.y+=a.height+t,p.height-=a.height+t):(h.push(new mh(p.x+(a.width+t),p.y,p.width-(a.width+t),a.height)),p.y+=a.height+t,p.height-=a.height+t);break}}const v=mh.Common(Object.values(i)),y=Gc.Sub(c.center,v.center);let b;const w=[];for(let _=0;_<o.length;_++){var x,S;s=o[_],a=r[s.id],b=i[s.id];const e=Gc.Sub(b.point,a.point).add(y),t=this.getShapeParentTransform(s);t&&e.rot(-t.rotation());const n={id:s.id,type:s.type,x:s.x+e.x,y:s.y+e.y},l=null===(x=(S=this.getShapeUtil(s)).onTranslateStart)||void 0===x?void 0:x.call(S,{...s,...n});l?w.push({...n,...l}):w.push(n)}return w.length&&this.updateShapes(w),this}alignShapes(e,t){const n="string"===typeof e[0]?e:e.map((e=>e.id));if(this.getInstanceState().isReadonly)return this;if(n.length<2)return this;const o=ai(n.map((e=>this.getShape(e)))),r=Object.fromEntries(o.map((e=>[e.id,this.getShapePageBounds(e)]))),i=mh.Common(ai(Object.values(r))),s=[];return o.forEach((e=>{const n=r[e.id];if(!n)return;const o={x:0,y:0};switch(t){case"top":o.y=i.minY-n.minY;break;case"center-vertical":o.y=i.midY-n.minY-n.height/2;break;case"bottom":o.y=i.maxY-n.minY-n.height;break;case"left":o.x=i.minX-n.minX;break;case"center-horizontal":o.x=i.midX-n.minX-n.width/2;break;case"right":o.x=i.maxX-n.minX-n.width}const a=this.getShapeParent(e),l=a?Gc.Rot(o,-this.getShapePageTransform(a).decompose().rotation):o;s.push(this.getChangesToTranslateShape(e,Gc.Add(e,l)))})),this.updateShapes(s),this}distributeShapes(e,t){const n="string"===typeof e[0]?e:e.map((e=>e.id));if(this.getInstanceState().isReadonly)return this;if(n.length<3)return this;const o=n.length,r=ai(n.map((e=>this.getShape(e)))),i=Object.fromEntries(r.map((e=>[e.id,this.getShapePageBounds(e)])));let s,a,l,c,d;"horizontal"===t?(s="x",a="minX",l="maxX",c="midX",d="width"):(s="y",a="minY",l="maxY",c="midY",d="height");const u=[],h=r.sort(((e,t)=>i[e.id][a]-i[t.id][a]))[0],p=r.sort(((e,t)=>i[t.id][l]-i[e.id][l]))[0],f=i[h.id][c],g=(i[p.id][c]-f)/(o-1),m=f+g;return r.filter((e=>e!==h&&e!==p)).sort(((e,t)=>i[e.id][c]-i[t.id][c])).forEach(((e,t)=>{const n={x:0,y:0};n[s]=m+g*t-i[e.id][d]/2-i[e.id][s];const o=this.getShapeParent(e),r=o?Gc.Rot(n,-this.getShapePageTransform(o).rotation()):n;u.push(this.getChangesToTranslateShape(e,Gc.Add(e,r)))})),this.updateShapes(u),this}stretchShapes(e,t){const n="string"===typeof e[0]?e:e.map((e=>e.id));if(this.getInstanceState().isReadonly)return this;if(n.length<2)return this;const o=ai(n.map((e=>this.getShape(e)))),r=Object.fromEntries(n.map((e=>[e,this.getShapeGeometry(e).bounds]))),i=Object.fromEntries(n.map((e=>[e,this.getShapePageBounds(e)]))),s=mh.Common(ai(Object.values(i)));switch(t){case"vertical":this.batch((()=>{for(const e of o){if(this.getShapePageTransform(e).rotation()%Qc)continue;const t=r[e.id],n=i[e.id],o=new Gc(0,s.minY-n.minY),a=this.getShapeParentTransform(e);a&&o.rot(-a.rotation());const{x:l,y:c}=Gc.Add(o,e);this.updateShapes([{id:e.id,type:e.type,x:l,y:c}],{squashing:!0});const d=new Gc(1,s.height/n.height);this.resizeShape(e.id,d,{initialBounds:t,scaleOrigin:new Gc(n.center.x,s.minY),scaleAxisRotation:0})}}));break;case"horizontal":this.batch((()=>{for(const e of o){const t=r[e.id],n=i[e.id];if(this.getShapePageTransform(e).rotation()%Qc)continue;const o=new Gc(s.minX-n.minX,0),a=this.getShapeParentTransform(e);a&&o.rot(-a.rotation());const{x:l,y:c}=Gc.Add(o,e);this.updateShapes([{id:e.id,type:e.type,x:l,y:c}],{squashing:!0});const d=new Gc(s.width/n.width,1);this.resizeShape(e.id,d,{initialBounds:t,scaleOrigin:new Gc(s.minX,n.center.y),scaleAxisRotation:0})}}))}return this}resizeShape(e,t){var n,o,r,i,s;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l="string"===typeof e?e:e.id;if(this.getInstanceState().isReadonly)return this;Number.isFinite(t.x)||(t=new Gc(1,t.y)),Number.isFinite(t.y)||(t=new Gc(t.x,1));const c=null!==(n=a.initialShape)&&void 0!==n?n:this.getShape(l);if(!c)return this;const d=null!==(o=a.scaleOrigin)&&void 0!==o?o:null===(r=this.getShapePageBounds(l))||void 0===r?void 0:r.center;if(!d)return this;const u=a.initialPageTransform?bh.Cast(a.initialPageTransform):this.getShapePageTransform(l);if(!u)return this;const h=u.rotation();if(null==h)return this;const p=null!==(i=a.scaleAxisRotation)&&void 0!==i?i:h,f=null!==(s=a.initialBounds)&&void 0!==s?s:this.getShapeGeometry(l).bounds;if(!f)return this;if(!dd(h,p))return this._resizeUnalignedShape(l,t,{...a,initialBounds:f,scaleOrigin:d,scaleAxisRotation:p,initialPageTransform:u,initialShape:c});const g=this.getShapeUtil(c);if(g.isAspectRatioLocked(c)&&(t=Math.abs(t.x)>Math.abs(t.y)?new Gc(t.x,Math.sign(t.y)*Math.abs(t.x)):new Gc(Math.sign(t.x)*Math.abs(t.y),t.y)),g.onResize&&g.canResize(c)){var m,v;const e=this._scalePagePoint(bh.applyToPoint(u,new Gc(0,0)),d,t,p),n=this.getPointInParentSpace(c.id,e),o=new Gc(t.x,t.y),r=nd((h-p)%Math.PI,0);o.x=r?t.x:t.y,o.y=r?t.y:t.x;const i=bh.applyToPoint(u,new Gc),{x:s,y:y}=this.getPointInParentSpace(c.id,i);this.updateShapes([{id:l,type:c.type,x:n.x,y:n.y,...g.onResize({...c,x:s,y:y},{newPoint:n,handle:null!==(m=a.dragHandle)&&void 0!==m?m:"bottom_right",mode:null!==(v=a.mode)&&void 0!==v?v:"scale_shape",scaleX:o.x,scaleY:o.y,initialBounds:f,initialShape:c})}],{squashing:!0})}else{const e=bh.applyToPoint(u,f.center),n=this._scalePagePoint(e,d,t,p),o=this.getPointInParentSpace(c.id,e),r=this.getPointInParentSpace(c.id,n),i=Gc.Sub(r,o);this.updateShapes([{id:l,type:c.type,x:c.x+i.x,y:c.y+i.y}],{squashing:!0})}return this}_scalePagePoint(e,t,n,o){const r=Gc.RotWith(e,t,-o).sub(t),i=Gc.MulV(r,n);return Gc.Add(i,t).rotWith(t,o)}_resizeUnalignedShape(e,t,n){const{type:o}=n.initialShape,r=new Gc(t.x,t.y);if(Math.abs(t.x)>Math.abs(t.y)?r.x=Math.sign(t.x)*Math.abs(t.y):r.y=Math.sign(t.y)*Math.abs(t.x),this.resizeShape(e,r,{initialShape:n.initialShape,initialBounds:n.initialBounds}),Math.sign(t.x)*Math.sign(t.y)<0){let{rotation:t}=bh.Decompose(n.initialPageTransform);t-=2*t,this.updateShapes([{id:e,type:o,rotation:t}],{squashing:!0})}const i=bh.applyToPoint(n.initialPageTransform,n.initialBounds.center),s=this._scalePagePoint(i,n.scaleOrigin,t,n.scaleAxisRotation),a=this.getShapePageBounds(e),l=this.getShapePageTransform(e),c=a.center,d=l.point();if(!c||!d)return this;const u=Gc.Sub(s,c),h=Gc.Add(d,u),{x:p,y:f}=this.getPointInParentSpace(e,h);return this.updateShapes([{id:e,type:o,x:p,y:f}],{squashing:!0}),this}getInitialMetaForShape(e){return{}}createShape(e){return this._createShapes([e]),this}createShapes(e){if(!Array.isArray(e))throw Error("Editor.createShapes: must provide an array of shapes or shape partials");return this._createShapes(e),this}animateShape(e,t){return this.animateShapes([e],t)}animateShapes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:n=500,easing:o=Kc.linear}=t,r=Np();let i,s=n;const a=[];let l,c,d;for(let h=0,p=e.length;h<p;h++){if(l=e[h],!l)continue;c={partial:l,values:[]};const t=this.getShape(l.id);if(t){for(const e of["x","y","rotation"])void 0!==l[e]&&t[e]!==l[e]&&c.values.push({prop:e,from:t[e],to:l[e]});a.push(c),this.animatingShapes.set(t.id,r)}}const u=t=>{if(s-=t,s<0){const{animatingShapes:t}=this,n=e.filter((e=>e&&t.get(e.id)===r));return n.length&&this.updateShapes(n,{squashing:!1}),void this.removeListener("tick",u)}i=o(1-s/n);const{animatingShapes:l}=this,c=[];let h;for(let e=0,n=a.length;e<n;e++)d=a[e],h=l.get(d.partial.id),h===r&&c.push({id:d.partial.id,type:d.partial.type,...d.values.reduce(((e,t)=>{let{prop:n,from:o,to:r}=t;return e[n]=o+(r-o)*i,e}),{})});this._updateShapes(c,{squashing:!0})};return this.addListener("tick",u),this}groupShapes(e){var t,n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bl();if(!Array.isArray(e))throw Error("Editor.groupShapes: must provide an array of shapes or shape ids");if(this.getInstanceState().isReadonly)return this;const r="string"===typeof e[0]?e:e.map((e=>e.id));if(r.length<=1)return this;const i=ai(this._getUnlockedShapeIds(r).map((e=>this.getShape(e)))),s=i.sort(ns).map((e=>e.id)),a=mh.Common(ai(i.map((e=>this.getShapePageBounds(e))))),{x:l,y:c}=a.point,d=null!==(t=this.findCommonAncestor(i))&&void 0!==t?t:this.getCurrentPageId();if("select"!==this.getCurrentToolId())return this;this.isIn("select.idle")||this.cancel();const u=i.filter((e=>e.parentId===d)).sort(ns),h=null===(n=u[u.length-1])||void 0===n?void 0:n.index;return this.batch((()=>{this.createShapes([{id:o,type:"group",parentId:d,index:h,x:l,y:c,opacity:1,props:{}}]),this.reparentShapes(s,o),this.select(o)})),this}ungroupShapes(e){const t="string"===typeof e[0]?e:e.map((e=>e.id));if(this.getInstanceState().isReadonly)return this;if(0===t.length)return this;if("select"!==this.getCurrentToolId())return this;this.isIn("select.idle")||this.cancel();const n=new Set,o=ai(t.map((e=>this.getShape(e)))),r=[];return o.forEach((e=>{this.isShapeOfType(e,"group")?r.push(e):n.add(e.id)})),0===r.length||this.batch((()=>{let e;for(let t=0,o=r.length;t<o;t++){e=r[t];const o=this.getSortedChildIdsForParent(e.id);for(let e=0,t=o.length;e<t;e++)n.add(o[e]);this.reparentShapes(o,e.parentId,e.index)}this.deleteShapes(r.map((e=>e.id))),this.select(...n)})),this}updateShape(e,t){return this.updateShapes([e],t),this}updateShapes(e,t){const n=Array(e.length);for(let o=0,r=e.length;o<r;o++){const t=e[o];if(!t)continue;const r=this.getShape(t.id);r&&(this.isShapeOrAncestorLocked(r)&&!Object.hasOwn(t,"isLocked")||(this.animatingShapes.delete(t.id),n.push(t)))}return this._updateShapes(n,t),this}_getUnlockedShapeIds(e){return e.filter((e=>{var t;return!(null!==(t=this.getShape(e))&&void 0!==t&&t.isLocked)}))}deleteShapes(e){if(!Array.isArray(e))throw Error("Editor.deleteShapes: must provide an array of shapes or shapeIds");return this._deleteShapes(this._getUnlockedShapeIds("string"===typeof e[0]?e:e.map((e=>e.id)))),this}deleteShape(e){return this.deleteShapes(["string"===typeof e?e:e.id]),this}_extractSharedStyles(e,t){if(this.isShapeOfType(e,"group")){const n=this._parentIdsToChildIds.get()[e.id];if(!n)return;for(let e=0,o=n.length;e<o;e++)this._extractSharedStyles(this.getShape(n[e]),t)}else for(const[n,o]of this.styleProps[e.type])t.applyValue(n,ki(e.props,o))}_getSelectionSharedStyles(){const e=this.getSelectedShapes(),t=new If;for(const n of e)this._extractSharedStyles(n,t);return t}getStyleForNextShape(e){const t=this.getInstanceState().stylesForNextShape[e.id];return void 0===t?e.defaultValue:t}getShapeStyleIfExists(e,t){const n=this.styleProps[e.type].get(t);if(void 0!==n)return ki(e.props,n)}getSharedStyles(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0)return this._getSelectionSharedStyles();const e=this.root.getCurrent(),t=new If;if(!e)return t;if(e.shapeType)for(const n of this.styleProps[e.shapeType].keys())t.applyValue(n,this.getStyleForNextShape(n));return t}getSharedOpacity(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0){const e=[],t=n=>{const o=this.getShape(n);if(o)if(this.isShapeOfType(o,"group"))for(const e of this.getSortedChildIdsForParent(o.id))t(e);else e.push(o)};for(const o of this.getSelectedShapeIds())t(o);let n=null;for(const o of e)if(null===n)n=o.opacity;else if(n!==o.opacity)return{type:"mixed"};if(null!==n)return{type:"shared",value:n}}return{type:"shared",value:this.getInstanceState().opacityForNextShape}}setOpacityForNextShapes(e,t){return this.updateInstanceState({opacityForNextShape:e},t),this}setOpacityForSelectedShapes(e,t){const n=this.getSelectedShapes();if(n.length>0){const o=[],r=e=>{if(this.isShapeOfType(e,"group")){const t=this.getSortedChildIdsForParent(e);for(const e of t)r(this.getShape(e))}else o.push(e)};for(const e of n)r(e);this.updateShapes(o.map((t=>({id:t.id,type:t.type,opacity:e}))),t)}return this}setStyleForNextShapes(e,t,n){const o=this.getInstanceState().stylesForNextShape;return this.updateInstanceState({stylesForNextShape:{...o,[e.id]:t}},n),this}setStyleForSelectedShapes(e,t,n){const o=this.getSelectedShapes();if(o.length>0){const r=[],i=n=>{if(this.isShapeOfType(n,"group")){const e=this.getSortedChildIdsForParent(n.id);for(const t of e)i(this.getShape(t))}else{const o=this.getShapeUtil(n),i=this.styleProps[n.type].get(e);if(i){const e={id:n.id,type:n.type,props:{[i]:t}};r.push({util:o,originalShape:n,updatePartial:e})}}};for(const e of o)i(e);this.updateShapes(r.map((e=>{let{updatePartial:t}=e;return t})),n)}return this}registerExternalAssetHandler(e,t){return this.externalAssetContentHandlers[e]=t,this}async getAssetForExternalContent(e){var t,n;return await(null===(t=(n=this.externalAssetContentHandlers)[e.type])||void 0===t?void 0:t.call(n,e))}registerExternalContentHandler(e,t){return this.externalContentHandlers[e]=t,this}async putExternalContent(e){var t,n;return null===(t=(n=this.externalContentHandlers)[e.type])||void 0===t?void 0:t.call(n,e)}getContentFromCurrentPage(e){const t="string"===typeof e[0]?e:e.map((e=>e.id));if(!t)return;if(0===t.length)return;const n={};let o=si(t.map((e=>this.getShape(e))).sort(ns).flatMap((e=>{const t=[e];return this.visitDescendants(e.id,(e=>{t.push(this.getShape(e))})),t})));o=o.map((e=>{if(n[e.id]=this.getShapePageTransform(e.id),e=is(e),this.isShapeOfType(e,"arrow")){const t="binding"===e.props.start.type?e.props.start.boundShapeId:void 0,n="binding"===e.props.end.type?e.props.end.boundShapeId:void 0,r=this.getArrowInfo(e);if("binding"===e.props.start.type&&!o.some((e=>e.id===t)))if(null!==r&&void 0!==r&&r.isValid){const{x:t,y:n}=r.start.point;e.props.start={type:"point",x:t,y:n}}else{const{start:t}=bg(this,e);e.props.start={type:"point",x:t.x,y:t.y}}if("binding"===e.props.end.type&&!o.some((e=>e.id===n)))if(null!==r&&void 0!==r&&r.isValid){const{x:t,y:n}=r.end.point;e.props.end={type:"point",x:t,y:n}}else{const{end:t}=bg(this,e);e.props.end={type:"point",x:t.x,y:t.y}}const i=mg(e)?kg(this,e):Eg(this,e);if(null!==r&&void 0!==r&&r.isValid&&null!==i&&void 0!==i&&i.isValid&&!mg(e)){const t=Gc.Med(r.start.handle,r.end.handle),n=Gc.Dist(r.middle,t),o=Gc.Dist(i.middle,t);e.props.bend<0?e.props.bend+=o-n:e.props.bend-=o-n}return e}return e}));const r=[];o.forEach((e=>{if(void 0===o.find((t=>t.id===e.parentId))){const t=this.getShapePageTransform(e.id),n=t.point(),o=t.rotation();e.x=n.x,e.y=n.y,e.rotation=o,e.parentId=this.getCurrentPageId(),r.push(e.id)}}));const i=new Set;return o.forEach((e=>{"assetId"in e.props&&null!==e.props.assetId&&i.add(e.props.assetId)})),{shapes:o,rootShapeIds:r,schema:this.store.schema.serialize(),assets:ai(Array.from(i).map((e=>this.getAsset(e))))}}putContentOntoCurrentPage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.getInstanceState().isReadonly)return this;if(!e.schema)throw Error("Could not put content:\ncontent is missing a schema.");const{select:n=!1,preserveIds:o=!1,preservePosition:r=!1}=t;let{point:i}=t;const s=this.getCurrentPageId(),{rootShapeIds:a}=e,l=[],c=[],d={store:{...Object.fromEntries(e.assets.map((e=>[e.id,e]))),...Object.fromEntries(e.shapes.map((e=>[e.id,e])))},schema:e.schema},u=this.store.schema.migrateStoreSnapshot(d);if("error"===u.type)throw Error("Could not put content: could not migrate content");for(const S of Object.values(u.value))switch(S.typeName){case"asset":l.push(S);break;case"shape":c.push(S)}const h=new Map(c.map((e=>[e.id,bl()])));let p=this.getCurrentPageId(),f=1/0,g=[];for(const S of this.getSelectedShapes()){if(0===f)break;const e=this.isShapeOfType(S,"frame"),t=this.getShapeAncestors(S);e&&t.push(S);const n=e?t.length+1:t.length;if(n<f)f=n,g=t,p=e?S.id:S.parentId;else if(n===f){if(g.length!==t.length)throw Error("Ancestors: ".concat(g.length," !== ").concat(t.length));if(0===g.length){p=s;break}p=s;for(let e=0;e<g.length&&t[e]===g[e];e++)p=t[e].id}}let m=!1;if(!Ca(p)){const e=this.getShape(p);if(e)if(this.getViewportPageBounds().includes(this.getShapePageBounds(e))){if(1===a.length){const t=c.find((e=>e.id===a[0]));this.isShapeOfType(e,"frame")&&this.isShapeOfType(t,"frame")&&t.props.w===(null===e||void 0===e?void 0:e.props.w)&&t.props.h===(null===e||void 0===e?void 0:e.props.h)&&(m=!0)}}else p=s;else p=s}m||(m=h.has(p)),m&&(p=this.getShape(p).parentId);let v=this.getHighestIndexForParent(p);const y=[],b=c.map((e=>{let t;if(o)t=Ci(e),h.set(e.id,e.id);else{const n=h.get(e.id);t=Ci({...e,id:n})}if(a.includes(e.id)&&(t.parentId=s,y.push(t)),h.has(t.parentId)?t.parentId=h.get(e.parentId):(a.push(t.id),t.index=v,v=es(v)),this.isShapeOfType(t,"arrow")){if("binding"===t.props.start.type){const e=h.get(t.props.start.boundShapeId);t.props.start=e?{...t.props.start,boundShapeId:e}:{type:"point",x:0,y:0}}if("binding"===t.props.end.type){const e=h.get(t.props.end.boundShapeId);t.props.end=e?{...t.props.end,boundShapeId:e}:{type:"point",x:0,y:0}}}return t}));if(b.length+this.getCurrentPageShapeIds().size>_d)return Bg(this),this;let w=[];const x=[];return w=l.filter((e=>!this.store.has(e.id))).map((e=>{var t;"image"!==e.type&&"video"!==e.type||(e.props.src&&null!==(t=e.props.src)&&void 0!==t&&t.startsWith("data:image")?(x.push(is(e)),e.props.src=null):x.push(is(e)));return e})),Promise.allSettled(x.map((async e=>{var t;const n=await(o=e.props.src,r=e.props.name,i=null!==(t=e.props.mimeType)&&void 0!==t?t:"image/png",fetch(o).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],r,{type:i})})));var o,r,i;const s=await this.getAssetForExternalContent({type:"file",file:n});return s?[e,s]:null}))).then((e=>{this.updateAssets(ai(e.map((e=>"fulfilled"===e.status&&e.value?{...e.value[1],id:e.value[0].id}:void 0))))})),this.batch((()=>{w.length>0&&this.createAssets(w),this.createShapes(b),n&&this.select(...y.map((e=>e.id))),p!==s&&this.reparentShapes(y.map((e=>e.id)),p);const e=b.map((e=>this.getShape(e.id))),t=mh.Common(e.map((e=>this.getShapePageBounds(e))));if(void 0===i)if(Ca(p)){const e=this.getViewportPageBounds();i=r||e.includes(mh.From(t))?t.center:e.center}else{const e=this.getShape(p);i=bh.applyToPoint(this.getShapePageTransform(e),this.getShapeGeometry(e).bounds.center)}if(1===y.length){const e=y[0];if(this.isShapeOfType(e,"frame"))for(;this.getShapesAtPoint(i).some((t=>this.isShapeOfType(t,"frame")&&t.props.w===e.props.w&&t.props.h===e.props.h));)i.x+=t.w+16}const o=mh.Common(ai(y.map((e=>{let{id:t}=e;return this.getShapePageBounds(t)})))).center,a=Gc.Sub(i,o);this.updateShapes(y.map((e=>{let{id:t}=e;const n=this.getShape(t),o=this.getShapeParentTransform(t).decompose().rotation,r=Gc.Rot(a,-o);return{id:n.id,type:n.type,x:n.x+r.x,y:n.y+r.y}})))})),this}async getSvg(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o="string"===typeof e[0]?e:e.map((e=>e.id));if(0===o.length)return;if(!window.document)throw Error("No document");const{scale:r=1,background:i=!1,padding:s=Td,preserveAspectRatio:a=!1}=n,l=null!==(t=n.darkMode)&&void 0!==t?t:this.user.getIsDarkMode(),c=kl({isDarkMode:l}),d=this.getShapeAndDescendantIds(o),u=this.getUnorderedRenderingShapes(!1).filter((e=>{let{id:t}=e;return d.has(t)}));let h=null;if(n.bounds)h=n.bounds;else for(const{maskedPageBounds:k}of u)k&&(h?h.union(k):h=k.clone());if(!h)return;const p=1===o.length&&this.isShapeOfType(this.getShape(o[0]),"frame")?o[0]:null;p||h.expandBy(s);const f=h.width*r,g=h.height*r,m=window.document.createElementNS("http://www.w3.org/2000/svg","svg");a&&m.setAttribute("preserveAspectRatio",a),m.setAttribute("direction","ltr"),m.setAttribute("width",f+""),m.setAttribute("height",g+""),m.setAttribute("viewBox","".concat(h.minX," ").concat(h.minY," ").concat(h.width," ").concat(h.height)),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),i?p?m.style.setProperty("background",c.solid):m.style.setProperty("background-color",c.background):m.style.setProperty("background-color","transparent");try{var v,y;null===(v=(y=document.body).focus)||void 0===v||v.call(y)}catch(_){}const b=window.document.createElementNS("http://www.w3.org/2000/svg","defs");m.append(b);const w=new Map,x={isDarkMode:l,addExportDef:e=>{if(w.has(e.key))return;const t=(async()=>{const t=await e.getElement();if(!t)return;const n=document.createComment("def: ".concat(e.key));b.appendChild(n);for(const e of Array.isArray(t)?t:[t])b.appendChild(e)})();w.set(e.key,t)}},S=(await Promise.all(u.map((async e=>{var t,n,o,r,i,s;let{id:a,opacity:l,index:d,backgroundIndex:u}=e;if(a===p)return[];const h=this.getShape(a);if(this.isShapeOfType(h,"group"))return[];const f=this.getShapeUtil(h);let g=await(null===(t=f.toSvg)||void 0===t?void 0:t.call(f,h,x)),m=await(null===(n=f.toBackgroundSvg)||void 0===n?void 0:n.call(f,h,x));if(g){const e=document.createElementNS("http://www.w3.org/2000/svg","g");e.appendChild(g),g=e}if(m){const e=document.createElementNS("http://www.w3.org/2000/svg","g");e.appendChild(m),m=e}if(!g&&!m){const e=this.getShapePageBounds(h),t=window.document.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("width",e.width+""),t.setAttribute("height",e.height+""),t.setAttribute("fill",c.solid),t.setAttribute("stroke",c.grey.pattern),t.setAttribute("stroke-width","1"),g=t}let v=this.getShapePageTransform(h).toCssString();"scale"in h.props&&1!==h.props.scale&&(v="".concat(v," scale(").concat(h.props.scale,", ").concat(h.props.scale,")")),null===(o=g)||void 0===o||o.setAttribute("transform",v),null===(r=m)||void 0===r||r.setAttribute("transform",v),null===(i=g)||void 0===i||i.setAttribute("opacity",l+""),null===(s=m)||void 0===s||s.setAttribute("opacity",l+"");const y=this.getShapeMask(h.id);if(y){const e=document.createElementNS("http://www.w3.org/2000/svg","clipPath");b.appendChild(e);const t=Np();e.id=t;const n=document.createElementNS("http://www.w3.org/2000/svg","path");if(n.setAttribute("d","M".concat(y.map((e=>{let{x:t,y:n}=e;return"".concat(t,",").concat(n)})).join("L"),"Z")),e.appendChild(n),g){const e=document.createElementNS("http://www.w3.org/2000/svg","g");e.setAttribute("clip-path","url(#".concat(t,")")),e.appendChild(g),g=e}if(m){const e=document.createElementNS("http://www.w3.org/2000/svg","g");e.setAttribute("clip-path","url(#".concat(t,")")),e.appendChild(m),m=e}}const w=[];return g&&w.push({zIndex:d,element:g}),m&&w.push({zIndex:u,element:m}),w})))).flat();await Promise.all(w.values());for(const{element:k}of S.sort(((e,t)=>e.zIndex-t.zIndex)))m.appendChild(k);return m}_updateInputsFromEvent(e){var t,n;const{previousScreenPoint:o,previousPagePoint:r,currentScreenPoint:i,currentPagePoint:s}=this.inputs,{screenBounds:a}=this.store.unsafeGetWithoutCapture(Ta),{x:l,y:c,z:d}=this.getCamera(),u=e.point.x-a.x,h=e.point.y-a.y,p=e.point.z;o.setTo(i),r.setTo(s),i.set(u,h),s.set(u/d-l,h/d-c,null!==p&&void 0!==p?p:.5),this.inputs.isPen="pointer"===e.type&&e.isPen,"pointer_down"===e.name&&this.inputs.pointerVelocity.set(0,0),this.store.put([{id:za,typeName:"pointer",x:s.x,y:s.y,lastActivityTimestamp:"pointer"===e.type&&e.pointerId===Bd&&null!==(t=null===(n=this.store.get(za))||void 0===n?void 0:n.lastActivityTimestamp)&&void 0!==t?t:Date.now(),meta:{}}])}cancel(){return this.dispatch({type:"misc",name:"cancel"}),this}interrupt(){return this.dispatch({type:"misc",name:"interrupt"}),this}complete(){return this.dispatch({type:"misc",name:"complete"}),this}cancelDoubleClick(){this._clickManager.cancelDoubleClickTimeout()}}function Bg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getCurrentPageId();const n=e.getPage(t).name;e.emit("max-shapes",{name:n,pageId:t,count:_d})}function Rg(e,t){if(!t)return e;let n=null;const o=Object.entries(t);for(let r=0,i=o.length;r<i;r++){const[t,i]=o[r];if(void 0!==i&&("id"!==t&&"type"!==t&&"typeName"!==t&&i!==e[t]))if(n||(n={...e}),"props"!==t&&"meta"!==t)n[t]=i;else{n[t]={...e[t]};for(const[e,o]of Object.entries(i))void 0!==o&&(n[t][e]=o)}}return n||e}function Ng(){const e=Hc();return ri("isDarkMode",(()=>e.user.getIsDarkMode()),[e])}Og([$r],Lg.prototype,"getCanUndo",1),Og([$r],Lg.prototype,"getCanRedo",1),Og([$r],Lg.prototype,"_getArrowBindingsIndex",1),Og([$r],Lg.prototype,"getArrowInfoCache",1),Og([$r],Lg.prototype,"getPath",1),Og([$r],Lg.prototype,"getCurrentTool",1),Og([$r],Lg.prototype,"getCurrentToolId",1),Og([$r],Lg.prototype,"getDocumentSettings",1),Og([$r],Lg.prototype,"getInstanceState",1),Og([$r],Lg.prototype,"getOpenMenus",1),Og([$r],Lg.prototype,"getIsMenuOpen",1),Og([$r],Lg.prototype,"getPageStates",1),Og([$r],Lg.prototype,"_getPageStatesQuery",1),Og([$r],Lg.prototype,"getCurrentPageState",1),Og([$r],Lg.prototype,"_getCurrentPageStateId",1),Og([$r],Lg.prototype,"getSelectedShapeIds",1),Og([$r],Lg.prototype,"getSelectedShapes",1),Og([$r],Lg.prototype,"getOnlySelectedShape",1),Og([$r],Lg.prototype,"getSelectionPageBounds",1),Og([$r],Lg.prototype,"getSelectionRotation",1),Og([$r],Lg.prototype,"getSelectionRotatedPageBounds",1),Og([$r],Lg.prototype,"getFocusedGroupId",1),Og([$r],Lg.prototype,"getFocusedGroup",1),Og([$r],Lg.prototype,"getEditingShapeId",1),Og([$r],Lg.prototype,"getEditingShape",1),Og([$r],Lg.prototype,"getHoveredShapeId",1),Og([$r],Lg.prototype,"getHoveredShape",1),Og([$r],Lg.prototype,"getHintingShapeIds",1),Og([$r],Lg.prototype,"getHintingShape",1),Og([$r],Lg.prototype,"getErasingShapeIds",1),Og([$r],Lg.prototype,"getErasingShapes",1),Og([$r],Lg.prototype,"getCameraId",1),Og([$r],Lg.prototype,"getCamera",1),Og([$r],Lg.prototype,"getZoomLevel",1),Og([$r],Lg.prototype,"getViewportScreenBounds",1),Og([$r],Lg.prototype,"getViewportScreenCenter",1),Og([$r],Lg.prototype,"getViewportPageBounds",1),Og([$r],Lg.prototype,"getViewportPageCenter",1),Og([$r],Lg.prototype,"getRenderingShapes",1),Og([$r],Lg.prototype,"_getAllPagesQuery",1),Og([$r],Lg.prototype,"getPages",1),Og([$r],Lg.prototype,"_getAllAssetsQuery",1),Og([$r],Lg.prototype,"_getShapeGeometryCache",1),Og([$r],Lg.prototype,"_getShapeHandlesCache",1),Og([$r],Lg.prototype,"_getShapePageTransformCache",1),Og([$r],Lg.prototype,"_getShapePageBoundsCache",1),Og([$r],Lg.prototype,"_getShapeClipPathCache",1),Og([$r],Lg.prototype,"_getShapeMaskCache",1),Og([$r],Lg.prototype,"getCurrentPageBounds",1),Og([$r],Lg.prototype,"getCurrentPageShapes",1),Og([$r],Lg.prototype,"getCurrentPageShapesSorted",1),Og([$r],Lg.prototype,"getCurrentPageRenderingShapesSorted",1),Og([$r],Lg.prototype,"_getSelectionSharedStyles",1),Og([$r({isEqual:(e,t)=>e.equals(t)})],Lg.prototype,"getSharedStyles",1),Og([$r],Lg.prototype,"getSharedOpacity",1);const Dg="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",zg="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",Fg='<path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/>';function Ug(e,t,n,o,r){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:16,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:16;const a=$c/180*(-n-t),l=Math.sin(a),c=Math.cos(a),d=1*c-1*l,u=1*l+1*c;return"url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ".concat(r,";'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='").concat(d,"' dy='").concat(u,"' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(").concat(t+n," 16 16)").concat(o?" scale(-1,-1) translate(0, -32)":"","' filter='url(%23shadow)'>")+e.replaceAll('"',"'")+'</g></svg>") '.concat(i," ").concat(s,", pointer")}const Hg=["default","pointer","cross","move","grab","grabbing","text","zoom-in","zoom-out"],Vg={none:()=>"none","ew-resize":(e,t,n)=>Ug(zg,e,0,t,n),"ns-resize":(e,t,n)=>Ug(zg,e,90,t,n),"nesw-resize":(e,t,n)=>Ug(Dg,e,0,t,n),"nwse-resize":(e,t,n)=>Ug(Dg,e,90,t,n),"nwse-rotate":(e,t,n)=>Ug(Fg,e,0,t,n),"nesw-rotate":(e,t,n)=>Ug(Fg,e,90,t,n),"senw-rotate":(e,t,n)=>Ug(Fg,e,180,t,n),"swne-rotate":(e,t,n)=>Ug(Fg,e,270,t,n)};function Wg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black";return Vg[e](function(e){return 180*e/$c}(t),!1,n)}var Kg,Gg;const qg="TLDRAW_TAB_ID_v2",Yg=globalThis.window;const Xg=Yg?null!==(Kg=null!==(Gg=Yg[qg])&&void 0!==Gg?Gg:Yg.sessionStorage[qg])&&void 0!==Kg?Kg:"TLDRAW_INSTANCE_STATE_V1_"+Np():"<error>";Yg&&(Yg[qg]=Xg,Yg&&(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(Yg.navigator.platform)||Yg.navigator.userAgent.includes("Mac")&&"ontouchend"in document)?Yg.sessionStorage[qg]=Xg:delete Yg.sessionStorage[qg]),null===Yg||void 0===Yg||Yg.addEventListener("beforeunload",(()=>{Yg.sessionStorage[qg]=Xg}));const $g=0,Zg=Vs({version:Os,currentPageId:wa,isFocusMode:zs,exportBackground:zs,isDebugMode:zs,isToolLocked:zs,isGridMode:zs,pageStates:Hs(Vs({pageId:wa,camera:Vs({x:Os,y:Os,z:Os}),selectedShapeIds:Hs(Aa),focusedGroupId:Aa.nullable()}))}),Qg=vs({currentVersion:$g});function Jg(e,t){const n=function(e){if(!e||"object"!==typeof e)return console.warn("Invalid instance state"),null;if(!("version"in e)||"number"!==typeof e.version)return console.warn("No version in instance state"),null;const t=ws({value:e,fromVersion:e.version,toVersion:$g,migrations:Qg});if("error"===t.type)return console.warn(t.reason),null;const n={...t.value,version:$g};try{Zg.validate(n)}catch(o){return console.warn(o),null}return n}(t);if(!n)return;const o=e.allRecords().filter((e=>"instance_page_state"===e.typeName||"camera"===e.typeName)),r={added:{},updated:{},removed:{...Pi(o.map((e=>[e.id,e])))}};e.has(Ta)&&(r.removed[Ta]=e.get(Ta));const i={removed:{},updated:{},added:{[Ta]:e.schema.types.instance.create({id:Ta,currentPageId:n.currentPageId,isDebugMode:n.isDebugMode,isFocusMode:n.isFocusMode,isToolLocked:n.isToolLocked,isGridMode:n.isGridMode,exportBackground:n.exportBackground})}};for(const s of n.pageStates){const e=ua.createId(s.pageId),t=La.createId(s.pageId);i.added[e]=ua.create({id:ua.createId(s.pageId),x:s.camera.x,y:s.camera.y,z:s.camera.z}),i.added[t]=La.create({id:La.createId(s.pageId),pageId:s.pageId,selectedShapeIds:s.selectedShapeIds,focusedGroupId:s.focusedGroupId})}Nr((()=>{e.applyDiff(gs([r,i])),e.ensureStoreIsUsable()}))}const em=(e,t)=>t.some((t=>e instanceof t));let tm,nm;const om=new WeakMap,rm=new WeakMap,im=new WeakMap,sm=new WeakMap,am=new WeakMap;let lm={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return rm.get(e);if("objectStoreNames"===t)return e.objectStoreNames||im.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return um(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function cm(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(nm||(nm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.apply(hm(this),n),um(om.get(this))}:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return um(e.apply(hm(this),n))}:function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];const i=e.call(hm(this),t,...o);return im.set(i,t.sort?t.sort():[t]),um(i)}}function dm(e){return"function"===typeof e?cm(e):(e instanceof IDBTransaction&&function(e){if(rm.has(e))return;const t=new Promise(((t,n)=>{const o=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",i),e.removeEventListener("abort",i)},r=()=>{t(),o()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",r),e.addEventListener("error",i),e.addEventListener("abort",i)}));rm.set(e,t)}(e),em(e,tm||(tm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,lm):e)}function um(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const o=()=>{e.removeEventListener("success",r),e.removeEventListener("error",i)},r=()=>{t(um(e.result)),o()},i=()=>{n(e.error),o()};e.addEventListener("success",r),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&om.set(t,e)})).catch((()=>{})),am.set(t,e),t}(e);if(sm.has(e))return sm.get(e);const t=dm(e);return t!==e&&(sm.set(e,t),am.set(t,e)),t}const hm=e=>am.get(e);const pm=["get","getKey","getAll","getAllKeys","count"],fm=["put","add","delete","clear"],gm=new Map;function mm(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(gm.get(t))return gm.get(t);const n=t.replace(/FromIndex$/,""),o=t!==n,r=fm.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!r&&!pm.includes(n))return;const i=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let i=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return o&&(i=i.index(a.shift())),(await Promise.all([i[n](...a),r&&t.done]))[0]};return gm.set(t,i),i}lm=(e=>({...e,get:(t,n,o)=>mm(t,n)||e.get(t,n,o),has:(t,n)=>!!mm(t,n)||e.has(t,n)}))(lm);const vm="TLDRAW_DOCUMENT_v2",ym="TLDRAW_DB_NAME_INDEX_v2",bm={Records:"records",Schema:"schema",SessionState:"session_state"};async function wm(e,t){!function(e){var t;const n=new Set(Sm());n.add(e),null===(t=window)||void 0===t||t.localStorage.setItem(ym,JSON.stringify([...n]))}(e);const n=await function(e,t){let{blocked:n,upgrade:o,blocking:r,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=um(s);return o&&s.addEventListener("upgradeneeded",(e=>{o(um(s.result),e.oldVersion,e.newVersion,um(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{i&&e.addEventListener("close",(()=>i())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(e,3,{upgrade(e){e.objectStoreNames.contains(bm.Records)||e.createObjectStore(bm.Records),e.objectStoreNames.contains(bm.Schema)||e.createObjectStore(bm.Schema),e.objectStoreNames.contains(bm.SessionState)||e.createObjectStore(bm.SessionState)}});try{return await t(n)}finally{n.close()}}async function xm(e){let{persistenceKey:t,sessionId:n,didCancel:o}=e;const r=vm+t;if(Sm().includes(r))return await async function(e){let{persistenceKey:t,didCancel:n}=e;await wm(vm+t,(async e=>{const t=e.transaction([bm.SessionState],"readwrite"),o=t.objectStore(bm.SessionState),r=(await o.getAll()).sort(((e,t)=>e.updatedAt-t.updatedAt));if(r.length<10)return void await t.done;const i=r.slice(0,r.length-10);for(const{id:n}of i)await o.delete(n);if(null!==n&&void 0!==n&&n())return t.abort();await t.done}))}({persistenceKey:t,didCancel:o}),await wm(r,(async e=>{var t;if(null!==o&&void 0!==o&&o())return;const r=e.transaction([bm.Records,bm.Schema,bm.SessionState],"readonly"),i=r.objectStore(bm.Records),s=r.objectStore(bm.Schema),a=r.objectStore(bm.SessionState);let l=n?null===(t=await a.get(n))||void 0===t?void 0:t.snapshot:null;if(!l){var c;l=null===(c=(await a.getAll()).sort(((e,t)=>e.updatedAt-t.updatedAt)).pop())||void 0===c?void 0:c.snapshot}const d={records:await i.getAll(),schema:await s.get(bm.Schema),sessionStateSnapshot:l};if(null===o||void 0===o||!o())return await r.done,d;r.abort()}))}function Sm(){var e,t;const n=null!==(e=JSON.parse((null===(t=window)||void 0===t?void 0:t.localStorage.getItem(ym))||"[]"))&&void 0!==e?e:[];return Array.isArray(n)?n:[]}const _m=Symbol("UPDATE_INSTANCE_STATE");const km="undefined"===typeof BroadcastChannel?class{constructor(e){wr(this,"onmessage",void 0)}postMessage(e){}close(){}}:BroadcastChannel;class Cm{constructor(e,t){let{persistenceKey:n,sessionId:o=Xg,onLoad:r,onLoadError:i}=t,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new km("tldraw-tab-sync-".concat(n));wr(this,"disposables",new Set),wr(this,"diffQueue",[]),wr(this,"didDispose",!1),wr(this,"shouldDoFullDBWrite",!0),wr(this,"isReloading",!1),wr(this,"persistenceKey",void 0),wr(this,"sessionId",void 0),wr(this,"serializedSchema",void 0),wr(this,"isDebugging",!1),wr(this,"documentTypes",void 0),wr(this,"$sessionStateSnapshot",void 0),wr(this,"initTime",Date.now()),wr(this,"isPersisting",!1),wr(this,"didLastWriteError",!1),wr(this,"scheduledPersistTimeout",null),this.store=e,this.channel=s,"undefined"!==typeof window&&(window.tlsync=this),this.persistenceKey=n,this.sessionId=o,this.serializedSchema=this.store.schema.serialize(),this.$sessionStateSnapshot=function(e){const t=e.query.ids("page");return $r("sessionStateSnapshot",(()=>{const n=e.get(Ta);if(!n)return null;const o=[...t.get()];return{version:$g,currentPageId:n.currentPageId,exportBackground:n.exportBackground,isFocusMode:n.isFocusMode,isDebugMode:n.isDebugMode,isToolLocked:n.isToolLocked,isGridMode:n.isGridMode,pageStates:o.map((t=>{var n,o,r,i,s;const a=e.get(La.createId(t)),l=e.get(ua.createId(t));return{pageId:t,camera:{x:null!==(n=null===l||void 0===l?void 0:l.x)&&void 0!==n?n:0,y:null!==(o=null===l||void 0===l?void 0:l.y)&&void 0!==o?o:0,z:null!==(r=null===l||void 0===l?void 0:l.z)&&void 0!==r?r:1},selectedShapeIds:null!==(i=null===a||void 0===a?void 0:a.selectedShapeIds)&&void 0!==i?i:[],focusedGroupId:null!==(s=null===a||void 0===a?void 0:a.focusedGroupId)&&void 0!==s?s:null}}))}}))}(this.store),this.disposables.add(e.listen((e=>{let{changes:t}=e;this.diffQueue.push(t),this.channel.postMessage({type:"diff",storeId:this.store.id,changes:t,schema:this.serializedSchema}),this.schedulePersist()}),{source:"user",scope:"document"})),this.disposables.add(e.listen((()=>{this.diffQueue.push(_m),this.schedulePersist()}),{scope:"session"})),this.connect(r,i),this.documentTypes=new Set(Object.values(this.store.schema.types).filter((e=>"document"===e.scope)).map((e=>e.typeName)))}debug(){this.isDebugging&&console.debug(...arguments)}async connect(e,t){let n;this.debug("connecting");try{n=await xm({persistenceKey:this.persistenceKey,sessionId:this.sessionId,didCancel:()=>this.didDispose})}catch(i){return t(i),window.alert("Oops! We could not access your browser's storage\u2014and the app won't work correctly without that. We now need to reload the page and try again.\n\nKeep seeing this message?\n\u2022 If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser."),void("undefined"!==typeof window&&window.location.reload())}if(this.debug("loaded data from store",n,"didDispose",this.didDispose),!this.didDispose)try{if(n){var o,r;const e=Object.fromEntries(n.records.map((e=>[e.id,e]))),i=null!==(o=n.sessionStateSnapshot)&&void 0!==o?o:function(e){const t=[];for(const s of Object.values(e)){var n;null!==(n=s.typeName)&&void 0!==n&&n.match(/^(instance.*|pointer|camera)$/)&&t.push(s)}const o=t.filter((e=>"instance"===e.typeName&&e.id!==Ta))[0];if(!o)return null;const r={version:$g,currentPageId:o.currentPageId,exportBackground:!!o.exportBackground,isFocusMode:!!o.isFocusMode,isDebugMode:!!o.isDebugMode,isToolLocked:!!o.isToolLocked,isGridMode:!1,pageStates:t.filter((e=>"instance_page_state"===e.typeName&&e.instanceId===o.id)).map((t=>{var n;const o=null!==(n=e[t.cameraId])&&void 0!==n?n:{x:0,y:0,z:1};return{pageId:t.pageId,camera:{x:o.x,y:o.y,z:o.z},selectedShapeIds:t.selectedShapeIds,focusedGroupId:t.focusedGroupId}}))};try{return Zg.validate(r),r}catch(i){return null}}(e),s=this.store.schema.migrateStoreSnapshot({store:e,schema:null!==(r=n.schema)&&void 0!==r?r:this.store.schema.serializeEarliestVersion()});if("error"===s.type)return console.error("failed to migrate store",s),void t(new Error("Failed to migrate store: ".concat(s.reason)));this.store.mergeRemoteChanges((()=>{this.store.put(Object.values(s.value).filter((e=>this.documentTypes.has(e.typeName))),"initialize")})),i&&Jg(this.store,i)}this.channel.onmessage=e=>{var n;let{data:o}=e;this.debug("got message",o);const r=o,i=((e,t)=>{if(e.schemaVersion>t.schemaVersion)return 1;if(e.schemaVersion<t.schemaVersion)return-1;if(e.storeVersion>t.storeVersion)return 1;if(e.storeVersion<t.storeVersion)return-1;for(const n of Object.keys(e.recordVersions)){const o=e.recordVersions[n],r=t.recordVersions[n];if(o.version>r.version)return 1;if(o.version<r.version)return-1;if("subTypeVersions"in o&&!("subTypeVersions"in r))return 1;if(!("subTypeVersions"in o)&&"subTypeVersions"in r)return-1;if("subTypeVersions"in o&&"subTypeVersions"in r)for(const e of Object.keys(o.subTypeVersions)){const t=o.subTypeVersions[e],n=r.subTypeVersions[e];if(t>n)return 1;if(t<n)return-1}}return 0})(this.serializedSchema,null!==(n=r.schema)&&void 0!==n?n:this.store.schema.serializeEarliestVersion());if(-1===i){var s,a;return Date.now()-this.initTime<5e3?void t(new Error("Schema mismatch, please close other tabs and reload the page")):(this.debug("reloading"),this.isReloading=!0,void(null===(s=window)||void 0===s||null===(s=s.location)||void 0===s||null===(a=s.reload)||void 0===a||a.call(s)))}if(1===i)return this.debug("telling them to reload"),this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.shouldDoFullDBWrite=!0,void this.persistIfNeeded();"diff"===r.type&&(this.debug("applying diff"),Nr((()=>{this.store.mergeRemoteChanges((()=>{this.store.applyDiff(r.changes),this.store.ensureStoreIsUsable()}))})))},this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.disposables.add((()=>{this.channel.close()})),e(this)}catch(s){if(this.debug("error loading data from store",s),this.didDispose)return;return void t(s)}}close(){this.debug("closing"),this.didDispose=!0,this.disposables.forEach((e=>e()))}schedulePersist(){this.debug("schedulePersist",this.scheduledPersistTimeout),this.scheduledPersistTimeout||(this.scheduledPersistTimeout=setTimeout((()=>{this.scheduledPersistTimeout=null,this.persistIfNeeded()}),this.didLastWriteError?1e4:350))}persistIfNeeded(){this.debug("persistIfNeeded",{isPersisting:this.isPersisting,isReloading:this.isReloading,shouldDoFullDBWrite:this.shouldDoFullDBWrite,diffQueueLength:this.diffQueue.length,storeIsPossiblyCorrupt:this.store.isPossiblyCorrupted()}),this.scheduledPersistTimeout&&(clearTimeout(this.scheduledPersistTimeout),this.scheduledPersistTimeout=null),this.isPersisting||this.isReloading||this.store.isPossiblyCorrupted()||(this.shouldDoFullDBWrite||this.diffQueue.length>0)&&this.doPersist()}async doPersist(){hi(!this.isPersisting,"persist already in progress"),this.isPersisting=!0,this.debug("doPersist start");const e=this.diffQueue;this.diffQueue=[];try{if(this.shouldDoFullDBWrite)this.shouldDoFullDBWrite=!1,await async function(e){let{persistenceKey:t,schema:n,snapshot:o,sessionId:r,sessionStateSnapshot:i,didCancel:s}=e;const a=vm+t;await wm(a,(async e=>{const t=e.transaction([bm.Records,bm.Schema,bm.SessionState],"readwrite"),a=t.objectStore(bm.Records),l=t.objectStore(bm.Schema),c=t.objectStore(bm.SessionState);await a.clear();for(const[n,r]of Object.entries(o))await a.put(r,n);if(l.put(n.serialize(),bm.Schema),i&&r?c.put({snapshot:i,updatedAt:Date.now(),id:r},r):(i||r)&&console.error("sessionStateSnapshot and instanceId must be provided together"),null!==s&&void 0!==s&&s())return t.abort();await t.done}))}({persistenceKey:this.persistenceKey,schema:this.store.schema,snapshot:this.store.serialize(),didCancel:()=>this.didDispose,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()});else{const t=gs(e.filter((e=>e!==_m)));await async function(e){let{persistenceKey:t,schema:n,changes:o,sessionId:r,sessionStateSnapshot:i,didCancel:s}=e;const a=vm+t;await wm(a,(async e=>{const t=e.transaction([bm.Records,bm.Schema,bm.SessionState],"readwrite"),a=t.objectStore(bm.Records),l=t.objectStore(bm.Schema),c=t.objectStore(bm.SessionState);for(const[n,r]of Object.entries(o.added))await a.put(r,n);for(const[n,r]of Object.values(o.updated))await a.put(r,r.id);for(const n of Object.keys(o.removed))await a.delete(n);if(l.put(n.serialize(),bm.Schema),i&&r?c.put({snapshot:i,updatedAt:Date.now(),id:r},r):(i||r)&&console.error("sessionStateSnapshot and instanceId must be provided together"),null!==s&&void 0!==s&&s())return t.abort();await t.done}))}({persistenceKey:this.persistenceKey,changes:t,schema:this.store.schema,didCancel:()=>this.didDispose,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()})}this.didLastWriteError=!1}catch(t){this.shouldDoFullDBWrite=!0,this.didLastWriteError=!0,console.error("failed to store changes in indexed db",t),window.alert("Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.\n\nKeep seeing this message?\n\u2022 If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser.\n\u2022 If your hard disk is full, try clearing up some space and then reload the page."),"undefined"!==typeof window&&window.location.reload()}this.isPersisting=!1,this.debug("doPersist end"),this.schedulePersist()}}function Em(e){const t=function(e){let{initialData:t,defaultName:n="",...o}=e;const r="schema"in o&&o.schema?o.schema:jc({shapes:(i=_f("shapeUtils"in o&&o.shapeUtils?o.shapeUtils:[]),Object.fromEntries(i.map((e=>[e.type,{props:e.props,migrations:e.migrations}]))))});var i;return new fs({schema:r,initialData:t,props:{defaultName:n}})}(e);return e.snapshot&&t.loadSnapshot(e.snapshot),{store:t,opts:e}}function Im(t){const[n,o]=(0,e.useState)((()=>Em(t)));if(!ji(n.opts,t)){const e=Em(t);return o(e),e.store}return n.store}let Tm=!1;if("undefined"!==typeof window){const e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),n=!!e.match(/WebKit/i);Tm=t&&n&&!e.match(/CriOS/i)}const Pm=[],Am=[],Mm=(0,e.memo)((function(t){var n,o;let{store:r,components:i,className:s,user:a,...l}=t;const[c,d]=e.useState(null),u=(0,e.useMemo)((()=>null!==a&&void 0!==a?a:ef()),[a]),h=void 0===(null===i||void 0===i?void 0:i.ErrorFallback)?Bp:null===i||void 0===i?void 0:i.ErrorFallback,p={...l,shapeUtils:null!==(n=l.shapeUtils)&&void 0!==n?n:Pm,tools:null!==(o=l.tools)&&void 0!==o?o:Am,components:i};return(0,Rc.jsx)("div",{ref:d,draggable:!1,className:Nc("tl-container tl-theme__light",s),onPointerDown:Xd,tabIndex:-1,children:(0,Rc.jsx)(Fc,{fallback:h,onError:e=>mi(e,{tags:{origin:"react.tldraw-before-app"}}),children:c&&(0,Rc.jsx)(Qd,{container:c,children:(0,Rc.jsx)(Ap,{overrides:i,children:r?r instanceof fs?(0,Rc.jsx)(Lm,{...p,store:r,user:u}):(0,Rc.jsx)(Om,{...p,store:r,user:u}):(0,Rc.jsx)(jm,{...p,store:r,user:u})})})})})}));function jm(t){const{defaultName:n,snapshot:o,initialData:r,shapeUtils:i,persistenceKey:s,sessionId:a,user:l}=t,c=function(t){var n;let{persistenceKey:o,sessionId:r,...i}=t;const[s,a]=(0,e.useState)(null),l=Im(i);return(0,e.useEffect)((()=>{const e=Np();if(!o)return void a({id:e,storeWithStatus:{status:"not-synced",store:l}});a({id:e,storeWithStatus:{status:"loading"}});const t=t=>{a((n=>(null===n||void 0===n?void 0:n.id)===e?{id:e,storeWithStatus:t}:n))},n=new Cm(l,{sessionId:r,persistenceKey:o,onLoad(){t({store:l,status:"synced-local"})},onLoadError(e){t({status:"error",error:e})}});return()=>{a((t=>(null===t||void 0===t?void 0:t.id)===e?null:t)),n.close()}}),[o,l,r]),null!==(n=null===s||void 0===s?void 0:s.storeWithStatus)&&void 0!==n?n:{status:"loading"}}({shapeUtils:i,initialData:r,persistenceKey:s,sessionId:a,defaultName:n,snapshot:o});return(0,Rc.jsx)(Om,{...t,store:c,user:l})}const Om=(0,e.memo)((function(t){let{store:n,user:o,...r}=t;const i=Jd();(0,e.useLayoutEffect)((()=>{o.userPreferences.get().isDarkMode&&(i.classList.remove("tl-theme__light"),i.classList.add("tl-theme__dark"))}),[i,o]);const{LoadingScreen:s}=Mp();switch(n.status){case"error":throw n.error;case"loading":return s?(0,Rc.jsx)(s,{}):null}return(0,Rc.jsx)(Lm,{...r,store:n.store,user:o})}));function Lm(t){let{onMount:n,children:o,store:r,tools:i,shapeUtils:s,user:a,initialState:l,autoFocus:c=!0,inferDarkMode:d}=t;const{ErrorFallback:u}=Mp(),h=Jd(),[p,f]=(0,e.useState)(null);(0,e.useLayoutEffect)((()=>{const e=new Lg({store:r,shapeUtils:s,tools:i,getContainer:()=>h,user:a,initialState:l,inferDarkMode:d});return f(e),()=>{e.dispose()}}),[h,s,i,r,a,l,d]);const g=(0,e.useSyncExternalStore)((0,e.useCallback)((e=>p?(p.on("crash",e),()=>p.off("crash",e)):()=>{}),[p]),(()=>{var e;return null!==(e=null===p||void 0===p?void 0:p.getCrashingError())&&void 0!==e?e:null})),{Canvas:m}=Mp();return p?(0,Rc.jsx)(Fc,{fallback:u,onError:e=>p.annotateError(e,{origin:"react.tldraw",willCrashApp:!0}),children:g?(0,Rc.jsx)(Rm,{crashingError:g}):(0,Rc.jsx)(Uc.Provider,{value:p,children:(0,Rc.jsx)(Bm,{autoFocus:c,onMount:n,children:null!==o&&void 0!==o?o:m?(0,Rc.jsx)(m,{}):null})})}):null}function Bm(t){let{children:n,onMount:o,autoFocus:r}=t;return function(){const t=Hc(),n=Jd();e.useEffect((()=>{const e=e=>n.style.setProperty("--tl-zoom",e.toString()),o=fi(e,100),r=new Mr("useZoomCss",(()=>{t.getCurrentPageShapeIds().size<300?e(t.getZoomLevel()):o(t.getZoomLevel())}));return r.attach(),r.execute(),()=>{r.detach()}}),[t,n])}(),function(){const e=Hc(),t=Jd(),n=Ng();oi("useCursor",(()=>{const{type:o,rotation:r}=e.getInstanceState().cursor;Hg.includes(o)?t.style.setProperty("--tl-cursor","var(--tl-cursor-".concat(o,")")):t.style.setProperty("--tl-cursor",Wg(o,r,n?"white":"black"))}),[e,t,n])}(),function(){const t=Hc(),n=Jd(),o=Ng(),r=ri(Hd.forceSrgb);e.useEffect((()=>{o?(n.setAttribute("data-color-mode","dark"),n.classList.remove("tl-theme__light"),n.classList.add("tl-theme__dark")):(n.setAttribute("data-color-mode","light"),n.classList.remove("tl-theme__dark"),n.classList.add("tl-theme__light")),r?n.classList.add("tl-theme__force-sRGB"):n.classList.remove("tl-theme__force-sRGB")}),[t,n,r,o])}(),function(){const t=Hc();e.useEffect((()=>{if(Tm)return document.addEventListener("focusout",e),()=>document.removeEventListener("focusout",e);function e(e){(e.target instanceof HTMLInputElement&&"text"===e.target.type||e.target instanceof HTMLTextAreaElement)&&t.complete()}}),[t])}(),function(){const[t,n]=(0,e.useState)(0);(0,e.useEffect)((()=>n((e=>e+1))),[])}(),function(t){const n=Hc(),o=Jd();(0,e.useLayoutEffect)((()=>{t?(n.getInstanceState().isFocused||n.updateInstanceState({isFocused:!0}),n.getContainer().focus()):n.getInstanceState().isFocused&&n.updateInstanceState({isFocused:!1})}),[n,o,t])}(r),function(t){const n=Hc(),o=function(t){const n=(0,e.useRef)();return(0,e.useLayoutEffect)((()=>{n.current=t})),(0,e.useDebugValue)(t),(0,e.useCallback)((function(){const e=n.current;return hi(e,"fn does not exist"),e(...arguments)}),[])}((e=>{const n=null===t||void 0===t?void 0:t(e);return e.emit("mount"),window.tldrawReady=!0,n}));e.useLayoutEffect((()=>{if(n)return null===o||void 0===o?void 0:o(n)}),[n,o])}(o),(0,Rc.jsx)(Rc.Fragment,{children:n})}function Rm(e){let{crashingError:t}=e;throw t}function Nm(e){let{children:t}=e;return(0,Rc.jsx)("div",{className:"tl-loading",children:t})}function Dm(e){let{children:t}=e;return(0,Rc.jsx)("div",{className:"tl-loading",children:t})}function zm(e){let{children:t,className:n="",...o}=e;return(0,Rc.jsx)("div",{...o,className:"tl-html-container ".concat(n),children:t})}function Fm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{newPoint:o,handle:r,scaleX:i,scaleY:s}=t,{minWidth:a=1,maxWidth:l=1/0,minHeight:c=1,maxHeight:d=1/0}=n;let u=e.props.w*i,h=e.props.h*s;const p=new Gc(0,0);if(u>0){if(u<a){switch(r){case"top_left":case"left":case"bottom_left":p.x=u-a;break;case"top":case"bottom":p.x=(u-a)/2;break;default:p.x=0}u=a}}else if(p.x=u,u=-u,u<a){switch(r){case"top_left":case"left":case"bottom_left":p.x=-u;break;default:p.x=-a}u=a}if(h>0){if(h<c){switch(r){case"top_left":case"top":case"top_right":p.y=h-c;break;case"right":case"left":p.y=(h-c)/2;break;default:p.y=0}h=c}}else if(p.y=h,h=-h,h<c){switch(r){case"top_left":case"top":case"top_right":p.y=-h;break;default:p.y=-c}h=c}const{x:f,y:g}=p.rot(e.rotation).add(o);return{x:f,y:g,props:{w:Math.min(l,u),h:Math.min(d,h)}}}class Um extends yf{constructor(){super(...arguments),wr(this,"onResize",((e,t)=>Fm(e,t)))}getGeometry(e){return new vf({width:e.props.w,height:e.props.h,isFilled:!0})}getHandleSnapGeometry(e){return{points:this.getGeometry(e).bounds.cornersAndCenter}}}class Hm extends Pg{constructor(){super(...arguments),wr(this,"onPointerDown",(e=>{this.parent.transition("pointing",e)})),wr(this,"onEnter",(()=>{this.editor.setCursor({type:"cross",rotation:0})})),wr(this,"onCancel",(()=>{this.editor.setCurrentTool("select")}))}}wr(Hm,"id","idle");class Vm extends Pg{constructor(){super(...arguments),wr(this,"markId",""),wr(this,"wasFocusedOnEnter",!1),wr(this,"onEnter",(()=>{this.wasFocusedOnEnter=!this.editor.getIsMenuOpen()})),wr(this,"onPointerMove",(e=>{if(this.editor.inputs.isDragging){const{originPagePoint:t}=this.editor.inputs,n=this.parent.shapeType,o=bl();this.markId="creating:".concat(o),this.editor.mark(this.markId),this.editor.createShapes([{id:o,type:n,x:t.x,y:t.y,props:{w:1,h:1}}]).select(o),this.editor.setCurrentTool("select.resizing",{...e,target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:this.parent.id,onCreate:this.parent.onCreate})}})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onInterrupt",(()=>{this.cancel()}))}complete(){const{originPagePoint:e}=this.editor.inputs;if(!this.wasFocusedOnEnter)return;this.editor.mark(this.markId);const t=this.parent.shapeType,n=bl();this.editor.mark(this.markId),this.editor.createShapes([{id:n,type:t,x:e.x,y:e.y}]);const o=this.editor.getShape(n),{w:r,h:i}=this.editor.getShapeUtil(o).getDefaultProps(),s=new Gc(r/2,i/2),a=this.editor.getShapeParentTransform(o);a&&s.rot(-a.rotation()),this.editor.updateShapes([{id:n,type:t,x:o.x-s.x,y:o.y-s.y}]),this.editor.setSelectedShapes([n]),this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):this.editor.setCurrentTool("select.idle")}cancel(){this.parent.transition("idle")}}wr(Vm,"id","pointing");class Wm extends Pg{constructor(){super(...arguments),wr(this,"onCreate",void 0)}}function Km(e){const t=Hc();return ri("isCropping",(()=>t.getCroppingShapeId()===e),[t,e])}function Gm(e){const t=Hc();return ri("isEditing",(()=>t.getEditingShapeId()===e),[t,e])}function qm(t){const n=Hc();return(0,e.useMemo)((function(){let e,o;return{onPointerDown:e=>{if(e.isKilled)return;if(2===e.button)return void n.dispatch({type:"pointer",target:"selection",handle:t,name:"right_click",...$d(e)});if(0!==e.button)return;const o=Kd(e.currentTarget);qd(o,e),o.addEventListener("pointerup",(function t(){o.removeEventListener("pointerup",t),Yd(o,e)})),n.dispatch({name:"pointer_down",type:"pointer",target:"selection",handle:t,...$d(e)}),Xd(e)},onPointerMove:function(r){r.isKilled||0===r.button&&(r.clientX===e&&r.clientY===o||(e=r.clientX,o=r.clientY,n.dispatch({name:"pointer_move",type:"pointer",target:"selection",handle:t,...$d(r)})))},onPointerUp:e=>{e.isKilled||0===e.button&&n.dispatch({name:"pointer_up",type:"pointer",target:"selection",handle:t,...$d(e)})}}}),[n,t])}wr(Wm,"id","box"),wr(Wm,"initial","idle"),wr(Wm,"children",(()=>[Hm,Vm]));function Ym(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return Math.max(8,Math.ceil(e/t))}class Xm extends wh{constructor(e){super({...e,isFilled:!1,isClosed:!1}),wr(this,"_center",void 0),wr(this,"radius",void 0),wr(this,"start",void 0),wr(this,"end",void 0),wr(this,"measure",void 0),wr(this,"length",void 0),wr(this,"angleStart",void 0),wr(this,"angleEnd",void 0);const{center:t,radius:n,sweepFlag:o,largeArcFlag:r,start:i,end:s}=e;if(i.equals(s))throw Error("Arc must have different start and end points.");this.angleStart=Gc.Angle(t,i),this.angleEnd=Gc.Angle(t,s),this.measure=function(e,t,n,o){const r=(t-e)%Qc*2%Qc-(t-e)%Qc;return o?(Qc-Math.abs(r))*(n?1:-1):r}(this.angleStart,this.angleEnd,o,r),this.length=this.measure*n,this.start=i,this.end=s,this._center=t,this.radius=n}nearestPoint(e){const{_center:t,measure:n,radius:o,angleEnd:r,angleStart:i,start:s,end:a}=this,l=xd(n,i,r,t.angle(e));if(l<=0)return s;if(l>=1)return a;const c=t.clone().add(e.clone().sub(t).uni().mul(o));let d,u=1/0;for(const h of[s,a,c])e.dist(h)<u&&(d=h,u=e.dist(h));if(!d)throw Error("nearest point not found");return d}hitTestLineSegment(e,t,n){const{_center:o,radius:r,measure:i,angleStart:s,angleEnd:a}=this,l=rf(e,t,o,r);return null!==l&&l.some((e=>{const t=xd(i,s,a,o.angle(e));return t>=0&&t<=1}))}getVertices(){const{_center:e,measure:t,length:n,radius:o,angleStart:r}=this,i=[];for(let s=0,a=Ym(Math.abs(n));s<a+1;s++){const n=r+s/a*t;i.push(ud(e,o,n))}return i}}class $m extends wh{constructor(e){super({isClosed:!0,...e}),wr(this,"_center",void 0),wr(this,"radius",void 0),wr(this,"x",void 0),wr(this,"y",void 0),this.config=e;const{x:t=0,y:n=0,radius:o}=e;this.x=t,this.y=n,this._center=new Gc(o+t,o+n),this.radius=o}getBounds(){return new mh(this.x,this.y,2*this.radius,2*this.radius)}getVertices(){const{_center:e,radius:t}=this,n=[];for(let o=0,r=Ym(Qc*t);o<r;o++){const i=o/r*Qc;n.push(ud(e,t,i))}return n}nearestPoint(e){const{_center:t,radius:n}=this;return t.equals(e)?Gc.AddXY(t,n,0):t.clone().add(e.clone().sub(t).uni().mul(n))}hitTestLineSegment(e,t,n){const{_center:o,radius:r}=this;return null!==rf(e,t,o,r)}}class Zm extends gf{constructor(e){const{start:t,cp1:n,cp2:o,end:r}=e;super({...e,points:[t,r]}),wr(this,"a",void 0),wr(this,"b",void 0),wr(this,"c",void 0),wr(this,"d",void 0),this.a=t,this.b=n,this.c=o,this.d=r}getVertices(){const e=[],{a:t,b:n,c:o,d:r}=this;for(let i=0,s=10;i<=s;i++){const a=i/s;e.push(new Gc((1-a)*(1-a)*(1-a)*t.x+(1-a)*(1-a)*3*a*n.x+3*(1-a)*(a*a)*o.x+a*a*a*r.x,(1-a)*(1-a)*(1-a)*t.y+(1-a)*(1-a)*3*a*n.y+3*(1-a)*(a*a)*o.y+a*a*a*r.y))}return e}midPoint(){return function(e,t){const{a:n,b:o,c:r,d:i}=e;return new Gc((1-t)*(1-t)*(1-t)*n.x+(1-t)*(1-t)*3*t*o.x+3*(1-t)*(t*t)*r.x+t*t*t*i.x,(1-t)*(1-t)*(1-t)*n.y+(1-t)*(1-t)*3*t*o.y+3*(1-t)*(t*t)*r.y+t*t*t*i.y)}(this,.5)}nearestPoint(e){let t,n=1/0;for(const o of this.segments){const r=o.nearestPoint(e),i=r.dist(e);i<n&&(t=r,n=i)}if(!t)throw Error("nearest point not found");return t}}class Qm extends wh{constructor(e){super({...e,isClosed:!1,isFilled:!1}),wr(this,"points",void 0),wr(this,"_segments",void 0),wr(this,"_length",void 0);const{points:t}=e;this.points=t}get segments(){if(!this._segments){this._segments=[];const{points:e}=this,t=e.length,n=t-2,o=1.25;for(let r=0;r<t-1;r++){const t=0===r?e[0]:e[r-1],i=e[r],s=e[r+1],a=r===n?s:e[r+2],l=i,c=0===r?t:new Gc(i.x+(s.x-t.x)/6*o,i.y+(s.y-t.y)/6*o),d=r===n?s:new Gc(s.x-(a.x-i.x)/6*o,s.y-(a.y-i.y)/6*o),u=s;this._segments.push(new Zm({start:l,cp1:c,cp2:d,end:u}))}}return this._segments}get length(){return this._length||(this._length=this.segments.reduce(((e,t)=>e+t.length),0)),this._length}getVertices(){const e=this.segments.reduce(((e,t)=>e.concat(t.vertices)),[]);return e.push(this.points[this.points.length-1]),e}nearestPoint(e){let t,n=1/0;for(const o of this.segments){const r=o.nearestPoint(e),i=r.dist(e);i<n&&(t=r,n=i)}if(!t)throw Error("nearest point not found");return t}hitTestLineSegment(e,t,n){return this.segments.some((o=>o.hitTestLineSegment(e,t,n)))}}class Jm extends wh{constructor(e){super({...e,isClosed:!0}),wr(this,"w",void 0),wr(this,"h",void 0),wr(this,"_edges",void 0),this.config=e;const{width:t,height:n}=e;this.w=t,this.h=n}get edges(){if(!this._edges){const{vertices:e}=this;this._edges=[];for(let t=0,n=e.length;t<n;t++){const o=e[t],r=e[(t+1)%n];this._edges.push(new ff({start:o,end:r}))}}return this._edges}getVertices(){const e=Math.max(1,this.w)/2,t=Math.max(1,this.h)/2,n=Math.pow(e-t,2)/Math.pow(e+t,2),o=Ym($c*(e+t)*(1+3*n/(10+Math.sqrt(4-3*n)))),r=Qc/o,i=Math.cos(r),s=Math.sin(r);let a=0,l=1,c=0,d=1;const u=Array(o);for(let h=0;h<o;h++)u[h]=new Gc(e+e*l,t+t*a),c=s*l+i*a,d=i*l-s*a,a=c,l=d;return u}nearestPoint(e){let t,n=1/0;for(const o of this.edges){const r=o.nearestPoint(e),i=r.dist(e);i<n&&(t=r,n=i)}if(!t)throw Error("nearest point not found");return t}hitTestLineSegment(e,t,n){return this.edges.some((o=>o.hitTestLineSegment(e,t,n)))}getBounds(){return new mh(0,0,this.w,this.h)}}class ev extends Jm{constructor(e){super({...e}),this.config=e}getVertices(){const e=Math.max(1,this.w),t=Math.max(1,this.h),n=e/2,o=t/2,r=Array(18);if(t>e)for(let i=0;i<9;i++){const e=$c*i/8-$c,o=$c*i/8;r[i]=new Gc(n+n*Math.cos(e),n+n*Math.sin(e)),r[i+9]=new Gc(n+n*Math.cos(o),t-n+n*Math.sin(o))}else for(let i=0;i<9;i++){const n=$c*i/8-Zc,s=Zc+$c*-i/8;r[i]=new Gc(e-o+o*Math.cos(n),t-o+o*Math.sin(n)),r[i+9]=new Gc(o-o*Math.cos(s),t-o+o*Math.sin(s))}return r}}function tv(e,t,n,o,r){const i=Rd,s=n?Nd:0,a=e-s,l=e+s,c=o?0:i,d=r?t:t-i;return a<c?Math.min(1,(c-a)/i):l>d?-Math.min(1,(l-d)/i):0}function nv(e){if(!e.inputs.isDragging||e.inputs.isPanning||!e.getInstanceState().canMoveCamera)return;const{inputs:{currentScreenPoint:{x:t,y:n}}}=e,o=e.getZoomLevel(),r=e.getViewportScreenBounds(),i=r.w<1e3?.612:1,s=r.h<1e3?.612:1,{isCoarsePointer:a,insets:[l,c,d,u]}=e.getInstanceState(),h=tv(t,r.w,a,u,c),p=tv(n,r.h,a,l,d);if(0===h&&0===p)return;const f=20*e.user.getEdgeScrollSpeed(),g=f*h*i/o,m=f*p*s/o,v=e.getCamera();e.setCamera({x:v.x+g,y:v.y+m})}"undefined"!==typeof window&&(window.__tldraw__hardReset=async function(){let{shouldReload:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};sessionStorage.clear(),await Promise.all(Sm().map((e=>function(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),um(n).then((()=>{}))}(e)))),localStorage.clear(),e&&window.location.reload()});const ov=()=>{const e=Hc();return ri("threeStackableItems",(()=>function(e){return e.getSelectedShapeIds().map((t=>e.getShape(t))).filter((t=>!!t&&(!e.isShapeOfType(t,"arrow")||"binding"!==t.props.start.type)&&(!e.isShapeOfType(t,"arrow")||"binding"!==t.props.end.type)))}(e).length>2),[e])},rv=()=>{const e=Hc();return ri("allow group",(()=>{const t=e.getSelectedShapes();if(t.length<2)return!1;for(const n of t)if(e.isShapeOfType(n,"arrow")){const{start:e,end:o}=n.props;if("binding"===e.type&&!t.some((t=>t.id===e.boundShapeId)))return!1;if("binding"===o.type&&!t.some((e=>e.id===o.boundShapeId)))return!1}return!0}),[e])},iv=()=>{const e=Hc();return ri("allowUngroup",(()=>e.getSelectedShapeIds().some((t=>{var n;return"group"===(null===(n=e.getShape(t))||void 0===n?void 0:n.type)}))),[e])},sv="undefined"!==typeof window&&"navigator"in window&&Boolean(navigator.clipboard)&&Boolean(navigator.clipboard.read);function av(e,t){const n=Hc();return ri("selectedShapes",(()=>{const o=n.getSelectedShapes().filter((e=>!n.isShapeOrAncestorLocked(e))).length;return void 0===e?void 0===t?o:o<=t:void 0===t?o>=e:o>=e&&o<=t}),[n])}function lv(){const e=Hc();return ri("hasLinkShapeSelected",(()=>{const t=e.getOnlySelectedShape();return!(!t||"embed"===t.type||!("url"in t.props))}),[e])}function cv(){const e=Hc();return ri("useCanRedo",(()=>e.getCanRedo()),[e])}function dv(){const e=Hc();return ri("useCanUndo",(()=>e.getCanUndo()),[e])}function uv(e){let{children:t}=e;const n=Hc();return ri("shouldDisplayHandles",(()=>n.isInAny("select.idle","select.pointing_handle")),[n])?(0,Rc.jsx)("svg",{className:"tl-user-handles tl-overlays__item",children:t}):null}function hv(e){let{shapeId:t}=e;const n=Hc(),{ShapeIndicator:o}=Mp(),r=ri("show hovered",(()=>n.isIn("select.editing_shape")?n.getHoveredShapeId()!==n.getEditingShapeId():n.isInAny("select.idle")),[n]);return o&&r?(0,Rc.jsx)(o,{className:"tl-user-indicator__hovered",shapeId:t}):null}const{PI:pv}=Math,fv=pv+1e-4;function gv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{size:n=16,smoothing:o=.5}=t;if(0===e.length||n<=0)return{left:[],right:[]};const r=e[0],i=e[e.length-1],s=i.runningLength,a=Math.pow(n*o,2),l=[],c=[];let d,u=e[0].vector,h=e[0].point,p=h,f=h,g=p,m=!1;for(let v=0;v<e.length;v++){d=e[v];const{point:t,vector:n}=e[v],o=d.vector.dpr(u),y=(v<e.length-1?e[v+1]:e[v]).vector,b=v<e.length-1?y.dpr(d.vector):1,w=null!==b&&b<.2;if(o<0&&!m||w){if(b>-.62&&s-d.runningLength>d.radius){const e=u.clone().mul(d.radius);u.clone().cpr(y)<0?(f=Gc.Add(t,e),g=Gc.Sub(t,e)):(f=Gc.Sub(t,e),g=Gc.Add(t,e)),l.push(f),c.push(g)}else{const e=u.clone().mul(d.radius).per(),t=Gc.Sub(d.input,e);for(let n=1/13,o=0;o<1;o+=n)f=Gc.RotWith(t,d.input,fv*o),l.push(f),g=Gc.RotWith(t,d.input,fv+fv*-o),c.push(g)}h=f,p=g,w&&(m=!0);continue}if(m=!1,d===r||d===i){const e=Gc.Per(n).mul(d.radius);l.push(Gc.Sub(t,e)),c.push(Gc.Add(t,e));continue}const x=Gc.Lrp(y,n,b).per().mul(d.radius);f=Gc.Sub(t,x),(v<=1||Gc.Dist2(h,f)>a)&&(l.push(f),h=f),g=Gc.Add(t,x),(v<=1||Gc.Dist2(p,g)>a)&&(c.push(g),p=g),u=n}return{left:l,right:c}}function mv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{size:n=16,start:o={},end:r={},last:i=!1}=t,{cap:s=!0}=o,{cap:a=!0}=r;if(0===e.length||n<=0)return[];const l=e[0],c=e[e.length-1],d=c.runningLength,u=!1===o.taper?0:!0===o.taper?Math.max(n,d):o.taper,h=!1===r.taper?0:!0===r.taper?Math.max(n,d):r.taper,{left:p,right:f}=gv(e,t),g=l.point,m=e.length>1?e[e.length-1].point:Gc.AddXY(l.point,1,1);if(1===e.length&&(!u&&!h||i)){const e=Gc.Add(g,Gc.Sub(g,m).uni().per().mul(-l.radius)),t=[];for(let n=1/13,o=n;o<=1;o+=n)t.push(Gc.RotWith(e,g,2*fv*o));return t}const v=[];if(u||h&&1===e.length);else if(s)for(let w=1/8,x=w;x<=1;x+=w){const e=Gc.RotWith(f[0],g,fv*x);v.push(e)}else{const e=Gc.Sub(p[0],f[0]),t=Gc.Mul(e,.5),n=Gc.Mul(e,.51);v.push(Gc.Sub(g,t),Gc.Sub(g,n),Gc.Add(g,n),Gc.Add(g,t))}const y=[],b=c.vector.clone().per().neg();if(h||u&&1===e.length)y.push(m);else if(a){const e=Gc.Add(m,Gc.Mul(b,c.radius));for(let t=1/29,n=t;n<1;n+=t)y.push(Gc.RotWith(e,m,3*fv*n))}else y.push(Gc.Add(m,Gc.Mul(b,c.radius)),Gc.Add(m,Gc.Mul(b,.99*c.radius)),Gc.Sub(m,Gc.Mul(b,.99*c.radius)),Gc.Sub(m,Gc.Mul(b,c.radius)));return p.concat(y,f.reverse(),v)}const vv=.025,yv=.01;function bv(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{streamline:o=.5,size:r=16,simulatePressure:i=!1}=n;if(0===e.length)return[];const s=.15+.85*(1-o);let a=e.map(Gc.From),l=0;if(!i){let e=a[0];for(;e&&!(e.z>=vv);)a.shift(),e=a[0]}if(!i){let e=a[a.length-1];for(;e&&!(e.z>=yv);)a.pop(),e=a[a.length-1]}if(0===a.length)return[{point:Gc.From(e[0]),input:Gc.From(e[0]),pressure:i?.5:.15,vector:new Gc(1,1),distance:0,runningLength:0,radius:1}];let c=a[1];for(;c&&!(Gc.Dist(c,a[0])>r/3);)a[0].z=Math.max(a[0].z,c.z),a.splice(1,1),c=a[1];const d=a.pop();for(c=a[a.length-1];c&&!(Gc.Dist(c,d)>r/3);)a.pop(),c=a[a.length-1],l++;a.push(d);const u=n.last||!n.simulatePressure||a.length>1&&Gc.Dist(a[a.length-1],a[a.length-2])<r||l>0;if(2===a.length&&n.simulatePressure){const e=a[1];a=a.slice(0,-1);for(let t=1;t<5;t++){const n=Gc.Lrp(a[0],e,t/4);n.z=(a[0].z+(e.z-a[0].z))*t/4,a.push(n)}}const h=[{point:a[0],input:a[0],pressure:i?.5:a[0].z,vector:new Gc(1,1),distance:0,runningLength:0,radius:1}];let p,f,g=0,m=h[0];u&&o>0&&a.push(a[a.length-1].clone());for(let v=1,y=a.length;v<y;v++)p=!s||n.last&&v===y-1?a[v].clone():a[v].clone().lrp(m.point,1-s),m.point.equals(p)||(f=Gc.Dist(p,m.point),g+=f,v<4&&g<r||(m={input:a[v],point:p,pressure:i?.5:a[v].z,vector:Gc.Sub(m.point,p).uni(),distance:f,runningLength:g,radius:1},h.push(m)));if(null!==(t=h[1])&&void 0!==t&&t.vector&&(h[0].vector=h[1].vector.clone()),g<1){const e=Math.max(.5,...h.map((e=>e.pressure)));h.forEach((t=>t.pressure=e))}return h}const{min:wv}=Math,xv=.275;function Sv(e,t){const{size:n=16,thinning:o=.5,simulatePressure:r=!0,easing:i=(e=>e),start:s={},end:a={}}=t,{easing:l=Kc.easeOutQuad}=s,{easing:c=Kc.easeOutCubic}=a,d=e[e.length-1].runningLength;let u,h,p=e[0].pressure;if(!r&&d<n){const t=e.reduce(((e,t)=>Math.max(e,t.pressure)),.5);return e.forEach((e=>{e.pressure=t,e.radius=n*i(.5-o*(.5-e.pressure))})),e}{let t;for(let o=0,i=e.length;o<i&&(h=e[o],!(h.runningLength>5*n));o++){const e=wv(1,h.distance/n);if(r){const n=wv(1,1-e);t=wv(1,p+e*xv*(n-p))}else t=wv(1,p+.5*(h.pressure-p));p+=.5*(t-p)}for(let s=0;s<e.length;s++){if(h=e[s],o){let{pressure:e}=h;const t=wv(1,h.distance/n);if(r){const n=wv(1,1-t);e=wv(1,p+t*xv*(n-p))}else e=wv(1,p+t*xv*(e-p));h.radius=n*i(.5-o*(.5-e)),p=e}else h.radius=n/2;void 0===u&&(u=h.radius)}}const f=!1===s.taper?0:!0===s.taper?Math.max(n,d):s.taper,g=!1===a.taper?0:!0===a.taper?Math.max(n,d):a.taper;if(f||g)for(let m=0;m<e.length;m++){h=e[m];const{runningLength:t}=h,n=t<f?l(t/f):1,o=d-t<g?c((d-t)/g):1;h.radius=Math.max(.01,h.radius*Math.min(n,o))}return e}function _v(e){let{scribble:t,zoom:n,color:o,opacity:r,className:i}=e;if(!t.points.length)return null;const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return mv(Sv(bv(e,t),t),t)}(t.points,{size:t.size/n,start:{taper:t.taper,easing:Kc.linear},last:"stopping"===t.state,simulatePressure:!1,streamline:.32});let a;if(s.length<4){const e=t.size/n/2,{x:o,y:r}=t.points[t.points.length-1];a="M ".concat(o-e,",").concat(r," a ").concat(e,",").concat(e," 0 1,0 ").concat(2*e,",0 a ").concat(e,",").concat(e," 0 1,0 ").concat(2*-e,",0")}else a=up(s);return(0,Rc.jsx)("svg",{className:i?Nc("tl-overlays__item",i):i,children:(0,Rc.jsx)("path",{className:"tl-scribble",d:a,fill:null!==o&&void 0!==o?o:"var(--color-".concat(t.color,")"),opacity:null!==r&&void 0!==r?r:t.opacity})})}const kv=e=>{let{bounds:t,rotation:n}=e;const o=Hc();return ri("should display",(()=>o.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","text.resizing")),[o])?(0,Rc.jsx)(pp,{bounds:t,rotation:n}):null};function Cv(){const e=Hc();return ri("isReadonlyMode",(()=>e.getInstanceState().isReadonly),[e])}function Ev(e){let{size:t,width:n,height:o,hideAlternateHandles:r}=e;const i=vd(t/3),s=i/2;return(0,Rc.jsxs)("svg",{className:"tl-overlays__item",children:[(0,Rc.jsx)("polyline",{className:"tl-corner-crop-handle",points:"\n\t\t\t\t\t\t".concat(vd(0-s),",").concat(vd(t)," \n\t\t\t\t\t\t").concat(vd(0-s),",").concat(vd(0-s)," \n\t\t\t\t\t\t").concat(vd(t),",").concat(vd(0-s)),strokeWidth:i,"data-testid":"selection.crop.top_left","aria-label":"top_left handle"}),(0,Rc.jsx)("line",{className:Nc("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:vd(n/2-t),y1:vd(0-s),x2:vd(n/2+t),y2:vd(0-s),strokeWidth:i,"data-testid":"selection.crop.top","aria-label":"top handle"}),(0,Rc.jsx)("polyline",{className:Nc("tl-corner-crop-handle",{"tl-hidden":r}),points:"\n\t\t\t\t\t\t".concat(vd(n-t),",").concat(vd(0-s)," \n\t\t\t\t\t\t").concat(vd(n+s),",").concat(vd(0-s)," \n\t\t\t\t\t\t").concat(vd(n+s),",").concat(vd(t)),strokeWidth:i,"data-testid":"selection.crop.top_right","aria-label":"top_right handle"}),(0,Rc.jsx)("line",{className:Nc("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:vd(n+s),y1:vd(o/2-t),x2:vd(n+s),y2:vd(o/2+t),strokeWidth:i,"data-testid":"selection.crop.right","aria-label":"right handle"}),(0,Rc.jsx)("polyline",{className:"tl-corner-crop-handle",points:"\n\t\t\t\t\t\t".concat(vd(n+s),",").concat(vd(o-t)," \n\t\t\t\t\t\t").concat(vd(n+s),",").concat(vd(o+s),"\n\t\t\t\t\t\t").concat(vd(n-t),",").concat(vd(o+s)),strokeWidth:i,"data-testid":"selection.crop.bottom_right","aria-label":"bottom_right handle"}),(0,Rc.jsx)("line",{className:Nc("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:vd(n/2-t),y1:vd(o+s),x2:vd(n/2+t),y2:vd(o+s),strokeWidth:i,"data-testid":"selection.crop.bottom","aria-label":"bottom handle"}),(0,Rc.jsx)("polyline",{className:Nc("tl-corner-crop-handle",{"tl-hidden":r}),points:"\n\t\t\t\t\t\t".concat(vd(0+t),",").concat(vd(o+s)," \n\t\t\t\t\t\t").concat(vd(0-s),",").concat(vd(o+s),"\n\t\t\t\t\t\t").concat(vd(0-s),",").concat(vd(o-t)),strokeWidth:i,"data-testid":"selection.crop.bottom_left","aria-label":"bottom_left handle"}),(0,Rc.jsx)("line",{className:Nc("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:vd(0-s),y1:vd(o/2-t),x2:vd(0-s),y2:vd(o/2+t),strokeWidth:i,"data-testid":"selection.crop.left","aria-label":"left handle"})]})}const Iv=ti((function(t){var n,o;let{bounds:r,rotation:i}=t;const s=Hc(),a=(0,e.useRef)(null),l=Cv(),c=qm("top"),d=qm("right"),u=qm("bottom"),h=qm("left"),p=qm("top_left"),f=qm("top_right"),g=qm("bottom_right"),m=qm("bottom_left"),v=!s.getIsMenuOpen()&&"default"===s.getInstanceState().cursor.type,y=s.getInstanceState().isCoarsePointer,b=s.getOnlySelectedShape(),w=b&&s.isShapeOrAncestorLocked(b),x=b?s.getShapeUtil(b).expandSelectionOutlinePx(b):0;if(Wc(a,null===(n=r)||void 0===n?void 0:n.x,null===(o=r)||void 0===o?void 0:o.y,1,s.getSelectionRotation(),{x:-x,y:-x}),!r)return null;r=r.clone().expandBy(x).zeroFix();const S=s.getZoomLevel(),_=s.getInstanceState().isChangingStyle,k=r.width,C=r.height,E=8/S,I=k<2*E,T=C<2*E,P=k<4*E,A=C<4*E,M=k<5*E,j=C<5*E,O=y?1.75:1,L=6/S*O,B=(P?L/2:L)*(.75*O),R=(A?L/2:L)*(.75*O),N=(!b||!s.getShapeUtil(b).hideSelectionBoundsFg(b))&&!_;let D=N&&s.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape","select.crop.idle","select.crop.pointing_crop","select.pointing_resize_handle","select.pointing_crop_handle")||N&&s.isIn("select.resizing")&&b&&s.isShapeOfType(b,"text");b&&D&&s.environment.isFirefox&&s.isShapeOfType(b,"embed")&&(D=!1);const z=s.isInAny("select.pointing_crop_handle","select.crop.idle","select.crop.pointing_crop")&&!_&&!l,F=s.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.crop.idle")&&!_&&!l,U=!y&&!(I||T)&&(F||z)&&(!b||!s.getShapeUtil(b).hideRotateHandle(b))&&!w,H=y&&(!P||!A)&&(F||z)&&(!b||!s.getShapeUtil(b).hideRotateHandle(b))&&!w,V=F&&(!b||s.getShapeUtil(b).canResize(b)&&!s.getShapeUtil(b).hideResizeHandles(b))&&!z&&!w,W=I||T,K=I&&T,G=M||j,q=V||z,Y=!U,X=!F||!H,$=!F||!q,Z=!F||!q||W,Q=!F||!q||W,J=!F||!q||K&&!z;let ee=!0,te=!0;if(z)ee=G,te=G;else if(V){ee=W||K||y;const e=y&&b&&"text"===b.type;te=ee&&!e}const ne=Math.min(24/S,C-3*R),oe=F&&y&&b&&s.isShapeOfType(b,"text")&&ne*S>=4;return(0,Rc.jsx)("svg",{className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:(0,Rc.jsxs)("g",{ref:a,children:[D&&(0,Rc.jsx)("rect",{className:"tl-selection__fg__outline",width:vd(k),height:vd(C)}),(0,Rc.jsx)(Tv,{"data-testid":"selection.rotate.top-left",cx:0,cy:0,targetSize:L,corner:"top_left_rotate",cursor:v?Wg("nwse-rotate",i):void 0,isHidden:Y}),(0,Rc.jsx)(Tv,{"data-testid":"selection.rotate.top-right",cx:k+3*L,cy:0,targetSize:L,corner:"top_right_rotate",cursor:v?Wg("nesw-rotate",i):void 0,isHidden:Y}),(0,Rc.jsx)(Tv,{"data-testid":"selection.rotate.bottom-left",cx:0,cy:C+3*L,targetSize:L,corner:"bottom_left_rotate",cursor:v?Wg("swne-rotate",i):void 0,isHidden:Y}),(0,Rc.jsx)(Tv,{"data-testid":"selection.rotate.bottom-right",cx:k+3*L,cy:C+3*L,targetSize:L,corner:"bottom_right_rotate",cursor:v?Wg("senw-rotate",i):void 0,isHidden:Y}),(0,Rc.jsx)(Av,{"data-testid":"selection.rotate.mobile",cx:P?1.5*-L:k/2,cy:P?C/2:1.5*-L,size:E,isHidden:X}),(0,Rc.jsx)("rect",{className:Nc("tl-transparent",{"tl-hidden":ee}),"data-testid":"selection.resize.top","aria-label":"top target",pointerEvents:"all",x:0,y:vd(0-(A?2*R:R)),width:vd(k),height:vd(Math.max(1,2*R)),style:v?{cursor:Wg("ns-resize",i)}:void 0,...c}),(0,Rc.jsx)("rect",{className:Nc("tl-transparent",{"tl-hidden":te}),"data-testid":"selection.resize.right","aria-label":"right target",pointerEvents:"all",x:vd(k-(P?0:B)),y:0,height:vd(C),width:vd(Math.max(1,2*B)),style:v?{cursor:Wg("ew-resize",i)}:void 0,...d}),(0,Rc.jsx)("rect",{className:Nc("tl-transparent",{"tl-hidden":ee}),"data-testid":"selection.resize.bottom","aria-label":"bottom target",pointerEvents:"all",x:0,y:vd(C-(A?0:R)),width:vd(k),height:vd(Math.max(1,2*R)),style:v?{cursor:Wg("ns-resize",i)}:void 0,...u}),(0,Rc.jsx)("rect",{className:Nc("tl-transparent",{"tl-hidden":te}),"data-testid":"selection.resize.left","aria-label":"left target",pointerEvents:"all",x:vd(0-(P?2*B:B)),y:0,height:vd(C),width:vd(Math.max(1,2*B)),style:v?{cursor:Wg("ew-resize",i)}:void 0,...h}),(0,Rc.jsx)("rect",{className:Nc("tl-transparent",{"tl-hidden":$}),"data-testid":"selection.target.top-left","aria-label":"top-left target",pointerEvents:"all",x:vd(0-(P?2*B:1.5*B)),y:vd(0-(A?2*R:1.5*R)),width:vd(3*B),height:vd(3*R),style:v?{cursor:Wg("nwse-resize",i)}:void 0,...p}),(0,Rc.jsx)("rect",{className:Nc("tl-transparent",{"tl-hidden":Z}),"data-testid":"selection.target.top-right","aria-label":"top-right target",pointerEvents:"all",x:vd(k-(P?0:1.5*B)),y:vd(0-(A?2*R:1.5*R)),width:vd(3*B),height:vd(3*R),style:v?{cursor:Wg("nesw-resize",i)}:void 0,...f}),(0,Rc.jsx)("rect",{className:Nc("tl-transparent",{"tl-hidden":J}),"data-testid":"selection.target.bottom-right","aria-label":"bottom-right target",pointerEvents:"all",x:vd(k-(P?B:1.5*B)),y:vd(C-(A?R:1.5*R)),width:vd(3*B),height:vd(3*R),style:v?{cursor:Wg("nwse-resize",i)}:void 0,...g}),(0,Rc.jsx)("rect",{className:Nc("tl-transparent",{"tl-hidden":Q}),"data-testid":"selection.target.bottom-left","aria-label":"bottom-left target",pointerEvents:"all",x:vd(0-(P?3*B:1.5*B)),y:vd(C-(A?0:1.5*R)),width:vd(3*B),height:vd(3*R),style:v?{cursor:Wg("nesw-resize",i)}:void 0,...m}),V&&(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)("rect",{"data-testid":"selection.resize.top-left",className:Nc("tl-corner-handle",{"tl-hidden":$}),"aria-label":"top_left handle",x:vd(0-E/2),y:vd(0-E/2),width:vd(E),height:vd(E)}),(0,Rc.jsx)("rect",{"data-testid":"selection.resize.top-right",className:Nc("tl-corner-handle",{"tl-hidden":Z}),"aria-label":"top_right handle",x:vd(k-E/2),y:vd(0-E/2),width:vd(E),height:vd(E)}),(0,Rc.jsx)("rect",{"data-testid":"selection.resize.bottom-right",className:Nc("tl-corner-handle",{"tl-hidden":J}),"aria-label":"bottom_right handle",x:vd(k-E/2),y:vd(C-E/2),width:vd(E),height:vd(E)}),(0,Rc.jsx)("rect",{"data-testid":"selection.resize.bottom-left",className:Nc("tl-corner-handle",{"tl-hidden":Q}),"aria-label":"bottom_left handle",x:vd(0-E/2),y:vd(C-E/2),width:vd(E),height:vd(E)})]}),oe&&(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)("rect",{"data-testid":"selection.text-resize.left.handle",className:"tl-text-handle","aria-label":"bottom_left handle",x:vd(0-E/4),y:vd(C/2-ne/2),rx:E/4,width:vd(E/2),height:vd(ne)}),(0,Rc.jsx)("rect",{"data-testid":"selection.text-resize.right.handle",className:"tl-text-handle","aria-label":"bottom_left handle",rx:E/4,x:vd(k-E/4),y:vd(C/2-ne/2),width:vd(E/2),height:vd(ne)})]}),z&&(0,Rc.jsx)(Ev,{size:E,width:k,height:C,hideAlternateHandles:G})]})})})),Tv=function(e){let{cx:t,cy:n,targetSize:o,corner:r,cursor:i,isHidden:s,"data-testid":a}=e;const l=qm(r);return(0,Rc.jsx)("rect",{className:Nc("tl-transparent","tl-rotate-corner",{"tl-hidden":s}),"data-testid":a,"aria-label":"".concat(r," target"),pointerEvents:"all",x:vd(t-3*o),y:vd(n-3*o),width:vd(Math.max(1,3*o)),height:vd(Math.max(1,3*o)),cursor:i,...l})},Pv=Math.sqrt(Math.PI),Av=function(e){let{cx:t,cy:n,size:o,isHidden:r,"data-testid":i}=e;const s=qm("mobile_rotate"),a=Hc(),l=ri("zoom level",(()=>a.getZoomLevel()),[a]),c=Math.max(1/l*14,20/Math.max(1,l));return(0,Rc.jsxs)("g",{children:[(0,Rc.jsx)("circle",{"data-testid":i,pointerEvents:"all",className:Nc("tl-transparent","tl-mobile-rotate__bg",{"tl-hidden":r}),cx:t,cy:n,r:c,...s}),(0,Rc.jsx)("circle",{className:Nc("tl-mobile-rotate__fg",{"tl-hidden":r}),cx:t,cy:n,r:o/Pv})]})},Mv={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px"},jv={s:2,m:3.5,l:5,xl:10},Ov={s:18,m:24,l:36,xl:44},Lv={s:18,m:22,l:26,xl:32},Bv={s:18,m:20,l:24,xl:28},Rv={draw:"var(--tl-font-draw)",sans:"var(--tl-font-sans)",serif:"var(--tl-font-serif)",mono:"var(--tl-font-mono)"},Nv=20,Dv=4.25;function zv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Fv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zv(Object(n),!0).forEach((function(t){Uv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uv(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hv(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=i.call(n)).done)&&(a.push(o.value),a.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(e,t)||Kv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wv(e){return function(e){if(Array.isArray(e))return Gv(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Kv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kv(e,t){if(e){if("string"===typeof e)return Gv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gv(e,t):void 0}}function Gv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function qv(e){var t,n,o=e.sizes.shift(),r=Math.max(Math.ceil(o[0]),1),i=Math.max(Math.ceil(o[1]),1),s=[r-1,i-1,1,1],a=Date.now(),l="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;l?(t=new OffscreenCanvas(1,1),n=new OffscreenCanvas(r,i)):((t=document.createElement("canvas")).width=1,t.height=1,(n=document.createElement("canvas")).width=r,n.height=i);var c=t.getContext("2d"),d=n.getContext("2d");d&&(d.fillRect.apply(d,s),c.drawImage(n,r-1,i-1,1,1,0,0,1,1));var u=c&&0!==c.getImageData(0,0,1,1).data[3],h=Date.now()-a;return[t,n].forEach((function(e){e.height=0,e.width=0})),l?(postMessage({width:r,height:i,benchmark:h,isTestPass:u}),!u&&e.sizes.length&&qv(e)):u?e.onSuccess(r,i,h):(e.onError(r,i,h),e.sizes.length&&qv(e)),u}var Yv=[16384,14188,11402,11180,10836,8192,4096,1],Xv=[8388607,65535,32767,16384,8192,4096,1],$v=[4194303,65535,32767,16384,8192,4096,1],Zv=["onError","onSuccess"],Qv={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},Jv={};function ey(e){var t=e.width===e.height,n=1===e.height,o=1===e.width,r=[];if(e.width&&e.height)for(var i=e.min||Qv.min,s=e.step||Qv.step,a=Math.max(e.width,e.height);a>=i;){var l=t||n?a:1,c=t||o?a:1;r.push([l,c]),a-=s}else e.sizes.forEach((function(e){var i=t||n?e:1,s=t||o?e:1;r.push([i,s])}));return r}function ty(e){var t=window&&"HTMLCanvasElement"in window,n=window&&"OffscreenCanvas"in window,o=Date.now(),r=e.onError,i=e.onSuccess,s=Hv(e,Zv),a=null;if(!t)return!1;if(e.useWorker&&n){var l="\n            var canvasTest = ".concat(qv.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),c=new Blob([l],{type:"application/javascript"}),d=URL.createObjectURL(c);a=new Worker(d),URL.revokeObjectURL(d),a.onmessage=function(e){var t=e.data,n=t.width,r=t.height,i=t.benchmark;t.isTestPass?(Jv[o].onSuccess(n,r,i),delete Jv[o]):Jv[o].onError(n,r,i)}}return e.usePromise?new Promise((function(t,n){var l=Fv(Fv({},e),{},{onError:function(t,o,i){var s;if(0===e.sizes.length)s=!0;else{var a=Vv(e.sizes.slice(-1),1),l=Vv(a[0],2),c=l[0],d=l[1];s=t===c&&o===d}r(t,o,i),s&&n({width:t,height:o,benchmark:i})},onSuccess:function(e,n,o){i(e,n,o),t({width:e,height:n,benchmark:o})}});if(a){var c=l.onError,d=l.onSuccess;Jv[o]={onError:c,onSuccess:d},a.postMessage(s)}else qv(l)})):a?(Jv[o]={onError:r,onSuccess:i},void a.postMessage(s)):qv(e)}var ny={maxArea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ey({width:e.max,height:e.max,min:e.min,step:e.step,sizes:Wv(Yv)});return ty(Fv(Fv(Fv({},Qv),e),{},{sizes:t}))},maxHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ey({width:1,height:e.max,min:e.min,step:e.step,sizes:Wv(Xv)});return ty(Fv(Fv(Fv({},Qv),e),{},{sizes:t}))},maxWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ey({width:e.max,height:1,min:e.min,step:e.step,sizes:Wv($v)});return ty(Fv(Fv(Fv({},Qv),e),{},{sizes:t}))},test:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Fv(Fv({},Qv),e);return t.sizes=Wv(t.sizes),t.width&&t.height&&(t.sizes=[[t.width,t.height]]),ty(t)}};let oy=null;function ry(){return oy||(oy=async function(){const e=await ny.maxWidth({usePromise:!0}),t=await ny.maxHeight({usePromise:!0}),n=await ny.maxArea({usePromise:!0});return{maxWidth:e.width,maxHeight:t.height,maxArea:n.width*n.height}}()),oy}const iy=8192,sy=16777216;async function ay(e,t){if(e<=iy&&t<=iy&&e*t<=sy)return[e,t];const{maxWidth:n,maxHeight:o,maxArea:r}=await ry(),i=e/t;if(e>n&&(t=(e=n)/i),t>o&&(e=(t=o)*i),e*t>r){const n=Math.sqrt(r/(e*t));e*=n,t*=n}return[e,t]}function ly(e,t){let n=0;for(;e[t+n];)n+=e[t+n]+1;return n+1}function cy(e){const t=new Uint8Array(e);let n,o,r=0,i=0;if(!function(e){return"GIF"===new TextDecoder("ascii").decode(e.slice(0,3))}(e))return!1;for(n=128&t[10],o=7&t[10],r+=6,r+=7,r+=n?3*Math.pow(2,o+1):0;i<2&&r<t.length;)switch(t[r]){case 44:i+=1,n=128&t[r+9],o=7&t[r+9],r+=10,r+=n?3*Math.pow(2,o+1):0,r+=ly(t,r+1)+1;break;case 33:r+=2,r+=ly(t,r);break;default:r=t.length}return i>1}async function dy(e){return cy(await e.arrayBuffer())}const uy=e=>e.split("*").map((e=>function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e))).join(".+"),hy=(e,t)=>!!e.find((e=>{const n=new RegExp(uy(e));return t.match(n)}));function py(e){var t;return null!==(t=function(e){const t=new URL(e).host.replace("www.","");for(const n of Yl)if(hy(n.hostnames,t)){const t=n.toEmbedUrl(e);if(t)return{definition:n,embedUrl:t,url:e}}}(e))&&void 0!==t?t:function(e){const t=new URL(e).host.replace("www.","");for(const n of Yl)if(hy(n.hostnames,t)){const t=n.fromEmbedUrl(e);if(t)return{definition:n,url:t,embedUrl:e}}}(e)}function fy(e){try{return py(e)}catch(t){console.error(t)}}const gy="  ";class my{static insertTextFirefox(e,t){e.setRangeText(t,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:t,inputType:"insertText",isComposing:!1}))}static insert(e,t){const n=e.ownerDocument,o=n.activeElement;o!==e&&e.focus(),n.execCommand("insertText",!1,t)||my.insertTextFirefox(e,t),o===n.body?e.blur():o instanceof HTMLElement&&o!==e&&o.focus()}static set(e,t){e.select(),my.insert(e,t)}static getSelection(e){const{selectionStart:t,selectionEnd:n}=e;return e.value.slice(t||void 0,n||void 0)}static wrapSelection(e,t,n){const{selectionStart:o,selectionEnd:r}=e,i=my.getSelection(e);my.insert(e,t+i+(null!==n&&void 0!==n?n:t)),e.selectionStart=(o||0)+t.length,e.selectionEnd=(r||0)+t.length}static replace(e,t,n){let o=0;e.value.replace(t,(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];const s=o+r[r.length-2],a=r[0].length;e.selectionStart=s,e.selectionEnd=s+a;const l="string"===typeof n?n:n(...r);return my.insert(e,l),e.selectionStart=s,o+=l.length-a,l}))}static findLineEnd(e,t){const n=e.lastIndexOf("\n",t-1)+1;return"\t"!==e.charAt(n)?t:n+1}static indent(e){var t;const{selectionStart:n,selectionEnd:o,value:r}=e,i=r.slice(n,o),s=null===(t=/\n/g.exec(i))||void 0===t?void 0:t.length;if(s&&s>0){const t=r.lastIndexOf("\n",n-1)+1,i=e.value.slice(t,o-1),s=i.replace(/^|\n/g,"$&".concat(gy)),a=s.length-i.length;e.setSelectionRange(t,o-1),my.insert(e,s),e.setSelectionRange(n+1,o+a)}else my.insert(e,gy)}static unindent(e){const{selectionStart:t,selectionEnd:n,value:o}=e,r=o.lastIndexOf("\n",t-1)+1,i=my.findLineEnd(o,n),s=e.value.slice(r,i),a=s.replace(/(^|\n)(\t| {1,2})/g,"$1"),l=s.length-a.length;e.setSelectionRange(r,i),my.insert(e,a);const c=/\t| {1,2}/.exec(o.slice(r,t)),d=c?c[0].length:0,u=t-d;e.setSelectionRange(t-d,Math.max(u,n-l))}static indentCE(e){var t,n,o;const r=window.getSelection(),i=e.innerText,s=null!==(t=vy(e))&&void 0!==t?t:0,a=null!==(n=vy(e))&&void 0!==n?n:0,l=i.slice(s,a),c=null===(o=/\n/g.exec(l))||void 0===o?void 0:o.length;if(c&&c>0){const t=i.lastIndexOf("\n",s-1)+1,n=i.slice(t,a-1),o=n.replace(/^|\n/g,"$&".concat(gy)).length-n.length;r&&r.setBaseAndExtent(e,s+1,e,a+o)}else{const t=window.getSelection();e.innerText=i.slice(0,s)+gy+i.slice(s),null===t||void 0===t||t.setBaseAndExtent(e,s+1,e,s+2)}}static unindentCE(e){var t,n;const o=window.getSelection(),r=e.innerText,i=null!==(t=vy(e))&&void 0!==t?t:0,s=null!==(n=vy(e))&&void 0!==n?n:0,a=r.lastIndexOf("\n",i-1)+1,l=my.findLineEnd(r,s),c=r.slice(a,l),d=c.replace(/(^|\n)(\t| {1,2})/g,"$1"),u=c.length-d.length;if(o){o.setBaseAndExtent(e,a,e,l);const t=/\t| {1,2}/.exec(r.slice(a,i)),n=t?t[0].length:0,c=i-n;o.setBaseAndExtent(e,i-n,e,Math.max(c,s-u))}}static normalizeText(e){return e.replace(my.fixNewLines,"\n")}static normalizeTextForDom(e){return e.replace(my.fixNewLines,"\n").split("\n").map((e=>e||" ")).join("\n")}}function vy(e){if("undefined"===typeof window.getSelection)return;const t=window.getSelection();if(!t)return;let n=0;if(0!==t.rangeCount){const o=t.getRangeAt(0),r=o.cloneRange();r.selectNodeContents(e),r.setEnd(o.endContainer,o.endOffset),n=r.toString().length}return n}wr(my,"fixNewLines",/\r?\n|\r/g);const yy=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/;function by(e){return function(e){return e.replace(/[ \t]+$/gm,"").replace(/\n+$/,"")}(function(e){const t=e.split("\n");for(;t[0]&&0===t[0].trim().length;)t.shift();let n=1/0;for(const o of t)if(o.trim().length>0){const e=o.length-o.trimStart().length;n=Math.min(n,e)}return t.map((e=>e.slice(n))).join("\n")}(function(e){return e.replace(/\t/g,gy)}(e)))}const wy=(e,t)=>e.length<=t?e:e.substring(0,t-3)+"...";function xy(e,t,n){let{maxImageDimension:o,maxAssetSize:r,acceptedImageMimeTypes:i,acceptedVideoMimeTypes:s}=t,{toasts:a,msg:l}=n;e.registerExternalAssetHandler("file",(async e=>{let{file:t}=e;const n=t.name;let a=t;const l=i.includes(a.type),c=s.includes(a.type);hi(l||c,"File type not allowed: ".concat(a.type)),hi(a.size<=r,"File size too big: ".concat((a.size/1024).toFixed(),"kb > ").concat((r/1024).toFixed(),"kb")),"video/quicktime"===a.type&&(a=new Blob([a],{type:"video/mp4"}));let d=l?await wi.getImageSize(a):await wi.getVideoSize(a);const u="image/gif"===a.type?await dy(a):c,h=await function(e){const t=new DataView(e);let n=0;for(let o=0;o<t.byteLength;o++)n=(n<<5)-n+t.getUint8(o),n|=0;return n+""}(await a.arrayBuffer());if(isFinite(o)){const e=function(e,t){const n=e.w/t.w,o=e.h/t.h;return n<=1&&o<=1?e:n>o?{w:e.w/n,h:e.h/n}:{w:e.w/o,h:e.h/o}}(d,{w:o,h:o});d===e||"image/jpeg"!==a.type&&"image/png"!==a.type||(d=e)}"image/jpeg"!==a.type&&"image/png"!==a.type||(a=await async function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=await wi.usingObjectURL(e,wi.loadImage),{type:i=e.type,quality:s=.92}=o,[a,l]=await ay(Math.min(2*t,r.naturalWidth),Math.min(2*n,r.naturalHeight)),c=document.createElement("canvas");c.width=a,c.height=l;const d=pi(c.getContext("2d",{willReadFrequently:!0}),"Could not get canvas context");return d.imageSmoothingEnabled=!0,d.imageSmoothingQuality="high",d.drawImage(r,0,0,a,l),new Promise(((e,t)=>{c.toBlob((n=>{n?e(n):t(new Error("Could not resize image"))}),i,s)}))}(a,d.w,d.h,{type:a.type,quality:.92}));const p=ul.createId(h);return ul.create({id:p,type:l?"image":"video",typeName:"asset",props:{name:n,src:await wi.blobToDataUrl(a),w:d.w,h:d.h,mimeType:a.type,isAnimated:u}})})),e.registerExternalAssetHandler("url",(async e=>{let t,{url:n}=e;try{var o,r,i,s,c,d;const e=await fetch(n,{method:"GET",mode:"no-cors"}),a=await e.text(),l=(new DOMParser).parseFromString(a,"text/html");t={image:null!==(o=null===(r=l.head.querySelector('meta[property="og:image"]'))||void 0===r?void 0:r.getAttribute("content"))&&void 0!==o?o:"",title:null!==(i=null===(s=l.head.querySelector('meta[property="og:title"]'))||void 0===s?void 0:s.getAttribute("content"))&&void 0!==i?i:wy(n,32),description:null!==(c=null===(d=l.head.querySelector('meta[property="og:description"]'))||void 0===d?void 0:d.getAttribute("content"))&&void 0!==c?c:""}}catch(u){console.error(u),a.addToast({title:l("assets.url.failed")}),t={image:"",title:wy(n,32),description:""}}return{id:ul.createId(vi(n)),typeName:"asset",type:"bookmark",props:{src:n,description:t.description,image:t.image,title:t.title},meta:{}}})),e.registerExternalContentHandler("svg-text",(async t=>{let{point:n,text:o}=t;const r=null!==n&&void 0!==n?n:e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageCenter(),i=(new DOMParser).parseFromString(o,"image/svg+xml").querySelector("svg");if(!i)throw new Error("No <svg/> element present");let s=parseFloat(i.getAttribute("width")||"0"),a=parseFloat(i.getAttribute("height")||"0");if(!s||!a){document.body.appendChild(i);const e=i.getBoundingClientRect();document.body.removeChild(i),s=e.width,a=e.height}const l=await e.getAssetForExternalContent({type:"file",file:new File([o],"asset.svg",{type:"image/svg+xml"})});if(!l)throw Error("Could not create an asset");Sy(e,[l],r)})),e.registerExternalContentHandler("embed",(t=>{let{point:n,url:o,embed:r}=t;const i=null!==n&&void 0!==n?n:e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageCenter(),{width:s,height:a}=r,l=bl(),c={id:l,type:"embed",x:i.x-(s||450)/2,y:i.y-(a||450)/2,props:{w:s,h:a,url:o}};e.createShapes([c]).select(l)})),e.registerExternalContentHandler("files",(async t=>{let{point:n,files:o}=t;const c=null!==n&&void 0!==n?n:e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageCenter(),d=new Gc(c.x,c.y),u=[];await Promise.all(o.map((async(t,n)=>{if(t.size>r)return console.warn("File size too big: ".concat((t.size/1024).toFixed(),"kb > ").concat((r/1024).toFixed(),"kb")),null;if(!t.type)throw new Error("No mime type");if(!i.concat(s).includes(t.type))return console.warn("".concat(t.name," not loaded - Extension not allowed.")),null;try{const o=await e.getAssetForExternalContent({type:"file",file:t});if(!o)throw Error("Could not create an asset");u[n]=o}catch(o){return a.addToast({title:l("assets.files.upload-failed")}),console.error(o),null}}))),Sy(e,ai(u),d)})),e.registerExternalContentHandler("text",(async t=>{let{point:n,text:o}=t;const r=null!==n&&void 0!==n?n:e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageCenter(),i=e.getShapeUtil("text").getDefaultProps(),s=by(o);let a,l,c,d="middle";const u=s.split("\n").length>1,h=function(e){return yy.test(e)}(s);u&&(d=u?h?"end":"start":"middle");const p=e.textMeasure.measureText(s,{...Mv,fontFamily:Rv[i.font],fontSize:Ov[i.size],maxWidth:null}),f=Math.min(u?.9*e.getViewportPageBounds().width:920,Math.max(200,.9*e.getViewportPageBounds().width));if(p.w>f){const t=e.textMeasure.measureText(s,{...Mv,fontFamily:Rv[i.font],fontSize:Ov[i.size],maxWidth:f});a=t.w,l=t.h,c=!1,d=h?"end":"start"}else a=p.w,l=p.h,c=!0;r.y-l/2<e.getViewportPageBounds().minY+40&&(r.y=e.getViewportPageBounds().minY+40+l/2),e.createShapes([{id:bl(),type:"text",x:r.x-a/2,y:r.y-l/2,props:{text:s,align:d,autoSize:c,w:a}}])})),e.registerExternalContentHandler("url",(async t=>{let{point:n,url:o}=t;const r=fy(o);if(r)return e.putExternalContent({type:"embed",url:r.url,point:n,embed:r.definition});const i=null!==n&&void 0!==n?n:e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageCenter(),s=ul.createId(vi(o)),c=function(e,t,n){const o={id:bl(),type:"bookmark",x:n.x-150,y:n.y-160,opacity:1,props:{assetId:null,url:t}};return e.batch((()=>{e.createShapes([o]).select(o.id),_y(e,n)})),e.getShape(o.id)}(e,o,i);let d=e.getAsset(s),u=!1;if(!d){u=!0;try{const t=await e.getAssetForExternalContent({type:"url",url:o});if(!t)throw Error("Could not create an asset");d=t}catch(h){return void a.addToast({title:l("assets.url.failed")})}}e.batch((()=>{u&&e.createAssets([d]),e.updateShapes([{id:c.id,type:c.type,props:{assetId:d.id}}])}))}))}async function Sy(e,t,n){if(!t.length)return[];const o=Gc.From(n),r=[];for(const i of t)switch(i.type){case"bookmark":r.push({id:bl(),type:"bookmark",x:o.x-150,y:o.y-160,opacity:1,props:{assetId:i.id,url:i.props.src}}),o.x+=300;break;case"image":r.push({id:bl(),type:"image",x:o.x-i.props.w/2,y:o.y-i.props.h/2,opacity:1,props:{assetId:i.id,w:i.props.w,h:i.props.h}}),o.x+=i.props.w;break;case"video":r.push({id:bl(),type:"video",x:o.x-i.props.w/2,y:o.y-i.props.h/2,opacity:1,props:{assetId:i.id,w:i.props.w,h:i.props.h}}),o.x+=i.props.w}return e.batch((()=>{const o=t.filter((t=>!e.getAsset(t.id)));o.length&&e.createAssets(o),e.createShapes(r).select(...r.map((e=>e.id))),_y(e,n)})),r.map((e=>e.id))}function _y(e,t){const n=e.getViewportPageBounds();let o=e.getSelectionPageBounds();if(o){const n=o.center.sub(t);e.updateShapes(e.getSelectedShapes().map((t=>{const o=e.getShapeParentTransform(t).decompose().rotation,r=Gc.Rot(n,-o);return{id:t.id,type:t.type,x:t.x-r.x,y:t.y-r.y}})))}o=e.getSelectionPageBounds(),o&&!n.contains(o)&&e.zoomToSelection()}class ky extends Pg{constructor(){super(...arguments),wr(this,"onPointerDown",(e=>{this.parent.transition("pointing",e)})),wr(this,"onEnter",(()=>{this.editor.setCursor({type:"cross",rotation:0})})),wr(this,"onCancel",(()=>{this.editor.setCurrentTool("select")})),wr(this,"onKeyUp",(e=>{if("Enter"===e.key){if(this.editor.getInstanceState().isReadonly)return null;const n=this.editor.getOnlySelectedShape();var t;if(n&&this.editor.getShapeUtil(n).canEdit(n))this.editor.setCurrentTool("select"),this.editor.setEditingShape(n.id),null===(t=this.editor.root.getCurrent())||void 0===t||t.transition("editing_shape",{...e,target:"shape",shape:n})}}))}}wr(ky,"id","idle");class Cy extends Pg{constructor(){super(...arguments),wr(this,"shape",void 0),wr(this,"markId",""),wr(this,"onEnter",(()=>{this.didTimeout=!1;const e=this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{filter:e=>!e.isLocked&&this.editor.getShapeUtil(e).canBind(e),margin:0,hitInside:!0,renderingOnly:!0});e?this.editor.setHintingShapes([e.id]):this.createArrowShape(),this.startPreciseTimeout()})),wr(this,"onExit",(()=>{this.shape=void 0,this.editor.setHintingShapes([]),this.clearPreciseTimeout()})),wr(this,"onPointerMove",(()=>{if(this.editor.inputs.isDragging){if(this.shape||this.createArrowShape(),!this.shape)throw Error("expected shape");this.updateArrowShapeEndHandle(),this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,handle:this.editor.getShapeHandles(this.shape).find((e=>"end"===e.id)),isCreating:!0,onInteractionEnd:"arrow"})}})),wr(this,"onPointerUp",(()=>{this.cancel()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.cancel()})),wr(this,"onInterrupt",(()=>{this.cancel()})),wr(this,"preciseTimeout",-1),wr(this,"didTimeout",!1)}cancel(){this.shape&&this.editor.bailToMark(this.markId),this.editor.setHintingShapes([]),this.parent.transition("idle")}createArrowShape(){var e;const{originPagePoint:t}=this.editor.inputs,n=bl();this.markId="creating:".concat(n),this.editor.mark(this.markId),this.editor.createShapes([{id:n,type:"arrow",x:t.x,y:t.y}]);const o=this.editor.getShape(n);if(!o)throw Error("expected shape");const r=this.editor.getShapeHandles(o);if(!r)throw Error("expected handles for arrow");const i=this.editor.getShapeUtil("arrow"),s=this.shape,a=r.find((e=>"start"===e.id)),l=null===(e=i.onHandleDrag)||void 0===e?void 0:e.call(i,o,{handle:{...a,x:0,y:0},isPrecise:!0,initial:s});if(l){var c;const e=null===(c=l.props)||void 0===c?void 0:c.start;"binding"===(null===e||void 0===e?void 0:e.type)&&this.editor.setHintingShapes([e.boundShapeId]),this.editor.updateShapes([l],{squashing:!0})}this.shape=this.editor.getShape(n),this.editor.select(n)}updateArrowShapeEndHandle(){const e=this.shape;if(!e)throw Error("expected shape");const t=this.editor.getShapeHandles(e);if(!t)throw Error("expected handles for arrow");const n={...e,props:{...e.props,end:{...e.props.end,x:0,y:0}}};{var o;const i=this.editor.getShapeUtil("arrow"),s=this.shape,a=this.editor.getPointInShapeSpace(e,this.editor.inputs.currentPagePoint),l=t.find((e=>"end"===e.id)),c=null===(o=i.onHandleDrag)||void 0===o?void 0:o.call(i,n,{handle:{...l,x:a.x,y:a.y},isPrecise:!1,initial:s});if(c){var r;const e=null===(r=c.props)||void 0===r?void 0:r.end;"binding"===(null===e||void 0===e?void 0:e.type)&&this.editor.setHintingShapes([e.boundShapeId]),this.editor.updateShapes([c],{squashing:!0})}}{var i;const e=this.editor.getShapeUtil("arrow"),o=this.shape,r=t.find((e=>"start"===e.id)),s=null===(i=e.onHandleDrag)||void 0===i?void 0:i.call(e,n,{handle:{...r,x:0,y:0},isPrecise:this.didTimeout,initial:o});s&&this.editor.updateShapes([s],{squashing:!0})}this.shape=this.editor.getShape(e.id)}startPreciseTimeout(){this.preciseTimeout=window.setTimeout((()=>{this.getIsActive()&&(this.didTimeout=!0)}),320)}clearPreciseTimeout(){clearTimeout(this.preciseTimeout)}}wr(Cy,"id","pointing");class Ey extends Pg{constructor(){super(...arguments),wr(this,"shapeType","arrow")}}wr(Ey,"id","arrow"),wr(Ey,"initial","idle"),wr(Ey,"children",(()=>[ky,Cy]));class Iy extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"initialShape",void 0),wr(this,"shapeType","highlight"===this.parent.id?"highlight":"draw"),wr(this,"util",this.editor.getShapeUtil(this.shapeType)),wr(this,"isPen",!1),wr(this,"segmentMode","free"),wr(this,"didJustShiftClickToExtendPreviousShapeLine",!1),wr(this,"pagePointWhereCurrentSegmentChanged",{}),wr(this,"pagePointWhereNextSegmentChanged",null),wr(this,"lastRecordedPoint",{}),wr(this,"mergeNextPoint",!1),wr(this,"currentLineLength",0),wr(this,"canDraw",!1),wr(this,"markId",null),wr(this,"onEnter",(e=>{this.markId=null,this.info=e,this.canDraw=!this.editor.getIsMenuOpen(),this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.canDraw&&this.startShape()})),wr(this,"onPointerMove",(()=>{const{editor:{inputs:e}}=this;if(this.isPen!==e.isPen){if(this.markId)return this.editor.bailToMark(this.markId),void this.startShape()}else!this.canDraw&&e.isDragging&&(this.startShape(),this.canDraw=!0);this.canDraw&&(e.isPen?Gc.Dist(e.currentPagePoint,this.lastRecordedPoint)>=1/this.editor.getZoomLevel()?(this.lastRecordedPoint=e.currentPagePoint.clone(),this.mergeNextPoint=!1):this.mergeNextPoint=!0:this.mergeNextPoint=!1,this.updateShapes())})),wr(this,"onKeyDown",(e=>{if("Shift"===e.key)switch(this.segmentMode){case"free":this.segmentMode="starting_straight",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break;case"starting_free":this.segmentMode="starting_straight"}this.updateShapes()})),wr(this,"onKeyUp",(e=>{if("Shift"===e.key)switch(this.editor.snaps.clearIndicators(),this.segmentMode){case"straight":this.segmentMode="starting_free",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break;case"starting_straight":this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free"}this.updateShapes()})),wr(this,"onExit",(()=>{this.editor.snaps.clearIndicators(),this.pagePointWhereCurrentSegmentChanged=this.editor.inputs.currentPagePoint.clone()})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onInterrupt",(()=>{this.editor.inputs.isDragging||(this.markId&&this.editor.bailToMark(this.markId),this.cancel())}))}canClose(){return"highlight"!==this.shapeType}getIsClosed(e,t){if(!this.canClose())return!1;const n=jv[t],o=e[0].points[0],r=e[e.length-1],i=r.points[r.points.length-1];return o!==i&&this.currentLineLength>4*n&&Gc.Dist(o,i)<2*n}startShape(){const{inputs:{originPagePoint:e,isPen:t}}=this.editor;this.markId="draw start "+Np(),this.editor.mark(this.markId),this.isPen=t;const n=this.isPen?1.25*this.info.point.z:.5;if(this.segmentMode=this.editor.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=e.clone(),this.initialShape){const t=this.editor.getShape(this.initialShape.id);if(t&&"straight"===this.segmentMode){this.didJustShiftClickToExtendPreviousShapeLine=!0;const n=li(t.props.segments);if(!n)throw Error("Expected a previous segment!");const o=li(n.points);if(!o)throw Error("Expected a previous point!");const{x:r,y:i}=this.editor.getPointInShapeSpace(t,e).toFixed(),s=this.isPen?1.25*this.info.point.z:.5,a={type:this.segmentMode,points:[{x:o.x,y:o.y,z:+s.toFixed(2)},{x:r,y:i,z:+s.toFixed(2)}]},l=bh.applyToPoint(this.editor.getShapePageTransform(t.id),o);this.pagePointWhereCurrentSegmentChanged=l,this.pagePointWhereNextSegmentChanged=null;const c=[...t.props.segments,a];this.currentLineLength=this.getLineLength(c);const d={id:t.id,type:this.shapeType,props:{segments:c}};return this.canClose()&&(d.props.isClosed=this.getIsClosed(c,t.props.size)),void this.editor.updateShapes([d])}}this.pagePointWhereCurrentSegmentChanged=e.clone();const o=bl();this.editor.createShapes([{id:o,type:this.shapeType,x:e.x,y:e.y,props:{isPen:this.isPen,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+n.toFixed(2)}]}]}}]),this.currentLineLength=0,this.initialShape=this.editor.getShape(o)}updateShapes(){const{inputs:e}=this.editor,{initialShape:t}=this;if(!t)return;const{id:n,props:{size:o}}=t,r=this.editor.getShape(n);if(!r)return;const{segments:i}=r.props,{x:s,y:a,z:l}=this.editor.getPointInShapeSpace(r,e.currentPagePoint).toFixed(),c={x:s,y:a,z:this.isPen?+(1.25*l).toFixed(2):.5};switch(this.segmentMode){case"starting_straight":{const{pagePointWhereNextSegmentChanged:t}=this;if(null===t)throw Error("We should have a point where the segment changed");if(Gc.Dist(t,e.currentPagePoint)>4){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";const e=li(i);if(!e)throw Error("Expected a previous segment!");const t=li(e.points);if(!t)throw Error("Expected a previous last point!");let s;const a=this.editor.getPointInShapeSpace(r,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson();if("straight"===e.type){this.currentLineLength+=Gc.Dist(t,a),s={type:"straight",points:[{...t},a]};const e=this.editor.getShapePageTransform(r);this.pagePointWhereCurrentSegmentChanged=bh.applyToPoint(e,t)}else s={type:"straight",points:[a,c]};const l={id:n,type:this.shapeType,props:{segments:[...i,s]}};this.canClose()&&(l.props.isClosed=this.getIsClosed(i,o)),this.editor.updateShapes([l],{squashing:!0})}break}case"starting_free":{const{pagePointWhereNextSegmentChanged:t}=this;if(null===t)throw Error("We should have a point where the segment changed");if(Gc.Dist(t,e.currentPagePoint)>4){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";const e=i.slice(),t=li(e[e.length-1].points);if(!t)throw Error("No previous point!");const r={type:"free",points:[...Gc.PointsBetween(t,c,6).map((e=>e.toFixed().toJson()))]},s=[...e,r];this.currentLineLength=this.getLineLength(s);const a={id:n,type:this.shapeType,props:{segments:s}};this.canClose()&&(a.props.isClosed=this.getIsClosed(s,o)),this.editor.updateShapes([a],{squashing:!0})}break}case"straight":{const e=i.slice(),t=e[e.length-1],{pagePointWhereCurrentSegmentChanged:s}=this,{currentPagePoint:a,ctrlKey:l}=this.editor.inputs;if(!s)throw Error("We should have a point where the segment changed");let c,d=!1;this.didJustShiftClickToExtendPreviousShapeLine?this.editor.inputs.isDragging&&(d=!l,this.didJustShiftClickToExtendPreviousShapeLine=!1):d=!l;let u,h=this.editor.getPointInShapeSpace(r,a).toFixed().toJson(),p=!1;if((this.editor.user.getIsSnapMode()?!l:l)&&e.length>2){let e,t=8/this.editor.getZoomLevel();for(let n=0,o=i.length-2;n<o;n++){const o=i[n];if(!o)break;if("free"===o.type)continue;const r=o.points[0],s=li(o.points);if(!r||!s)continue;const a=Gc.NearestPointOnLineSegment(r,s,h),l=Gc.Dist(a,h);if(l<t){e=a.toFixed().toJson(),t=l,u=o;break}}e&&(p=!0,h=e)}if(p&&u){const e=this.editor.getShapePageTransform(r),t=u.points[0],n=li(u.points);if(!n)throw Error("Expected a last point!");const o=bh.applyToPoint(e,t),i=bh.applyToPoint(e,n),s=bh.applyToPoint(e,h);this.editor.snaps.setIndicators([{id:Np(),type:"points",points:[o,s,i]}])}else{if(this.editor.snaps.clearIndicators(),d){const e=Gc.Angle(s,a),t=cd(e,24)-e;c=Gc.RotWith(a,s,t)}else c=a;h=this.editor.getPointInShapeSpace(r,c).toFixed().toJson()}this.currentLineLength+=Gc.Dist(t.points[0],h),e[e.length-1]={...t,type:"straight",points:[t.points[0],h]};const f={id:n,type:this.shapeType,props:{segments:e}};this.canClose()&&(f.props.isClosed=this.getIsClosed(i,o)),this.editor.updateShapes([f],{squashing:!0});break}case"free":{const e=i.slice(),t=e[e.length-1],r=[...t.points];if(r.length&&this.mergeNextPoint){const{z:e}=r[r.length-1];r[r.length-1]={x:c.x,y:c.y,z:e?Math.max(e,c.z):c.z}}else this.currentLineLength+=Gc.Dist(r[r.length-1],c),r.push(c);e[e.length-1]={...t,points:r},this.currentLineLength=this.getLineLength(e);const s={id:n,type:this.shapeType,props:{segments:e}};if(this.canClose()&&(s.props.isClosed=this.getIsClosed(e,o)),this.editor.updateShapes([s],{squashing:!0}),r.length>500){this.editor.updateShapes([{id:n,type:this.shapeType,props:{isComplete:!0}}]);const{currentPagePoint:e}=this.editor.inputs,t=bl();this.editor.createShapes([{id:t,type:this.shapeType,x:yd(e.x),y:yd(e.y),props:{isPen:this.isPen,segments:[{type:"free",points:[{x:0,y:0,z:this.isPen?+(1.25*l).toFixed():.5}]}]}}]),this.initialShape=is(this.editor.getShape(t)),this.mergeNextPoint=!1,this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.currentLineLength=0}break}}}getLineLength(e){let t=0;for(const n of e)for(let e=0;e<n.points.length-1;e++){const o=n.points[e],r=n.points[e+1];t+=Gc.Sub(r,o).len2()}return Math.sqrt(t)}complete(){if(!this.canDraw)return void this.cancel();const{initialShape:e}=this;e&&(this.editor.updateShapes([{id:e.id,type:e.type,props:{isComplete:!0}}]),this.parent.transition("idle"))}cancel(){this.parent.transition("idle",this.info)}}wr(Iy,"id","drawing");class Ty extends Pg{constructor(){super(...arguments),wr(this,"onPointerDown",(e=>{this.parent.transition("drawing",e)})),wr(this,"onEnter",(()=>{this.editor.setCursor({type:"cross",rotation:0})})),wr(this,"onCancel",(()=>{this.editor.setCurrentTool("select")}))}}wr(Ty,"id","idle");class Py extends Pg{constructor(){super(...arguments),wr(this,"shapeType","draw"),wr(this,"onExit",(()=>{this.children.drawing.initialShape=void 0}))}}wr(Py,"id","draw"),wr(Py,"initial","idle"),wr(Py,"children",(()=>[Ty,Iy]));class Ay extends Wm{constructor(){super(...arguments),wr(this,"shapeType","frame"),wr(this,"onCreate",(e=>{if(!e)return;const t=this.editor.getShapePageBounds(e),n=[],o=this.editor.getShapeAncestors(e).map((e=>e.id));this.editor.getSortedChildIdsForParent(e.parentId).map((r=>{const i=this.editor.getShape(r);if(!i)return;if(i.id===e.id)return;if(i.isLocked)return;const s=this.editor.getShapePageBounds(i);s&&t.contains(s)&&function(e,t,n){if(t.includes(e.id))return!1;if(e.parentId===n.parentId)return!0;return!1}(i,o,e)&&n.push(i.id)})),this.editor.reparentShapes(n,e.id),this.editor.getInstanceState().isToolLocked?this.editor.setCurrentTool("frame"):this.editor.setCurrentTool("select.idle")}))}}wr(Ay,"id","frame"),wr(Ay,"initial","idle");class My extends Pg{constructor(){super(...arguments),wr(this,"onPointerDown",(e=>{this.parent.transition("pointing",e)})),wr(this,"onEnter",(()=>{this.editor.setCursor({type:"cross",rotation:0})})),wr(this,"onKeyUp",(e=>{if("Enter"===e.key){if(this.editor.getInstanceState().isReadonly)return null;const n=this.editor.getOnlySelectedShape();var t;if(n&&this.editor.getShapeUtil(n).canEdit(n))this.editor.setCurrentTool("select"),this.editor.setEditingShape(n.id),null===(t=this.editor.root.getCurrent())||void 0===t||t.transition("editing_shape",{...e,target:"shape",shape:n})}})),wr(this,"onCancel",(()=>{this.editor.setCurrentTool("select")}))}}wr(My,"id","idle");class jy extends Pg{constructor(){super(...arguments),wr(this,"markId",""),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onPointerMove",(e=>{if(this.editor.inputs.isDragging){const{originPagePoint:t}=this.editor.inputs,n=bl();this.markId="creating:".concat(n),this.editor.mark(this.markId),this.editor.createShapes([{id:n,type:"geo",x:t.x,y:t.y,props:{w:1,h:1,geo:this.editor.getStyleForNextShape(oc)}}]).select(n).setCurrentTool("select.resizing",{...e,target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"})}})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onInterrupt",(()=>{this.cancel()}))}complete(){const{originPagePoint:e}=this.editor.inputs,t=bl();this.markId="creating:".concat(t),this.editor.mark(this.markId),this.editor.createShapes([{id:t,type:"geo",x:e.x,y:e.y,props:{geo:this.editor.getStyleForNextShape(oc),w:1,h:1}}]);const n=this.editor.getShape(t);if(!n)return;const o="star"===n.props.geo?new mh(0,0,200,190):"cloud"===n.props.geo?new mh(0,0,300,180):new mh(0,0,200,200),r=o.center,i=this.editor.getShapeParentTransform(n);i&&r.rot(-i.rotation()),this.editor.select(t),this.editor.updateShapes([{id:n.id,type:"geo",x:n.x-r.x,y:n.y-r.y,props:{geo:this.editor.getStyleForNextShape(oc),w:o.width,h:o.height}}]),this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):this.editor.setCurrentTool("select",{})}cancel(){this.parent.transition("idle")}}wr(jy,"id","pointing");class Oy extends Pg{constructor(){super(...arguments),wr(this,"shapeType","geo")}}wr(Oy,"id","geo"),wr(Oy,"initial","idle"),wr(Oy,"children",(()=>[My,jy]));class Ly extends Pg{constructor(){super(...arguments),wr(this,"shapeType","highlight"),wr(this,"onExit",(()=>{this.children.drawing.initialShape=void 0}))}}wr(Ly,"id","highlight"),wr(Ly,"initial","idle"),wr(Ly,"children",(()=>[Ty,Iy]));class By extends Pg{constructor(){super(...arguments),wr(this,"shapeId",""),wr(this,"onEnter",(e=>{this.shapeId=e.shapeId,this.editor.setCursor({type:"cross",rotation:0})})),wr(this,"onPointerDown",(()=>{this.parent.transition("pointing",{shapeId:this.shapeId})})),wr(this,"onCancel",(()=>{this.editor.setCurrentTool("select")}))}}wr(By,"id","idle");class Ry extends Pg{constructor(){super(...arguments),wr(this,"shape",{}),wr(this,"markId",void 0),wr(this,"onEnter",(e=>{const{inputs:t}=this.editor,{currentPagePoint:n}=t;this.markId=void 0;const o=e.shapeId&&this.editor.getShape(e.shapeId);if(o&&t.shiftKey){this.markId="creating:".concat(o.id),this.editor.mark(this.markId),this.shape=o;const e=this.editor.getShapeHandles(this.shape);if(!e)return;const t=e.filter((e=>"vertex"===e.type)).sort(ns),r=t[t.length-1],i=t[t.length-2],s=bh.applyToPoint(this.editor.getShapeParentTransform(this.shape),new Gc(this.shape.x,this.shape.y)),a=Gc.Sub(n,s).addXY(.1,.1),l=is(this.shape.props.points);if(Gc.Dist(r,i)<2||Gc.Dist(a,r)<2)l[r.id]={id:r.id,index:r.index,x:a.x,y:a.y};else{const e=es(r.index);l[e]={id:e,index:e,x:a.x,y:a.y}}this.editor.updateShapes([{id:this.shape.id,type:this.shape.type,props:{points:l}}])}else{const e=bl();this.markId="creating:".concat(e),this.editor.mark(this.markId),this.editor.createShapes([{id:e,type:"line",x:n.x,y:n.y}]),this.editor.select(e),this.shape=this.editor.getShape(e)}})),wr(this,"onPointerMove",(()=>{if(this.shape&&this.editor.inputs.isDragging){const e=this.editor.getShapeHandles(this.shape);if(!e)throw this.markId&&this.editor.bailToMark(this.markId),Error("No handles found");const t=li(e);this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,isCreating:!0,handle:{...t,x:t.x-.1,y:t.y-.1},onInteractionEnd:"line"})}})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onInterrupt",(()=>{this.parent.transition("idle"),this.markId&&this.editor.bailToMark(this.markId),this.editor.snaps.clearIndicators()}))}complete(){this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clearIndicators()}cancel(){this.markId&&this.editor.bailToMark(this.markId),this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clearIndicators()}}wr(Ry,"id","pointing");class Ny extends Pg{constructor(){super(...arguments),wr(this,"shapeType","line")}}wr(Ny,"id","line"),wr(Ny,"initial","idle"),wr(Ny,"children",(()=>[By,Ry]));class Dy extends Pg{constructor(){super(...arguments),wr(this,"onPointerDown",(e=>{this.parent.transition("pointing",e)})),wr(this,"onEnter",(()=>{this.editor.setCursor({type:"cross",rotation:0})})),wr(this,"onCancel",(()=>{this.editor.setCurrentTool("select")}))}}wr(Dy,"id","idle");class zy extends Pg{constructor(){super(...arguments),wr(this,"dragged",!1),wr(this,"info",{}),wr(this,"wasFocusedOnEnter",!1),wr(this,"markId",""),wr(this,"shape",{}),wr(this,"onEnter",(()=>{this.wasFocusedOnEnter=!this.editor.getIsMenuOpen(),this.wasFocusedOnEnter&&(this.shape=this.createShape())})),wr(this,"onPointerMove",(e=>{this.editor.inputs.isDragging&&(this.wasFocusedOnEnter||(this.shape=this.createShape()),this.editor.setCurrentTool("select.translating",{...e,target:"shape",shape:this.shape,onInteractionEnd:"note",isCreating:!0,onCreate:()=>{this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape")}}))})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onInterrupt",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()}))}complete(){this.wasFocusedOnEnter&&(this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):(this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape",{...this.info,target:"shape",shape:this.shape})))}cancel(){this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}createShape(){const{inputs:{originPagePoint:e}}=this.editor,t=bl();this.markId="creating:".concat(t),this.editor.mark(this.markId),this.editor.createShapes([{id:t,type:"note",x:e.x,y:e.y}]).select(t);const n=this.editor.getShape(t),o=this.editor.getShapeGeometry(n).bounds;return this.editor.updateShapes([{id:t,type:"note",x:n.x-o.width/2,y:n.y-o.height/2}]),this.editor.getShape(t)}}wr(zy,"id","pointing");class Fy extends Pg{constructor(){super(...arguments),wr(this,"shapeType","note")}}function Uy(e){const t=e.getShapeAtPoint(e.inputs.currentPagePoint,{hitInside:!1,hitLabels:!1,margin:8/e.getZoomLevel(),renderingOnly:!0});if(!t)return e.setHoveredShape(null);let n;const o=e.getOutermostSelectableShape(t);return n=o===t||o.id===e.getFocusedGroupId()||e.getSelectedShapeIds().includes(o.id)?t:o,e.setHoveredShape(n.id)}wr(Fy,"id","note"),wr(Fy,"initial","idle"),wr(Fy,"children",(()=>[Dy,zy]));class Hy extends Pg{constructor(){super(...arguments),wr(this,"onPointerMove",(e=>{switch(e.target){case"shape":case"canvas":Uy(this.editor)}})),wr(this,"onPointerDown",(e=>{this.parent.transition("pointing",e)})),wr(this,"onEnter",(()=>{this.editor.setCursor({type:"cross",rotation:0})})),wr(this,"onKeyDown",(e=>{if("Enter"===e.key){if(this.editor.getInstanceState().isReadonly)return null;const n=this.editor.getOnlySelectedShape();var t;if(n&&this.editor.getShapeUtil(n).canEdit(n))this.editor.setCurrentTool("select"),this.editor.setEditingShape(n.id),null===(t=this.editor.root.getCurrent())||void 0===t||t.transition("editing_shape",{...e,target:"shape",shape:n})}})),wr(this,"onCancel",(()=>{this.editor.setCurrentTool("select")}))}}wr(Hy,"id","idle");class Vy extends Pg{constructor(){super(...arguments),wr(this,"shape",void 0),wr(this,"markId",""),wr(this,"onExit",(()=>{this.editor.setHintingShapes([])})),wr(this,"onPointerMove",(e=>{if(this.editor.inputs.isDragging){const{inputs:{originPagePoint:t}}=this.editor,n=bl();if(this.markId="creating:".concat(n),this.editor.mark(this.markId),this.editor.createShapes([{id:n,type:"text",x:t.x,y:t.y,props:{text:"",autoSize:!1,w:20}}]),this.editor.select(n),this.shape=this.editor.getShape(n),!this.shape)return;const{shape:o}=this;this.editor.setCurrentTool("select.resizing",{...e,target:"selection",handle:"right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:"text",onCreate:()=>{this.editor.setEditingShape(o.id),this.editor.setCurrentTool("select.editing_shape")}})}})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onComplete",(()=>{this.cancel()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onInterrupt",(()=>{this.cancel()}))}complete(){var e;this.editor.mark("creating text shape");const t=bl(),{x:n,y:o}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id:t,type:"text",x:n,y:o,props:{text:"",autoSize:!0}}]).select(t),this.editor.setEditingShape(t),this.editor.setCurrentTool("select"),null===(e=this.editor.root.getCurrent())||void 0===e||e.transition("editing_shape")}cancel(){this.parent.transition("idle"),this.editor.bailToMark(this.markId)}}wr(Vy,"id","pointing");class Wy extends Pg{constructor(){super(...arguments),wr(this,"shapeType","text")}}wr(Wy,"id","text"),wr(Wy,"initial","idle"),wr(Wy,"children",(()=>[Hy,Vy]));const Ky=[Wy,Py,Oy,Fy,Ny,Ay,Ey,Ly];function Gy(){return kl({isDarkMode:Ng()})}const qy=e.memo((function(e){let{theme:t,d:n,color:o,fill:r}=e;switch(r){case"none":return null;case"solid":return(0,Rc.jsx)("path",{fill:t[o].semi,d:n});case"semi":return(0,Rc.jsx)("path",{fill:t.solid,d:n});case"pattern":return(0,Rc.jsx)(Yy,{theme:t,color:o,fill:r,d:n})}})),Yy=function(e){let{d:t,color:n,theme:o}=e;const r=Hc(),i=ri("zoomLevel",(()=>r.getZoomLevel()),[r]),s=Math.ceil(i),a=r.getZoomLevel()<=.18;return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)("path",{fill:o[n].pattern,d:t}),(0,Rc.jsx)("path",{fill:a?o[n].semi:"url(#".concat(Pd["".concat(s,"_").concat(o.id)],")"),d:t})]})};function Xy(e){let{d:t,color:n,fill:o,theme:r}=e;if("none"===o)return;if("pattern"===o){const e=document.createElementNS("http://www.w3.org/2000/svg","g"),o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d",t),o.setAttribute("fill",r[n].pattern);const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",t),i.setAttribute("fill","url(#hash_pattern)"),e.appendChild(o),e.appendChild(i),e}const i=document.createElementNS("http://www.w3.org/2000/svg","path");switch(i.setAttribute("d",t),o){case"semi":i.setAttribute("fill",r.solid);break;case"solid":i.setAttribute("fill",r[n].semi)}return i}function $y(e,t){if(t){const n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.appendChild(t),n.appendChild(e),n}return e}function Zy(e,t,n){var o,r;const{padding:i=0}=n,s=document.createElementNS("http://www.w3.org/2000/svg","text");if(s.setAttribute("font-size",n.fontSize+"px"),s.setAttribute("font-family",n.fontFamily),s.setAttribute("font-style",n.fontStyle),s.setAttribute("font-weight",n.fontWeight),s.setAttribute("line-height",n.lineHeight*n.fontSize+"px"),s.setAttribute("dominant-baseline","mathematical"),s.setAttribute("alignment-baseline","mathematical"),0===t.length)return s;const a=mh.From(t[0].box);for(const{box:u}of t)a.union(u);const l=i+(null!==(o=n.offsetX)&&void 0!==o?o:0),c=(null!==(r=n.offsetY)&&void 0!==r?r:0)+n.fontSize/2+("start"===n.verticalTextAlign?i:"end"===n.verticalTextAlign?n.height-i-a.height:(Math.ceil(n.height)-a.height)/2);let d=null;for(const{text:u,box:h}of t){if(null!==d&&h.y>d){const e=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttribute("alignment-baseline","mathematical"),e.setAttribute("x",l+"px"),e.setAttribute("y",h.y+c+"px"),e.textContent="\n",s.appendChild(e)}const e=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttribute("alignment-baseline","mathematical"),e.setAttribute("x",h.x+l+"px"),e.setAttribute("y",h.y+c+"px");const t=u.replace(/\s/g,"\xa0");e.textContent=t,s.appendChild(e),d=h.y}return n.stroke&&n.strokeWidth&&(s.setAttribute("stroke",n.stroke),s.setAttribute("stroke-width",n.strokeWidth+"px")),n.fill&&s.setAttribute("fill",n.fill),s}function Qy(e){return{key:"".concat(Pl.id,":").concat(e),getElement:async()=>{const t=function(e){const t=Al[e];for(const n of document.fonts)if(t.includes(n.family))return n;return null}(e);if(!t)return null;const n=t.$$_url,o=t.$$_fontface;if(!n||!o)return null;const r=await(await fetch(n)).blob(),i=await new Promise(((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsDataURL(r)})),s=o.replace(n,i),a=document.createElementNS("http://www.w3.org/2000/svg","style");return a.textContent=s,a}}}function Jy(e,t){return{key:"".concat(Pl.id,":").concat(e),getElement:async()=>{if("pattern"!==e)return null;const n=8/12,o=document.createElement("div");return o.innerHTML='\n\t\t\t\t<svg>\n\t\t\t\t\t<defs>\n\t\t\t\t\t\t<mask id="hash_pattern_mask">\n\t\t\t\t\t\t\t<rect x="0" y="0" width="8" height="8" fill="white" />\n\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\tstrokeLinecap="round"\n\t\t\t\t\t\t\t\tstroke="black"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<line x1="'.concat(1*n,'" y1="').concat(2,'" x2="').concat(2,'" y2="').concat(1*n,'" />\n\t\t\t\t\t\t\t\t<line x1="').concat(5*n,'" y1="').concat(7*n,'" x2="').concat(7*n,'" y2="').concat(5*n,'" />\n\t\t\t\t\t\t\t\t<line x1="').concat(6,'" y1="').concat(11*n,'" x2="').concat(11*n,'" y2="').concat(6,'" />\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</mask>\n\t\t\t\t\t\t<pattern\n\t\t\t\t\t\t\tid="hash_pattern"\n\t\t\t\t\t\t\twidth="8"\n\t\t\t\t\t\t\theight="8"\n\t\t\t\t\t\t\tpatternUnits="userSpaceOnUse"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<rect x="0" y="0" width="8" height="8" fill="').concat(t.solid,'" mask="url(#hash_pattern_mask)" />\n\t\t\t\t\t\t</pattern>\n\t\t\t\t\t</defs>\n\t\t\t\t</svg>\n\t\t\t'),Array.from(o.querySelectorAll("defs > *"))}}}function eb(){return{key:"".concat(Pl.id,":pattern"),component:ib}}const tb=8,nb=(e,t,n)=>new Promise(((o,r)=>{const i=tb*t*e,s=document.createElement("canvas");s.width=i,s.height=i;const a=s.getContext("2d");if(!a)return;a.fillStyle=n?"#212529":"#f8f9fa",a.fillRect(0,0,i,i),a.globalCompositeOperation="destination-out",a.lineCap="round",a.lineWidth=1.25*t*e;const l=8/12,c=n=>n*t*e;a.beginPath(),a.moveTo(c(1*l),c(2)),a.lineTo(c(2),c(1*l)),a.moveTo(c(5*l),c(7*l)),a.lineTo(c(7*l),c(5*l)),a.moveTo(c(6),c(11*l)),a.lineTo(c(11*l),c(6)),a.stroke(),s.toBlob((e=>{!e||Hd.throwToBlob.get()?r():o(e)}))})),ob=(e,t)=>{const n=document.createElement("canvas");n.width=e[0],n.height=e[1];const o=n.getContext("2d");return o?(t(o),n.toDataURL()):""},rb=()=>{const e=[];for(let t=1;t<=Math.ceil(Id);t++){const n=ob([1,1],(e=>{e.fillStyle=_l.lightMode.black.semi,e.fillRect(0,0,1,1)})),o=ob([1,1],(e=>{e.fillStyle=_l.darkMode.black.semi,e.fillRect(0,0,1,1)}));e.push({zoom:t,url:n,darkMode:!1}),e.push({zoom:t,url:o,darkMode:!0})}return e};function ib(){const t=Hc(),n=(0,e.useRef)(null),{defs:o,isReady:r}=function(){const t=Hc().getInstanceState().devicePixelRatio,[n,o]=(0,e.useState)(!1),r=(0,e.useMemo)((()=>rb()),[]),[i,s]=(0,e.useState)(r);return(0,e.useEffect)((()=>{const e=[];for(let o=1;o<=Math.ceil(Id);o++)e.push(nb(t,o,!1).then((e=>({zoom:o,url:URL.createObjectURL(e),darkMode:!1})))),e.push(nb(t,o,!0).then((e=>({zoom:o,url:URL.createObjectURL(e),darkMode:!0}))));let n=!1;return Promise.all(e).then((e=>{n||(s(e),o(!0))})),()=>{n=!0,o(!1)}}),[t]),{defs:(0,Rc.jsx)(Rc.Fragment,{children:i.map((e=>{const t=e.zoom+(e.darkMode?"_dark":"_light");return(0,Rc.jsx)("pattern",{id:Pd[t],width:tb,height:tb,patternUnits:"userSpaceOnUse",children:(0,Rc.jsx)("image",{href:e.url,width:tb,height:tb})},t)}))}),isReady:n}}();return(0,e.useEffect)((()=>{if(r&&t.environment.isSafari){const e=sb(n.current);e&&requestAnimationFrame((()=>{e.style.display="none",requestAnimationFrame((()=>{e.style.display=""}))}))}}),[t,r]),(0,Rc.jsx)("g",{ref:n,"data-testid":r?"ready-pattern-fill-defs":void 0,children:o})}function sb(e){return e.classList.contains("tl-html-layer")?e:e.parentElement?sb(e.parentElement):null}function ab(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{closed:o=!1,snap:r=1,start:i="outset",end:s="outset",lengthRatio:a=2,style:l="dashed"}=n;let c=0,d=0,u=1,h=0,p=0;switch(l){case"dashed":u=1,c=Math.min(t*a,e/4);break;case"dotted":u=100,c=t/u;break;default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return o||("outset"===i?(e+=c/2,p+=c/2):"skip"===i&&(e-=c,p-=c),"outset"===s?e+=c/2:"skip"===s&&(e-=c)),d=Math.floor(e/c/(2*u)),d-=d%r,d<3&&"dashed"===l?e/t<5?(c=e,d=1,h=0):(c=.333*e,h=.333*e):(d=Math.max(d,3),c=e/d/(2*u),o?(p=c/2,h=(e-d*c)/d):h=(e-d*c)/Math.max(1,d-1)),{strokeDasharray:[c,h].join(" "),strokeDashoffset:p.toString()}}const lb=new WeakMap;function cb(e,t){const n=lb.get(t);if(n)return n;const o=e.getArrowInfo(t);let r=0,i=0;const s=o.isStraight?new ff({start:Gc.From(o.start.point),end:Gc.From(o.end.point)}):new Xm({center:Gc.Cast(o.handleArc.center),radius:o.handleArc.radius,start:Gc.Cast(o.start.point),end:Gc.Cast(o.end.point),sweepFlag:o.bodyArc.sweepFlag,largeArcFlag:o.bodyArc.largeArcFlag});if(t.props.text.trim()){const n=s.bounds,{w:o,h:a}=e.textMeasure.measureText(t.props.text,{...Mv,fontFamily:Rv[t.props.font],fontSize:Bv[t.props.size],maxWidth:null});if(r=o,i=a,n.width>n.height){r=Math.max(Math.min(o,64),Math.min(n.width-64,o));const{w:s,h:a}=e.textMeasure.measureText(t.props.text,{...Mv,fontFamily:Rv[t.props.font],fontSize:Bv[t.props.size],maxWidth:r});r=s,i=a}if(r>16*Bv[t.props.size]){r=16*Bv[t.props.size];const{w:n,h:o}=e.textMeasure.measureText(t.props.text,{...Mv,fontFamily:Rv[t.props.font],fontSize:Bv[t.props.size],maxWidth:r});r=n,i=o}}const a=new Gc(r,i).addScalar(2*Dv);return lb.set(t,a),a}function db(e,t){const n=jv[t.props.size];return Nv+2*(n-jv.s)+(n===jv.xl?20:0)}function ub(e,t){let n;const o=[],r=e.getArrowInfo(t),i="none"!==r.start.arrowhead,s="none"!==r.end.arrowhead;if(r.isStraight){const o=function(e,t,n){const o=cb(e,t),r=db(0,t),i=Gc.Nudge(n.start.point,n.end.point,r),s=Gc.Nudge(n.end.point,n.start.point,r),a=af(i,s,mh.FromCenter(n.middle,o).corners);if(!a||2!==a.length)return{start:.5,end:.5};let[l,c]=a;Gc.Dist2(l,i)>Gc.Dist2(c,i)&&([c,l]=a);const d=i.add(Gc.Sub(n.middle,l)),u=s.add(Gc.Sub(n.middle,c));return{start:Gc.Dist(n.start.point,d)/n.length,end:Gc.Dist(n.start.point,u)/n.length}}(e,t,r);let a=ed(t.props.labelPosition,i?o.start:0,s?o.end:1);a=a>=.48&&a<=.52?.5:a,n=Gc.Lrp(r.start.point,r.end.point,a)}else{const a=function(e,t,n){var o,r;const i=cb(e,t),s=db(0,t),a=Math.sign(t.props.bend),l=s/n.handleArc.radius*a,c=Gc.Angle(n.bodyArc.center,n.start.point)-l,d=Gc.Angle(n.bodyArc.center,n.end.point)+l,u=ud(n.bodyArc.center,n.bodyArc.radius,c),h=ud(n.bodyArc.center,n.bodyArc.radius,d),p=[],f=hb(n.bodyArc.center,n.bodyArc.radius,c,d,a,mh.FromCenter(u,i).corners);p.push(new mf({points:mh.FromCenter(u,i).corners,debugColor:"lime",isFilled:!1,ignore:!0}));const g=hb(n.bodyArc.center,n.bodyArc.radius,c,d,a,mh.FromCenter(h,i).corners);p.push(new mf({points:mh.FromCenter(h,i).corners,debugColor:"lime",isFilled:!1,ignore:!0}));for(const _ of[...null!==f&&void 0!==f?f:[],...null!==g&&void 0!==g?g:[],u,h])p.push(new $m({x:_.x-3,y:_.y-3,radius:3,isFilled:!1,debugColor:"magenta",ignore:!0}));const m=null!==(o=f&&pb(n.start.point,f))&&void 0!==o?o:n.middle,v=null!==(r=g&&pb(n.end.point,g))&&void 0!==r?r:n.middle,y=Gc.Angle(n.bodyArc.center,n.start.point),b=Gc.Angle(n.bodyArc.center,n.end.point),w=Gc.Angle(n.bodyArc.center,m),x=Gc.Angle(n.bodyArc.center,v);if(wd(y,w,a)>wd(y,x,a))return{start:.5,end:.5,dbg:p};const S=wd(y,b,a);return{start:wd(y,w,a)/S,end:wd(y,x,a)/S,dbg:p}}(e,t,r);a.dbg&&o.push(...a.dbg);let l=ed(t.props.labelPosition,i?a.start:0,s?a.end:1);l=l>=.48&&l<=.52?.5:l;const c=function(e,t,n,o){const r=wd(e,t,n);return e+r*o*n*-1}(Gc.Angle(r.bodyArc.center,r.start.point),Gc.Angle(r.bodyArc.center,r.end.point),Math.sign(t.props.bend),l);n=ud(r.bodyArc.center,r.bodyArc.radius,c)}const a=cb(e,t);return{box:mh.FromCenter(n,a),debugGeom:o}}function hb(e,t,n,o,r,i){const s=lf(e,t,i),a=wd(n,o,r);return null===s||void 0===s?void 0:s.filter((t=>{const o=wd(n,Gc.Angle(e,t),r);return o>=0&&o<=a}))}function pb(e,t){let n=null,o=-1/0;for(const r of t){const t=Gc.Dist2(e,r);t>o&&(n=r,o=t)}return n}function fb(e,t,n){const o="end"===t?e.end.point:e.start.point,r="end"===t?e.start.point:e.end.point,i=e.isStraight?Gc.Dist(r,o):Math.abs(e.bodyArc.length),s=Math.max(Math.min(i/5,3*n),n);let a;if(e.isStraight)a=Gc.Nudge(o,r,s);else{const n=function(e,t,n,o){let r=n.x-e.x,i=n.y-e.y;const s=Math.sqrt(r*r+i*i),a=(s*s-o*o+t*t)/(2*s),l=Math.sqrt(t*t-a*a);return r/=s,i/=s,[new Gc(e.x+r*a-i*l,e.y+i*a+r*l),new Gc(e.x+r*a+i*l,e.y+i*a-r*l)]}(o,s,e.handleArc.center,e.handleArc.radius);a="end"===t?e.handleArc.sweepFlag?n[0]:n[1]:e.handleArc.sweepFlag?n[1]:n[0]}return Gc.IsNaN(a)&&(a=e.start.point),{point:o,int:a}}function gb(e,t,n){const o="end"===t?e.end.arrowhead:e.start.arrowhead;if("none"===o)return;const r=fb(e,t,n);if(r){switch(o){case"bar":return function(e){let{int:t,point:n}=e;const o=Gc.Sub(t,n).div(2),r=Gc.Add(n,Gc.Rot(o,Zc)),i=Gc.Sub(n,Gc.Rot(o,Zc));return"M ".concat(r.x," ").concat(r.y," L ").concat(i.x," ").concat(i.y)}(r);case"square":return function(e){let{int:t,point:n}=e;const o=Gc.Lrp(n,t,.85),r=Gc.Sub(o,n).div(2),i=Gc.Add(n,Gc.Rot(r,Zc)),s=Gc.Sub(n,Gc.Rot(r,Zc)),a=Gc.Add(o,Gc.Rot(r,Zc)),l=Gc.Sub(o,Gc.Rot(r,Zc));return"M ".concat(i.x," ").concat(i.y," L ").concat(a.x," ").concat(a.y," L ").concat(l.x," ").concat(l.y," L ").concat(s.x," ").concat(s.y," Z")}(r);case"diamond":return function(e){let{point:t,int:n}=e;const o=Gc.Lrp(t,n,.75),r=Gc.RotWith(o,t,$c/4),i=Gc.RotWith(o,t,-$c/4),s=Gc.Lrp(r,i,.5);return s.add(Gc.Sub(s,t)),"M ".concat(s.x," ").concat(s.y," L ").concat(r.x," ").concat(r.y," ").concat(t.x," ").concat(t.y," L ").concat(i.x," ").concat(i.y," Z")}(r);case"dot":return function(e){let{point:t,int:n}=e;const o=Gc.Lrp(t,n,.45),r=Gc.Dist(o,t);return"M ".concat(o.x-r,",").concat(o.y,"\n  a ").concat(r,",").concat(r," 0 1,0 ").concat(2*r,",0\n  a ").concat(r,",").concat(r," 0 1,0 -").concat(2*r,",0 ")}(r);case"inverted":return function(e){let{point:t,int:n}=e;const o=Gc.Sub(n,t).div(2),r=Gc.Add(t,Gc.Rot(o,Zc)),i=Gc.Sub(t,Gc.Rot(o,Zc));return"M ".concat(r.x," ").concat(r.y," L ").concat(n.x," ").concat(n.y," L ").concat(i.x," ").concat(i.y," Z")}(r);case"arrow":return function(e){let{point:t,int:n}=e;const o=Gc.RotWith(n,t,$c/6),r=Gc.RotWith(n,t,-$c/6);return"M ".concat(o.x," ").concat(o.y," L ").concat(t.x," ").concat(t.y," L ").concat(r.x," ").concat(r.y)}(r);case"triangle":return function(e){let{point:t,int:n}=e;const o=Gc.RotWith(n,t,$c/6),r=Gc.RotWith(n,t,-$c/6);return"M ".concat(o.x," ").concat(o.y," L ").concat(t.x," ").concat(t.y," L ").concat(r.x," ").concat(r.y," Z")}(r)}return""}}function mb(e){const{start:t,end:n,handleArc:{radius:o,largeArcFlag:r,sweepFlag:i}}=e;return"M".concat(t.handle.x,",").concat(t.handle.y," A").concat(o," ").concat(o," 0 ").concat(r," ").concat(i," ").concat(n.handle.x,",").concat(n.handle.y)}function vb(e){const{start:t,end:n,bodyArc:{radius:o,largeArcFlag:r,sweepFlag:i}}=e;return"M".concat(t.point.x,",").concat(t.point.y," A").concat(o," ").concat(o," 0 ").concat(r," ").concat(i," ").concat(n.point.x,",").concat(n.point.y)}function yb(e,t){return"M".concat(e.x,",").concat(e.y,"L").concat(t.x,",").concat(t.y)}function bb(e){return yb(e.start.handle,e.end.handle)}function wb(e){return yb(e.start.point,e.end.point)}function xb(t,n,o){const r=Hc(),i=(0,e.useRef)(null),s=(0,e.useRef)(!1),a=(0,e.useRef)(),l=ri("isEditing",(()=>r.getEditingShapeId()===t),[r,t]);(0,e.useEffect)((()=>{const e=i.current;e&&l&&document.activeElement!==e&&e.focus()}),[l]);const c=(0,e.useCallback)((()=>{const e=s.current;s.current=!1,requestAnimationFrame((()=>{const n=i.current;if(!n)return;const o=r.getShape(t);o&&(n.value=o.props.text,n.value.length&&!e&&n.select())}))}),[r,t]),d=(0,e.useCallback)((()=>{const e=a.current;requestAnimationFrame((()=>{const n=i.current,o=r.getEditingShapeId();var a;if(n&&o){if(o===t)if(e)if(e.length){s.current=!0,n.focus();const t=window.getSelection();t&&e.forEach((e=>t.addRange(e)))}else n.focus();else n.focus()}else null===(a=window.getSelection())||void 0===a||a.removeAllRanges(),r.complete()}))}),[r,t]),u=(0,e.useCallback)((e=>{if(l)switch(e.key){case"Enter":(e.ctrlKey||e.metaKey)&&r.complete();break;case"Tab":Gd(e),e.shiftKey?my.unindent(e.currentTarget):my.indent(e.currentTarget)}}),[r,l]),h=(0,e.useCallback)((e=>{if(!l)return;let o=my.normalizeText(e.currentTarget.value);const i=o.replace(/\t/g,gy);if(i!==o){const t=e.currentTarget.selectionStart;e.currentTarget.value=i,e.currentTarget.selectionStart=t+(i.length-o.length),e.currentTarget.selectionEnd=t+(i.length-o.length),o=i}r.updateShapes([{id:t,type:n,props:{text:o}}])}),[r,t,n,l]),p=0===o.trim().length;(0,e.useEffect)((()=>{if(!l)return;if(i.current){let e=function(){var e,t;const n=null===(e=(t=window).getSelection)||void 0===e?void 0:e.call(t);if(n&&"None"!==n.type){const e=[];if(n)for(let t=0;t<n.rangeCount;t++){var o;e.push(null===(o=n.getRangeAt)||void 0===o?void 0:o.call(n,t))}a.current=e}};return document.addEventListener("selectionchange",e),()=>{document.removeEventListener("selectionchange",e)}}}),[l]);const f=(0,e.useCallback)((e=>{r.dispatch({...$d(e),type:"pointer",name:"pointer_down",target:"shape",shape:r.getShape(t)}),Xd(e)}),[r,t]);return{rInput:i,isEditing:l,handleFocus:c,handleBlur:d,handleKeyDown:u,handleChange:h,handleInputPointerDown:f,handleDoubleClick:Xd,isEmpty:p}}const Sb=e.memo((function(e){let{id:t,text:n,size:o,font:r,position:i,width:s,labelColor:a}=e;const{rInput:l,isEditing:c,handleFocus:d,handleBlur:u,handleKeyDown:h,handleChange:p,isEmpty:f,handleInputPointerDown:g,handleDoubleClick:m}=xb(t,"arrow",n),v=my.normalizeTextForDom(n).trim().length>0;return c||v?(0,Rc.jsx)("div",{className:"tl-arrow-label","data-font":r,"data-align":"center","data-hastext":!f,"data-isediting":c,style:{textAlign:"center",fontSize:Bv[o],lineHeight:Bv[o]*Mv.lineHeight+"px",transform:"translate(".concat(i.x,"px, ").concat(i.y,"px)"),color:a},children:(0,Rc.jsxs)("div",{className:"tl-arrow-label__inner",children:[(0,Rc.jsx)("p",{style:{width:s||"9px"},children:n?my.normalizeTextForDom(n):" "}),c&&(0,Rc.jsx)("textarea",{ref:l,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:n,onFocus:d,onChange:p,onKeyDown:h,onBlur:u,onTouchEnd:Xd,onContextMenu:Xd,onPointerDown:g,onDoubleClick:m})]})}):null}));let _b=0;class kb extends yf{constructor(){super(...arguments),wr(this,"canEdit",(()=>!0)),wr(this,"canBind",(()=>!1)),wr(this,"canSnap",(()=>!1)),wr(this,"hideResizeHandles",(()=>!0)),wr(this,"hideRotateHandle",(()=>!0)),wr(this,"hideSelectionBoundsBg",(()=>!0)),wr(this,"hideSelectionBoundsFg",(()=>!0)),wr(this,"onHandleDrag",((e,t)=>{let{handle:n,isPrecise:o}=t;const r=n.id;if("middle"===r){const{start:t,end:o}=bg(this.editor,e),r=Gc.Sub(o,t),i=Gc.Per(r),s=Gc.Med(o,t),a=Gc.Sub(s,i),l=Gc.Add(s,i),c=Gc.NearestPointOnLineSegment(a,l,n,!1);let d=Gc.Dist(c,s);return Gc.Clockwise(c,o,s)&&(d*=-1),{id:e.id,type:e.type,props:{bend:d}}}const i=Ci(e);if(this.editor.inputs.ctrlKey)return i.props[r]={type:"point",x:n.x,y:n.y},i;const s=this.editor.getShapePageTransform(e.id).applyToPoint(n),a=this.editor.getShapeAtPoint(s,{hitInside:!0,hitFrameInside:!0,margin:0,filter:e=>!e.isLocked&&this.editor.getShapeUtil(e).canBind(e)});if(!a)return i.props[r]={type:"point",x:n.x,y:n.y},i;const l=this.editor.getShapeGeometry(a),c=mh.ZeroFix(l.bounds),d=this.editor.getShapePageTransform(i.id).applyToPoint(n),u=this.editor.getPointInShapeSpace(a,d);let h=o;if(!h){const e=i.props[r];("point"===e.type||"binding"===e.type&&a.id!==e.boundShapeId)&&(h=this.editor.inputs.pointerVelocity.len()<.5)}if(!o){l.isClosed||(h=!0);const e=i.props["start"===r?"end":"start"];"binding"===e.type&&a.id===e.boundShapeId&&e.isPrecise&&(h=!0)}const p={x:(u.x-c.minX)/c.width,y:(u.y-c.minY)/c.height};return h&&Gc.Dist(u,c.center)<Math.max(4,Math.min(.15*Math.min(c.width,c.height),16))/this.editor.getZoomLevel()&&(p.x=.5,p.y=.5),i.props[r]={type:"binding",boundShapeId:a.id,normalizedAnchor:p,isPrecise:h,isExact:this.editor.inputs.altKey},"binding"===i.props.start.type&&"binding"===i.props.end.type&&i.props.start.boundShapeId===i.props.end.boundShapeId&&Gc.Equals(i.props.start.normalizedAnchor,i.props.end.normalizedAnchor)&&(i.props.end.normalizedAnchor.x+=.05),i})),wr(this,"onTranslateStart",(e=>{const t="binding"===e.props.start.type?e.props.start.boundShapeId:null,n="binding"===e.props.end.type?e.props.end.boundShapeId:null,o=bg(this.editor,e),r=this.editor.getShapePageTransform(e.id),i=this.editor.getSelectedShapeIds();if(t&&(i.includes(t)||this.editor.isAncestorSelected(t))||n&&(i.includes(n)||this.editor.isAncestorSelected(n)))return;let s=e;Ib.set(e,{pagePosition:r.applyToPoint(e),terminalBindings:Mi(o,((t,n)=>{const o=e.props[t];return"binding"!==o.type?null:{binding:o,shapePosition:n,pagePosition:r.applyToPoint(n)}}))});for(const a of["start","end"]){const t=e.props[a];"binding"===t.type&&(s={...e,props:{...e.props,[a]:{...t,isPrecise:!0}}})}return s})),wr(this,"onTranslate",((e,t)=>{const n=Ib.get(e);if(!n)return;const o=this.editor.getShapePageTransform(t.id),r=Gc.Sub(o.applyToPoint(t),n.pagePosition);let i=t;for(const[s,a]of Ti(n.terminalBindings)){if(!a)continue;const e=Gc.Add(a.pagePosition,Gc.Mul(r,.5)),t=this.editor.getShapeAtPoint(e,{hitInside:!0,hitFrameInside:!0,margin:0,filter:e=>!e.isLocked&&this.editor.getShapeUtil(e).canBind(e)});if((null===t||void 0===t?void 0:t.id)===a.binding.boundShapeId){const n=mh.ZeroFix(this.editor.getShapeGeometry(t).bounds),o=this.editor.getPointInShapeSpace(t,e),r={x:(o.x-n.minX)/n.width,y:(o.y-n.minY)/n.height};i={...i,props:{...i.props,[s]:{...a.binding,isPrecise:!0,normalizedAnchor:r}}}}else i={...i,props:{...i.props,[s]:{type:"point",x:a.shapePosition.x,y:a.shapePosition.y}}}}return i})),wr(this,"onResize",((e,t)=>{const{scaleX:n,scaleY:o}=t,r=bg(this.editor,e),{start:i,end:s}=Ci(e.props);let{bend:a}=e.props;"point"===i.type&&(i.x=r.start.x*n,i.y=r.start.y*o),"point"===s.type&&(s.x=r.end.x*n,s.y=r.end.y*o);const l=Math.abs(n),c=Math.abs(o);n<0&&o>=0?(0!==a&&(a*=-1,a*=Math.max(l,c)),"binding"===i.type&&(i.normalizedAnchor.x=1-i.normalizedAnchor.x),"binding"===s.type&&(s.normalizedAnchor.x=1-s.normalizedAnchor.x)):n>=0&&o<0?(0!==a&&(a*=-1,a*=Math.max(l,c)),"binding"===i.type&&(i.normalizedAnchor.y=1-i.normalizedAnchor.y),"binding"===s.type&&(s.normalizedAnchor.y=1-s.normalizedAnchor.y)):n>=0&&o>=0?0!==a&&(a*=Math.max(l,c)):n<0&&o<0&&(0!==a&&(a*=Math.max(l,c)),"binding"===i.type&&(i.normalizedAnchor.x=1-i.normalizedAnchor.x,i.normalizedAnchor.y=1-i.normalizedAnchor.y),"binding"===s.type&&(s.normalizedAnchor.x=1-s.normalizedAnchor.x,s.normalizedAnchor.y=1-s.normalizedAnchor.y));return{props:{start:i,end:s,bend:a}}})),wr(this,"onDoubleClickHandle",((e,t)=>{switch(t.id){case"start":return{id:e.id,type:e.type,props:{...e.props,arrowheadStart:"none"===e.props.arrowheadStart?"arrow":"none"}};case"end":return{id:e.id,type:e.type,props:{...e.props,arrowheadEnd:"none"===e.props.arrowheadEnd?"arrow":"none"}}}})),wr(this,"onEditEnd",(e=>{const{id:t,type:n,props:{text:o}}=e;o.trimEnd()!==e.props.text&&this.editor.updateShapes([{id:t,type:n,props:{text:o.trimEnd()}}])}))}getDefaultProps(){return{dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{type:"point",x:0,y:0},end:{type:"point",x:2,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw"}}getGeometry(e){const t=this.editor.getArrowInfo(e),n=[],o=t.isStraight?new ff({start:Gc.From(t.start.point),end:Gc.From(t.end.point)}):new Xm({center:Gc.Cast(t.handleArc.center),radius:t.handleArc.radius,start:Gc.Cast(t.start.point),end:Gc.Cast(t.end.point),sweepFlag:t.bodyArc.sweepFlag,largeArcFlag:t.bodyArc.largeArcFlag});let r;if(e.props.text.trim()){const t=ub(this.editor,e);n.push(...t.debugGeom),r=new vf({x:t.box.x,y:t.box.y,width:t.box.w,height:t.box.h,isFilled:!0,isLabel:!0})}return new xh({children:[...r?[o,r]:[o],...n]})}getLength(e){const t=this.editor.getArrowInfo(e);return t.isStraight?Gc.Dist(t.start.handle,t.end.handle):Math.abs(t.handleArc.length)}getHandles(e){const t=this.editor.getArrowInfo(e);return[{id:"start",type:"vertex",index:"a0",x:t.start.handle.x,y:t.start.handle.y,canBind:!0},{id:"middle",type:"virtual",index:"a2",x:t.middle.x,y:t.middle.y,canBind:!1},{id:"end",type:"vertex",index:"a3",x:t.end.handle.x,y:t.end.handle.y,canBind:!0}].filter(Boolean)}component(t){const n=Gy(),o=this.editor.getOnlySelectedShape(),r=this.editor.isInAny("select.idle","select.pointing_handle","select.dragging_handle","select.translating","arrow.dragging")&&!this.editor.getInstanceState().isReadonly,i=this.editor.getArrowInfo(t),s=mh.ZeroFix(this.editor.getShapeGeometry(t).bounds),a=e.useMemo((()=>this.editor.environment.isSafari?_b+=1:0),[t]);if(null===i||void 0===i||!i.isValid)return null;const l=jv[t.props.size],c=i.start.arrowhead&&gb(i,"start",l),d=i.end.arrowhead&&gb(i,"end",l),u=i.isStraight?wb(i):vb(i);let h=null;if(o===t&&r){const e=2,{strokeDasharray:n,strokeDashoffset:o}=ab(this.getLength(t),e,{end:"skip",start:"skip",lengthRatio:2.5});h="binding"===t.props.start.type||"binding"===t.props.end.type?(0,Rc.jsx)("path",{className:"tl-arrow-hint",d:i.isStraight?bb(i):mb(i),strokeDasharray:n,strokeDashoffset:o,strokeWidth:e,markerStart:"binding"===t.props.start.type?t.props.start.isExact?"":t.props.start.isPrecise?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",markerEnd:"binding"===t.props.end.type?t.props.end.isExact?"":t.props.end.isPrecise?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",opacity:.16}):null}const{strokeDasharray:p,strokeDashoffset:f}=ab(i.isStraight?i.length:Math.abs(i.bodyArc.length),l,{style:t.props.dash}),g=ub(this.editor,t),m=!("none"===i.start.arrowhead||"arrow"===i.start.arrowhead),v=!("none"===i.end.arrowhead||"arrow"===i.end.arrowhead),y=(t.id+"_clip_"+a).replace(":","_");return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsxs)(nf,{id:t.id,style:{minWidth:50,minHeight:50},children:[(0,Rc.jsx)("defs",{children:(0,Rc.jsxs)("mask",{id:y,children:[(0,Rc.jsx)("rect",{x:vd(-100+s.minX),y:vd(-100+s.minY),width:vd(s.width+200),height:vd(s.height+200),fill:"white"}),t.props.text.trim()&&(0,Rc.jsx)("rect",{x:g.box.x,y:g.box.y,width:g.box.w,height:g.box.h,fill:"black",rx:4,ry:4}),c&&m&&(0,Rc.jsx)("path",{d:c,fill:"arrow"===i.start.arrowhead?"none":"black",stroke:"none"}),d&&v&&(0,Rc.jsx)("path",{d:d,fill:"arrow"===i.end.arrowhead?"none":"black",stroke:"none"})]})}),(0,Rc.jsxs)("g",{fill:"none",stroke:n[t.props.color].solid,strokeWidth:l,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[h,(0,Rc.jsxs)("g",{mask:"url(#".concat(y,")"),children:[(0,Rc.jsx)("rect",{x:vd(s.minX-100),y:vd(s.minY-100),width:vd(s.width+200),height:vd(s.height+200),opacity:0}),(0,Rc.jsx)("path",{d:u,strokeDasharray:p,strokeDashoffset:f})]}),c&&m&&"none"!==t.props.fill&&(0,Rc.jsx)(qy,{theme:n,d:c,color:t.props.color,fill:t.props.fill}),d&&v&&"none"!==t.props.fill&&(0,Rc.jsx)(qy,{theme:n,d:d,color:t.props.color,fill:t.props.fill}),c&&(0,Rc.jsx)("path",{d:c}),d&&(0,Rc.jsx)("path",{d:d})]})]}),(0,Rc.jsx)(Sb,{id:t.id,text:t.props.text,font:t.props.font,size:t.props.size,position:g.box.center,width:g.box.w,labelColor:n[t.props.labelColor].solid})]})}indicator(e){const{start:t,end:n}=bg(this.editor,e),o=this.editor.getArrowInfo(e),r=this.editor.getShapeGeometry(e),i=r.bounds,s=e.props.text.trim()?r.children[1]:null,a=Gm(e.id);if(!o)return null;if(Gc.Equals(t,n))return null;const l=jv[e.props.size],c=o.start.arrowhead&&gb(o,"start",l),d=o.end.arrowhead&&gb(o,"end",l),u=o.isStraight?wb(o):vb(o),h=c&&"arrow"!==o.start.arrowhead||d&&"arrow"!==o.end.arrowhead||!!s,p=(e.id+"_clip").replace(":","_");return a&&s?(0,Rc.jsx)("rect",{x:vd(s.x),y:vd(s.y),width:s.w,height:s.h,rx:3.5,ry:3.5}):(0,Rc.jsxs)("g",{children:[h&&(0,Rc.jsx)("defs",{children:(0,Rc.jsxs)("mask",{id:p,children:[(0,Rc.jsx)("rect",{x:i.minX-100,y:i.minY-100,width:i.w+200,height:i.h+200,fill:"white"}),s&&(0,Rc.jsx)("rect",{x:vd(s.x),y:vd(s.y),width:s.w,height:s.h,fill:"black",rx:3.5,ry:3.5}),c&&(0,Rc.jsx)("path",{d:c,fill:"arrow"===o.start.arrowhead?"none":"black",stroke:"none"}),d&&(0,Rc.jsx)("path",{d:d,fill:"arrow"===o.end.arrowhead?"none":"black",stroke:"none"})]})}),(0,Rc.jsxs)("g",{...h?{mask:"url(#".concat(p,")")}:void 0,children:[h&&(0,Rc.jsx)("rect",{x:i.minX-100,y:i.minY-100,width:i.width+200,height:i.height+200,opacity:0}),(0,Rc.jsx)("path",{d:u})]}),c&&(0,Rc.jsx)("path",{d:c}),d&&(0,Rc.jsx)("path",{d:d}),s&&(0,Rc.jsx)("rect",{x:vd(s.x),y:vd(s.y),width:s.w,height:s.h,rx:3.5,ry:3.5})]})}toSvg(e,t){const n=kl({isDarkMode:t.isDarkMode});t.addExportDef(Jy(e.props.fill,n));const o=n[e.props.color].solid,r=this.editor.getArrowInfo(e),i=jv[e.props.size],s=document.createElementNS("http://www.w3.org/2000/svg","g");if(!r)return s;const a=r.start.arrowhead&&gb(r,"start",i),l=r.end.arrowhead&&gb(r,"end",i),c=this.editor.getShapeGeometry(e),d=c.bounds,u=e.props.text.trim()?c.children[1]:null,h=(e.id+"_clip").replace(":","_");if(a||l||u){const e=document.createElementNS("http://www.w3.org/2000/svg","defs"),t=document.createElementNS("http://www.w3.org/2000/svg","mask");t.id=h;const n=document.createElementNS("http://www.w3.org/2000/svg","rect");if(n.setAttribute("x",d.minX-100+""),n.setAttribute("y",d.minY-100+""),n.setAttribute("width",d.width+200+""),n.setAttribute("height",d.height+200+""),n.setAttribute("fill","white"),t.appendChild(n),a&&t.appendChild(Cb(a,r.start.arrowhead)),l&&t.appendChild(Cb(l,r.end.arrowhead)),u){const e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttribute("x",u.x+""),e.setAttribute("y",u.y+""),e.setAttribute("width",u.w+""),e.setAttribute("height",u.h+""),e.setAttribute("fill","black"),t.appendChild(e)}e.appendChild(t),s.appendChild(e)}const p=document.createElementNS("http://www.w3.org/2000/svg","g");p.setAttribute("mask","url(#".concat(h,")")),s.appendChild(p);const f=document.createElementNS("http://www.w3.org/2000/svg","rect");f.setAttribute("x","-100"),f.setAttribute("y","-100"),f.setAttribute("width",d.width+200+""),f.setAttribute("height",d.height+200+""),f.setAttribute("fill","transparent"),f.setAttribute("stroke","none"),p.appendChild(f);const g=function(e,t,n){const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",e),o.setAttribute("fill","none"),o.setAttribute("stroke",t),o.setAttribute("stroke-width",n+""),o}(r.isStraight?wb(r):vb(r),o,i),{strokeDasharray:m,strokeDashoffset:v}=ab(r.isStraight?r.length:Math.abs(r.bodyArc.length),i,{style:e.props.dash});if(g.setAttribute("stroke-dasharray",m),g.setAttribute("stroke-dashoffset",v),p.appendChild(g),a&&s.appendChild(Eb(a,e.props.color,i,"arrow"===e.props.arrowheadStart?"none":e.props.fill,n)),l&&s.appendChild(Eb(l,e.props.color,i,"arrow"===e.props.arrowheadEnd?"none":e.props.fill,n)),u){t.addExportDef(Qy(e.props.font));const o={fontSize:Bv[e.props.size],lineHeight:Mv.lineHeight,fontFamily:Al[e.props.font],padding:0,textAlign:"middle",width:u.w-8,verticalTextAlign:"middle",height:u.h,fontStyle:"normal",fontWeight:"normal",overflow:"wrap"},r=Zy(this.editor,this.editor.textMeasure.measureTextSpans(e.props.text,o),o);r.setAttribute("fill",n[e.props.labelColor].solid);Array.from(r.children).forEach((e=>{const t=parseFloat(e.getAttribute("x")||"0"),n=parseFloat(e.getAttribute("y")||"0");e.setAttribute("x",t+4+u.x+"px"),e.setAttribute("y",n+u.y+"px")}));const i=r.cloneNode(!0);i.setAttribute("stroke-width","2"),i.setAttribute("fill",n.background),i.setAttribute("stroke",n.background),s.appendChild(i),s.appendChild(r)}return s}getCanvasSvgDefs(){return[eb()]}}function Cb(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n.setAttribute("fill","arrow"===t?"none":"black"),n.setAttribute("stroke","none"),n}function Eb(e,t,n,o,r){const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d",e),i.setAttribute("fill","none"),i.setAttribute("stroke",r[t].solid),i.setAttribute("stroke-width",n+"");const s=Xy({d:e,fill:o,color:t,theme:r});if(s){const e=document.createElementNS("http://www.w3.org/2000/svg","g");return e.appendChild(s),e.appendChild(i),e}return i}wr(kb,"type","arrow"),wr(kb,"props",Rl),wr(kb,"migrations",Dl);const Ib=new WeakMap,Tb="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";function Pb(e){let{url:t,zoomLevel:n}=e;return(0,Rc.jsx)("a",{className:Nc("tl-hyperlink-button",{"tl-hyperlink-button__hidden":n<.32}),href:t,target:"_blank",rel:"noopener noreferrer",onPointerDown:Xd,onPointerUp:Xd,title:t,draggable:!1,children:(0,Rc.jsx)("div",{className:"tl-hyperlink-button__icon",style:{mask:'url("'.concat(Tb,'") center 100% / 100% no-repeat'),WebkitMask:'url("'.concat(Tb,'") center 100% / 100% no-repeat')}})})}const Ab=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}];function Mb(e){const t=Ab.map((t=>{const{offsetX:n,offsetY:o,blur:r,spread:i,color:s}=t,a=new Gc(n,o),{x:l,y:c}=a.rot(-e);return"".concat(l,"px ").concat(c,"px ").concat(r,"px ").concat(i,"px ").concat(s)}));return t.join(", ")}class jb extends Um{constructor(){super(...arguments),wr(this,"canResize",(()=>!1)),wr(this,"hideSelectionBoundsFg",(()=>!0)),wr(this,"onBeforeCreate",(e=>{Lb(this.editor,e)})),wr(this,"onBeforeUpdate",((e,t)=>{if(e.props.url!==t.props.url){if(!ta.isValid(t.props.url))return{...t,props:{...t.props,url:e.props.url}};Lb(this.editor,t)}}))}getDefaultProps(){return{url:"",w:300,h:320,assetId:null}}component(e){const t=e.props.assetId?this.editor.getAsset(e.props.assetId):null,n=this.editor.getShapePageTransform(e).rotation(),o=Ob(e);return(0,Rc.jsx)(zm,{children:(0,Rc.jsxs)("div",{className:"tl-bookmark__container",style:{boxShadow:Mb(n)},children:[(0,Rc.jsxs)("div",{className:"tl-bookmark__image_container",children:[null!==t&&void 0!==t&&t.props.image?(0,Rc.jsx)("img",{className:"tl-bookmark__image",draggable:!1,src:null===t||void 0===t?void 0:t.props.image,alt:(null===t||void 0===t?void 0:t.props.title)||""}):(0,Rc.jsx)("div",{className:"tl-bookmark__placeholder"}),(0,Rc.jsx)(Pb,{url:e.props.url,zoomLevel:this.editor.getZoomLevel()})]}),(0,Rc.jsxs)("div",{className:"tl-bookmark__copy_container",children:[(null===t||void 0===t?void 0:t.props.title)&&(0,Rc.jsx)("h2",{className:"tl-bookmark__heading",children:wy((null===t||void 0===t?void 0:t.props.title)||"",54)}),(null===t||void 0===t?void 0:t.props.description)&&(0,Rc.jsx)("p",{className:"tl-bookmark__description",children:wy((null===t||void 0===t?void 0:t.props.description)||"",128)}),(0,Rc.jsx)("a",{className:"tl-bookmark__link",href:e.props.url||"",target:"_blank",rel:"noopener noreferrer",onPointerDown:Xd,onPointerUp:Xd,onClick:Xd,children:wy(o,45)})]})]})})}indicator(e){return(0,Rc.jsx)("rect",{width:vd(e.props.w),height:vd(e.props.h),rx:"6",ry:"6"})}}wr(jb,"type","bookmark"),wr(jb,"props",zl),wr(jb,"migrations",Ul);const Ob=e=>{try{const t=new URL(e.props.url),n=t.pathname.replace(/\/*$/,"");return"".concat(t.hostname).concat(n)}catch(t){return e.props.url}};function Lb(e,t){const{url:n}=t.props,o=ul.createId(vi(n));e.getAsset(o)?t.props.assetId!==o&&e.updateShapes([{id:t.id,type:t.type,props:{assetId:o}}]):(e.updateShapes([{id:t.id,type:t.type,props:{assetId:null}}]),Bb(e,t))}const Bb=fi((async(e,t)=>{const{url:n}=t.props,o=await e.getAssetForExternalContent({type:"url",url:n});o&&e.batch((()=>{e.createAssets([o]),e.updateShapes([{id:t.id,type:t.type,props:{assetId:o.id}}])}))}),500);function Rb(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.length;if(n<2)return"";let o=e[0].point,r=e[1].point;if(2===n)return"M".concat(Yc(o),"L").concat(Yc(r));let i="";for(let s=2,a=n-1;s<a;s++)o=e[s].point,r=e[s+1].point,i+=Xc(o,r);return t?"M".concat(Xc(e[0].point,e[1].point),"Q").concat(Yc(e[1].point)).concat(Xc(e[1].point,e[2].point),"T").concat(i).concat(Xc(e[n-1].point,e[0].point)).concat(Xc(e[0].point,e[1].point),"Z"):"M".concat(Yc(e[0].point),"Q").concat(Yc(e[1].point)).concat(Xc(e[1].point,e[2].point)).concat(e.length>3?"T":"").concat(i,"L").concat(Yc(e[n-1].point))}function Nb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{start:n={},end:o={}}=t,{cap:r=!0}=n,{cap:i=!0}=o;hi(!n.taper&&!o.taper,"cap taper not supported here"),hi(!n.easing&&!o.easing,"cap easing not supported here"),hi(r&&i,"cap must be true");const s=bv(e,t);Sv(s,t);const a=function(e){if(e.length<=2)return[e];const t=[];let n=[e[0]];for(let o=1;o<e.length-1;o++){const r=e[o-1],i=e[o],s=e[o+1],a=Gc.Angle(r.point,i.point),l=Gc.Angle(i.point,s.point),c=Math.abs(ad(a,l))/Math.PI;if(c>.8){const e={...i,point:i.input};n.push(e),t.push(Db(n)),n=[e];continue}if(n.push(i),c<.25)continue;const d=(r.radius+i.radius+s.radius)/3;Gc.Dist(r.point,i.point)/d+Gc.Dist(i.point,s.point)/d<1.5&&(n.push(i),t.push(Db(n)),n=[i])}return n.push(e[e.length-1]),t.push(Db(n)),t}(s);let l="";for(const c of a)l+=zb(c,t);return l}function Db(e){const t=e[0];for(;e.length>2;){const n=e[1];if(!(Gc.Dist(t.point,n.point)<.5*((t.radius+n.radius)/2)))break;e.splice(1,1)}const n=e[e.length-1];for(;e.length>2;){const t=e[e.length-2];if(!(Gc.Dist(n.point,t.point)<.5*((n.radius+t.radius)/2)))break;e.splice(e.length-2,1)}return e.length>1&&(e[0]={...e[0],vector:Gc.FromAngle(Gc.Angle(e[1].point,e[0].point))},e[e.length-1]={...e[e.length-1],vector:Gc.FromAngle(Gc.Angle(e[e.length-1].point,e[e.length-2].point))}),e}function zb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===e.length)return"";if(1===e.length)return function(e,t,n){return"M "+e+" "+t+" m -"+n+", 0 a "+n+","+n+" 0 1,1 "+2*n+",0 a "+n+","+n+" 0 1,1 -"+2*n+",0"}(e[0].point.x,e[0].point.y,e[0].radius);const{left:n,right:o}=gv(e,t);o.reverse();let r="M".concat(Yc(n[0]),"T");for(let i=1;i<n.length;i++)r+=Xc(n[i-1],n[i]);{const t=e[e.length-1],n=t.radius,o=t.vector.clone().per().neg(),i=Gc.Add(t.point,Gc.Mul(o,n)),s=Gc.Add(t.point,Gc.Mul(o,-n));r+="".concat(Yc(i),"A").concat(vd(n),",").concat(vd(n)," 0 0 1 ").concat(Yc(s),"T")}for(let i=1;i<o.length;i++)r+=Xc(o[i-1],o[i]);{const t=e[0],n=t.radius,o=t.vector.clone().per(),i=Gc.Add(t.point,Gc.Mul(o,n)),s=Gc.Add(t.point,Gc.Mul(o,-n));r+="".concat(Yc(i),"A").concat(vd(n),",").concat(vd(n)," 0 0 1 ").concat(Yc(s),"Z")}return r}function Fb(){const e=Hc();return ri("zoom",(()=>e.getZoomLevel()<.35),[e])}const Ub=e=>.65*e+.35*Jc(e*$c/2),Hb=e=>({size:1+e,thinning:.5,streamline:.62+(1+e)/8*.06,smoothing:.62,easing:Kc.easeOutSine,simulatePressure:!0}),Vb=e=>({size:1+1.2*e,thinning:.62,streamline:.62,smoothing:.62,simulatePressure:!1,easing:Ub}),Wb=e=>({size:1+e,thinning:0,streamline:.62+(1+e)/8*.06,smoothing:.62,simulatePressure:!1,easing:Kc.linear});function Kb(e){let{strokeWidth:t,showAsComplete:n}=e;return{size:1+t,thinning:0,streamline:.5,smoothing:.5,simulatePressure:!1,easing:Kc.easeOutSine,last:n}}function Gb(e,t,n,o){return{...o?Wb(t):"draw"===e.dash?e.isPen?Vb(t):Hb(t):Wb(t),last:e.isComplete||n}}function qb(e){const t=[];for(const n of e)if("free"===n.type||n.points.length<2)t.push(...n.points.map(Gc.Cast));else{const e=Math.max(4,Math.floor(Gc.Dist(n.points[0],n.points[1])/16));t.push(...Gc.PointsBetween(n.points[0],n.points[1],e))}return t}function Yb(e,t){return{draw:"none",solid:"none",dotted:"0.1 ".concat(2*t),dashed:"".concat(2*t," ").concat(2*t)}[e.props.dash]}class Xb extends yf{constructor(){super(...arguments),wr(this,"hideResizeHandles",(e=>Zb(e))),wr(this,"hideRotateHandle",(e=>Zb(e))),wr(this,"hideSelectionBoundsFg",(e=>Zb(e))),wr(this,"onResize",((e,t)=>{const{scaleX:n,scaleY:o}=t,r=[];for(const i of e.props.segments)r.push({...i,points:i.points.map((e=>{let{x:t,y:r,z:i}=e;return{x:yd(n*t),y:yd(o*r),z:i}}))});return{props:{segments:r}}}))}getDefaultProps(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",isComplete:!1,isClosed:!1,isPen:!1}}getGeometry(e){const t=qb(e.props.segments),n=jv[e.props.size];if(1===e.props.segments.length){const e=mh.FromPoints(t);if(e.width<2*n&&e.height<2*n)return new $m({x:-n,y:-n,radius:n,isFilled:!0})}const o=bv(t,Gb(e.props,n,!0,!0)).map((e=>e.point));return e.props.isClosed?new mf({points:o,isFilled:"none"!==e.props.fill}):new gf({points:o})}component(e){var t;const n=Gy(),o=Fb(),r=jv[e.props.size],i=qb(e.props.segments),s=e.props.isComplete||"straight"===(null===(t=li(e.props.segments))||void 0===t?void 0:t.type);let a=r;o||e.props.isPen||"draw"!==e.props.dash||1!==i.length||(a+=xi(e.id)()*(r/6));const l=Gb(e.props,a,s,o);if(!o&&"draw"===e.props.dash)return(0,Rc.jsxs)(nf,{id:e.id,children:[e.props.isClosed&&e.props.fill&&i.length>1?(0,Rc.jsx)(qy,{theme:n,fill:e.props.isClosed?e.props.fill:"none",color:e.props.color,d:Rb(bv(i,l),e.props.isClosed)}):null,(0,Rc.jsx)("path",{d:Nb(i,l),strokeLinecap:"round",fill:n[e.props.color].solid})]});const c=bv(i,l),d=c.length<2,u=d?$b(i[0],0):Rb(c,e.props.isClosed);return(0,Rc.jsxs)(nf,{id:e.id,children:[(0,Rc.jsx)(qy,{theme:n,color:e.props.color,fill:d||e.props.isClosed?e.props.fill:"none",d:u}),(0,Rc.jsx)("path",{d:u,strokeLinecap:"round",fill:d?n[e.props.color].solid:"none",stroke:n[e.props.color].solid,strokeWidth:r,strokeDasharray:d?"none":Yb(e,r),strokeDashoffset:"0"})]})}indicator(e){var t;const n=Fb(),o=jv[e.props.size],r=qb(e.props.segments);let i=o;n||e.props.isPen||"draw"!==e.props.dash||1!==r.length||(i+=xi(e.id)()*(o/6));const s=e.props.isComplete||"straight"===(null===(t=li(e.props.segments))||void 0===t?void 0:t.type),a=bv(r,Gb(e.props,i,s,!0)),l=a.length>1?Rb(a,e.props.isClosed):$b(r[0],i);return(0,Rc.jsx)("path",{d:l})}toSvg(e,t){var n;const o=kl({isDarkMode:t.isDarkMode});t.addExportDef(Jy(e.props.fill,o));const{color:r}=e.props,i=jv[e.props.size],s=qb(e.props.segments),a=e.props.isComplete||"straight"===(null===(n=li(e.props.segments))||void 0===n?void 0:n.type);let l=i;e.props.isPen||"draw"!==e.props.dash||1!==s.length||(l+=xi(e.id)()*(i/6));const c=Gb(e.props,l,a,!1),d=bv(s,c),u=d.length>1?Rb(d,e.props.isClosed):$b(s[0],l);let h;if("draw"===e.props.dash||d.length<2){Sv(d,c);const e=mv(d,c),t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",up(e,!0)),t.setAttribute("fill",o[r].solid),t.setAttribute("stroke-linecap","round"),h=t}else{const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",u),t.setAttribute("stroke",o[r].solid),t.setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-width",i.toString()),t.setAttribute("stroke-dasharray",Yb(e,i)),t.setAttribute("stroke-dashoffset","0"),h=t}const p=Xy({fill:e.props.isClosed?e.props.fill:"none",d:u,color:e.props.color,theme:o});if(p){const e=document.createElementNS("http://www.w3.org/2000/svg","g");return e.appendChild(p),e.appendChild(h),e}return h}getCanvasSvgDefs(){return[eb()]}expandSelectionOutlinePx(e){const t="draw"===e.props.dash?1.6:1;return jv[e.props.size]*t/2}}function $b(e,t){const n=.5*(t+1);return"M ".concat(e.x," ").concat(e.y," m -").concat(n,", 0 a ").concat(n,",").concat(n," 0 1,0 ").concat(2*n,",0 a ").concat(n,",").concat(n," 0 1,0 -").concat(2*n,",0")}function Zb(e){return 1===e.props.segments.length&&e.props.segments[0].points.length<2}wr(Xb,"type","draw"),wr(Xb,"props",Vl),wr(Xb,"migrations",Kl);class Qb extends Um{constructor(){super(...arguments),wr(this,"hideSelectionBoundsFg",(e=>!this.canResize(e))),wr(this,"canEdit",(()=>!0)),wr(this,"canUnmount",(e=>{var t;return!(null===(t=fy(e.props.url))||void 0===t||null===(t=t.definition)||void 0===t||!t.canUnmount)})),wr(this,"canResize",(e=>{var t;return!(null===(t=fy(e.props.url))||void 0===t||null===(t=t.definition)||void 0===t||!t.doesResize)})),wr(this,"canEditInReadOnly",(()=>!0)),wr(this,"isAspectRatioLocked",(e=>{var t;const n=fy(e.props.url);return null!==(t=null===n||void 0===n?void 0:n.definition.isAspectRatioLocked)&&void 0!==t&&t})),wr(this,"onResize",((e,t)=>{var n,o;const r=this.isAspectRatioLocked(e),i=fy(e.props.url);let s=null!==(n=null===i||void 0===i?void 0:i.definition.minWidth)&&void 0!==n?n:200,a=null!==(o=null===i||void 0===i?void 0:i.definition.minHeight)&&void 0!==o?o:200;if(r){const t=e.props.w/e.props.h;t>1?s*=t:a/=t}return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{newPoint:o,handle:r,scaleX:i,scaleY:s}=t,{minWidth:a=1,maxWidth:l=1/0,minHeight:c=1,maxHeight:d=1/0}=n;let u=e.props.w*i,h=e.props.h*s;const p=new Gc(0,0);if(u>0){if(u<a){switch(r){case"top_left":case"left":case"bottom_left":p.x=u-a;break;case"top":case"bottom":p.x=(u-a)/2;break;default:p.x=0}u=a}}else if(p.x=u,u=-u,u<a){switch(r){case"top_left":case"left":case"bottom_left":p.x=-u;break;default:p.x=-a}u=a}if(h>0){if(h<c){switch(r){case"top_left":case"top":case"top_right":p.y=h-c;break;case"right":case"left":p.y=(h-c)/2;break;default:p.y=0}h=c}}else if(p.y=h,h=-h,h<c){switch(r){case"top_left":case"top":case"top_right":p.y=-h;break;default:p.y=-c}h=c}const{x:f,y:g}=p.rot(e.rotation).add(o);return{x:f,y:g,props:{w:Math.min(l,u),h:Math.min(d,h)}}}(e,t,{minWidth:s,minHeight:a})}))}getDefaultProps(){return{w:300,h:300,url:""}}component(t){var n,o;const{w:r,h:i,url:s}=t.props,a=Gm(t.id),l=(0,e.useMemo)((()=>py(s)),[s]),c=ri("is hovering",(()=>{const{editingShapeId:e,hoveredShapeId:t}=this.editor.getCurrentPageState();if(e&&t!==e){const t=this.editor.getShape(e);if(t&&this.editor.isShapeOfType(t,"embed"))return!0}return!1}),[]),d=this.editor.getShapePageTransform(t).rotation(),u=a||c;if("github_gist"===(null===l||void 0===l?void 0:l.definition.type)){const e=l.url.split("/").pop();if(!e)throw Error("No gist id!");return(0,Rc.jsx)(zm,{className:"tl-embed-container",id:t.id,children:(0,Rc.jsx)(Jb,{id:e,width:vd(r),height:vd(i),isInteractive:u,pageRotation:d})})}const h=(p={...Xl,...null!==(n=null===l||void 0===l?void 0:l.definition.overridePermissions)&&void 0!==n?n:{}},Object.entries(p).filter((e=>{let[t,n]=e;return n})).map((e=>{let[t]=e;return t})).join(" "));var p;return(0,Rc.jsx)(zm,{className:"tl-embed-container",id:t.id,children:null!==l&&void 0!==l&&l.definition?(0,Rc.jsx)("iframe",{className:"tl-embed",sandbox:h,src:l.embedUrl,width:vd(r),height:vd(i),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",style:{border:0,pointerEvents:u?"auto":"none",zIndex:u?"":"-1",boxShadow:Mb(d),borderRadius:null!==(o=null===l||void 0===l?void 0:l.definition.overrideOutlineRadius)&&void 0!==o?o:8,background:null===l||void 0===l?void 0:l.definition.backgroundColor}}):null})}indicator(t){var n,o;const r=(0,e.useMemo)((()=>fy(t.props.url)),[t.props.url]);return(0,Rc.jsx)("rect",{width:vd(t.props.w),height:vd(t.props.h),rx:null!==(n=null===r||void 0===r?void 0:r.definition.overrideOutlineRadius)&&void 0!==n?n:8,ry:null!==(o=null===r||void 0===r?void 0:r.definition.overrideOutlineRadius)&&void 0!==o?o:8})}}function Jb(e){let{id:t,file:n,isInteractive:o,width:r,height:i,style:s,pageRotation:a}=e;return(0,Rc.jsx)("iframe",{className:"tl-embed",draggable:!1,width:vd(r),height:vd(i),frameBorder:"0",scrolling:"no",seamless:!0,referrerPolicy:"no-referrer-when-downgrade",style:{...s,pointerEvents:o?"all":"none",zIndex:o?"":"-1",boxShadow:Mb(a)},srcDoc:'\n\t\t\t<html>\n\t\t\t\t<head>\n\t\t\t\t\t<base target="_blank">\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t<script src='.concat("https://gist.github.com/".concat(t,".js").concat(n?"?file=".concat(n):""),'><\/script>\n\t\t\t\t\t<style type="text/css">\n\t\t\t\t\t\t* { margin: 0px; }\n\t\t\t\t\t\ttable { height: 100%; background-color: red; }\n\t\t\t\t\t\t.gist { background-color: none; height: 100%;  }\n\t\t\t\t\t\t.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }\n\t\t\t\t\t</style>\n\t\t\t\t</body>\n\t\t\t</html>')})}wr(Qb,"type","embed"),wr(Qb,"props",$l),wr(Qb,"migrations",Ql);const ew=(0,e.forwardRef)(((t,n)=>{let{id:o,name:r,isEditing:i}=t;const s=Hc(),a=(0,e.useCallback)((e=>{"Enter"!==e.key||e.nativeEvent.isComposing||(Xd(e),e.currentTarget.blur(),s.setEditingShape(null))}),[s]),l=(0,e.useCallback)((e=>{const t=s.getShape(o);if(!t)return;const n=t.props.name,r=e.currentTarget.value.trim();n!==r&&s.updateShapes([{id:o,type:"frame",props:{name:r}}],{squashing:!0})}),[o,s]),c=(0,e.useCallback)((e=>{const t=s.getShape(o);if(!t)return;const n=t.props.name,r=e.currentTarget.value;n!==r&&s.updateShapes([{id:o,type:"frame",props:{name:r}}],{squashing:!0})}),[o,s]);return(0,Rc.jsxs)("div",{className:"tl-frame-label ".concat(i?"tl-frame-label__editing":""),children:[(0,Rc.jsx)("input",{className:"tl-frame-name-input",ref:n,style:{display:i?void 0:"none"},value:r,autoFocus:!0,onKeyDown:a,onBlur:l,onChange:c}),nw(r,"Frame")+String.fromCharCode(8203)]})})),tw=function(t){let{id:n,name:o,width:r,height:i}=t;const s=Hc(),a=ri("shape rotation",(()=>rd(s.getShapePageTransform(n).rotation())),[s,n]),l=Gm(n),c=(0,e.useRef)(null),d=(0,e.useCallback)((e=>{const t=$d(e);s.getEditingShapeId()!==n&&(s.dispatch({type:"pointer",name:"pointer_down",target:"shape",shape:s.getShape(n),...t}),e.preventDefault())}),[s,n]);(0,e.useEffect)((()=>{const e=c.current;e&&l&&(e.focus(),e.select(),requestAnimationFrame((()=>{document.activeElement!==e&&(e.focus(),e.select())})))}),[c,l]);const u=((a+Math.PI/4)*(2/Math.PI)+4)%4,h=["top","left","bottom","right"][Math.floor(u)];let p;switch(h){case"top":p="";break;case"right":p="translate(".concat(vd(r),"px, 0px) rotate(90deg)");break;case"bottom":p="translate(".concat(vd(r),"px, ").concat(vd(i),"px) rotate(180deg)");break;case"left":p="translate(0px, ".concat(vd(i),"px) rotate(270deg)")}return(0,Rc.jsx)("div",{className:"tl-frame-heading",style:{overflow:l?"visible":"hidden",maxWidth:"calc(var(--tl-zoom) * ".concat("top"===h||"bottom"===h?Math.ceil(r):Math.ceil(i),"px + var(--space-5))"),bottom:"100%",transform:"".concat(p," scale(var(--tl-scale)) translateX(calc(-1 * var(--space-3))")},onPointerDown:d,children:(0,Rc.jsx)("div",{className:"tl-frame-heading-hit-area",children:(0,Rc.jsx)(ew,{ref:c,id:n,name:o,isEditing:l})})})};function nw(e,t){return e.match(/^\s*$/)?t:e}class ow extends Um{constructor(){super(...arguments),wr(this,"canBind",(()=>!0)),wr(this,"canEdit",(()=>!0)),wr(this,"canReceiveNewChildrenOfType",((e,t)=>!e.isLocked)),wr(this,"canDropShapes",((e,t)=>!e.isLocked)),wr(this,"onDragShapesOver",((e,t)=>t.every((t=>t.parentId===e.id))?{shouldHint:!1}:(this.editor.reparentShapes(t.map((e=>e.id)),e.id),{shouldHint:!0}))),wr(this,"onDragShapesOut",((e,t)=>{const n=this.editor.getShape(e.parentId);n&&this.editor.isShapeOfType(n,"group")?this.editor.reparentShapes(t,n.id):this.editor.reparentShapes(t,this.editor.getCurrentPageId())})),wr(this,"onResizeEnd",(e=>{const t=this.editor.getShapePageBounds(e),n=this.editor.getSortedChildIdsForParent(e.id),o=[];for(const r of n){const e=this.editor.getShapePageBounds(r);t.includes(e)||o.push(r)}o.length>0&&this.editor.reparentShapes(o,this.editor.getCurrentPageId())})),wr(this,"onResize",((e,t)=>Fm(e,t)))}getDefaultProps(){return{w:320,h:180,name:""}}getGeometry(e){return new vf({width:e.props.w,height:e.props.h,isFilled:!1})}component(e){const t=this.editor.getShapeGeometry(e).bounds,n=Gy(),o=ri("is creating this shape",(()=>{var t;const n=this.editor.getStateDescendant("select.resizing");if(!n)return!1;if(!n.getIsActive())return!1;const o=null===n||void 0===n?void 0:n.info;return!!o&&(o.isCreating&&(null===(t=this.editor.getOnlySelectedShape())||void 0===t?void 0:t.id)===e.id)}),[e.id]);return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(nf,{children:(0,Rc.jsx)("rect",{className:Nc("tl-frame__body",{"tl-frame__creating":o}),width:t.width,height:t.height,fill:n.solid,stroke:n.text})}),o?null:(0,Rc.jsx)(tw,{id:e.id,name:e.props.name,width:t.width,height:t.height})]})}toSvg(e,t){const n=kl({isDarkMode:t.isDarkMode}),o=document.createElementNS("http://www.w3.org/2000/svg","g"),r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("width",e.props.w.toString()),r.setAttribute("height",e.props.h.toString()),r.setAttribute("fill",n.solid),r.setAttribute("stroke",n.black.solid),r.setAttribute("stroke-width","1"),r.setAttribute("rx","1"),r.setAttribute("ry","1"),o.appendChild(r);const i=((rd(this.editor.getShapePageTransform(e.id).rotation())+Math.PI/4)*(2/Math.PI)+4)%4;let s;switch(["top","left","bottom","right"][Math.floor(i)]){case"top":default:s="";break;case"right":s="translate(".concat(vd(e.props.w),"px, 0px) rotate(90deg)");break;case"bottom":s="translate(".concat(vd(e.props.w),"px, ").concat(vd(e.props.h),"px) rotate(180deg)");break;case"left":s="translate(0px, ".concat(vd(e.props.h),"px) rotate(270deg)")}const a={fontSize:12,fontFamily:"Inter, sans-serif",textAlign:"start",width:e.props.w,height:32,padding:0,lineHeight:1,fontStyle:"normal",fontWeight:"normal",overflow:"truncate-ellipsis",verticalTextAlign:"middle"},l=this.editor.textMeasure.measureTextSpans(nw(e.props.name,"Frame")+String.fromCharCode(8203),a),c=l[0],d=li(l),u=d.box.w+d.box.x-c.box.x,h=Zy(this.editor,l,{offsetY:-a.height-2,...a});h.style.setProperty("transform",s);const p=document.createElementNS("http://www.w3.org/2000/svg","rect");return p.setAttribute("x","-8px"),p.setAttribute("y",-a.height-4+"px"),p.setAttribute("width",u+16+"px"),p.setAttribute("height","".concat(a.height,"px")),p.setAttribute("rx","4px"),p.setAttribute("ry","4px"),p.setAttribute("fill",n.background),o.appendChild(p),o.appendChild(h),o}indicator(e){const t=this.editor.getShapeGeometry(e).bounds;return(0,Rc.jsx)("rect",{width:vd(t.width),height:vd(t.height),className:"tl-frame-indicator"})}providesBackgroundForChildren(){return!0}}wr(ow,"type","frame"),wr(ow,"props",Jl),wr(ow,"migrations",ec);const rw=e.memo((function(e){let{id:t,type:n,text:o,size:r,labelColor:i,font:s,align:a,verticalAlign:l,wrap:c,bounds:d}=e;const{rInput:u,isEmpty:h,isEditing:p,handleFocus:f,handleChange:g,handleKeyDown:m,handleBlur:v,handleInputPointerDown:y,handleDoubleClick:b}=xb(t,n,o),w=my.normalizeTextForDom(o),x=w.length>0,S=function(e){return"start-legacy"===e||"middle-legacy"===e||"end-legacy"===e}(a),_=Gy();return p||x?(0,Rc.jsx)("div",{className:"tl-text-label","data-font":s,"data-align":a,"data-hastext":!h,"data-isediting":p,"data-textwrap":!!c,style:{justifyContent:"middle"===a||S?"center":a,alignItems:"middle"===l?"center":l,...d?{top:d.minY,left:d.minX,width:d.width,height:d.height,position:"absolute"}:{}},children:(0,Rc.jsxs)("div",{className:"tl-text-label__inner",style:{fontSize:Lv[r],lineHeight:Lv[r]*Mv.lineHeight+"px",minHeight:Mv.lineHeight+32,minWidth:0,color:_[i].solid},children:[(0,Rc.jsx)("div",{className:"tl-text tl-text-content",dir:"ltr",children:w}),p&&(0,Rc.jsx)("textarea",{ref:u,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:o,onFocus:f,onChange:g,onKeyDown:m,onBlur:v,onTouchEnd:Xd,onContextMenu:Xd,onPointerDown:y,onDoubleClick:b})]})}):null}));function iw(e){let{bounds:t,editor:n,font:o,shape:r}=e;const i={fontSize:Lv[r.props.size],fontFamily:o,textAlign:r.props.align,verticalTextAlign:r.props.verticalAlign,width:Math.ceil(t.width),height:Math.ceil(t.height),padding:16,lineHeight:Mv.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap",offsetX:0},s=n.textMeasure.measureTextSpans(r.props.text,i),a=function(e,t,n,o){if(("start-legacy"===e||"end-legacy"===e)&&0!==n.length){const r=mh.From(n[0].box);for(const{box:e}of n)r.union(e);if("start-legacy"===e)return(o-2*t-r.width)/2;if("end-legacy"===e)return-(o-2*t-r.width)/2}}(r.props.align,16,s,t.width);a&&(i.offsetX=a);return Zy(0,s,i)}function sw(e){return"".concat(vd(e.x),",").concat(vd(e.y)," ")}function aw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,n=0,o=0,r=0;function i(){const e=t^t<<11;return t=n,n=o,o=r,r^=(r>>>19^e^e>>>8)>>>0,r/4294967296*2}for(let s=0;s<e.length+64;s++)t^=0|e.charCodeAt(s),i();return i}function lw(e){let t="M";let n,o,r;for(let i=0,s=e.length;i<s;i+=3)n=e[i],o=e[i+1],r=e[i+2],t+="".concat(sw(n),"L").concat(sw(o),"Q").concat(sw(r));return t+="".concat(sw(e[0])),t}function cw(e,t,n,o,r){const i=[],s=aw(e);let a,l=t[0];const c=t.length;for(let d=0,u=c*r;d<u;d++){a=Gc.AddXY(t[(d+1)%c],s()*n,s()*n);const e=Gc.Sub(a,l),r=Gc.Len(e),u=Gc.Div(e,r).mul(Math.min(r/4,o));i.push(Gc.Add(l,u),Gc.Add(a,u.neg()),a),l=a}return i}function dw(e,t,n){let o="M ".concat(sw(t[0]),"L"),r="M ".concat(sw(t[0]),"L");const i=n/3,s=2*n,a=aw(e);let l,c,d=t[0],u=t[0];for(let h=0,p=t.length-1;h<p;h++){l=t[h+1],c=Gc.AddXY(t[h+1],a()*i,a()*i);const e=Gc.Sub(l,d),n=Gc.Len(e),f=Gc.Div(e,n).mul(Math.min(n/4,s)),g=Gc.Add(d,f),m=Gc.Add(l,f.neg()),v=Gc.Sub(c,u),y=Gc.Len(v),b=Gc.Div(v,y).mul(Math.min(y/4,s)),w=Gc.Add(u,b),x=Gc.Add(c,b.neg());h===p-1?(o+="".concat(sw(g),"L ").concat(sw(l)),r+="".concat(sw(w),"L ").concat(sw(c))):(o+="".concat(sw(g),"L ").concat(sw(m),"Q ").concat(sw(l)),r+="".concat(sw(w),"L ").concat(sw(x),"Q ").concat(sw(c)),d=l,u=c)}return[o,o+r]}function uw(e,t){const n=Math.min(e,t)/2,o=Math.max(e,t)-2*n;return Math.PI*(2*n)+2*o}const hw=(e,t,n,o,r)=>{switch(e){case"s":return t;case"m":return n;case"l":return o;case"xl":return r}};function pw(e,t,n,o){const r=xi(n),i=uw(e,t),s=Math.max(Math.ceil(i/hw(o,50,70,100,130)),6,Math.ceil(i/Math.min(e,t))),a=i/s*.2,l=Math.max(e-2*a,1),c=Math.max(t-2*a,1),d=(e-l)/2,u=(t-c)/2,h=uw(l,c)/s,p=function(e,t,n){const o=Math.min(e,t)/2,r=Math.max(e,t)-2*o,i=(Math.PI*(2*o)+2*r)/n,s=e>t?[{type:"straight",start:new Gc(o,0),delta:new Gc(1,0)},{type:"arc",center:new Gc(e-o,o),startAngle:-$c/2},{type:"straight",start:new Gc(e-o,t),delta:new Gc(-1,0)},{type:"arc",center:new Gc(o,o),startAngle:$c/2}]:[{type:"straight",start:new Gc(e,o),delta:new Gc(0,1)},{type:"arc",center:new Gc(o,t-o),startAngle:0},{type:"straight",start:new Gc(0,t-o),delta:new Gc(0,-1)},{type:"arc",center:new Gc(o,o),startAngle:$c}];let a=0;const l=[];for(let c=0;c<n;c++){const e=s[0];"straight"===e.type?l.push(Gc.Add(e.start,Gc.Mul(e.delta,a))):l.push(ud(e.center,o,e.startAngle+a/o)),a+=i;let t="straight"===e.type?r:$c*o;for(;a>t;)a-=t,s.push(s.shift()),t="straight"===s[0].type?r:$c*o}return l}(l,c,s).map((e=>e.addXY(d,u))),f=e<20?0:.3*a,g=t<20?0:.3*a,m=p.slice(0);for(let y=0;y<Math.floor(s/2);y++)m[y]=Gc.AddXY(m[y],r()*f,r()*g),m[s-y-1]=Gc.AddXY(m[s-y-1],r()*f,r()*g);const v=[];for(let y=0;y<m.length;y++){const n=y===m.length-1?0:y+1,o=m[y],r=m[n],i=p[y],s=p[n],a=Gc.Average([i,s]),l=Gc.Angle(i,s)-Math.PI/2,c=Gc.Dist(i,s),f=h-c,g=Gc.Dist(o,r)/c,b=(Math.max(d,u)+f)*g,w=Gc.Add(a,Gc.FromAngle(l,b));w.x<0?w.x=0:w.x>e&&(w.x=e),w.y<0?w.y=0:w.y>t&&(w.y=t);const x=fw(o,r,w),S=Gc.Dist(x||Gc.Average([o,r]),o);v.push({leftPoint:o,rightPoint:r,arcPoint:w,center:x,radius:S})}return v}function fw(e,t,n){const o=e.x*(t.y-n.y)-e.y*(t.x-n.x)+t.x*n.y-n.x*t.y,r=-((e.x*e.x+e.y*e.y)*(n.y-t.y)+(t.x*t.x+t.y*t.y)*(e.y-n.y)+(n.x*n.x+n.y*n.y)*(t.y-e.y))/(2*o),i=-((e.x*e.x+e.y*e.y)*(t.x-n.x)+(t.x*t.x+t.y*t.y)*(n.x-e.x)+(n.x*n.x+n.y*n.y)*(e.x-t.x))/(2*o);return Number.isFinite(r)&&Number.isFinite(i)?new Gc(r,i):null}function gw(e,t,n,o){const r=[],i=pw(e,t,n,o);for(const{center:s,radius:a,leftPoint:l,rightPoint:c}of i)r.push(...yw(l,c,s,a,10));return r}function mw(e,t,n,o){const r=pw(e,t,n,o);let i="M".concat(vd(r[0].leftPoint.x),",").concat(vd(r[0].leftPoint.y));for(const{leftPoint:s,rightPoint:a,radius:l,center:c}of r){if(null===c){i+=" L".concat(vd(a.x),",").concat(vd(a.y));continue}const e=bw(s,a,c)?"0":"1";i+=" A".concat(vd(l),",").concat(vd(l)," 0 ").concat(e,",1 ").concat(vd(a.x),",").concat(vd(a.y))}return i+=" Z",i}function vw(e,t,n,o){const r=xi(n),i="s"===o?.5:"m"===o?.7:"l"===o?.9:1.6,s=e=>e+r()*i*2,a=pw(e,t,n,o),l=a.reduce(((e,t)=>e+Gc.Dist(t.leftPoint,t.rightPoint)),0)/a.length>15*i?e=>new Gc(s(e.x),s(e.y)):e=>e;let c="M".concat(vd(a[0].leftPoint.x),",").concat(vd(a[0].leftPoint.y)),d=l(a[0].leftPoint),u="M".concat(vd(d.x),",").concat(vd(d.y));for(const{leftPoint:h,center:p,rightPoint:f,radius:g,arcPoint:m}of a){if(null===p){c+=" L".concat(vd(f.x),",").concat(vd(f.y));const e=l(f);u+=" L".concat(vd(e.x),",").concat(vd(e.y)),d=e;continue}const e=bw(h,f,p)?"0":"1";c+=" A".concat(vd(g),",").concat(vd(g)," 0 ").concat(e,",1 ").concat(vd(f.x),",").concat(vd(f.y));const t=l(f),n=fw(d,t,l(m));if(!n){u+=" L".concat(vd(t.x),",").concat(vd(t.y)),d=t;continue}const o=Math.abs(Gc.Dist(n,d));u+=" A".concat(vd(o),",").concat(vd(o)," 0 ").concat(e,",1 ").concat(vd(t.x),",").concat(vd(t.y)),d=t}return c+u+" Z"}function yw(e,t,n,o,r){if(null===n)return[Gc.From(e),Gc.From(t)];const i=[],s=Gc.Angle(n,e),a=id(s,Gc.Angle(n,t));for(let l=0;l<r;l++){const e=ud(n,o,s+a*(l/(r-1)));i.push(e)}return i}function bw(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)>0}const ww=e.memo((function(e){let{dash:t,fill:n,color:o,strokeWidth:r,w:i,h:s,id:a,size:l}=e;const c=Gy(),d=mw(i,s,a,l),u=pw(i,s,a,l);return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(qy,{theme:c,d:d,fill:n,color:o}),(0,Rc.jsx)("g",{strokeWidth:r,stroke:c[o].solid,fill:"none",pointerEvents:"all",children:u.map(((e,n)=>{let{leftPoint:o,rightPoint:i,center:s,radius:a}=e;const l=s?a*rd(rd(Gc.Angle(s,i))-rd(Gc.Angle(s,o))):Gc.Dist(o,i),{strokeDasharray:c,strokeDashoffset:d}=ab(l,r,{style:t,start:"outset",end:"outset"});return(0,Rc.jsx)("path",{d:s?"M".concat(o.x,",").concat(o.y,"A").concat(a,",").concat(a,",0,0,1,").concat(i.x,",").concat(i.y):"M".concat(o.x,",").concat(o.y,"L").concat(i.x,",").concat(i.y),strokeDasharray:c,strokeDashoffset:d},n)}))})]})}));const xw=e.memo((function(e){let{w:t,h:n,strokeWidth:o,dash:r,color:i,fill:s}=e;const a=Gy(),l=t/2,c=n/2,d=Math.max(0,l),u=Math.max(0,c),h=od(d,u),{strokeDasharray:p,strokeDashoffset:f}=ab(h<64?2*h:h,o,{style:r,snap:4,closed:!0}),g="M".concat(l-d,",").concat(c,"a").concat(d,",").concat(u,",0,1,1,").concat(2*d,",0a").concat(d,",").concat(u,",0,1,1,-").concat(2*d,",0");return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(qy,{theme:a,d:g,color:i,fill:s}),(0,Rc.jsx)("path",{d:g,strokeWidth:o,width:vd(t),height:vd(n),fill:"none",stroke:a[i].solid,strokeDasharray:p,strokeDashoffset:f,pointerEvents:"all"})]})}));function Sw(e,t){if(t>e){const n=e/2;return"\n    M0,".concat(n,"\n    a").concat(n,",").concat(n,",0,1,1,").concat(2*n,",0\n    L").concat(e,",").concat(t-n,"\n    a").concat(n,",").concat(n,",0,1,1,-").concat(2*n,",0\n    Z")}const n=t/2;return"\n    M".concat(n,",0\n    L").concat(e-n,",0\n    a").concat(n,",").concat(n,",0,1,1,0,").concat(2*n,"\n    L").concat(n,",").concat(t,"\n    a").concat(n,",").concat(n,",0,1,1,0,").concat(2*-n,"\n    Z")}function _w(e,t){if(e>t){const n=t/2;return od(n,n)+2*(e-2*n)}const n=e/2;return od(n,n)+2*(t-2*n)}const kw=e.memo((function(e){let{w:t,h:n,strokeWidth:o,dash:r,color:i,fill:s}=e;const a=Gy(),l=Sw(t,n),c=_w(t,n),{strokeDasharray:d,strokeDashoffset:u}=ab(c<64?2*c:c,o,{style:r,snap:4,start:"outset",end:"outset",closed:!0});return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(qy,{theme:a,d:l,color:i,fill:s}),(0,Rc.jsx)("path",{d:l,strokeWidth:o,width:vd(t),height:vd(n),fill:"none",stroke:a[i].solid,strokeDasharray:d,strokeDashoffset:u,pointerEvents:"all"})]})}));function Cw(e){let{w:t,h:n,strokeWidth:o,dash:r,color:i,theme:s,fill:a}=e;const l=Sw(t,n),c=_w(t,n),{strokeDasharray:d,strokeDashoffset:u}=ab(c<64?2*c:c,o,{style:r,snap:4,closed:!0}),h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("d",l),h.setAttribute("stroke-width",o.toString()),h.setAttribute("width",t.toString()),h.setAttribute("height",n.toString()),h.setAttribute("fill","none"),h.setAttribute("stroke",s[i].solid),h.setAttribute("stroke-dasharray",d),h.setAttribute("stroke-dashoffset",u);return $y(h,Xy({d:l,fill:a,color:i,theme:s}))}const Ew=e.memo((function(e){let{dash:t,fill:n,color:o,strokeWidth:r,outline:i,lines:s}=e;const a=Gy(),l="M"+i[0]+"L"+i.slice(1)+"Z";return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(qy,{theme:a,d:l,fill:n,color:o}),(0,Rc.jsxs)("g",{strokeWidth:r,stroke:a[o].solid,fill:"none",pointerEvents:"all",children:[Array.from(Array(i.length)).map(((e,n)=>{const o=i[n],s=i[(n+1)%i.length],a=Gc.Dist(o,s),{strokeDasharray:l,strokeDashoffset:c}=ab(a,r,{style:t,start:"outset",end:"outset"});return(0,Rc.jsx)("line",{x1:o.x,y1:o.y,x2:s.x,y2:s.y,strokeDasharray:l,strokeDashoffset:c},n)})),s&&s.map(((e,n)=>{let[i,s]=e;const l=Gc.Dist(i,s),{strokeDasharray:c,strokeDashoffset:d}=ab(l,r,{style:t,start:"skip",end:"outset",snap:"dotted"===t?4:void 0});return(0,Rc.jsx)("path",{d:"M".concat(i.x,",").concat(i.y,"L").concat(s.x,",").concat(s.y),stroke:a[o].solid,strokeWidth:r,fill:"none",strokeDasharray:c,strokeDashoffset:d},"line_fg_".concat(n))}))]})]})}));const Iw=e.memo((function(e){let{fill:t,color:n,strokeWidth:o,w:r,h:i,id:s,size:a}=e;const l=Gy(),c=vw(r,i,s,a);return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(qy,{theme:l,d:c,fill:t,color:n}),(0,Rc.jsx)("path",{d:c,stroke:l[n].solid,strokeWidth:o,fill:"none"})]})}));e.memo((function(e){let{id:t,w:n,h:o,strokeWidth:r,fill:i,color:s}=e;const a=Gy(),l=Mw(t,n,o,r),c=Aw(t,n,o,r);return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(qy,{theme:a,d:l,color:s,fill:i}),(0,Rc.jsx)("path",{d:c,fill:a[s].solid,strokeWidth:0,pointerEvents:"all"})]})}));function Tw(e){return{size:1+e,thinning:.25,end:{taper:e},start:{taper:e},streamline:0,smoothing:1,simulatePressure:!1}}function Pw(e,t,n,o){const r=xi(e),i=t/2,s=n/2,a=od(i,s),l=[],c=Qc*r(),d=Qc+Zc/2+Math.abs(r())*Zc,u=Math.max(16,a/10);for(let h=0;h<u;h++){const e=h/(u-1),o=c+e*d,a=Math.cos(o),p=Math.sin(o);l.push(new Gc(i*a+.5*t+.05*r(),s*p+n/2+.05*r(),Math.min(1,.5+Math.abs(.5-(r()>0?Kc.easeInOutSine(e):Kc.easeInExpo(e)))/2)))}return bv(l,Tw(o))}function Aw(e,t,n,o){const r=Tw(o);return up(mv(Sv(Pw(e,t,n,o),r),r))}function Mw(e,t,n,o){return Rb(Pw(e,t,n,o))}const jw=e.memo((function(e){let{id:t,outline:n,lines:o,fill:r,color:i,strokeWidth:s}=e;const a=Gy();let l=lw(cw(t,n,s/3,2*s,2));if(o)for(const[d,u]of o)l+="M".concat(d.x,",").concat(d.y,"L").concat(u.x,",").concat(u.y);const c=lw(cw(t,n,0,2*s,1));return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(qy,{d:c,fill:r,color:i,theme:a}),(0,Rc.jsx)("path",{d:l,stroke:a[i].solid,strokeWidth:s,fill:"none"})]})}));const Ow=e.memo((function(e){let{fill:t,color:n,strokeWidth:o,w:r,h:i,id:s,size:a}=e;const l=Gy(),c=mw(r,i,s,a);return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(qy,{theme:l,d:c,fill:t,color:n}),(0,Rc.jsx)("path",{d:c,stroke:l[n].solid,strokeWidth:o,fill:"none"})]})}));const Lw=e.memo((function(e){let{w:t,h:n,strokeWidth:o,fill:r,color:i}=e;const s=Gy(),a=t/2,l=n/2,c=Math.max(0,a),d=Math.max(0,l),u="M".concat(a-c,",").concat(l,"a").concat(c,",").concat(d,",0,1,1,").concat(2*c,",0a").concat(c,",").concat(d,",0,1,1,-").concat(2*c,",0");return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(qy,{d:u,color:i,fill:r,theme:s}),(0,Rc.jsx)("path",{d:u,stroke:s[i].solid,strokeWidth:o,fill:"none"})]})}));const Bw=e.memo((function(e){let{w:t,h:n,strokeWidth:o,fill:r,color:i}=e;const s=Gy(),a=Rw(t,n);return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(qy,{d:a,color:i,fill:r,theme:s}),(0,Rc.jsx)("path",{d:a,stroke:s[i].solid,strokeWidth:o,fill:"none"})]})}));function Rw(e,t){let n;if(t>e){const o=e/2;n="\n    M0,".concat(o,"\n    a").concat(o,",").concat(o,",0,1,1,").concat(2*o,",0\n    L").concat(e,",").concat(t-o,"\n    a").concat(o,",").concat(o,",0,1,1,-").concat(2*o,",0\n    Z")}else{const o=t/2;n="\n    M".concat(o,",0\n    L").concat(e-o,",0\n    a").concat(o,",").concat(o,",0,1,1,0,").concat(2*o,"\n    L").concat(o,",").concat(t,"\n    a").concat(o,",").concat(o,",0,1,1,0,").concat(2*-o,"\n    Z")}return n}const Nw=e.memo((function(e){let{outline:t,lines:n,fill:o,color:r,strokeWidth:i}=e;const s=Gy();let a="M"+t[0]+"L"+t.slice(1)+"Z";if(n)for(const[l,c]of n)a+="M".concat(l.x,",").concat(l.y,"L").concat(c.x,",").concat(c.y);return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(qy,{d:a,fill:o,color:r,theme:s}),(0,Rc.jsx)("path",{d:a,stroke:s[r].solid,strokeWidth:i,fill:"none"})]})}));const Dw=51;class zw extends Um{constructor(){super(...arguments),wr(this,"canEdit",(()=>!0)),wr(this,"onEditEnd",(e=>{const{id:t,type:n,props:{text:o}}=e;o.trimEnd()!==e.props.text&&this.editor.updateShapes([{id:t,type:n,props:{text:o.trimEnd()}}])})),wr(this,"onResize",((e,t)=>{let{handle:n,newPoint:o,scaleX:r,scaleY:i,initialShape:s}=t,a=s.props.w*r,l=(s.props.h+s.props.growY)*i,c=0,d=0;if(e.props.text.trim()){let t=Math.max(Math.abs(a),Dw),n=Math.max(Math.abs(l),Dw);t<Dw&&n===Dw&&(t=Dw),t===Dw&&n<Dw&&(n=Dw);const o=Fw(this.editor,{...e,props:{...e.props,w:t,h:n}}),r=Math.max(Math.abs(a),o.w)*Math.sign(a),i=Math.max(Math.abs(l),o.h)*Math.sign(l);c=Math.abs(r)-Math.abs(a),d=Math.abs(i)-Math.abs(l),a=r,l=i}const u=new Gc(0,0);r<0&&(u.x+=a),"left"!==n&&"top_left"!==n&&"bottom_left"!==n||(u.x+=r<0?c:-c),i<0&&(u.y+=l),"top"!==n&&"top_left"!==n&&"top_right"!==n||(u.y+=i<0?d:-d);const{x:h,y:p}=u.rot(e.rotation).add(o);return{x:h,y:p,props:{w:Math.max(Math.abs(a),1),h:Math.max(Math.abs(l),1),growY:0}}})),wr(this,"onBeforeCreate",(e=>{if(!e.props.text)return e.props.growY?{...e,props:{...e.props,growY:0}}:void 0;const t=e.props.h,n=Fw(this.editor,e).h;let o=null;return n>t?o=n-t:e.props.growY&&(o=0),null!==o?{...e,props:{...e.props,growY:o}}:void 0})),wr(this,"onBeforeUpdate",((e,t)=>{const n=e.props.text,o=t.props.text;if(n===o&&e.props.font===t.props.font&&e.props.size===t.props.size)return;if(n&&!o)return{...t,props:{...t.props,growY:0}};const r=e.props.w,i=e.props.h,s=Fw(this.editor,t),a=s.w,l=s.h;if(!n&&o&&1===o.length){let n=Math.max(r,a),o=Math.max(i,l);return e.props.w<Dw&&e.props.h<Dw&&(n=Math.max(n,Dw),o=Math.max(o,Dw),n=Math.max(n,o),o=Math.max(n,o)),{...t,props:{...t.props,w:n,h:o,growY:0}}}let c=null;return l>i?c=l-i:e.props.growY&&(c=0),null!==c?{...t,props:{...t.props,growY:c,w:Math.max(t.props.w,a)}}:a>e.props.w?{...t,props:{...t.props,w:a}}:void 0})),wr(this,"onDoubleClick",(e=>{if(this.editor.inputs.altKey)switch(e.props.geo){case"rectangle":return{...e,props:{geo:"check-box"}};case"check-box":return{...e,props:{geo:"rectangle"}}}}))}getDefaultProps(){return{w:100,h:100,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"draw",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:""}}getGeometry(e){const t=Math.max(1,e.props.w),n=Math.max(1,e.props.h+e.props.growY),o=t/2,r=n/2,i=jv[e.props.size],s="none"!==e.props.fill;let a;switch(e.props.geo){case"cloud":a=new mf({points:gw(t,n,e.id,e.props.size),isFilled:s});break;case"triangle":a=new mf({points:[new Gc(o,0),new Gc(t,n),new Gc(0,n)],isFilled:s});break;case"diamond":a=new mf({points:[new Gc(o,0),new Gc(t,r),new Gc(o,n),new Gc(0,r)],isFilled:s});break;case"pentagon":a=new mf({points:hd(t,n,5),isFilled:s});break;case"hexagon":a=new mf({points:hd(t,n,6),isFilled:s});break;case"octagon":a=new mf({points:hd(t,n,8),isFilled:s});break;case"ellipse":a=new Jm({width:t,height:n,isFilled:s});break;case"oval":a=new ev({width:t,height:n,isFilled:s});break;case"star":{const e=5,o=Qc/e/2,r=2*Math.floor(e/4),i=2*e-r,l=0,c=2*Math.floor(e/2),d=Math.cos(r*o-Zc)*t/2,u=Math.cos(i*o-Zc)*t/2,h=Math.sin(l*o-Zc)*n/2,p=Math.sin(c*o-Zc)*n/2,f=t-Math.abs(d-u),g=n-Math.abs(p-h),m=1,v=(t-(t/2+u-(t/2-d)))/2,y=(n-(n/2+h-(n/2-p)))/2,b=(t+f)/2,w=(n+g)/2,x=b*m/2,S=w*m/2;a=new mf({points:Array.from(Array(2*e)).map(((e,t)=>{const n=t*o-Zc;return new Gc(v+(t%2?x:b)*Math.cos(n),y+(t%2?S:w)*Math.sin(n))})),isFilled:s});break}case"rhombus":{const e=Math.min(.38*t,.38*n);a=new mf({points:[new Gc(e,0),new Gc(t,0),new Gc(t-e,n),new Gc(0,n)],isFilled:s});break}case"rhombus-2":{const e=Math.min(.38*t,.38*n);a=new mf({points:[new Gc(0,0),new Gc(t-e,0),new Gc(t,n),new Gc(e,n)],isFilled:s});break}case"trapezoid":{const e=Math.min(.38*t,.38*n);a=new mf({points:[new Gc(e,0),new Gc(t-e,0),new Gc(t,n),new Gc(0,n)],isFilled:s});break}case"arrow-right":{const e=.38*Math.min(t,n),o=.16*n;a=new mf({points:[new Gc(0,o),new Gc(t-e,o),new Gc(t-e,0),new Gc(t,n/2),new Gc(t-e,n),new Gc(t-e,n-o),new Gc(0,n-o)],isFilled:s});break}case"arrow-left":{const e=.38*Math.min(t,n),o=.16*n;a=new mf({points:[new Gc(e,0),new Gc(e,o),new Gc(t,o),new Gc(t,n-o),new Gc(e,n-o),new Gc(e,n),new Gc(0,n/2)],isFilled:s});break}case"arrow-up":{const e=.16*t,o=.38*Math.min(t,n);a=new mf({points:[new Gc(t/2,0),new Gc(t,o),new Gc(t-e,o),new Gc(t-e,n),new Gc(e,n),new Gc(e,o),new Gc(0,o)],isFilled:s});break}case"arrow-down":{const e=.16*t,o=.38*Math.min(t,n);a=new mf({points:[new Gc(e,0),new Gc(t-e,0),new Gc(t-e,n-o),new Gc(t,n-o),new Gc(t/2,n),new Gc(0,n-o),new Gc(e,n-o)],isFilled:s});break}case"check-box":case"x-box":case"rectangle":a=new vf({width:t,height:n,isFilled:s})}const l=Fw(this.editor,e),c=Math.min(t,Math.max(l.w,Math.min(32,Math.max(1,t-8)))),d=Math.min(n,Math.max(l.h,Math.min(32,Math.max(1,t-8)))),u=Uw(e.props,i),h=u?u.map((e=>new gf({points:e}))):[];return new xh({children:[a,new vf({x:"start"===e.props.align?0:"end"===e.props.align?t-c:(t-c)/2,y:"start"===e.props.verticalAlign?0:"end"===e.props.verticalAlign?n-d:(n-d)/2,width:c,height:d,isFilled:!0,isLabel:!0}),...h]})}getHandleSnapGeometry(e){const t=this.getGeometry(e),n=t.children[0];switch(e.props.geo){case"arrow-down":case"arrow-left":case"arrow-right":case"arrow-up":case"check-box":case"diamond":case"hexagon":case"octagon":case"pentagon":case"rectangle":case"rhombus":case"rhombus-2":case"star":case"trapezoid":case"triangle":case"x-box":return{outline:n,points:[...n.getVertices(),t.bounds.center]};case"cloud":case"ellipse":case"oval":return{outline:n,points:[t.bounds.center]};default:ui(e.props.geo)}}component(e){const{id:t,type:n,props:o}=e,r=jv[o.size],{w:i,color:s,labelColor:a,fill:l,dash:c,growY:d,font:u,align:h,verticalAlign:p,size:f,text:g}=o;return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(nf,{id:t,children:(()=>{const n=o.h+d;switch(o.geo){case"cloud":if("solid"===c)return(0,Rc.jsx)(Ow,{color:s,fill:l,strokeWidth:r,w:i,h:n,id:t,size:f});if("dashed"===c||"dotted"===c)return(0,Rc.jsx)(ww,{color:s,fill:l,strokeWidth:r,w:i,h:n,id:t,size:f,dash:c});if("draw"===c)return(0,Rc.jsx)(Iw,{color:s,fill:l,strokeWidth:r,w:i,h:n,id:t,size:f});break;case"ellipse":if("solid"===c)return(0,Rc.jsx)(Lw,{strokeWidth:r,w:i,h:n,color:s,fill:l});if("dashed"===c||"dotted"===c)return(0,Rc.jsx)(xw,{id:t,strokeWidth:r,w:i,h:n,dash:c,color:s,fill:l});if("draw"===c)return(0,Rc.jsx)(Lw,{strokeWidth:r,w:i,h:n,color:s,fill:l});break;case"oval":if("solid"===c)return(0,Rc.jsx)(Bw,{strokeWidth:r,w:i,h:n,color:s,fill:l});if("dashed"===c||"dotted"===c)return(0,Rc.jsx)(kw,{id:t,strokeWidth:r,w:i,h:n,dash:c,color:s,fill:l});if("draw"===c)return(0,Rc.jsx)(Bw,{strokeWidth:r,w:i,h:n,color:s,fill:l});break;default:{const n=this.editor.getShapeGeometry(e),o=n instanceof xh?n.children[0].vertices:n.vertices,i=Uw(e.props,r);if("solid"===c)return(0,Rc.jsx)(Nw,{fill:l,color:s,strokeWidth:r,outline:o,lines:i});if("dashed"===c||"dotted"===c)return(0,Rc.jsx)(Ew,{dash:c,fill:l,color:s,strokeWidth:r,outline:o,lines:i});if("draw"===c)return(0,Rc.jsx)(jw,{id:t,fill:l,color:s,strokeWidth:r,outline:o,lines:i})}}})()}),(0,Rc.jsxs)(zm,{id:e.id,style:{overflow:"hidden",width:e.props.w,height:e.props.h+o.growY},children:[(0,Rc.jsx)(rw,{id:t,type:n,font:u,fill:l,size:f,align:h,verticalAlign:p,text:g,labelColor:a,wrap:!0,bounds:"cloud"===o.geo?this.getGeometry(e).bounds:void 0}),e.props.url&&(0,Rc.jsx)(Pb,{url:e.props.url,zoomLevel:this.editor.getZoomLevel()})]})]})}indicator(e){const{id:t,props:n}=e,{w:o,size:r}=n,i=n.h+n.growY,s=jv[r];switch(n.geo){case"ellipse":return"draw"===n.dash?(0,Rc.jsx)("path",{d:Mw(t,o,i,s)}):(0,Rc.jsx)("ellipse",{cx:o/2,cy:i/2,rx:o/2,ry:i/2});case"oval":return(0,Rc.jsx)("path",{d:Rw(o,i)});case"cloud":return(0,Rc.jsx)("path",{d:mw(o,i,t,r)});default:{const o=this.editor.getShapeGeometry(e),r=o instanceof xh?o.children[0].vertices:o.vertices;let i;if("draw"===n.dash){i=lw(cw(t,r,0,2*s,1))}else i="M"+r[0]+"L"+r.slice(1)+"Z";const a=Uw(e.props,s);if(a)for(const[e,t]of a)i+="M".concat(e.x,",").concat(e.y,"L").concat(t.x,",").concat(t.y);return(0,Rc.jsx)("path",{d:i})}}}toSvg(e,t){const{id:n,props:o}=e,r=jv[o.size],i=kl({isDarkMode:t.isDarkMode});let s;switch(t.addExportDef(Jy(e.props.fill,i)),o.geo){case"ellipse":switch(o.dash){case"draw":s=function(e){let{id:t,w:n,h:o,strokeWidth:r,fill:i,color:s,theme:a}=e;const l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("d",Aw(t,n,o,r)),l.setAttribute("fill",a[s].solid),$y(l,Xy({d:Mw(t,n,o,r),fill:i,color:s,theme:a}))}({id:n,w:o.w,h:o.h,color:o.color,fill:o.fill,strokeWidth:r,theme:i});break;case"solid":s=function(e){let{w:t,h:n,strokeWidth:o,fill:r,color:i,theme:s}=e;const a=t/2,l=n/2,c=Math.max(0,a),d=Math.max(0,l),u="M".concat(a-c,",").concat(l,"a").concat(c,",").concat(d,",0,1,1,").concat(2*c,",0a").concat(c,",").concat(d,",0,1,1,-").concat(2*c,",0"),h=document.createElementNS("http://www.w3.org/2000/svg","path");return h.setAttribute("d",u),h.setAttribute("stroke-width",o.toString()),h.setAttribute("width",t.toString()),h.setAttribute("height",n.toString()),h.setAttribute("fill","none"),h.setAttribute("stroke",s[i].solid),$y(h,Xy({d:u,fill:r,color:i,theme:s}))}({strokeWidth:r,w:o.w,h:o.h,color:o.color,fill:o.fill,theme:i});break;default:s=function(e){let{w:t,h:n,strokeWidth:o,dash:r,color:i,theme:s,fill:a}=e;const l=t/2,c=n/2,d=Math.max(0,l-o/2),u=Math.max(0,c-o/2),h=od(d,u),{strokeDasharray:p,strokeDashoffset:f}=ab(h<64?2*h:h,o,{style:r,snap:4,closed:!0}),g="M".concat(l-d,",").concat(c,"a").concat(d,",").concat(u,",0,1,1,").concat(2*d,",0a").concat(d,",").concat(u,",0,1,1,-").concat(2*d,",0"),m=document.createElementNS("http://www.w3.org/2000/svg","path");return m.setAttribute("d",g),m.setAttribute("stroke-width",o.toString()),m.setAttribute("width",t.toString()),m.setAttribute("height",n.toString()),m.setAttribute("fill","none"),m.setAttribute("stroke",s[i].solid),m.setAttribute("stroke-dasharray",p),m.setAttribute("stroke-dashoffset",f),$y(m,Xy({d:g,fill:a,color:i,theme:s}))}({id:n,strokeWidth:r,w:o.w,h:o.h,dash:o.dash,color:o.color,fill:o.fill,theme:i})}break;case"oval":switch(o.dash){case"draw":default:s=Cw({id:n,strokeWidth:r,w:o.w,h:o.h,dash:o.dash,color:o.color,fill:o.fill,theme:i});break;case"solid":s=function(e){let{w:t,h:n,strokeWidth:o,fill:r,color:i,theme:s}=e;const a=Rw(t,n),l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("d",a),l.setAttribute("stroke-width",o.toString()),l.setAttribute("width",t.toString()),l.setAttribute("height",n.toString()),l.setAttribute("fill","none"),l.setAttribute("stroke",s[i].solid),$y(l,Xy({d:a,fill:r,color:i,theme:s}))}({strokeWidth:r,w:o.w,h:o.h,color:o.color,fill:o.fill,theme:i})}break;case"cloud":switch(o.dash){case"draw":s=function(e){let{fill:t,color:n,strokeWidth:o,theme:r,w:i,h:s,id:a,size:l}=e;const c=vw(i,s,a,l),d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d",c),d.setAttribute("stroke-width",o.toString()),d.setAttribute("stroke",r[n].solid),d.setAttribute("fill","none"),$y(d,Xy({d:c,fill:t,color:n,theme:r}))}({id:n,strokeWidth:r,w:o.w,h:o.h,color:o.color,fill:o.fill,size:o.size,theme:i});break;case"solid":s=function(e){let{fill:t,color:n,strokeWidth:o,theme:r,w:i,h:s,id:a,size:l}=e;const c=mw(i,s,a,l),d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d",c),d.setAttribute("stroke-width",o.toString()),d.setAttribute("stroke",r[n].solid),d.setAttribute("fill","none"),$y(d,Xy({d:c,fill:t,color:n,theme:r}))}({strokeWidth:r,w:o.w,h:o.h,color:o.color,fill:o.fill,size:o.size,id:n,theme:i});break;default:s=function(e){let{dash:t,fill:n,color:o,theme:r,strokeWidth:i,w:s,h:a,id:l,size:c}=e;const d=mw(s,a,l,c),u=pw(s,a,l,c),h=document.createElementNS("http://www.w3.org/2000/svg","g");h.setAttribute("stroke-width",i.toString()),h.setAttribute("stroke",r[o].solid),h.setAttribute("fill","none");for(const{leftPoint:p,rightPoint:f,center:g,radius:m}of u){const e=g?m*rd(rd(Gc.Angle(g,f))-rd(Gc.Angle(g,p))):Gc.Dist(p,f),{strokeDasharray:n,strokeDashoffset:o}=ab(e,i,{style:t,start:"outset",end:"outset"}),r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",g?"M".concat(p.x,",").concat(p.y,"A").concat(m,",").concat(m,",0,0,1,").concat(f.x,",").concat(f.y):"M".concat(p.x,",").concat(p.y,"L").concat(f.x,",").concat(f.y)),r.setAttribute("stroke-dasharray",n.toString()),r.setAttribute("stroke-dashoffset",o.toString()),h.appendChild(r)}return $y(h,Xy({d:d,fill:n,color:o,theme:r}))}({id:n,strokeWidth:r,w:o.w,h:o.h,dash:o.dash,color:o.color,fill:o.fill,theme:i,size:o.size})}break;default:{const t=this.editor.getShapeGeometry(e),a=t instanceof xh?t.children[0].vertices:t.vertices,l=Uw(e.props,r);switch(o.dash){case"draw":s=function(e){let{id:t,outline:n,lines:o,fill:r,color:i,theme:s,strokeWidth:a}=e,l=lw(cw(t,n,a/3,2*a,2));if(o)for(const[u,h]of o)l+="M".concat(u.x,",").concat(u.y,"L").concat(h.x,",").concat(h.y);const c=lw(cw(t,n,0,2*a,1)),d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d",l),d.setAttribute("fill","none"),d.setAttribute("stroke",s[i].solid),d.setAttribute("stroke-width",a.toString()),$y(d,Xy({d:c,fill:r,color:i,theme:s}))}({id:n,fill:o.fill,color:o.color,strokeWidth:r,outline:a,lines:l,theme:i});break;case"solid":s=function(e){let{outline:t,lines:n,fill:o,color:r,strokeWidth:i,theme:s}=e;const a="M"+t[0]+"L"+t.slice(1)+"Z",l=a;let c=a;if(n)for(const[u,h]of n)c+="M".concat(u.x,",").concat(u.y,"L").concat(h.x,",").concat(h.y);const d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d",c),d.setAttribute("stroke-width",i.toString()),d.setAttribute("stroke",s[r].solid),d.setAttribute("fill","none"),$y(d,Xy({d:l,fill:o,color:r,theme:s}))}({fill:o.fill,color:o.color,strokeWidth:r,outline:a,lines:l,theme:i});break;default:s=function(e){let{dash:t,fill:n,color:o,theme:r,strokeWidth:i,outline:s,lines:a}=e;const l=document.createElementNS("http://www.w3.org/2000/svg","g");if(l.setAttribute("stroke-width",i.toString()),l.setAttribute("stroke",r[o].solid),l.setAttribute("fill","none"),Array.from(Array(s.length)).forEach(((e,n)=>{const o=s[n],r=s[(n+1)%s.length],a=Gc.Dist(o,r),{strokeDasharray:c,strokeDashoffset:d}=ab(a,i,{style:t}),u=document.createElementNS("http://www.w3.org/2000/svg","line");u.setAttribute("x1",o.x.toString()),u.setAttribute("y1",o.y.toString()),u.setAttribute("x2",r.x.toString()),u.setAttribute("y2",r.y.toString()),u.setAttribute("stroke-dasharray",c.toString()),u.setAttribute("stroke-dashoffset",d.toString()),l.appendChild(u)})),a)for(const[d,u]of a){const e=Gc.Dist(d,u),{strokeDasharray:n,strokeDashoffset:o}=ab(e,i,{style:t,start:"skip",end:"skip",snap:"dotted"===t?4:2}),r=document.createElementNS("http://www.w3.org/2000/svg","line");r.setAttribute("x1",d.x.toString()),r.setAttribute("y1",d.y.toString()),r.setAttribute("x2",u.x.toString()),r.setAttribute("y2",u.y.toString()),r.setAttribute("stroke-dasharray",n.toString()),r.setAttribute("stroke-dashoffset",o.toString()),l.appendChild(r)}const c=Xy({d:"M"+s[0]+"L"+s.slice(1)+"Z",fill:n,color:o,theme:r});return $y(l,c)}({dash:o.dash,fill:o.fill,color:o.color,strokeWidth:r,outline:a,lines:l,theme:i})}break}}if(o.text){const n=this.editor.getShapeGeometry(e).bounds;t.addExportDef(Qy(e.props.font));const o=iw({editor:this.editor,shape:e,font:Al[e.props.font],bounds:n}),r=o.cloneNode(!0);r.setAttribute("fill",i[e.props.labelColor].solid),r.setAttribute("stroke","none");const a=o.cloneNode(!0);a.setAttribute("stroke-width","2"),a.setAttribute("fill",i.background),a.setAttribute("stroke",i.background);const l=document.createElementNS("http://www.w3.org/2000/svg","g");if(l.append(a),l.append(r),"g"===s.nodeName)return s.appendChild(l),s;{const e=document.createElementNS("http://www.w3.org/2000/svg","g");return e.appendChild(s),e.appendChild(l),e}}return s}getCanvasSvgDefs(){return[eb()]}}function Fw(e,t){const n=t.props.text;if(!n)return{w:0,h:0};const o=e.textMeasure.measureText("w",{...Mv,fontFamily:Rv[t.props.font],fontSize:Lv[t.props.size],maxWidth:100}),r=e.textMeasure.measureText(n,{...Mv,fontFamily:Rv[t.props.font],fontSize:Lv[t.props.size],minWidth:o.w+"px",maxWidth:Math.max(0,Math.ceil(o.w+{s:2,m:3.5,l:5,xl:10}[t.props.size]),Math.ceil(t.props.w-32))});return{w:r.w+32,h:r.h+32}}function Uw(e,t){switch(e.geo){case"x-box":return function(e,t,n,o){const r="draw"===o?.62:0;if("dashed"===o)return[[new Gc(0,0),new Gc(e/2,t/2)],[new Gc(e,t),new Gc(e/2,t/2)],[new Gc(0,t),new Gc(e/2,t/2)],[new Gc(e,0),new Gc(e/2,t/2)]];const i=t=>Math.max(0,Math.min(e,t)),s=e=>Math.max(0,Math.min(t,e));return[[new Gc(i(n*r),s(n*r)),new Gc(i(e-n*r),s(t-n*r))],[new Gc(i(n*r),s(t-n*r)),new Gc(i(e-n*r),s(n*r))]]}(e.w,e.h,t,e.dash);case"check-box":return function(e,t){const n=.82*Math.min(e,t),o=(e-n)/2,r=(t-n)/2,i=t=>Math.max(0,Math.min(e,t)),s=e=>Math.max(0,Math.min(t,e));return[[new Gc(i(o+.25*n),s(r+.52*n)),new Gc(i(o+.45*n),s(r+.82*n))],[new Gc(i(o+.45*n),s(r+.82*n)),new Gc(i(o+.82*n),s(r+.22*n))]]}(e.w,e.h);default:return}}wr(zw,"type","geo"),wr(zw,"props",rc),wr(zw,"migrations",sc);class Hw extends yf{constructor(){super(...arguments),wr(this,"hideResizeHandles",(e=>Yw(e))),wr(this,"hideRotateHandle",(e=>Yw(e))),wr(this,"hideSelectionBoundsFg",(e=>Yw(e))),wr(this,"onResize",((e,t)=>{const{scaleX:n,scaleY:o}=t,r=[];for(const i of e.props.segments)r.push({...i,points:i.points.map((e=>{let{x:t,y:r,z:i}=e;return{x:n*t,y:o*r,z:i}}))});return{props:{segments:r}}}))}getDefaultProps(){return{segments:[],color:"black",size:"m",isComplete:!1,isPen:!1}}getGeometry(e){const t=qw(e);if(Yw(e))return new $m({x:-t/2,y:-t/2,radius:t/2,isFilled:!0});const{strokePoints:n,sw:o}=Vw(e,t,!0),r=Kb({strokeWidth:o,showAsComplete:!0});return Sv(n,r),new mf({points:mv(n,r),isFilled:!0})}component(e){return(0,Rc.jsx)(Kw,{strokeWidth:qw(e),shape:e,opacity:.35})}backgroundComponent(e){return(0,Rc.jsx)(Kw,{strokeWidth:qw(e),shape:e,opacity:.82})}indicator(e){var t;const n=Fb(),o=qw(e),r=qb(e.props.segments);let i=o;n||e.props.isPen||1!==r.length||(i+=xi(e.id)()*(o/6));const s=bv(r,Kb({strokeWidth:o,showAsComplete:e.props.isComplete||"straight"===(null===(t=li(e.props.segments))||void 0===t?void 0:t.type)}));let a;return a=s.length<2?function(e,t){const n=t/2;return"M ".concat(e.x," ").concat(e.y," m -").concat(n,", 0 a ").concat(n,",").concat(n," 0 1,0 ").concat(2*n,",0 a ").concat(n,",").concat(n," 0 1,0 -").concat(2*n,",0")}(r[0],i):Rb(s,!1),(0,Rc.jsx)("path",{d:a})}toSvg(e,t){const n=kl({isDarkMode:t.isDarkMode});return Gw(qw(e),e,.35,n)}toBackgroundSvg(e){const t=kl({isDarkMode:this.editor.user.getIsDarkMode()});return Gw(qw(e),e,.82,t)}}function Vw(e,t,n){var o;const r=qb(e.props.segments),i=e.props.isComplete||"straight"===(null===(o=li(e.props.segments))||void 0===o?void 0:o.type);let s=t;n||e.props.isPen||1!==r.length||(s+=xi(e.id)()*(t/6));return{strokePoints:bv(r,Kb({strokeWidth:s,showAsComplete:i})),sw:s}}function Ww(e,t,n){const{strokePoints:o,sw:r}=Vw(e,t,n),i=o.length>1?Rb(o,!1):function(e){const t=.1;return"M ".concat(e.x," ").concat(e.y," m -").concat(t,", 0 a ").concat(t,",").concat(t," 0 1,0 ").concat(.2,",0 a ").concat(t,",").concat(t," 0 1,0 -").concat(.2,",0")}(e.props.segments[0].points[0]);return{solidStrokePath:i,sw:r}}function Kw(t){let{strokeWidth:n,shape:o,opacity:r}=t;const i=Gy(),s=Fb(),{solidStrokePath:a,sw:l}=Ww(o,n,s),c=function(){const[t,n]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{const e=CSS.supports("color","color(display-p3 1 1 1)"),t=matchMedia("(color-gamut: p3)");n(e&&t.matches);const o=()=>n(e&&t.matches);return t.addEventListener("change",o),()=>t.removeEventListener("change",o)}),[]),ri(Hd.forceSrgb)||!t?"srgb":"p3"}(),d=i[o.props.color].highlight[c];return(0,Rc.jsx)(nf,{id:o.id,style:{opacity:r},children:(0,Rc.jsx)("path",{d:a,strokeLinecap:"round",fill:"none",pointerEvents:"all",stroke:d,strokeWidth:l})})}function Gw(e,t,n,o){const{solidStrokePath:r,sw:i}=Ww(t,e,!1),s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",r),s.setAttribute("fill","none"),s.setAttribute("stroke",o[t.props.color].highlight.srgb),s.setAttribute("stroke-width","".concat(i)),s.setAttribute("opacity","".concat(n)),s}function qw(e){return 1.12*Ov[e.props.size]}function Yw(e){return 1===e.props.segments.length&&e.props.segments[0].points.length<2}function Xw(){const[t,n]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)"),t=()=>{n(e.matches)};return t(),e.addEventListener("change",t),()=>e.removeEventListener("change",t)}),[]),t}wr(Hw,"type","highlight"),wr(Hw,"props",cc),wr(Hw,"migrations",dc);const $w=async e=>{const t=await(async e=>new Promise(((t,n)=>{const o=new Image;o.onload=()=>t(o),o.onerror=()=>n(new Error("Failed to load image")),o.crossOrigin="anonymous",o.src=e})))(e),n=document.createElement("canvas");n.width=t.width,n.height=t.height;const o=n.getContext("2d");if(o)return o.drawImage(t,0,0),n.toDataURL()};class Zw extends Um{constructor(){super(...arguments),wr(this,"isAspectRatioLocked",(()=>!0)),wr(this,"canCrop",(()=>!0)),wr(this,"onDoubleClick",(e=>{const t=e.props.assetId?this.editor.getAsset(e.props.assetId):void 0;if(!t)return;t.props.src&&"mimeType"in t.props&&"image/gif"===t.props.mimeType&&this.editor.updateShapes([{type:"image",id:e.id,props:{playing:!e.props.playing}}])})),wr(this,"onDoubleClickEdge",(e=>{const t=e.props;if(!t)return;if(this.editor.getCroppingShapeId()!==e.id)return;const n=Ci(t.crop)||{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},o=1/(n.bottomRight.x-n.topLeft.x)*e.props.w,r=1/(n.bottomRight.y-n.topLeft.y)*e.props.h,i=new Gc(n.topLeft.x*o,n.topLeft.y*r).rot(e.rotation),s={id:e.id,type:e.type,x:e.x-i.x,y:e.y-i.y,props:{crop:{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},w:o,h:r}};this.editor.updateShapes([s])}))}getDefaultProps(){return{w:100,h:100,assetId:null,playing:!0,url:"",crop:null}}component(t){var n,o;const r=Qw(t),i=Km(t.id),s=Xw(),[a,l]=(0,e.useState)(""),c=t.props.assetId?this.editor.getAsset(t.props.assetId):void 0;if("bookmark"===(null===c||void 0===c?void 0:c.type))throw Error("Bookmark assets can't be rendered as images");const d=ri("onlySelectedShape",(()=>{var e;return t.id===(null===(e=this.editor.getOnlySelectedShape())||void 0===e?void 0:e.id)}),[this.editor])&&i&&this.editor.isInAny("select.crop","select.cropping","select.pointing_crop_handle"),u=s&&((null===c||void 0===c||null===(n=c.props.mimeType)||void 0===n?void 0:n.includes("video"))||(null===c||void 0===c||null===(o=c.props.mimeType)||void 0===o?void 0:o.includes("gif")));return(0,e.useEffect)((()=>{if(null!==c&&void 0!==c&&c.props.src&&"mimeType"in c.props&&"image/gif"===(null===c||void 0===c?void 0:c.props.mimeType)){let e=!1;return(async()=>{const t=await $w(c.props.src);e||t&&l(t)})(),()=>{e=!0}}}),[s,null===c||void 0===c?void 0:c.props]),(0,Rc.jsxs)(Rc.Fragment,{children:[(null===c||void 0===c?void 0:c.props.src)&&d&&(0,Rc.jsx)("div",{style:r,children:(0,Rc.jsx)("div",{className:"tl-image",style:{opacity:.1,backgroundImage:"url(".concat(!t.props.playing||u?a:c.props.src,")")},draggable:!1})}),(0,Rc.jsxs)(zm,{id:t.id,style:{overflow:"hidden",width:t.props.w,height:t.props.h},children:[(0,Rc.jsxs)("div",{className:"tl-image-container",style:r,children:[null!==c&&void 0!==c&&c.props.src?(0,Rc.jsx)("div",{className:"tl-image",style:{backgroundImage:"url(".concat(!t.props.playing||u?a:c.props.src,")")},draggable:!1}):null,(null===c||void 0===c?void 0:c.props.isAnimated)&&!t.props.playing&&(0,Rc.jsx)("div",{className:"tl-image__tg",children:"GIF"})]}),"url"in t.props&&t.props.url&&(0,Rc.jsx)(Pb,{url:t.props.url,zoomLevel:this.editor.getZoomLevel()})]})]})}indicator(e){return Km(e.id)?null:(0,Rc.jsx)("rect",{width:vd(e.props.w),height:vd(e.props.h)})}shouldGetDataURI(e){return e&&(e.startsWith("http")||e.startsWith("/")||e.startsWith("./"))}async toSvg(e){const t=document.createElementNS("http://www.w3.org/2000/svg","g"),n=e.props.assetId?this.editor.getAsset(e.props.assetId):null;let o=(null===n||void 0===n?void 0:n.props.src)||"";this.shouldGetDataURI(o)&&(o=await async function(e){const t=await fetch(e),n=await t.blob();return new Promise(((e,t)=>{const o=new FileReader;o.onloadend=()=>e(o.result),o.onerror=t,o.readAsDataURL(n)}))}(o)||"");const r=document.createElementNS("http://www.w3.org/2000/svg","image");r.setAttributeNS("http://www.w3.org/1999/xlink","href",o);const i=Qw(e),s=e.props.crop;if(i.transform&&s){const{transform:e,width:n,height:o}=i,a=(s.bottomRight.x-s.topLeft.x)*n,l=(s.bottomRight.y-s.topLeft.y)*o,c=[new Gc(0,0),new Gc(a,0),new Gc(a,l),new Gc(0,l)],d=document.createElementNS("http://www.w3.org/2000/svg","polygon");d.setAttribute("points",c.map((e=>"".concat(e.x,",").concat(e.y))).join(" "));const u=document.createElementNS("http://www.w3.org/2000/svg","clipPath");u.setAttribute("id","cropClipPath"),u.appendChild(d);const h=document.createElementNS("http://www.w3.org/2000/svg","defs");h.appendChild(u),t.appendChild(h);const p=document.createElementNS("http://www.w3.org/2000/svg","g");p.setAttribute("clip-path","url(#cropClipPath)"),r.setAttribute("width",n.toString()),r.setAttribute("height",o.toString()),r.style.transform=e,p.appendChild(r),t.appendChild(p)}else r.setAttribute("width",e.props.w.toString()),r.setAttribute("height",e.props.h.toString()),t.appendChild(r);return t}}function Qw(e){const t=e.props.crop,n=null===t||void 0===t?void 0:t.topLeft;if(!n)return{width:e.props.w,height:e.props.h};const o=1/(t.bottomRight.x-t.topLeft.x)*e.props.w,r=1/(t.bottomRight.y-t.topLeft.y)*e.props.h,i=-n.x*o,s=-n.y*r;return{transform:"translate(".concat(i,"px, ").concat(s,"px)"),width:o,height:r}}function Jw(e,t){const{start:n,end:o}=e;return t?"M".concat(vd(n.x),",").concat(vd(n.y)," L").concat(vd(o.x),",").concat(vd(o.y)," "):"".concat(vd(o.x),",").concat(vd(o.y)," ")}function ex(e,t){const{a:n,b:o,c:r,d:i}=e;return Gc.Equals(n,i)?"":"".concat(t?"M".concat(vd(n.x),",").concat(vd(n.y)):"","C").concat(vd(o.x),",").concat(vd(o.y)," ").concat(vd(r.x),",").concat(vd(r.y)," ").concat(vd(i.x),",").concat(vd(i.y))}function tx(e,t){let n=e.segments.reduce(((e,t,n)=>e+ex(t,0===n)),"");return t&&(n+="Z"),n}function nx(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e instanceof gf?function(e,t){let n=e.segments.reduce(((e,t,n)=>e+Jw(t,0===n)),"");return t&&(n+="Z"),n}(e,t):tx(e,t)}function ox(e){return{size:e,thinning:.4,streamline:0,smoothing:.5,simulatePressure:!0,last:!0}}function rx(e,t,n){return bv(t.vertices,ox(n))}function ix(e,t,n){const o=function(e,t,n){const o=ox(n);return mv(Sv(rx(0,t,n),o),o)}(0,t,n);return up(o)}wr(Zw,"type","image"),wr(Zw,"props",hc),wr(Zw,"migrations",fc);const sx=new Tf;class ax extends yf{constructor(){super(...arguments),wr(this,"hideResizeHandles",(()=>!0)),wr(this,"hideRotateHandle",(()=>!0)),wr(this,"hideSelectionBoundsFg",(()=>!0)),wr(this,"hideSelectionBoundsBg",(()=>!0)),wr(this,"onResize",((e,t)=>{const{scaleX:n,scaleY:o}=t;return{props:{points:Mi(e.props.points,((e,t)=>{let{id:r,index:i,x:s,y:a}=t;return{id:r,index:i,x:s*n,y:a*o}}))}}})),wr(this,"onHandleDrag",((e,t)=>{let{handle:n}=t;if("vertex"===n.type)return{...e,props:{...e.props,points:{...e.props.points,[n.id]:{id:n.id,index:n.index,x:n.x,y:n.y}}}}}))}getDefaultProps(){const[e,t]=ts(2);return{dash:"draw",size:"m",color:"black",spline:"line",points:{[e]:{id:e,index:e,x:0,y:0},[t]:{id:t,index:t,x:.1,y:.1}}}}getGeometry(e){return cx(e)}getHandles(e){return sx.get(e.props,(()=>{const t=cx(e),n=lx(e),o=n.map((e=>({...e,id:e.index,type:"vertex",canSnap:!0})));for(let e=0;e<n.length-1;e++){const r=Ji(n[e].index,n[e+1].index),i=t.segments[e].midPoint();o.push({id:r,type:"create",index:r,x:i.x,y:i.y,canSnap:!0})}return o.sort(ns)}))}component(e){const t=Gy(),n=cx(e),o=jv[e.props.size],{dash:r,color:i}=e.props;if("line"===e.props.spline){if("solid"===r){const r=n.points,s="M"+r[0]+"L"+r.slice(1);return(0,Rc.jsxs)(nf,{id:e.id,children:[(0,Rc.jsx)(qy,{d:s,fill:"none",color:i,theme:t}),(0,Rc.jsx)("path",{d:s,stroke:t[i].solid,strokeWidth:o,fill:"none"})]})}if("dashed"===r||"dotted"===r){const s=n.points,a="M"+s[0]+"L"+s.slice(1);return(0,Rc.jsxs)(nf,{id:e.id,children:[(0,Rc.jsx)(qy,{d:a,fill:"none",color:i,theme:t}),(0,Rc.jsx)("g",{stroke:t[i].solid,strokeWidth:o,children:n.segments.map(((e,t)=>{const{strokeDasharray:i,strokeDashoffset:s}=ab(e.length,o,{style:r,start:t>0?"outset":"none",end:t<n.segments.length-1?"outset":"none"});return(0,Rc.jsx)("path",{strokeDasharray:i,strokeDashoffset:s,d:Jw(e,!0),fill:"none"},t)}))})]})}if("draw"===r){const r=n.points,[s,a]=dw(e.id,r,o);return(0,Rc.jsxs)(nf,{id:e.id,children:[(0,Rc.jsx)(qy,{d:s,fill:"none",color:i,theme:t}),(0,Rc.jsx)("path",{d:a,stroke:t[i].solid,strokeWidth:o,fill:"none"})]})}}if("cubic"===e.props.spline){const s=nx(n);if("solid"===r)return(0,Rc.jsxs)(nf,{id:e.id,children:[(0,Rc.jsx)(qy,{d:s,fill:"none",color:i,theme:t}),(0,Rc.jsx)("path",{strokeWidth:o,stroke:t[i].solid,fill:"none",d:s})]});if("dashed"===r||"dotted"===r)return(0,Rc.jsxs)(nf,{id:e.id,children:[(0,Rc.jsx)(qy,{d:s,fill:"none",color:i,theme:t}),(0,Rc.jsx)("g",{stroke:t[i].solid,strokeWidth:o,children:n.segments.map(((e,t)=>{const{strokeDasharray:i,strokeDashoffset:s}=ab(e.length,o,{style:r,start:t>0?"outset":"none",end:t<n.segments.length-1?"outset":"none"});return(0,Rc.jsx)("path",{strokeDasharray:i,strokeDashoffset:s,d:ex(e,!0),fill:"none"},t)}))})]});if("draw"===r)return(0,Rc.jsxs)(nf,{id:e.id,children:[(0,Rc.jsx)(qy,{d:s,fill:"none",color:i,theme:t}),(0,Rc.jsx)("path",{d:ix(0,n,o),strokeWidth:1,stroke:t[i].solid,fill:t[i].solid})]})}}indicator(e){const t=jv[e.props.size],n=cx(e),{dash:o}=e.props;let r;if("line"===e.props.spline){const i=n.points;if("solid"===o||"dotted"===o||"dashed"===o)r="M"+i[0]+"L"+i.slice(1);else{const[n]=dw(e.id,i,t);r=n}}else r=function(e,t,n){if("draw"===e.props.dash)return Rb(rx(0,t,n));return nx(t)}(e,n,t);return(0,Rc.jsx)("path",{d:r})}toSvg(e,t){const n=kl({isDarkMode:t.isDarkMode})[e.props.color].solid,o=cx(e),r=jv[e.props.size];switch(e.props.dash){case"draw":{let t;if(o instanceof Qm)t=ix(0,o,r);else{const[n,i]=dw(e.id,o.points,r);t=i}const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("stroke-width",r+"px"),i.setAttribute("stroke",n),i.setAttribute("fill","none"),i.setAttribute("d",t),i}case"solid":{let e;if(o instanceof Qm)e=tx(o,!1);else{const t=o.points;e="M"+t[0]+"L"+t.slice(1)}const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("stroke-width",r+"px"),t.setAttribute("stroke",n),t.setAttribute("fill","none"),t.setAttribute("d",e),t}default:{const{segments:t}=o,i=document.createElementNS("http://www.w3.org/2000/svg","g");i.setAttribute("stroke",n),i.setAttribute("stroke-width",r.toString());const s=o instanceof Qm?ex:Jw;return t.forEach(((n,o)=>{const a=document.createElementNS("http://www.w3.org/2000/svg","path"),{strokeDasharray:l,strokeDashoffset:c}=ab(n.length,r,{style:e.props.dash,start:o>0?"outset":"none",end:o<t.length-1?"outset":"none"});a.setAttribute("stroke-dasharray",l.toString()),a.setAttribute("stroke-dashoffset",c.toString()),a.setAttribute("d",s(n,!0)),a.setAttribute("fill","none"),i.appendChild(a)})),i}}}getHandleSnapGeometry(e){const t=lx(e);return{points:t,getSelfSnapPoints:n=>{const o=this.getHandles(e).filter((e=>"vertex"===e.type)).findIndex((e=>e.id===n.id));return t.filter(((e,t)=>Math.abs(t-o)>1)).map(Gc.From)},getSelfSnapOutline:t=>{const n=this.getHandles(e).filter((e=>"vertex"===e.type)).findIndex((e=>e.id===t.id)),o=cx(e).segments.filter(((e,t)=>t!==n-1&&t!==n));return o.length?new xh({children:o}):null}}}}function lx(e){return Object.values(e.props.points).sort(ns)}function cx(e){const t=lx(e).map(Gc.From);switch(e.props.spline){case"cubic":return new Qm({points:t});case"line":return new gf({points:t})}}wr(ax,"type","line"),wr(ax,"props",vc),wr(ax,"migrations",bc);const dx=200;class ux extends yf{constructor(){super(...arguments),wr(this,"canEdit",(()=>!0)),wr(this,"hideResizeHandles",(()=>!0)),wr(this,"hideSelectionBoundsFg",(()=>!0)),wr(this,"onBeforeCreate",(e=>hx(this.editor,e,e.props.growY))),wr(this,"onBeforeUpdate",((e,t)=>{if(e.props.text!==t.props.text||e.props.font!==t.props.font||e.props.size!==t.props.size)return hx(this.editor,t,e.props.growY)})),wr(this,"onEditEnd",(e=>{const{id:t,type:n,props:{text:o}}=e;o.trimEnd()!==e.props.text&&this.editor.updateShapes([{id:t,type:n,props:{text:o.trimEnd()}}])}))}getDefaultProps(){return{color:"black",size:"m",text:"",font:"draw",align:"middle",verticalAlign:"middle",growY:0,url:""}}getHeight(e){return dx+e.props.growY}getGeometry(e){const t=this.getHeight(e);return new vf({width:dx,height:t,isFilled:!0})}component(e){const{id:t,type:n,props:{color:o,font:r,size:i,align:s,text:a,verticalAlign:l}}=e,c=Gy(),d="black"===o?"yellow":o;return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)("div",{style:{position:"absolute",width:dx,height:this.getHeight(e)},children:(0,Rc.jsxs)("div",{className:"tl-note__container",style:{color:c[d].solid,backgroundColor:c[d].solid},children:[(0,Rc.jsx)("div",{className:"tl-note__scrim"}),(0,Rc.jsx)(rw,{id:t,type:n,font:r,size:i,align:s,verticalAlign:l,text:a,labelColor:"black",wrap:!0})]})}),"url"in e.props&&e.props.url&&(0,Rc.jsx)(Pb,{url:e.props.url,zoomLevel:this.editor.getZoomLevel()})]})}indicator(e){return(0,Rc.jsx)("rect",{rx:"6",width:vd(dx),height:vd(this.getHeight(e))})}toSvg(e,t){t.addExportDef(Qy(e.props.font));const n=kl({isDarkMode:t.isDarkMode}),o=this.editor.getShapeGeometry(e).bounds,r=document.createElementNS("http://www.w3.org/2000/svg","g"),i="black"===e.props.color?"yellow":e.props.color,s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("rx","10"),s.setAttribute("width",dx.toString()),s.setAttribute("height",o.height.toString()),s.setAttribute("fill",n[i].solid),s.setAttribute("stroke",n[i].solid),s.setAttribute("stroke-width","1"),r.appendChild(s);const a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("rx","10"),a.setAttribute("width",dx.toString()),a.setAttribute("height",o.height.toString()),a.setAttribute("fill",n.background),a.setAttribute("opacity",".28"),r.appendChild(a);const l=iw({editor:this.editor,shape:e,font:Al[e.props.font],bounds:o});return l.setAttribute("fill",n.text),l.setAttribute("stroke","none"),r.appendChild(l),r}}function hx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=e.textMeasure.measureText(t.props.text,{...Mv,fontFamily:Rv[t.props.font],fontSize:Lv[t.props.size],maxWidth:166}).h+34;let r=null;if(o>dx?r=o-dx:n&&(r=0),null!==r)return{...t,props:{...t.props,growY:r}}}function px(e,t){let{initialBounds:n,scaleX:o,scaleY:r,newPoint:i}=t;const s=Math.max(.01,Math.min(Math.abs(o),Math.abs(r))),a=new Gc(0,0);o<0&&(a.x=-n.width*s),r<0&&(a.y=-n.height*s);const{x:l,y:c}=Gc.Add(i,a.rot(e.rotation));return{x:l,y:c,props:{scale:s*e.props.scale}}}wr(ux,"type","note"),wr(ux,"props",wc),wr(ux,"migrations",Sc);const fx=new Tf;class gx extends yf{constructor(){super(...arguments),wr(this,"canEdit",(()=>!0)),wr(this,"isAspectRatioLocked",(()=>!0)),wr(this,"onResize",((e,t)=>{const{initialBounds:n,initialShape:o,scaleX:r,handle:i}=t;if("scale_shape"===t.mode||"right"!==i&&"left"!==i)return{id:e.id,type:e.type,...px(e,t)};{const t=n.width;let s=t*r;const a=new Gc(0,0);s=Math.max(1,Math.abs(s)),"left"===i?(a.x=t-s,r<0&&(a.x+=s)):r<0&&(a.x-=s);const{x:l,y:c}=a.rot(e.rotation).add(o);return{id:e.id,type:e.type,x:l,y:c,props:{w:s/o.props.scale,autoSize:!1}}}})),wr(this,"onBeforeCreate",(e=>{if(!e.props.autoSize)return;if(e.props.text.trim())return;const t=this.getMinDimensions(e);return{...e,x:e.x-t.width/2,y:e.y-t.height/2}})),wr(this,"onEditEnd",(e=>{const{id:t,type:n,props:{text:o}}=e,r=e.props.text.trimEnd();0===r.length?this.editor.deleteShapes([e.id]):r!==e.props.text&&this.editor.updateShapes([{id:t,type:n,props:{text:o.trimEnd()}}])})),wr(this,"onBeforeUpdate",((e,t)=>{if(!t.props.autoSize)return;const n=e.props.size!==t.props.size||e.props.align!==t.props.align||e.props.font!==t.props.font||1!==e.props.scale&&1===t.props.scale,o=e.props.text!==t.props.text;if(!n&&!o)return;const r=this.getMinDimensions(e),i=mx(this.editor,t.props),s=r.width*e.props.scale,a=r.height*e.props.scale,l=i.width*t.props.scale,c=i.height*t.props.scale;let d;switch(t.props.align){case"middle":d=new Gc((l-s)/2,o?0:(c-a)/2);break;case"end":d=new Gc(l-s,o?0:(c-a)/2);break;default:if(o)break;d=new Gc(0,(c-a)/2)}if(d){d.rot(t.rotation);const{x:e,y:n}=t;return{...t,x:e-d.x,y:n-d.y,props:{...t.props,w:l}}}return{...t,props:{...t.props,w:l}}})),wr(this,"onDoubleClickEdge",(e=>e.props.autoSize?1!==e.props.scale?{id:e.id,type:e.type,props:{scale:1}}:void 0:{id:e.id,type:e.type,props:{autoSize:!0}}))}getDefaultProps(){return{color:"black",size:"m",w:8,text:"",font:"draw",align:"middle",autoSize:!0,scale:1}}getMinDimensions(e){return fx.get(e.props,(e=>mx(this.editor,e)))}getGeometry(e){const{scale:t}=e.props,{width:n,height:o}=this.getMinDimensions(e);return new vf({width:n*t,height:o*t,isFilled:!0})}component(e){const{id:t,type:n,props:{text:o,color:r}}=e,i=kl({isDarkMode:this.editor.user.getIsDarkMode()}),{width:s,height:a}=this.getMinDimensions(e),{rInput:l,isEmpty:c,isEditing:d,handleFocus:u,handleChange:h,handleKeyDown:p,handleBlur:f,handleInputPointerDown:g,handleDoubleClick:m}=xb(t,n,o);return(0,Rc.jsx)(zm,{id:e.id,children:(0,Rc.jsxs)("div",{className:"tl-text-shape__wrapper tl-text-shadow","data-font":e.props.font,"data-align":e.props.align,"data-hastext":!c,"data-isediting":d,"data-textwrap":!0,style:{fontSize:Ov[e.props.size],lineHeight:Ov[e.props.size]*Mv.lineHeight+"px",transform:"scale(".concat(e.props.scale,")"),transformOrigin:"top left",width:Math.max(1,s),height:Math.max(Ov[e.props.size]*Mv.lineHeight,a),color:i[r].solid},children:[(0,Rc.jsx)("div",{className:"tl-text tl-text-content",dir:"ltr",children:o}),d?(0,Rc.jsx)("textarea",{ref:l,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:o,onFocus:u,onChange:h,onKeyDown:p,onBlur:f,onTouchEnd:Xd,onContextMenu:Xd,onPointerDown:g,onDoubleClick:m}):null]})})}indicator(e){const t=this.editor.getShapeGeometry(e).bounds,n=Hc();return e.props.autoSize&&n.getEditingShapeId()===e.id?null:(0,Rc.jsx)("rect",{width:vd(t.width),height:vd(t.height)})}toSvg(e,t){var n,o;t.addExportDef(Qy(e.props.font));const r=kl({isDarkMode:t.isDarkMode}),i=this.editor.getShapeGeometry(e).bounds,s=e.props.text,a=i.width/(null!==(n=e.props.scale)&&void 0!==n?n:1),l=i.height/(null!==(o=e.props.scale)&&void 0!==o?o:1),c={fontSize:Ov[e.props.size],fontFamily:Al[e.props.font],textAlign:e.props.align,verticalTextAlign:"middle",width:a,height:l,padding:0,lineHeight:Mv.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap"},d=r[e.props.color].solid,u=document.createElementNS("http://www.w3.org/2000/svg","g"),h=Zy(this.editor,this.editor.textMeasure.measureTextSpans(s,c),{...c,stroke:r.background,strokeWidth:2,fill:r.background,padding:0}),p=h.cloneNode(!0);return p.setAttribute("fill",d),p.setAttribute("stroke","none"),u.append(h),u.append(p),u}}function mx(e,t){const{font:n,text:o,autoSize:r,size:i,w:s}=t,a=r?16:Math.max(16,s),l=Ov[i],c=r?null:Math.floor(Math.max(a,s)),d=e.textMeasure.measureText(o,{...Mv,fontFamily:Rv[n],fontSize:l,maxWidth:c});return r&&(d.w+=1),{width:Math.max(a,d.w),height:Math.max(l,d.h)}}wr(gx,"type","text"),wr(gx,"props",_c),wr(gx,"migrations",Cc);class vx extends Um{constructor(){super(...arguments),wr(this,"canEdit",(()=>!0)),wr(this,"isAspectRatioLocked",(()=>!0))}getDefaultProps(){return{w:100,h:100,assetId:null,time:0,playing:!0,url:""}}component(e){return(0,Rc.jsx)(yx,{shape:e,videoUtil:this})}indicator(e){return(0,Rc.jsx)("rect",{width:vd(e.props.w),height:vd(e.props.h)})}toSvg(e){const t=document.createElementNS("http://www.w3.org/2000/svg","g"),n=document.createElementNS("http://www.w3.org/2000/svg","image");return n.setAttributeNS("http://www.w3.org/1999/xlink","href",function(e){const t=e.split(":")[1],n=document.querySelector(".tl-video-shape-".concat(t));if(n){const e=document.createElement("canvas");return e.width=n.videoWidth,e.height=n.videoHeight,e.getContext("2d").drawImage(n,0,0),e.toDataURL("image/png")}throw new Error("Video with not found when attempting serialization.")}(e.id)),n.setAttribute("width",e.props.w.toString()),n.setAttribute("height",e.props.h.toString()),t.appendChild(n),t}}wr(vx,"type","video"),wr(vx,"props",Ec),wr(vx,"migrations",Tc);const yx=ti((function(t){const{shape:n,videoUtil:o}=t,r=o.editor.getShapeGeometry(n).bounds.w*o.editor.getZoomLevel()>=110,i=n.props.assetId?o.editor.getAsset(n.props.assetId):null,{time:s,playing:a}=n.props,l=Gm(n.id),c=Xw(),d=e.useRef(null),u=e.useCallback((e=>{const t=e.currentTarget;o.editor.updateShapes([{type:"video",id:n.id,props:{playing:!0,time:t.currentTime}}])}),[n.id,o.editor]),h=e.useCallback((e=>{const t=e.currentTarget;o.editor.updateShapes([{type:"video",id:n.id,props:{playing:!1,time:t.currentTime}}])}),[n.id,o.editor]),p=e.useCallback((e=>{const t=e.currentTarget;l&&o.editor.updateShapes([{type:"video",id:n.id,props:{time:t.currentTime}}])}),[l,n.id,o.editor]),[f,g]=e.useState(!1),m=e.useCallback((e=>{const t=e.currentTarget;s!==t.currentTime&&(t.currentTime=s),a||t.pause(),g(!0)}),[a,s]);return e.useEffect((()=>{const e=d.current;e&&(f&&!l&&s!==e.currentTime&&(e.currentTime=s),l&&document.activeElement!==e&&e.focus())}),[l,f,s]),e.useEffect((()=>{if(c){const e=d.current;e.pause(),e.currentTime=0}}),[d,c]),(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(zm,{id:n.id,children:(0,Rc.jsx)("div",{className:"tl-counter-scaled",children:null!==i&&void 0!==i&&i.props.src?(0,Rc.jsx)("video",{ref:d,style:l?{pointerEvents:"all"}:void 0,className:"tl-video tl-video-shape-".concat(n.id.split(":")[1]),width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:!0,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:l&&r,onPlay:u,onPause:h,onTimeUpdate:p,onLoadedData:m,hidden:!f,children:(0,Rc.jsx)("source",{src:i.props.src})}):null})}),"url"in n.props&&n.props.url&&(0,Rc.jsx)(Pb,{url:n.props.url,zoomLevel:o.editor.getZoomLevel()})]})})),bx=[gx,jb,Xb,zw,ux,ax,ow,kb,Hw,Qb,Zw,vx];class wx extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"scribbleId","id"),wr(this,"markId",""),wr(this,"excludedShapeIds",new Set),wr(this,"onEnter",(e=>{this.markId="erase scribble begin",this.editor.mark(this.markId),this.info=e;const{originPagePoint:t}=this.editor.inputs;this.excludedShapeIds=new Set(this.editor.getCurrentPageShapes().filter((e=>{if(this.editor.isShapeOrAncestorLocked(e))return!0;if(this.editor.isShapeOfType(e,"group")||this.editor.isShapeOfType(e,"frame")){const n=this.editor.getPointInShapeSpace(e,t);return this.editor.getShapeGeometry(e).bounds.containsPoint(n)}return!1})).map((e=>e.id)));const n=this.editor.scribbles.addScribble({color:"muted-1",size:12});this.scribbleId=n.id,this.update()})),wr(this,"pushPointToScribble",(()=>{const{x:e,y:t}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,e,t)})),wr(this,"onExit",(()=>{this.editor.scribbles.stop(this.scribbleId)})),wr(this,"onPointerMove",(()=>{this.update()})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.complete()}))}update(){const e=this.editor.getErasingShapeIds(),t=this.editor.getZoomLevel(),n=this.editor.getCurrentPageShapes(),{inputs:{currentPagePoint:o,previousPagePoint:r}}=this.editor,{excludedShapeIds:i}=this;this.pushPointToScribble();const s=new Set(e);for(const a of n){if(this.editor.isShapeOfType(a,"group"))continue;const e=this.editor.getShapeMask(a.id);if(e&&!md(o,e))continue;const n=this.editor.getShapeGeometry(a),i=this.editor.getPointInShapeSpace(a,r),l=this.editor.getPointInShapeSpace(a,o);n.hitTestLineSegment(i,l,8/t)&&s.add(this.editor.getOutermostSelectableShape(a).id)}this.editor.setErasingShapes([...s].filter((e=>!i.has(e))))}complete(){this.editor.deleteShapes(this.editor.getCurrentPageState().erasingShapeIds),this.editor.setErasingShapes([]),this.parent.transition("idle")}cancel(){this.editor.setErasingShapes([]),this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}}wr(wx,"id","erasing");class xx extends Pg{constructor(){super(...arguments),wr(this,"onPointerDown",(e=>{this.parent.transition("pointing",e)})),wr(this,"onCancel",(()=>{this.editor.setCurrentTool("select")}))}}wr(xx,"id","idle");class Sx extends Pg{constructor(){super(...arguments),wr(this,"onEnter",(()=>{const e=this.editor.getZoomLevel(),t=this.editor.getCurrentPageShapesSorted(),{inputs:{currentPagePoint:n}}=this.editor,o=new Set,r=o.size;for(let i=t.length-1;i>=0;i--){const s=t[i];if(!this.editor.isShapeOrAncestorLocked(s)&&!this.editor.isShapeOfType(s,"group")&&this.editor.isPointInShape(s,n,{hitInside:!1,margin:8/e})){const e=this.editor.getOutermostSelectableShape(s);if(this.editor.isShapeOfType(e,"frame")&&o.size>r)break;o.add(e.id)}}this.editor.setErasingShapes([...o])})),wr(this,"onPointerMove",(e=>{this.editor.inputs.isDragging&&this.parent.transition("erasing",e)})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onInterrupt",(()=>{this.cancel()}))}complete(){const e=this.editor.getErasingShapeIds();e.length&&(this.editor.mark("erase end"),this.editor.deleteShapes(e)),this.editor.setErasingShapes([]),this.parent.transition("idle")}cancel(){this.editor.setErasingShapes([]),this.parent.transition("idle")}}wr(Sx,"id","pointing");class _x extends Pg{constructor(){super(...arguments),wr(this,"onEnter",(()=>{this.editor.setCursor({type:"cross",rotation:0})}))}}wr(_x,"id","eraser"),wr(_x,"initial","idle"),wr(_x,"children",(()=>[xx,Sx,wx]));class kx extends Pg{constructor(){super(...arguments),wr(this,"onEnter",(()=>{this.update()})),wr(this,"onPointerMove",(()=>{this.update()})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.complete()})),wr(this,"onComplete",(()=>{this.complete()}))}update(){const{currentScreenPoint:e,previousScreenPoint:t}=this.editor.inputs,n=Gc.Sub(e,t);(Math.abs(n.x)>0||Math.abs(n.y)>0)&&this.editor.pan(n)}complete(){this.editor.slideCamera({speed:Math.min(2,this.editor.inputs.pointerVelocity.len()),direction:this.editor.inputs.pointerVelocity,friction:Md}),this.parent.transition("idle")}}wr(kx,"id","dragging");class Cx extends Pg{constructor(){super(...arguments),wr(this,"onEnter",(()=>{this.editor.setCursor({type:"grab",rotation:0})})),wr(this,"onPointerDown",(e=>{this.parent.transition("pointing",e)})),wr(this,"onCancel",(()=>{this.editor.setCurrentTool("select")}))}}wr(Cx,"id","idle");class Ex extends Pg{constructor(){super(...arguments),wr(this,"onEnter",(()=>{this.editor.stopCameraAnimation(),this.editor.updateInstanceState({cursor:{type:"grabbing",rotation:0}},{ephemeral:!0})})),wr(this,"onPointerMove",(e=>{this.editor.inputs.isDragging&&this.parent.transition("dragging",e)})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.complete()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onInterrupt",(()=>{this.complete()}))}complete(){this.parent.transition("idle")}}wr(Ex,"id","pointing");class Ix extends Pg{constructor(){super(...arguments),wr(this,"onDoubleClick",(e=>{if("settle"===e.phase){const{currentScreenPoint:e}=this.editor.inputs;this.editor.zoomIn(e,{duration:220,easing:Kc.easeOutQuint})}})),wr(this,"onTripleClick",(e=>{if("settle"===e.phase){const{currentScreenPoint:e}=this.editor.inputs;this.editor.zoomOut(e,{duration:320,easing:Kc.easeOutQuint})}})),wr(this,"onQuadrupleClick",(e=>{if("settle"===e.phase){const e=this.editor.getZoomLevel(),{inputs:{currentScreenPoint:t}}=this.editor;1===e?this.editor.zoomToFit({duration:400,easing:Kc.easeOutQuint}):this.editor.resetZoom(t,{duration:320,easing:Kc.easeOutQuint})}}))}}wr(Ix,"id","hand"),wr(Ix,"initial","idle"),wr(Ix,"children",(()=>[Cx,Ex,kx]));class Tx extends Pg{constructor(){super(...arguments),wr(this,"onPointerDown",(e=>{this.parent.transition("lasering",e)}))}}wr(Tx,"id","idle");class Px extends Pg{constructor(){super(...arguments),wr(this,"scribbleId","id"),wr(this,"onEnter",(()=>{const e=this.editor.scribbles.addScribble({color:"laser",opacity:.7,size:4,delay:1200,shrink:.05,taper:!0});this.scribbleId=e.id,this.pushPointToScribble()})),wr(this,"onExit",(()=>{this.editor.scribbles.stop(this.scribbleId)})),wr(this,"onPointerMove",(()=>{this.pushPointToScribble()})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"pushPointToScribble",(()=>{const{x:e,y:t}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,e,t)})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.complete()}))}complete(){this.parent.transition("idle")}cancel(){this.parent.transition("idle")}}wr(Px,"id","lasering");class Ax extends Pg{constructor(){super(...arguments),wr(this,"onEnter",(()=>{this.editor.setCursor({type:"cross",rotation:0})}))}}wr(Ax,"id","laser"),wr(Ax,"initial","idle"),wr(Ax,"children",(()=>[Tx,Px]));class Mx extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"brush",new mh),wr(this,"initialSelectedShapeIds",[]),wr(this,"excludedShapeIds",new Set),wr(this,"isWrapMode",!1),wr(this,"initialStartShape",null),wr(this,"onEnter",(e=>{const{altKey:t,currentPagePoint:n}=this.editor.inputs;this.isWrapMode=this.editor.user.getIsWrapMode(),t?this.parent.transition("scribble_brushing",e):(this.excludedShapeIds=new Set(this.editor.getCurrentPageShapes().filter((e=>this.editor.isShapeOfType(e,"group")||this.editor.isShapeOrAncestorLocked(e))).map((e=>e.id))),this.info=e,this.initialSelectedShapeIds=this.editor.getSelectedShapeIds().slice(),this.initialStartShape=this.editor.getShapesAtPoint(n)[0],this.onPointerMove())})),wr(this,"onExit",(()=>{this.initialSelectedShapeIds=[],this.editor.updateInstanceState({brush:null})})),wr(this,"onTick",(()=>{nv(this.editor)})),wr(this,"onPointerMove",(()=>{this.hitTestShapes()})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onCancel",(e=>{this.editor.setSelectedShapes(this.initialSelectedShapeIds,{squashing:!0}),this.parent.transition("idle",e)})),wr(this,"onKeyDown",(e=>{this.editor.inputs.altKey?this.parent.transition("scribble_brushing",e):this.hitTestShapes()})),wr(this,"onKeyUp",(()=>{this.hitTestShapes()})),wr(this,"onInterrupt",(()=>{this.editor.updateInstanceState({brush:null})}))}complete(){this.parent.transition("idle")}hitTestShapes(){const e=this.editor.getZoomLevel(),t=this.editor.getCurrentPageShapes(),n=this.editor.getCurrentPageId(),{inputs:{originPagePoint:o,currentPagePoint:r,shiftKey:i,ctrlKey:s}}=this.editor;this.brush.setTo(mh.FromPoints([o,r]));const a=new Set(i?this.initialSelectedShapeIds:[]);let l,c,d,u,h,p;const{corners:f}=this.brush,{excludedShapeIds:g,isWrapMode:m}=this,v=m?!s:s;e:for(let y=0,b=t.length;y<b;y++)if(d=t[y],!g.has(d.id)&&!a.has(d.id)&&(u=this.editor.getShapePageBounds(d),u))if(this.brush.contains(u))this.handleHit(d,r,n,a,f);else if(!v&&!this.editor.isShapeOfType(d,"frame")&&this.brush.collides(u)){const t=this.editor.getShapeGeometry(d);if(h=this.editor.getShapePageTransform(d),!h)continue e;p=h.clone().invert().applyToPoints(f);t:for(let o=0;o<p.length;o++)if(l=p[o],c=p[(o+1)%p.length],t.hitTestLineSegment(l,c,8/e)){this.handleHit(d,r,n,a,f);break t}}this.editor.updateInstanceState({brush:{...this.brush.toJson()}}),this.editor.setSelectedShapes(Array.from(a),{squashing:!0})}handleHit(e,t,n,o,r){if(e.parentId===n)return void o.add(e.id);const i=this.editor.getOutermostSelectableShape(e),s=this.editor.getShapeMask(i.id);(!s||function(e,t){let n,o,r,i;for(let s=0,a=e.length;s<a;s++){n=e[s],o=e[(s+1)%a];for(let e=0,s=t.length;e<s;e++)if(r=t[e],i=t[(e+1)%s],uf(n,o,r,i))return!0}return!1}(s,r)||md(t,s))&&o.add(i.id)}}function jx(e){var t;const n=e.getZoomLevel(),{inputs:{currentPagePoint:o}}=e;return null!==(t=e.getShapeAtPoint(o,{hitInside:!1,hitLabels:!1,margin:8/n,renderingOnly:!0}))&&void 0!==t?t:e.getSelectedShapeAtPoint(o)}function Ox(e,t,n){if(!t)throw Error("Needs to translate a cropped shape!");const{crop:o}=t.props;if(!o)return;const r=e.inputs.shiftKey?Math.abs(n.x)<Math.abs(n.y)?"x":"y":null;"x"===r?n.x=0:"y"===r&&(n.y=0),n.rot(-t.rotation);const i=1/(o.bottomRight.x-o.topLeft.x)*t.props.w,s=1/(o.bottomRight.y-o.topLeft.y)*t.props.h,a=o.bottomRight.y-o.topLeft.y,l=o.bottomRight.x-o.topLeft.x,c=Ci(o);c.topLeft.x=Math.min(1-l,Math.max(0,c.topLeft.x-n.x/i)),c.topLeft.y=Math.min(1-a,Math.max(0,c.topLeft.y-n.y/s)),c.bottomRight.x=c.topLeft.x+l,c.bottomRight.y=c.topLeft.y+a;return{id:t.id,type:t.type,props:{crop:c}}}wr(Mx,"id","brushing");class Lx extends Pg{constructor(){super(...arguments),wr(this,"onEnter",(()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0});const e=this.editor.getOnlySelectedShape();this.editor.on("change-history",this.cleanupCroppingState),e&&(this.editor.mark("crop"),this.editor.setCroppingShape(e.id))})),wr(this,"onExit",(()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.editor.off("change-history",this.cleanupCroppingState)})),wr(this,"onCancel",(()=>{this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})})),wr(this,"onPointerDown",(e=>{if(!this.editor.getIsMenuOpen()){if(e.ctrlKey)return this.cancel(),void this.editor.root.handleEvent(e);switch(e.target){case"canvas":{const t=jx(this.editor);if(t&&!this.editor.isShapeOfType(t,"group"))return void this.onPointerDown({...e,shape:t,target:"shape"});this.cancel(),this.editor.root.handleEvent(e);break}case"shape":if(e.shape.id===this.editor.getCroppingShapeId())return void this.editor.setCurrentTool("select.crop.pointing_crop",e);var t;null!==(t=this.editor.getShapeUtil(e.shape))&&void 0!==t&&t.canCrop(e.shape)?(this.editor.setCroppingShape(e.shape.id),this.editor.setSelectedShapes([e.shape.id]),this.editor.setCurrentTool("select.crop.pointing_crop",e)):(this.cancel(),this.editor.root.handleEvent(e));break;case"selection":switch(e.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":this.editor.setCurrentTool("select.pointing_rotate_handle",{...e,onInteractionEnd:"select.crop"});break;case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":this.editor.setCurrentTool("select.pointing_crop_handle",{...e,onInteractionEnd:"select.crop"});break;default:this.cancel()}}}})),wr(this,"onDoubleClick",(e=>{if(this.editor.inputs.shiftKey||"up"!==e.phase)return;const t=this.editor.getCroppingShapeId();if(!t)return;const n=this.editor.getShape(t);if(!n)return;const o=this.editor.getShapeUtil(n);var r;o&&("selection"===e.target&&(null===(r=o.onDoubleClickEdge)||void 0===r||r.call(o,n)))})),wr(this,"onKeyDown",(()=>{this.nudgeCroppingImage(!1)})),wr(this,"onKeyRepeat",(()=>{this.nudgeCroppingImage(!0)})),wr(this,"onKeyUp",(e=>{if("Enter"===e.code)this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})})),wr(this,"cleanupCroppingState",(()=>{this.editor.getCroppingShapeId()||this.editor.setCurrentTool("select.idle",{})}))}cancel(){this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}nudgeCroppingImage(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{editor:{inputs:{keys:t}}}=this,n=t.has("ShiftLeft"),o=new Gc(0,0);if(t.has("ArrowLeft")&&(o.x+=1),t.has("ArrowRight")&&(o.x-=1),t.has("ArrowUp")&&(o.y+=1),t.has("ArrowDown")&&(o.y-=1),o.equals(new Gc(0,0)))return;n&&o.mul(10);const r=this.editor.getShape(this.editor.getCroppingShapeId());if(!r)return;const i=Ox(this.editor,r,o);i&&(e||this.editor.mark("translate crop"),this.editor.updateShapes([i]))}}wr(Lx,"id","idle");class Bx extends Pg{constructor(){super(...arguments),wr(this,"onCancel",(()=>{this.editor.setCurrentTool("select.crop.idle",{})})),wr(this,"onPointerMove",(e=>{this.editor.inputs.isDragging&&this.editor.setCurrentTool("select.crop.translating_crop",e)})),wr(this,"onPointerUp",(e=>{this.editor.setCurrentTool("select.crop.idle",e)}))}}wr(Bx,"id","pointing_crop");class Rx extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"markId","translating crop"),wr(this,"snapshot",{}),wr(this,"onEnter",(e=>{this.info=e,this.snapshot=this.createSnapshot(),this.editor.mark(this.markId),this.editor.setCursor({type:"move",rotation:0}),this.updateShapes()})),wr(this,"onExit",(()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})})),wr(this,"onPointerMove",(()=>{this.updateShapes()})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onKeyDown",(e=>{switch(e.key){case"Alt":case"Shift":return void this.updateShapes()}})),wr(this,"onKeyUp",(e=>{switch(e.key){case"Enter":return void this.complete();case"Alt":case"Shift":this.updateShapes()}}))}complete(){this.updateShapes(),this.editor.setCurrentTool("select.crop.idle",this.info)}cancel(){this.editor.bailToMark(this.markId),this.editor.setCurrentTool("select.crop.idle",this.info)}createSnapshot(){return{shape:this.editor.getOnlySelectedShape()}}updateShapes(){const e=this.snapshot.shape;if(!e)return;const{originPagePoint:t,currentPagePoint:n}=this.editor.inputs,o=n.clone().sub(t),r=Ox(this.editor,e,o);r&&this.editor.updateShapes([r],{squashing:!0})}}wr(Rx,"id","translating_crop");class Nx extends Pg{}wr(Nx,"id","crop"),wr(Nx,"initial","idle"),wr(Nx,"children",(()=>[Lx,Rx,Bx]));const Dx={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"};class zx extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"onEnter",(e=>{this.info=e,this.updateCursor()})),wr(this,"onPointerMove",(()=>{this.editor.inputs.isDragging&&this.parent.transition("resizing",this.info)})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.cancel()})),wr(this,"onInterrupt",(()=>{this.cancel()}))}updateCursor(){const e=this.editor.getSelectedShapes(),t=Dx[this.info.handle];this.editor.updateInstanceState({cursor:{type:t,rotation:1===e.length?e[0].rotation:0}})}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}wr(zx,"id","pointing_resize_handle");class Fx extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"markId",""),wr(this,"snapshot",{}),wr(this,"onEnter",(e=>{this.info=e,this.markId="cropping",this.editor.mark(this.markId),this.snapshot=this.createSnapshot(),this.updateShapes()})),wr(this,"onPointerMove",(()=>{this.updateShapes()})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"getDefaultCrop",(()=>({topLeft:{x:0,y:0},bottomRight:{x:1,y:1}})))}updateCursor(){const e=this.editor.getSelectedShapes()[0];if(!e)return;const t=Dx[this.info.handle];this.editor.updateInstanceState({cursor:{type:t,rotation:e.rotation}})}updateShapes(){var e;const{shape:t,cursorHandleOffset:n}=this.snapshot;if(!t)return;if(!this.editor.getShapeUtil("image"))return;const o=t.props,r=this.editor.inputs.currentPagePoint.clone().sub(n),i=this.editor.inputs.originPagePoint.clone().sub(n),s=r.clone().sub(i).rot(-t.rotation),a=null!==(e=o.crop)&&void 0!==e?e:this.getDefaultCrop(),l=Ci(a),c=new Gc(t.x,t.y),d=new Gc(0,0),u=1/(a.bottomRight.x-a.topLeft.x)*o.w,h=1/(a.bottomRight.y-a.topLeft.y)*o.h;let p=!1;switch(this.info.handle){case"top":case"top_left":case"top_right":if(h<8)break;p=!0,l.topLeft.y=l.topLeft.y+s.y/h;h*(l.bottomRight.y-l.topLeft.y)<8?(l.topLeft.y=l.bottomRight.y-8/h,d.y=(l.topLeft.y-a.topLeft.y)*h):l.topLeft.y<=0?(l.topLeft.y=0,d.y=(l.topLeft.y-a.topLeft.y)*h):d.y=s.y;break;case"bottom":case"bottom_left":case"bottom_right":if(h<8)break;p=!0,l.bottomRight.y=Math.min(1,l.bottomRight.y+s.y/h);h*(l.bottomRight.y-l.topLeft.y)<8&&(l.bottomRight.y=l.topLeft.y+8/h);break}switch(this.info.handle){case"left":case"top_left":case"bottom_left":if(u<8)break;p=!0,l.topLeft.x=l.topLeft.x+s.x/u;u*(l.bottomRight.x-l.topLeft.x)<8?(l.topLeft.x=l.bottomRight.x-8/u,d.x=(l.topLeft.x-a.topLeft.x)*u):l.topLeft.x<=0?(l.topLeft.x=0,d.x=(l.topLeft.x-a.topLeft.x)*u):d.x=s.x;break;case"right":case"top_right":case"bottom_right":if(u<8)break;p=!0,l.bottomRight.x=Math.min(1,l.bottomRight.x+s.x/u);u*(l.bottomRight.x-l.topLeft.x)<8&&(l.bottomRight.x=l.topLeft.x+8/u);break}if(!p)return;c.add(d.rot(t.rotation));const f={id:t.id,type:t.type,x:c.x,y:c.y,props:{crop:l,w:(l.bottomRight.x-l.topLeft.x)*u,h:(l.bottomRight.y-l.topLeft.y)*h}};this.editor.updateShapes([f],{squashing:!0}),this.updateCursor()}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle"))}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle"))}createSnapshot(){const e=this.editor.getSelectionRotation(),{inputs:{originPagePoint:t}}=this.editor,n=this.editor.getOnlySelectedShape(),o=this.editor.getSelectionRotatedPageBounds(),r=Gc.RotWith(o.getHandlePoint(this.info.handle),o.point,e);return{shape:n,cursorHandleOffset:Gc.Sub(t,r)}}}wr(Fx,"id","cropping");class Ux extends Pg{constructor(){super(...arguments),wr(this,"shapeId",""),wr(this,"initialHandle",{}),wr(this,"initialAdjacentHandle",null),wr(this,"initialPagePoint",{}),wr(this,"markId",""),wr(this,"initialPageTransform",void 0),wr(this,"initialPageRotation",void 0),wr(this,"info",{}),wr(this,"isPrecise",!1),wr(this,"isPreciseId",null),wr(this,"pointingId",null),wr(this,"onEnter",(e=>{const{shape:t,isCreating:n,handle:o}=e;if(this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.shapeId=t.id,this.markId=n?"creating:".concat(t.id):"dragging handle",n||this.editor.mark(this.markId),this.initialHandle=is(o),this.editor.isShapeOfType(t,"line")&&"create"===this.initialHandle.type){this.editor.updateShape({...t,props:{points:{...t.props.points,[o.index]:{id:o.index,index:o.index,x:o.x,y:o.y}}}});const e=this.editor.getShapeHandles(t).find((e=>e.index===o.index));this.initialHandle=is(e)}this.initialPageTransform=this.editor.getShapePageTransform(t),this.initialPageRotation=this.initialPageTransform.rotation(),this.initialPagePoint=this.editor.inputs.originPagePoint.clone(),this.editor.updateInstanceState({cursor:{type:n?"cross":"grabbing",rotation:0}},{ephemeral:!0});const r=this.editor.getShapeHandles(t).sort(ns),i=r.findIndex((t=>t.id===e.handle.id));this.initialAdjacentHandle=null;for(let s=i+1;s<r.length;s++){const t=r[s];if("vertex"===t.type&&"middle"!==t.id&&t.id!==e.handle.id){this.initialAdjacentHandle=t;break}}if(!this.initialAdjacentHandle)for(let s=r.length-1;s>=0;s--){const t=r[s];if("vertex"===t.type&&"middle"!==t.id&&t.id!==e.handle.id){this.initialAdjacentHandle=t;break}}if(this.editor.isShapeOfType(t,"arrow")){const n=t.props[e.handle.id];this.isPrecise=!1,"binding"===(null===n||void 0===n?void 0:n.type)?(this.editor.setHintingShapes([n.boundShapeId]),this.isPrecise=n.isPrecise,this.isPrecise?this.isPreciseId=n.boundShapeId:this.resetExactTimeout()):this.editor.setHintingShapes([])}this.update(),this.editor.select(this.shapeId)})),wr(this,"exactTimeout",-1),wr(this,"onPointerMove",(()=>{this.update()})),wr(this,"onKeyDown",(()=>{this.update()})),wr(this,"onKeyUp",(()=>{this.update()})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onExit",(()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.setHintingShapes([]),this.editor.snaps.clearIndicators(),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})}))}resetExactTimeout(){-1!==this.exactTimeout&&this.clearExactTimeout(),this.exactTimeout=setTimeout((()=>{this.getIsActive()&&!this.isPrecise&&(this.isPrecise=!0,this.isPreciseId=this.pointingId,this.update()),this.exactTimeout=-1}),750)}clearExactTimeout(){-1!==this.exactTimeout&&(clearTimeout(this.exactTimeout),this.exactTimeout=-1)}complete(){this.editor.snaps.clearIndicators();const{onInteractionEnd:e}=this.info;this.editor.getInstanceState().isToolLocked&&e?this.editor.setCurrentTool(e,{shapeId:this.shapeId}):this.parent.transition("idle")}cancel(){this.editor.bailToMark(this.markId),this.editor.snaps.clearIndicators();const{onInteractionEnd:e}=this.info;e?this.editor.setCurrentTool(e,{shapeId:this.shapeId}):this.parent.transition("idle")}update(){var e;const{editor:t,shapeId:n,initialPagePoint:o}=this,{initialHandle:r,initialPageRotation:i,initialAdjacentHandle:s}=this,a=this.editor.getHintingShapeIds(),l=this.editor.user.getIsSnapMode(),{snaps:c,inputs:{currentPagePoint:d,shiftKey:u,ctrlKey:h,altKey:p,pointerVelocity:f}}=t,g=this.info.shape,m=t.getShape(n);if(!m)return;const v=t.getShapeUtil(m);let y=d.clone().sub(o).rot(-i).add(r);if(u&&s&&"middle"!==r.id){const e=Gc.Angle(s,y),t=cd(e,24)-e;y=Gc.RotWith(y,s,t)}t.snaps.clearIndicators();let b={...r,x:y.x,y:y.y};if(r.canSnap&&(l?!h:h)){if(!t.getShapePageTransform(m.id))throw Error("Expected a page transform");const e=c.handles.snapHandle({currentShapeId:n,handle:b});e&&(e.nudge.rot(-t.getShapeParentTransform(m).rotation()),y.add(e.nudge),b={...r,x:y.x,y:y.y})}const w=null===(e=v.onHandleDrag)||void 0===e?void 0:e.call(v,m,{handle:b,isPrecise:this.isPrecise||p,initial:g}),x={...m,...w};if(r.canBind){const e=x.props[r.id];"binding"===(null===e||void 0===e?void 0:e.type)?a[0]!==e.boundShapeId&&(t.setHintingShapes([e.boundShapeId]),this.pointingId=e.boundShapeId,this.isPrecise=f.len()<.5||p,this.isPreciseId=this.isPrecise?e.boundShapeId:null,this.resetExactTimeout()):a.length>0&&(t.setHintingShapes([]),this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout())}w&&t.updateShapes([x],{squashing:!0})}}wr(Ux,"id","dragging_handle");class Hx extends Pg{constructor(){super(...arguments),wr(this,"onEnter",(()=>{const e=this.editor.getEditingShape();if(!e)throw Error("Entered editing state without an editing shape");Uy(this.editor),this.editor.select(e)})),wr(this,"onExit",(()=>{var e;const{editingShapeId:t}=this.editor.getCurrentPageState();if(!t)return;this.editor.setEditingShape(null);const n=this.editor.getShape(t),o=this.editor.getShapeUtil(n);null===(e=o.onEditEnd)||void 0===e||e.call(o,n)})),wr(this,"onPointerMove",(e=>{switch(e.target){case"shape":case"canvas":return void Uy(this.editor)}})),wr(this,"onPointerDown",(e=>{switch(e.target){case"canvas":{const t=jx(this.editor);if(t)return void this.onPointerDown({...e,shape:t,target:"shape"});break}case"shape":{const{shape:t}=e,n=this.editor.getEditingShape();if(!n)throw Error("Expected an editing shape!");if(t.type===n.type){if(!this.editor.isShapeOfType(t,"geo")&&!this.editor.isShapeOfType(t,"arrow"))return t.id!==n.id?void this.parent.transition("pointing_shape",e):void(this.editor.isShapeOfType(t,"frame")&&this.editor.setEditingShape(null));{const o=this.editor.getShapeUtil(t).getGeometry(t).children[1];if(o){const r=this.editor.getPointInShapeSpace(t,this.editor.inputs.currentPagePoint);if(o.bounds.containsPoint(r))return t.id===n.id?void 0:void this.parent.transition("pointing_shape",e)}}}break}}this.parent.transition("idle",e),this.editor.root.handleEvent(e)})),wr(this,"onComplete",(e=>{this.parent.transition("idle",e)})),wr(this,"onCancel",(e=>{this.parent.transition("idle",e)}))}}function Vx(e){const t=e.getOnlySelectedShape();return!(!t||e.isShapeOrAncestorLocked(t)||!e.getShapeUtil(t).canCrop(t))}function Wx(e){const t=e.getSelectedShapeIds(),{shiftKey:n,altKey:o,currentPagePoint:r}=e.inputs,i=e.getShapeAtPoint(r,{hitInside:!1,margin:8/e.getZoomLevel(),hitLabels:!0,renderingOnly:!0,filter:e=>!e.isLocked});if(i){const r=e.getOutermostSelectableShape(i);if(n&&!o)e.cancelDoubleClick(),t.includes(r.id)?(e.mark("deselecting shape"),e.deselect(r)):(e.mark("shift selecting shape"),e.setSelectedShapes([...t,r.id]));else{let n;n=r===i||r.id===e.getFocusedGroupId()||t.includes(r.id)?i:r,n&&!t.includes(n.id)&&(e.mark("selecting shape"),e.select(n.id))}}else{if(n)return;{t.length>0&&(e.mark("selecting none"),e.selectNone());const n=e.getFocusedGroupId();if(yl(n)){const t=e.getShape(n);e.isPointInShape(t,r,{margin:0,hitInside:!0})||e.setFocusedGroup(null)}}}}wr(Hx,"id","editing_shape");class Kx extends Pg{constructor(){super(...arguments),wr(this,"onEnter",(()=>{this.parent.setCurrentToolIdMask(void 0),Uy(this.editor),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})})),wr(this,"onPointerMove",(()=>{Uy(this.editor)})),wr(this,"onPointerDown",(e=>{if(this.editor.getIsMenuOpen())return;const t=e.ctrlKey&&Vx(this.editor);if(e.ctrlKey&&!t)return"shape"===e.target&&this.isDarwin&&this.editor.inputs.keys.has("ControlLeft")&&!this.editor.isShapeOrAncestorLocked(e.shape)?void this.parent.transition("pointing_shape",e):void this.parent.transition("brushing",e);switch(e.target){case"canvas":{const t=jx(this.editor);if(t&&!t.isLocked)return void this.onPointerDown({...e,shape:t,target:"shape"});const n=this.editor.getSelectedShapeIds(),o=this.editor.getOnlySelectedShape(),{inputs:{currentPagePoint:r}}=this.editor;if((n.length>1||o&&!this.editor.getShapeUtil(o).hideSelectionBoundsBg(o))&&Xx(this.editor,r))return void this.onPointerDown({...e,target:"selection"});this.parent.transition("pointing_canvas",e);break}case"shape":{const{shape:t}=e;if(this.isOverArrowLabelTest(t)){this.parent.transition("pointing_arrow_label",e);break}if(this.editor.isShapeOrAncestorLocked(t)){this.parent.transition("pointing_canvas",e);break}this.parent.transition("pointing_shape",e);break}case"handle":if(this.editor.getInstanceState().isReadonly)break;this.editor.inputs.altKey?this.parent.transition("pointing_shape",e):this.parent.transition("pointing_handle",e);break;case"selection":switch(e.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":this.parent.transition("pointing_rotate_handle",e);break;case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":t?this.parent.transition("pointing_crop_handle",e):this.parent.transition("pointing_resize_handle",e);break;default:{const t=this.editor.getHoveredShape();if(t&&!this.editor.getSelectedShapeIds().includes(t.id)&&!t.isLocked)return void this.onPointerDown({...e,shape:t,target:"shape"});this.parent.transition("pointing_selection",e)}}}})),wr(this,"onDoubleClick",(e=>{if(!this.editor.inputs.shiftKey&&"up"===e.phase)switch(e.target){case"canvas":{var t;const n=this.editor.getHoveredShape(),o=n&&!this.editor.isShapeOfType(n,"group")?n:null!==(t=this.editor.getSelectedShapeAtPoint(this.editor.inputs.currentPagePoint))&&void 0!==t?t:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:8/this.editor.getZoomLevel(),hitInside:!1}),r=this.editor.getFocusedGroupId();if(o){if(this.editor.isShapeOfType(o,"group"))return void Wx(this.editor);{const e=this.editor.getShape(o.parentId);if(e&&this.editor.isShapeOfType(e,"group")&&(!r||e.id!==r))return void Wx(this.editor)}return void this.onDoubleClick({...e,shape:o,target:"shape"})}this.editor.inputs.shiftKey||this.handleDoubleClickOnCanvas(e);break}case"selection":{if(this.editor.getInstanceState().isReadonly)break;const t=this.editor.getOnlySelectedShape();if(t){const o=this.editor.getShapeUtil(t);if(!this.canInteractWithShapeInReadOnly(t))return;if("right"===e.handle||"left"===e.handle||"top"===e.handle||"bottom"===e.handle){var n;const e=null===(n=o.onDoubleClickEdge)||void 0===n?void 0:n.call(o,t);if(e)return this.editor.mark("double click edge"),void this.editor.updateShapes([e])}if(o.canCrop(t)&&!this.editor.isShapeOrAncestorLocked(t))return void this.parent.transition("crop",e);this.shouldStartEditingShape(t)&&this.startEditingShape(t,e)}break}case"shape":{const{shape:t}=e,n=this.editor.getShapeUtil(t);if("video"!==t.type&&"embed"!==t.type&&this.editor.getInstanceState().isReadonly)break;if(n.onDoubleClick){var o;const i=null===(o=n.onDoubleClick)||void 0===o?void 0:o.call(n,t);if(i)return void this.editor.updateShapes([i]);var r;if(n.canCrop(t)&&!this.editor.isShapeOrAncestorLocked(t))return this.editor.mark("select and crop"),this.editor.select(null===(r=e.shape)||void 0===r?void 0:r.id),void this.parent.transition("crop",e)}this.shouldStartEditingShape(t)?this.startEditingShape(t,e):this.handleDoubleClickOnCanvas(e);break}case"handle":{var i;if(this.editor.getInstanceState().isReadonly)break;const{shape:t,handle:n}=e,o=this.editor.getShapeUtil(t),r=null===(i=o.onDoubleClickHandle)||void 0===i?void 0:i.call(o,t,n);r?this.editor.updateShapes([r]):this.shouldStartEditingShape(t)&&this.startEditingShape(t,e)}}})),wr(this,"onRightClick",(e=>{switch(e.target){case"canvas":{const t=this.editor.getHoveredShape(),n=t&&!this.editor.isShapeOfType(t,"group")?t:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:8/this.editor.getZoomLevel(),hitInside:!1,hitLabels:!0,hitFrameInside:!1,renderingOnly:!0});if(n)return void this.onRightClick({...e,shape:n,target:"shape"});const o=this.editor.getSelectedShapeIds(),r=this.editor.getOnlySelectedShape(),{inputs:{currentPagePoint:i}}=this.editor;if((o.length>1||r&&!this.editor.getShapeUtil(r).hideSelectionBoundsBg(r))&&Xx(this.editor,i))return void this.onRightClick({...e,target:"selection"});this.editor.selectNone();break}case"shape":{const{selectedShapeIds:t}=this.editor.getCurrentPageState(),{shape:n}=e,o=this.editor.getOutermostSelectableShape(n,(e=>!t.includes(e.id)));t.includes(o.id)||(this.editor.mark("selecting shape"),this.editor.setSelectedShapes([o.id]));break}}})),wr(this,"onCancel",(()=>{this.editor.getFocusedGroupId()!==this.editor.getCurrentPageId()&&this.editor.getSelectedShapeIds().length>0?this.editor.popFocusedGroupId():(this.editor.mark("clearing selection"),this.editor.selectNone())})),wr(this,"onKeyDown",(e=>{switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":this.nudgeSelectedShapes(!1)}})),wr(this,"onKeyRepeat",(e=>{switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":this.nudgeSelectedShapes(!0)}})),wr(this,"onKeyUp",(e=>{switch(e.code){case"Enter":{const t=this.editor.getSelectedShapes();if(t.every((e=>this.editor.isShapeOfType(e,"group"))))return void this.editor.setSelectedShapes(t.flatMap((e=>this.editor.getSortedChildIdsForParent(e.id))));const n=this.editor.getOnlySelectedShape();if(n&&this.shouldStartEditingShape(n))return void this.startEditingShape(n,{...e,target:"shape",shape:n});Vx(this.editor)&&this.parent.transition("crop",e);break}}})),wr(this,"isDarwin",window.navigator.userAgent.toLowerCase().indexOf("mac")>-1)}shouldStartEditingShape(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.editor.getOnlySelectedShape();return!!e&&((!this.editor.isShapeOrAncestorLocked(e)||"embed"===e.type)&&(!!this.canInteractWithShapeInReadOnly(e)&&this.editor.getShapeUtil(e).canEdit(e)))}startEditingShape(e,t){this.editor.isShapeOrAncestorLocked(e)&&"embed"!==e.type||(this.editor.mark("editing shape"),this.editor.setEditingShape(e.id),this.parent.transition("editing_shape",t))}isOverArrowLabelTest(e){if(!e)return!1;const t=this.editor.getPointInShapeSpace(e,this.editor.inputs.currentPagePoint);if(this.editor.isShapeOfType(e,"arrow")){const n=this.editor.getShapeGeometry(e).children[1];if(n&&md(t,n.vertices))return!0}return!1}handleDoubleClickOnCanvas(e){if(this.editor.getInstanceState().isReadonly)return;this.editor.mark("creating text shape");const t=bl(),{x:n,y:o}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id:t,type:"text",x:n,y:o,props:{text:"",autoSize:!0}}]);const r=this.editor.getShape(t);if(!r)return;const i=this.editor.getShapeUtil(r);this.editor.getInstanceState().isReadonly&&!i.canEditInReadOnly(r)||(this.editor.setEditingShape(t),this.editor.select(t),this.parent.transition("editing_shape",e))}nudgeSelectedShapes(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{editor:{inputs:{keys:t}}}=this,n=t.has("ShiftLeft"),o=new Gc(0,0);if(t.has("ArrowLeft")&&(o.x-=1),t.has("ArrowRight")&&(o.x+=1),t.has("ArrowUp")&&(o.y-=1),t.has("ArrowDown")&&(o.y+=1),o.equals(new Gc(0,0)))return;e||this.editor.mark("nudge shapes");const{gridSize:r}=this.editor.getDocumentSettings(),i=this.editor.getInstanceState().isGridMode?n?r*Yx:r:n?Gx:qx;this.editor.nudgeShapes(this.editor.getSelectedShapeIds(),o.mul(i))}canInteractWithShapeInReadOnly(e){if(!this.editor.getInstanceState().isReadonly)return!0;return!!this.editor.getShapeUtil(e).canEditInReadOnly(e)}}wr(Kx,"id","idle");const Gx=10,qx=1,Yx=5;function Xx(e,t){const n=e.getSelectionRotatedPageBounds();if(!n)return!1;const o=e.getSelectionRotation();return o?md(t,n.corners.map((e=>Gc.RotWith(e,n.point,o)))):n.containsPoint(t)}class $x extends Pg{constructor(){super(...arguments),wr(this,"shapeId",""),wr(this,"markId",""),wr(this,"info",{}),wr(this,"onEnter",(e=>{const{shape:t}=e;this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.info=e,this.shapeId=t.id,this.updateCursor();const n=this.editor.getShapeGeometry(t).children[1];if(!n)throw Error("Expected to find an arrow label geometry for shape: ".concat(t.id));const{currentPagePoint:o}=this.editor.inputs,r=this.editor.getPointInShapeSpace(t,o);this._labelDragOffset=Gc.Sub(n.center,r),this.markId="label-drag start",this.editor.mark(this.markId),this.editor.setSelectedShapes([this.shapeId])})),wr(this,"onExit",(()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})})),wr(this,"_labelDragOffset",new Gc(0,0)),wr(this,"onPointerMove",(()=>{const{isDragging:e}=this.editor.inputs;if(!e)return;const t=this.editor.getShape(this.shapeId);if(!t)return;const n=this.editor.getArrowInfo(t),o=this.editor.getShapeGeometry(t),r=o.children[0],i=this.editor.getPointInShapeSpace(t,this.editor.inputs.currentPagePoint),s=r.nearestPoint(Gc.Add(i,this._labelDragOffset));let a;if(n.isStraight){const e=Gc.Dist(n.start.point,n.end.point);a=1-Gc.Dist(n.end.point,s)/e}else{const{_center:e,measure:t,angleEnd:n,angleStart:r}=o.children[0];a=xd(t,r,n,e.angle(s))}isNaN(a)&&(a=.5),this.editor.updateShape({id:t.id,type:t.type,props:{labelPosition:a}},{squashing:!0})})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.cancel()})),wr(this,"onInterrupt",(()=>{this.cancel()}))}updateCursor(){this.editor.setCursor({type:"grabbing",rotation:0})}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}wr($x,"id","pointing_arrow_label");class Zx extends Pg{constructor(){super(...arguments),wr(this,"onEnter",(()=>{const{inputs:e}=this.editor;e.shiftKey||this.editor.getSelectedShapeIds().length>0&&(this.editor.mark("selecting none"),this.editor.selectNone())})),wr(this,"onPointerMove",(e=>{this.editor.inputs.isDragging&&this.parent.transition("brushing",e)})),wr(this,"onPointerUp",(()=>{Wx(this.editor),this.complete()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onInterrupt",(()=>{this.parent.transition("idle")}))}complete(){this.parent.transition("idle")}}wr(Zx,"id","pointing_canvas");class Qx extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"onEnter",(e=>{this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd);const t=this.editor.getSelectedShapes()[0];t&&(this.updateCursor(t),this.editor.setCroppingShape(t.id))})),wr(this,"onExit",(()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.parent.setCurrentToolIdMask(void 0)})),wr(this,"onPointerMove",(()=>{this.editor.inputs.isDragging&&this.parent.transition("cropping",{...this.info,onInteractionEnd:this.info.onInteractionEnd})})),wr(this,"onPointerUp",(()=>{this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle"))})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.cancel()})),wr(this,"onInterrupt",(()=>{this.cancel()}))}updateCursor(e){const t=Dx[this.info.handle];this.editor.updateInstanceState({cursor:{type:t,rotation:e.rotation}})}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle"))}}wr(Qx,"id","pointing_crop_handle");class Jx extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"onEnter",(e=>{this.info=e;const{shape:t}=e;if(this.editor.isShapeOfType(t,"arrow")){const n=t.props[e.handle.id];"binding"===(null===n||void 0===n?void 0:n.type)&&this.editor.setHintingShapes([n.boundShapeId])}this.editor.updateInstanceState({cursor:{type:"grabbing",rotation:0}},{ephemeral:!0})})),wr(this,"onExit",(()=>{this.editor.setHintingShapes([]),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})})),wr(this,"onPointerUp",(()=>{this.parent.transition("idle",this.info)})),wr(this,"onPointerMove",(()=>{this.editor.inputs.isDragging&&this.parent.transition("dragging_handle",this.info)})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.cancel()})),wr(this,"onInterrupt",(()=>{this.cancel()}))}cancel(){this.parent.transition("idle")}}wr(Jx,"id","pointing_handle");class eS extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"onEnter",(e=>{this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.info=e,this.updateCursor()})),wr(this,"onExit",(()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})})),wr(this,"onPointerMove",(()=>{const{isDragging:e}=this.editor.inputs;e&&this.parent.transition("rotating",this.info)})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.cancel()})),wr(this,"onInterrupt",(()=>{this.cancel()}))}updateCursor(){const e=this.editor.getSelectionRotation();this.editor.updateInstanceState({cursor:{type:Dx[this.info.handle],rotation:e}})}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}wr(eS,"id","pointing_rotate_handle");class tS extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"onEnter",(e=>{this.info=e})),wr(this,"onPointerUp",(e=>{Wx(this.editor),this.parent.transition("idle",e)})),wr(this,"onPointerMove",(e=>{if(this.editor.inputs.isDragging){if(this.editor.getInstanceState().isReadonly)return;this.parent.transition("translating",e)}})),wr(this,"onDoubleClick",(e=>{const t=this.editor.getHoveredShape(),n=t&&!this.editor.isShapeOfType(t,"group")?t:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{hitInside:!0,margin:0,renderingOnly:!0});var o,r;if(n)return this.parent.transition("idle"),void(null===(o=(r=this.parent).onDoubleClick)||void 0===o||o.call(r,{...e,target:"shape",shape:this.editor.getShape(n)}))})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.cancel()})),wr(this,"onInterrupt",(()=>{this.cancel()}))}cancel(){this.parent.transition("idle")}}wr(tS,"id","pointing_selection");class nS extends Pg{constructor(){super(...arguments),wr(this,"hitShape",{}),wr(this,"hitShapeForPointerUp",{}),wr(this,"didSelectOnEnter",!1),wr(this,"onEnter",(e=>{const t=this.editor.getSelectedShapeIds(),n=this.editor.getSelectionRotatedPageBounds(),o=this.editor.getFocusedGroupId(),{inputs:{currentPagePoint:r,shiftKey:i,altKey:s}}=this.editor;this.hitShape=e.shape;const a=this.editor.getOutermostSelectableShape(e.shape);if(this.editor.getShapeUtil(e.shape).onClick||a.id===o||t.includes(a.id)||this.editor.isAncestorSelected(a.id)||t.length>1&&null!==n&&void 0!==n&&n.containsPoint(r))return this.didSelectOnEnter=!1,void(this.hitShapeForPointerUp=a);this.didSelectOnEnter=!0,i&&!s?(this.editor.cancelDoubleClick(),t.includes(a.id)||(this.editor.mark("shift selecting shape"),this.editor.setSelectedShapes([...t,a.id]))):(this.editor.mark("selecting shape"),this.editor.setSelectedShapes([a.id]))})),wr(this,"onPointerUp",(e=>{var t;const n=this.editor.getSelectedShapeIds(),o=this.editor.getFocusedGroupId(),r=this.editor.getZoomLevel(),{inputs:{currentPagePoint:i,shiftKey:s}}=this.editor,a=null!==(t=this.editor.getShapeAtPoint(i,{margin:8/r,hitInside:!0,renderingOnly:!0}))&&void 0!==t?t:this.hitShape,l=a?this.editor.getOutermostSelectableShape(a):this.hitShapeForPointerUp;if(l){const t=this.editor.getShapeUtil(l);if(t.onClick){var c;const n=null===(c=t.onClick)||void 0===c?void 0:c.call(t,l);if(n)return this.editor.mark("shape on click"),this.editor.updateShapes([n]),void this.parent.transition("idle",e)}if(l.id===o)return n.length>0?(this.editor.mark("clearing shape ids"),this.editor.setSelectedShapes([])):this.editor.popFocusedGroupId(),void this.parent.transition("idle",e)}if(!this.didSelectOnEnter){const e=this.editor.getOutermostSelectableShape(a,(e=>!n.includes(e.id)));if(n.includes(e.id))if(s)this.editor.mark("deselecting on pointer up"),this.editor.deselect(l);else if(n.includes(l.id)){if(1===n.length&&(this.editor.isShapeOfType(l,"geo")||this.editor.isShapeOfType(l,"arrow"))){const e=this.editor.getShapeGeometry(l).children[1];if(e){const t=this.editor.getPointInShapeSpace(l,i);if(e.bounds.containsPoint(t,0)&&e.hitTestPoint(t))return void this.editor.batch((()=>{this.editor.mark("editing on pointer up"),this.editor.select(l.id);const e=this.editor.getShapeUtil(l);this.editor.getInstanceState().isReadonly&&!e.canEditInReadOnly(l)||(this.editor.setEditingShape(l.id),this.editor.setCurrentTool("select.editing_shape"))}))}}this.editor.mark("selecting on pointer up"),this.editor.select(l.id)}else this.editor.mark("selecting on pointer up"),this.editor.select(l);else if(s){const t=this.editor.getShapeAncestors(e);this.editor.mark("shift deselecting on pointer up"),this.editor.setSelectedShapes([...this.editor.getSelectedShapeIds().filter((e=>!t.find((t=>t.id===e)))),e.id])}else this.editor.mark("selecting on pointer up"),this.editor.setSelectedShapes([e.id])}this.parent.transition("idle",e)})),wr(this,"onPointerMove",(e=>{if(this.editor.inputs.isDragging){if(this.editor.getInstanceState().isReadonly)return;this.parent.transition("translating",e)}})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.cancel()})),wr(this,"onInterrupt",(()=>{this.cancel()}))}cancel(){this.parent.transition("idle")}}wr(nS,"id","pointing_shape");class oS extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"markId",""),wr(this,"didHoldCommand",!1),wr(this,"creationCursorOffset",{x:0,y:0}),wr(this,"snapshot",{}),wr(this,"onEnter",(e=>{const{isCreating:t=!1,creationCursorOffset:n={x:0,y:0}}=e;this.info=e,this.didHoldCommand=!1,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.creationCursorOffset=n,this.snapshot=this._createSnapshot(),t?(this.markId="creating:".concat(this.editor.getOnlySelectedShape().id),this.editor.updateInstanceState({cursor:{type:"cross",rotation:0}},{ephemeral:!0})):(this.markId="starting resizing",this.editor.mark(this.markId)),this.handleResizeStart(),this.updateShapes()})),wr(this,"onTick",(()=>{nv(this.editor)})),wr(this,"onPointerMove",(()=>{this.updateShapes()})),wr(this,"onKeyDown",(()=>{this.updateShapes()})),wr(this,"onKeyUp",(()=>{this.updateShapes()})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onExit",(()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.editor.snaps.clearIndicators()})),wr(this,"_createSnapshot",(()=>{const e=this.editor.getSelectedShapeIds(),t=this.editor.getSelectionRotation(),{inputs:{originPagePoint:n}}=this.editor,o=this.editor.getSelectionRotatedPageBounds(),r=Gc.RotWith(o.getHandlePoint(this.info.handle),o.point,t),i=Gc.Sub(n,r),s=new Map,a=[];e.forEach((t=>{const n=this.editor.getShape(t);if(n){if("frame"===n.type&&a.push({id:t,children:ai(this.editor.getSortedChildIdsForParent(n).map((e=>this.editor.getShape(e))))}),s.set(n.id,this._createShapeSnapshot(n)),this.editor.isShapeOfType(n,"frame")&&1===e.length)return;this.editor.visitDescendants(n.id,(e=>{const t=this.editor.getShape(e);if(t&&(s.set(t.id,this._createShapeSnapshot(t)),this.editor.isShapeOfType(t,"frame")))return!1}))}}));const l=![...s.values()].some((e=>!dd(e.pageRotation,t)||e.isAspectRatioLocked));return{shapeSnapshots:s,selectionBounds:o,cursorHandleOffset:i,selectionRotation:t,selectedShapeIds:e,canShapesDeform:l,initialSelectionPageBounds:this.editor.getSelectionPageBounds(),frames:a}})),wr(this,"_createShapeSnapshot",(e=>{const t=this.editor.getShapePageTransform(e),n=this.editor.getShapeUtil(e);return{shape:e,bounds:this.editor.getShapeGeometry(e).bounds,pageTransform:t,pageRotation:bh.Decompose(t).rotation,isAspectRatioLocked:n.isAspectRatioLocked(e)}}))}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}complete(){var e,t;(this.handleResizeEnd(),this.info.isCreating&&this.info.onCreate)?null===(e=(t=this.info).onCreate)||void 0===e||e.call(t,this.editor.getOnlySelectedShape()):this.editor.getInstanceState().isToolLocked&&this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}handleResizeStart(){const{shapeSnapshots:e}=this.snapshot,t=[];e.forEach((e=>{var n;let{shape:o}=e;const r=this.editor.getShapeUtil(o),i=null===(n=r.onResizeStart)||void 0===n?void 0:n.call(r,o);i&&t.push(i)})),t.length>0&&this.editor.updateShapes(t)}handleResizeEnd(){const{shapeSnapshots:e}=this.snapshot,t=[];e.forEach((e=>{var n;let{shape:o}=e;const r=this.editor.getShape(o.id),i=this.editor.getShapeUtil(o),s=null===(n=i.onResizeEnd)||void 0===n?void 0:n.call(i,o,r);s&&t.push(s)})),t.length>0&&this.editor.updateShapes(t)}updateShapes(){const{altKey:e,shiftKey:t}=this.editor.inputs,{frames:n,shapeSnapshots:o,selectionBounds:r,cursorHandleOffset:i,selectedShapeIds:s,selectionRotation:a,canShapesDeform:l}=this.snapshot,c=t||!l,{ctrlKey:d}=this.editor.inputs,u=this.editor.inputs.currentPagePoint.clone().sub(i).sub(this.creationCursorOffset),h=this.editor.inputs.originPagePoint.clone().sub(i);if(this.editor.getInstanceState().isGridMode&&!d){const{gridSize:e}=this.editor.getDocumentSettings();u.snapToGrid(e)}const p=this.info.handle,f=iS(p,Math.PI);this.editor.snaps.clearIndicators();if((this.editor.user.getIsSnapMode()?!d:d)&&a%Zc===0){const{nudge:t}=this.editor.snaps.shapeBounds.snapResizeShapes({dragDelta:Gc.Sub(u,h),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:iS(p,a),isAspectRatioLocked:c,isResizingFromCenter:e});u.add(t)}const g=Gc.RotWith(e?r.center:r.getHandlePoint(f),r.point,a),m=Gc.Sub(u,g).rot(-a),v=Gc.Sub(h,g).rot(-a),y=Gc.DivV(m,v);Number.isFinite(y.x)||(y.x=1),Number.isFinite(y.y)||(y.y=1);const b="top"===p||"bottom"===p,w="left"===p||"right"===p;c?w?y.y=Math.abs(y.x):b?y.x=Math.abs(y.y):Math.abs(y.x)>Math.abs(y.y)?y.y=Math.abs(y.x)*(y.y<0?-1:1):y.x=Math.abs(y.y)*(y.x<0?-1:1):(b&&(y.x=1),w&&(y.y=1)),this.info.isCreating||this.updateCursor({dragHandle:p,isFlippedX:y.x<0,isFlippedY:y.y<0,rotation:a});for(const x of o.keys()){const e=o.get(x);this.editor.resizeShape(x,y,{initialShape:e.shape,initialBounds:e.bounds,initialPageTransform:e.pageTransform,dragHandle:p,mode:1===s.length&&x===s[0]?"resize_bounds":"scale_shape",scaleOrigin:g,scaleAxisRotation:a})}if(this.editor.inputs.ctrlKey){this.didHoldCommand=!0;for(const{id:e,children:t}of n){if(!t.length)continue;const n=o.get(e).shape,r=this.editor.getShape(e);if(!n||!r)continue;const i=r.x-n.x,s=r.y-n.y,a=new Gc(i,s).rot(-n.rotation);if(0!==a.x||0!==a.y)for(const e of t)this.editor.updateShape({id:e.id,type:e.type,x:e.x-a.x,y:e.y-a.y})}}else if(this.didHoldCommand){this.didHoldCommand=!1;for(const{children:e}of n)if(e.length)for(const t of e)this.editor.updateShape({id:t.id,type:t.type,x:t.x,y:t.y})}}updateCursor(e){let{dragHandle:t,isFlippedX:n,isFlippedY:o,rotation:r}=e;const i={...this.editor.getInstanceState().cursor};switch(t){case"top_left":case"bottom_right":i.type="nwse-resize",n!==o&&(i.type="nesw-resize");break;case"top_right":case"bottom_left":i.type="nesw-resize",n!==o&&(i.type="nwse-resize")}i.rotation=r,this.editor.setCursor(i)}}wr(oS,"id","resizing");const rS=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function iS(e,t){t%=Qc;const n=Math.round(t/($c/4)),o=rS.indexOf(e);return rS[(o+n)%rS.length]}const sS=Math.PI/180;class aS extends Pg{constructor(){super(...arguments),wr(this,"snapshot",{}),wr(this,"info",{}),wr(this,"markId",""),wr(this,"onEnter",(e=>{this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.markId="rotate start",this.editor.mark(this.markId);const t=Af({editor:this.editor});if(!t)return this.parent.transition("idle",this.info);this.snapshot=t,this.handleStart()})),wr(this,"onExit",(()=>{this.editor.setCursor({type:"default",rotation:0}),this.parent.setCurrentToolIdMask(void 0),this.snapshot={}})),wr(this,"onPointerMove",(()=>{this.update()})),wr(this,"onKeyDown",(()=>{this.update()})),wr(this,"onKeyUp",(()=>{this.update()})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"update",(()=>{const e=this._getRotationFromPointerPosition({snapToNearestDegree:!1});Mf({editor:this.editor,delta:e,snapshot:this.snapshot,stage:"update"}),this.editor.updateInstanceState({cursor:{type:Dx[this.info.handle],rotation:e+this.snapshot.initialSelectionRotation}})})),wr(this,"cancel",(()=>{this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)})),wr(this,"complete",(()=>{Mf({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:this.snapshot,stage:"end"}),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)}))}handleStart(){const e=this._getRotationFromPointerPosition({snapToNearestDegree:!1});Mf({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.editor.updateInstanceState({cursor:{type:Dx[this.info.handle],rotation:e+this.snapshot.initialSelectionRotation}})}_getRotationFromPointerPosition(e){let{snapToNearestDegree:t}=e;const n=this.editor.getSelectionRotation(),o=this.editor.getSelectionRotatedPageBounds(),{inputs:{shiftKey:r,currentPagePoint:i}}=this.editor,{initialCursorAngle:s,initialSelectionRotation:a}=this.snapshot;if(!o)return a;let l=a+(o.center.clone().rotWith(o.point,n).angle(i)-s);if(r)l=cd(l,24);else if(t&&(l=Math.round(l/sS)*sS,this.editor.getInstanceState().isCoarsePointer)){const e=cd(l,4),t=ad(l,e);Math.abs(t)<function(e){return e*$c/180}(5)&&(l=e)}return l-a}}wr(aS,"id","rotating");class lS extends Pg{constructor(){super(...arguments),wr(this,"hits",new Set),wr(this,"size",0),wr(this,"scribbleId","id"),wr(this,"initialSelectedShapeIds",new Set),wr(this,"newlySelectedShapeIds",new Set),wr(this,"onEnter",(()=>{this.initialSelectedShapeIds=new Set(this.editor.inputs.shiftKey?this.editor.getSelectedShapeIds():[]),this.newlySelectedShapeIds=new Set,this.size=0,this.hits.clear();const e=this.editor.scribbles.addScribble({color:"selection-stroke",opacity:.32,size:12});this.scribbleId=e.id,this.updateScribbleSelection(!0),requestAnimationFrame((()=>{this.editor.updateInstanceState({brush:null})}))})),wr(this,"onExit",(()=>{this.editor.scribbles.stop(this.scribbleId)})),wr(this,"onPointerMove",(()=>{this.updateScribbleSelection(!0)})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onKeyDown",(()=>{this.updateScribbleSelection(!1)})),wr(this,"onKeyUp",(()=>{this.editor.inputs.altKey?this.updateScribbleSelection(!1):this.parent.transition("brushing")})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"pushPointToScribble",(()=>{const{x:e,y:t}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,e,t)}))}updateScribbleSelection(e){const t=this.editor.getZoomLevel(),n=this.editor.getCurrentPageShapes(),{inputs:{shiftKey:o,originPagePoint:r,previousPagePoint:i,currentPagePoint:s}}=this.editor,{newlySelectedShapeIds:a,initialSelectedShapeIds:l}=this;e&&this.pushPointToScribble();const c=n;let d,u,h,p;for(let f=0,g=c.length;f<g;f++)if(d=c[f],u=this.editor.getShapeGeometry(d),!(this.editor.isShapeOfType(d,"group")||a.has(d.id)||this.editor.isShapeOrAncestorLocked(d))){if(this.editor.isShapeOfType(d,"frame")){const e=this.editor.getPointInShapeSpace(d,r);if(u.bounds.containsPoint(e))continue}if(h=this.editor.getPointInShapeSpace(d,i),p=this.editor.getPointInShapeSpace(d,s),u.hitTestLineSegment(h,p,8/t)){const e=this.editor.getOutermostSelectableShape(d),t=this.editor.getShapeMask(e.id);if(t){if(null!==sf(i,s,t)){if(!md(s,t))continue}}a.add(e.id)}}this.editor.setSelectedShapes([...new Set(o?[...a,...l]:[...a])],{squashing:!0})}complete(){this.parent.transition("idle")}cancel(){this.editor.setSelectedShapes([...this.initialSelectedShapeIds],{squashing:!0}),this.parent.transition("idle")}}wr(lS,"id","scribble_brushing");class cS{constructor(e){wr(this,"prevDroppingShapeId",null),wr(this,"droppingNodeTimer",null),wr(this,"first",!0),wr(this,"dispose",(()=>{this.clear()})),this.editor=e,e.disposables.add(this.dispose)}updateDroppingNode(e,t){var n,o;this.first&&(this.prevDroppingShapeId=null!==(n=null===(o=this.editor.getDroppingOverShape(this.editor.inputs.originPagePoint,e))||void 0===o?void 0:o.id)&&void 0!==n?n:null,this.first=!1);null===this.droppingNodeTimer?this.setDragTimer(e,1e3,t):this.editor.inputs.pointerVelocity.len()>.5&&(clearInterval(this.droppingNodeTimer),this.setDragTimer(e,100,t))}setDragTimer(e,t,n){this.droppingNodeTimer=setTimeout((()=>{this.editor.batch((()=>{this.handleDrag(this.editor.inputs.currentPagePoint,e,n)})),this.droppingNodeTimer=null}),t)}handleDrag(e,t,n){var o,r;t=ai(t.map((e=>this.editor.getShape(e.id))));const i=null!==(o=null===(r=this.editor.getDroppingOverShape(e,t))||void 0===r?void 0:r.id)&&void 0!==o?o:null;if(i===this.prevDroppingShapeId)return;const{prevDroppingShapeId:s}=this,a=s&&this.editor.getShape(s),l=i&&this.editor.getShape(i);var c,d;a&&(null===(c=(d=this.editor.getShapeUtil(a)).onDragShapesOut)||void 0===c||c.call(d,a,t));if(l){var u,h;const e=null===(u=(h=this.editor.getShapeUtil(l)).onDragShapesOver)||void 0===u?void 0:u.call(h,l,t);e&&e.shouldHint&&this.editor.setHintingShapes([l.id])}else this.editor.setHintingShapes([]);null===n||void 0===n||n(),this.prevDroppingShapeId=i}dropShapes(e){const{prevDroppingShapeId:t}=this;if(this.handleDrag(this.editor.inputs.currentPagePoint,e),t){var n,o;const r=this.editor.getShape(t);if(!r)return;null===(n=(o=this.editor.getShapeUtil(r)).onDropShapesOver)||void 0===n||n.call(o,r,e)}}clear(){this.prevDroppingShapeId=null,null!==this.droppingNodeTimer&&clearInterval(this.droppingNodeTimer),this.droppingNodeTimer=null,this.editor.setHintingShapes([]),this.first=!0}}class dS extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"selectionSnapshot",{}),wr(this,"snapshot",{}),wr(this,"markId",""),wr(this,"isCloning",!1),wr(this,"isCreating",!1),wr(this,"onCreate",(()=>{})),wr(this,"dragAndDropManager",new cS(this.editor)),wr(this,"onEnter",(e=>{const{isCreating:t=!1,onCreate:n=(()=>{})}=e;this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.isCreating=t,this.onCreate=n,t?this.markId="creating:".concat(this.editor.getOnlySelectedShape().id):(this.markId="translating",this.editor.mark(this.markId)),this.isCloning=!1,this.info=e,this.editor.setCursor({type:"move",rotation:0}),this.selectionSnapshot=uS(this.editor),this.isCreating||!this.editor.inputs.altKey?(this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes()):this.startCloning()})),wr(this,"onExit",(()=>{this.parent.setCurrentToolIdMask(void 0),this.selectionSnapshot={},this.snapshot={},this.editor.snaps.clearIndicators(),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.dragAndDropManager.clear()})),wr(this,"onTick",(()=>{this.dragAndDropManager.updateDroppingNode(this.snapshot.movingShapes,this.updateParentTransforms),nv(this.editor)})),wr(this,"onPointerMove",(()=>{this.updateShapes()})),wr(this,"onKeyDown",(()=>{!this.editor.inputs.altKey||this.isCloning?this.updateShapes():this.startCloning()})),wr(this,"onKeyUp",(()=>{this.editor.inputs.altKey||!this.isCloning?this.updateShapes():this.stopCloning()})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onComplete",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()})),wr(this,"updateParentTransforms",(()=>{const{editor:e,snapshot:{shapeSnapshots:t}}=this,n=[];t.forEach((t=>{const o=e.getShape(t.shape.id);if(!o)return null;n.push(o);const r=Ca(o.parentId)?null:bh.Inverse(e.getShapePageTransform(o.parentId));t.parentTransform=r}))}))}startCloning(){this.isCreating||(this.isCloning=!0,this.reset(),this.markId="translating",this.editor.mark(this.markId),this.editor.duplicateShapes(Array.from(this.editor.getSelectedShapeIds())),this.snapshot=uS(this.editor),this.handleStart(),this.updateShapes())}stopCloning(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId="translating",this.editor.mark(this.markId),this.updateShapes()}reset(){this.editor.bailToMark(this.markId)}complete(){var e;(this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),this.handleEnd(),this.editor.getInstanceState().isToolLocked&&this.info.onInteractionEnd)?this.editor.setCurrentTool(this.info.onInteractionEnd):this.isCreating?null===(e=this.onCreate)||void 0===e||e.call(this,this.editor.getOnlySelectedShape()):this.parent.transition("idle")}cancel(){this.reset(),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd):this.parent.transition("idle",this.info)}handleStart(){const{movingShapes:e}=this.snapshot,t=[];e.forEach((e=>{var n;const o=this.editor.getShapeUtil(e),r=null===(n=o.onTranslateStart)||void 0===n?void 0:n.call(o,e);r&&t.push(r)})),t.length>0&&this.editor.updateShapes(t),this.editor.setHoveredShape(null)}handleEnd(){const{movingShapes:e}=this.snapshot;if(this.isCloning){const t=Gc.Average(e.map((e=>this.editor.getShapePageTransform(e.id).point()))),n=Gc.Sub(t,this.selectionSnapshot.averagePagePoint);this.editor.updateInstanceState({duplicateProps:{shapeIds:e.map((e=>e.id)),offset:{x:n.x,y:n.y}}})}const t=[];e.forEach((e=>{var n;const o=this.editor.getShape(e.id),r=this.editor.getShapeUtil(e),i=null===(n=r.onTranslateEnd)||void 0===n?void 0:n.call(r,e,o);i&&t.push(i)})),t.length>0&&this.editor.updateShapes(t)}handleChange(){const{movingShapes:e}=this.snapshot,t=[];e.forEach((e=>{var n;const o=this.editor.getShape(e.id),r=this.editor.getShapeUtil(e),i=null===(n=r.onTranslate)||void 0===n?void 0:n.call(r,e,o);i&&t.push(i)})),t.length>0&&this.editor.updateShapes(t)}updateShapes(){const{snapshot:e}=this;this.dragAndDropManager.updateDroppingNode(e.movingShapes,this.updateParentTransforms),function(e){let{editor:t,shapeSnapshots:n,averagePagePoint:o,initialSelectionPageBounds:r,initialSelectionSnapPoints:i}=e;const{inputs:s}=t,a=t.getInstanceState().isGridMode,l=t.getDocumentSettings().gridSize,c=Gc.Sub(s.currentPagePoint,s.originPagePoint),d=t.inputs.shiftKey?Math.abs(c.x)<Math.abs(c.y)?"x":"y":null;"x"===d?c.x=0:"y"===d&&(c.y=0);t.snaps.clearIndicators();if((t.user.getIsSnapMode()?!s.ctrlKey:s.ctrlKey)&&t.inputs.pointerVelocity.len()<.5){const{nudge:e}=t.snaps.shapeBounds.snapTranslateShapes({dragDelta:c,initialSelectionPageBounds:r,lockedAxis:d,initialSelectionSnapPoints:i});c.add(e)}const u=Gc.Add(o,c);a&&!s.ctrlKey&&u.snapToGrid(l);const h=Gc.Sub(u,o);t.updateShapes(ai(n.map((e=>{let{shape:t,pagePoint:n,parentTransform:o}=e;const r=Gc.Add(n,h),i=o?bh.applyToPoint(o,r):r;return{id:t.id,type:t.type,x:i.x,y:i.y}}))),{squashing:!0})}({editor:this.editor,shapeSnapshots:e.shapeSnapshots,averagePagePoint:e.averagePagePoint,initialSelectionPageBounds:e.initialPageBounds,initialSelectionSnapPoints:e.initialSnapPoints}),this.handleChange()}}function uS(e){const t=[],n=[],o=ai(e.getSelectedShapeIds().map((o=>{const r=e.getShape(o);if(!r)return null;t.push(r);const i=e.getShapePageTransform(o).point();if(!i)return null;n.push(i);return{shape:r,pagePoint:i,parentTransform:ka.isId(r.parentId)?null:bh.Inverse(e.getShapePageTransform(r.parentId))}})));let r=[];if(1===e.getSelectedShapeIds().length)r=e.snaps.shapeBounds.getSnapPoints(e.getSelectedShapeIds()[0]);else{const t=e.getSelectionPageBounds();t&&(r=t.cornersAndCenter.map(((e,t)=>({id:"selection:"+t,x:e.x,y:e.y}))))}return{averagePagePoint:Gc.Average(n),movingShapes:t,shapeSnapshots:o,initialPageBounds:e.getSelectionPageBounds(),initialSnapPoints:r}}wr(dS,"id","translating");class hS extends Pg{constructor(){super(...arguments),wr(this,"reactor",void 0),wr(this,"cleanUpDuplicateProps",(()=>{const e=this.editor.getSelectedShapeIds(),t=this.editor.getInstanceState();if(!t.duplicateProps)return;const n=new Set(t.duplicateProps.shapeIds);e.length===n.size&&e.every((e=>n.has(e)))||this.editor.updateInstanceState({duplicateProps:null})})),wr(this,"onEnter",(()=>{this.reactor=jr("clean duplicate props",(()=>{try{this.cleanUpDuplicateProps()}catch(e){console.error(e)}}))})),wr(this,"onExit",(()=>{var e;null===(e=this.reactor)||void 0===e||e.call(this),this.editor.getCurrentPageState().editingShapeId&&this.editor.setEditingShape(null)}))}}wr(hS,"id","select"),wr(hS,"initial","idle"),wr(hS,"children",(()=>[Nx,Fx,Kx,Zx,nS,dS,Mx,lS,Qx,tS,zx,Hx,oS,aS,eS,$x,Jx,Ux]));class pS extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"onEnter",(e=>{this.info=e})),wr(this,"onPointerDown",(()=>{this.parent.transition("pointing",this.info)}))}}wr(pS,"id","idle");class fS extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"onEnter",(e=>{this.info=e})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onPointerMove",(()=>{this.editor.inputs.isDragging&&this.parent.transition("zoom_brushing",this.info)})),wr(this,"onCancel",(()=>{this.cancel()}))}complete(){const{currentScreenPoint:e}=this.editor.inputs;this.editor.inputs.altKey?this.editor.zoomOut(e,{duration:220}):this.editor.zoomIn(e,{duration:220}),this.parent.transition("idle",this.info)}cancel(){this.parent.transition("idle",this.info)}}wr(fS,"id","pointing");class gS extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"zoomBrush",new mh),wr(this,"onEnter",(e=>{this.info=e,this.update()})),wr(this,"onExit",(()=>{this.editor.updateInstanceState({zoomBrush:null})})),wr(this,"onPointerMove",(()=>{this.update()})),wr(this,"onPointerUp",(()=>{this.complete()})),wr(this,"onCancel",(()=>{this.cancel()}))}update(){const{inputs:{originPagePoint:e,currentPagePoint:t}}=this.editor;this.zoomBrush.setTo(mh.FromPoints([e,t])),this.editor.updateInstanceState({zoomBrush:this.zoomBrush.toJson()})}cancel(){this.parent.transition("idle",this.info)}complete(){const{zoomBrush:e}=this,t=8/this.editor.getZoomLevel();if(e.width<t&&e.height<t){const e=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(e,{duration:220}):this.editor.zoomIn(e,{duration:220})}else{const t=this.editor.inputs.altKey?this.editor.getZoomLevel()/2:void 0;this.editor.zoomToBounds(e,{targetZoom:t,duration:220})}this.parent.transition("idle",this.info)}}wr(gS,"id","zoom_brushing");class mS extends Pg{constructor(){super(...arguments),wr(this,"info",{}),wr(this,"onEnter",(e=>{this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.updateCursor()})),wr(this,"onExit",(()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({zoomBrush:null,cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.parent.setCurrentToolIdMask(void 0)})),wr(this,"onKeyDown",(()=>{this.updateCursor()})),wr(this,"onKeyUp",(e=>{this.updateCursor(),"KeyZ"===e.code&&this.complete()})),wr(this,"onInterrupt",(()=>{this.complete()}))}complete(){this.info.onInteractionEnd&&"select"!==this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("select")}updateCursor(){this.editor.inputs.altKey?this.editor.updateInstanceState({cursor:{type:"zoom-out",rotation:0}},{ephemeral:!0}):this.editor.updateInstanceState({cursor:{type:"zoom-in",rotation:0}},{ephemeral:!0})}}wr(mS,"id","zoom"),wr(mS,"initial","idle"),wr(mS,"children",(()=>[pS,gS,fS]));const vS=[_x,Ix,Ax,mS,hS];function yS(){return yS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},yS.apply(this,arguments)}function bS(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(o){if(null===e||void 0===e||e(o),!1===n||!o.defaultPrevented)return null===t||void 0===t?void 0:t(o)}}function wS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.forEach((t=>function(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}(t,e)))}function xS(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(0,e.useCallback)(wS(...n),n)}function SS(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=[];const r=()=>{const n=o.map((t=>(0,e.createContext)(t)));return function(o){const r=(null===o||void 0===o?void 0:o[t])||n;return(0,e.useMemo)((()=>({["__scope".concat(t)]:{...o,[t]:r}})),[o,r])}};return r.scopeName=t,[function(n,r){const i=(0,e.createContext)(r),s=o.length;function a(n){const{scope:o,children:r,...a}=n,l=(null===o||void 0===o?void 0:o[t][s])||i,c=(0,e.useMemo)((()=>a),Object.values(a));return(0,e.createElement)(l.Provider,{value:c},r)}return o=[...o,r],a.displayName=n+"Provider",[a,function(o,a){const l=(null===a||void 0===a?void 0:a[t][s])||i,c=(0,e.useContext)(l);if(c)return c;if(void 0!==r)return r;throw new Error("`".concat(o,"` must be used within `").concat(n,"`"))}]},_S(r,...n)]}function _S(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];const r=n[0];if(1===n.length)return r;const i=()=>{const t=n.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(n){const o=t.reduce(((e,t)=>{let{useScope:o,scopeName:r}=t;return{...e,...o(n)["__scope".concat(r)]}}),{});return(0,e.useMemo)((()=>({["__scope".concat(r.scopeName)]:o})),[o])}};return i.scopeName=r.scopeName,i}const kS=(0,e.forwardRef)(((t,n)=>{const{children:o,...r}=t,i=e.Children.toArray(o),s=i.find(IS);if(s){const t=s.props.children,o=i.map((n=>n===s?e.Children.count(t)>1?e.Children.only(null):(0,e.isValidElement)(t)?t.props.children:null:n));return(0,e.createElement)(CS,yS({},r,{ref:n}),(0,e.isValidElement)(t)?(0,e.cloneElement)(t,void 0,o):null)}return(0,e.createElement)(CS,yS({},r,{ref:n}),o)}));kS.displayName="Slot";const CS=(0,e.forwardRef)(((t,n)=>{const{children:o,...r}=t;return(0,e.isValidElement)(o)?(0,e.cloneElement)(o,{...TS(r,o.props),ref:n?wS(n,o.ref):o.ref}):e.Children.count(o)>1?e.Children.only(null):null}));CS.displayName="SlotClone";const ES=t=>{let{children:n}=t;return(0,e.createElement)(e.Fragment,null,n)};function IS(t){return(0,e.isValidElement)(t)&&t.type===ES}function TS(e,t){const n={...t};for(const o in t){const r=e[o],i=t[o];/^on[A-Z]/.test(o)?r&&i?n[o]=function(){i(...arguments),r(...arguments)}:r&&(n[o]=r):"style"===o?n[o]={...r,...i}:"className"===o&&(n[o]=[r,i].filter(Boolean).join(" "))}return{...e,...n}}function PS(t){const n=t+"CollectionProvider",[o,r]=SS(n),[i,s]=o(n,{collectionRef:{current:null},itemMap:new Map}),a=t=>{const{scope:n,children:o}=t,r=e.useRef(null),s=e.useRef(new Map).current;return e.createElement(i,{scope:n,itemMap:s,collectionRef:r},o)},l=t+"CollectionSlot",c=e.forwardRef(((t,n)=>{const{scope:o,children:r}=t,i=xS(n,s(l,o).collectionRef);return e.createElement(kS,{ref:i},r)})),d=t+"CollectionItemSlot",u="data-radix-collection-item",h=e.forwardRef(((t,n)=>{const{scope:o,children:r,...i}=t,a=e.useRef(null),l=xS(n,a),c=s(d,o);return e.useEffect((()=>(c.itemMap.set(a,{ref:a,...i}),()=>{c.itemMap.delete(a)}))),e.createElement(kS,{[u]:"",ref:l},r)}));return[{Provider:a,Slot:c,ItemSlot:h},function(n){const o=s(t+"CollectionConsumer",n),r=e.useCallback((()=>{const e=o.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll("[".concat(u,"]"))),n=Array.from(o.itemMap.values()).sort(((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current)));return n}),[o.collectionRef,o.itemMap]);return r},r]}const AS=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((t,n)=>{const o=(0,e.forwardRef)(((t,o)=>{const{asChild:r,...i}=t,s=r?kS:n;return(0,e.useEffect)((()=>{window[Symbol.for("radix-ui")]=!0}),[]),(0,e.createElement)(s,yS({},i,{ref:o}))}));return o.displayName="Primitive.".concat(n),{...t,[n]:o}}),{});function MS(e,t){e&&(0,Ho.flushSync)((()=>e.dispatchEvent(t)))}function jS(t){const n=(0,e.useRef)(t);return(0,e.useEffect)((()=>{n.current=t})),(0,e.useMemo)((()=>function(){for(var e,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return null===(e=n.current)||void 0===e?void 0:e.call(n,...o)}),[])}const OS="dismissableLayer.update",LS="dismissableLayer.pointerDownOutside",BS="dismissableLayer.focusOutside";let RS;const NS=(0,e.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DS=(0,e.forwardRef)(((t,n)=>{var o;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:l,onDismiss:c,...d}=t,u=(0,e.useContext)(NS),[h,p]=(0,e.useState)(null),f=null!==(o=null===h||void 0===h?void 0:h.ownerDocument)&&void 0!==o?o:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,g]=(0,e.useState)({}),m=xS(n,(e=>p(e))),v=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=v.indexOf(y),w=h?v.indexOf(h):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,S=w>=b,_=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const o=jS(t),r=(0,e.useRef)(!1),i=(0,e.useRef)((()=>{}));return(0,e.useEffect)((()=>{const e=e=>{if(e.target&&!r.current){const t={originalEvent:e};function s(){US(LS,o,t,{discrete:!0})}"touch"===e.pointerType?(n.removeEventListener("click",i.current),i.current=s,n.addEventListener("click",i.current,{once:!0})):s()}else n.removeEventListener("click",i.current);r.current=!1},t=window.setTimeout((()=>{n.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",i.current)}}),[n,o]),{onPointerDownCapture:()=>r.current=!0}}((e=>{const t=e.target,n=[...u.branches].some((e=>e.contains(t)));S&&!n&&(null===s||void 0===s||s(e),null===l||void 0===l||l(e),e.defaultPrevented||null===c||void 0===c||c())}),f),k=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const o=jS(t),r=(0,e.useRef)(!1);return(0,e.useEffect)((()=>{const e=e=>{if(e.target&&!r.current){US(BS,o,{originalEvent:e},{discrete:!1})}};return n.addEventListener("focusin",e),()=>n.removeEventListener("focusin",e)}),[n,o]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}((e=>{const t=e.target;[...u.branches].some((e=>e.contains(t)))||(null===a||void 0===a||a(e),null===l||void 0===l||l(e),e.defaultPrevented||null===c||void 0===c||c())}),f);return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const o=jS(t);(0,e.useEffect)((()=>{const e=e=>{"Escape"===e.key&&o(e)};return n.addEventListener("keydown",e),()=>n.removeEventListener("keydown",e)}),[o,n])}((e=>{w===u.layers.size-1&&(null===i||void 0===i||i(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))}),f),(0,e.useEffect)((()=>{if(h)return r&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(RS=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),FS(),()=>{r&&1===u.layersWithOutsidePointerEventsDisabled.size&&(f.body.style.pointerEvents=RS)}}),[h,f,r,u]),(0,e.useEffect)((()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),FS())}),[h,u]),(0,e.useEffect)((()=>{const e=()=>g({});return document.addEventListener(OS,e),()=>document.removeEventListener(OS,e)}),[]),(0,e.createElement)(AS.div,yS({},d,{ref:m,style:{pointerEvents:x?S?"auto":"none":void 0,...t.style},onFocusCapture:bS(t.onFocusCapture,k.onFocusCapture),onBlurCapture:bS(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:bS(t.onPointerDownCapture,_.onPointerDownCapture)}))})),zS=(0,e.forwardRef)(((t,n)=>{const o=(0,e.useContext)(NS),r=(0,e.useRef)(null),i=xS(n,r);return(0,e.useEffect)((()=>{const e=r.current;if(e)return o.branches.add(e),()=>{o.branches.delete(e)}}),[o.branches]),(0,e.createElement)(AS.div,yS({},t,{ref:i}))}));function FS(){const e=new CustomEvent(OS);document.dispatchEvent(e)}function US(e,t,n,o){let{discrete:r}=o;const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?MS(i,s):i.dispatchEvent(s)}const HS=DS,VS=zS,WS=(0,e.forwardRef)(((t,n)=>{var o;const{container:r=(null===globalThis||void 0===globalThis||null===(o=globalThis.document)||void 0===o?void 0:o.body),...i}=t;return r?Ho.createPortal((0,e.createElement)(AS.div,yS({},i,{ref:n})),r):null})),KS=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?e.useLayoutEffect:()=>{};const GS=t=>{const{present:n,children:o}=t,r=function(t){const[n,o]=(0,e.useState)(),r=(0,e.useRef)({}),i=(0,e.useRef)(t),s=(0,e.useRef)("none"),a=t?"mounted":"unmounted",[l,c]=function(t,n){return(0,e.useReducer)(((e,t)=>{const o=n[e][t];return null!==o&&void 0!==o?o:e}),t)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return(0,e.useEffect)((()=>{const e=qS(r.current);s.current="mounted"===l?e:"none"}),[l]),KS((()=>{const e=r.current,n=i.current;if(n!==t){const o=s.current,r=qS(e);if(t)c("MOUNT");else if("none"===r||"none"===(null===e||void 0===e?void 0:e.display))c("UNMOUNT");else{c(n&&o!==r?"ANIMATION_OUT":"UNMOUNT")}i.current=t}}),[t,c]),KS((()=>{if(n){const e=e=>{const t=qS(r.current).includes(e.animationName);e.target===n&&t&&(0,Ho.flushSync)((()=>c("ANIMATION_END")))},t=e=>{e.target===n&&(s.current=qS(r.current))};return n.addEventListener("animationstart",t),n.addEventListener("animationcancel",e),n.addEventListener("animationend",e),()=>{n.removeEventListener("animationstart",t),n.removeEventListener("animationcancel",e),n.removeEventListener("animationend",e)}}c("ANIMATION_END")}),[n,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:(0,e.useCallback)((e=>{e&&(r.current=getComputedStyle(e)),o(e)}),[])}}(n),i="function"===typeof o?o({present:r.isPresent}):e.Children.only(o),s=xS(r.ref,i.ref);return"function"===typeof o||r.isPresent?(0,e.cloneElement)(i,{ref:s}):null};function qS(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}function YS(t){let{prop:n,defaultProp:o,onChange:r=(()=>{})}=t;const[i,s]=function(t){let{defaultProp:n,onChange:o}=t;const r=(0,e.useState)(n),[i]=r,s=(0,e.useRef)(i),a=jS(o);return(0,e.useEffect)((()=>{s.current!==i&&(a(i),s.current=i)}),[i,s,a]),r}({defaultProp:o,onChange:r}),a=void 0!==n,l=a?n:i,c=jS(r);return[l,(0,e.useCallback)((e=>{if(a){const t="function"===typeof e?e(n):e;t!==n&&c(t)}else s(e)}),[a,n,s,c])]}GS.displayName="Presence";const XS=(0,e.forwardRef)(((t,n)=>(0,e.createElement)(AS.span,yS({},t,{ref:n,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}})))),$S="ToastProvider",[ZS,QS,JS]=PS("Toast"),[e_,t_]=SS("Toast",[JS]),[n_,o_]=e_($S),r_=t=>{const{__scopeToast:n,label:o="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=t,[l,c]=(0,e.useState)(null),[d,u]=(0,e.useState)(0),h=(0,e.useRef)(!1),p=(0,e.useRef)(!1);return(0,e.createElement)(ZS.Provider,{scope:n},(0,e.createElement)(n_,{scope:n,label:o,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:(0,e.useCallback)((()=>u((e=>e+1))),[]),onToastRemove:(0,e.useCallback)((()=>u((e=>e-1))),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p},a))};r_.propTypes={label(e){if(e.label&&"string"===typeof e.label&&!e.label.trim()){const e="Invalid prop `label` supplied to `".concat($S,"`. Expected non-empty `string`.");return new Error(e)}return null}};const i_="ToastViewport",s_=["F8"],a_="toast.viewportPause",l_="toast.viewportResume",c_=(0,e.forwardRef)(((t,n)=>{const{__scopeToast:o,hotkey:r=s_,label:i="Notifications ({hotkey})",...s}=t,a=o_(i_,o),l=QS(o),c=(0,e.useRef)(null),d=(0,e.useRef)(null),u=(0,e.useRef)(null),h=(0,e.useRef)(null),p=xS(n,h,a.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=a.toastCount>0;(0,e.useEffect)((()=>{const e=e=>{var t;r.every((t=>e[t]||e.code===t))&&(null===(t=h.current)||void 0===t||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[r]),(0,e.useEffect)((()=>{const e=c.current,t=h.current;if(g&&e&&t){const n=()=>{if(!a.isClosePausedRef.current){const e=new CustomEvent(a_);t.dispatchEvent(e),a.isClosePausedRef.current=!0}},o=()=>{if(a.isClosePausedRef.current){const e=new CustomEvent(l_);t.dispatchEvent(e),a.isClosePausedRef.current=!1}},r=t=>{!e.contains(t.relatedTarget)&&o()},i=()=>{e.contains(document.activeElement)||o()};return e.addEventListener("focusin",n),e.addEventListener("focusout",r),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",i),window.addEventListener("blur",n),window.addEventListener("focus",o),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",r),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",i),window.removeEventListener("blur",n),window.removeEventListener("focus",o)}}}),[g,a.isClosePausedRef]);const m=(0,e.useCallback)((e=>{let{tabbingDirection:t}=e;const n=l().map((e=>{const n=e.ref.current,o=[n,...T_(n)];return"forwards"===t?o:o.reverse()}));return("forwards"===t?n.reverse():n).flat()}),[l]);return(0,e.useEffect)((()=>{const e=h.current;if(e){const t=t=>{const n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){const n=document.activeElement,s=t.shiftKey;var o;if(t.target===e&&s)return void(null===(o=d.current)||void 0===o||o.focus());const a=m({tabbingDirection:s?"backwards":"forwards"}),l=a.findIndex((e=>e===n));var r,i;if(P_(a.slice(l+1)))t.preventDefault();else s?null===(r=d.current)||void 0===r||r.focus():null===(i=u.current)||void 0===i||i.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}}),[l,m]),(0,e.createElement)(VS,{ref:c,role:"region","aria-label":i.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:g?void 0:"none"}},g&&(0,e.createElement)(u_,{ref:d,onFocusFromOutsideViewport:()=>{P_(m({tabbingDirection:"forwards"}))}}),(0,e.createElement)(ZS.Slot,{scope:o},(0,e.createElement)(AS.ol,yS({tabIndex:-1},s,{ref:p}))),g&&(0,e.createElement)(u_,{ref:u,onFocusFromOutsideViewport:()=>{P_(m({tabbingDirection:"backwards"}))}}))})),d_="ToastFocusProxy",u_=(0,e.forwardRef)(((t,n)=>{const{__scopeToast:o,onFocusFromOutsideViewport:r,...i}=t,s=o_(d_,o);return(0,e.createElement)(XS,yS({"aria-hidden":!0,tabIndex:0},i,{ref:n,style:{position:"fixed"},onFocus:e=>{var t;const n=e.relatedTarget;!(null!==(t=s.viewport)&&void 0!==t&&t.contains(n))&&r()}}))})),h_="Toast",p_=(0,e.forwardRef)(((t,n)=>{const{forceMount:o,open:r,defaultOpen:i,onOpenChange:s,...a}=t,[l=!0,c]=YS({prop:r,defaultProp:i,onChange:s});return(0,e.createElement)(GS,{present:o||l},(0,e.createElement)(m_,yS({open:l},a,{ref:n,onClose:()=>c(!1),onPause:jS(t.onPause),onResume:jS(t.onResume),onSwipeStart:bS(t.onSwipeStart,(e=>{e.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:bS(t.onSwipeMove,(e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(t,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(n,"px"))})),onSwipeCancel:bS(t.onSwipeCancel,(e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:bS(t.onSwipeEnd,(e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(t,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(n,"px")),c(!1)}))})))})),[f_,g_]=e_(h_,{onClose(){}}),m_=(0,e.forwardRef)(((t,n)=>{const{__scopeToast:o,type:r="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:f,...g}=t,m=o_(h_,o),[v,y]=(0,e.useState)(null),b=xS(n,(e=>y(e))),w=(0,e.useRef)(null),x=(0,e.useRef)(null),S=i||m.duration,_=(0,e.useRef)(0),k=(0,e.useRef)(S),C=(0,e.useRef)(0),{onToastAdd:E,onToastRemove:I}=m,T=jS((()=>{var e;(null===v||void 0===v?void 0:v.contains(document.activeElement))&&(null===(e=m.viewport)||void 0===e||e.focus()),a()})),P=(0,e.useCallback)((e=>{e&&e!==1/0&&(window.clearTimeout(C.current),_.current=(new Date).getTime(),C.current=window.setTimeout(T,e))}),[T]);(0,e.useEffect)((()=>{const e=m.viewport;if(e){const t=()=>{P(k.current),null===d||void 0===d||d()},n=()=>{const e=(new Date).getTime()-_.current;k.current=k.current-e,window.clearTimeout(C.current),null===c||void 0===c||c()};return e.addEventListener(a_,n),e.addEventListener(l_,t),()=>{e.removeEventListener(a_,n),e.removeEventListener(l_,t)}}}),[m.viewport,S,c,d,P]),(0,e.useEffect)((()=>{s&&!m.isClosePausedRef.current&&P(S)}),[s,S,m.isClosePausedRef,P]),(0,e.useEffect)((()=>(E(),()=>I())),[E,I]);const A=(0,e.useMemo)((()=>v?C_(v):null),[v]);return m.viewport?(0,e.createElement)(e.Fragment,null,A&&(0,e.createElement)(v_,{__scopeToast:o,role:"status","aria-live":"foreground"===r?"assertive":"polite","aria-atomic":!0},A),(0,e.createElement)(f_,{scope:o,onClose:T},(0,Ho.createPortal)((0,e.createElement)(ZS.ItemSlot,{scope:o},(0,e.createElement)(HS,{asChild:!0,onEscapeKeyDown:bS(l,(()=>{m.isFocusedToastEscapeKeyDownRef.current||T(),m.isFocusedToastEscapeKeyDownRef.current=!1}))},(0,e.createElement)(AS.li,yS({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection},g,{ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:bS(t.onKeyDown,(e=>{"Escape"===e.key&&(null===l||void 0===l||l(e.nativeEvent),e.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,T()))})),onPointerDown:bS(t.onPointerDown,(e=>{0===e.button&&(w.current={x:e.clientX,y:e.clientY})})),onPointerMove:bS(t.onPointerMove,(e=>{if(!w.current)return;const t=e.clientX-w.current.x,n=e.clientY-w.current.y,o=Boolean(x.current),r=["left","right"].includes(m.swipeDirection),i=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,s=r?i(0,t):0,a=r?0:i(0,n),l="touch"===e.pointerType?10:2,c={x:s,y:a},d={originalEvent:e,delta:c};o?(x.current=c,E_("toast.swipeMove",h,d,{discrete:!1})):I_(c,m.swipeDirection,l)?(x.current=c,E_("toast.swipeStart",u,d,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(w.current=null)})),onPointerUp:bS(t.onPointerUp,(e=>{const t=x.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),x.current=null,w.current=null,t){const n=e.currentTarget,o={originalEvent:e,delta:t};I_(t,m.swipeDirection,m.swipeThreshold)?E_("toast.swipeEnd",f,o,{discrete:!0}):E_("toast.swipeCancel",p,o,{discrete:!0}),n.addEventListener("click",(e=>e.preventDefault()),{once:!0})}}))})))),m.viewport))):null}));m_.propTypes={type(e){if(e.type&&!["foreground","background"].includes(e.type)){const e="Invalid prop `type` supplied to `".concat(h_,"`. Expected `foreground | background`.");return new Error(e)}return null}};const v_=t=>{const{__scopeToast:n,children:o,...r}=t,i=o_(h_,n),[s,a]=(0,e.useState)(!1),[l,c]=(0,e.useState)(!1);return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};const t=jS(e);KS((()=>{let e=0,n=0;return e=window.requestAnimationFrame((()=>n=window.requestAnimationFrame(t))),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}}),[t])}((()=>a(!0))),(0,e.useEffect)((()=>{const e=window.setTimeout((()=>c(!0)),1e3);return()=>window.clearTimeout(e)}),[]),l?null:(0,e.createElement)(WS,{asChild:!0},(0,e.createElement)(XS,r,s&&(0,e.createElement)(e.Fragment,null,i.label," ",o)))},y_=(0,e.forwardRef)(((t,n)=>{const{__scopeToast:o,...r}=t;return(0,e.createElement)(AS.div,yS({},r,{ref:n}))})),b_=(0,e.forwardRef)(((t,n)=>{const{__scopeToast:o,...r}=t;return(0,e.createElement)(AS.div,yS({},r,{ref:n}))})),w_="ToastAction",x_=(0,e.forwardRef)(((t,n)=>{const{altText:o,...r}=t;return o?(0,e.createElement)(k_,{altText:o,asChild:!0},(0,e.createElement)(__,yS({},r,{ref:n}))):null}));x_.propTypes={altText:e=>e.altText?null:new Error("Missing prop `altText` expected on `".concat(w_,"`"))};const S_="ToastClose",__=(0,e.forwardRef)(((t,n)=>{const{__scopeToast:o,...r}=t,i=g_(S_,o);return(0,e.createElement)(k_,{asChild:!0},(0,e.createElement)(AS.button,yS({type:"button"},r,{ref:n,onClick:bS(t.onClick,i.onClose)})))})),k_=(0,e.forwardRef)(((t,n)=>{const{__scopeToast:o,altText:r,...i}=t;return(0,e.createElement)(AS.div,yS({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},i,{ref:n}))}));function C_(e){const t=[];return Array.from(e.childNodes).forEach((e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,o=""===e.dataset.radixToastAnnounceExclude;if(!n)if(o){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...C_(e))}})),t}function E_(e,t,n,o){let{discrete:r}=o;const i=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?MS(i,s):i.dispatchEvent(s)}const I_=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=Math.abs(e.x),r=Math.abs(e.y),i=o>r;return"left"===t||"right"===t?i&&o>n:!i&&r>n};function T_(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function P_(e){const t=document.activeElement;return e.some((e=>e===t||(e.focus(),document.activeElement!==t)))}const A_=p_,M_=y_,j_=b_,O_=x_,L_=__,B_=[0,390,428,468,580,640,840,1023];var R_=(e=>(e[e.ZERO=0]="ZERO",e[e.MOBILE_XXS=1]="MOBILE_XXS",e[e.MOBILE_XS=2]="MOBILE_XS",e[e.MOBILE_SM=3]="MOBILE_SM",e[e.MOBILE=4]="MOBILE",e[e.TABLET_SM=5]="TABLET_SM",e[e.TABLET=6]="TABLET",e[e.DESKTOP=7]="DESKTOP",e))(R_||{});const N_=e.createContext(0);function D_(e){let{forceMobile:t=!1,children:n}=e;const o=Hc(),r=ri("breakpoint",(()=>{const{width:e}=o.getViewportScreenBounds(),n=t?R_.MOBILE_SM:B_.length-1;for(let t=0;t<n;t++)if(e>B_[t]&&e<=B_[t+1])return t;return n}),[o]);return(0,Rc.jsx)(N_.Provider,{value:r,children:n})}function z_(){return(0,e.useContext)(N_)}const F_=(0,e.createContext)(null);function U_(e){let{assetUrls:t,children:n}=e;return(0,Rc.jsx)(F_.Provider,{value:t,children:n})}function H_(){const t=(0,e.useContext)(F_);if(!t)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return t}const V_={"action.convert-to-bookmark":"Convert to Bookmark","action.convert-to-embed":"Convert to Embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-json.short":"JSON","action.copy-as-json":"Copy as JSON","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.unlock-all":"Unlock all","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-json.short":"JSON","action.export-as-json":"Export as JSON","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.export-all-as-json.short":"JSON","action.export-all-as-json":"Export all as JSON","action.export-all-as-png.short":"PNG","action.export-all-as-png":"Export all as PNG","action.export-all-as-svg.short":"SVG","action.export-all-as-svg":"Export all as SVG","action.fit-frame-to-content":"Fit to content","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.fork-project":"Fork this project","action.group":"Group","action.insert-embed":"Insert embed","action.insert-media":"Upload media","action.leave-shared-project":"Leave shared project","action.new-project":"New project","action.new-shared-project":"New shared project","action.open-cursor-chat":"Cursor chat","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.print":"Print","action.redo":"Redo","action.remove-frame":"Remove frame","action.rename":"Rename","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stop-following":"Stop following","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-wrap-mode.menu":"Select on wrap","action.toggle-wrap-mode":"Toggle Select on wrap","action.toggle-reduce-motion.menu":"Reduce motion","action.toggle-reduce-motion":"Toggle reduce motion","action.toggle-edge-scrolling.menu":"Edge scrolling","action.toggle-edge-scrolling":"Toggle edge scrolling","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-lock":"Toggle locked","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","assets.files.upload-failed":"Upload failed","assets.url.failed":"Couldn't load URL preview","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","document.default-name":"Untitled","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","verticalAlign-style.start":"Top","verticalAlign-style.middle":"Middle","verticalAlign-style.end":"Bottom","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.cloud":"Cloud","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus-2":"Rhombus 2","geo-style.rhombus":"Rhombus","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X box","geo-style.check-box":"Check box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.cloud":"Cloud","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.hexagon":"Hexagon","tool.highlight":"Highlight","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.check-box":"Check box","tool.asset":"Asset","tool.frame":"Frame","tool.note":"Note","tool.laser":"Laser","tool.embed":"Embed","tool.text":"Text","menu.title":"Menu","menu.copy-as":"Copy as","menu.edit":"Edit","menu.shape":"Shape","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.view":"View","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.export-all-as":"Export all as","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.go-to-page":"Go to page","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.save-note":"Download this project to your computer as a .tldr file.","share-menu.fork-note":"Create a new shared project based on this snapshot.","share-menu.share-project":"Share this project","share-menu.default-project-name":"Shared Project","share-menu.copy-link":"Copy share link","share-menu.readonly-link":"Read-only","share-menu.create-snapshot-link":"Copy snapshot link","share-menu.snapshot-link-note":"Capture and share this project as a read-only snapshot link.","share-menu.copy-readonly-link":"Copy read-only link","share-menu.offline-note":"Create a new shared project based on your current project.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to view (but not edit) this project.","share-menu.project-too-large":"Sorry, this project can't be shared because it's too large. We're working on it!","share-menu.upload-failed":"Sorry, we couldn't upload your project at the moment. Please try again or let us know if the problem persists.","status.offline":"Offline","status.online":"Online","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.change-color":"Change color","people-menu.follow":"Following","people-menu.following":"Following","people-menu.leading":"Following You","people-menu.user":"(You)","people-menu.invite":"Invite others","help-menu.title":"Help and resources","help-menu.about":"About","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","embed-dialog.title":"Insert embed","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the site's URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","edit-pages-dialog.move-down":"Move down","edit-pages-dialog.move-up":"Move up","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.collaboration":"Collaboration","home-project-dialog.title":"Home project","home-project-dialog.description":"This is your local home project. It's just for you!","rename-project-dialog.title":"Rename project","rename-project-dialog.cancel":"Cancel","rename-project-dialog.rename":"Rename","home-project-dialog.ok":"Ok","style-panel.title":"Styles","style-panel.align":"Align","style-panel.vertical-align":"Vertical align","style-panel.position":"Position","style-panel.arrowheads":"Arrows","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","tool-panel.drawing":"Drawing","tool-panel.shapes":"Shapes","tool-panel.more":"More","debug-panel.more":"More","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesn't look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Don't ask again","file-system.confirm-clear.title":"Clear current project?","file-system.confirm-clear.description":"Creating a new project will clear your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-clear.cancel":"Cancel","file-system.confirm-clear.continue":"Continue","file-system.confirm-clear.dont-show-again":"Don't ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","sharing.confirm-leave.title":"Leave current project?","sharing.confirm-leave.description":"Are you sure you want to leave this shared project? You can return to it by navigating to its URL.","sharing.confirm-leave.cancel":"Cancel","sharing.confirm-leave.leave":"Leave","sharing.confirm-leave.dont-show-again":"Don't ask again","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"We've updated this document to work with the current version of tldraw. If you'd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Don't ask again","cursor-chat.type-to-chat":"Type to chat..."},W_={locale:"en",label:"English",messages:V_};const K_=e.createContext({}),G_=()=>e.useContext(K_),q_=ti((function(t){let{overrides:n,children:o}=t;const r=Hc().user.getLocale(),i=H_(),[s,a]=e.useState((()=>n&&n.en?{locale:"en",label:"English",messages:{...V_,...n.en}}:{locale:"en",label:"English",messages:V_}));return e.useEffect((()=>{let e=!1;return async function(){const t=await async function(e,t){if(!(await fetch(t.translations.en)).ok)return console.warn("No main translations found."),W_;if("en"===e)return W_;const n=Oc.find((t=>t.locale===e));if(!n)return console.warn("No translation found for locale ".concat(e)),W_;const o=await fetch(t.translations[n.locale]),r=await o.json();if(!r)return console.warn("No messages found for locale ".concat(e)),W_;const i=[];for(const s in W_.messages)r[s]||i.push(s);return i.length,{locale:e,label:n.label,messages:{...W_.messages,...r}}}(r,i);t&&!e&&(n&&n[r]?a({...t,messages:{...t.messages,...n[r]}}):a(t))}(),()=>{e=!0}}),[i,r,n]),(0,Rc.jsx)(K_.Provider,{value:s,children:o})}));function Y_(){const t=G_();return e.useCallback((function(e){var n;return null!==(n=t.messages[e])&&void 0!==n?n:e}),[t])}const X_=e.forwardRef((function(e,t){let{children:n,disabled:o,type:r,...i}=e;const s=Hc(),a=null===t||void 0===t?void 0:t.current;return o&&a===document.activeElement&&s.getContainer().focus(),(0,Rc.jsx)("button",{ref:t,type:"button",draggable:!1,disabled:o,...i,className:Nc("tlui-button","tlui-button__".concat(r),i.className),children:n})})),$_=(0,e.memo)((function(t){var n;let{small:o,invertIcon:r,icon:i,color:s,className:a,...l}=t;const c=H_(),d=null!==(n=c.icons[i])&&void 0!==n?n:c.icons["question-mark-circle"],u=(0,e.useRef)(null);return(0,e.useLayoutEffect)((()=>{d||console.error("Icon not found: ".concat(i,". Add it to the assetUrls.icons object.")),null!==u&&void 0!==u&&u.current&&(u.current.style.webkitMask="url(".concat(d,") center 100% / 100% no-repeat"))}),[u,d,i]),(0,Rc.jsx)("div",{...l,ref:u,className:Nc("tlui-icon",{"tlui-icon__small":o},a),style:{color:s,mask:"url(".concat(d,") center 100% / 100% no-repeat"),transform:r?"scale(-1, 1)":void 0}})}));function Z_(e){let{icon:t,small:n,invertIcon:o}=e;return(0,Rc.jsx)($_,{className:"tlui-button__icon",icon:t,small:n,invertIcon:o})}let Q_=0;function J_(){(0,e.useEffect)((()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:ek()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:ek()),Q_++,()=>{1===Q_&&document.querySelectorAll("[data-radix-focus-guard]").forEach((e=>e.remove())),Q_--}}),[])}function ek(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const tk="focusScope.autoFocusOnMount",nk="focusScope.autoFocusOnUnmount",ok={bubbles:!1,cancelable:!0},rk=(0,e.forwardRef)(((t,n)=>{const{loop:o=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=t,[l,c]=(0,e.useState)(null),d=jS(i),u=jS(s),h=(0,e.useRef)(null),p=xS(n,(e=>c(e))),f=(0,e.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,e.useEffect)((()=>{if(r){function e(e){if(f.paused||!l)return;const t=e.target;l.contains(t)?h.current=t:lk(h.current,{select:!0})}function t(e){if(f.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||lk(h.current,{select:!0}))}function n(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&lk(l)}document.addEventListener("focusin",e),document.addEventListener("focusout",t);const o=new MutationObserver(n);return l&&o.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),o.disconnect()}}}),[r,l,f.paused]),(0,e.useEffect)((()=>{if(l){ck.add(f);const t=document.activeElement;if(!l.contains(t)){const n=new CustomEvent(tk,ok);l.addEventListener(tk,d),l.dispatchEvent(n),n.defaultPrevented||(!function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.activeElement;for(const o of e)if(lk(o,{select:t}),document.activeElement!==n)return}((e=ik(l),e.filter((e=>"A"!==e.tagName))),{select:!0}),document.activeElement===t&&lk(l))}return()=>{l.removeEventListener(tk,d),setTimeout((()=>{const e=new CustomEvent(nk,ok);l.addEventListener(nk,u),l.dispatchEvent(e),e.defaultPrevented||lk(null!==t&&void 0!==t?t:document.body,{select:!0}),l.removeEventListener(nk,u),ck.remove(f)}),0)}}var e}),[l,d,u,f]);const g=(0,e.useCallback)((e=>{if(!o&&!r)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[r,i]=function(e){const t=ik(e),n=sk(t,e),o=sk(t.reverse(),e);return[n,o]}(t);r&&i?e.shiftKey||n!==i?e.shiftKey&&n===r&&(e.preventDefault(),o&&lk(i,{select:!0})):(e.preventDefault(),o&&lk(r,{select:!0})):n===t&&e.preventDefault()}}),[o,r,f.paused]);return(0,e.createElement)(AS.div,yS({tabIndex:-1},a,{ref:p,onKeyDown:g}))}));function ik(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function sk(e,t){for(const n of e)if(!ak(n,{upTo:t}))return n}function ak(e,t){let{upTo:n}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function lk(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}const ck=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null===n||void 0===n||n.pause()),e=dk(e,t),e.unshift(t)},remove(t){var n;e=dk(e,t),null===(n=e[0])||void 0===n||n.resume()}}}();function dk(e,t){const n=[...e],o=n.indexOf(t);return-1!==o&&n.splice(o,1),n}const uk=t["useId".toString()]||(()=>{});let hk=0;function pk(t){const[n,o]=e.useState(uk());return KS((()=>{t||o((e=>null!==e&&void 0!==e?e:String(hk++)))}),[t]),t||(n?"radix-".concat(n):"")}const fk=["top","right","bottom","left"],gk=Math.min,mk=Math.max,vk=Math.round,yk=Math.floor,bk=e=>({x:e,y:e}),wk={left:"right",right:"left",bottom:"top",top:"bottom"},xk={start:"end",end:"start"};function Sk(e,t,n){return mk(e,gk(t,n))}function _k(e,t){return"function"===typeof e?e(t):e}function kk(e){return e.split("-")[0]}function Ck(e){return e.split("-")[1]}function Ek(e){return"x"===e?"y":"x"}function Ik(e){return"y"===e?"height":"width"}function Tk(e){return["top","bottom"].includes(kk(e))?"y":"x"}function Pk(e){return Ek(Tk(e))}function Ak(e){return e.replace(/start|end/g,(e=>xk[e]))}function Mk(e){return e.replace(/left|right|bottom|top/g,(e=>wk[e]))}function jk(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function Ok(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function Lk(e,t,n){let{reference:o,floating:r}=e;const i=Tk(t),s=Pk(t),a=Ik(s),l=kk(t),c="y"===i,d=o.x+o.width/2-r.width/2,u=o.y+o.height/2-r.height/2,h=o[a]/2-r[a]/2;let p;switch(l){case"top":p={x:d,y:o.y-r.height};break;case"bottom":p={x:d,y:o.y+o.height};break;case"right":p={x:o.x+o.width,y:u};break;case"left":p={x:o.x-r.width,y:u};break;default:p={x:o.x,y:o.y}}switch(Ck(t)){case"start":p[s]-=h*(n&&c?-1:1);break;case"end":p[s]+=h*(n&&c?-1:1)}return p}async function Bk(e,t){var n;void 0===t&&(t={});const{x:o,y:r,platform:i,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:p=0}=_k(t,e),f=jk(p),g=a[h?"floating"===u?"reference":"floating":u],m=Ok(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(g)))||n?g:g.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),v="floating"===u?{...s.floating,x:o,y:r}:s.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(a.floating)),b=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},w=Ok(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:y,strategy:l}):v);return{top:(m.top-w.top+f.top)/b.y,bottom:(w.bottom-m.bottom+f.bottom)/b.y,left:(m.left-w.left+f.left)/b.x,right:(w.right-m.right+f.right)/b.x}}function Rk(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Nk(e){return fk.some((t=>e[t]>=0))}const Dk=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:r,y:i,placement:s,middlewareData:a}=t,l=await async function(e,t){const{placement:n,platform:o,elements:r}=e,i=await(null==o.isRTL?void 0:o.isRTL(r.floating)),s=kk(n),a=Ck(n),l="y"===Tk(n),c=["left","top"].includes(s)?-1:1,d=i&&l?-1:1,u=_k(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"===typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return a&&"number"===typeof f&&(p="end"===a?-1*f:f),l?{x:p*d,y:h*c}:{x:h*c,y:p*d}}(t,e);return s===(null==(n=a.offset)?void 0:n.placement)&&null!=(o=a.arrow)&&o.alignmentOffset?{}:{x:r+l.x,y:i+l.y,data:{...l,placement:s}}}}};function zk(e){return Hk(e)?(e.nodeName||"").toLowerCase():"#document"}function Fk(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Uk(e){var t;return null==(t=(Hk(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Hk(e){return e instanceof Node||e instanceof Fk(e).Node}function Vk(e){return e instanceof Element||e instanceof Fk(e).Element}function Wk(e){return e instanceof HTMLElement||e instanceof Fk(e).HTMLElement}function Kk(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof Fk(e).ShadowRoot)}function Gk(e){const{overflow:t,overflowX:n,overflowY:o,display:r}=Zk(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(r)}function qk(e){return["table","td","th"].includes(zk(e))}function Yk(e){const t=Xk(),n=Zk(e);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function Xk(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function $k(e){return["html","body","#document"].includes(zk(e))}function Zk(e){return Fk(e).getComputedStyle(e)}function Qk(e){return Vk(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Jk(e){if("html"===zk(e))return e;const t=e.assignedSlot||e.parentNode||Kk(e)&&e.host||Uk(e);return Kk(t)?t.host:t}function eC(e){const t=Jk(e);return $k(t)?e.ownerDocument?e.ownerDocument.body:e.body:Wk(t)&&Gk(t)?t:eC(t)}function tC(e,t,n){var o;void 0===t&&(t=[]),void 0===n&&(n=!0);const r=eC(e),i=r===(null==(o=e.ownerDocument)?void 0:o.body),s=Fk(r);return i?t.concat(s,s.visualViewport||[],Gk(r)?r:[],s.frameElement&&n?tC(s.frameElement):[]):t.concat(r,tC(r,[],n))}function nC(e){const t=Zk(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const r=Wk(e),i=r?e.offsetWidth:n,s=r?e.offsetHeight:o,a=vk(n)!==i||vk(o)!==s;return a&&(n=i,o=s),{width:n,height:o,$:a}}function oC(e){return Vk(e)?e:e.contextElement}function rC(e){const t=oC(e);if(!Wk(t))return bk(1);const n=t.getBoundingClientRect(),{width:o,height:r,$:i}=nC(t);let s=(i?vk(n.width):n.width)/o,a=(i?vk(n.height):n.height)/r;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const iC=bk(0);function sC(e){const t=Fk(e);return Xk()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:iC}function aC(e,t,n,o){void 0===t&&(t=!1),void 0===n&&(n=!1);const r=e.getBoundingClientRect(),i=oC(e);let s=bk(1);t&&(o?Vk(o)&&(s=rC(o)):s=rC(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Fk(e))&&t}(i,n,o)?sC(i):bk(0);let l=(r.left+a.x)/s.x,c=(r.top+a.y)/s.y,d=r.width/s.x,u=r.height/s.y;if(i){const e=Fk(i),t=o&&Vk(o)?Fk(o):o;let n=e,r=n.frameElement;for(;r&&o&&t!==n;){const e=rC(r),t=r.getBoundingClientRect(),o=Zk(r),i=t.left+(r.clientLeft+parseFloat(o.paddingLeft))*e.x,s=t.top+(r.clientTop+parseFloat(o.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=i,c+=s,n=Fk(r),r=n.frameElement}}return Ok({width:d,height:u,x:l,y:c})}const lC=[":popover-open",":modal"];function cC(e){return lC.some((t=>{try{return e.matches(t)}catch(n){return!1}}))}function dC(e){return aC(Uk(e)).left+Qk(e).scrollLeft}function uC(e,t,n){let o;if("viewport"===t)o=function(e,t){const n=Fk(e),o=Uk(e),r=n.visualViewport;let i=o.clientWidth,s=o.clientHeight,a=0,l=0;if(r){i=r.width,s=r.height;const e=Xk();(!e||e&&"fixed"===t)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:i,height:s,x:a,y:l}}(e,n);else if("document"===t)o=function(e){const t=Uk(e),n=Qk(e),o=e.ownerDocument.body,r=mk(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),i=mk(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let s=-n.scrollLeft+dC(e);const a=-n.scrollTop;return"rtl"===Zk(o).direction&&(s+=mk(t.clientWidth,o.clientWidth)-r),{width:r,height:i,x:s,y:a}}(Uk(e));else if(Vk(t))o=function(e,t){const n=aC(e,!0,"fixed"===t),o=n.top+e.clientTop,r=n.left+e.clientLeft,i=Wk(e)?rC(e):bk(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:r*i.x,y:o*i.y}}(t,n);else{const n=sC(e);o={...t,x:t.x-n.x,y:t.y-n.y}}return Ok(o)}function hC(e,t){const n=Jk(e);return!(n===t||!Vk(n)||$k(n))&&("fixed"===Zk(n).position||hC(n,t))}function pC(e,t,n){const o=Wk(t),r=Uk(t),i="fixed"===n,s=aC(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const l=bk(0);if(o||!o&&!i)if(("body"!==zk(t)||Gk(r))&&(a=Qk(t)),o){const e=aC(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else r&&(l.x=dC(r));return{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function fC(e,t){return Wk(e)&&"fixed"!==Zk(e).position?t?t(e):e.offsetParent:null}function gC(e,t){const n=Fk(e);if(!Wk(e)||cC(e))return n;let o=fC(e,t);for(;o&&qk(o)&&"static"===Zk(o).position;)o=fC(o,t);return o&&("html"===zk(o)||"body"===zk(o)&&"static"===Zk(o).position&&!Yk(o))?n:o||function(e){let t=Jk(e);for(;Wk(t)&&!$k(t);){if(Yk(t))return t;t=Jk(t)}return null}(e)||n}const mC={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:o,strategy:r}=e;const i="fixed"===r,s=Uk(o),a=!!t&&cC(t.floating);if(o===s||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=bk(1);const d=bk(0),u=Wk(o);if((u||!u&&!i)&&(("body"!==zk(o)||Gk(s))&&(l=Qk(o)),Wk(o))){const e=aC(o);c=rC(o),d.x=e.x+o.clientLeft,d.y=e.y+o.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x,y:n.y*c.y-l.scrollTop*c.y+d.y}},getDocumentElement:Uk,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:o,strategy:r}=e;const i="clippingAncestors"===n?function(e,t){const n=t.get(e);if(n)return n;let o=tC(e,[],!1).filter((e=>Vk(e)&&"body"!==zk(e))),r=null;const i="fixed"===Zk(e).position;let s=i?Jk(e):e;for(;Vk(s)&&!$k(s);){const t=Zk(s),n=Yk(s);n||"fixed"!==t.position||(r=null),(i?!n&&!r:!n&&"static"===t.position&&r&&["absolute","fixed"].includes(r.position)||Gk(s)&&!n&&hC(e,s))?o=o.filter((e=>e!==s)):r=t,s=Jk(s)}return t.set(e,o),o}(t,this._c):[].concat(n),s=[...i,o],a=s[0],l=s.reduce(((e,n)=>{const o=uC(t,n,r);return e.top=mk(o.top,e.top),e.right=gk(o.right,e.right),e.bottom=gk(o.bottom,e.bottom),e.left=mk(o.left,e.left),e}),uC(t,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:gC,getElementRects:async function(e){const t=this.getOffsetParent||gC,n=this.getDimensions;return{reference:pC(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=nC(e);return{width:t,height:n}},getScale:rC,isElement:Vk,isRTL:function(e){return"rtl"===Zk(e).direction}};function vC(e,t,n,o){void 0===o&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:s="function"===typeof ResizeObserver,layoutShift:a="function"===typeof IntersectionObserver,animationFrame:l=!1}=o,c=oC(e),d=r||i?[...c?tC(c):[],...tC(t)]:[];d.forEach((e=>{r&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));const u=c&&a?function(e,t){let n,o=null;const r=Uk(e);function i(){var e;clearTimeout(n),null==(e=o)||e.disconnect(),o=null}return function s(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),i();const{left:c,top:d,width:u,height:h}=e.getBoundingClientRect();if(a||t(),!u||!h)return;const p={rootMargin:-yk(d)+"px "+-yk(r.clientWidth-(c+u))+"px "+-yk(r.clientHeight-(d+h))+"px "+-yk(c)+"px",threshold:mk(0,gk(1,l))||1};let f=!0;function g(e){const t=e[0].intersectionRatio;if(t!==l){if(!f)return s();t?s(!1,t):n=setTimeout((()=>{s(!1,1e-7)}),100)}f=!1}try{o=new IntersectionObserver(g,{...p,root:r.ownerDocument})}catch(m){o=new IntersectionObserver(g,p)}o.observe(e)}(!0),i}(c,n):null;let h,p=-1,f=null;s&&(f=new ResizeObserver((e=>{let[o]=e;o&&o.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=f)||e.observe(t)}))),n()})),c&&!l&&f.observe(c),f.observe(t));let g=l?aC(e):null;return l&&function t(){const o=aC(e);!g||o.x===g.x&&o.y===g.y&&o.width===g.width&&o.height===g.height||n();g=o,h=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach((e=>{r&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),null==u||u(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(h)}}const yC=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:r}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=_k(e,t),c={x:n,y:o},d=await Bk(t,l),u=Tk(kk(r)),h=Ek(u);let p=c[h],f=c[u];if(i){const e="y"===h?"bottom":"right";p=Sk(p+d["y"===h?"top":"left"],p,p-d[e])}if(s){const e="y"===u?"bottom":"right";f=Sk(f+d["y"===u?"top":"left"],f,f-d[e])}const g=a.fn({...t,[h]:p,[u]:f});return{...g,data:{x:g.x-n,y:g.y-o}}}}},bC=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:r,middlewareData:i,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0,...m}=_k(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const v=kk(r),y=kk(a)===a,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(y||!g?[Mk(a)]:function(e){const t=Mk(e);return[Ak(e),t,Ak(t)]}(a));h||"none"===f||w.push(...function(e,t,n,o){const r=Ck(e);let i=function(e,t,n){const o=["left","right"],r=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:o:t?o:r;case"left":case"right":return t?i:s;default:return[]}}(kk(e),"start"===n,o);return r&&(i=i.map((e=>e+"-"+r)),t&&(i=i.concat(i.map(Ak)))),i}(a,g,f,b));const x=[a,...w],S=await Bk(t,m),_=[];let k=(null==(o=i.flip)?void 0:o.overflows)||[];if(d&&_.push(S[v]),u){const e=function(e,t,n){void 0===n&&(n=!1);const o=Ck(e),r=Pk(e),i=Ik(r);let s="x"===r?o===(n?"end":"start")?"right":"left":"start"===o?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=Mk(s)),[s,Mk(s)]}(r,s,b);_.push(S[e[0]],S[e[1]])}if(k=[...k,{placement:r,overflows:_}],!_.every((e=>e<=0))){var C,E;const e=((null==(C=i.flip)?void 0:C.index)||0)+1,t=x[e];if(t)return{data:{index:e,overflows:k},reset:{placement:t}};let n=null==(E=k.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:E.placement;if(!n)switch(p){case"bestFit":{var I;const e=null==(I=k.map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:I[0];e&&(n=e);break}case"initialPlacement":n=a}if(r!==n)return{reset:{placement:n}}}return{}}}},wC=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:o,platform:r,elements:i}=t,{apply:s=(()=>{}),...a}=_k(e,t),l=await Bk(t,a),c=kk(n),d=Ck(n),u="y"===Tk(n),{width:h,height:p}=o.floating;let f,g;"top"===c||"bottom"===c?(f=c,g=d===(await(null==r.isRTL?void 0:r.isRTL(i.floating))?"start":"end")?"left":"right"):(g=c,f="end"===d?"top":"bottom");const m=p-l[f],v=h-l[g],y=!t.middlewareData.shift;let b=m,w=v;if(u){const e=h-l.left-l.right;w=d||y?gk(v,e):e}else{const e=p-l.top-l.bottom;b=d||y?gk(m,e):e}if(y&&!d){const e=mk(l.left,0),t=mk(l.right,0),n=mk(l.top,0),o=mk(l.bottom,0);u?w=h-2*(0!==e||0!==t?e+t:mk(l.left,l.right)):b=p-2*(0!==n||0!==o?n+o:mk(l.top,l.bottom))}await s({...t,availableWidth:w,availableHeight:b});const x=await r.getDimensions(i.floating);return h!==x.width||p!==x.height?{reset:{rects:!0}}:{}}}},xC=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:o="referenceHidden",...r}=_k(e,t);switch(o){case"referenceHidden":{const e=Rk(await Bk(t,{...r,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:Nk(e)}}}case"escaped":{const e=Rk(await Bk(t,{...r,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:Nk(e)}}}default:return{}}}}},SC=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:r,rects:i,platform:s,elements:a,middlewareData:l}=t,{element:c,padding:d=0}=_k(e,t)||{};if(null==c)return{};const u=jk(d),h={x:n,y:o},p=Pk(r),f=Ik(p),g=await s.getDimensions(c),m="y"===p,v=m?"top":"left",y=m?"bottom":"right",b=m?"clientHeight":"clientWidth",w=i.reference[f]+i.reference[p]-h[p]-i.floating[f],x=h[p]-i.reference[p],S=await(null==s.getOffsetParent?void 0:s.getOffsetParent(c));let _=S?S[b]:0;_&&await(null==s.isElement?void 0:s.isElement(S))||(_=a.floating[b]||i.floating[f]);const k=w/2-x/2,C=_/2-g[f]/2-1,E=gk(u[v],C),I=gk(u[y],C),T=E,P=_-g[f]-I,A=_/2-g[f]/2+k,M=Sk(T,A,P),j=!l.arrow&&null!=Ck(r)&&A!==M&&i.reference[f]/2-(A<T?E:I)-g[f]/2<0,O=j?A<T?A-T:A-P:0;return{[p]:h[p]+O,data:{[p]:M,centerOffset:A-M-O,...j&&{alignmentOffset:O}},reset:j}}}),_C=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:o,placement:r,rects:i,middlewareData:s}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=_k(e,t),d={x:n,y:o},u=Tk(r),h=Ek(u);let p=d[h],f=d[u];const g=_k(a,t),m="number"===typeof g?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const e="y"===h?"height":"width",t=i.reference[h]-i.floating[e]+m.mainAxis,n=i.reference[h]+i.reference[e]-m.mainAxis;p<t?p=t:p>n&&(p=n)}if(c){var v,y;const e="y"===h?"width":"height",t=["top","left"].includes(kk(r)),n=i.reference[u]-i.floating[e]+(t&&(null==(v=s.offset)?void 0:v[u])||0)+(t?0:m.crossAxis),o=i.reference[u]+i.reference[e]+(t?0:(null==(y=s.offset)?void 0:y[u])||0)-(t?m.crossAxis:0);f<n?f=n:f>o&&(f=o)}return{[h]:p,[u]:f}}}},kC=(e,t,n)=>{const o=new Map,r={platform:mC,...n},i={...r.platform,_c:o};return(async(e,t,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:s}=n,a=i.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:u}=Lk(c,o,l),h=o,p={},f=0;for(let g=0;g<a.length;g++){const{name:n,fn:i}=a[g],{x:m,y:v,data:y,reset:b}=await i({x:d,y:u,initialPlacement:o,placement:h,strategy:r,middlewareData:p,rects:c,platform:s,elements:{reference:e,floating:t}});d=null!=m?m:d,u=null!=v?v:u,p={...p,[n]:{...p[n],...y}},b&&f<=50&&(f++,"object"===typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await s.getElementRects({reference:e,floating:t,strategy:r}):b.rects),({x:d,y:u}=Lk(c,h,l))),g=-1)}return{x:d,y:u,placement:h,strategy:r,middlewareData:p}})(e,t,{...r,platform:i})},CC=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:o}="function"===typeof e?e(t):e;return n&&(r=n,{}.hasOwnProperty.call(r,"current"))?null!=n.current?SC({element:n.current,padding:o}).fn(t):{}:n?SC({element:n,padding:o}).fn(t):{};var r}});var EC="undefined"!==typeof document?e.useLayoutEffect:e.useEffect;function IC(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,o,r;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(o=n;0!==o--;)if(!IC(e[o],t[o]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(o=n;0!==o--;)if(!{}.hasOwnProperty.call(t,r[o]))return!1;for(o=n;0!==o--;){const n=r[o];if(("_owner"!==n||!e.$$typeof)&&!IC(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function TC(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function PC(e,t){const n=TC(e);return Math.round(t*n)/n}function AC(t){const n=e.useRef(t);return EC((()=>{n.current=t})),n}function MC(t){const[n,o]=(0,e.useState)(void 0);return KS((()=>{if(t){o({width:t.offsetWidth,height:t.offsetHeight});const e=new ResizeObserver((e=>{if(!Array.isArray(e))return;if(!e.length)return;const n=e[0];let r,i;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,i=t.blockSize}else r=t.offsetWidth,i=t.offsetHeight;o({width:r,height:i})}));return e.observe(t,{box:"border-box"}),()=>e.unobserve(t)}o(void 0)}),[t]),n}const jC="Popper",[OC,LC]=SS(jC),[BC,RC]=OC(jC),NC=t=>{const{__scopePopper:n,children:o}=t,[r,i]=(0,e.useState)(null);return(0,e.createElement)(BC,{scope:n,anchor:r,onAnchorChange:i},o)},DC="PopperAnchor",zC=(0,e.forwardRef)(((t,n)=>{const{__scopePopper:o,virtualRef:r,...i}=t,s=RC(DC,o),a=(0,e.useRef)(null),l=xS(n,a);return(0,e.useEffect)((()=>{s.onAnchorChange((null===r||void 0===r?void 0:r.current)||a.current)})),r?null:(0,e.createElement)(AS.div,yS({},i,{ref:l}))})),FC="PopperContent",[UC,HC]=OC(FC),VC=(0,e.forwardRef)(((t,n)=>{var o,r,i,s,a,l,c,d;const{__scopePopper:u,side:h="bottom",sideOffset:p=0,align:f="center",alignOffset:g=0,arrowPadding:m=0,avoidCollisions:v=!0,collisionBoundary:y=[],collisionPadding:b=0,sticky:w="partial",hideWhenDetached:x=!1,updatePositionStrategy:S="optimized",onPlaced:_,...k}=t,C=RC(FC,u),[E,I]=(0,e.useState)(null),T=xS(n,(e=>I(e))),[P,A]=(0,e.useState)(null),M=MC(P),j=null!==(o=null===M||void 0===M?void 0:M.width)&&void 0!==o?o:0,O=null!==(r=null===M||void 0===M?void 0:M.height)&&void 0!==r?r:0,L=h+("center"!==f?"-"+f:""),B="number"===typeof b?b:{top:0,right:0,bottom:0,left:0,...b},R=Array.isArray(y)?y:[y],N=R.length>0,D={padding:B,boundary:R.filter(WC),altBoundary:N},{refs:z,floatingStyles:F,placement:U,isPositioned:H,middlewareData:V}=function(t){void 0===t&&(t={});const{placement:n="bottom",strategy:o="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[u,h]=e.useState({x:0,y:0,strategy:o,placement:n,middlewareData:{},isPositioned:!1}),[p,f]=e.useState(r);IC(p,r)||f(r);const[g,m]=e.useState(null),[v,y]=e.useState(null),b=e.useCallback((e=>{e!==_.current&&(_.current=e,m(e))}),[]),w=e.useCallback((e=>{e!==k.current&&(k.current=e,y(e))}),[]),x=s||g,S=a||v,_=e.useRef(null),k=e.useRef(null),C=e.useRef(u),E=null!=c,I=AC(c),T=AC(i),P=e.useCallback((()=>{if(!_.current||!k.current)return;const e={placement:n,strategy:o,middleware:p};T.current&&(e.platform=T.current),kC(_.current,k.current,e).then((e=>{const t={...e,isPositioned:!0};A.current&&!IC(C.current,t)&&(C.current=t,Ho.flushSync((()=>{h(t)})))}))}),[p,n,o,T]);EC((()=>{!1===d&&C.current.isPositioned&&(C.current.isPositioned=!1,h((e=>({...e,isPositioned:!1}))))}),[d]);const A=e.useRef(!1);EC((()=>(A.current=!0,()=>{A.current=!1})),[]),EC((()=>{if(x&&(_.current=x),S&&(k.current=S),x&&S){if(I.current)return I.current(x,S,P);P()}}),[x,S,P,I,E]);const M=e.useMemo((()=>({reference:_,floating:k,setReference:b,setFloating:w})),[b,w]),j=e.useMemo((()=>({reference:x,floating:S})),[x,S]),O=e.useMemo((()=>{const e={position:o,left:0,top:0};if(!j.floating)return e;const t=PC(j.floating,u.x),n=PC(j.floating,u.y);return l?{...e,transform:"translate("+t+"px, "+n+"px)",...TC(j.floating)>=1.5&&{willChange:"transform"}}:{position:o,left:t,top:n}}),[o,l,j.floating,u.x,u.y]);return e.useMemo((()=>({...u,update:P,refs:M,elements:j,floatingStyles:O})),[u,P,M,j,O])}({strategy:"fixed",placement:L,whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vC(...t,{animationFrame:"always"===S})},elements:{reference:C.anchor},middleware:[Dk({mainAxis:p+O,alignmentAxis:g}),v&&yC({mainAxis:!0,crossAxis:!1,limiter:"partial"===w?_C():void 0,...D}),v&&bC({...D}),wC({...D,apply:e=>{let{elements:t,rects:n,availableWidth:o,availableHeight:r}=e;const{width:i,height:s}=n.reference,a=t.floating.style;a.setProperty("--radix-popper-available-width","".concat(o,"px")),a.setProperty("--radix-popper-available-height","".concat(r,"px")),a.setProperty("--radix-popper-anchor-width","".concat(i,"px")),a.setProperty("--radix-popper-anchor-height","".concat(s,"px"))}}),P&&CC({element:P,padding:m}),KC({arrowWidth:j,arrowHeight:O}),x&&xC({strategy:"referenceHidden",...D})]}),[W,K]=GC(U),G=jS(_);KS((()=>{H&&(null===G||void 0===G||G())}),[H,G]);const q=null===(i=V.arrow)||void 0===i?void 0:i.x,Y=null===(s=V.arrow)||void 0===s?void 0:s.y,X=0!==(null===(a=V.arrow)||void 0===a?void 0:a.centerOffset),[$,Z]=(0,e.useState)();return KS((()=>{E&&Z(window.getComputedStyle(E).zIndex)}),[E]),(0,e.createElement)("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:H?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$,"--radix-popper-transform-origin":[null===(l=V.transformOrigin)||void 0===l?void 0:l.x,null===(c=V.transformOrigin)||void 0===c?void 0:c.y].join(" ")},dir:t.dir},(0,e.createElement)(UC,{scope:u,placedSide:W,onArrowChange:A,arrowX:q,arrowY:Y,shouldHideArrow:X},(0,e.createElement)(AS.div,yS({"data-side":W,"data-align":K},k,{ref:T,style:{...k.style,animation:H?void 0:"none",opacity:null!==(d=V.hide)&&void 0!==d&&d.referenceHidden?0:void 0}}))))}));function WC(e){return null!==e}const KC=e=>({name:"transformOrigin",options:e,fn(t){var n,o,r,i,s;const{placement:a,rects:l,middlewareData:c}=t,d=0!==(null===(n=c.arrow)||void 0===n?void 0:n.centerOffset),u=d?0:e.arrowWidth,h=d?0:e.arrowHeight,[p,f]=GC(a),g={start:"0%",center:"50%",end:"100%"}[f],m=(null!==(o=null===(r=c.arrow)||void 0===r?void 0:r.x)&&void 0!==o?o:0)+u/2,v=(null!==(i=null===(s=c.arrow)||void 0===s?void 0:s.y)&&void 0!==i?i:0)+h/2;let y="",b="";return"bottom"===p?(y=d?g:"".concat(m,"px"),b="".concat(-h,"px")):"top"===p?(y=d?g:"".concat(m,"px"),b="".concat(l.floating.height+h,"px")):"right"===p?(y="".concat(-h,"px"),b=d?g:"".concat(v,"px")):"left"===p&&(y="".concat(l.floating.width+h,"px"),b=d?g:"".concat(v,"px")),{data:{x:y,y:b}}}});function GC(e){const[t,n="center"]=e.split("-");return[t,n]}const qC=NC,YC=zC,XC=VC;var $C=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},ZC=new WeakMap,QC=new WeakMap,JC={},eE=0,tE=function(e){return e&&(e.host||tE(e.parentNode))},nE=function(e,t,n,o){var r=function(e,t){return t.map((function(t){if(e.contains(t))return t;var n=tE(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);JC[n]||(JC[n]=new WeakMap);var i=JC[n],s=[],a=new Set,l=new Set(r),c=function(e){e&&!a.has(e)&&(a.add(e),c(e.parentNode))};r.forEach(c);var d=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(a.has(e))d(e);else try{var t=e.getAttribute(o),r=null!==t&&"false"!==t,l=(ZC.get(e)||0)+1,c=(i.get(e)||0)+1;ZC.set(e,l),i.set(e,c),s.push(e),1===l&&r&&QC.set(e,!0),1===c&&e.setAttribute(n,"true"),r||e.setAttribute(o,"true")}catch(u){console.error("aria-hidden: cannot operate on ",e,u)}}))};return d(t),a.clear(),eE++,function(){s.forEach((function(e){var t=ZC.get(e)-1,r=i.get(e)-1;ZC.set(e,t),i.set(e,r),t||(QC.has(e)||e.removeAttribute(o),QC.delete(e)),r||e.removeAttribute(n)})),--eE||(ZC=new WeakMap,ZC=new WeakMap,QC=new WeakMap,JC={})}},oE=function(e,t,n){void 0===n&&(n="data-aria-hidden");var o=Array.from(Array.isArray(e)?e:[e]),r=t||$C(e);return r?(o.push.apply(o,Array.from(r.querySelectorAll("[aria-live]"))),nE(o,r,n,"aria-hidden")):function(){return null}};var rE=function(){return rE=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},rE.apply(this,arguments)};function iE(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}Object.create;function sE(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var aE="right-scroll-bar-position",lE="width-before-scroll-bar";function cE(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var dE="undefined"!==typeof window?e.useLayoutEffect:e.useEffect,uE=new WeakMap;function hE(t,n){var o=function(t,n){var o=(0,e.useState)((function(){return{value:t,callback:n,facade:{get current(){return o.value},set current(e){var t=o.value;t!==e&&(o.value=e,o.callback(e,t))}}}}))[0];return o.callback=n,o.facade}(n||null,(function(e){return t.forEach((function(t){return cE(t,e)}))}));return dE((function(){var e=uE.get(o);if(e){var n=new Set(e),r=new Set(t),i=o.current;n.forEach((function(e){r.has(e)||cE(e,null)})),r.forEach((function(e){n.has(e)||cE(e,i)}))}uE.set(o,t)}),[t]),o}function pE(e){return e}function fE(e,t){void 0===t&&(t=pE);var n=[],o=!1,r={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var r=t(e,o);return n.push(r),function(){n=n.filter((function(e){return e!==r}))}},assignSyncMedium:function(e){for(o=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){o=!0;var t=[];if(n.length){var r=n;n=[],r.forEach(e),t=n}var i=function(){var n=t;t=[],n.forEach(e)},s=function(){return Promise.resolve().then(i)};s(),n={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),n}}}};return r}var gE=function(e){void 0===e&&(e={});var t=fE(null);return t.options=rE({async:!0,ssr:!1},e),t}(),mE=function(){},vE=e.forwardRef((function(t,n){var o=e.useRef(null),r=e.useState({onScrollCapture:mE,onWheelCapture:mE,onTouchMoveCapture:mE}),i=r[0],s=r[1],a=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,h=t.shards,p=t.sideCar,f=t.noIsolation,g=t.inert,m=t.allowPinchZoom,v=t.as,y=void 0===v?"div":v,b=iE(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=p,x=hE([o,n]),S=rE(rE({},b),i);return e.createElement(e.Fragment,null,u&&e.createElement(w,{sideCar:gE,removeScrollBar:d,shards:h,noIsolation:f,inert:g,setCallbacks:s,allowPinchZoom:!!m,lockRef:o}),a?e.cloneElement(e.Children.only(l),rE(rE({},S),{ref:x})):e.createElement(y,rE({},S,{className:c,ref:x}),l))}));vE.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},vE.classNames={fullWidth:lE,zeroRight:aE};var yE,bE=function(t){var n=t.sideCar,o=iE(t,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=n.read();if(!r)throw new Error("Sidecar medium not found");return e.createElement(r,rE({},o))};bE.isSideCarExport=!0;function wE(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=yE||n.nc;return t&&e.setAttribute("nonce",t),e}var xE=function(){var e=0,t=null;return{add:function(n){var o,r;0==e&&(t=wE())&&(r=n,(o=t).styleSheet?o.styleSheet.cssText=r:o.appendChild(document.createTextNode(r)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},SE=function(){var t=function(){var t=xE();return function(n,o){e.useEffect((function(){return t.add(n),function(){t.remove()}}),[n&&o])}}();return function(e){var n=e.styles,o=e.dynamic;return t(n,o),null}},_E={left:0,top:0,right:0,gap:0},kE=function(e){return parseInt(e||"",10)||0},CE=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return _E;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],o=t["padding"===e?"paddingTop":"marginTop"],r=t["padding"===e?"paddingRight":"marginRight"];return[kE(n),kE(o),kE(r)]}(e),n=document.documentElement.clientWidth,o=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,o-n+t[2]-t[0])}},EE=SE(),IE="data-scroll-locked",TE=function(e,t,n,o){var r=e.left,i=e.top,s=e.right,a=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(o,";\n   padding-right: ").concat(a,"px ").concat(o,";\n  }\n  body[").concat(IE,"] {\n    overflow: hidden ").concat(o,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(o,";"),"margin"===n&&"\n    padding-left: ".concat(r,"px;\n    padding-top: ").concat(i,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(o,";\n    "),"padding"===n&&"padding-right: ".concat(a,"px ").concat(o,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(aE," {\n    right: ").concat(a,"px ").concat(o,";\n  }\n  \n  .").concat(lE," {\n    margin-right: ").concat(a,"px ").concat(o,";\n  }\n  \n  .").concat(aE," .").concat(aE," {\n    right: 0 ").concat(o,";\n  }\n  \n  .").concat(lE," .").concat(lE," {\n    margin-right: 0 ").concat(o,";\n  }\n  \n  body[").concat(IE,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},PE=function(){var e=parseInt(document.body.getAttribute(IE)||"0",10);return isFinite(e)?e:0},AE=function(t){var n=t.noRelative,o=t.noImportant,r=t.gapMode,i=void 0===r?"margin":r;e.useEffect((function(){return document.body.setAttribute(IE,(PE()+1).toString()),function(){var e=PE()-1;e<=0?document.body.removeAttribute(IE):document.body.setAttribute(IE,e.toString())}}),[]);var s=e.useMemo((function(){return CE(i)}),[i]);return e.createElement(EE,{styles:TE(s,!n,i,o?"":"!important")})},ME=!1;if("undefined"!==typeof window)try{var jE=Object.defineProperty({},"passive",{get:function(){return ME=!0,!0}});window.addEventListener("test",jE,jE),window.removeEventListener("test",jE,jE)}catch(cU){ME=!1}var OE=!!ME&&{passive:!1},LE=function(e,t){var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},BE=function(e,t){var n=t;do{if("undefined"!==typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),RE(e,n)){var o=NE(e,n);if(o[1]>o[2])return!0}n=n.parentNode}while(n&&n!==document.body);return!1},RE=function(e,t){return"v"===e?function(e){return LE(e,"overflowY")}(t):function(e){return LE(e,"overflowX")}(t)},NE=function(e,t){return"v"===e?function(e){return[e.scrollTop,e.scrollHeight,e.clientHeight]}(t):function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t)},DE=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},zE=function(e){return[e.deltaX,e.deltaY]},FE=function(e){return e&&"current"in e?e.current:e},UE=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},HE=0,VE=[];const WE=(KE=function(t){var n=e.useRef([]),o=e.useRef([0,0]),r=e.useRef(),i=e.useState(HE++)[0],s=e.useState((function(){return SE()}))[0],a=e.useRef(t);e.useEffect((function(){a.current=t}),[t]),e.useEffect((function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var e=sE([t.lockRef.current],(t.shards||[]).map(FE),!0).filter(Boolean);return e.forEach((function(e){return e.classList.add("allow-interactivity-".concat(i))})),function(){document.body.classList.remove("block-interactivity-".concat(i)),e.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(i))}))}}}),[t.inert,t.lockRef.current,t.shards]);var l=e.useCallback((function(e,t){if("touches"in e&&2===e.touches.length)return!a.current.allowPinchZoom;var n,i=DE(e),s=o.current,l="deltaX"in e?e.deltaX:s[0]-i[0],c="deltaY"in e?e.deltaY:s[1]-i[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=BE(u,d);if(!h)return!0;if(h?n=u:(n="v"===u?"h":"v",h=BE(u,d)),!h)return!1;if(!r.current&&"changedTouches"in e&&(l||c)&&(r.current=n),!n)return!0;var p=r.current||n;return function(e,t,n,o,r){var i=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),s=i*o,a=n.target,l=t.contains(a),c=!1,d=s>0,u=0,h=0;do{var p=NE(e,a),f=p[0],g=p[1]-p[2]-i*f;(f||g)&&RE(e,a)&&(u+=g,h+=f),a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(d&&(r&&0===u||!r&&s>u)||!d&&(r&&0===h||!r&&-s>h))&&(c=!0),c}(p,t,e,"h"===p?l:c,!0)}),[]),c=e.useCallback((function(e){var t=e;if(VE.length&&VE[VE.length-1]===s){var o="deltaY"in t?zE(t):DE(t),r=n.current.filter((function(e){return e.name===t.type&&e.target===t.target&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,o)}))[0];if(r&&r.should)t.cancelable&&t.preventDefault();else if(!r){var i=(a.current.shards||[]).map(FE).filter(Boolean).filter((function(e){return e.contains(t.target)}));(i.length>0?l(t,i[0]):!a.current.noIsolation)&&t.cancelable&&t.preventDefault()}}}),[]),d=e.useCallback((function(e,t,o,r){var i={name:e,delta:t,target:o,should:r};n.current.push(i),setTimeout((function(){n.current=n.current.filter((function(e){return e!==i}))}),1)}),[]),u=e.useCallback((function(e){o.current=DE(e),r.current=void 0}),[]),h=e.useCallback((function(e){d(e.type,zE(e),e.target,l(e,t.lockRef.current))}),[]),p=e.useCallback((function(e){d(e.type,DE(e),e.target,l(e,t.lockRef.current))}),[]);e.useEffect((function(){return VE.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,OE),document.addEventListener("touchmove",c,OE),document.addEventListener("touchstart",u,OE),function(){VE=VE.filter((function(e){return e!==s})),document.removeEventListener("wheel",c,OE),document.removeEventListener("touchmove",c,OE),document.removeEventListener("touchstart",u,OE)}}),[]);var f=t.removeScrollBar,g=t.inert;return e.createElement(e.Fragment,null,g?e.createElement(s,{styles:UE(i)}):null,f?e.createElement(AE,{gapMode:"margin"}):null)},gE.useMedium(KE),bE);var KE,GE=e.forwardRef((function(t,n){return e.createElement(vE,rE({},t,{ref:n,sideCar:WE}))}));GE.classNames=vE.classNames;const qE=GE,YE="Popover",[XE,$E]=SS(YE,[LC]),ZE=LC(),[QE,JE]=XE(YE),eI=t=>{const{__scopePopover:n,children:o,open:r,defaultOpen:i,onOpenChange:s,modal:a=!1}=t,l=ZE(n),c=(0,e.useRef)(null),[d,u]=(0,e.useState)(!1),[h=!1,p]=YS({prop:r,defaultProp:i,onChange:s});return(0,e.createElement)(qC,l,(0,e.createElement)(QE,{scope:n,contentId:pk(),triggerRef:c,open:h,onOpenChange:p,onOpenToggle:(0,e.useCallback)((()=>p((e=>!e))),[p]),hasCustomAnchor:d,onCustomAnchorAdd:(0,e.useCallback)((()=>u(!0)),[]),onCustomAnchorRemove:(0,e.useCallback)((()=>u(!1)),[]),modal:a},o))},tI="PopoverTrigger",nI=(0,e.forwardRef)(((t,n)=>{const{__scopePopover:o,...r}=t,i=JE(tI,o),s=ZE(o),a=xS(n,i.triggerRef),l=(0,e.createElement)(AS.button,yS({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":hI(i.open)},r,{ref:a,onClick:bS(t.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?l:(0,e.createElement)(YC,yS({asChild:!0},s),l)})),oI="PopoverPortal",[rI,iI]=XE(oI,{forceMount:void 0}),sI=t=>{const{__scopePopover:n,forceMount:o,children:r,container:i}=t,s=JE(oI,n);return(0,e.createElement)(rI,{scope:n,forceMount:o},(0,e.createElement)(GS,{present:o||s.open},(0,e.createElement)(WS,{asChild:!0,container:i},r)))},aI="PopoverContent",lI=(0,e.forwardRef)(((t,n)=>{const o=iI(aI,t.__scopePopover),{forceMount:r=o.forceMount,...i}=t,s=JE(aI,t.__scopePopover);return(0,e.createElement)(GS,{present:r||s.open},s.modal?(0,e.createElement)(cI,yS({},i,{ref:n})):(0,e.createElement)(dI,yS({},i,{ref:n})))})),cI=(0,e.forwardRef)(((t,n)=>{const o=JE(aI,t.__scopePopover),r=(0,e.useRef)(null),i=xS(n,r),s=(0,e.useRef)(!1);return(0,e.useEffect)((()=>{const e=r.current;if(e)return oE(e)}),[]),(0,e.createElement)(qE,{as:kS,allowPinchZoom:!0},(0,e.createElement)(uI,yS({},t,{ref:i,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:bS(t.onCloseAutoFocus,(e=>{var t;e.preventDefault(),s.current||null===(t=o.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:bS(t.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,o=2===t.button||n;s.current=o}),{checkForDefaultPrevented:!1}),onFocusOutside:bS(t.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})})))})),dI=(0,e.forwardRef)(((t,n)=>{const o=JE(aI,t.__scopePopover),r=(0,e.useRef)(!1),i=(0,e.useRef)(!1);return(0,e.createElement)(uI,yS({},t,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var n,s;(null===(n=t.onCloseAutoFocus)||void 0===n||n.call(t,e),e.defaultPrevented)||(r.current||null===(s=o.triggerRef.current)||void 0===s||s.focus(),e.preventDefault());r.current=!1,i.current=!1},onInteractOutside:e=>{var n,s;null===(n=t.onInteractOutside)||void 0===n||n.call(t,e),e.defaultPrevented||(r.current=!0,"pointerdown"===e.detail.originalEvent.type&&(i.current=!0));const a=e.target;(null===(s=o.triggerRef.current)||void 0===s?void 0:s.contains(a))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&i.current&&e.preventDefault()}}))})),uI=(0,e.forwardRef)(((t,n)=>{const{__scopePopover:o,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=t,p=JE(aI,o),f=ZE(o);return J_(),(0,e.createElement)(rk,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},(0,e.createElement)(DS,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1)},(0,e.createElement)(XC,yS({"data-state":hI(p.open),role:"dialog",id:p.contentId},f,h,{ref:n,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))}));function hI(e){return e?"open":"closed"}const pI=eI,fI=nI,gI=sI,mI=lI,vI=()=>{},yI=e.createContext({});function bI(e){let{onEvent:t,children:n}=e;return(0,Rc.jsx)(yI.Provider,{value:null!==t&&void 0!==t?t:vI,children:n})}function wI(){const t=e.useContext(yI);return null!==t&&void 0!==t?t:vI}function xI(t,n){const o=Hc(),r=(0,e.useRef)(!1),i=wI(),s=(0,e.useCallback)((e=>{r.current=e,o.batch((()=>{e?(o.complete(),o.addOpenMenu(t)):o.updateInstanceState({openMenus:o.getOpenMenus().filter((e=>!e.startsWith(t)))}),null===n||void 0===n||n(e)}))}),[o,t,n]),a=ri("is menu open",(()=>o.getOpenMenus().includes(t)),[o,t]);return(0,e.useEffect)((()=>(r.current&&(i("open-menu",{source:"unknown",id:t}),o.addOpenMenu(t)),()=>{r.current&&(o.deleteOpenMenu(t),o.getOpenMenus().forEach((e=>{e.startsWith(t)&&(i("close-menu",{source:"unknown",id:t}),o.deleteOpenMenu(e))})),r.current=!1)})),[o,t,i]),[a,s]}function SI(e){let{id:t,children:n,onOpenChange:o,open:r}=e;const[i,s]=xI(t,o);return(0,Rc.jsx)(pI,{onOpenChange:s,open:r||i,children:(0,Rc.jsx)("div",{className:"tlui-popover",children:n})})}function _I(e){let{children:t}=e;return(0,Rc.jsx)(fI,{asChild:!0,dir:"ltr",children:t})}function kI(e){let{side:t,children:n,align:o="center",sideOffset:r=8,alignOffset:i=0}=e;const s=Jd();return(0,Rc.jsx)(gI,{container:s,children:(0,Rc.jsx)(mI,{className:"tlui-popover__content",side:t,sideOffset:r,align:o,alignOffset:i,dir:"ltr",children:n})})}const CI=(0,e.createContext)({type:"menu",sourceId:"main-menu"});function EI(){return(0,e.useContext)(CI)}function II(e){let{type:t,sourceId:n,children:o}=e;return(0,Rc.jsx)(CI.Provider,{value:{type:t,sourceId:n},children:o})}const TI=50;function PI(e){let{children:t}=e;return(0,Rc.jsx)("span",{className:"tlui-button__label",children:t})}const AI="Dialog",[MI,jI]=SS(AI),[OI,LI]=MI(AI),BI=t=>{const{__scopeDialog:n,children:o,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,l=(0,e.useRef)(null),c=(0,e.useRef)(null),[d=!1,u]=YS({prop:r,defaultProp:i,onChange:s});return(0,e.createElement)(OI,{scope:n,triggerRef:l,contentRef:c,contentId:pk(),titleId:pk(),descriptionId:pk(),open:d,onOpenChange:u,onOpenToggle:(0,e.useCallback)((()=>u((e=>!e))),[u]),modal:a},o)},RI="DialogPortal",[NI,DI]=MI(RI,{forceMount:void 0}),zI=t=>{const{__scopeDialog:n,forceMount:o,children:r,container:i}=t,s=LI(RI,n);return(0,e.createElement)(NI,{scope:n,forceMount:o},e.Children.map(r,(t=>(0,e.createElement)(GS,{present:o||s.open},(0,e.createElement)(WS,{asChild:!0,container:i},t)))))},FI="DialogOverlay",UI=(0,e.forwardRef)(((t,n)=>{const o=DI(FI,t.__scopeDialog),{forceMount:r=o.forceMount,...i}=t,s=LI(FI,t.__scopeDialog);return s.modal?(0,e.createElement)(GS,{present:r||s.open},(0,e.createElement)(HI,yS({},i,{ref:n}))):null})),HI=(0,e.forwardRef)(((t,n)=>{const{__scopeDialog:o,...r}=t,i=LI(FI,o);return(0,e.createElement)(qE,{as:kS,allowPinchZoom:!0,shards:[i.contentRef]},(0,e.createElement)(AS.div,yS({"data-state":QI(i.open)},r,{ref:n,style:{pointerEvents:"auto",...r.style}})))})),VI="DialogContent",WI=(0,e.forwardRef)(((t,n)=>{const o=DI(VI,t.__scopeDialog),{forceMount:r=o.forceMount,...i}=t,s=LI(VI,t.__scopeDialog);return(0,e.createElement)(GS,{present:r||s.open},s.modal?(0,e.createElement)(KI,yS({},i,{ref:n})):(0,e.createElement)(GI,yS({},i,{ref:n})))})),KI=(0,e.forwardRef)(((t,n)=>{const o=LI(VI,t.__scopeDialog),r=(0,e.useRef)(null),i=xS(n,o.contentRef,r);return(0,e.useEffect)((()=>{const e=r.current;if(e)return oE(e)}),[]),(0,e.createElement)(qI,yS({},t,{ref:i,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:bS(t.onCloseAutoFocus,(e=>{var t;e.preventDefault(),null===(t=o.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:bS(t.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()})),onFocusOutside:bS(t.onFocusOutside,(e=>e.preventDefault()))}))})),GI=(0,e.forwardRef)(((t,n)=>{const o=LI(VI,t.__scopeDialog),r=(0,e.useRef)(!1),i=(0,e.useRef)(!1);return(0,e.createElement)(qI,yS({},t,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var n,s;(null===(n=t.onCloseAutoFocus)||void 0===n||n.call(t,e),e.defaultPrevented)||(r.current||null===(s=o.triggerRef.current)||void 0===s||s.focus(),e.preventDefault());r.current=!1,i.current=!1},onInteractOutside:e=>{var n,s;null===(n=t.onInteractOutside)||void 0===n||n.call(t,e),e.defaultPrevented||(r.current=!0,"pointerdown"===e.detail.originalEvent.type&&(i.current=!0));const a=e.target;(null===(s=o.triggerRef.current)||void 0===s?void 0:s.contains(a))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&i.current&&e.preventDefault()}}))})),qI=(0,e.forwardRef)(((t,n)=>{const{__scopeDialog:o,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=t,l=LI(VI,o),c=xS(n,(0,e.useRef)(null));return J_(),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(rk,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},(0,e.createElement)(DS,yS({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":QI(l.open)},a,{ref:c,onDismiss:()=>l.onOpenChange(!1)}))),!1)})),YI="DialogTitle",XI=(0,e.forwardRef)(((t,n)=>{const{__scopeDialog:o,...r}=t,i=LI(YI,o);return(0,e.createElement)(AS.h2,yS({id:i.titleId},r,{ref:n}))})),$I="DialogClose",ZI=(0,e.forwardRef)(((t,n)=>{const{__scopeDialog:o,...r}=t,i=LI($I,o);return(0,e.createElement)(AS.button,yS({type:"button"},r,{ref:n,onClick:bS(t.onClick,(()=>i.onOpenChange(!1)))}))}));function QI(e){return e?"open":"closed"}const JI="DialogTitleWarning",[eT,tT]=function(t,n){const o=(0,e.createContext)(n);function r(t){const{children:n,...r}=t,i=(0,e.useMemo)((()=>r),Object.values(r));return(0,e.createElement)(o.Provider,{value:i},n)}return r.displayName=t+"Provider",[r,function(r){const i=(0,e.useContext)(o);if(i)return i;if(void 0!==n)return n;throw new Error("`".concat(r,"` must be used within `").concat(t,"`"))}]}(JI,{contentName:VI,titleName:YI,docsSlug:"dialog"}),nT=BI,oT=zI,rT=UI,iT=WI;function sT(e){let{className:t,children:n}=e;return(0,Rc.jsx)("div",{className:Nc("tlui-dialog__header",t),children:n})}function aT(e){let{className:t,children:n}=e;return(0,Rc.jsx)(XI,{dir:"ltr",className:Nc("tlui-dialog__header__title",t),children:n})}function lT(){return(0,Rc.jsx)("div",{className:"tlui-dialog__header__close",children:(0,Rc.jsx)(ZI,{"data-testid":"dialog.close",dir:"ltr",asChild:!0,children:(0,Rc.jsx)(X_,{type:"icon","aria-label":"Close",onTouchEnd:e=>e.target.click(),children:(0,Rc.jsx)(Z_,{small:!0,icon:"cross-2"})})})})}function cT(e){let{className:t,children:n,style:o}=e;return(0,Rc.jsx)("div",{className:Nc("tlui-dialog__body",t),style:o,children:n})}function dT(e){let{className:t,children:n}=e;return(0,Rc.jsx)("div",{className:Nc("tlui-dialog__footer",t),children:n})}const uT=e.forwardRef((function(t,n){let{className:o,label:r,icon:i,iconLeft:s,autoselect:a=!1,autofocus:l=!1,defaultValue:c,placeholder:d,onComplete:u,onValueChange:h,onCancel:p,onBlur:f,shouldManuallyMaintainScrollPositionWhenFocused:g=!1,children:m,value:v}=t;const y=Hc(),b=e.useRef(null);e.useImperativeHandle(n,(()=>b.current));const w=Y_(),x=e.useRef(null!==c&&void 0!==c?c:""),S=e.useRef(null!==c&&void 0!==c?c:""),[_,k]=e.useState(!1),C=e.useCallback((e=>{k(!0);const t=e.currentTarget;S.current=t.value,requestAnimationFrame((()=>{a&&t.select()}))}),[a]),E=e.useCallback((e=>{const t=e.currentTarget.value;S.current=t,null===h||void 0===h||h(t)}),[h]),I=e.useCallback((e=>{switch(e.key){case"Enter":e.currentTarget.blur(),Xd(e),null===u||void 0===u||u(e.currentTarget.value);break;case"Escape":e.currentTarget.value=x.current,e.currentTarget.blur(),Xd(e),null===p||void 0===p||p(e.currentTarget.value)}}),[u,p]),T=e.useCallback((e=>{k(!1);const t=e.currentTarget.value;null===f||void 0===f||f(t)}),[f]);return e.useEffect((()=>{if(!y.environment.isIos)return;const e=window.visualViewport;if(_&&g&&e){const t=()=>{var e;null===(e=b.current)||void 0===e||e.scrollIntoView({block:"center"})};return e.addEventListener("resize",t),e.addEventListener("scroll",t),requestAnimationFrame((()=>{var e;null===(e=b.current)||void 0===e||e.scrollIntoView({block:"center"})})),()=>{e.removeEventListener("resize",t),e.removeEventListener("scroll",t)}}}),[y,_,g]),(0,Rc.jsxs)("div",{draggable:!1,className:"tlui-input__wrapper",children:[m,r&&(0,Rc.jsx)("label",{children:w(r)}),s&&(0,Rc.jsx)($_,{icon:s,className:"tlui-icon-left",small:!0}),(0,Rc.jsx)("input",{ref:b,className:Nc("tlui-input",o),type:"text",defaultValue:c,onKeyUp:I,onChange:E,onFocus:C,onBlur:T,autoFocus:l,placeholder:d,value:v}),i&&(0,Rc.jsx)($_,{icon:i,small:!!r})]})}));function hT(e){return ta.isValid(e)?{isValid:!0,hasProtocol:!0}:ta.isValid("https://"+e)?{isValid:!0,hasProtocol:!1}:{isValid:!1,hasProtocol:!1}}const pT=ti((function(e){let{onClose:t}=e;const n=Hc().getOnlySelectedShape();return n&&"url"in n.props&&"string"===typeof n.props.url?(0,Rc.jsx)(fT,{onClose:t,selectedShape:n}):null})),fT=ti((function(t){let{onClose:n,selectedShape:o}=t;const r=Hc(),i=Y_(),s=(0,e.useRef)(null);(0,e.useEffect)((()=>{requestAnimationFrame((()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.focus()}))}),[]);const a=(0,e.useRef)(o.props.url),[l,c]=(0,e.useState)((()=>{const e=hT(o.props.url),t=!0===e.isValid?e.hasProtocol?o.props.url:"https://"+o.props.url:"https://";return{actual:t,safe:t,valid:!0}})),d=(0,e.useCallback)((e=>{const t=e.replace(/https?:\/\/(https?:\/\/)/,((e,t)=>t)),n=hT(t),o=!0===n.isValid?n.hasProtocol?t:"https://"+t:"https://";c({actual:t,safe:o,valid:n.isValid})}),[]),u=(0,e.useCallback)((()=>{const e=r.getOnlySelectedShape();e&&(r.updateShapes([{id:e.id,type:e.type,props:{url:""}}]),n())}),[r,n]),h=(0,e.useCallback)((()=>{const e=r.getOnlySelectedShape();e&&(e&&"url"in e.props&&e.props.url!==l.safe&&r.updateShapes([{id:e.id,type:e.type,props:{url:l.safe}}]),n())}),[r,n,l]),p=(0,e.useCallback)((()=>{n()}),[n]);if(!o)return n(),null;const f=a.current&&!l.valid;return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsxs)(sT,{children:[(0,Rc.jsx)(aT,{children:i("edit-link-dialog.title")}),(0,Rc.jsx)(lT,{})]}),(0,Rc.jsx)(cT,{children:(0,Rc.jsxs)("div",{className:"tlui-edit-link-dialog",children:[(0,Rc.jsx)(uT,{ref:s,className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",autofocus:!0,value:l.actual,onValueChange:d,onComplete:h,onCancel:p}),(0,Rc.jsx)("div",{children:l.valid?i("edit-link-dialog.detail"):i("edit-link-dialog.invalid-url")})]})}),(0,Rc.jsxs)(dT,{className:"tlui-dialog__footer__actions",children:[(0,Rc.jsx)(X_,{type:"normal",onClick:p,onTouchEnd:p,children:(0,Rc.jsx)(PI,{children:i("edit-link-dialog.cancel")})}),f?(0,Rc.jsx)(X_,{type:"danger",onTouchEnd:u,onClick:u,children:(0,Rc.jsx)(PI,{children:i("edit-link-dialog.clear")})}):(0,Rc.jsx)(X_,{type:"primary",disabled:!l.valid,onTouchEnd:h,onClick:h,children:(0,Rc.jsx)(PI,{children:i("edit-link-dialog.save")})})]})]})})),gT=ti((function(t){let{onClose:n}=t;const o=Hc(),r=Y_(),i=H_(),[s,a]=(0,e.useState)(null),[l,c]=(0,e.useState)(""),[d,u]=(0,e.useState)(null),[h,p]=(0,e.useState)(!1),f=(0,e.useRef)(-1);return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsxs)(sT,{children:[(0,Rc.jsx)(aT,{children:s?"".concat(r("embed-dialog.title")," \u2014 ").concat(s.title):r("embed-dialog.title")}),(0,Rc.jsx)(lT,{})]}),s?(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsxs)(cT,{className:"tlui-embed-dialog__enter",children:[(0,Rc.jsx)(uT,{className:"tlui-embed-dialog__input",label:"embed-url",placeholder:"http://example.com",autofocus:!0,onValueChange:e=>{c(e);const t=fy(e);u(t&&t.definition.type===s.type?t:null),p(!1),clearTimeout(f.current),f.current=setTimeout((()=>p(!t)),320)}}),""===l?(0,Rc.jsxs)("div",{className:"tlui-embed-dialog__instruction",children:[(0,Rc.jsx)("span",{children:r("embed-dialog.instruction")})," ",s.instructionLink&&(0,Rc.jsxs)("a",{target:"_blank",rel:"noopener noreferrer",href:s.instructionLink,className:"tlui-embed-dialog__instruction__link",children:["Learn more.",(0,Rc.jsx)($_,{icon:"external-link",small:!0})]})]}):(0,Rc.jsx)("div",{className:"tlui-embed-dialog__warning",children:h?r("embed-dialog.invalid-url"):"\xa0"})]}),(0,Rc.jsxs)(dT,{className:"tlui-dialog__footer__actions",children:[(0,Rc.jsx)(X_,{type:"normal",onClick:()=>{a(null),u(null),c("")},children:(0,Rc.jsx)(PI,{children:r("embed-dialog.back")})}),(0,Rc.jsx)("div",{className:"tlui-embed__spacer"}),(0,Rc.jsx)(X_,{type:"normal",onClick:n,children:(0,Rc.jsx)(PI,{children:r("embed-dialog.cancel")})}),(0,Rc.jsx)(X_,{type:"primary",disabled:!d,onClick:()=>{d&&(o.putExternalContent({type:"embed",url:l,point:o.getViewportPageCenter(),embed:d.definition}),n())},children:(0,Rc.jsx)(PI,{children:r("embed-dialog.create")})})]})]}):(0,Rc.jsx)(Rc.Fragment,{children:(0,Rc.jsx)(cT,{className:"tlui-embed-dialog__list",children:Yl.map((e=>(0,Rc.jsxs)(X_,{type:"menu",onClick:()=>a(e),children:[(0,Rc.jsx)(PI,{children:e.title}),(0,Rc.jsx)("div",{className:"tlui-embed-dialog__item__image",style:{backgroundImage:"url(".concat(i.embedIcons[e.type],")")}})]},e.type)))})})]})}));var mT=n(3393);async function vT(e,t,n){const{elements:o,files:r}=t,i={shapes:[],rootShapeIds:[],assets:[],schema:e.store.schema.serialize()},s=new Map,a=new Map,l=e.getCurrentPageId(),c=new Map,d=[],u=new Set;o.forEach((e=>{if(c.set(e.id,bl()),null!==e.boundElements)for(const t of e.boundElements)"text"===t.type&&u.add(t.id)}));let h=$i;for(const j of o){if(u.has(j.id))continue;const e=c.get(j.id),t={id:e,typeName:"shape",parentId:l,index:h,x:j.x,y:j.y,rotation:0,isLocked:j.locked,opacity:yT(j.opacity),meta:{}};var p;if(0!==j.angle&&a.set(e,j.angle),j.groupIds&&j.groupIds.length>0)if(s.has(j.groupIds[0]))null===(p=s.get(j.groupIds[0]))||void 0===p||p.push(e);else s.set(j.groupIds[0],[e]);else d.push(e);switch(j.type){case"rectangle":case"ellipse":case"diamond":{var f,g,m;let e="",n="middle";if(null!==j.boundElements)for(const t of j.boundElements)if("text"===t.type){const r=o.find((e=>e.id===t.id));r&&(e=r.text,n=ET[r.textAlign])}const r="transparent"===j.backgroundColor?j.strokeColor:j.backgroundColor;i.shapes.push({...t,type:"geo",props:{geo:j.type,url:null!==(f=j.link)&&void 0!==f?f:"",w:j.width,h:j.height,size:null!==(g=bT[j.strokeWidth])&&void 0!==g?g:"draw",color:null!==(m=_T[r])&&void 0!==m?m:"black",text:e,align:n,dash:PT(j),fill:AT(j)}});break}case"freedraw":var v;i.shapes.push({...t,type:"draw",props:{dash:PT(j),size:bT[j.strokeWidth],color:null!==(v=_T[j.strokeColor])&&void 0!==v?v:"black",segments:[{type:"free",points:j.points.map((e=>{let[t,n,o=.5]=e;return{x:t,y:n,z:o}}))}]}});break;case"line":{var y;const e=j.points[0],n=j.points[j.points.length-1],o=ts(j.points.length);i.shapes.push({...t,type:"line",props:{dash:PT(j),size:bT[j.strokeWidth],color:null!==(y=_T[j.strokeColor])&&void 0!==y?y:"black",spline:j.roundness?"cubic":"line",handles:{start:{id:"start",type:"vertex",index:o[0],x:e[0],y:e[1]},end:{id:"end",type:"vertex",index:o[o.length-1],x:n[0],y:n[1]},...Object.fromEntries(j.points.slice(1,-1).map(((e,t)=>{let[n,r]=e;const i=Np();return[i,{id:i,type:"vertex",index:o[t+1],x:n,y:r}]})))}}});break}case"arrow":{var b,w,x,S,_,k;let e="";if(null!==j.boundElements)for(const t of j.boundElements)if("text"===t.type){const n=o.find((e=>e.id===t.id));n&&(e=n.text)}const n=j.points[0],r=j.points[j.points.length-1],s=c.get(null===(b=j.startBinding)||void 0===b?void 0:b.elementId),a=c.get(null===(w=j.endBinding)||void 0===w?void 0:w.elementId);i.shapes.push({...t,type:"arrow",props:{text:e,bend:TT(j,n,r),dash:PT(j),size:null!==(x=bT[j.strokeWidth])&&void 0!==x?x:"m",color:null!==(S=_T[j.strokeColor])&&void 0!==S?S:"black",start:s?{type:"binding",boundShapeId:s,normalizedAnchor:{x:.5,y:.5},isPrecise:!1,isExact:!1}:{type:"point",x:n[0],y:n[1]},end:a?{type:"binding",boundShapeId:a,normalizedAnchor:{x:.5,y:.5},isPrecise:!1,isExact:!1}:{type:"point",x:r[0],y:r[1]},arrowheadEnd:null!==(_=IT[j.endArrowhead])&&void 0!==_?_:"none",arrowheadStart:null!==(k=IT[j.startArrowhead])&&void 0!==k?k:"none"}});break}case"text":{var C,E;const{size:e,scale:n}=xT(j.fontSize);i.shapes.push({...t,type:"text",props:{size:e,scale:n,font:null!==(C=ST[j.fontFamily])&&void 0!==C?C:"draw",color:null!==(E=_T[j.strokeColor])&&void 0!==E?E:"black",text:j.text,align:ET[j.textAlign]}});break}case"image":{var I;const e=r[j.fileId];if(!e)break;const n=ul.createId();i.assets.push({id:n,typeName:"asset",type:"image",props:{w:j.width,h:j.height,name:null!==(I=j.id)&&void 0!==I?I:"Untitled",isAnimated:!1,mimeType:e.mimeType,src:e.dataURL},meta:{}}),i.shapes.push({...t,type:"image",props:{w:j.width,h:j.height,assetId:n}})}}h=es(h)}const T=null!==n&&void 0!==n?n:e.inputs.shiftKey?e.inputs.currentPagePoint:void 0;e.mark("paste"),e.putContentOntoCurrentPage(i,{point:T,select:!1,preserveIds:!0});for(const j of s.values())if(j.length>1){e.groupShapes(j);const t=e.getShape(j[0]);null!==t&&void 0!==t&&t.parentId&&yl(t.parentId)&&d.push(t.parentId)}for(const[j,O]of a)e.select(j),e.rotateShapesBy([j],O);const P=ai(d.map((t=>e.getShape(t)))),A=mh.Common(P.map((t=>e.getShapePageBounds(t)))),M=e.getViewportPageBounds().center;e.updateShapes(P.map((e=>{var t,n;const o=(null!==(t=e.x)&&void 0!==t?t:0)-(A.x+A.w/2),r=(null!==(n=e.y)&&void 0!==n?n:0)-(A.y+A.h/2);return{id:e.id,type:e.type,x:M.x+o,y:M.y+r}}))),e.setSelectedShapes(d)}const yT=e=>{const t=e/100;return t<.2?.1:t<.4?.25:t<.6?.5:t<.8?.75:1},bT={1:"s",2:"m",3:"l",4:"xl"},wT={16:"s",20:"m",28:"l",36:"xl"};function xT(e){const t=wT[e];return t?{size:t,scale:1}:e<16?{size:"s",scale:e/16}:e>36?{size:"xl",scale:e/36}:{size:"m",scale:1}}const ST={1:"draw",2:"sans",3:"mono"},_T={"#ffffff":"grey","#000000":"black","#343a40":"black","#495057":"grey","#c92a2a":"red","#a61e4d":"light-red","#862e9c":"violet","#5f3dc4":"light-violet","#364fc7":"blue","#1864ab":"light-blue","#0b7285":"light-green","#087f5b":"light-green","#2b8a3e":"green","#5c940d":"light-green","#e67700":"yellow","#d9480f":"orange","#ced4da":"grey","#868e96":"grey","#fa5252":"light-red","#e64980":"red","#be4bdb":"light-violet","#7950f2":"violet","#4c6ef5":"blue","#228be6":"light-blue","#15aabf":"light-green","#12b886":"green","#40c057":"green","#82c91e":"light-green","#fab005":"yellow","#fd7e14":"orange","#212529":"grey"},kT={solid:"draw",dashed:"dashed",dotted:"dotted"},CT={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},ET={left:"start",center:"middle",right:"end"},IT={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"};function TT(e,t,n){let o=0;if(e.points.length>2){const r=new Gc(t[0],t[1]),i=new Gc(n[0],n[1]),s=new Gc(e.points[1][0],e.points[1][1]),a=Gc.Sub(i,r),l=Gc.Per(a),c=Gc.Med(i,r),d=Gc.Sub(c,l),u=Gc.Add(c,l),h=Gc.NearestPointOnLineSegment(d,u,s,!1);o=Gc.Dist(h,c),Gc.Clockwise(h,i,c)&&(o*=-1)}return o}const PT=e=>{var t;let n=null!==(t=kT[e.strokeStyle])&&void 0!==t?t:"draw";return"draw"===n&&0===e.roughness&&(n="solid"),n},AT=e=>{var t;return"transparent"===e.backgroundColor?"none":null!==(t=CT[e.fillStyle])&&void 0!==t?t:"solid"};async function MT(e,t,n,o){const r=(await Promise.all(t.map((async e=>await(await fetch(e)).blob())))).map((e=>new File([e],"tldrawFile",{type:e.type})));e.mark("paste"),await e.putExternalContent({type:"files",files:r,point:n,ignoreParent:!1,sources:o}),t.forEach((e=>URL.revokeObjectURL(e)))}function jT(e,t,n){const o=null!==n&&void 0!==n?n:e.inputs.shiftKey?e.inputs.currentPagePoint:void 0,r=e.getSelectionPageBounds();e.mark("paste"),e.putContentOntoCurrentPage(t,{point:o,select:!0});const i=e.getSelectionPageBounds();r&&i&&null!==r&&void 0!==r&&r.collides(i)&&(e.updateInstanceState({isChangingStyle:!0},{ephemeral:!0}),setTimeout((()=>{e.updateInstanceState({isChangingStyle:!1},{ephemeral:!0})}),150))}async function OT(e,t,n,o){try{if(new URL(t).pathname.match(/\.(png|jpe?g|gif|svg|webp)$/i)){var r;if(null!==(r=(await fetch(t,{method:"HEAD"})).headers.get("content-type"))&&void 0!==r&&r.match(/^image\//))return e.mark("paste"),void MT(e,[t])}}catch(cU){"Failed to fetch"!==cU.message&&console.error(cU)}return e.mark("paste"),await e.putExternalContent({type:"url",point:n,url:t,sources:o})}function LT(e){const t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e.trim(),t.body.textContent||t.body.innerText||""}const BT=["input","select","textarea"];function RT(e){const{activeElement:t}=document;return e.getIsMenuOpen()||t&&(t.getAttribute("contenteditable")||BT.indexOf(t.tagName.toLowerCase())>-1)}async function NT(e){return new Promise(((t,n)=>{const o=new FileReader;o.addEventListener("loadend",(()=>{const e=o.result;t(e)})),o.addEventListener("error",(()=>{n(o.error)})),o.readAsText(e)}))}const DT=e=>e.types.find((e=>e.match(/^image\//))),zT=(e,t,n,o)=>{const r=(e=>{const t=e.split(/[\n\s]/);for(const o of t)try{const e=new URL(o);if("http:"!==e.protocol&&"https:"!==e.protocol)return}catch(n){return}return Ch(t)})(t);if(r)for(const i of r)OT(e,i,n);else(e=>{try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(t){return!1}})(t)?OT(e,t,n):/^<svg/.test(t)?(e.mark("paste"),e.putExternalContent({type:"svg-text",text:t,point:n,sources:o})):(e.mark("paste"),e.putExternalContent({type:"text",text:t,point:n,sources:o}))},FT=async(e,t,n)=>{const o=[];for(const r of t){if(DT(r))for(const e of r.types)e.match(/^image\//)&&o.push({type:"blob",source:r.getType(e)});r.types.includes("text/html")&&o.push({type:"html",source:new Promise((e=>r.getType("text/html").then((t=>NT(t).then(e)))))}),r.types.includes("text/uri-list")&&o.push({type:"url",source:new Promise((e=>r.getType("text/uri-list").then((t=>NT(t).then(e)))))}),r.types.includes("text/plain")&&o.push({type:"text",source:new Promise((e=>r.getType("text/plain").then((t=>NT(t).then(e)))))})}return await UT(e,o,n)};async function UT(e,t,n){const o=t.filter((e=>("file"===e.type||"blob"===e.type)&&null!==e.source));if(o.length){const t=await Promise.all(o.map((e=>e.source))),r=t.filter(Boolean).map((e=>URL.createObjectURL(e)));return await MT(e,r,n)}const r=await Promise.all(t.filter((e=>"file"!==e.type)).map((e=>new Promise((t=>{const n=e;"file"!==n.type?n.source.then((e=>{var o;const r=null===(o=e.match(/<tldraw[^>]*>(.*)<\/tldraw>/))||void 0===o?void 0:o[1];if(r)try{const e=(0,mT.decompressFromBase64)(r);if(null===e)return void t({type:"error",data:e,reason:"found tldraw data comment but could not parse base64"});{const n=JSON.parse(e);return"application/tldraw"!==n.type&&t({type:"error",data:n,reason:"found tldraw data comment but JSON was of a different type: ".concat(n.type)}),"string"===typeof n.data?void t({type:"error",data:n,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"}):void t({type:"tldraw",data:n.data})}}catch(i){return void t({type:"error",data:r,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"})}else{if("html"===n.type)return void t({type:"text",data:e,subtype:"html"});if("url"===n.type)return void t({type:"text",data:e,subtype:"url"});try{const n=JSON.parse(e);return"excalidraw/clipboard"===n.type?void t({type:"excalidraw",data:n}):void t({type:"text",data:e,subtype:"json"})}catch(i){return void t({type:"text",data:e,subtype:"text"})}}t({type:"error",data:e,reason:"unhandled case"})})):t({type:"error",data:null,reason:"unexpected file"})})))));for(const i of r)if("tldraw"===i.type)return void jT(e,i.data,n);for(const i of r)if("excalidraw"===i.type)return void vT(e,i.data,n);for(const i of r)if("text"===i.type&&"html"===i.subtype){const t=(new DOMParser).parseFromString(i.data,"text/html").querySelector("body");if(t&&1===Array.from(t.children).filter((e=>1===e.nodeType)).length&&t.firstElementChild&&"A"===t.firstElementChild.tagName&&t.firstElementChild.hasAttribute("href")&&""!==t.firstElementChild.getAttribute("href")){const o=t.firstElementChild.getAttribute("href");return void zT(e,o,n,r)}if(!r.some((e=>"text"===e.type&&"html"!==e.subtype))&&i.data.trim())return void zT(e,LT(i.data),n,r)}for(const i of r)if("text"===i.type&&"url"===i.subtype)return void OT(e,i.data,n,r);for(const i of r)if("text"===i.type&&"text"===i.subtype&&i.data.trim())return void zT(e,i.data,n,r)}const HT=e=>{const t=e.getContentFromCurrentPage(e.getSelectedShapeIds());if(!t)return void(navigator&&navigator.clipboard&&navigator.clipboard.writeText(""));const n=(0,mT.compressToBase64)(JSON.stringify({type:"application/tldraw",kind:"content",data:t}));if("undefined"!==typeof navigator){var o;const r=t.shapes.map((t=>e.isShapeOfType(t,"text")||e.isShapeOfType(t,"geo")||e.isShapeOfType(t,"arrow")?t.props.text:e.isShapeOfType(t,"bookmark")||e.isShapeOfType(t,"embed")?t.props.url:null)).filter(rs);if(null!==(o=navigator.clipboard)&&void 0!==o&&o.write){const e=new Blob(["<tldraw>".concat(n,"</tldraw>")],{type:"text/html"});let t=r.join(" ");""===t&&(t=" "),navigator.clipboard.write([new ClipboardItem({"text/html":e,"text/plain":new Blob([t],{type:"text/plain"})})])}else navigator.clipboard.writeText&&navigator.clipboard.writeText("<tldraw>".concat(n,"</tldraw>"))}};function VT(){const t=Hc(),n=wI(),o=ri("editor.isFocused",(()=>t.getInstanceState().isFocused),[t]);(0,e.useEffect)((()=>{if(!o)return;const e=()=>{0===t.getSelectedShapeIds().length||null!==t.getEditingShapeId()||RT(t)||(HT(t),n("copy",{source:"kbd"}))};function r(){0===t.getSelectedShapeIds().length||null!==t.getEditingShapeId()||RT(t)||(HT(t),t.deleteShapes(t.getSelectedShapeIds()),n("cut",{source:"kbd"}))}let i=!1;const s=e=>{1===e.button&&(i=!0,requestAnimationFrame((()=>{i=!1})))},a=e=>{i?e.stopPropagation():null!==t.getEditingShapeId()||RT(t)||(e.clipboardData&&!t.inputs.shiftKey?(async(e,t,n)=>{if(null!==e.getEditingShapeId())return;if(!t)throw Error("No clipboard data");const o=[];for(const r of Object.values(t.items))switch(r.kind){case"file":o.push({type:"file",source:new Promise((e=>e(r.getAsFile())))});break;case"string":"text/html"===r.type?o.push({type:"html",source:new Promise((e=>r.getAsString(e)))}):"text/plain"===r.type?o.push({type:"text",source:new Promise((e=>r.getAsString(e)))}):o.push({type:r.type,source:new Promise((e=>r.getAsString(e)))})}UT(e,o,n)})(t,e.clipboardData):navigator.clipboard.read().then((e=>{Array.isArray(e)&&e[0]instanceof ClipboardItem&&FT(t,e,t.inputs.currentPagePoint)})),n("paste",{source:"kbd"}))};return document.addEventListener("copy",e),document.addEventListener("cut",r),document.addEventListener("paste",a),document.addEventListener("pointerup",s),()=>{document.removeEventListener("copy",e),document.removeEventListener("cut",r),document.removeEventListener("paste",a),document.removeEventListener("pointerup",s)}}),[t,n,o])}async function WT(e,t,n){const{type:o,quality:r,scale:i}=n,s=+e.getAttribute("width"),a=+e.getAttribute("height");let[l,c]=await ay(s*i,a*i);l=Math.floor(l),c=Math.floor(c);const d=l/s,u=await KT(e),h=URL.createObjectURL(new Blob([u],{type:"image/svg+xml"})),p=await new Promise((e=>{const n=new Image;n.crossOrigin="anonymous",n.onload=async()=>{t&&await new Promise((e=>setTimeout(e,250)));const o=document.createElement("canvas"),r=o.getContext("2d");o.width=l,o.height=c,r.imageSmoothingEnabled=!0,r.imageSmoothingQuality="high",r.drawImage(n,0,0,l,c),URL.revokeObjectURL(h),e(o)},n.onerror=()=>{e(null)},n.src=h}));if(!p)return null;const f=await new Promise((e=>p.toBlob((t=>{t&&!Hd.throwToBlob.get()||e(null),e(t)}),"image/"+o,r)));if(!f)return null;if("png"===o){const e=new DataView(await f.arrayBuffer());return bi.setPhysChunk(e,d,{type:"image/"+o})}return f}async function KT(e){const t=e.cloneNode(!0);e.setAttribute("width",+e.getAttribute("width")+""),e.setAttribute("height",+e.getAttribute("height")+"");const n=new FileReader,o=Array.from(t.querySelectorAll("image"));for(const r of o){const e=r.getAttribute("xlink:href");if(e&&!e.startsWith("data:")){const t=await(await fetch(e)).blob(),o=await new Promise(((e,o)=>{n.onload=()=>e(n.result),n.onerror=()=>o(n.error),n.readAsDataURL(t)}));r.setAttribute("xlink:href",o)}}return(new XMLSerializer).serializeToString(t).replaceAll("&#10;      ","").replaceAll(/((\s|")[0-9]*\.[0-9]{2})([0-9]*)(\b|"|\))/g,"$1")}async function GT(e,t,n){const o=await e.getSvg(null!==t&&void 0!==t&&t.length?t:[...e.getCurrentPageShapeIds()],{scale:1,background:e.getInstanceState().exportBackground,...n});if(!o)throw new Error("Could not construct SVG.");return o}async function qT(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};switch(n){case"svg":return KT(await GT(e,t,o));case"json":{const n=e.getContentFromCurrentPage(t);return JSON.stringify(n)}default:ui(n)}}async function YT(e){let{editor:t,ids:n,format:o,opts:r={}}=e;switch(o){case"svg":return new Blob([await qT(t,n,"svg",r)],{type:"text/plain"});case"json":return new Blob([await qT(t,n,"json",r)],{type:"text/plain"});case"jpeg":case"png":case"webp":{const e=await WT(await GT(t,n,r),t.environment.isSafari,{type:o,quality:1,scale:2});if(!e)throw new Error("Could not construct image.");return e}default:ui(o)}}const XT={jpeg:"image/jpeg",png:"image/png",webp:"image/webp",json:"text/plain",svg:"text/plain"};function $T(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"svg",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!window.navigator.clipboard)return Promise.reject(new Error("Copy not supported"));if(window.navigator.clipboard.write){const{blobPromise:r,mimeType:i}=function(e,t,n){return{blobPromise:YT({editor:e,ids:t,format:n,opts:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}}),mimeType:XT[n]}}(e,t,n,o);return window.navigator.clipboard.write([new ClipboardItem({[i]:r})]).catch((e=>(console.error(e),r.then((e=>window.navigator.clipboard.write([new ClipboardItem({[i]:e})]))))))}switch(n){case"json":case"svg":return async function(e){var t,n;await(null===(t=navigator.clipboard)||void 0===t||null===(n=t.writeText)||void 0===n?void 0:n.call(t,await e()))}((async()=>qT(e,t,n,o)));case"jpeg":case"png":throw new Error("Copy not supported");default:ui(n)}}const ZT=(0,e.createContext)({});function QT(t){let{children:n}=t;const[o,r]=(0,e.useState)([]),i=(0,e.useCallback)((e=>{var t;const n=null!==(t=e.id)&&void 0!==t?t:Np();return r((t=>[...t.filter((t=>t.id!==e.id)),{...e,id:n}])),n}),[]),s=(0,e.useCallback)((e=>(r((t=>t.filter((t=>t.id!==e)))),e)),[]),a=(0,e.useCallback)((()=>{r((()=>[]))}),[]);return(0,Rc.jsx)(ZT.Provider,{value:{toasts:o,addToast:i,removeToast:s,clearToasts:a},children:n})}function JT(){const t=(0,e.useContext)(ZT);if(!t)throw new Error("useToasts must be used within a ToastsProvider");return t}function eP(){const t=Hc(),{addToast:n}=JT(),o=Y_();return(0,e.useCallback)((function(e){$T(t,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"svg").catch((()=>{n({id:"copy-fail",icon:"warning-triangle",title:o("toast.error.copy-fail.title"),description:o("toast.error.copy-fail.desc")})}))}),[t,n,o])}async function tP(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"png",o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!o&&(o="shapes at ".concat(nP()),1===t.length)){const n=e.getShape(t[0]);var i;if(e.isShapeOfType(n,"frame"))o=null!==(i=n.props.name)&&void 0!==i?i:"frame";else o="".concat(n.id.replace(/:/,"_")," at ").concat(nP())}o+=".".concat(n);const s=await YT({editor:e,ids:t,format:n,opts:r});!function(e){const t=document.createElement("a"),n=URL.createObjectURL(e);t.href=n,t.download=e.name,t.click(),URL.revokeObjectURL(n)}(new File([s],o,{type:s.type}))}function nP(){const e=new Date,t=String(e.getFullYear()).slice(2),n=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0"),s=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(o," ").concat(r,".").concat(i,".").concat(s)}function oP(){const t=Hc(),{addToast:n}=JT(),o=Y_();return(0,e.useCallback)((function(e){tP(t,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png",arguments.length>2?arguments[2]:void 0,{scale:1,background:t.getInstanceState().exportBackground}).catch((e=>{console.error(e.message),n({id:"export-fail",title:o("toast.error.export-fail.title"),description:o("toast.error.export-fail.desc")})}))}),[t,n,o])}function rP(){const t=Hc(),n=(0,e.useRef)();return(0,e.useEffect)((()=>{const e=window.document.createElement("input");async function o(n){const o=n.target.files;o&&0!==o.length&&(await t.putExternalContent({type:"files",files:Array.from(o),point:t.getViewportPageBounds().center,ignoreParent:!1}),e.value="")}return e.type="file",e.accept="image/jpeg,image/png,image/gif,image/svg+xml,video/mp4,video/quicktime",e.multiple=!0,n.current=e,e.addEventListener("change",o),()=>{n.current=void 0,e.removeEventListener("change",o)}}),[t]),(0,e.useCallback)((()=>{var e;null===(e=n.current)||void 0===e||e.click()}),[n])}const iP=(0,e.createContext)({});function sP(t){let{children:n}=t;const o=Hc(),r=wI(),[i,s]=(0,e.useState)([]),a=(0,e.useCallback)((e=>{var t;const n=null!==(t=e.id)&&void 0!==t?t:Np();return s((t=>[...t.filter((t=>t.id!==e.id)),{...e,id:n}])),r("open-menu",{source:"dialog",id:n}),o.addOpenMenu(n),n}),[o,r]),l=(0,e.useCallback)(((e,t)=>(s((n=>n.map((n=>n.id===e?{...n,...t}:n)))),r("open-menu",{source:"dialog",id:e}),o.addOpenMenu(e),e)),[o,r]),c=(0,e.useCallback)((e=>(s((t=>t.filter((t=>{var n;return t.id!==e||(null===(n=t.onClose)||void 0===n||n.call(t),!1)})))),r("close-menu",{source:"dialog",id:e}),o.deleteOpenMenu(e),e)),[o,r]),d=(0,e.useCallback)((()=>{s((e=>(e.forEach((e=>{var t;null===(t=e.onClose)||void 0===t||t.call(e),r("close-menu",{source:"dialog",id:e.id}),o.deleteOpenMenu(e.id)})),[])))}),[o,r]);return(0,Rc.jsx)(iP.Provider,{value:{dialogs:i,addDialog:a,removeDialog:c,clearDialogs:d,updateDialog:l},children:n})}function aP(){const t=(0,e.useContext)(iP);if(!t)throw new Error("useDialogs must be used within a DialogsProvider");return t}const lP=e.createContext({});function cP(e,t){if(0===e.getSelectedShapes().length)return e.getDocumentSettings().name||t}function dP(t){let{overrides:n,children:o}=t;const r=Hc(),{addDialog:i,clearDialogs:s}=aP(),{clearToasts:a}=JT(),l=Y_(),c=rP(),d=function(){const t=Hc(),n=(0,e.useRef)(null),o=(0,e.useRef)(null);return(0,e.useCallback)((async function(){const e=document.createElement("div"),r=document.createElement("style"),i=(e,t)=>{e&&(e.innerHTML=""),t&&document.head.contains(t)&&document.head.removeChild(t),e&&document.body.contains(e)&&document.body.removeChild(e)};i(n.current,o.current),n.current=e,o.current=r;const s="tl-print-surface-".concat(Np());e.className=s,r.innerHTML="\n\t\t\t.".concat(s," {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\t.").concat(s," svg {\n\t\t\t\tmax-width: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t@media print {\t\t\t\t  \n\t\t\t\thtml, body {\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t}\n\n\t\t\t\tbody {\n\t\t\t\t\tposition: relative;\n\t\t\t\t}\n\n\t\t\t\tbody > * {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.tldraw__editor {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s," {\n\t\t\t\t\tdisplay: block !important;\n\t\t\t\t\tbackground: white;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmax-width: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item {\n\t\t\t\t\tpadding: 10mm;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tpage-break-after: always;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\theight: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__main {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tmax-height: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__header {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__footer {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t\ttext-align: right;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__footer__hide {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t").concat("","\n\t\t\t}\n\n\t\t");const a=()=>{document.head.appendChild(r),document.body.appendChild(e)},l=()=>{t.once("change-history",(()=>{i(e,r)}))};function c(t,n,o){try{e.innerHTML+='<div class="'.concat(s,'__item">\n        <div class="').concat(s,'__item__header">\n          ').concat(t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),'\n        </div>\n        <div class="').concat(s,'__item__main">\n          ').concat(o.outerHTML,'\n        </div>\n        <div class="').concat(s,"__item__footer ").concat(s,"__item__footer__").concat(n?"":"hide",'">\n          ').concat(null!==n&&void 0!==n?n:"","\n        </div>\n      </div>")}catch(r){console.error(r)}}function d(){t.environment.isChromeForIos?(a(),window.print()):t.environment.isSafari?(a(),document.execCommand("print",!1)):window.print()}window.addEventListener("beforeprint",a),window.addEventListener("afterprint",l);const u=t.getSelectedShapeIds(),h=t.getCurrentPageId(),p=t.getPages(),f={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"};if(t.getSelectedShapeIds().length>0){const e=await t.getSvg(u,f);if(e){const t=p.find((e=>e.id===h));c("tldraw \u2014 ".concat(null===t||void 0===t?void 0:t.name),null,e),d()}}else{const e=t.getCurrentPage(),n=await t.getSvg(t.getSortedChildIdsForParent(e.id),f);n&&(c("tldraw \u2014 ".concat(e.name),null,n),d())}window.removeEventListener("beforeprint",a),window.removeEventListener("afterprint",l)}),[t])}(),{cut:u,copy:h,paste:p}=function(){const t=Hc(),n=wI(),o=(0,e.useCallback)((function(e){0!==t.getSelectedShapeIds().length&&(HT(t),n("copy",{source:e}))}),[t,n]),r=(0,e.useCallback)((function(e){0!==t.getSelectedShapeIds().length&&(HT(t),t.deleteShapes(t.getSelectedShapeIds()),n("cut",{source:e}))}),[t,n]),i=(0,e.useCallback)((async function(e,o,r){null!==t.getEditingShapeId()||RT(t)||(Array.isArray(e)&&e[0]instanceof ClipboardItem?(FT(t,e,r),n("paste",{source:"menu"})):navigator.clipboard.read().then((e=>{i(e,o,r)})))}),[t,n]);return{copy:o,cut:r,paste:i}}(),f=eP(),g=oP(),m=l("document.default-name"),v=wI(),y=e.useMemo((()=>{function e(){return r.isIn("select")||(r.complete(),r.setCurrentTool("select")),!1}function t(){return r.isIn("select")&&r.getSelectedShapeIds().length>0}const o=[{id:"edit-link",label:"action.edit-link",icon:"link",onSelect(n){t()&&(e()||(v("edit-link",{source:n}),r.mark("edit-link"),i({component:pT})))}},{id:"insert-embed",label:"action.insert-embed",kbd:"$i",onSelect(e){v("insert-embed",{source:e}),i({component:gT})}},{id:"insert-media",label:"action.insert-media",kbd:"$u",onSelect(e){v("insert-media",{source:e}),c()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"$z",onSelect(e){v("undo",{source:e}),r.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"$!z",onSelect(e){v("redo",{source:e}),r.redo()}},{id:"export-as-svg",label:{default:"action.export-as-svg",menu:"action.export-as-svg.short","context-menu":"action.export-as-svg.short"},readonlyOk:!0,onSelect(e){v("export-as",{format:"svg",source:e}),g(r.getSelectedShapeIds(),"svg",cP(r,m))}},{id:"export-as-png",label:{default:"action.export-as-png",menu:"action.export-as-png.short","context-menu":"action.export-as-png.short"},readonlyOk:!0,onSelect(e){v("export-as",{format:"png",source:e}),g(r.getSelectedShapeIds(),"png",cP(r,m))}},{id:"export-as-json",label:{default:"action.export-as-json",menu:"action.export-as-json.short","context-menu":"action.export-as-json.short"},readonlyOk:!0,onSelect(e){v("export-as",{format:"json",source:e}),g(r.getSelectedShapeIds(),"json",cP(r,m))}},{id:"export-all-as-svg",label:{default:"action.export-all-as-svg",menu:"action.export-all-as-svg.short","context-menu":"action.export-all-as-svg.short"},readonlyOk:!0,onSelect(e){v("export-all-as",{format:"svg",source:e}),g(Array.from(r.getCurrentPageShapeIds()),"svg",cP(r,m))}},{id:"export-all-as-png",label:{default:"action.export-all-as-png",menu:"action.export-all-as-png.short","context-menu":"action.export-all-as-png.short"},readonlyOk:!0,onSelect(e){v("export-all-as",{format:"png",source:e}),g(Array.from(r.getCurrentPageShapeIds()),"png",cP(r,m))}},{id:"export-all-as-json",label:{default:"action.export-all-as-json",menu:"action.export-all-as-json.short","context-menu":"action.export-all-as-json.short"},readonlyOk:!0,onSelect(e){v("export-all-as",{format:"json",source:e}),g(Array.from(r.getCurrentPageShapeIds()),"json",cP(r,m))}},{id:"copy-as-svg",label:{default:"action.copy-as-svg",menu:"action.copy-as-svg.short","context-menu":"action.copy-as-svg.short"},kbd:"$!c",readonlyOk:!0,onSelect(e){v("copy-as",{format:"svg",source:e}),f(r.getSelectedShapeIds(),"svg")}},{id:"copy-as-png",label:{default:"action.copy-as-png",menu:"action.copy-as-png.short","context-menu":"action.copy-as-png.short"},readonlyOk:!0,onSelect(e){v("copy-as",{format:"png",source:e}),f(r.getSelectedShapeIds(),"png")}},{id:"copy-as-json",label:{default:"action.copy-as-json",menu:"action.copy-as-json.short","context-menu":"action.copy-as-json.short"},readonlyOk:!0,onSelect(e){v("copy-as",{format:"json",source:e}),f(r.getSelectedShapeIds(),"json")}},{id:"toggle-auto-size",label:"action.toggle-auto-size",onSelect(n){t()&&(e()||(v("toggle-auto-size",{source:n}),r.mark("toggling auto size"),r.updateShapes(r.getSelectedShapes().filter((e=>r.isShapeOfType(e,"text")&&!1===e.props.autoSize)).map((e=>({id:e.id,type:e.type,props:{...e.props,w:8,autoSize:!0}}))))))}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect(e){v("open-embed-link",{source:e});const t=r.getSelectedShapeIds(),n="No embed shapes selected";if(1!==t.length)return void console.error(n);const o=r.getShape(t[0]);o&&r.isShapeOfType(o,"embed")?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";jp.openWindow(e,t)}(o.props.url,"_blank"):console.error(n)}},{id:"select-zoom-tool",readonlyOk:!0,kbd:"z",onSelect(e){var t;if("zoom"!==(null===(t=r.root.getCurrent())||void 0===t?void 0:t.id)&&(v("zoom-tool",{source:e}),!r.inputs.shiftKey&&!r.inputs.ctrlKey)){var n;const e=r.root.getCurrent();e&&"idle"===(null===(n=e.getCurrent())||void 0===n?void 0:n.id)&&r.setCurrentTool("zoom",{onInteractionEnd:e.id,maskAs:"zoom"})}}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",onSelect(n){t()&&(e()||r.batch((()=>{v("convert-to-bookmark",{source:n});const e=r.getSelectedShapes(),t=[],o=[];for(const n of e){if(!n||!r.isShapeOfType(n,"embed")||!n.props.url)continue;const e=new Gc(n.x,n.y);e.rot(-n.rotation),e.add(new Gc(n.props.w/2-150,n.props.h/2-160)),e.rot(n.rotation);const i={id:bl(),type:"bookmark",rotation:n.rotation,x:e.x,y:e.y,opacity:1,props:{url:n.props.url}};t.push(i),o.push(n.id)}r.mark("convert shapes to bookmark"),r.deleteShapes(o),r.createShapes(t)})))}},{id:"convert-to-embed",label:"action.convert-to-embed",onSelect(n){t()&&(e()||(v("convert-to-embed",{source:n}),r.batch((()=>{const e=ai(r.getSelectedShapeIds().map((e=>r.getShape(e)))),t=[],n=[];for(const o of e){if(!r.isShapeOfType(o,"bookmark"))continue;const{url:e}=o.props,i=fy(o.props.url);if(!i)continue;if(!i.definition)continue;const{width:s,height:a}=i.definition,l=new Gc(o.x,o.y);l.rot(-o.rotation),l.add(new Gc(o.props.w/2-s/2,o.props.h/2-a/2)),l.rot(o.rotation);const c={id:bl(),type:"embed",x:l.x,y:l.y,rotation:o.rotation,props:{url:e,w:s,h:a}};t.push(c),n.push(o.id)}r.mark("convert shapes to embed"),r.deleteShapes(n),r.createShapes(t)}))))}},{id:"duplicate",kbd:"$d",label:"action.duplicate",icon:"duplicate",onSelect(n){if(!t())return;if(e())return;v("duplicate-shapes",{source:n});const o=r.getInstanceState();let i,s;if(o.duplicateProps)i=o.duplicateProps.shapeIds,s=o.duplicateProps.offset;else{i=r.getSelectedShapeIds();const e=mh.Common(ai(i.map((e=>r.getShapePageBounds(e)))));s=o.canMoveCamera?{x:e.width+10,y:0}:{x:16/r.getZoomLevel(),y:16/r.getZoomLevel()}}r.mark("duplicate shapes"),r.duplicateShapes(i,s),o.duplicateProps&&r.updateInstanceState({duplicateProps:{...o.duplicateProps,shapeIds:r.getSelectedShapeIds()}})}},{id:"ungroup",label:"action.ungroup",kbd:"$!g",icon:"ungroup",onSelect(n){t()&&(e()||(v("ungroup-shapes",{source:n}),r.mark("ungroup"),r.ungroupShapes(r.getSelectedShapeIds())))}},{id:"group",label:"action.group",kbd:"$g",icon:"group",onSelect(n){if(!t())return;if(e())return;v("group-shapes",{source:n});const o=r.getOnlySelectedShape();o&&r.isShapeOfType(o,"group")?(r.mark("ungroup"),r.ungroupShapes(r.getSelectedShapeIds())):(r.mark("group"),r.groupShapes(r.getSelectedShapeIds()))}},{id:"remove-frame",label:"action.remove-frame",kbd:"$!f",onSelect(e){if(!t())return;v("remove-frame",{source:e});const n=r.getSelectedShapes();n.length>0&&n.every((e=>r.isShapeOfType(e,"frame")))&&(r.mark("remove-frame"),function(e,t){const n=ai(t.map((t=>e.getShape(t))).filter((t=>t&&e.isShapeOfType(t,"frame"))));if(!n.length)return;const o=[];e.batch((()=>{n.map((t=>{const n=e.getSortedChildIdsForParent(t.id);n.length&&(e.reparentShapes(n,t.parentId,t.index),o.push(...n))})),e.setSelectedShapes(o),e.deleteShapes(t)}))}(r,n.map((e=>e.id))))}},{id:"fit-frame-to-content",label:"action.fit-frame-to-content",onSelect(e){if(!t())return;v("fit-frame-to-content",{source:e});const n=r.getOnlySelectedShape();n&&r.isShapeOfType(n,"frame")&&(r.mark("fit-frame-to-content"),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e.getShape(t);if(!o)return;const r=e.getSortedChildIdsForParent(o.id),i=ai(r.map((t=>e.getShape(t))));if(!i.length)return;const s=mh.FromPoints(i.flatMap((t=>{const n=e.getShapeGeometry(t.id);return e.getShapeLocalTransform(t).applyToPoints(n.vertices)}))),{padding:a=TI}=n,l=s.w+2*a,c=s.h+2*a,d=a-s.minX,u=a-s.minY;if(0===d&&0===u&&o.props.w===l&&o.props.h===c)return;const h=new Gc(d,u).rot(o.rotation);e.batch((()=>{const t=r.map((t=>{const n=e.getShape(t);return{id:n.id,type:n.type,x:n.x+d,y:n.y+u}}));t.push({id:o.id,type:o.type,x:o.x-h.x,y:o.y-h.y,props:{w:l,h:c}}),e.updateShapes(t)}))}(r,n.id))}},{id:"align-left",label:"action.align-left",kbd:"?A",icon:"align-left",onSelect(n){t()&&(e()||(v("align-shapes",{operation:"left",source:n}),r.mark("align left"),r.alignShapes(r.getSelectedShapeIds(),"left")))}},{id:"align-center-horizontal",label:{default:"action.align-center-horizontal","context-menu":"action.align-center-horizontal.short"},kbd:"?H",icon:"align-center-horizontal",onSelect(n){t()&&(e()||(v("align-shapes",{operation:"center-horizontal",source:n}),r.mark("align center horizontal"),r.alignShapes(r.getSelectedShapeIds(),"center-horizontal")))}},{id:"align-right",label:"action.align-right",kbd:"?D",icon:"align-right",onSelect(n){t()&&(e()||(v("align-shapes",{operation:"right",source:n}),r.mark("align right"),r.alignShapes(r.getSelectedShapeIds(),"right")))}},{id:"align-center-vertical",label:{default:"action.align-center-vertical","context-menu":"action.align-center-vertical.short"},kbd:"?V",icon:"align-center-vertical",onSelect(n){t()&&(e()||(v("align-shapes",{operation:"center-vertical",source:n}),r.mark("align center vertical"),r.alignShapes(r.getSelectedShapeIds(),"center-vertical")))}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"?W",onSelect(n){t()&&(e()||(v("align-shapes",{operation:"top",source:n}),r.mark("align top"),r.alignShapes(r.getSelectedShapeIds(),"top")))}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"?S",onSelect(n){t()&&(e()||(v("align-shapes",{operation:"bottom",source:n}),r.mark("align bottom"),r.alignShapes(r.getSelectedShapeIds(),"bottom")))}},{id:"distribute-horizontal",label:{default:"action.distribute-horizontal","context-menu":"action.distribute-horizontal.short"},icon:"distribute-horizontal",kbd:"?!h",onSelect(n){t()&&(e()||(v("distribute-shapes",{operation:"horizontal",source:n}),r.mark("distribute horizontal"),r.distributeShapes(r.getSelectedShapeIds(),"horizontal")))}},{id:"distribute-vertical",label:{default:"action.distribute-vertical","context-menu":"action.distribute-vertical.short"},icon:"distribute-vertical",kbd:"?!V",onSelect(n){t()&&(e()||(v("distribute-shapes",{operation:"vertical",source:n}),r.mark("distribute vertical"),r.distributeShapes(r.getSelectedShapeIds(),"vertical")))}},{id:"stretch-horizontal",label:{default:"action.stretch-horizontal","context-menu":"action.stretch-horizontal.short"},icon:"stretch-horizontal",onSelect(n){t()&&(e()||(v("stretch-shapes",{operation:"horizontal",source:n}),r.mark("stretch horizontal"),r.stretchShapes(r.getSelectedShapeIds(),"horizontal")))}},{id:"stretch-vertical",label:{default:"action.stretch-vertical","context-menu":"action.stretch-vertical.short"},icon:"stretch-vertical",onSelect(n){t()&&(e()||(v("stretch-shapes",{operation:"vertical",source:n}),r.mark("stretch vertical"),r.stretchShapes(r.getSelectedShapeIds(),"vertical")))}},{id:"flip-horizontal",label:{default:"action.flip-horizontal","context-menu":"action.flip-horizontal.short"},kbd:"!h",onSelect(n){t()&&(e()||(v("flip-shapes",{operation:"horizontal",source:n}),r.mark("flip horizontal"),r.flipShapes(r.getSelectedShapeIds(),"horizontal")))}},{id:"flip-vertical",label:{default:"action.flip-vertical","context-menu":"action.flip-vertical.short"},kbd:"!v",onSelect(n){t()&&(e()||(v("flip-shapes",{operation:"vertical",source:n}),r.mark("flip vertical"),r.flipShapes(r.getSelectedShapeIds(),"vertical")))}},{id:"pack",label:"action.pack",icon:"pack",onSelect(n){t()&&(e()||(v("pack-shapes",{source:n}),r.mark("pack"),r.packShapes(r.getSelectedShapeIds(),16)))}},{id:"stack-vertical",label:{default:"action.stack-vertical","context-menu":"action.stack-vertical.short"},icon:"stack-vertical",onSelect(n){t()&&(e()||(v("stack-shapes",{operation:"vertical",source:n}),r.mark("stack-vertical"),r.stackShapes(r.getSelectedShapeIds(),"vertical",16)))}},{id:"stack-horizontal",label:{default:"action.stack-horizontal","context-menu":"action.stack-horizontal.short"},icon:"stack-horizontal",onSelect(n){t()&&(e()||(v("stack-shapes",{operation:"horizontal",source:n}),r.mark("stack-horizontal"),r.stackShapes(r.getSelectedShapeIds(),"horizontal",16)))}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",onSelect(n){t()&&(e()||(v("reorder-shapes",{operation:"toFront",source:n}),r.mark("bring to front"),r.bringToFront(r.getSelectedShapeIds())))}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"?]",onSelect(n){t()&&(e()||(v("reorder-shapes",{operation:"forward",source:n}),r.mark("bring forward"),r.bringForward(r.getSelectedShapeIds())))}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"?[",onSelect(n){t()&&(e()||(v("reorder-shapes",{operation:"backward",source:n}),r.mark("send backward"),r.sendBackward(r.getSelectedShapeIds())))}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",onSelect(n){t()&&(e()||(v("reorder-shapes",{operation:"toBack",source:n}),r.mark("send to back"),r.sendToBack(r.getSelectedShapeIds())))}},{id:"cut",label:"action.cut",kbd:"$x",onSelect(n){t()&&(e()||(r.mark("cut"),u(n)))}},{id:"copy",label:"action.copy",kbd:"$c",readonlyOk:!0,onSelect(n){t()&&(e()||h(n))}},{id:"paste",label:"action.paste",kbd:"$v",onSelect(e){var t;null===(t=navigator.clipboard)||void 0===t||t.read().then((t=>{p(t,e,"context-menu"===e?r.inputs.currentPagePoint:void 0)}))}},{id:"select-all",label:"action.select-all",kbd:"$a",readonlyOk:!0,onSelect(t){r.batch((()=>{e()||(v("select-all-shapes",{source:t}),r.mark("select all kbd"),r.selectAll())}))}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect(n){t()&&(e()||(v("select-none-shapes",{source:n}),r.mark("select none"),r.selectNone()))}},{id:"delete",label:"action.delete",kbd:"\u232b,del,backspace",icon:"trash",onSelect(n){t()&&(e()||(v("delete-shapes",{source:n}),r.mark("delete"),r.deleteShapes(r.getSelectedShapeIds())))}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",onSelect(n){if(!t())return;if(e())return;v("rotate-cw",{source:n}),r.mark("rotate-cw");const o=r.getSelectionRotation()%(Zc/2),i=nd(o,0)||nd(o,Zc/2);r.rotateShapesBy(r.getSelectedShapeIds(),Zc/2-(i?0:o))}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",onSelect(n){if(!t())return;if(e())return;v("rotate-ccw",{source:n}),r.mark("rotate-ccw");const o=r.getSelectionRotation()%(Zc/2),i=nd(o,0);r.rotateShapesBy(r.getSelectedShapeIds(),i?-Zc/2:-o)}},{id:"zoom-in",label:"action.zoom-in",kbd:"$=,=",readonlyOk:!0,onSelect(e){v("zoom-in",{source:e}),r.zoomIn(r.getViewportScreenCenter(),{duration:kd})}},{id:"zoom-out",label:"action.zoom-out",kbd:"$-,-",readonlyOk:!0,onSelect(e){v("zoom-out",{source:e}),r.zoomOut(r.getViewportScreenCenter(),{duration:kd})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"!0",readonlyOk:!0,onSelect(e){v("reset-zoom",{source:e}),r.resetZoom(r.getViewportScreenCenter(),{duration:kd})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"!1",readonlyOk:!0,onSelect(e){v("zoom-to-fit",{source:e}),r.zoomToFit({duration:kd})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"!2",readonlyOk:!0,onSelect(n){t()&&(e()||(v("zoom-to-selection",{source:n}),r.zoomToSelection({duration:kd})))}},{id:"toggle-snap-mode",label:{default:"action.toggle-snap-mode",menu:"action.toggle-snap-mode.menu"},onSelect(e){v("toggle-snap-mode",{source:e}),r.user.updateUserPreferences({isSnapMode:!r.user.getIsSnapMode()})},checkbox:!0},{id:"toggle-dark-mode",label:{default:"action.toggle-dark-mode",menu:"action.toggle-dark-mode.menu"},kbd:"$/",readonlyOk:!0,onSelect(e){v("toggle-dark-mode",{source:e}),r.user.updateUserPreferences({isDarkMode:!r.user.getIsDarkMode()})},checkbox:!0},{id:"toggle-wrap-mode",label:{default:"action.toggle-wrap-mode",menu:"action.toggle-wrap-mode.menu"},readonlyOk:!0,onSelect(e){v("toggle-wrap-mode",{source:e}),r.user.updateUserPreferences({isWrapMode:!r.user.getIsWrapMode()})},checkbox:!0},{id:"toggle-reduce-motion",label:{default:"action.toggle-reduce-motion",menu:"action.toggle-reduce-motion.menu"},readonlyOk:!0,onSelect(e){v("toggle-reduce-motion",{source:e}),r.user.updateUserPreferences({animationSpeed:0===r.user.getAnimationSpeed()?1:0})},checkbox:!0},{id:"toggle-edge-scrolling",label:{default:"action.toggle-edge-scrolling",menu:"action.toggle-edge-scrolling.menu"},readonlyOk:!0,onSelect(e){v("toggle-edge-scrolling",{source:e}),r.user.updateUserPreferences({edgeScrollSpeed:0===r.user.getEdgeScrollSpeed()?1:0})},checkbox:!0},{id:"toggle-transparent",label:{default:"action.toggle-transparent",menu:"action.toggle-transparent.menu","context-menu":"action.toggle-transparent.context-menu"},readonlyOk:!0,onSelect(e){v("toggle-transparent",{source:e}),r.updateInstanceState({exportBackground:!r.getInstanceState().exportBackground},{ephemeral:!0})},checkbox:!0},{id:"toggle-tool-lock",label:{default:"action.toggle-tool-lock",menu:"action.toggle-tool-lock.menu"},kbd:"q",onSelect(e){v("toggle-tool-lock",{source:e}),r.updateInstanceState({isToolLocked:!r.getInstanceState().isToolLocked})},checkbox:!0},{id:"unlock-all",label:"action.unlock-all",onSelect(e){v("unlock-all",{source:e});const t=[];for(const n of r.getCurrentPageShapes())n.isLocked&&t.push({id:n.id,type:n.type,isLocked:!1});t.length>0&&r.updateShapes(t)}},{id:"toggle-focus-mode",label:{default:"action.toggle-focus-mode",menu:"action.toggle-focus-mode.menu"},readonlyOk:!0,kbd:"$.",checkbox:!0,onSelect(e){requestAnimationFrame((()=>{r.batch((()=>{v("toggle-focus-mode",{source:e}),s(),a(),r.updateInstanceState({isFocusMode:!r.getInstanceState().isFocusMode})}))}))}},{id:"toggle-grid",label:{default:"action.toggle-grid",menu:"action.toggle-grid.menu"},readonlyOk:!0,kbd:"$'",onSelect(e){v("toggle-grid-mode",{source:e}),r.updateInstanceState({isGridMode:!r.getInstanceState().isGridMode})},checkbox:!0},{id:"toggle-debug-mode",label:{default:"action.toggle-debug-mode",menu:"action.toggle-debug-mode.menu"},readonlyOk:!0,onSelect(e){v("toggle-debug-mode",{source:e}),r.updateInstanceState({isDebugMode:!r.getInstanceState().isDebugMode})},checkbox:!0},{id:"print",label:"action.print",kbd:"$p",readonlyOk:!0,onSelect(e){v("print",{source:e}),d()}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect(e){v("exit-pen-mode",{source:e}),r.updateInstanceState({isPenMode:!1})}},{id:"stop-following",label:"action.stop-following",icon:"cross-2",readonlyOk:!0,onSelect(e){v("stop-following",{source:e}),r.stopFollowingUser()}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect(e){v("zoom-to-content",{source:e}),r.zoomToContent()}},{id:"toggle-lock",label:"action.toggle-lock",kbd:"!l",onSelect(e){r.mark("locking"),v("toggle-lock",{source:e}),r.toggleLock(r.getSelectedShapeIds())}},{id:"new-page",label:"context.pages.new-page",onSelect(e){const t=ka.createId(),n=r.getSelectedShapeIds();r.batch((()=>{r.mark("move_shapes_to_page"),r.createPage({name:l("page-menu.new-page-initial-name"),id:t}),r.moveShapesToPage(n,t)})),v("new-page",{source:e})}}],y=function(e){return Object.fromEntries(e.map((e=>[e.id,e])))}(o);return n?n(r,y,void 0):y}),[r,v,n,i,c,g,f,u,h,p,s,a,d,l,m]);return(0,Rc.jsx)(lP.Provider,{value:y,children:o})}function uP(){const t=e.useContext(lP);if(!t)throw new Error("useTools must be used within a ToolProvider");return t}function hP(e,t){var n;return e?"string"===typeof e?e:t?null!==(n=e[t])&&void 0!==n?n:e.default:void 0:void 0}const pP=(0,e.createContext)(void 0);function fP(t){const n=(0,e.useContext)(pP);return t||n||"ltr"}const gP="rovingFocusGroup.onEntryFocus",mP={bubbles:!1,cancelable:!0},vP="RovingFocusGroup",[yP,bP,wP]=PS(vP),[xP,SP]=SS(vP,[wP]),[_P,kP]=xP(vP),CP=(0,e.forwardRef)(((t,n)=>(0,e.createElement)(yP.Provider,{scope:t.__scopeRovingFocusGroup},(0,e.createElement)(yP.Slot,{scope:t.__scopeRovingFocusGroup},(0,e.createElement)(EP,yS({},t,{ref:n})))))),EP=(0,e.forwardRef)(((t,n)=>{const{__scopeRovingFocusGroup:o,orientation:r,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,...u}=t,h=(0,e.useRef)(null),p=xS(n,h),f=fP(s),[g=null,m]=YS({prop:a,defaultProp:l,onChange:c}),[v,y]=(0,e.useState)(!1),b=jS(d),w=bP(o),x=(0,e.useRef)(!1),[S,_]=(0,e.useState)(0);return(0,e.useEffect)((()=>{const e=h.current;if(e)return e.addEventListener(gP,b),()=>e.removeEventListener(gP,b)}),[b]),(0,e.createElement)(_P,{scope:o,orientation:r,dir:f,loop:i,currentTabStopId:g,onItemFocus:(0,e.useCallback)((e=>m(e)),[m]),onItemShiftTab:(0,e.useCallback)((()=>y(!0)),[]),onFocusableItemAdd:(0,e.useCallback)((()=>_((e=>e+1))),[]),onFocusableItemRemove:(0,e.useCallback)((()=>_((e=>e-1))),[])},(0,e.createElement)(AS.div,yS({tabIndex:v||0===S?-1:0,"data-orientation":r},u,{ref:p,style:{outline:"none",...t.style},onMouseDown:bS(t.onMouseDown,(()=>{x.current=!0})),onFocus:bS(t.onFocus,(e=>{const t=!x.current;if(e.target===e.currentTarget&&t&&!v){const t=new CustomEvent(gP,mP);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=w().filter((e=>e.focusable));AP([e.find((e=>e.active)),e.find((e=>e.id===g)),...e].filter(Boolean).map((e=>e.ref.current)))}}x.current=!1})),onBlur:bS(t.onBlur,(()=>y(!1)))})))})),IP="RovingFocusGroupItem",TP=(0,e.forwardRef)(((t,n)=>{const{__scopeRovingFocusGroup:o,focusable:r=!0,active:i=!1,tabStopId:s,...a}=t,l=pk(),c=s||l,d=kP(IP,o),u=d.currentTabStopId===c,h=bP(o),{onFocusableItemAdd:p,onFocusableItemRemove:f}=d;return(0,e.useEffect)((()=>{if(r)return p(),()=>f()}),[r,p,f]),(0,e.createElement)(yP.ItemSlot,{scope:o,id:c,focusable:r,active:i},(0,e.createElement)(AS.span,yS({tabIndex:u?0:-1,"data-orientation":d.orientation},a,{ref:n,onMouseDown:bS(t.onMouseDown,(e=>{r?d.onItemFocus(c):e.preventDefault()})),onFocus:bS(t.onFocus,(()=>d.onItemFocus(c))),onKeyDown:bS(t.onKeyDown,(e=>{if("Tab"===e.key&&e.shiftKey)return void d.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const o=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(o)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(o)?void 0:PP[o]}(e,d.orientation,d.dir);if(void 0!==t){e.preventDefault();let n=h().filter((e=>e.focusable)).map((e=>e.ref.current));if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();const o=n.indexOf(e.currentTarget);n=d.loop?function(e,t){return e.map(((n,o)=>e[(t+o)%e.length]))}(n,o+1):n.slice(o+1)}setTimeout((()=>AP(n)))}}))})))})),PP={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function AP(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}const MP=CP,jP=TP,OP=["Enter"," "],LP=["ArrowUp","PageDown","End"],BP=["ArrowDown","PageUp","Home",...LP],RP={ltr:[...OP,"ArrowRight"],rtl:[...OP,"ArrowLeft"]},NP={ltr:["ArrowLeft"],rtl:["ArrowRight"]},DP="Menu",[zP,FP,UP]=PS(DP),[HP,VP]=SS(DP,[UP,LC,SP]),WP=LC(),KP=SP(),[GP,qP]=HP(DP),[YP,XP]=HP(DP),$P=t=>{const{__scopeMenu:n,open:o=!1,children:r,dir:i,onOpenChange:s,modal:a=!0}=t,l=WP(n),[c,d]=(0,e.useState)(null),u=(0,e.useRef)(!1),h=jS(s),p=fP(i);return(0,e.useEffect)((()=>{const e=()=>{u.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}}),[]),(0,e.createElement)(qC,l,(0,e.createElement)(GP,{scope:n,open:o,onOpenChange:h,content:c,onContentChange:d},(0,e.createElement)(YP,{scope:n,onClose:(0,e.useCallback)((()=>h(!1)),[h]),isUsingKeyboardRef:u,dir:p,modal:a},r)))},ZP=(0,e.forwardRef)(((t,n)=>{const{__scopeMenu:o,...r}=t,i=WP(o);return(0,e.createElement)(YC,yS({},i,r,{ref:n}))})),QP="MenuPortal",[JP,eA]=HP(QP,{forceMount:void 0}),tA=t=>{const{__scopeMenu:n,forceMount:o,children:r,container:i}=t,s=qP(QP,n);return(0,e.createElement)(JP,{scope:n,forceMount:o},(0,e.createElement)(GS,{present:o||s.open},(0,e.createElement)(WS,{asChild:!0,container:i},r)))},nA="MenuContent",[oA,rA]=HP(nA),iA=(0,e.forwardRef)(((t,n)=>{const o=eA(nA,t.__scopeMenu),{forceMount:r=o.forceMount,...i}=t,s=qP(nA,t.__scopeMenu),a=XP(nA,t.__scopeMenu);return(0,e.createElement)(zP.Provider,{scope:t.__scopeMenu},(0,e.createElement)(GS,{present:r||s.open},(0,e.createElement)(zP.Slot,{scope:t.__scopeMenu},a.modal?(0,e.createElement)(sA,yS({},i,{ref:n})):(0,e.createElement)(aA,yS({},i,{ref:n})))))})),sA=(0,e.forwardRef)(((t,n)=>{const o=qP(nA,t.__scopeMenu),r=(0,e.useRef)(null),i=xS(n,r);return(0,e.useEffect)((()=>{const e=r.current;if(e)return oE(e)}),[]),(0,e.createElement)(lA,yS({},t,{ref:i,trapFocus:o.open,disableOutsidePointerEvents:o.open,disableOutsideScroll:!0,onFocusOutside:bS(t.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1}),onDismiss:()=>o.onOpenChange(!1)}))})),aA=(0,e.forwardRef)(((t,n)=>{const o=qP(nA,t.__scopeMenu);return(0,e.createElement)(lA,yS({},t,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>o.onOpenChange(!1)}))})),lA=(0,e.forwardRef)(((t,n)=>{const{__scopeMenu:o,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:f,disableOutsideScroll:g,...m}=t,v=qP(nA,o),y=XP(nA,o),b=WP(o),w=KP(o),x=FP(o),[S,_]=(0,e.useState)(null),k=(0,e.useRef)(null),C=xS(n,k,v.onContentChange),E=(0,e.useRef)(0),I=(0,e.useRef)(""),T=(0,e.useRef)(0),P=(0,e.useRef)(null),A=(0,e.useRef)("right"),M=(0,e.useRef)(0),j=g?qE:e.Fragment,O=g?{as:kS,allowPinchZoom:!0}:void 0,L=e=>{var t,n;const o=I.current+e,r=x().filter((e=>!e.disabled)),i=document.activeElement,s=null===(t=r.find((e=>e.ref.current===i)))||void 0===t?void 0:t.textValue,a=function(e,t,n){const o=t.length>1&&Array.from(t).every((e=>e===t[0])),r=o?t[0]:t,i=n?e.indexOf(n):-1;let s=function(e,t){return e.map(((n,o)=>e[(t+o)%e.length]))}(e,Math.max(i,0));1===r.length&&(s=s.filter((e=>e!==n)));const a=s.find((e=>e.toLowerCase().startsWith(r.toLowerCase())));return a!==n?a:void 0}(r.map((e=>e.textValue)),o,s),l=null===(n=r.find((e=>e.textValue===a)))||void 0===n?void 0:n.ref.current;!function e(t){I.current=t,window.clearTimeout(E.current),""!==t&&(E.current=window.setTimeout((()=>e("")),1e3))}(o),l&&setTimeout((()=>l.focus()))};(0,e.useEffect)((()=>()=>window.clearTimeout(E.current)),[]),J_();const B=(0,e.useCallback)((e=>{var t,n;return A.current===(null===(t=P.current)||void 0===t?void 0:t.side)&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:o}=e;let r=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const e=t[i].x,a=t[i].y,l=t[s].x,c=t[s].y;a>o!==c>o&&n<(l-e)*(o-a)/(c-a)+e&&(r=!r)}return r}(n,t)}(e,null===(n=P.current)||void 0===n?void 0:n.area)}),[]);return(0,e.createElement)(oA,{scope:o,searchRef:I,onItemEnter:(0,e.useCallback)((e=>{B(e)&&e.preventDefault()}),[B]),onItemLeave:(0,e.useCallback)((e=>{var t;B(e)||(null===(t=k.current)||void 0===t||t.focus(),_(null))}),[B]),onTriggerLeave:(0,e.useCallback)((e=>{B(e)&&e.preventDefault()}),[B]),pointerGraceTimerRef:T,onPointerGraceIntentChange:(0,e.useCallback)((e=>{P.current=e}),[])},(0,e.createElement)(j,O,(0,e.createElement)(rk,{asChild:!0,trapped:i,onMountAutoFocus:bS(s,(e=>{var t;e.preventDefault(),null===(t=k.current)||void 0===t||t.focus()})),onUnmountAutoFocus:a},(0,e.createElement)(DS,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:f},(0,e.createElement)(MP,yS({asChild:!0},w,{dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:_,onEntryFocus:bS(c,(e=>{y.isUsingKeyboardRef.current||e.preventDefault()}))}),(0,e.createElement)(XC,yS({role:"menu","aria-orientation":"vertical","data-state":PA(v.open),"data-radix-menu-content":"",dir:y.dir},b,m,{ref:C,style:{outline:"none",...m.style},onKeyDown:bS(m.onKeyDown,(e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,o=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&o&&L(e.key));const r=k.current;if(e.target!==r)return;if(!BP.includes(e.key))return;e.preventDefault();const i=x().filter((e=>!e.disabled)).map((e=>e.ref.current));LP.includes(e.key)&&i.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(i)})),onBlur:bS(t.onBlur,(e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(E.current),I.current="")})),onPointerMove:bS(t.onPointerMove,jA((e=>{const t=e.target,n=M.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>M.current?"right":"left";A.current=t,M.current=e.clientX}})))})))))))})),cA=(0,e.forwardRef)(((t,n)=>{const{__scopeMenu:o,...r}=t;return(0,e.createElement)(AS.div,yS({role:"group"},r,{ref:n}))})),dA="MenuItem",uA="menu.itemSelect",hA=(0,e.forwardRef)(((t,n)=>{const{disabled:o=!1,onSelect:r,...i}=t,s=(0,e.useRef)(null),a=XP(dA,t.__scopeMenu),l=rA(dA,t.__scopeMenu),c=xS(n,s),d=(0,e.useRef)(!1);return(0,e.createElement)(pA,yS({},i,{ref:c,disabled:o,onClick:bS(t.onClick,(()=>{const e=s.current;if(!o&&e){const t=new CustomEvent(uA,{bubbles:!0,cancelable:!0});e.addEventListener(uA,(e=>null===r||void 0===r?void 0:r(e)),{once:!0}),MS(e,t),t.defaultPrevented?d.current=!1:a.onClose()}})),onPointerDown:e=>{var n;null===(n=t.onPointerDown)||void 0===n||n.call(t,e),d.current=!0},onPointerUp:bS(t.onPointerUp,(e=>{var t;d.current||null===(t=e.currentTarget)||void 0===t||t.click()})),onKeyDown:bS(t.onKeyDown,(e=>{const t=""!==l.searchRef.current;o||t&&" "===e.key||OP.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())}))}))})),pA=(0,e.forwardRef)(((t,n)=>{const{__scopeMenu:o,disabled:r=!1,textValue:i,...s}=t,a=rA(dA,o),l=KP(o),c=(0,e.useRef)(null),d=xS(n,c),[u,h]=(0,e.useState)(!1),[p,f]=(0,e.useState)("");return(0,e.useEffect)((()=>{const e=c.current;var t;e&&f((null!==(t=e.textContent)&&void 0!==t?t:"").trim())}),[s.children]),(0,e.createElement)(zP.ItemSlot,{scope:o,disabled:r,textValue:null!==i&&void 0!==i?i:p},(0,e.createElement)(jP,yS({asChild:!0},l,{focusable:!r}),(0,e.createElement)(AS.div,yS({role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},s,{ref:d,onPointerMove:bS(t.onPointerMove,jA((e=>{if(r)a.onItemLeave(e);else if(a.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus()}}))),onPointerLeave:bS(t.onPointerLeave,jA((e=>a.onItemLeave(e)))),onFocus:bS(t.onFocus,(()=>h(!0))),onBlur:bS(t.onBlur,(()=>h(!1)))}))))})),fA=(0,e.forwardRef)(((t,n)=>{const{checked:o=!1,onCheckedChange:r,...i}=t;return(0,e.createElement)(bA,{scope:t.__scopeMenu,checked:o},(0,e.createElement)(hA,yS({role:"menuitemcheckbox","aria-checked":AA(o)?"mixed":o},i,{ref:n,"data-state":MA(o),onSelect:bS(i.onSelect,(()=>null===r||void 0===r?void 0:r(!!AA(o)||!o)),{checkForDefaultPrevented:!1})})))})),gA="MenuRadioGroup",[mA,vA]=HP(gA,{value:void 0,onValueChange:()=>{}}),yA="MenuItemIndicator",[bA,wA]=HP(yA,{checked:!1}),xA="MenuSub",[SA,_A]=HP(xA),kA=t=>{const{__scopeMenu:n,children:o,open:r=!1,onOpenChange:i}=t,s=qP(xA,n),a=WP(n),[l,c]=(0,e.useState)(null),[d,u]=(0,e.useState)(null),h=jS(i);return(0,e.useEffect)((()=>(!1===s.open&&h(!1),()=>h(!1))),[s.open,h]),(0,e.createElement)(qC,a,(0,e.createElement)(GP,{scope:n,open:r,onOpenChange:h,content:d,onContentChange:u},(0,e.createElement)(SA,{scope:n,contentId:pk(),triggerId:pk(),trigger:l,onTriggerChange:c},o)))},CA="MenuSubTrigger",EA=(0,e.forwardRef)(((t,n)=>{const o=qP(CA,t.__scopeMenu),r=XP(CA,t.__scopeMenu),i=_A(CA,t.__scopeMenu),s=rA(CA,t.__scopeMenu),a=(0,e.useRef)(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,d={__scopeMenu:t.__scopeMenu},u=(0,e.useCallback)((()=>{a.current&&window.clearTimeout(a.current),a.current=null}),[]);return(0,e.useEffect)((()=>u),[u]),(0,e.useEffect)((()=>{const e=l.current;return()=>{window.clearTimeout(e),c(null)}}),[l,c]),(0,e.createElement)(ZP,yS({asChild:!0},d),(0,e.createElement)(pA,yS({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":i.contentId,"data-state":PA(o.open)},t,{ref:wS(n,i.onTriggerChange),onClick:e=>{var n;null===(n=t.onClick)||void 0===n||n.call(t,e),t.disabled||e.defaultPrevented||(e.currentTarget.focus(),o.open||o.onOpenChange(!0))},onPointerMove:bS(t.onPointerMove,jA((e=>{s.onItemEnter(e),e.defaultPrevented||t.disabled||o.open||a.current||(s.onPointerGraceIntentChange(null),a.current=window.setTimeout((()=>{o.onOpenChange(!0),u()}),100))}))),onPointerLeave:bS(t.onPointerLeave,jA((e=>{var t;u();const n=null===(t=o.content)||void 0===t?void 0:t.getBoundingClientRect();if(n){var r;const t=null===(r=o.content)||void 0===r?void 0:r.dataset.side,i="right"===t,a=i?-5:5,c=n[i?"left":"right"],d=n[i?"right":"left"];s.onPointerGraceIntentChange({area:[{x:e.clientX+a,y:e.clientY},{x:c,y:n.top},{x:d,y:n.top},{x:d,y:n.bottom},{x:c,y:n.bottom}],side:t}),window.clearTimeout(l.current),l.current=window.setTimeout((()=>s.onPointerGraceIntentChange(null)),300)}else{if(s.onTriggerLeave(e),e.defaultPrevented)return;s.onPointerGraceIntentChange(null)}}))),onKeyDown:bS(t.onKeyDown,(e=>{const n=""!==s.searchRef.current;var i;t.disabled||n&&" "===e.key||RP[r.dir].includes(e.key)&&(o.onOpenChange(!0),null===(i=o.content)||void 0===i||i.focus(),e.preventDefault())}))})))})),IA="MenuSubContent",TA=(0,e.forwardRef)(((t,n)=>{const o=eA(nA,t.__scopeMenu),{forceMount:r=o.forceMount,...i}=t,s=qP(nA,t.__scopeMenu),a=XP(nA,t.__scopeMenu),l=_A(IA,t.__scopeMenu),c=(0,e.useRef)(null),d=xS(n,c);return(0,e.createElement)(zP.Provider,{scope:t.__scopeMenu},(0,e.createElement)(GS,{present:r||s.open},(0,e.createElement)(zP.Slot,{scope:t.__scopeMenu},(0,e.createElement)(lA,yS({id:l.contentId,"aria-labelledby":l.triggerId},i,{ref:d,align:"start",side:"rtl"===a.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;a.isUsingKeyboardRef.current&&(null===(t=c.current)||void 0===t||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:bS(t.onFocusOutside,(e=>{e.target!==l.trigger&&s.onOpenChange(!1)})),onEscapeKeyDown:bS(t.onEscapeKeyDown,(e=>{a.onClose(),e.preventDefault()})),onKeyDown:bS(t.onKeyDown,(e=>{const t=e.currentTarget.contains(e.target),n=NP[a.dir].includes(e.key);var o;t&&n&&(s.onOpenChange(!1),null===(o=l.trigger)||void 0===o||o.focus(),e.preventDefault())}))})))))}));function PA(e){return e?"open":"closed"}function AA(e){return"indeterminate"===e}function MA(e){return AA(e)?"indeterminate":e?"checked":"unchecked"}function jA(e){return t=>"mouse"===t.pointerType?e(t):void 0}const OA=$P,LA=ZP,BA=tA,RA=iA,NA=cA,DA=hA,zA=fA,FA=kA,UA=EA,HA=TA,VA="ContextMenu",[WA,KA]=SS(VA,[VP]),GA=VP(),[qA,YA]=WA(VA),XA=t=>{const{__scopeContextMenu:n,children:o,onOpenChange:r,dir:i,modal:s=!0}=t,[a,l]=(0,e.useState)(!1),c=GA(n),d=jS(r),u=(0,e.useCallback)((e=>{l(e),d(e)}),[d]);return(0,e.createElement)(qA,{scope:n,open:a,onOpenChange:u,modal:s},(0,e.createElement)(OA,yS({},c,{dir:i,open:a,onOpenChange:u,modal:s}),o))},$A="ContextMenuTrigger",ZA=(0,e.forwardRef)(((t,n)=>{const{__scopeContextMenu:o,disabled:r=!1,...i}=t,s=YA($A,o),a=GA(o),l=(0,e.useRef)({x:0,y:0}),c=(0,e.useRef)({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...l.current})}),d=(0,e.useRef)(0),u=(0,e.useCallback)((()=>window.clearTimeout(d.current)),[]),h=e=>{l.current={x:e.clientX,y:e.clientY},s.onOpenChange(!0)};return(0,e.useEffect)((()=>u),[u]),(0,e.useEffect)((()=>{r&&u()}),[r,u]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(LA,yS({},a,{virtualRef:c})),(0,e.createElement)(AS.span,yS({"data-state":s.open?"open":"closed","data-disabled":r?"":void 0},i,{ref:n,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:r?t.onContextMenu:bS(t.onContextMenu,(e=>{u(),h(e),e.preventDefault()})),onPointerDown:r?t.onPointerDown:bS(t.onPointerDown,aM((e=>{u(),d.current=window.setTimeout((()=>h(e)),700)}))),onPointerMove:r?t.onPointerMove:bS(t.onPointerMove,aM(u)),onPointerCancel:r?t.onPointerCancel:bS(t.onPointerCancel,aM(u)),onPointerUp:r?t.onPointerUp:bS(t.onPointerUp,aM(u))})))})),QA=t=>{const{__scopeContextMenu:n,...o}=t,r=GA(n);return(0,e.createElement)(BA,yS({},r,o))},JA="ContextMenuContent",eM=(0,e.forwardRef)(((t,n)=>{const{__scopeContextMenu:o,...r}=t,i=YA(JA,o),s=GA(o),a=(0,e.useRef)(!1);return(0,e.createElement)(RA,yS({},s,r,{ref:n,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:e=>{var n;null===(n=t.onCloseAutoFocus)||void 0===n||n.call(t,e),!e.defaultPrevented&&a.current&&e.preventDefault(),a.current=!1},onInteractOutside:e=>{var n;null===(n=t.onInteractOutside)||void 0===n||n.call(t,e),e.defaultPrevented||i.modal||(a.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))})),tM=(0,e.forwardRef)(((t,n)=>{const{__scopeContextMenu:o,...r}=t,i=GA(o);return(0,e.createElement)(NA,yS({},i,r,{ref:n}))})),nM=(0,e.forwardRef)(((t,n)=>{const{__scopeContextMenu:o,...r}=t,i=GA(o);return(0,e.createElement)(DA,yS({},i,r,{ref:n}))})),oM=(0,e.forwardRef)(((t,n)=>{const{__scopeContextMenu:o,...r}=t,i=GA(o);return(0,e.createElement)(zA,yS({},i,r,{ref:n}))})),rM=t=>{const{__scopeContextMenu:n,children:o,onOpenChange:r,open:i,defaultOpen:s}=t,a=GA(n),[l,c]=YS({prop:i,defaultProp:s,onChange:r});return(0,e.createElement)(FA,yS({},a,{open:l,onOpenChange:c}),o)},iM=(0,e.forwardRef)(((t,n)=>{const{__scopeContextMenu:o,...r}=t,i=GA(o);return(0,e.createElement)(UA,yS({},i,r,{ref:n}))})),sM=(0,e.forwardRef)(((t,n)=>{const{__scopeContextMenu:o,...r}=t,i=GA(o);return(0,e.createElement)(HA,yS({},i,r,{ref:n,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}));function aM(e){return t=>"mouse"!==t.pointerType?e(t):void 0}const lM=XA,cM=ZA,dM=QA,uM=eM,hM=oM,pM="undefined"!==typeof window&&window.navigator.userAgent.toLowerCase().indexOf("mac")>-1,fM=pM?"\u2318":"Ctrl",gM=pM?"\u2325":"Alt";function mM(e){return e.split(",")[0].split("").map((e=>{const t=e.replace(/\$/g,fM).replace(/\?/g,gM).replace(/!/g,"\u21e7");return t[0].toUpperCase()+t.slice(1)}))}function vM(e){return"\u2014 "+mM(e).join("\u2009")}function yM(e){return(0,Rc.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",...e,children:(0,Rc.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,Rc.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),(0,Rc.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:(0,Rc.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})}const bM="DropdownMenu",[wM,xM]=SS(bM,[VP]),SM=VP(),[_M,kM]=wM(bM),CM=t=>{const{__scopeDropdownMenu:n,children:o,dir:r,open:i,defaultOpen:s,onOpenChange:a,modal:l=!0}=t,c=SM(n),d=(0,e.useRef)(null),[u=!1,h]=YS({prop:i,defaultProp:s,onChange:a});return(0,e.createElement)(_M,{scope:n,triggerId:pk(),triggerRef:d,contentId:pk(),open:u,onOpenChange:h,onOpenToggle:(0,e.useCallback)((()=>h((e=>!e))),[h]),modal:l},(0,e.createElement)(OA,yS({},c,{open:u,onOpenChange:h,dir:r,modal:l}),o))},EM="DropdownMenuTrigger",IM=(0,e.forwardRef)(((t,n)=>{const{__scopeDropdownMenu:o,disabled:r=!1,...i}=t,s=kM(EM,o),a=SM(o);return(0,e.createElement)(LA,yS({asChild:!0},a),(0,e.createElement)(AS.button,yS({type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r},i,{ref:wS(n,s.triggerRef),onPointerDown:bS(t.onPointerDown,(e=>{r||0!==e.button||!1!==e.ctrlKey||(s.onOpenToggle(),s.open||e.preventDefault())})),onKeyDown:bS(t.onKeyDown,(e=>{r||(["Enter"," "].includes(e.key)&&s.onOpenToggle(),"ArrowDown"===e.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())}))})))})),TM=t=>{const{__scopeDropdownMenu:n,...o}=t,r=SM(n);return(0,e.createElement)(BA,yS({},r,o))},PM="DropdownMenuContent",AM=(0,e.forwardRef)(((t,n)=>{const{__scopeDropdownMenu:o,...r}=t,i=kM(PM,o),s=SM(o),a=(0,e.useRef)(!1);return(0,e.createElement)(RA,yS({id:i.contentId,"aria-labelledby":i.triggerId},s,r,{ref:n,onCloseAutoFocus:bS(t.onCloseAutoFocus,(e=>{var t;a.current||null===(t=i.triggerRef.current)||void 0===t||t.focus(),a.current=!1,e.preventDefault()})),onInteractOutside:bS(t.onInteractOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,o=2===t.button||n;i.modal&&!o||(a.current=!0)})),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))})),MM=(0,e.forwardRef)(((t,n)=>{const{__scopeDropdownMenu:o,...r}=t,i=SM(o);return(0,e.createElement)(NA,yS({},i,r,{ref:n}))})),jM=(0,e.forwardRef)(((t,n)=>{const{__scopeDropdownMenu:o,...r}=t,i=SM(o);return(0,e.createElement)(DA,yS({},i,r,{ref:n}))})),OM=(0,e.forwardRef)(((t,n)=>{const{__scopeDropdownMenu:o,...r}=t,i=SM(o);return(0,e.createElement)(zA,yS({},i,r,{ref:n}))})),LM=(0,e.forwardRef)(((t,n)=>{const{__scopeDropdownMenu:o,...r}=t,i=SM(o);return(0,e.createElement)(UA,yS({},i,r,{ref:n}))})),BM=(0,e.forwardRef)(((t,n)=>{const{__scopeDropdownMenu:o,...r}=t,i=SM(o);return(0,e.createElement)(HA,yS({},i,r,{ref:n,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))})),RM=CM,NM=IM,DM=TM,zM=AM,FM=MM,UM=jM,HM=OM,VM=t=>{const{__scopeDropdownMenu:n,children:o,open:r,onOpenChange:i,defaultOpen:s}=t,a=SM(n),[l=!1,c]=YS({prop:r,defaultProp:s,onChange:i});return(0,e.createElement)(FA,yS({},a,{open:l,onOpenChange:c}),o)},WM=LM,KM=BM;function GM(e){let{id:t,children:n,modal:o=!1,debugOpen:r=!1}=e;const[i,s]=xI(t);return(0,Rc.jsx)(RM,{open:r||i,dir:"ltr",modal:o,onOpenChange:s,children:n})}function qM(e){let{children:t,...n}=e;return(0,Rc.jsx)(NM,{dir:"ltr",asChild:!0,onTouchEnd:e=>Gd(e),...n,children:t})}function YM(e){let{side:t="bottom",align:n="start",sideOffset:o=8,alignOffset:r=8,children:i}=e;const s=Jd();return(0,Rc.jsx)(DM,{container:s,children:(0,Rc.jsx)(zM,{className:"tlui-menu",side:t,sideOffset:o,align:n,alignOffset:r,collisionPadding:4,children:i})})}function XM(e){let{id:t,children:n}=e;const[o,r]=xI(t);return(0,Rc.jsx)(VM,{open:o,onOpenChange:r,children:n})}function $M(e){let{id:t,label:n,title:o,disabled:r}=e;return(0,Rc.jsx)(WM,{dir:"ltr",asChild:!0,disabled:r,children:(0,Rc.jsxs)(X_,{"data-testid":t,type:"menu",className:"tlui-menu__submenu__trigger",disabled:r,title:o,children:[(0,Rc.jsx)(PI,{children:n}),(0,Rc.jsx)(Z_,{icon:"chevron-right",small:!0})]})})}function ZM(e){let{id:t,alignOffset:n=-1,sideOffset:o=-4,size:r="small",children:i}=e;const s=Jd();return(0,Rc.jsx)(DM,{container:s,children:(0,Rc.jsx)(KM,{"data-testid":t,className:"tlui-menu tlui-menu__submenu__content",alignOffset:n,sideOffset:o,collisionPadding:4,"data-size":r,children:i})})}function QM(e){let{children:t}=e;return(0,Rc.jsx)(FM,{dir:"ltr",className:"tlui-menu__group",children:t})}function JM(e){let{noClose:t,children:n}=e;return(0,Rc.jsx)(UM,{dir:"ltr",asChild:!0,onClick:t?Gd:void 0,children:n})}function ej(e){let{children:t,visibleOnMobileLayout:n=!1}=e;const o=z_();return!n&&o<R_.MOBILE?null:(0,Rc.jsx)("kbd",{className:"tlui-kbd",children:mM(t).map(((e,t)=>(0,Rc.jsx)("span",{children:e},t)))})}function tj(t){let{disabled:n=!1,spinner:o=!1,readonlyOk:r=!1,id:i,kbd:s,label:a,icon:l,onSelect:c,noClose:d}=t;const{type:u,sourceId:h}=EI(),p=Y_(),[f,g]=(0,e.useState)(!1);if(Cv()&&!r)return null;const m=hP(a,u),v=s?vM(s):void 0,y=m?p(m):void 0,b=y&&v?"".concat(y," ").concat(v):y;switch(u){case"menu":return(0,Rc.jsx)(JM,{children:(0,Rc.jsxs)(X_,{type:"menu","data-testid":"".concat(h,".").concat(i),disabled:n,title:b,onClick:e=>{d&&Gd(e),f?g(!1):c(h)},children:[(0,Rc.jsx)(PI,{children:y}),s&&(0,Rc.jsx)(ej,{children:s})]})});case"context-menu":return n?null:(0,Rc.jsxs)(nM,{dir:"ltr",title:b,draggable:!1,className:"tlui-button tlui-button__menu","data-testid":"".concat(h,".").concat(i),onSelect:e=>{d&&Gd(e),f?g(!1):c(h)},children:[(0,Rc.jsx)("span",{className:"tlui-button__label",draggable:!1,children:y}),s&&(0,Rc.jsx)(ej,{children:s}),o&&(0,Rc.jsx)(yM,{})]});case"panel":return(0,Rc.jsxs)(X_,{"data-testid":"".concat(h,".").concat(i),type:"menu",title:b,disabled:n,onClick:()=>c(h),children:[(0,Rc.jsx)(PI,{children:y}),l&&(0,Rc.jsx)(Z_,{icon:l})]});case"small-icons":case"icons":return(0,Rc.jsx)(X_,{"data-testid":"".concat(h,".").concat(i),type:"icon",title:b,disabled:n,onClick:()=>c(h),children:(0,Rc.jsx)(Z_,{icon:l,small:"small-icons"===u})});case"keyboard-shortcuts":return s?(0,Rc.jsxs)("div",{className:"tlui-shortcuts-dialog__key-pair","data-testid":"".concat(h,".").concat(i),children:[(0,Rc.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:y}),(0,Rc.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:(0,Rc.jsx)(ej,{visibleOnMobileLayout:!0,children:s})})]}):(console.warn("Menu item '".concat(a,"' isn't shown in the keyboard shortcuts dialog because it doesn't have a keyboard shortcut.")),null);case"helper-buttons":return(0,Rc.jsxs)(X_,{type:"low",onClick:()=>c(h),children:[(0,Rc.jsx)(Z_,{icon:l}),(0,Rc.jsx)(PI,{children:y})]});default:return null}}function nj(){return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(oj,{}),(0,Rc.jsx)(rj,{}),(0,Rc.jsx)(ij,{}),(0,Rc.jsx)(sj,{}),(0,Rc.jsx)(aj,{}),(0,Rc.jsx)(dj,{}),(0,Rc.jsx)(uj,{}),(0,Rc.jsx)(hj,{})]})}function oj(){const e=uP(),t=av(2);return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(tj,{...e["align-left"],disabled:!t}),(0,Rc.jsx)(tj,{...e["align-center-horizontal"],disabled:!t}),(0,Rc.jsx)(tj,{...e["align-right"],disabled:!t}),(0,Rc.jsx)(tj,{...e["stretch-horizontal"],disabled:!t}),(0,Rc.jsx)(tj,{...e["align-top"],disabled:!t}),(0,Rc.jsx)(tj,{...e["align-center-vertical"],disabled:!t}),(0,Rc.jsx)(tj,{...e["align-bottom"],disabled:!t}),(0,Rc.jsx)(tj,{...e["stretch-vertical"],disabled:!t})]})}function rj(){const e=uP(),t=av(3);return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(tj,{...e["distribute-horizontal"],disabled:!t}),(0,Rc.jsx)(tj,{...e["distribute-vertical"],disabled:!t})]})}function ij(){const e=uP(),t=ov();return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(tj,{...e["stack-horizontal"],disabled:!t}),(0,Rc.jsx)(tj,{...e["stack-vertical"],disabled:!t})]})}function sj(){const e=uP(),t=av(1);return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(tj,{...e["send-to-back"],disabled:!t}),(0,Rc.jsx)(tj,{...e["send-backward"],disabled:!t}),(0,Rc.jsx)(tj,{...e["bring-forward"],disabled:!t}),(0,Rc.jsx)(tj,{...e["bring-to-front"],disabled:!t})]})}function aj(){return z_()<R_.TABLET_SM?(0,Rc.jsx)(lj,{}):(0,Rc.jsx)(cj,{})}function lj(){const e=uP(),t=Hc(),n=ri("zoom is 1",(()=>1===t.getZoomLevel()),[t]);return(0,Rc.jsx)(tj,{...e["zoom-to-100"],disabled:n})}function cj(){const e=uP(),t=av(1);return(0,Rc.jsx)(tj,{...e["rotate-ccw"],disabled:!t})}function dj(){const e=uP(),t=av(1);return(0,Rc.jsx)(tj,{...e["rotate-cw"],disabled:!t})}function uj(){const e=uP(),t=lv();return(0,Rc.jsx)(tj,{...e["edit-link"],disabled:!t})}function hj(){const e=rv(),t=iv();return e?(0,Rc.jsx)(pj,{}):t?(0,Rc.jsx)(fj,{}):(0,Rc.jsx)(pj,{})}function pj(){const e=uP(),t=av(2);return(0,Rc.jsx)(tj,{...e.group,disabled:!t})}function fj(){const e=uP();return(0,Rc.jsx)(tj,{...e.ungroup})}const gj=(0,e.memo)((function(e){let{children:t}=e;const n=Y_(),o=z_(),r=Cv(),i=Hc(),s=ri("should display quick actions when in readonly",(()=>i.isInAny("hand","zoom")),[i]),a=null!==t&&void 0!==t?t:(0,Rc.jsx)(nj,{});if(!r||s)return(0,Rc.jsxs)(SI,{id:"actions-menu",children:[(0,Rc.jsx)(_I,{children:(0,Rc.jsx)(X_,{type:"icon","data-testid":"actions-menu.button",title:n("actions-menu.title"),children:(0,Rc.jsx)(Z_,{icon:"dots-vertical",small:!0})})}),(0,Rc.jsx)(kI,{side:o>=R_.TABLET?"bottom":"top",sideOffset:6,children:(0,Rc.jsx)("div",{className:"tlui-actions-menu tlui-buttons__grid","data-testid":"actions-menu.content",children:(0,Rc.jsx)(II,{type:"icons",sourceId:"actions-menu",children:a})})})]})}));function mj(e){let{id:t,kbd:n,label:o,readonlyOk:r,onSelect:i,disabled:s=!1,checked:a=!1}=e;const{type:l,sourceId:c}=EI(),d=Cv(),u=Y_();if(d&&!r)return null;const h=hP(o,l),p=h?u(h):void 0;switch(l){case"menu":return(0,Rc.jsxs)(HM,{dir:"ltr",className:"tlui-button tlui-button__menu tlui-button__checkbox",title:p,onSelect:e=>{null===i||void 0===i||i(c),Gd(e)},disabled:s,checked:a,children:[(0,Rc.jsx)($_,{small:!0,icon:a?"check":"checkbox-empty"}),p&&(0,Rc.jsx)("span",{className:"tlui-button__label",draggable:!1,children:p}),n&&(0,Rc.jsx)(ej,{children:n})]});case"context-menu":return(0,Rc.jsxs)(hM,{className:"tlui-button tlui-button__menu tlui-button__checkbox",dir:"ltr",title:p,onSelect:e=>{i(c),Gd(e)},disabled:s,checked:a,children:[(0,Rc.jsx)($_,{small:!0,icon:a?"check":"checkbox-empty"}),p&&(0,Rc.jsx)("span",{className:"tlui-button__label",draggable:!1,children:p}),n&&(0,Rc.jsx)(ej,{children:n})]},t);default:return null}}function vj(e){let{id:t,label:n,children:o}=e;const{type:r,sourceId:i}=EI(),s=Y_(),a=hP(n,r),l=a?s(a):void 0;switch(r){case"panel":return(0,Rc.jsx)("div",{className:"tlui-menu__group","data-testid":"".concat(i,"-group.").concat(t),children:o});case"menu":return(0,Rc.jsx)(QM,{"data-testid":"".concat(i,"-group.").concat(t),children:o});case"context-menu":return(0,Rc.jsx)(tM,{dir:"ltr",className:"tlui-menu__group","data-testid":"".concat(i,"-group.").concat(t),children:o});case"keyboard-shortcuts":return(0,Rc.jsxs)("div",{className:"tlui-shortcuts-dialog__group","data-testid":"".concat(i,"-group.").concat(t),children:[(0,Rc.jsx)("h2",{className:"tlui-shortcuts-dialog__group__title",children:l}),(0,Rc.jsx)("div",{className:"tlui-shortcuts-dialog__group__content",children:o})]});default:return o}}function yj(e){var t;let{id:n,disabled:o=!1,label:r,size:i="small",children:s}=e;const{type:a,sourceId:l}=EI(),c=Jd(),d=Y_(),u=r?"string"===typeof r?r:null!==(t=r[a])&&void 0!==t?t:r.default:void 0,h=u?d(u):void 0;switch(a){case"menu":return(0,Rc.jsxs)(XM,{id:"".concat(l,"-sub.").concat(n),children:[(0,Rc.jsx)($M,{id:"".concat(l,"-sub.").concat(h?h.toLowerCase()+"-button":""),disabled:o,label:h,title:h}),(0,Rc.jsx)(ZM,{id:"".concat(l,"-sub.").concat(h?h.toLowerCase()+"-content":""),size:i,children:s})]});case"context-menu":return o?null:(0,Rc.jsxs)(bj,{id:"".concat(l,"-sub.").concat(n),children:[(0,Rc.jsx)(iM,{dir:"ltr",disabled:o,asChild:!0,children:(0,Rc.jsxs)(X_,{"data-testid":"".concat(l,"-sub-trigger.").concat(n),type:"menu",className:"tlui-menu__submenu__trigger",children:[(0,Rc.jsx)(PI,{children:h}),(0,Rc.jsx)(Z_,{icon:"chevron-right",small:!0})]})}),(0,Rc.jsx)(QA,{container:c,children:(0,Rc.jsx)(sM,{"data-testid":"".concat(l,"-sub-content.").concat(n),className:"tlui-menu tlui-menu__submenu__content",alignOffset:-1,sideOffset:-4,collisionPadding:4,"data-size":i,children:s})})]});default:return s}}function bj(e){let{id:t,children:n}=e;const[o,r]=xI(t);return(0,Rc.jsx)(rM,{open:o,onOpenChange:r,children:n})}function wj(){const e=uP(),t=function(){const e=Hc();return ri("showAutoSizeToggle",(()=>{const t=e.getSelectedShapes();return 1===t.length&&e.isShapeOfType(t[0],"text")&&!1===t[0].props.autoSize}),[e])}();return(0,Rc.jsx)(tj,{...e["toggle-auto-size"],disabled:!t})}function xj(){const e=uP(),t=lv();return(0,Rc.jsx)(tj,{...e["edit-link"],disabled:!t})}function Sj(){const e=uP(),t=av(1);return(0,Rc.jsx)(tj,{...e.duplicate,disabled:!t})}function _j(){const e=uP(),t=rv();return(0,Rc.jsx)(tj,{...e.group,disabled:!t})}function kj(){const e=uP(),t=iv();return(0,Rc.jsx)(tj,{...e.ungroup,disabled:!t})}function Cj(){const e=Hc(),t=uP(),n=ri("allow unframe",(()=>{const t=e.getSelectedShapes();return 0!==t.length&&t.every((t=>e.isShapeOfType(t,"frame")))}),[e]);return(0,Rc.jsx)(tj,{...t["remove-frame"],disabled:!n})}function Ej(){const e=Hc(),t=uP(),n=ri("allow fit frame to content",(()=>{const t=e.getOnlySelectedShape();return!!t&&(e.isShapeOfType(t,"frame")&&e.getSortedChildIdsForParent(t).length>0)}),[e]);return(0,Rc.jsx)(tj,{...t["fit-frame-to-content"],disabled:!n})}function Ij(){const e=Hc(),t=uP(),n=ri("selected shapes",(()=>e.getSelectedShapes().length>0),[e]);return(0,Rc.jsx)(tj,{...t["toggle-lock"],disabled:!n})}function Tj(){const e=uP(),t=Hc(),n=ri("isTransparentBg",(()=>!t.getInstanceState().exportBackground),[t]);return(0,Rc.jsx)(mj,{...e["toggle-transparent"],checked:n})}function Pj(){const e=Hc(),t=uP(),n=ri("any shapes",(()=>e.getCurrentPageShapeIds().size>0),[e]);return(0,Rc.jsx)(tj,{...t["unlock-all"],disabled:!n})}function Aj(){const e=Hc(),t=ri("zoomed to 100",(()=>1===e.getZoomLevel()),[e]),n=uP();return(0,Rc.jsx)(tj,{...n["zoom-to-100"],noClose:!0,disabled:t})}function Mj(){const e=Hc(),t=ri("has shapes",(()=>e.getCurrentPageShapeIds().size>0),[e]),n=uP();return(0,Rc.jsx)(tj,{...n["zoom-to-fit"],disabled:!t,"data-testid":"minimap.zoom-menu.zoom-to-fit",noClose:!0})}function jj(){const e=Hc(),t=ri("has shapes",(()=>e.getSelectedShapeIds().length>0),[e]),n=uP();return(0,Rc.jsx)(tj,{...n["zoom-to-selection"],disabled:!t,"data-testid":"minimap.zoom-menu.zoom-to-selection",noClose:!0})}function Oj(){var e;const t=Hc(),n=uP(),o=ri("atLeastOneShapeOnPage",(()=>t.getCurrentPageShapeIds().size>0),[]);return(0,Rc.jsxs)(vj,{id:"clipboard",children:[(0,Rc.jsx)(Lj,{}),(0,Rc.jsx)(Bj,{}),(0,Rc.jsxs)(yj,{id:"copy-as",label:"context-menu.copy-as",size:"small",disabled:!o,children:[(0,Rc.jsxs)(vj,{id:"copy-as-group",children:[(0,Rc.jsx)(tj,{...n["copy-as-svg"]}),Boolean(null===(e=window.navigator.clipboard)||void 0===e?void 0:e.write)&&(0,Rc.jsx)(tj,{...n["copy-as-png"]}),(0,Rc.jsx)(tj,{...n["copy-as-json"]})]}),(0,Rc.jsx)(vj,{id:"copy-as-bg",children:(0,Rc.jsx)(Tj,{})})]}),(0,Rc.jsx)(Sj,{}),(0,Rc.jsx)(Rj,{}),(0,Rc.jsx)(zj,{})]})}function Lj(){const e=uP(),t=av(1);return(0,Rc.jsx)(tj,{...e.cut,disabled:!t})}function Bj(){const e=uP(),t=function(e,t){const n=Hc();return ri("selectedShapes",(()=>{const o=n.getSelectedShapes().length;return void 0===e?void 0===t?o:o<=t:void 0===t?o>=e:o>=e&&o<=t}),[n,e,t])}(1);return(0,Rc.jsx)(tj,{...e.copy,disabled:!t})}function Rj(){const e=uP(),t=sv;return(0,Rc.jsx)(tj,{...e.paste,disabled:!t})}function Nj(){const e=uP(),t=av(1);return(0,Rc.jsx)(vj,{id:"conversions",children:(0,Rc.jsxs)(yj,{id:"export-as",label:"context-menu.export-as",size:"small",disabled:!t,children:[(0,Rc.jsxs)(vj,{id:"export-as-group",children:[(0,Rc.jsx)(tj,{...e["export-as-svg"]}),(0,Rc.jsx)(tj,{...e["export-as-png"]}),(0,Rc.jsx)(tj,{...e["export-as-json"]})]}),(0,Rc.jsx)(vj,{id:"export-as-bg",children:(0,Rc.jsx)(Tj,{})})]})})}function Dj(){const e=uP(),t=Hc(),n=ri("atLeastOneShapeOnPage",(()=>t.getCurrentPageShapeIds().size>0),[t]);return(0,Rc.jsx)(vj,{id:"set-selection-group",children:(0,Rc.jsx)(tj,{...e["select-all"],disabled:!n})})}function zj(){const e=uP(),t=av(1);return(0,Rc.jsx)(tj,{...e.delete,disabled:!t})}function Fj(){const e=av(2),t=function(){const e=Hc();return ri("onlyFlippableShape",(()=>{const t=e.getSelectedShapes();return 1===t.length&&t.every((t=>e.isShapeOfType(t,"group")||e.isShapeOfType(t,"arrow")||e.isShapeOfType(t,"line")||e.isShapeOfType(t,"draw")))}),[e])}(),n=uP();return e||t?(0,Rc.jsxs)(yj,{id:"arrange",label:"context-menu.arrange",size:"small",children:[e&&(0,Rc.jsxs)(vj,{id:"align",children:[(0,Rc.jsx)(tj,{...n["align-left"]}),(0,Rc.jsx)(tj,{...n["align-center-horizontal"]}),(0,Rc.jsx)(tj,{...n["align-right"]}),(0,Rc.jsx)(tj,{...n["align-top"]}),(0,Rc.jsx)(tj,{...n["align-center-vertical"]}),(0,Rc.jsx)(tj,{...n["align-bottom"]})]}),(0,Rc.jsx)(Uj,{}),e&&(0,Rc.jsxs)(vj,{id:"stretch",children:[(0,Rc.jsx)(tj,{...n["stretch-horizontal"]}),(0,Rc.jsx)(tj,{...n["stretch-vertical"]})]}),t&&(0,Rc.jsxs)(vj,{id:"flip",children:[(0,Rc.jsx)(tj,{...n["flip-horizontal"]}),(0,Rc.jsx)(tj,{...n["flip-vertical"]})]}),(0,Rc.jsx)(Hj,{})]}):null}function Uj(){const e=uP();return av(3)?(0,Rc.jsxs)(vj,{id:"distribute",children:[(0,Rc.jsx)(tj,{...e["distribute-horizontal"]}),(0,Rc.jsx)(tj,{...e["distribute-vertical"]})]}):null}function Hj(){const e=uP(),t=av(2),n=ov();return t?(0,Rc.jsxs)(vj,{id:"order",children:[(0,Rc.jsx)(tj,{...e.pack}),n&&(0,Rc.jsx)(tj,{...e["stack-horizontal"]}),n&&(0,Rc.jsx)(tj,{...e["stack-vertical"]})]}):null}function Vj(){const e=uP();return av(1)?(0,Rc.jsx)(yj,{id:"reorder",label:"context-menu.reorder",size:"small",children:(0,Rc.jsxs)(vj,{id:"reorder",children:[(0,Rc.jsx)(tj,{...e["bring-to-front"]}),(0,Rc.jsx)(tj,{...e["bring-forward"]}),(0,Rc.jsx)(tj,{...e["send-backward"]}),(0,Rc.jsx)(tj,{...e["send-to-back"]})]})}):null}function Wj(){const e=Hc(),t=ri("pages",(()=>e.getPages()),[e]),n=ri("current page id",(()=>e.getCurrentPageId()),[e]),{addToast:o}=JT(),r=uP(),i=wI();return av(1)?(0,Rc.jsxs)(yj,{id:"move-to-page",label:"context-menu.move-to-page",size:"small",children:[(0,Rc.jsx)(vj,{id:"pages",children:t.map((t=>(0,Rc.jsx)(tj,{id:t.id,disabled:n===t.id,label:t.name,onSelect:()=>{e.mark("move_shapes_to_page"),e.moveShapesToPage(e.getSelectedShapeIds(),t.id);const r=e.getPage(t.id);r&&o({title:"Changed Page",description:"Moved to ".concat(r.name,"."),actions:[{label:"Go Back",type:"primary",onClick:()=>{e.mark("change-page"),e.setCurrentPage(n)}}]}),i("move-to-page",{source:"context-menu"})},title:t.name},t.id)))}),(0,Rc.jsx)(vj,{id:"new-page",children:(0,Rc.jsx)(tj,{...r["new-page"]})})]}):null}function Kj(){const e=Hc(),t=uP(),n=ri("oneEmbedSelected",(()=>{const t=e.getOnlySelectedShape();return!!t&&!(!e.isShapeOfType(t,"embed")||!t.props.url||e.isShapeOrAncestorLocked(t))}),[e]),o=ri("oneEmbeddableBookmarkSelected",(()=>{const t=e.getOnlySelectedShape();return!!t&&!(!(e.isShapeOfType(t,"bookmark")&&t.props.url&&fy(t.props.url))||e.isShapeOrAncestorLocked(t))}),[e]);return(0,Rc.jsxs)(vj,{id:"embeds",children:[(0,Rc.jsx)(tj,{...t["convert-to-bookmark"],disabled:!n}),(0,Rc.jsx)(tj,{...t["convert-to-embed"],disabled:!o})]})}function Gj(){const e=uP(),t=Hc(),n=ri("isSnapMode",(()=>t.user.getIsSnapMode()),[t]);return(0,Rc.jsx)(mj,{...e["toggle-snap-mode"],checked:n})}function qj(){const e=uP(),t=Hc(),n=ri("isToolLock",(()=>t.getInstanceState().isToolLocked),[t]);return(0,Rc.jsx)(mj,{...e["toggle-tool-lock"],checked:n})}function Yj(){const e=uP(),t=Hc(),n=ri("isGridMode",(()=>t.getInstanceState().isGridMode),[t]);return(0,Rc.jsx)(mj,{...e["toggle-grid"],checked:n})}function Xj(){const e=uP(),t=Hc(),n=ri("isWrapMode",(()=>t.user.getIsWrapMode()),[t]);return(0,Rc.jsx)(mj,{...e["toggle-wrap-mode"],checked:n})}function $j(){const e=uP(),t=Hc(),n=ri("isDarkMode",(()=>t.user.getIsDarkMode()),[t]);return(0,Rc.jsx)(mj,{...e["toggle-dark-mode"],checked:n})}function Zj(){const e=uP(),t=Hc(),n=ri("isFocusMode",(()=>t.getInstanceState().isFocusMode),[t]);return(0,Rc.jsx)(mj,{...e["toggle-focus-mode"],checked:n})}function Qj(){const e=uP(),t=Hc(),n=ri("edgeScrollSpeed",(()=>t.user.getEdgeScrollSpeed()),[t]);return(0,Rc.jsx)(mj,{...e["toggle-edge-scrolling"],checked:1===n})}function Jj(){const e=uP(),t=Hc(),n=ri("animationSpeed",(()=>t.user.getAnimationSpeed()),[t]);return(0,Rc.jsx)(mj,{...e["toggle-reduce-motion"],checked:0===n})}function eO(){const e=uP(),t=Hc(),n=ri("isDebugMode",(()=>t.getInstanceState().isDebugMode),[t]);return(0,Rc.jsx)(mj,{...e["toggle-debug-mode"],checked:n})}function tO(){const e=Hc();return ri("isSelectToolActive",(()=>"select"===e.getCurrentToolId()),[e])?(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsxs)(vj,{id:"selection",children:[(0,Rc.jsx)(wj,{}),(0,Rc.jsx)(xj,{}),(0,Rc.jsx)(_j,{}),(0,Rc.jsx)(kj,{}),(0,Rc.jsx)(Cj,{}),(0,Rc.jsx)(Ej,{}),(0,Rc.jsx)(Ij,{})]}),(0,Rc.jsx)(Kj,{}),(0,Rc.jsxs)(vj,{id:"modify",children:[(0,Rc.jsx)(Fj,{}),(0,Rc.jsx)(Vj,{}),(0,Rc.jsx)(Wj,{})]}),(0,Rc.jsx)(Oj,{}),(0,Rc.jsx)(Nj,{}),(0,Rc.jsx)(Dj,{})]}):null}const nO=(0,e.memo)((function(t){let{children:n}=t;const o=Hc(),{Canvas:r}=Mp(),i=(0,e.useCallback)((e=>{if(e){if(o.getInstanceState().isCoarsePointer){const e=o.getSelectedShapes(),{inputs:{currentPagePoint:t}}=o,n=o.getShapesAtPoint(t);if(!o.getSelectedShapes().length||!n.some((t=>e.includes(t)))){const e=n.filter((e=>o.isShapeOrAncestorLocked(e)));e.length&&o.select(...e.map((e=>e.id)))}}}else{const e=o.getOnlySelectedShape();e&&o.isShapeOrAncestorLocked(e)&&o.setSelectedShapes([])}}),[o]),s=Jd(),[a,l]=xI("context menu",i),c=null!==n&&void 0!==n?n:(0,Rc.jsx)(tO,{});return(0,Rc.jsxs)(lM,{dir:"ltr",onOpenChange:l,modal:!1,children:[(0,Rc.jsx)(cM,{onContextMenu:void 0,dir:"ltr",children:r?(0,Rc.jsx)(r,{}):null}),a&&(0,Rc.jsx)(dM,{container:s,children:(0,Rc.jsx)(uM,{className:"tlui-menu scrollable","data-testid":"context-menu",alignOffset:-4,collisionPadding:4,onContextMenu:Gd,children:(0,Rc.jsx)(II,{type:"context-menu",sourceId:"context-menu",children:c})})})]})}));function oO(e){let{checked:t}=e;return(0,Rc.jsx)($_,{icon:t?"check":"checkbox-empty",className:"tlui-button__icon",small:!0})}function rO(){const t=Hc(),{addToast:n}=JT(),{addDialog:o}=aP(),[r,i]=e.useState(!1);return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsxs)(vj,{id:"items",children:[(0,Rc.jsx)(tj,{id:"add-toast",onSelect:()=>{n({id:Np(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0}),n({id:Np(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,actions:[{label:"Primary",type:"primary",onClick:()=>{}},{label:"Normal",type:"normal",onClick:()=>{}},{label:"Danger",type:"danger",onClick:()=>{}}]}),n({id:Np(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,icon:"twitter",actions:[{label:"Primary",type:"primary",onClick:()=>{}},{label:"Normal",type:"normal",onClick:()=>{}},{label:"Danger",type:"danger",onClick:()=>{}}]})},label:"Show toast"}),(0,Rc.jsx)(tj,{id:"show-dialog",label:"Show dialog",onSelect:()=>{o({component:e=>{let{onClose:t}=e;return(0,Rc.jsx)(aO,{displayDontShowAgain:!0,onCancel:()=>t(),onContinue:()=>t()})},onClose:()=>{}})}}),(0,Rc.jsx)(tj,{id:"create-shapes",label:"Create 100 shapes",onSelect:()=>function(e,t){const n=Array(t),o=Math.floor(Math.sqrt(t));for(let r=0;r<t;r++)cO++,n[r]={id:bl("box"+cO),type:"geo",x:r%o*132,y:132*Math.floor(r/o)};e.batch((()=>{e.createShapes(n).setSelectedShapes(n.map((e=>e.id)))}))}(t,100)}),(0,Rc.jsx)(tj,{id:"count-nodes",label:"Count shapes / nodes",onSelect:()=>{function e(t){let{children:n}=t,o=0;if(!n.length)return 0;for(const r of[...n])o++,o+=e(r);return o}const n=t.getSelectedShapes(),o=0===n.length?t.getRenderingShapes():n,r=o.map((e=>document.getElementById(e.id).parentElement));let i=r.length;for(const t of r)i+=e(t);window.alert("Shapes ".concat(o.length,", DOM nodes:").concat(i))}}),(()=>{if(r)throw Error("oh no!")})(),(0,Rc.jsx)(tj,{id:"throw-error",onSelect:()=>i(!0),label:"Throw error"}),(0,Rc.jsx)(tj,{id:"hard-reset",onSelect:Op,label:"Hard reset"})]}),(0,Rc.jsxs)(vj,{id:"flags",children:[(0,Rc.jsx)(iO,{}),(0,Rc.jsx)(sO,{})]})]})}function iO(){const e=Object.values(Hd);return e.length?(0,Rc.jsx)(yj,{id:"debug flags",label:"Debug Flags",children:(0,Rc.jsx)(vj,{id:"debug flags",children:e.map((e=>(0,Rc.jsx)(lO,{flag:e},e.name)))})}):null}function sO(){const e=Object.values(Fd);return e.length?(0,Rc.jsx)(yj,{id:"feature flags",label:"Feature Flags",children:(0,Rc.jsx)(vj,{id:"feature flags",children:e.map((e=>(0,Rc.jsx)(lO,{flag:e},e.name)))})}):null}function aO(t){let{title:n="title",body:o="hello hello hello",cancel:r="Cancel",confirm:i="Continue",displayDontShowAgain:s=!1,onCancel:a,onContinue:l}=t;const[c,d]=e.useState(!1);return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsxs)(sT,{children:[(0,Rc.jsx)(aT,{children:n}),(0,Rc.jsx)(lT,{})]}),(0,Rc.jsx)(cT,{style:{maxWidth:350},children:o}),(0,Rc.jsxs)(dT,{className:"tlui-dialog__footer__actions",children:[s&&(0,Rc.jsxs)(X_,{type:"normal",onClick:()=>d(!c),style:{marginRight:"auto"},children:[(0,Rc.jsx)(oO,{checked:c}),(0,Rc.jsx)(PI,{children:"Don't show again"})]}),(0,Rc.jsx)(X_,{type:"normal",onClick:a,children:(0,Rc.jsx)(PI,{children:r})}),(0,Rc.jsx)(X_,{type:"primary",onClick:async()=>l(),children:(0,Rc.jsx)(PI,{children:i})})]})]})}const lO=ti((function(e){let{flag:t,onChange:n}=e;const o=t.get();return(0,Rc.jsx)(mj,{id:t.name,title:t.name,label:t.name.replace(/([a-z0-9])([A-Z])/g,(e=>"".concat(e[0]," ").concat(e[1].toLowerCase()))).replace(/^[a-z]/,(e=>e.toUpperCase())),checked:o,onSelect:()=>{t.set(!o),null===n||void 0===n||n(!o)}})}));let cO=0;function dO(e){let{children:t}=e;const n=null!==t&&void 0!==t?t:(0,Rc.jsx)(rO,{});return(0,Rc.jsxs)(GM,{id:"debug",children:[(0,Rc.jsx)(qM,{children:(0,Rc.jsx)(X_,{type:"icon",title:"Debug menu",children:(0,Rc.jsx)(Z_,{icon:"dots-horizontal"})})}),(0,Rc.jsx)(YM,{side:"top",align:"end",alignOffset:0,children:(0,Rc.jsx)(II,{type:"menu",sourceId:"debug-panel",children:n})})]})}const uO=ti((function(){const e=Hc(),t=wI(),{languages:n,currentLanguage:o}=function(){const e=Hc();return{languages:Oc,currentLanguage:e.user.getLocale()}}();return(0,Rc.jsx)(yj,{id:"help menu language",label:"menu.language",children:(0,Rc.jsx)(vj,{id:"languages",children:n.map((n=>{let{locale:r,label:i}=n;return(0,Rc.jsx)(mj,{id:"language-".concat(r),title:r,label:i,checked:r===o,onSelect:()=>{e.user.updateUserPreferences({locale:r}),t("change-language",{source:"menu",locale:r})}},r)}))})})}));function hO(){return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(uO,{}),(0,Rc.jsx)(pO,{})]})}function pO(){const{KeyboardShortcutsDialog:e}=MB(),{addDialog:t}=aP();return e?(0,Rc.jsx)(tj,{id:"keyboard-shortcuts-button",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect:()=>{t({component:e})}}):null}const fO=(0,e.memo)((function(e){let{children:t}=e;const n=Y_(),o=z_(),r=null!==t&&void 0!==t?t:(0,Rc.jsx)(hO,{});return o<R_.MOBILE?null:(0,Rc.jsx)("div",{className:"tlui-help-menu",children:(0,Rc.jsxs)(GM,{id:"help menu",children:[(0,Rc.jsx)(qM,{children:(0,Rc.jsx)(X_,{type:"help",title:n("help-menu.title"),"data-testid":"help-menu.button",children:(0,Rc.jsx)(Z_,{icon:"question-mark",small:!0})})}),(0,Rc.jsx)(YM,{side:"top",align:"end",alignOffset:0,sideOffset:8,children:(0,Rc.jsx)(II,{type:"menu",sourceId:"help-menu",children:r})})]})})}));function gO(){const t=Hc(),n=uP(),[o,r]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{let e=!1;const n=setInterval((()=>{const n=t.getRenderingShapes(),o=t.getRenderingBounds(),i=n.filter((e=>e.maskedPageBounds&&o.includes(e.maskedPageBounds))),s=0===i.length&&t.getCurrentPageShapes().length>0;e!==s&&(r(s),e=s)}),1e3);return()=>{clearInterval(n)}}),[t]),o?(0,Rc.jsx)(tj,{...n["back-to-content"],onSelect:()=>{n["back-to-content"].onSelect("helper-buttons"),r(!1)}}):null}function mO(){const e=Hc(),t=uP();return ri("is pen mode",(()=>e.getInstanceState().isPenMode),[e])?(0,Rc.jsx)(tj,{...t["exit-pen-mode"]}):null}function vO(){const e=Hc(),t=uP();return ri("is following user",(()=>!!e.getInstanceState().followingUserId),[e])?(0,Rc.jsx)(tj,{...t["stop-following"]}):null}function yO(){return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(mO,{}),(0,Rc.jsx)(gO,{}),(0,Rc.jsx)(vO,{})]})}function bO(e){let{children:t}=e;const n=null!==t&&void 0!==t?t:(0,Rc.jsx)(yO,{});return(0,Rc.jsx)("div",{className:"tlui-helper-buttons",children:(0,Rc.jsx)(II,{type:"helper-buttons",sourceId:"helper-buttons",children:n})})}const wO=e.createContext({});function xO(t){let{overrides:n,children:o}=t;const r=Hc(),i=wI(),{addDialog:s}=aP(),a=rP(),l=e.useMemo((()=>{const e=[{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect(e){r.setCurrentTool("select"),i("select-tool",{source:e,id:"select"})}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect(e){r.setCurrentTool("hand"),i("select-tool",{source:e,id:"hand"})}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",onSelect(e){r.setCurrentTool("eraser"),i("select-tool",{source:e,id:"eraser"})}},{id:"draw",label:"tool.draw",icon:"tool-pencil",kbd:"d,b,x",onSelect(e){r.setCurrentTool("draw"),i("select-tool",{source:e,id:"draw"})}},...[...oc.values].map((e=>({id:e,label:"tool.".concat(e),meta:{geo:e},kbd:"rectangle"===e?"r":"ellipse"===e?"o":void 0,icon:"geo-"+e,onSelect(t){r.batch((()=>{r.updateInstanceState({stylesForNextShape:{...r.getInstanceState().stylesForNextShape,[oc.id]:e}},{ephemeral:!0}),r.setCurrentTool("geo"),i("select-tool",{source:t,id:"geo-".concat(e)})}))}}))),{id:"arrow",label:"tool.arrow",icon:"tool-arrow",kbd:"a",onSelect(e){r.setCurrentTool("arrow"),i("select-tool",{source:e,id:"arrow"})}},{id:"line",label:"tool.line",icon:"tool-line",kbd:"l",onSelect(e){r.setCurrentTool("line"),i("select-tool",{source:e,id:"line"})}},{id:"frame",label:"tool.frame",icon:"tool-frame",kbd:"f",onSelect(e){r.setCurrentTool("frame"),i("select-tool",{source:e,id:"frame"})}},{id:"text",label:"tool.text",icon:"tool-text",kbd:"t",onSelect(e){r.setCurrentTool("text"),i("select-tool",{source:e,id:"text"})}},{id:"asset",label:"tool.asset",icon:"tool-media",kbd:"$u",onSelect(e){a(),i("select-tool",{source:e,id:"media"})}},{id:"note",label:"tool.note",icon:"tool-note",kbd:"n",onSelect(e){r.setCurrentTool("note"),i("select-tool",{source:e,id:"note"})}},{id:"laser",label:"tool.laser",readonlyOk:!0,icon:"tool-laser",kbd:"k",onSelect(e){r.setCurrentTool("laser"),i("select-tool",{source:e,id:"laser"})}},{id:"embed",label:"tool.embed",icon:"tool-embed",onSelect(e){s({component:gT}),i("select-tool",{source:e,id:"embed"})}}];e.push({id:"highlight",label:"tool.highlight",icon:"tool-highlight",kbd:"!d",onSelect(e){r.setCurrentTool("highlight"),i("select-tool",{source:e,id:"highlight"})}});const t=Object.fromEntries(e.map((e=>[e.id,e])));return n?n(r,t,{insertMedia:a}):t}),[n,r,i,a,s]);return(0,Rc.jsx)(wO.Provider,{value:l,children:o})}function SO(){const t=e.useContext(wO);if(!t)throw new Error("useTools must be used within a ToolProvider");return t}function _O(){const e=uP(),t=SO();return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsxs)(vj,{label:"shortcuts-dialog.tools",id:"tools",children:[(0,Rc.jsx)(tj,{...e["toggle-tool-lock"]}),(0,Rc.jsx)(tj,{...t.select}),(0,Rc.jsx)(tj,{...t.draw}),(0,Rc.jsx)(tj,{...t.eraser}),(0,Rc.jsx)(tj,{...t.hand}),(0,Rc.jsx)(tj,{...t.rectangle}),(0,Rc.jsx)(tj,{...t.ellipse}),(0,Rc.jsx)(tj,{...t.arrow}),(0,Rc.jsx)(tj,{...t.line}),(0,Rc.jsx)(tj,{...t.text}),(0,Rc.jsx)(tj,{...t.frame}),(0,Rc.jsx)(tj,{...t.note}),(0,Rc.jsx)(tj,{...t.laser})]}),(0,Rc.jsxs)(vj,{label:"shortcuts-dialog.file",id:"file",children:[(0,Rc.jsx)(tj,{...e["insert-media"]}),(0,Rc.jsx)(tj,{...e.print})]}),(0,Rc.jsxs)(vj,{label:"shortcuts-dialog.preferences",id:"preferences",children:[(0,Rc.jsx)(tj,{...e["toggle-dark-mode"]}),(0,Rc.jsx)(tj,{...e["toggle-focus-mode"]}),(0,Rc.jsx)(tj,{...e["toggle-grid"]})]}),(0,Rc.jsxs)(vj,{label:"shortcuts-dialog.edit",id:"edit",children:[(0,Rc.jsx)(tj,{...e.undo}),(0,Rc.jsx)(tj,{...e.redo}),(0,Rc.jsx)(tj,{...e.cut}),(0,Rc.jsx)(tj,{...e.copy}),(0,Rc.jsx)(tj,{...e.paste}),(0,Rc.jsx)(tj,{...e["select-all"]}),(0,Rc.jsx)(tj,{...e.delete}),(0,Rc.jsx)(tj,{...e.duplicate})]}),(0,Rc.jsxs)(vj,{label:"shortcuts-dialog.view",id:"view",children:[(0,Rc.jsx)(tj,{...e["zoom-in"]}),(0,Rc.jsx)(tj,{...e["zoom-out"]}),(0,Rc.jsx)(tj,{...e["zoom-to-100"]}),(0,Rc.jsx)(tj,{...e["zoom-to-fit"]}),(0,Rc.jsx)(tj,{...e["zoom-to-selection"]})]}),(0,Rc.jsxs)(vj,{label:"shortcuts-dialog.transform",id:"transform",children:[(0,Rc.jsx)(tj,{...e["bring-to-front"]}),(0,Rc.jsx)(tj,{...e["bring-forward"]}),(0,Rc.jsx)(tj,{...e["send-backward"]}),(0,Rc.jsx)(tj,{...e["send-to-back"]}),(0,Rc.jsx)(tj,{...e.group}),(0,Rc.jsx)(tj,{...e.ungroup}),(0,Rc.jsx)(tj,{...e["flip-horizontal"]}),(0,Rc.jsx)(tj,{...e["flip-vertical"]}),(0,Rc.jsx)(tj,{...e["align-top"]}),(0,Rc.jsx)(tj,{...e["align-center-vertical"]}),(0,Rc.jsx)(tj,{...e["align-bottom"]}),(0,Rc.jsx)(tj,{...e["align-left"]}),(0,Rc.jsx)(tj,{...e["align-center-horizontal"]}),(0,Rc.jsx)(tj,{...e["align-right"]})]})]})}const kO=(0,e.memo)((function(e){let{children:t}=e;const n=Y_(),o=z_(),r=null!==t&&void 0!==t?t:(0,Rc.jsx)(_O,{});return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsxs)(sT,{className:"tlui-shortcuts-dialog__header",children:[(0,Rc.jsx)(aT,{children:n("shortcuts-dialog.title")}),(0,Rc.jsx)(lT,{})]}),(0,Rc.jsx)(cT,{className:Nc("tlui-shortcuts-dialog__body",{"tlui-shortcuts-dialog__body__mobile":o<=R_.MOBILE_XS,"tlui-shortcuts-dialog__body__tablet":o<=R_.TABLET}),children:(0,Rc.jsx)(II,{type:"keyboard-shortcuts",sourceId:"kbd",children:r})}),(0,Rc.jsx)("div",{className:"tlui-dialog__scrim"})]})}));function CO(){return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(EO,{}),(0,Rc.jsx)(IO,{}),(0,Rc.jsx)(jO,{}),(0,Rc.jsx)(OO,{}),(0,Rc.jsx)(LO,{})]})}function EO(){const e=Hc(),t=ri("isSelectToolActive",(()=>"select"===e.getCurrentToolId()),[e]);return(0,Rc.jsxs)(yj,{id:"edit",label:"menu.edit",disabled:!t,children:[(0,Rc.jsx)(MO,{}),(0,Rc.jsx)(Oj,{}),(0,Rc.jsx)(Dj,{})]})}function IO(){const e=Hc(),t=ri("isSelectToolActive",(()=>"select"===e.getCurrentToolId()),[e]);return(0,Rc.jsxs)(yj,{id:"shape",label:"menu.shape",disabled:!t,children:[(0,Rc.jsx)(Nj,{}),(0,Rc.jsx)(AO,{}),(0,Rc.jsx)(TO,{}),(0,Rc.jsx)(Kj,{}),(0,Rc.jsx)(PO,{})]})}function TO(){return(0,Rc.jsxs)(vj,{id:"misc",children:[(0,Rc.jsx)(wj,{}),(0,Rc.jsx)(xj,{})]})}function PO(){return(0,Rc.jsxs)(vj,{id:"lock",children:[(0,Rc.jsx)(Ij,{}),(0,Rc.jsx)(Pj,{})]})}function AO(){return(0,Rc.jsxs)(vj,{id:"multi-shape",children:[(0,Rc.jsx)(_j,{}),(0,Rc.jsx)(kj,{}),(0,Rc.jsx)(Cj,{}),(0,Rc.jsx)(Ej,{})]})}function MO(){const e=uP(),t=dv(),n=cv();return(0,Rc.jsxs)(vj,{id:"undo-redo",children:[(0,Rc.jsx)(tj,{...e.undo,disabled:!t}),(0,Rc.jsx)(tj,{...e.redo,disabled:!n})]})}function jO(){const e=uP();return(0,Rc.jsx)(yj,{id:"view",label:"menu.view",children:(0,Rc.jsxs)(vj,{id:"view-actions",children:[(0,Rc.jsx)(tj,{...e["zoom-in"]}),(0,Rc.jsx)(tj,{...e["zoom-out"]}),(0,Rc.jsx)(Aj,{}),(0,Rc.jsx)(Mj,{}),(0,Rc.jsx)(jj,{})]})})}function OO(){const e=uP();return(0,Rc.jsxs)(vj,{id:"extras",children:[(0,Rc.jsx)(tj,{...e["insert-embed"]}),(0,Rc.jsx)(tj,{...e["insert-media"]})]})}function LO(){return(0,Rc.jsx)(vj,{id:"preferences",children:(0,Rc.jsxs)(yj,{id:"preferences",label:"menu.preferences",children:[(0,Rc.jsxs)(vj,{id:"preferences-actions",children:[(0,Rc.jsx)(Gj,{}),(0,Rc.jsx)(qj,{}),(0,Rc.jsx)(Yj,{}),(0,Rc.jsx)(Xj,{}),(0,Rc.jsx)($j,{}),(0,Rc.jsx)(Zj,{}),(0,Rc.jsx)(Qj,{}),(0,Rc.jsx)(Jj,{}),(0,Rc.jsx)(eO,{})]}),(0,Rc.jsx)(vj,{id:"language",children:(0,Rc.jsx)(uO,{})})]})})}const BO=(0,e.memo)((function(e){let{children:t}=e;const n=Jd(),[o,r]=xI("main menu"),i=Y_(),s=null!==t&&void 0!==t?t:(0,Rc.jsx)(CO,{});return(0,Rc.jsxs)(RM,{dir:"ltr",open:o,onOpenChange:r,modal:!1,children:[(0,Rc.jsx)(NM,{asChild:!0,dir:"ltr",children:(0,Rc.jsx)(X_,{type:"icon","data-testid":"main-menu.button",title:i("menu.title"),children:(0,Rc.jsx)(Z_,{icon:"menu",small:!0})})}),(0,Rc.jsx)(DM,{container:n,children:(0,Rc.jsx)(zM,{className:"tlui-menu",side:"bottom",align:"start",collisionPadding:4,alignOffset:0,sideOffset:6,children:(0,Rc.jsx)(II,{type:"menu",sourceId:"main-menu",children:s})})})]})})),RO=(0,e.memo)((function(){const e=z_(),{MainMenu:t,QuickActions:n,ActionsMenu:o,PageMenu:r}=MB();return!t&&!r&&e<6?null:(0,Rc.jsx)("div",{className:"tlui-menu-zone",children:(0,Rc.jsxs)("div",{className:"tlui-buttons__horizontal",children:[t&&(0,Rc.jsx)(t,{}),r&&(0,Rc.jsx)(r,{}),e<6?null:(0,Rc.jsxs)(Rc.Fragment,{children:[n&&(0,Rc.jsx)(n,{}),o&&(0,Rc.jsx)(o,{})]})]})})}));class NO{constructor(e){var t=this;wr(this,"dpr",1),wr(this,"colors",{shapeFill:"rgba(144, 144, 144, .1)",selectFill:"#2f80ed",viewportFill:"rgba(144, 144, 144, .1)"}),wr(this,"id",Np()),wr(this,"cvs",null),wr(this,"pageBounds",[]),wr(this,"collaborators",[]),wr(this,"canvasScreenBounds",new mh),wr(this,"canvasPageBounds",new mh),wr(this,"contentPageBounds",new mh),wr(this,"contentScreenBounds",new mh),wr(this,"originPagePoint",new Gc),wr(this,"originPageCenter",new Gc),wr(this,"isInViewport",!1),wr(this,"debug",!1),wr(this,"updateContentScreenBounds",(()=>{const{contentScreenBounds:e,contentPageBounds:t,canvasScreenBounds:n}=this;let{x:o,y:r,w:i,h:s}=e;if(t.w>t.h){const e=n.w/(t.w/t.h);e>n.h?(o=(n.w-n.w*(n.h/e))/2,r=0,i=n.w*(n.h/e),s=n.h):(o=0,r=(n.h-e)/2,i=n.w,s=e)}else if(t.w<t.h){const e=n.h/(t.h/t.w);o=(n.w-e)/2,r=0,i=e,s=n.h}else o=n.h/2,r=0,i=n.h,s=n.h;e.set(o,r,i,s)})),wr(this,"updateCanvasPageBounds",(()=>{const{canvasPageBounds:e,canvasScreenBounds:t,contentPageBounds:n,contentScreenBounds:o}=this;e.set(0,0,n.width/(o.width/t.width),n.height/(o.height/t.height)),e.center=n.center})),wr(this,"getScreenPoint",((e,t)=>{const{canvasScreenBounds:n}=this;return{x:(e-n.minX)*this.dpr,y:(t-n.minY)*this.dpr}})),wr(this,"getPagePoint",((e,t)=>{const{contentPageBounds:n,contentScreenBounds:o,canvasPageBounds:r}=this,{x:i,y:s}=this.getScreenPoint(e,t);return new Gc(r.minX+i*n.width/o.width,r.minY+s*n.height/o.height,1)})),wr(this,"minimapScreenPointToPagePoint",(function(e,n){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{editor:i}=t,s=i.getViewportPageBounds();let{x:a,y:l}=t.getPagePoint(e,n);if(r){var c,d,u,h;const e=t.editor.getCurrentPageBounds(),n=s,o=(null!==(c=null===e||void 0===e?void 0:e.minX)&&void 0!==c?c:0)-n.width/2,r=(null!==(d=null===e||void 0===e?void 0:e.maxX)&&void 0!==d?d:0)+n.width/2,i=(null!==(u=null===e||void 0===e?void 0:e.minY)&&void 0!==u?u:0)-n.height/2,p=(null!==(h=null===e||void 0===e?void 0:e.maxY)&&void 0!==h?h:0)+n.height/2,f=Math.max(0,o+n.width-a),g=Math.max(0,-(r-n.width-a)),m=Math.max(0,i+n.height-l),v=Math.max(0,-(p-n.height-l)),y=Math.max(0,f-g),b=Math.max(0,g-f),w=Math.max(0,m-v),x=Math.max(0,v-m);y&&y>b?a+=y/2:b&&(a-=b/2),w&&w>x?l+=w/2:x&&(l-=x/2),a=ed(a,o,r),l=ed(l,i,p)}if(o){const{originPagePoint:e}=t;Math.abs(a-e.x)>Math.abs(l-e.y)?l=e.y:a=e.x}return new Gc(a,l)})),wr(this,"updateColors",(()=>{const e=getComputedStyle(this.editor.getContainer());this.colors={shapeFill:e.getPropertyValue("--color-text-3").trim(),selectFill:e.getPropertyValue("--color-selected").trim(),viewportFill:e.getPropertyValue("--color-muted-1").trim()}})),wr(this,"render",(()=>{const{cvs:e,pageBounds:t}=this;this.updateCanvasPageBounds();const{editor:n,canvasScreenBounds:o,canvasPageBounds:r,contentPageBounds:i,contentScreenBounds:s}=this,{width:a,height:l}=o,c=n.getSelectedShapeIds(),d=n.getViewportPageBounds();if(!e||!t)return;const u=e.getContext("2d");if(!u)throw new Error("Minimap (shapes): Could not get context");u.resetTransform(),u.globalAlpha=1,u.clearRect(0,0,a,l);const h=s.width/i.width,p=s.height/i.height;u.translate((a-s.width)/2,(l-s.height)/2),u.scale(h,p),u.translate(-i.minX,-i.minY);const f=8/h,g=8/h,m=1/h,v=1/h,y=f/4,b=g/4,w=new Path2D,x=new Path2D,{shapeFill:S,selectFill:_,viewportFill:k}=this.colors;let C;for(let A=0,M=t.length;A<M;A++)C=t[A],NO.roundedRect(c.includes(C.id)?x:w,C.minX,C.minY,C.width,C.height,ed(f,m,C.width/y),ed(g,v,C.height/b));if(u.fillStyle=S,u.fill(w),u.fillStyle=_,u.fill(x),this.debug){const e=mh.Common(t),{minX:n,minY:o,width:r,height:i}=e;u.strokeStyle="green",u.lineWidth=2/h,u.strokeRect(n+1/h,o+1/p,r-2/h,i-2/p)}{const{brush:e}=n.getInstanceState();if(e){const{x:t,y:n,w:o,h:r}=e;u.beginPath(),NO.sharpRect(u,t,n,o,r),u.closePath(),u.fillStyle=k,u.fill()}}{const{minX:e,minY:t,width:n,height:o}=d;u.beginPath();const r=12/h,i=12/h;NO.roundedRect(u,e,t,n,o,Math.min(n/4,r),Math.min(o/4,i)),u.closePath(),u.fillStyle=k,u.fill(),this.debug&&(u.strokeStyle="orange",u.strokeRect(e+1/h,t+1/p,n-2/h,o-2/p))}const E=2.5/h,I=2.5/p,T=n.getCurrentPageId();let P;for(let A=0;A<this.collaborators.length;A++)P=this.collaborators[A],P.currentPageId===T&&(u.beginPath(),u.ellipse(ed(P.cursor.x,r.minX+E,r.maxX-E),ed(P.cursor.y,r.minY+I,r.maxY-I),5/h,5/p,0,0,Qc),u.fillStyle=P.color,u.fill());if(this.debug){u.lineWidth=2/h;{const{minX:e,minY:t,width:n,height:o}=i;u.strokeStyle="red",u.strokeRect(e+1/h,t+1/p,n-2/h,o-2/p)}{const{minX:e,minY:t,width:n,height:o}=r;u.strokeStyle="blue",u.strokeRect(e+1/h,t+1/p,n-2/h,o-2/p)}}})),this.editor=e}setDpr(e){this.dpr=+e.toFixed(2)}static roundedRect(e,t,n,o,r,i,s){i<1&&s<1?e.rect(t,n,o,r):(e.moveTo(t+i,n),e.lineTo(t+o-i,n),e.quadraticCurveTo(t+o,n,t+o,n+s),e.lineTo(t+o,n+r-s),e.quadraticCurveTo(t+o,n+r,t+o-i,n+r),e.lineTo(t+i,n+r),e.quadraticCurveTo(t,n+r,t,n+r-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+i,n))}static sharpRect(e,t,n,o,r,i,s){e.rect(t,n,o,r)}}function DO(){const t=Hc(),n=e.useRef(null),o=e.useRef(!1),r=Ng(),i=ni("dpr",(()=>t.getInstanceState().devicePixelRatio),[t]),s=e.useMemo((()=>t.store.query.records("instance_presence")),[t]),a=e.useMemo((()=>new NO(t)),[t]);e.useEffect((()=>{const e=requestAnimationFrame((()=>{a.updateColors(),a.render()}));return()=>{cancelAnimationFrame(e)}}),[t,a,r]);const l=e.useCallback((e=>{if(!t.getCurrentPageShapeIds().size)return;const n=a.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!1),o=a.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!0);a.originPagePoint.setTo(o),a.originPageCenter.setTo(t.getViewportPageBounds().center),t.centerOnPoint(n,{duration:kd})}),[t,a]),c=e.useCallback((e=>{const n=e.currentTarget;if(qd(n,e),!t.getCurrentPageShapeIds().size)return;o.current=!0,a.isInViewport=!1;const r=a.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!1),i=a.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!0),s=t.getViewportPageBounds();if(a.isInViewport=s.containsPoint(i),a.isInViewport)a.originPagePoint.setTo(i),a.originPageCenter.setTo(s.center);else{const e=Gc.Sub(s.center,s.point),n=Gc.Add(r,e);a.originPagePoint.setTo(n),a.originPageCenter.setTo(r),t.centerOnPoint(r,{duration:kd})}document.body.addEventListener("pointerup",(function e(t){n&&Yd(n,t),o.current=!1,document.body.removeEventListener("pointerup",e)}))}),[t,a]),d=e.useCallback((e=>{const n=a.minimapScreenPointToPagePoint(e.clientX,e.clientY,e.shiftKey,!0);if(o.current){if(a.isInViewport){const e=a.originPagePoint.clone().sub(a.originPageCenter);return void t.centerOnPoint(Gc.Sub(n,e))}t.centerOnPoint(n)}const r=a.getPagePoint(e.clientX,e.clientY),i=t.pageToScreen(r),s={type:"pointer",target:"canvas",name:"pointer_move",...$d(e),point:i,isPen:t.getInstanceState().isPenMode};t.dispatch(s)}),[t,a]),u=e.useCallback((e=>{const n=lh(e);t.dispatch({type:"wheel",name:"wheel",delta:n,point:new Gc(e.clientX,e.clientY),shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey})}),[t]);return oi("update when dpr changes",(()=>{const e=i.get();a.setDpr(e);const t=n.current,o=t.getBoundingClientRect(),r=o.width*e,s=o.height*e;t.width=r,t.height=s,a.canvasScreenBounds.set(o.x,o.y,r,s),a.cvs=n.current}),[i,a]),oi("minimap render when pagebounds or collaborators changes",(()=>{const e=t.getCurrentPageShapeIds(),n=t.getCurrentPageBounds(),o=t.getViewportPageBounds();i.get();a.contentPageBounds=n?mh.Expand(n,o):o,a.updateContentScreenBounds();const r=[];e.forEach((e=>{let n=t.getShapePageBounds(e);if(!n)return;const o=t.getShapeMask(e);if(o){const e=hf(o,n.corners);if(!e)return;n=mh.FromPoints(e)}n&&(n.id=e,r.push(n))})),a.pageBounds=r,a.collaborators=s.get(),a.render()}),[t,a]),(0,Rc.jsx)("div",{className:"tlui-minimap",children:(0,Rc.jsx)("canvas",{role:"img","aria-label":"minimap",ref:n,className:"tlui-minimap__canvas",onDoubleClick:l,onPointerMove:d,onPointerDown:c,onWheel:u})})}const zO=(0,e.memo)((function(){const t=uP(),n=Y_(),o=z_(),[r,i]=function(t,n){const[o,r]=e.useState(n);e.useLayoutEffect((()=>{const e=localStorage.getItem(t);if(e)try{r(JSON.parse(e))}catch(n){console.error("Could not restore value ".concat(t," from local storage."))}}),[t]);const i=e.useCallback((e=>{r((n=>{const o="function"===typeof e?e(n):e;return localStorage.setItem(t,JSON.stringify(o)),o}))}),[t]);return[o,i]}("minimap",!0),s=(0,e.useCallback)((()=>{i((e=>!e))}),[i]),{ZoomMenu:a,Minimap:l}=MB();return o<R_.MOBILE?null:(0,Rc.jsxs)("div",{className:"tlui-navigation-panel",children:[(0,Rc.jsx)("div",{className:"tlui-buttons__horizontal",children:a&&o<R_.TABLET?(0,Rc.jsx)(a,{}):r?(0,Rc.jsxs)(Rc.Fragment,{children:[a&&(0,Rc.jsx)(a,{}),l&&(0,Rc.jsx)(X_,{type:"icon","data-testid":"minimap.toggle-button",title:n("navigation-zone.toggle-minimap"),className:"tlui-navigation-panel__toggle",onClick:s,children:(0,Rc.jsx)(Z_,{icon:r?"chevrons-ne":"chevrons-sw"})})]}):(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(X_,{type:"icon","data-testid":"minimap.zoom-out",title:"".concat(n(hP(t["zoom-out"].label))," ").concat(vM(t["zoom-out"].kbd)),onClick:()=>t["zoom-out"].onSelect("navigation-zone"),children:(0,Rc.jsx)(Z_,{icon:"minus"})}),a&&(0,Rc.jsx)(a,{}),(0,Rc.jsx)(X_,{type:"icon","data-testid":"minimap.zoom-in",title:"".concat(n(hP(t["zoom-in"].label))," ").concat(vM(t["zoom-in"].kbd)),onClick:()=>t["zoom-in"].onSelect("navigation-zone"),children:(0,Rc.jsx)(Z_,{icon:"plus"})}),l&&(0,Rc.jsx)(X_,{type:"icon","data-testid":"minimap.toggle-button",title:n("navigation-zone.toggle-minimap"),className:"tlui-navigation-panel__toggle",onClick:s,children:(0,Rc.jsx)(Z_,{icon:r?"chevrons-ne":"chevrons-sw"})})]})}),l&&o>=R_.TABLET&&!r&&(0,Rc.jsx)(l,{})]})})),FO=function(t){let{name:n,id:o,isCurrentPage:r}=t;const i=Hc(),s=(0,e.useRef)(null),a=(0,e.useCallback)((e=>{i.renamePage(o,e||"New Page",{ephemeral:!0})}),[i,o]),l=(0,e.useCallback)((e=>{i.mark("rename page"),i.renamePage(o,e||"New Page",{ephemeral:!1})}),[i,o]);return(0,Rc.jsx)(uT,{className:"tlui-page-menu__item__input",ref:e=>s.current=e,defaultValue:n,onValueChange:a,onComplete:l,onCancel:l,shouldManuallyMaintainScrollPositionWhenFocused:!0,autofocus:r,autoselect:!0})},UO=(e,t,n,o)=>{let r;const i=e.getPages(),s=n>o?i[o-1]:i[o],a=n>o?i[o]:i[o+1];r=s&&!a?es(s.index):!s&&a?function(e){return Xi(void 0,e,1)[0]}(i[0].index):Ji(s.index,a.index),r!==i[n].index&&(e.mark("moving page"),e.updatePage({id:t,index:r}))},HO=ti((function(t){let{index:n,listSize:o,item:r,onRename:i}=t;const s=Hc(),a=Y_(),l=s.getPages(),c=(0,e.useCallback)((()=>{s.mark("creating page");const e=ka.createId();s.duplicatePage(r.id,e)}),[s,r]),d=(0,e.useCallback)((()=>{UO(s,r.id,n,n-1)}),[s,r,n]),u=(0,e.useCallback)((()=>{UO(s,r.id,n,n+1)}),[s,r,n]),h=(0,e.useCallback)((()=>{s.mark("deleting page"),s.deletePage(r.id)}),[s,r]);return(0,Rc.jsxs)(GM,{id:"page item submenu ".concat(n),children:[(0,Rc.jsx)(qM,{children:(0,Rc.jsx)(X_,{type:"icon",title:a("page-menu.submenu.title"),children:(0,Rc.jsx)(Z_,{icon:"dots-vertical"})})}),(0,Rc.jsx)(YM,{alignOffset:0,side:"right",sideOffset:-4,children:(0,Rc.jsxs)(II,{type:"menu",sourceId:"page-menu",children:[(0,Rc.jsxs)(vj,{id:"modify",children:[i&&(0,Rc.jsx)(tj,{id:"rename",label:"page-menu.submenu.rename",onSelect:i}),(0,Rc.jsx)(tj,{id:"duplicate",label:"page-menu.submenu.duplicate-page",onSelect:c,disabled:l.length>=40}),n>0&&(0,Rc.jsx)(tj,{id:"move-up",onSelect:d,label:"page-menu.submenu.move-up"}),n<o-1&&(0,Rc.jsx)(tj,{id:"move-down",label:"page-menu.submenu.move-down",onSelect:u})]}),o>1&&(0,Rc.jsx)(vj,{id:"delete",children:(0,Rc.jsx)(tj,{id:"delete",onSelect:h,label:"page-menu.submenu.delete"})})]})})]})})),VO=(0,e.memo)((function(){const t=Hc(),n=Y_(),o=z_(),r=(0,e.useCallback)((()=>m(!1)),[]),[i,s]=xI("page-menu",r),a=36,l=(0,e.useRef)(null),c=ri("pages",(()=>t.getPages()),[t]),d=ri("currentPage",(()=>t.getCurrentPage()),[t]),u=ri("currentPageId",(()=>t.getCurrentPageId()),[t]),h=Cv(),p=ri("maxPageCountReached",(()=>t.getPages().length>=40),[t]),f=ri("isCoarsePointer",(()=>t.getInstanceState().isCoarsePointer),[t]),[g,m]=(0,e.useState)(!1),v=(0,e.useCallback)((()=>{h||m((e=>!e))}),[h]),y=(0,e.useRef)({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),[b,w]=(0,e.useState)(Object.fromEntries(c.map(((e,t)=>[e.id,{y:t*a,offsetY:0,isSelected:!1}]))));(0,e.useLayoutEffect)((()=>{w(Object.fromEntries(c.map(((e,t)=>[e.id,{y:t*a,offsetY:0,isSelected:!1}]))))}),[a,c]),(0,e.useEffect)((()=>{i&&requestAnimationFrame((()=>{const e=document.querySelector('[data-testid="page-menu-item-'.concat(u,'"]'));if(e){const t=l.current;if(!t)return;const n=e.offsetTop;n<t.scrollTop&&t.scrollTo({top:n});const o=n+a;o>t.scrollTop+t.offsetHeight&&t.scrollTo({top:o-t.offsetHeight})}}))}),[a,u,i]);const x=(0,e.useCallback)((e=>{const{clientY:t,currentTarget:n}=e,{dataset:{id:o,index:r}}=n;if(!o||!r)return;const i=y.current;qd(e.currentTarget,e),i.status="pointing",i.pointing={id:o,index:+r};const s=b[o].y;i.startY=t,i.startIndex=Math.max(0,Math.min(Math.round(s/a),c.length-1))}),[a,c.length,b]),S=(0,e.useCallback)((e=>{const t=y.current;if("pointing"===t.status){const{clientY:n}=e,o=n-t.startY;Math.abs(o)>5&&(t.status="dragging")}if("dragging"===t.status){const{clientY:n}=e,o=n-t.startY,r=b[t.pointing.id],{startIndex:i,pointing:s}=t,l=r.y+o,d=Math.max(0,Math.min(Math.round(l/a),c.length-1)),u={...b};if(u[s.id]={y:r.y,offsetY:o,isSelected:!0},d!==t.dragIndex){t.dragIndex=d;for(let e=0;e<c.length;e++){const n=c[e];if(n.id===t.pointing.id)continue;let{y:o}=u[n.id];d===i?o=e*a:d<i?o=d<=e&&e<i?(e+1)*a:e*a:d>i&&(o=d>=e&&e>i?(e-1)*a:e*a),o!==u[n.id].y&&(u[n.id]={y:o,offsetY:0,isSelected:!0})}}w(u)}}),[a,c,b]),_=(0,e.useCallback)((e=>{const n=y.current;if("dragging"===n.status){const{id:e,index:o}=n.pointing;UO(t,e,o,n.dragIndex)}Yd(e.currentTarget,e),n.status="idle"}),[t]),k=(0,e.useCallback)((e=>{const t=y.current;"Escape"===e.key&&("dragging"===t.status&&w(Object.fromEntries(c.map(((e,t)=>[e.id,{y:t*a,offsetY:0,isSelected:!1}])))),t.status="idle")}),[a,c]),C=(0,e.useCallback)((()=>{h||t.batch((()=>{t.mark("creating page");const e=ka.createId();t.createPage({name:n("page-menu.new-page-initial-name"),id:e}),t.setCurrentPage(e),m(!0)}))}),[t,n,h]);return(0,Rc.jsxs)(SI,{id:"pages",onOpenChange:s,open:i,children:[(0,Rc.jsx)(_I,{"data-testid":"main.page-menu",children:(0,Rc.jsxs)(X_,{type:"menu",title:d.name,"data-testid":"page-menu.button",className:"tlui-page-menu__trigger",children:[(0,Rc.jsx)("div",{className:"tlui-page-menu__name",children:d.name}),(0,Rc.jsx)(Z_,{icon:"chevron-down",small:!0})]})}),(0,Rc.jsx)(kI,{side:"bottom",align:"start",sideOffset:6,children:(0,Rc.jsxs)("div",{className:"tlui-page-menu__wrapper",children:[(0,Rc.jsxs)("div",{className:"tlui-page-menu__header",children:[(0,Rc.jsx)("div",{className:"tlui-page-menu__header__title",children:n("page-menu.title")}),!h&&(0,Rc.jsxs)("div",{className:"tlui-buttons__horizontal",children:[(0,Rc.jsx)(X_,{type:"icon","data-testid":"page-menu.edit",title:n(g?"page-menu.edit-done":"page-menu.edit-start"),onClick:v,children:(0,Rc.jsx)(Z_,{icon:g?"check":"edit"})}),(0,Rc.jsx)(X_,{type:"icon","data-testid":"page-menu.create",title:n(p?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:p,onClick:C,children:(0,Rc.jsx)(Z_,{icon:"plus"})})]})]}),(0,Rc.jsx)("div",{"data-testid":"page-menu.list",className:"tlui-page-menu__list tlui-menu__group",style:{height:a*c.length+4},ref:l,children:c.map(((e,r)=>{var i;const s=null!==(i=b[e.id])&&void 0!==i?i:{position:40*r,offsetY:0};return g?(0,Rc.jsxs)("div",{"data-testid":"page-menu.item",className:"tlui-page_menu__item__sortable",style:{zIndex:e.id===d.id?888:r,transform:"translate(0px, ".concat(s.y+s.offsetY,"px)")},children:[(0,Rc.jsx)(X_,{type:"icon",tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",onPointerDown:x,onPointerUp:_,onPointerMove:S,onKeyDown:k,"data-id":e.id,"data-index":r,children:(0,Rc.jsx)(Z_,{icon:"drag-handle-dots"})}),o<R_.TABLET_SM&&f?(0,Rc.jsxs)(X_,{type:"normal",className:"tlui-page-menu__item__button",onClick:()=>{const n=window.prompt("Rename page",e.name);n&&n!==e.name&&t.renamePage(e.id,n)},onDoubleClick:v,children:[(0,Rc.jsx)(oO,{checked:e.id===d.id}),(0,Rc.jsx)(PI,{children:e.name})]}):(0,Rc.jsx)("div",{className:"tlui-page_menu__item__sortable__title",style:{height:a},children:(0,Rc.jsx)(FO,{id:e.id,name:e.name,isCurrentPage:e.id===d.id})}),!h&&(0,Rc.jsx)("div",{className:"tlui-page_menu__item__submenu","data-isediting":g,children:(0,Rc.jsx)(HO,{index:r,item:e,listSize:c.length})})]},e.id+"_editing"):(0,Rc.jsxs)("div",{"data-testid":"page-menu.item",className:"tlui-page-menu__item",children:[(0,Rc.jsxs)(X_,{type:"normal",className:"tlui-page-menu__item__button",onClick:()=>t.setCurrentPage(e.id),onDoubleClick:v,title:n("page-menu.go-to-page"),children:[(0,Rc.jsx)(oO,{checked:e.id===d.id}),(0,Rc.jsx)(PI,{children:e.name})]}),!h&&(0,Rc.jsx)("div",{className:"tlui-page_menu__item__submenu",children:(0,Rc.jsx)(HO,{index:r,item:e,listSize:c.length,onRename:()=>{if(t.environment.isIos){const n=window.prompt("Rename page",e.name);n&&n!==e.name&&t.renamePage(e.id,n)}else t.batch((()=>{m(!0),t.setCurrentPage(e.id)}))}})})]},e.id)}))})]})})]})}));function WO(){const e=uP(),t=Hc(),n=dv(),o=cv(),r=av(1),i=Cv(),s=ri("should display quick actions",(()=>t.isInAny("select","hand","zoom")),[t]);if(!i||s)return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(tj,{...e.undo,disabled:!n}),(0,Rc.jsx)(tj,{...e.redo,disabled:!o}),(0,Rc.jsx)(tj,{...e.delete,disabled:!r}),(0,Rc.jsx)(tj,{...e.duplicate,disabled:!r})]})}const KO=(0,e.memo)((function(e){let{children:t}=e;const n=null!==t&&void 0!==t?t:(0,Rc.jsx)(WO,{});return(0,Rc.jsx)(II,{type:"small-icons",sourceId:"quick-actions",children:n})})),GO=Object.freeze([Cl,Il,Tl,Ml]);function qO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GO;const t=Hc();return ri("getRelevantStyles",(()=>{var n;const o=new If(t.getSharedStyles()),r=!(null===(n=t.root.getCurrent())||void 0===n||!n.shapeType),i=t.isIn("select")&&t.getSelectedShapeIds().length>0;if(0===o.size&&t.isIn("select")&&0===t.getSelectedShapeIds().length)for(const s of e)o.applyValue(s,t.getStyleForNextShape(s));return r||i||o.size>0?o:null}),[t])}const YO={color:[{value:"black",icon:"color"},{value:"grey",icon:"color"},{value:"light-violet",icon:"color"},{value:"violet",icon:"color"},{value:"blue",icon:"color"},{value:"light-blue",icon:"color"},{value:"yellow",icon:"color"},{value:"orange",icon:"color"},{value:"green",icon:"color"},{value:"light-green",icon:"color"},{value:"light-red",icon:"color"},{value:"red",icon:"color"}],fill:[{value:"none",icon:"fill-none"},{value:"semi",icon:"fill-semi"},{value:"solid",icon:"fill-solid"},{value:"pattern",icon:"fill-pattern"}],dash:[{value:"draw",icon:"dash-draw"},{value:"dashed",icon:"dash-dashed"},{value:"dotted",icon:"dash-dotted"},{value:"solid",icon:"dash-solid"}],size:[{value:"s",icon:"size-small"},{value:"m",icon:"size-medium"},{value:"l",icon:"size-large"},{value:"xl",icon:"size-extra-large"}],font:[{value:"draw",icon:"font-draw"},{value:"sans",icon:"font-sans"},{value:"serif",icon:"font-serif"},{value:"mono",icon:"font-mono"}],horizontalAlign:[{value:"start",icon:"text-align-left"},{value:"middle",icon:"text-align-center"},{value:"end",icon:"text-align-right"}],verticalAlign:[{value:"start",icon:"vertical-align-start"},{value:"middle",icon:"vertical-align-center"},{value:"end",icon:"vertical-align-end"}],geo:[{value:"rectangle",icon:"geo-rectangle"},{value:"ellipse",icon:"geo-ellipse"},{value:"cloud",icon:"geo-cloud"},{value:"triangle",icon:"geo-triangle"},{value:"diamond",icon:"geo-diamond"},{value:"pentagon",icon:"geo-pentagon"},{value:"hexagon",icon:"geo-hexagon"},{value:"octagon",icon:"geo-octagon"},{value:"star",icon:"geo-star"},{value:"rhombus",icon:"geo-rhombus"},{value:"rhombus-2",icon:"geo-rhombus-2"},{value:"oval",icon:"geo-oval"},{value:"trapezoid",icon:"geo-trapezoid"},{value:"arrow-right",icon:"geo-arrow-right"},{value:"arrow-left",icon:"geo-arrow-left"},{value:"arrow-up",icon:"geo-arrow-up"},{value:"arrow-down",icon:"geo-arrow-down"},{value:"x-box",icon:"geo-x-box"},{value:"check-box",icon:"geo-check-box"}],arrowheadStart:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],arrowheadEnd:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],spline:[{value:"line",icon:"spline-line"},{value:"cubic",icon:"spline-cubic"}]};const XO=(0,e.memo)((function(t){const{uiType:n,items:o,title:r,style:i,value:s,onValueChange:a}=t,l=Hc(),c=Y_(),d=(0,e.useRef)(!1),{handleButtonClick:u,handleButtonPointerDown:h,handleButtonPointerEnter:p,handleButtonPointerUp:f}=(0,e.useMemo)((()=>{const e=()=>{d.current=!1,window.removeEventListener("pointerup",e)};return{handleButtonClick:e=>{const{id:t}=e.currentTarget.dataset;"shared"===s.type&&s.value===t||(l.mark("point picker item"),a(i,t,!1))},handleButtonPointerDown:t=>{const{id:n}=t.currentTarget.dataset;l.mark("point picker item"),a(i,n,!0),d.current=!0,window.addEventListener("pointerup",e)},handleButtonPointerEnter:e=>{if(!d.current)return;const{id:t}=e.currentTarget.dataset;a(i,t,!0)},handleButtonPointerUp:e=>{const{id:t}=e.currentTarget.dataset;"shared"===s.type&&s.value===t||a(i,t,!1)}}}),[s,l,a,i]),g=ri("theme",(()=>kl({isDarkMode:l.user.getIsDarkMode()})),[l]);return(0,Rc.jsx)("div",{"data-testid":"style.".concat(n),className:Nc("tlui-buttons__grid"),children:o.map((e=>(0,Rc.jsx)(X_,{type:"icon","data-id":e.value,"data-testid":"style.".concat(n,".").concat(e.value),"aria-label":e.value,"data-state":"shared"===s.type&&s.value===e.value?"hinted":void 0,title:r+" \u2014 "+c("".concat(n,"-style.").concat(e.value)),className:Nc("tlui-button-grid__button"),style:i===Cl?{color:g[e.value].solid}:void 0,onPointerEnter:p,onPointerDown:h,onPointerUp:f,onClick:u,children:(0,Rc.jsx)(Z_,{icon:e.icon})},e.value)))})}));function $O(e,t){let[n,o]=t;return Math.min(o,Math.max(n,e))}const ZO=["PageUp","PageDown"],QO=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],JO={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},eL="Slider",[tL,nL,oL]=PS(eL),[rL,iL]=SS(eL,[oL]),[sL,aL]=rL(eL),lL=(0,e.forwardRef)(((t,n)=>{const{name:o,min:r=0,max:i=100,step:s=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[r],value:u,onValueChange:h=(()=>{}),onValueCommit:p=(()=>{}),inverted:f=!1,...g}=t,[m,v]=(0,e.useState)(null),y=xS(n,(e=>v(e))),b=(0,e.useRef)(new Set),w=(0,e.useRef)(0),x="horizontal"===a,S=!m||Boolean(m.closest("form")),_=x?uL:hL,[k=[],C]=YS({prop:u,defaultProp:d,onChange:e=>{var t;null===(t=[...b.current][w.current])||void 0===t||t.focus(),h(e)}}),E=(0,e.useRef)(k);function I(e,t){let{commit:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1};const o=function(e){return(String(e).split(".")[1]||"").length}(s),a=function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-r)/s)*s+r,o),l=$O(a,[r,i]);C((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const o=[...e];return o[n]=t,o.sort(((e,t)=>e-t))}(e,l,t);if(function(e,t){if(t>0){const n=function(e){return e.slice(0,-1).map(((t,n)=>e[n+1]-t))}(e);return Math.min(...n)>=t}return!0}(o,c*s)){w.current=o.indexOf(l);const t=String(o)!==String(e);return t&&n&&p(o),t?o:e}return e}))}return(0,e.createElement)(sL,{scope:t.__scopeSlider,disabled:l,min:r,max:i,valueIndexToChangeRef:w,thumbs:b.current,values:k,orientation:a},(0,e.createElement)(tL.Provider,{scope:t.__scopeSlider},(0,e.createElement)(tL.Slot,{scope:t.__scopeSlider},(0,e.createElement)(_,yS({"aria-disabled":l,"data-disabled":l?"":void 0},g,{ref:y,onPointerDown:bS(g.onPointerDown,(()=>{l||(E.current=k)})),min:r,max:i,inverted:f,onSlideStart:l?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const n=e.map((e=>Math.abs(e-t))),o=Math.min(...n);return n.indexOf(o)}(k,e);I(e,t)},onSlideMove:l?void 0:function(e){I(e,w.current)},onSlideEnd:l?void 0:function(){const e=E.current[w.current];k[w.current]!==e&&p(k)},onHomeKeyDown:()=>!l&&I(r,0,{commit:!0}),onEndKeyDown:()=>!l&&I(i,k.length-1,{commit:!0}),onStepKeyDown:e=>{let{event:t,direction:n}=e;if(!l){const e=ZO.includes(t.key)||t.shiftKey&&QO.includes(t.key)?10:1,o=w.current;I(k[o]+s*e*n,o,{commit:!0})}}})))),S&&k.map(((t,n)=>(0,e.createElement)(xL,{key:n,name:o?o+(k.length>1?"[]":""):void 0,value:t}))))})),[cL,dL]=rL(eL,{startEdge:"left",endEdge:"right",size:"width",direction:1}),uL=(0,e.forwardRef)(((t,n)=>{const{min:o,max:r,dir:i,inverted:s,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=t,[h,p]=(0,e.useState)(null),f=xS(n,(e=>p(e))),g=(0,e.useRef)(),m=fP(i),v="ltr"===m,y=v&&!s||!v&&s;function b(e){const t=g.current||h.getBoundingClientRect(),n=_L([0,t.width],y?[o,r]:[r,o]);return g.current=t,n(e-t.left)}return(0,e.createElement)(cL,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width"},(0,e.createElement)(pL,yS({dir:m,"data-orientation":"horizontal"},u,{ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=b(e.clientX);null===a||void 0===a||a(t)},onSlideMove:e=>{const t=b(e.clientX);null===l||void 0===l||l(t)},onSlideEnd:()=>{g.current=void 0,null===c||void 0===c||c()},onStepKeyDown:e=>{const t=JO[y?"from-left":"from-right"].includes(e.key);null===d||void 0===d||d({event:e,direction:t?-1:1})}})))})),hL=(0,e.forwardRef)(((t,n)=>{const{min:o,max:r,inverted:i,onSlideStart:s,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...d}=t,u=(0,e.useRef)(null),h=xS(n,u),p=(0,e.useRef)(),f=!i;function g(e){const t=p.current||u.current.getBoundingClientRect(),n=_L([0,t.height],f?[r,o]:[o,r]);return p.current=t,n(e-t.top)}return(0,e.createElement)(cL,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1},(0,e.createElement)(pL,yS({"data-orientation":"vertical"},d,{ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=g(e.clientY);null===s||void 0===s||s(t)},onSlideMove:e=>{const t=g(e.clientY);null===a||void 0===a||a(t)},onSlideEnd:()=>{p.current=void 0,null===l||void 0===l||l()},onStepKeyDown:e=>{const t=JO[f?"from-bottom":"from-top"].includes(e.key);null===c||void 0===c||c({event:e,direction:t?-1:1})}})))})),pL=(0,e.forwardRef)(((t,n)=>{const{__scopeSlider:o,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c,...d}=t,u=aL(eL,o);return(0,e.createElement)(AS.span,yS({},d,{ref:n,onKeyDown:bS(t.onKeyDown,(e=>{"Home"===e.key?(a(e),e.preventDefault()):"End"===e.key?(l(e),e.preventDefault()):ZO.concat(QO).includes(e.key)&&(c(e),e.preventDefault())})),onPointerDown:bS(t.onPointerDown,(e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(t)?t.focus():r(e)})),onPointerMove:bS(t.onPointerMove,(e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)})),onPointerUp:bS(t.onPointerUp,(e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),s(e))}))}))})),fL="SliderTrack",gL=(0,e.forwardRef)(((t,n)=>{const{__scopeSlider:o,...r}=t,i=aL(fL,o);return(0,e.createElement)(AS.span,yS({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},r,{ref:n}))})),mL="SliderRange",vL=(0,e.forwardRef)(((t,n)=>{const{__scopeSlider:o,...r}=t,i=aL(mL,o),s=dL(mL,o),a=xS(n,(0,e.useRef)(null)),l=i.values.length,c=i.values.map((e=>SL(e,i.min,i.max))),d=l>1?Math.min(...c):0,u=100-Math.max(...c);return(0,e.createElement)(AS.span,yS({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},r,{ref:a,style:{...t.style,[s.startEdge]:d+"%",[s.endEdge]:u+"%"}}))})),yL="SliderThumb",bL=(0,e.forwardRef)(((t,n)=>{const o=nL(t.__scopeSlider),[r,i]=(0,e.useState)(null),s=xS(n,(e=>i(e))),a=(0,e.useMemo)((()=>r?o().findIndex((e=>e.ref.current===r)):-1),[o,r]);return(0,e.createElement)(wL,yS({},t,{ref:s,index:a}))})),wL=(0,e.forwardRef)(((t,n)=>{const{__scopeSlider:o,index:r,...i}=t,s=aL(yL,o),a=dL(yL,o),[l,c]=(0,e.useState)(null),d=xS(n,(e=>c(e))),u=MC(l),h=s.values[r],p=void 0===h?0:SL(h,s.min,s.max),f=function(e,t){return t>2?"Value ".concat(e+1," of ").concat(t):2===t?["Minimum","Maximum"][e]:void 0}(r,s.values.length),g=null===u||void 0===u?void 0:u[a.size],m=g?function(e,t,n){const o=e/2,r=_L([0,50],[0,o]);return(o-r(t)*n)*n}(g,p,a.direction):0;return(0,e.useEffect)((()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}}),[l,s.thumbs]),(0,e.createElement)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:"calc(".concat(p,"% + ").concat(m,"px)")}},(0,e.createElement)(tL.ItemSlot,{scope:t.__scopeSlider},(0,e.createElement)(AS.span,yS({role:"slider","aria-label":t["aria-label"]||f,"aria-valuemin":s.min,"aria-valuenow":h,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},i,{ref:d,style:void 0===h?{display:"none"}:t.style,onFocus:bS(t.onFocus,(()=>{s.valueIndexToChangeRef.current=r}))}))))})),xL=t=>{const{value:n,...o}=t,r=(0,e.useRef)(null),i=function(t){const n=(0,e.useRef)({value:t,previous:t});return(0,e.useMemo)((()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous)),[t])}(n);return(0,e.useEffect)((()=>{const e=r.current,t=window.HTMLInputElement.prototype,o=Object.getOwnPropertyDescriptor(t,"value").set;if(i!==n&&o){const t=new Event("input",{bubbles:!0});o.call(e,n),e.dispatchEvent(t)}}),[i,n]),(0,e.createElement)("input",yS({style:{display:"none"}},o,{ref:r,defaultValue:n}))};function SL(e,t,n){return $O(100/(n-t)*(e-t),[0,100])}function _L(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(n-e[0])}}const kL=lL,CL=gL,EL=vL,IL=bL,TL=(0,e.memo)((function(t){const{title:n,steps:o,value:r,label:i,onValueChange:s}=t,a=Hc(),l=Y_(),c=(0,e.useCallback)((e=>{s(e[0],!0)}),[s]),d=(0,e.useCallback)((()=>{a.mark("click slider")}),[a]),u=(0,e.useCallback)((()=>{r&&s(r,!1)}),[r,s]);return(0,Rc.jsx)("div",{className:"tlui-slider__container",children:(0,Rc.jsxs)(kL,{"data-testid":t["data-testid"],className:"tlui-slider","area-label":"Opacity",dir:"ltr",min:0,max:o,step:1,value:r?[r]:void 0,onPointerDown:d,onValueChange:c,onPointerUp:u,title:n+" \u2014 "+l(i),children:[(0,Rc.jsx)(CL,{className:"tlui-slider__track",dir:"ltr",children:null!==r&&(0,Rc.jsx)(EL,{className:"tlui-slider__range",dir:"ltr"})}),null!==r&&(0,Rc.jsx)(IL,{className:"tlui-slider__thumb",dir:"ltr"})]})})}));const PL=e.memo((function(t){let{label:n,uiTypeA:o,uiTypeB:r,labelA:i,labelB:s,itemsA:a,itemsB:l,styleA:c,styleB:d,valueA:u,valueB:h,onValueChange:p}=t;const f=Y_(),g=e.useMemo((()=>{var e,t;return null!==(e=null===(t=a.find((e=>"shared"===u.type&&u.value===e.value)))||void 0===t?void 0:t.icon)&&void 0!==e?e:"mixed"}),[a,u]),m=e.useMemo((()=>{var e,t;return null!==(e=null===(t=l.find((e=>"shared"===h.type&&h.value===e.value)))||void 0===t?void 0:t.icon)&&void 0!==e?e:"mixed"}),[l,h]);return void 0===u&&void 0===h?null:(0,Rc.jsxs)("div",{className:"tlui-style-panel__double-select-picker",children:[(0,Rc.jsx)("div",{title:f(n),className:"tlui-style-panel__double-select-picker-label",children:f(n)}),(0,Rc.jsxs)("div",{className:"tlui-buttons__horizontal",children:[(0,Rc.jsxs)(GM,{id:"style panel ".concat(o," A"),children:[(0,Rc.jsx)(qM,{children:(0,Rc.jsx)(X_,{type:"icon","data-testid":"style.".concat(o),title:f(i)+" \u2014 "+(null===u||"mixed"===u.type?f("style-panel.mixed"):f("".concat(o,"-style.").concat(u.value))),children:(0,Rc.jsx)(Z_,{icon:g,small:!0,invertIcon:!0})})}),(0,Rc.jsx)(YM,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:(0,Rc.jsx)("div",{className:"tlui-buttons__grid",children:a.map(((e,t)=>(0,Rc.jsx)(JM,{"data-testid":"style.".concat(o,".").concat(e.value),children:(0,Rc.jsx)(X_,{type:"icon",onClick:()=>p(c,e.value,!1),title:"".concat(f(i)," \u2014 ").concat(f("".concat(o,"-style.").concat(e.value))),children:(0,Rc.jsx)(Z_,{icon:e.icon,invertIcon:!0})},e.value)},t)))})})]}),(0,Rc.jsxs)(GM,{id:"style panel ".concat(r),children:[(0,Rc.jsx)(qM,{children:(0,Rc.jsx)(X_,{type:"icon","data-testid":"style.".concat(r),title:f(s)+" \u2014 "+(null===h||"mixed"===h.type?f("style-panel.mixed"):f("".concat(r,"-style.").concat(h.value))),children:(0,Rc.jsx)(Z_,{icon:m,small:!0})})}),(0,Rc.jsx)(YM,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:(0,Rc.jsx)("div",{className:"tlui-buttons__grid",children:l.map((e=>(0,Rc.jsx)(JM,{children:(0,Rc.jsx)(X_,{type:"icon",title:"".concat(f(s)," \u2014 ").concat(f("".concat(r,"-style.").concat(e.value))),"data-testid":"style.".concat(r,".").concat(e.value),onClick:()=>p(d,e.value,!1),children:(0,Rc.jsx)(Z_,{icon:e.icon})})},e.value)))})})]})]})]})}));const AL=e.memo((function(t){let{id:n,label:o,uiType:r,style:i,items:s,type:a,value:l,onValueChange:c}=t;const d=Y_(),u=Hc(),h=e.useMemo((()=>{var e;return null===(e=s.find((e=>"shared"===l.type&&e.value===l.value)))||void 0===e?void 0:e.icon}),[s,l]),p="mixed"===l.type?d("style-panel.mixed"):d("".concat(r,"-style.").concat(l.value)),f=o?d(o):"";return(0,Rc.jsxs)(GM,{id:"style panel ".concat(n),children:[(0,Rc.jsx)(qM,{children:(0,Rc.jsxs)(X_,{type:a,"data-testid":"style.".concat(r),title:p,children:[(0,Rc.jsx)(PI,{children:f}),(0,Rc.jsx)(Z_,{icon:null!==h&&void 0!==h?h:"mixed"})]})}),(0,Rc.jsx)(YM,{side:"left",align:"center",alignOffset:0,children:(0,Rc.jsx)("div",{className:"tlui-buttons__grid",children:s.map((e=>(0,Rc.jsx)(JM,{children:(0,Rc.jsx)(X_,{type:"icon","data-testid":"style.".concat(r,".").concat(e.value),title:d("".concat(r,"-style.").concat(e.value)),onClick:()=>{u.mark("select style dropdown item"),c(i,e.value,!1)},children:(0,Rc.jsx)(Z_,{icon:e.icon})})},e.value)))})})]})}));function ML(e){let{styles:t}=e;if(!t)return null;const n=t.get(oc),o=t.get(Ll),r=t.get(Ol),i=void 0===n,s=void 0===o&&void 0===r,a=void 0===t.get(gc),l=void 0===t.get(Pl);return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(OL,{styles:t}),!l&&(0,Rc.jsx)(LL,{styles:t}),!(i&&s&&a)&&(0,Rc.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[(0,Rc.jsx)(BL,{styles:t}),(0,Rc.jsx)(NL,{styles:t}),(0,Rc.jsx)(RL,{styles:t})]})]})}function jL(){const t=Hc(),n=wI();return e.useMemo((()=>function(e,o,r){t.batch((()=>{t.isIn("select")&&t.setStyleForSelectedShapes(e,o,{squashing:r}),t.setStyleForNextShapes(e,o,{squashing:r}),t.updateInstanceState({isChangingStyle:!0},{ephemeral:!0})})),n("set-style",{source:"style-panel",id:e.id,value:o})}),[t,n])}function OL(e){let{styles:t}=e;const n=Y_(),o=jL(),r=t.get(Cl),i=t.get(Tl),s=t.get(Il),a=t.get(Ml),l=void 0!==i||void 0!==s||void 0!==a;return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsxs)("div",{tabIndex:-1,className:"tlui-style-panel__section__common","aria-label":"style panel styles","data-testid":"style.panel",children:[void 0===r?null:(0,Rc.jsx)(XO,{title:n("style-panel.color"),uiType:"color",style:Cl,items:YO.color,value:r,onValueChange:o}),(0,Rc.jsx)(zL,{})]}),l&&(0,Rc.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[void 0===i?null:(0,Rc.jsx)(XO,{title:n("style-panel.fill"),uiType:"fill",style:Tl,items:YO.fill,value:i,onValueChange:o}),void 0===s?null:(0,Rc.jsx)(XO,{title:n("style-panel.dash"),uiType:"dash",style:Il,items:YO.dash,value:s,onValueChange:o}),void 0===a?null:(0,Rc.jsx)(XO,{title:n("style-panel.size"),uiType:"size",style:Ml,items:YO.size,value:a,onValueChange:o})]})]})}function LL(e){let{styles:t}=e;const n=Y_(),o=jL(),r=t.get(Pl),i=t.get(tc),s=t.get(nc);return void 0===r&&void 0===i?null:(0,Rc.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel text",children:[void 0===r?null:(0,Rc.jsx)(XO,{title:n("style-panel.font"),uiType:"font",style:Pl,items:YO.font,value:r,onValueChange:o}),void 0===i?null:(0,Rc.jsxs)("div",{className:"tlui-style-panel__row",children:[(0,Rc.jsx)(XO,{title:n("style-panel.align"),uiType:"align",style:tc,items:YO.horizontalAlign,value:i,onValueChange:o}),(0,Rc.jsx)("div",{className:"tlui-style-panel__row__extra-button",children:void 0===s?(0,Rc.jsx)(X_,{type:"icon",title:n("style-panel.vertical-align"),"data-testid":"vertical-align",disabled:!0,children:(0,Rc.jsx)(Z_,{icon:"vertical-align-center"})}):(0,Rc.jsx)(AL,{type:"icon",id:"geo-vertical-alignment",uiType:"verticalAlign",style:nc,items:YO.verticalAlign,value:s,onValueChange:o})})]})]})}function BL(e){let{styles:t}=e;const n=jL(),o=t.get(oc);return void 0===o?null:(0,Rc.jsx)(AL,{id:"geo",type:"menu",label:"style-panel.geo",uiType:"geo",style:oc,items:YO.geo,value:o,onValueChange:n})}function RL(e){let{styles:t}=e;const n=jL(),o=t.get(gc);return void 0===o?null:(0,Rc.jsx)(AL,{id:"spline",type:"menu",label:"style-panel.spline",uiType:"spline",style:gc,items:YO.spline,value:o,onValueChange:n})}function NL(e){let{styles:t}=e;const n=jL(),o=t.get(Ll),r=t.get(Ol);return o&&r?(0,Rc.jsx)(PL,{label:"style-panel.arrowheads",uiTypeA:"arrowheadStart",styleA:Ol,itemsA:YO.arrowheadStart,valueA:r,uiTypeB:"arrowheadEnd",styleB:Ll,itemsB:YO.arrowheadEnd,valueB:o,onValueChange:n,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"}):null}const DL=[.1,.25,.5,.75,1];function zL(){const t=Hc(),n=ri("opacity",(()=>t.getSharedOpacity()),[t]),o=wI(),r=Y_(),i=e.useCallback(((e,n)=>{const r=DL[e];t.batch((()=>{t.isIn("select")&&t.setOpacityForSelectedShapes(r,{squashing:n}),t.setOpacityForNextShapes(r,{squashing:n}),t.updateInstanceState({isChangingStyle:!0},{ephemeral:!0})})),o("set-style",{source:"style-panel",id:"opacity",value:e})}),[t,o]);if(void 0===n)return null;const s="mixed"===n.type?-1:DL.indexOf(function(e,t){let n,o=1/0;for(const r of e){const e=t(r);e<o&&(n=r,o=e)}return n}(DL,(e=>Math.abs(e-n.value))));return(0,Rc.jsx)(TL,{"data-testid":"style.opacity",value:s>=0?s:DL.length-1,label:"mixed"===n.type?"style-panel.mixed":"opacity-style.".concat(n.value),onValueChange:i,steps:DL.length-1,title:r("style-panel.opacity")})}const FL=(0,e.memo)((function(t){let{isMobile:n,children:o}=t;const r=Hc(),i=qO(),s=(0,e.useCallback)((()=>{n||r.updateInstanceState({isChangingStyle:!1},{ephemeral:!0})}),[r,n]),a=null!==o&&void 0!==o?o:(0,Rc.jsx)(ML,{styles:i});return(0,Rc.jsx)("div",{className:Nc("tlui-style-panel",{"tlui-style-panel__wrapper":!n}),"data-ismobile":n,onPointerLeave:s,children:a})})),UL="undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function HL(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent("on".concat(t),n)}function VL(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent&&e.detachEvent("on".concat(t),n)}function WL(e,t){const n=t.slice(0,t.length-1);for(let o=0;o<n.length;o++)n[o]=e[n[o].toLowerCase()];return n}function KL(e){"string"!==typeof e&&(e="");const t=(e=e.replace(/\s/g,"")).split(",");let n=t.lastIndexOf("");for(;n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}const GL={backspace:8,"\u232b":8,tab:9,clear:12,enter:13,"\u21a9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21ea":20,",":188,".":190,"/":191,"`":192,"-":UL?173:189,"=":UL?61:187,";":UL?59:186,"'":222,"[":219,"]":221,"\\":220},qL={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},YL={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},XL={16:!1,18:!1,17:!1,91:!1},$L={};for(let n=1;n<20;n++)GL["f".concat(n)]=111+n;let ZL=[],QL=null,JL="all";const eB=new Map,tB=e=>GL[e.toLowerCase()]||qL[e.toLowerCase()]||e.toUpperCase().charCodeAt(0);function nB(e){JL=e||"all"}function oB(){return JL||"all"}function rB(e){if("undefined"===typeof e)Object.keys($L).forEach((e=>{Array.isArray($L[e])&&$L[e].forEach((e=>iB(e))),delete $L[e]})),cB(null);else if(Array.isArray(e))e.forEach((e=>{e.key&&iB(e)}));else if("object"===typeof e)e.key&&iB(e);else if("string"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];let[r,i]=n;"function"===typeof r&&(i=r,r=""),iB({key:e,scope:r,method:i,splitKey:"+"})}}const iB=e=>{let{key:t,scope:n,method:o,splitKey:r="+"}=e;KL(t).forEach((e=>{const t=e.split(r),i=t.length,s=t[i-1],a="*"===s?"*":tB(s);if(!$L[a])return;n||(n=oB());const l=i>1?WL(qL,t):[],c=[];$L[a]=$L[a].filter((e=>{const t=(!o||e.method===o)&&e.scope===n&&function(e,t){const n=e.length>=t.length?e:t,o=e.length>=t.length?t:e;let r=!0;for(let i=0;i<n.length;i++)-1===o.indexOf(n[i])&&(r=!1);return r}(e.mods,l);return t&&c.push(e.element),!t})),c.forEach((e=>cB(e)))}))};function sB(e,t,n,o){if(t.element!==o)return;let r;if(t.scope===n||"all"===t.scope){r=t.mods.length>0;for(const e in XL)Object.prototype.hasOwnProperty.call(XL,e)&&(!XL[e]&&t.mods.indexOf(+e)>-1||XL[e]&&-1===t.mods.indexOf(+e))&&(r=!1);(0!==t.mods.length||XL[16]||XL[18]||XL[17]||XL[91])&&!r&&"*"!==t.shortcut||(t.keys=[],t.keys=t.keys.concat(ZL),!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function aB(e,t){const n=$L["*"];let o=e.keyCode||e.which||e.charCode;if(!lB.filter.call(this,e))return;if(93!==o&&224!==o||(o=91),-1===ZL.indexOf(o)&&229!==o&&ZL.push(o),["ctrlKey","altKey","shiftKey","metaKey"].forEach((t=>{const n=YL[t];e[t]&&-1===ZL.indexOf(n)?ZL.push(n):!e[t]&&ZL.indexOf(n)>-1?ZL.splice(ZL.indexOf(n),1):"metaKey"===t&&e[t]&&3===ZL.length&&(e.ctrlKey||e.shiftKey||e.altKey||(ZL=ZL.slice(ZL.indexOf(n))))})),o in XL){XL[o]=!0;for(const e in qL)qL[e]===o&&(lB[e]=!0);if(!n)return}for(const a in XL)Object.prototype.hasOwnProperty.call(XL,a)&&(XL[a]=e[YL[a]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===ZL.indexOf(17)&&ZL.push(17),-1===ZL.indexOf(18)&&ZL.push(18),XL[17]=!0,XL[18]=!0);const r=oB();if(n)for(let a=0;a<n.length;a++)n[a].scope===r&&("keydown"===e.type&&n[a].keydown||"keyup"===e.type&&n[a].keyup)&&sB(e,n[a],r,t);if(!(o in $L))return;const i=$L[o],s=i.length;for(let a=0;a<s;a++)if(("keydown"===e.type&&i[a].keydown||"keyup"===e.type&&i[a].keyup)&&i[a].key){const n=i[a],{splitKey:o}=n,s=n.key.split(o),l=[];for(let e=0;e<s.length;e++)l.push(tB(s[e]));l.sort().join("")===ZL.sort().join("")&&sB(e,n,r,t)}}function lB(e,t,n){ZL=[];const o=KL(e);let r=[],i="all",s=document,a=0,l=!1,c=!0,d="+",u=!1,h=!1;for(void 0===n&&"function"===typeof t&&(n=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(i=t.scope),t.element&&(s=t.element),t.keyup&&(l=t.keyup),void 0!==t.keydown&&(c=t.keydown),void 0!==t.capture&&(u=t.capture),"string"===typeof t.splitKey&&(d=t.splitKey),!0===t.single&&(h=!0)),"string"===typeof t&&(i=t),h&&rB(e,i);a<o.length;a++)r=[],(e=o[a].split(d)).length>1&&(r=WL(qL,e)),(e="*"===(e=e[e.length-1])?"*":tB(e))in $L||($L[e]=[]),$L[e].push({keyup:l,keydown:c,scope:i,mods:r,shortcut:o[a],method:n,key:o[a],splitKey:d,element:s});if("undefined"!==typeof s&&window){if(!eB.has(s)){const e=function(){return aB(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event,s)},t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;aB(e,s),function(e){let t=e.keyCode||e.which||e.charCode;const n=ZL.indexOf(t);if(n>=0&&ZL.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&ZL.splice(0,ZL.length),93!==t&&224!==t||(t=91),t in XL){XL[t]=!1;for(const e in qL)qL[e]===t&&(lB[e]=!1)}}(e)};eB.set(s,{keydownListener:e,keyupListenr:t,capture:u}),HL(s,"keydown",e,u),HL(s,"keyup",t,u)}if(!QL){const e=()=>{ZL=[]};QL={listener:e,capture:u},HL(window,"focus",e,u)}}}function cB(e){const t=Object.values($L).flat();if(t.findIndex((t=>{let{element:n}=t;return n===e}))<0){const{keydownListener:t,keyupListenr:n,capture:o}=eB.get(e)||{};t&&n&&(VL(e,"keyup",n,o),VL(e,"keydown",t,o),eB.delete(e))}if(t.length<=0||eB.size<=0){if(Object.keys(eB).forEach((e=>{const{keydownListener:t,keyupListenr:n,capture:o}=eB.get(e)||{};t&&n&&(VL(e,"keyup",n,o),VL(e,"keydown",t,o),eB.delete(e))})),eB.clear(),Object.keys($L).forEach((e=>delete $L[e])),QL){const{listener:e,capture:t}=QL;VL(window,"focus",e,t),QL=null}}}const dB={getPressedKeyString:function(){return ZL.map((e=>{return t=e,Object.keys(GL).find((e=>GL[e]===t))||(e=>Object.keys(qL).find((t=>qL[t]===e)))(e)||String.fromCharCode(e);var t}))},setScope:nB,getScope:oB,deleteScope:function(e,t){let n,o;e||(e=oB());for(const r in $L)if(Object.prototype.hasOwnProperty.call($L,r))for(n=$L[r],o=0;o<n.length;)if(n[o].scope===e){n.splice(o,1).forEach((e=>{let{element:t}=e;return cB(t)}))}else o++;oB()===e&&nB(t||"all")},getPressedKeyCodes:function(){return ZL.slice(0)},getAllKeyCodes:function(){const e=[];return Object.keys($L).forEach((t=>{$L[t].forEach((t=>{let{key:n,scope:o,mods:r,shortcut:i}=t;e.push({scope:o,shortcut:i,mods:r,keys:n.split("+").map((e=>tB(e)))})}))})),e},isPressed:function(e){return"string"===typeof e&&(e=tB(e)),-1!==ZL.indexOf(e)},filter:function(e){const t=e.target||e.srcElement,{tagName:n}=t;let o=!0;const r="INPUT"===n&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(r||"TEXTAREA"===n||"SELECT"===n)&&!t.readOnly)&&(o=!1),o},trigger:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys($L).forEach((n=>{$L[n].filter((n=>n.scope===t&&n.shortcut===e)).forEach((e=>{e&&e.method&&e.method()}))}))},unbind:rB,keyMap:GL,modifier:qL,modifierMap:YL};for(const n in dB)Object.prototype.hasOwnProperty.call(dB,n)&&(lB[n]=dB[n]);if("undefined"!==typeof window){const e=window.hotkeys;lB.noConflict=t=>(t&&window.hotkeys===lB&&(window.hotkeys=e),lB),window.hotkeys=lB}const uB=["copy","cut","paste","asset"];function hB(e){return function(e){"string"!==typeof e&&(e="");const t=(e=e.replace(/\s/g,"")).split(",");let n=t.lastIndexOf("");for(;n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}(e).map((e=>{let t="";const n=e.split("");return t=1===n.length?n[0]:"!"===n[0]?"shift+".concat(n[1]):"?"===n[0]?3===n.length&&"!"===n[1]?"alt+shift+".concat(n[2]):"alt+".concat(n[1]):"$"===n[0]?"!"===n[1]?"cmd+shift+".concat(n[2],",ctrl+shift+").concat(n[2]):"?"===n[1]?"cmd+\u2325+".concat(n[2],",ctrl+alt+").concat(n[2]):"cmd+".concat(n[1],",ctrl+").concat(n[1]):e,t})).join(",")}function pB(e){return e.getIsMenuOpen()||null!==e.getEditingShapeId()||e.getCrashingError()}function fB(e){return{id:e.id,type:"item",readonlyOk:e.readonlyOk,toolItem:e}}const gB=e.createContext([]);function mB(t){let{overrides:n,children:o}=t;const r=Hc(),i=SO(),s=e.useMemo((()=>{const e=ai([fB(i.select),fB(i.hand),fB(i.draw),fB(i.eraser),fB(i.arrow),fB(i.text),fB(i.note),fB(i.asset),fB(i.rectangle),fB(i.ellipse),fB(i.diamond),fB(i.triangle),fB(i.trapezoid),fB(i.rhombus),fB(i.hexagon),fB(i.cloud),fB(i.star),fB(i.oval),fB(i["x-box"]),fB(i["check-box"]),fB(i["arrow-left"]),fB(i["arrow-up"]),fB(i["arrow-down"]),fB(i["arrow-right"]),fB(i.line),fB(i.highlight),fB(i.frame),fB(i.laser)]);return n?n(r,e,{tools:i}):e}),[r,n,i]);return(0,Rc.jsx)(gB.Provider,{value:s,children:o})}function vB(){const t=e.useContext(gB);if(!t)throw new Error("useToolbarSchema must be used within a ToolbarSchemaProvider");return t}function yB(){const t=Hc(),n=Y_(),o=qO(),r=null===o||void 0===o?void 0:o.get(Cl),i=kl({isDarkMode:t.user.getIsDarkMode()}),s=("shared"===(null===r||void 0===r?void 0:r.type)?i[r.value]:i.black).solid,a=ri("disable style panel",(()=>t.isInAny("hand","zoom","eraser","laser")),[t]),l=(0,e.useCallback)((e=>{e||t.updateInstanceState({isChangingStyle:!1},{ephemeral:!0})}),[t]),{StylePanel:c}=MB();return c?(0,Rc.jsxs)(SI,{id:"mobile style menu",onOpenChange:l,children:[(0,Rc.jsx)(_I,{children:(0,Rc.jsx)(X_,{type:"tool","data-testid":"mobile-styles.button",style:{color:a?"var(--color-muted-1)":s},title:n("style-panel.title"),disabled:a,children:(0,Rc.jsx)(Z_,{icon:a?"blob":"mixed"===(null===r||void 0===r?void 0:r.type)?"mixed":"blob"})})}),(0,Rc.jsx)(kI,{side:"top",align:"end",children:c&&(0,Rc.jsx)(c,{isMobile:!0})})]}):null}const bB=["select","hand","draw","eraser","text","zoom","laser","highlight"];function wB(e){let{activeToolId:t}=e;const n=Hc(),o=z_(),r=Y_(),i=ri("is tool locked",(()=>n.getInstanceState().isToolLocked),[n]);return!t||bB.includes(t)?null:(0,Rc.jsx)(X_,{type:"normal",title:r("action.toggle-tool-lock"),"data-testid":"tool-lock",className:Nc("tlui-toolbar__lock-button",{"tlui-toolbar__lock-button__mobile":o<R_.TABLET_SM}),onClick:()=>n.updateInstanceState({isToolLocked:!i}),children:(0,Rc.jsx)(Z_,{icon:i?"lock":"unlock",small:!0})})}const xB=(0,e.memo)((function(){const t=Hc(),n=Y_(),o=z_(),r=e.useRef(void 0),i=Cv(),s=vB(),a=ri("current tool id",(()=>t.getCurrentToolId()),[t]),l=ri("geo",(()=>t.getSharedStyles().getAsKnownValue(oc)),[t]),c=e=>e.label?"".concat(n(e.label)," ").concat(e.kbd?vM(e.kbd):""):"",d=s.find((e=>kB(e.toolItem,a,l))),{itemsInPanel:u,itemsInDropdown:h}=CB(),p=(0,e.useMemo)((()=>{let e=h.find((e=>e===d));return e||(r.current||(r.current=h[0]),e=r.current,h.includes(e)||(e=h[0])),r.current=e,e}),[d,h]);(0,e.useEffect)((()=>{const e=[...u,p];for(let n=0;n<Math.min(10,e.length);n++){lB("".concat(n+1).slice(-1),(o=>{pB(t)||(Gd(o),e[n].toolItem.onSelect("kbd"))}))}return()=>{lB.unbind("1,2,3,4,5,6,7,8,9,0")}}),[p,t,u]);const{ActionsMenu:f,QuickActions:g}=MB();return(0,Rc.jsx)("div",{className:"tlui-toolbar",children:(0,Rc.jsxs)("div",{className:"tlui-toolbar__inner",children:[(0,Rc.jsxs)("div",{className:"tlui-toolbar__left",children:[!i&&(0,Rc.jsxs)("div",{className:"tlui-toolbar__extras",children:[o<R_.TABLET&&(0,Rc.jsxs)("div",{className:"tlui-toolbar__extras__controls tlui-buttons__horizontal",children:[g&&(0,Rc.jsx)(g,{}),f&&(0,Rc.jsx)(f,{})]}),(0,Rc.jsx)(wB,{activeToolId:a})]}),(0,Rc.jsxs)("div",{className:Nc("tlui-toolbar__tools",{"tlui-toolbar__tools__mobile":o<R_.TABLET_SM}),children:[u.map((e=>{let{toolItem:t}=e;return(0,Rc.jsx)(_B,{item:t,title:c(t),isSelected:kB(t,a,l)},t.id)})),h.length?(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(_B,{item:p.toolItem,title:c(p.toolItem),isSelected:kB(p.toolItem,a,l)},p.toolItem.id),(0,Rc.jsxs)(GM,{id:"toolbar overflow",modal:!1,children:[(0,Rc.jsx)(qM,{children:(0,Rc.jsx)(X_,{title:n("tool-panel.more"),type:"tool",className:"tlui-toolbar__overflow","data-testid":"tools.more-button",children:(0,Rc.jsx)(Z_,{icon:"chevron-up"})})}),(0,Rc.jsx)(YM,{side:"top",align:"center",children:(0,Rc.jsx)(SB,{toolbarItems:h})})]})]}):null]})]}),o<R_.TABLET_SM&&!i&&(0,Rc.jsx)("div",{className:"tlui-toolbar__tools",children:(0,Rc.jsx)(yB,{})})]})})})),SB=ti((function(e){let{toolbarItems:t}=e;const n=Y_();return(0,Rc.jsx)("div",{className:"tlui-buttons__grid","data-testid":"tools.more-content",children:t.map((e=>{var t;let{toolItem:{id:o,meta:r,kbd:i,label:s,onSelect:a,icon:l}}=e;return(0,Rc.jsx)(JM,{"data-tool":o,"data-geo":null!==(t=null===r||void 0===r?void 0:r.geo)&&void 0!==t?t:"","aria-label":s,children:(0,Rc.jsx)(X_,{type:"icon",className:"tlui-button-grid__button",onClick:()=>a("toolbar"),"data-testid":"tools.more.".concat(o),title:s?"".concat(n(s)," ").concat(i?vM(i):""):"",children:(0,Rc.jsx)(Z_,{icon:l})})},o)}))})}));function _B(e){var t,n;let{item:o,title:r,isSelected:i}=e;return(0,Rc.jsx)(X_,{type:"tool","data-testid":"tools.".concat(o.id),"data-tool":o.id,"data-geo":null!==(t=null===(n=o.meta)||void 0===n?void 0:n.geo)&&void 0!==t?t:"","aria-label":o.label,"data-state":i?"selected":void 0,onClick:()=>o.onSelect("toolbar"),title:r,onTouchStart:e=>{Gd(e),o.onSelect("toolbar")},children:(0,Rc.jsx)(Z_,{icon:o.icon})})}const kB=(e,t,n)=>{var o,r;return null!==(o=e.meta)&&void 0!==o&&o.geo?"geo"===t&&n===(null===(r=e.meta)||void 0===r?void 0:r.geo):t===e.id};function CB(){const t=z_(),n=vB(),o=Cv();return(0,e.useMemo)((()=>{const e=n.filter((e=>!o||e.readonlyOk)),r=Math.min(8,5+t),i=e.slice(0,r),s=e.slice(r);return s.length<=2?{itemsInPanel:e,itemsInDropdown:[]}:{itemsInPanel:i,itemsInDropdown:s}}),[n,t,o])}function EB(){const e=uP();return(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)(tj,{...e["zoom-in"],noClose:!0}),(0,Rc.jsx)(tj,{...e["zoom-out"],noClose:!0}),(0,Rc.jsx)(Aj,{}),(0,Rc.jsx)(Mj,{}),(0,Rc.jsx)(jj,{})]})}const IB=(0,e.memo)((function(e){let{children:t}=e;const n=Jd(),[o,r]=xI("zoom menu"),i=null!==t&&void 0!==t?t:(0,Rc.jsx)(EB,{});return(0,Rc.jsxs)(RM,{dir:"ltr",open:o,onOpenChange:r,modal:!1,children:[(0,Rc.jsx)(NM,{asChild:!0,dir:"ltr",children:(0,Rc.jsx)(TB,{})}),(0,Rc.jsx)(DM,{container:n,children:(0,Rc.jsx)(zM,{className:"tlui-menu",side:"top",align:"start",alignOffset:0,sideOffset:8,collisionPadding:4,children:(0,Rc.jsx)(II,{type:"menu",sourceId:"zoom-menu",children:i})})})]})})),TB=(0,e.forwardRef)((function(t,n){const o=Hc(),r=z_(),i=ri("zoom",(()=>o.getZoomLevel()),[o]),s=Y_(),a=(0,e.useCallback)((()=>{o.resetZoom(o.getViewportScreenCenter(),{duration:kd})}),[o]);return(0,Rc.jsx)(X_,{ref:n,...t,type:"icon",title:"".concat(s("navigation-zone.zoom")),"data-testid":"minimap.zoom-menu-button",className:r<R_.TABLET_SM?"tlui-zoom-menu__button":"tlui-zoom-menu__button__pct",onDoubleClick:a,icon:r<R_.MOBILE?"zoom-in":void 0,children:r<R_.MOBILE?null:(0,Rc.jsxs)("span",{style:{flexGrow:0,textAlign:"center"},children:[Math.floor(100*i),"%"]})})})),PB=(0,e.createContext)({});function AB(t){let{overrides:n={},children:o}=t;const r=Tp(n);return(0,Rc.jsx)(PB.Provider,{value:(0,e.useMemo)((()=>({ContextMenu:nO,ActionsMenu:gj,HelpMenu:fO,ZoomMenu:IB,MainMenu:BO,Minimap:DO,StylePanel:FL,PageMenu:VO,NavigationPanel:zO,Toolbar:xB,KeyboardShortcutsDialog:kO,QuickActions:KO,HelperButtons:bO,DebugMenu:dO,MenuPanel:RO,...r})),[r]),children:o})}function MB(){return(0,e.useContext)(PB)}const jB=(0,e.memo)((function(){const{DebugMenu:e}=MB();return(0,Rc.jsxs)("div",{className:"tlui-debug-panel",children:[(0,Rc.jsx)(OB,{}),(0,Rc.jsx)(LB,{}),e&&(0,Rc.jsx)(e,{})]})}));const OB=ti((function(){!function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[n,o]=(0,e.useState)(0),r=Hc();(0,e.useEffect)((()=>{if(!t)return;const e=()=>o((e=>e+1));return r.on("tick",e),()=>{r.off("tick",e)}}),[r,t])}();const t=Hc(),n=t.getPath(),o=t.getHoveredShape(),r=t.getOnlySelectedShape(),i="select.idle"!==n&&n.includes("select.")?r:o,s=i&&n.includes("select.")?" / ".concat(i.type||"").concat("geo"in i.props?" / "+i.props.geo:""," / [").concat(Gc.ToFixed(t.getPointInShapeSpace(i,t.inputs.currentPagePoint),0),"]"):"",a=n.startsWith("select.")&&!n.includes(".idle")?" / [".concat(Gc.ToFixed(t.inputs.originPagePoint,0),"] \u2192 [").concat(Gc.ToFixed(t.inputs.currentPagePoint,0),"] = ").concat(Gc.Dist(t.inputs.originPagePoint,t.inputs.currentPagePoint).toFixed(0)):"";return(0,Rc.jsx)("div",{className:"tlui-debug-panel__current-state",children:"".concat(n).concat(s).concat(a)})}));function LB(){const t=ri("show_fps",(()=>Hd.showFps.get()),[Hd]),n=(0,e.useRef)(null);return(0,e.useEffect)((()=>{if(!t)return;const e=250;let o=0,r=!1,i=performance.now(),s=0,a=0,l=!1;return function t(){if(!r){if(a++,s=performance.now()-i,s>e){const t=Math.round(a*(e/s)*4);t>o&&(o=t);const r=.75*o;(t<r&&!l||t>=r&&l)&&(l=!l),n.current.innerHTML="FPS ".concat(t.toString()),n.current.className="tlui-debug-panel__fps"+(l?" tlui-debug-panel__fps__slow":""),s-=e,a=0,i=performance.now()}requestAnimationFrame(t)}}(),()=>{r=!0}}),[t]),t?(0,Rc.jsx)("div",{ref:n}):null}const BB=t=>{let{id:n,component:o,onClose:r}=t;const{removeDialog:i}=aP(),s=Jd(),a=(0,e.useCallback)((e=>{if(!e){if(r)try{r()}catch(cU){console.warn(cU)}i(n)}}),[n,r,i]);return(0,Rc.jsx)(nT,{onOpenChange:a,defaultOpen:!0,children:(0,Rc.jsx)(oT,{container:s,children:(0,Rc.jsx)(rT,{dir:"ltr",className:"tlui-dialog__overlay",onClick:e=>{e.target===e.currentTarget&&a(!1)},children:(0,Rc.jsx)(iT,{dir:"ltr",className:"tlui-dialog__content",children:(0,Rc.jsx)(o,{onClose:()=>a(!1)})})})})})};const RB=e.memo((function(){const{dialogs:e}=aP();return(0,Rc.jsx)(Rc.Fragment,{children:e.map((e=>(0,Rc.jsx)(BB,{...e},e.id)))})}));function NB(){const e=Hc(),t=ri("follow",(()=>e.getInstanceState().followingUserId),[e]);return t?(0,Rc.jsx)(DB,{userId:t}):null}function DB(e){let{userId:t}=e;const n=Eh(t);return n?(0,Rc.jsx)("div",{className:"tlui-following-indicator",style:{borderColor:n.color}}):null}function zB(e){var t,n;let{toast:o}=e;const{removeToast:r}=JT(),i=Y_(),s=o.actions&&o.actions.length>0;return(0,Rc.jsxs)(A_,{onOpenChange:e=>{e||r(o.id)},className:"tlui-toast__container",duration:o.keepOpen?1/0:5e3,children:[o.icon&&(0,Rc.jsx)("div",{className:"tlui-toast__icon",children:(0,Rc.jsx)($_,{icon:o.icon})}),(0,Rc.jsxs)("div",{className:"tlui-toast__main",children:[(0,Rc.jsxs)("div",{className:"tlui-toast__content",children:[o.title&&(0,Rc.jsx)(M_,{className:"tlui-toast__title",children:o.title}),o.description&&(0,Rc.jsx)(j_,{className:"tlui-toast__description",children:o.description})]}),o.actions&&(0,Rc.jsxs)("div",{className:"tlui-toast__actions",children:[o.actions.map(((e,t)=>(0,Rc.jsx)(O_,{altText:e.label,asChild:!0,onClick:e.onClick,children:(0,Rc.jsx)(X_,{type:e.type,children:(0,Rc.jsx)(PI,{children:e.label})})},t))),(0,Rc.jsx)(L_,{asChild:!0,children:(0,Rc.jsx)(X_,{type:"normal",className:"tlui-toast__close",style:{marginLeft:"auto"},children:(0,Rc.jsx)(PI,{children:null!==(t=o.closeLabel)&&void 0!==t?t:i("toast.close")})})})]})]}),!s&&(0,Rc.jsx)(L_,{asChild:!0,children:(0,Rc.jsx)(X_,{type:"normal",className:"tlui-toast__close",children:(0,Rc.jsx)(PI,{children:null!==(n=o.closeLabel)&&void 0!==n?n:i("toast.close")})})})]})}const FB=e.memo((function(){const{toasts:e}=JT();return(0,Rc.jsx)(Rc.Fragment,{children:e.map((e=>(0,Rc.jsx)(zB,{toast:e},e.id)))})}));function UB(){const{toasts:t}=JT(),[n,o]=e.useState(!1);return e.useEffect((()=>{let e=!1;return t.length?o(!0):setTimeout((()=>{e||o(!1)}),1e3),()=>{e=!0}}),[t.length,o]),n?(0,Rc.jsx)(c_,{className:"tlui-toast__viewport"}):null}const HB="2.0.2";let VB={fonts:{draw:"https://unpkg.com/@tldraw/assets@".concat(HB,"/fonts/Shantell_Sans-Tldrawish.woff2"),serif:"https://unpkg.com/@tldraw/assets@".concat(HB,"/fonts/IBMPlexSerif-Medium.woff2"),sansSerif:"https://unpkg.com/@tldraw/assets@".concat(HB,"/fonts/IBMPlexSans-Medium.woff2"),monospace:"https://unpkg.com/@tldraw/assets@".concat(HB,"/fonts/IBMPlexMono-Medium.woff2")}};function WB(t){return(0,e.useMemo)((()=>t?{fonts:{...VB.fonts,...null===t||void 0===t?void 0:t.fonts}}:VB),[t])}let KB={...VB,icons:Object.fromEntries(["align-bottom-center","align-bottom-left","align-bottom-right","align-bottom","align-center-center","align-center-horizontal","align-center-left","align-center-right","align-center-vertical","align-left","align-right","align-top-center","align-top-left","align-top-right","align-top","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","aspect-ratio","avatar","blob","bring-forward","bring-to-front","check","checkbox-checked","checkbox-empty","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copied","clipboard-copy","code","collab","color","comment","cross-2","cross","dash-dashed","dash-dotted","dash-draw","dash-solid","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","drag-handle-dots","duplicate","edit","external-link","file","fill-none","fill-pattern","fill-semi","fill-solid","follow","following","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-check-box","geo-cloud","geo-diamond","geo-ellipse","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","hidden","image","info-circle","leading","link","lock-small","lock","menu","minus","mixed","pack","page","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","ruler","search","send-backward","send-to-back","settings-horizontal","settings-vertical-1","settings-vertical","share-1","share-2","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","status-offline","status-online","stretch-horizontal","stretch-vertical","text-align-center","text-align-justify","text-align-left","text-align-right","tool-arrow","tool-embed","tool-eraser","tool-frame","tool-hand","tool-highlight","tool-laser","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-text","trash","triangle-down","triangle-up","twitter","undo","ungroup","unlock-small","unlock","vertical-align-center","vertical-align-end","vertical-align-start","visible","warning-triangle","zoom-in","zoom-out"].map((e=>[e,"https://unpkg.com/@tldraw/assets@".concat(HB,"/icons/icon/").concat(e,".svg")]))),translations:Object.fromEntries(Oc.map((e=>[e.locale,"https://unpkg.com/@tldraw/assets@".concat(HB,"/translations/").concat(e.locale,".json")]))),embedIcons:Object.fromEntries(Yl.map((e=>[e.type,"https://unpkg.com/@tldraw/assets@".concat(HB,"/embed-icons/").concat(e.type,".png")])))};function GB(e){return e?{fonts:Object.assign({...KB.fonts},{...null===e||void 0===e?void 0:e.fonts}),icons:Object.assign({...KB.icons},{...null===e||void 0===e?void 0:e.icons}),embedIcons:Object.assign({...KB.embedIcons},{...null===e||void 0===e?void 0:e.embedIcons}),translations:Object.assign({...KB.translations},{...null===e||void 0===e?void 0:e.translations})}:KB}function qB(t){return(0,e.useMemo)((()=>t),t)}function YB(t){const n=qB(null==t?[]:Array.isArray(t)?t:[t]);return(0,e.useMemo)((()=>{const e={};for(const t of n)if(t.translations)for(const[n,o]of Ti(t.translations)){let t=e[n];t||(t=e[n]={}),Object.assign(t,o)}return e}),[n])}function XB(t){const n=function(){const{addToast:t,removeToast:n,clearToasts:o}=JT(),{addDialog:r,clearDialogs:i,removeDialog:s,updateDialog:a}=aP(),l=z_()<R_.TABLET_SM,c=Y_();return(0,e.useMemo)((()=>({addToast:t,removeToast:n,clearToasts:o,addDialog:r,clearDialogs:i,removeDialog:s,updateDialog:a,msg:c,isMobile:l})),[r,t,i,o,c,s,n,a,l])}(),o=qB(null==t?[]:Array.isArray(t)?t:[t]);return(0,e.useMemo)((()=>function(e,t){const n={};for(const o of e)if(o.translations)for(const[e,t]of Ti(o.translations)){let o=n[e];o||(o=n[e]={}),Object.assign(o,t)}return{actions:(n,o)=>{for(const r of e)r.actions&&(o=r.actions(n,o,t));return o},toolbar:(n,o,r)=>{for(const i of e)i.toolbar&&(o=i.toolbar(n,o,{...t,...r}));return o},tools:(n,o,r)=>{for(const i of e)i.tools&&(o=i.tools(n,o,{...t,...r}));return o},translations:n}}(o,n)),[o,n])}function $B(e){let{overrides:t,components:n,assetUrls:o,onUiEvent:r,forceMobile:i,children:s}=e;return(0,Rc.jsx)(U_,{assetUrls:GB(o),children:(0,Rc.jsx)(q_,{overrides:YB(t),children:(0,Rc.jsx)(bI,{onEvent:r,children:(0,Rc.jsx)(QT,{children:(0,Rc.jsx)(sP,{children:(0,Rc.jsx)(D_,{forceMobile:i,children:(0,Rc.jsx)(AB,{overrides:n,children:(0,Rc.jsx)(ZB,{overrides:t,children:s})})})})})})})})}function ZB(e){let{overrides:t,children:n}=e;const o=XB(t);return(0,Rc.jsx)(dP,{overrides:o.actions,children:(0,Rc.jsx)(xO,{overrides:o.tools,children:(0,Rc.jsx)(mB,{overrides:o.toolbar,children:n})})})}const QB=e.memo((function(e){let{renderDebugMenuItems:t,children:n,hideUi:o,components:r,...i}=e;return(0,Rc.jsx)($B,{...i,components:r,children:(0,Rc.jsx)(JB,{hideUi:o,renderDebugMenuItems:t,children:n})})})),JB=e.memo((function(e){let{children:t,hideUi:n,...o}=e;return(0,Rc.jsxs)(Rc.Fragment,{children:[t,n?null:(0,Rc.jsx)(eR,{...o})]})})),eR=e.memo((function(){const t=Hc(),n=Y_(),o=z_(),r=Cv(),i=ri("focus",(()=>t.getInstanceState().isFocusMode),[t]),s=ri("debug",(()=>t.getInstanceState().isDebugMode),[t]),{SharePanel:a,TopPanel:l,MenuPanel:c,StylePanel:d,Toolbar:u,HelpMenu:h,NavigationPanel:p,HelperButtons:f}=MB();!function(){const t=Hc(),n=Cv(),o=uP(),r=SO(),i=ri("is focused",(()=>t.getInstanceState().isFocused),[t]),{itemsInPanel:s}=CB();(0,e.useEffect)((()=>{if(!i)return;const e=t.getContainer();lB.setScope(t.store.id);const s=(e,n)=>{lB(e,{element:document.body,scope:t.store.id},n)};for(const r of Object.values(o))r.kbd&&(n&&!r.readonlyOk||uB.includes(r.id)||s(hB(r.kbd),(e=>{pB(t)||(Gd(e),r.onSelect("kbd"))})));for(const n of Object.values(r))!n.kbd||!n.readonlyOk&&t.getInstanceState().isReadonly||uB.includes(n.id)||s(hB(n.kbd),(e=>{pB(t)||(Gd(e),n.onSelect("kbd"))}));return s(",",(n=>{if(pB(t))return;if(t.inputs.keys.has("Comma"))return;Gd(n),e.focus(),t.inputs.keys.add("Comma");const{x:o,y:r,z:i}=t.inputs.currentScreenPoint,s={type:"pointer",name:"pointer_down",point:{x:o,y:r,z:i},shiftKey:n.shiftKey,altKey:n.altKey,ctrlKey:n.metaKey||n.ctrlKey,pointerId:0,button:0,isPen:t.getInstanceState().isPenMode,target:"canvas"};t.dispatch(s)})),((e,n)=>{lB(",",{element:document.body,keyup:!0,keydown:!1,scope:t.store.id},n)})(0,(e=>{if(pB(t))return;if(!t.inputs.keys.has("Comma"))return;t.inputs.keys.delete("Comma");const{x:n,y:o,z:r}=t.inputs.currentScreenPoint,i={type:"pointer",name:"pointer_up",point:{x:n,y:o,z:r},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:0,button:0,isPen:t.getInstanceState().isPenMode,target:"canvas"};t.dispatch(i)})),()=>{lB.deleteScope(t.store.id)}}),[o,r,n,t,i,s])}(),VT(),function(){const t=Hc(),{addToast:n}=JT();(0,e.useEffect)((()=>{function e(e){let{name:t,count:o}=e;n({title:"Maximum Shapes Reached",description:"You've reached the maximum number of shapes allowed on ".concat(t," (").concat(o,"). Please delete some shapes or move to a different page to continue.")})}return t.addListener("max-shapes",e),()=>{t.removeListener("max-shapes",e)}}),[t,n])}();const{"toggle-focus-mode":g}=uP();return(0,Rc.jsx)(r_,{children:(0,Rc.jsxs)("div",{className:Nc("tlui-layout",{"tlui-layout__mobile":o<R_.TABLET_SM}),"data-breakpoint":o,children:[i?(0,Rc.jsx)("div",{className:"tlui-layout__top",children:(0,Rc.jsx)(X_,{type:"icon",className:"tlui-focus-button",title:n("focus-mode.toggle-focus-mode"),onClick:()=>g.onSelect("menu"),children:(0,Rc.jsx)(Z_,{icon:"dot"})})}):(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsxs)("div",{className:"tlui-layout__top",children:[(0,Rc.jsxs)("div",{className:"tlui-layout__top__left",children:[c&&(0,Rc.jsx)(c,{}),f&&(0,Rc.jsx)(f,{})]}),(0,Rc.jsx)("div",{className:"tlui-layout__top__center",children:l&&(0,Rc.jsx)(l,{})}),(0,Rc.jsxs)("div",{className:"tlui-layout__top__right",children:[a&&(0,Rc.jsx)(a,{}),d&&o>=R_.TABLET_SM&&!r&&(0,Rc.jsx)(d,{})]})]}),(0,Rc.jsxs)("div",{className:"tlui-layout__bottom",children:[(0,Rc.jsxs)("div",{className:"tlui-layout__bottom__main",children:[p&&(0,Rc.jsx)(p,{}),u&&(0,Rc.jsx)(u,{}),h&&(0,Rc.jsx)(h,{})]}),s&&(0,Rc.jsx)(jB,{})]})]}),(0,Rc.jsx)(FB,{}),(0,Rc.jsx)(RB,{}),(0,Rc.jsx)(UB,{}),(0,Rc.jsx)(NB,{})]})})}));const tR=(t,n)=>{const[o,r]=(0,e.useState)(2);return(0,e.useEffect)((()=>{let e=!1;return r(2),async function(e,t){const{url:n,style:o="normal",weight:r="500",display:i,featureSettings:s,stretch:a,unicodeRange:l,variant:c,format:d}=t,u={style:o,weight:r,display:i,featureSettings:s,stretch:a,unicodeRange:l,variant:c},h=new FontFace(e,"url(".concat(n,")"),u);return await h.load(),document.fonts.add(h),h.$$_url=n,h.$$_fontface="\n@font-face {\n\tfont-family: ".concat(h.family,";\n\tfont-stretch: ").concat(h.stretch,";\n\tfont-weight: ").concat(h.weight,";\n\tfont-style: ").concat(h.style,';\n\tsrc: url("').concat(n,'") format("').concat(d,'")\n}'),h}(t,n).then((()=>{e||r(0)})).catch((t=>{e||(console.error(t),r(1))})),()=>{e=!0}}),[t,n]),o};function nR(t){const n=(0,e.useMemo)((()=>function(e){return{draw:{url:e.fonts.draw,format:e.fonts.draw.split(".").pop()},serif:{url:e.fonts.serif,format:e.fonts.serif.split(".").pop()},sansSerif:{url:e.fonts.sansSerif,format:e.fonts.sansSerif.split(".").pop()},monospace:{url:e.fonts.monospace,format:e.fonts.monospace.split(".").pop()}}}(t)),[t]),o=[tR("tldraw_draw",n.draw),tR("tldraw_serif",n.serif),tR("tldraw_sans",n.sansSerif),tR("tldraw_mono",n.monospace)];return{error:o.some((e=>1===e)),done:!o.some((e=>2===e))}}function oR(t){const{children:n,maxImageDimension:o,maxAssetSize:r,acceptedImageMimeTypes:i,acceptedVideoMimeTypes:s,onMount:a,components:l={},shapeUtils:c=[],tools:d=[],...u}=t,h=Tp(l),p=(0,e.useMemo)((()=>({Scribble:_v,CollaboratorScribble:_v,SelectionForeground:Iv,SelectionBackground:kv,Handles:uv,HoveredShapeIndicator:hv,...h})),[h]),f=Ip(c),g=(0,e.useMemo)((()=>[...bx,...f]),[f]),m=Ip(d),v=(0,e.useMemo)((()=>[...vS,...Ky,...m]),[m]),y=WB(u.assetUrls),{done:b,error:w}=nR(y);return w?(0,Rc.jsx)(Dm,{children:"Could not load assets. Please refresh the page."}):b?(0,Rc.jsx)(Mm,{initialState:"select",...u,components:p,shapeUtils:g,tools:v,children:(0,Rc.jsxs)(QB,{...u,components:p,children:[(0,Rc.jsx)(sR,{maxImageDimension:o,maxAssetSize:r,acceptedImageMimeTypes:i,acceptedVideoMimeTypes:s,onMount:a}),n]})}):(0,Rc.jsx)(Nm,{children:"Loading assets..."})}const rR=Object.freeze(["image/jpeg","image/png","image/gif","image/svg+xml"]),iR=Object.freeze(["video/mp4","video/quicktime"]);function sR(t){let{maxImageDimension:n=1e3,maxAssetSize:o=10485760,acceptedImageMimeTypes:r=rR,acceptedVideoMimeTypes:i=iR,onMount:s}=t;const a=Hc(),l=JT(),c=Y_(),d=function(t){const n=(0,e.useRef)();return(0,e.useLayoutEffect)((()=>{n.current=t})),(0,e.useDebugValue)(t),(0,e.useCallback)((function(){const e=n.current;return hi(e,"fn does not exist"),e(...arguments)}),[])}((e=>{const t=[];return t.push(...function(e){return[e.sideEffects.registerAfterChangeHandler("instance",((t,n)=>{t.isFocused!==n.isFocused&&(n.isFocused?e.getContainer().focus():(e.complete(),e.getContainer().blur()))})),e.sideEffects.registerAfterChangeHandler("instance_page_state",((t,n)=>{if(t.croppingShapeId!==n.croppingShapeId){const o=e.isInAny("select.crop","select.pointing_crop_handle","select.cropping");!t.croppingShapeId&&n.croppingShapeId?o||e.setCurrentTool("select.crop.idle"):t.croppingShapeId&&!n.croppingShapeId&&o&&e.setCurrentTool("select.idle")}t.editingShapeId!==n.editingShapeId&&(!t.editingShapeId&&n.editingShapeId?e.isIn("select.editing_shape")||e.setCurrentTool("select.editing_shape"):t.editingShapeId&&!n.editingShapeId&&e.isIn("select.editing_shape")&&e.setCurrentTool("select.idle"))}))]}(e)),xy(e,{maxImageDimension:n,maxAssetSize:o,acceptedImageMimeTypes:r,acceptedVideoMimeTypes:i},{toasts:l,msg:c}),t.push(null===s||void 0===s?void 0:s(e)),()=>{t.forEach((e=>null===e||void 0===e?void 0:e()))}}));(0,e.useLayoutEffect)((()=>{if(a)return null===d||void 0===d?void 0:d(a)}),[a,d]);const{Canvas:u}=Mp(),{ContextMenu:h}=MB();return h?(0,Rc.jsx)(h,{}):u?(0,Rc.jsx)(u,{}):null}(0,e.memo)((function(t){var n;const[o,r]=(0,e.useState)(null),[i,s]=(0,e.useState)(null),a=Ip(null!==(n=t.shapeUtils)&&void 0!==n?n:[]),l=(0,e.useMemo)((()=>[...bx,...a]),[a]),c=Im({snapshot:t.snapshot,shapeUtils:l}),d=WB(),{done:u,error:h}=nR(d),{pageId:p,bounds:f,scale:g,background:m,padding:v,darkMode:y,preserveAspectRatio:b,format:w="svg"}=t;return(0,e.useLayoutEffect)((()=>{if(!i)return;if(!c)return;if(!u)return;let e=!1;const t=document.createElement("div");i.appendChild(t),i.classList.add("tl-container","tl-theme__light");const n=new Lg({store:c,shapeUtils:null!==l&&void 0!==l?l:[],tools:[],getContainer:()=>t});p&&n.setCurrentPage(p);const o=n.getCurrentPageShapeIds();return async function(){const t=await n.getSvg([...o],{bounds:f,scale:g,background:m,padding:v,darkMode:y,preserveAspectRatio:b});if(t&&!e)if("svg"===w){const n=await KT(t);if(!e){const e=new Blob([n],{type:"image/svg+xml"}),t=URL.createObjectURL(e);r(t)}}else if("png"===w){const o=await WT(t,n.environment.isSafari,{type:w,quality:1,scale:2});if(o&&!e){const e=URL.createObjectURL(o);r(e)}}n.dispose()}(),()=>{e=!0}}),[w,i,c,l,p,f,g,m,v,y,b,u,h]),h?(0,Rc.jsx)(Dm,{children:"Could not load assets."}):u?(0,Rc.jsx)("div",{ref:s,style:{position:"relative",width:"100%",height:"100%"},children:o&&(0,Rc.jsx)("img",{src:o,style:{width:"100%",height:"100%"}})}):(0,Rc.jsx)(Nm,{children:"Loading assets..."})}));Vs({tldrawFileFormatVersion:Ds,schema:Vs({schemaVersion:Ns,storeVersion:Ns,recordVersions:qs(js,Vs({version:Ns,subTypeVersions:qs(js,Ns).optional(),subTypeKey:js.optional()}))}),records:Hs(Vs({id:js,typeName:js}).allowUnknownProperties())});const aR=class{updateImageRecognitionCompAttr(e){console.log("before updateImageRecognitionCompAttr",e);const t=sr().cloneDeep(this.imageRecognitionCompAttr);void 0!==e.result&&(console.log("before updateImageRecognitionCompAttr.result"),t.result=e.result,console.log("after updateImageRecognitionCompAttr.result")),void 0!==e.srcImageInternalSize&&(console.log("before updateImageRecognitionCompAttr.srcImageInternalSize"),t.srcImageInternalSize=e.srcImageInternalSize,console.log("after updateImageRecognitionCompAttr.srcImageInternalSize")),void 0!==e.imageRecognitionCompImageElSize&&(console.log("before updateImageRecognitionCompAttr.imageRecognitionCompImageElSize"),t.imageRecognitionCompImageElSize=e.imageRecognitionCompImageElSize,console.log("after updateImageRecognitionCompAttr.imageRecognitionCompImageElSize")),void 0!==e.imageContainerSize&&(console.log("before updateImageRecognitionCompAttr.imageContainerSize"),t.imageContainerSize=e.imageContainerSize,console.log("after updateImageRecognitionCompAttr.imageContainerSize")),void 0!==e.srcImageUrl&&(console.log("before updateImageRecognitionCompAttr.srcImageUrl"),t.srcImageUrl=e.srcImageUrl,console.log("after updateImageRecognitionCompAttr.srcImageUrl")),void 0!==e.lang&&(console.log("before updateImageRecognitionCompAttr.lang"),t.lang=e.lang,console.log("after updateImageRecognitionCompAttr.lang")),void 0!==e.recognizing&&(console.log("before updateImageRecognitionCompAttr.recognizing"),t.recognizing=e.recognizing,console.log("after updateImageRecognitionCompAttr.recognizing")),void 0!==e.progress&&(console.log("before updateImageRecognitionCompAttr.progress"),t.progress=e.progress,console.log("after updateImageRecognitionCompAttr.progress")),this.imageRecognitionCompAttr=t}updateAppOpen(e){const t=sr().cloneDeep(this.appOpen);void 0!==e.imageRecognitionComp&&(t.imageRecognitionComp=e.imageRecognitionComp),void 0!==e.audioRecognitionComp&&(t.audioRecognitionComp=e.audioRecognitionComp),void 0!==e.videoFormatTransformationComp&&(t.videoTransformationComp=e.videoFormatTransformationComp),this.appOpen=t}updateAudioRecognitionCompAttr(e){const t=sr().cloneDeep(this.audioRecognitionCompAttr);void 0!==e.srcStem&&(t.srcStem=e.srcStem),void 0!==e.srtTexts&&(t.srtTexts=e.srtTexts),void 0!==e.downloadSrtUrl&&(t.downloadSrtUrl=e.downloadSrtUrl),void 0!==e.progress&&(t.progress=e.progress),void 0!==e.recognizing&&(t.recognizing=e.recognizing),void 0!==e.audioDuration&&(t.audioDuration=e.audioDuration),void 0!==e.audioDuration&&(t.audioDuration=e.audioDuration),void 0!==e.audioSrcUrl&&(t.audioSrcUrl=e.audioSrcUrl),void 0!==e.audio&&(t.audio=e.audio),void 0!==e.loadAudioState&&(t.loadAudioState=e.loadAudioState),void 0!==e.loadModelState&&(t.loadModelState=e.loadModelState),void 0!==e.whisperModel&&(t.whisperModel=e.whisperModel),void 0!==e.log&&("init"===e.log.action?t.logs=[]:t.logs.push(e.log.value)),this.audioRecognitionCompAttr=t}getProgress(e){try{let t=/time=(\d{2}):(\d{2}):(\d{2}\.\d{2})/,n=e.match(t);if(n){let e=3600*parseInt(n[1])+60*parseInt(n[2])+parseFloat(n[3]);console.log("Total seconds:",e);const t=e/(this.videoTransformationCompAttr.endTime-this.videoTransformationCompAttr.startTime);this.updateVideoTransformationCompAttr({progress:(100*t).toFixed(0)})}}catch(t){return this.videoTransformationCompAttr.progress}}updateVideoTransformationCompAttr(e){const t=sr().cloneDeep(this.videoTransformationCompAttr);void 0!==e.loadVideoState&&(t.loadVideoState=e.loadVideoState),void 0!==e.targetVideoContainerSize&&(t.targetVideoContainerSize=e.targetVideoContainerSize),void 0!==e.srcVideoContainerSize&&(t.srcVideoContainerSize=e.srcVideoContainerSize),void 0!==e.progress&&(t.progress=e.progress),void 0!==e.srcType&&(t.srcType=e.srcType),void 0!==e.srcName&&(t.srcName=e.srcName),void 0!==e.targetSrcName&&(t.targetSrcName=e.targetSrcName),void 0!==e.src&&(t.src=e.src),void 0!==e.startTime&&(t.startTime=e.startTime),void 0!==e.endTime&&(t.endTime=e.endTime),void 0!==e.targetFormat&&(t.targetFormat=e.targetFormat),void 0!==e.duration&&(t.duration=e.duration),void 0!==e.ffmpeg&&(t.ffmpeg=e.ffmpeg),void 0!==e.ffmpeg&&(t.ffmpeg=e.ffmpeg),void 0!==e.targetSrc&&(t.targetSrc=e.targetSrc),void 0!==e.converting&&(t.converting=e.converting),this.videoTransformationCompAttr=t}setSidebarItemCurrentID(e,t){this.sidebarItemCurrentID=e}constructor(e){this.imageRecognitionCompAttr={recognizing:!1,progress:0,lang:"chi_sim",srcImageUrl:null,srcImageInternalSize:null,imageContainerSize:null,result:null,imageRecognitionCompImageElSize:null},this.appOpen={audioRecognitionComp:!1,videoTransformationComp:!1,imageRecognitionComp:!0},this.audioRecognitionCompAttr={recognizing:!1,progress:0,whisperModel:"default",logs:[],loadModelState:!1,loadAudioState:!1,audio:null,audioSrcUrl:null,audioDuration:0,downloadSrtUrl:null,srtTexts:null,srcStem:null},this.videoTransformationCompAttr={src:null,startTime:0,endTime:0,targetFormat:"GIF",duration:0,ffmpeg:null,targetSrc:null,converting:!1,srcName:null,targetSrcName:null,srcType:null,progress:0,srcVideoContainerSize:null,targetVideoContainerSize:null,loadVideoState:!1},this.sidebarItemCurrentID="",this.toolboxAppOpenIconState=!0,this.updateToolboxAppOpenIconState=e=>{this.toolboxAppOpenIconState=e},this.rootStore=e,Fn(this)}};const lR=e.createContext(new class{constructor(){this.commonStore=new dr(this),this.toolBoxStore=new aR(this)}}),cR=()=>e.useContext(lR),dR=nr((e=>{let{className:t}=e;const{commonStore:n}=cR();return(0,Rc.jsx)("div",{id:"editorjs",className:"flex-auto ".concat(t," ").concat(n.documentsGroup.length>0&&n.appCompOpenConfig.markdownAppOpen?null:"hidden"),style:{maxHeight:"92vh",height:"92vh",overflow:"auto"}})}));function uR(e){return p({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.4 3 2.7 7 3"},child:[]},{tag:"path",attr:{d:"M3 12c0 1.2 2 2.5 5 3"},child:[]},{tag:"path",attr:{d:"M21 5v4"},child:[]},{tag:"path",attr:{d:"M13 20a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L12 16"},child:[]},{tag:"path",attr:{d:"M12 12v4h4"},child:[]}]})(e)}function hR(e){return p({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3"},child:[]},{tag:"path",attr:{d:"M4 6v6c0 1.657 3.582 3 8 3c.856 0 1.68 -.05 2.454 -.144m5.546 -2.856v-6"},child:[]},{tag:"path",attr:{d:"M4 12v6c0 1.657 3.582 3 8 3c.171 0 .341 -.002 .51 -.006"},child:[]},{tag:"path",attr:{d:"M19 22v-6"},child:[]},{tag:"path",attr:{d:"M22 19l-3 -3l-3 3"},child:[]}]})(e)}const pR=document.getElementById("ModalContainer"),fR=nr((e=>{let{children:t}=e;return Ho.createPortal(t,pR)}));var gR=n(64),mR=n.n(gR);function vR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="string"===typeof e?e:e.src;if("function"===typeof t)return t(n);const{baseUrl:o=""}=t;return n.startsWith("data:")||n.match(/^https?:\/\//)?n:"".concat(o.replace(/\/$/,""),"/").concat(n.replace(/^\.?\//,""))}const yR=nr((t=>{let{className:n}=t;const{commonStore:o}=cR(),[r,i]=(0,e.useState)(),[s,a]=(0,e.useState)({}),l=(0,e.useCallback)((e=>{i(e)}),[]);(0,e.useEffect)((()=>{var e;a({fonts:{monospace:vR("./fonts/IBMPlexMono-Medium.woff2",e={baseUrl:"http://localhost:8082/assets/tldraw"}),sansSerif:vR("./fonts/IBMPlexSans-Medium.woff2",e),serif:vR("./fonts/IBMPlexSerif-Medium.woff2",e),draw:vR("./fonts/Shantell_Sans-Tldrawish.woff2",e)},icons:{"align-bottom-center":vR("./icons/icon/align-bottom-center.svg",e),"align-bottom-left":vR("./icons/icon/align-bottom-left.svg",e),"align-bottom-right":vR("./icons/icon/align-bottom-right.svg",e),"align-bottom":vR("./icons/icon/align-bottom.svg",e),"align-center-center":vR("./icons/icon/align-center-center.svg",e),"align-center-horizontal":vR("./icons/icon/align-center-horizontal.svg",e),"align-center-left":vR("./icons/icon/align-center-left.svg",e),"align-center-right":vR("./icons/icon/align-center-right.svg",e),"align-center-vertical":vR("./icons/icon/align-center-vertical.svg",e),"align-left":vR("./icons/icon/align-left.svg",e),"align-right":vR("./icons/icon/align-right.svg",e),"align-top-center":vR("./icons/icon/align-top-center.svg",e),"align-top-left":vR("./icons/icon/align-top-left.svg",e),"align-top-right":vR("./icons/icon/align-top-right.svg",e),"align-top":vR("./icons/icon/align-top.svg",e),"arrow-left":vR("./icons/icon/arrow-left.svg",e),"arrowhead-arrow":vR("./icons/icon/arrowhead-arrow.svg",e),"arrowhead-bar":vR("./icons/icon/arrowhead-bar.svg",e),"arrowhead-diamond":vR("./icons/icon/arrowhead-diamond.svg",e),"arrowhead-dot":vR("./icons/icon/arrowhead-dot.svg",e),"arrowhead-none":vR("./icons/icon/arrowhead-none.svg",e),"arrowhead-square":vR("./icons/icon/arrowhead-square.svg",e),"arrowhead-triangle-inverted":vR("./icons/icon/arrowhead-triangle-inverted.svg",e),"arrowhead-triangle":vR("./icons/icon/arrowhead-triangle.svg",e),"aspect-ratio":vR("./icons/icon/aspect-ratio.svg",e),avatar:vR("./icons/icon/avatar.svg",e),blob:vR("./icons/icon/blob.svg",e),"bring-forward":vR("./icons/icon/bring-forward.svg",e),"bring-to-front":vR("./icons/icon/bring-to-front.svg",e),check:vR("./icons/icon/check.svg",e),"checkbox-checked":vR("./icons/icon/checkbox-checked.svg",e),"checkbox-empty":vR("./icons/icon/checkbox-empty.svg",e),"chevron-down":vR("./icons/icon/chevron-down.svg",e),"chevron-left":vR("./icons/icon/chevron-left.svg",e),"chevron-right":vR("./icons/icon/chevron-right.svg",e),"chevron-up":vR("./icons/icon/chevron-up.svg",e),"chevrons-ne":vR("./icons/icon/chevrons-ne.svg",e),"chevrons-sw":vR("./icons/icon/chevrons-sw.svg",e),"clipboard-copied":vR("./icons/icon/clipboard-copied.svg",e),"clipboard-copy":vR("./icons/icon/clipboard-copy.svg",e),code:vR("./icons/icon/code.svg",e),collab:vR("./icons/icon/collab.svg",e),color:vR("./icons/icon/color.svg",e),comment:vR("./icons/icon/comment.svg",e),"cross-2":vR("./icons/icon/cross-2.svg",e),cross:vR("./icons/icon/cross.svg",e),"dash-dashed":vR("./icons/icon/dash-dashed.svg",e),"dash-dotted":vR("./icons/icon/dash-dotted.svg",e),"dash-draw":vR("./icons/icon/dash-draw.svg",e),"dash-solid":vR("./icons/icon/dash-solid.svg",e),discord:vR("./icons/icon/discord.svg",e),"distribute-horizontal":vR("./icons/icon/distribute-horizontal.svg",e),"distribute-vertical":vR("./icons/icon/distribute-vertical.svg",e),dot:vR("./icons/icon/dot.svg",e),"dots-horizontal":vR("./icons/icon/dots-horizontal.svg",e),"dots-vertical":vR("./icons/icon/dots-vertical.svg",e),"drag-handle-dots":vR("./icons/icon/drag-handle-dots.svg",e),duplicate:vR("./icons/icon/duplicate.svg",e),edit:vR("./icons/icon/edit.svg",e),"external-link":vR("./icons/icon/external-link.svg",e),file:vR("./icons/icon/file.svg",e),"fill-none":vR("./icons/icon/fill-none.svg",e),"fill-pattern":vR("./icons/icon/fill-pattern.svg",e),"fill-semi":vR("./icons/icon/fill-semi.svg",e),"fill-solid":vR("./icons/icon/fill-solid.svg",e),follow:vR("./icons/icon/follow.svg",e),following:vR("./icons/icon/following.svg",e),"font-draw":vR("./icons/icon/font-draw.svg",e),"font-mono":vR("./icons/icon/font-mono.svg",e),"font-sans":vR("./icons/icon/font-sans.svg",e),"font-serif":vR("./icons/icon/font-serif.svg",e),"geo-arrow-down":vR("./icons/icon/geo-arrow-down.svg",e),"geo-arrow-left":vR("./icons/icon/geo-arrow-left.svg",e),"geo-arrow-right":vR("./icons/icon/geo-arrow-right.svg",e),"geo-arrow-up":vR("./icons/icon/geo-arrow-up.svg",e),"geo-check-box":vR("./icons/icon/geo-check-box.svg",e),"geo-cloud":vR("./icons/icon/geo-cloud.svg",e),"geo-diamond":vR("./icons/icon/geo-diamond.svg",e),"geo-ellipse":vR("./icons/icon/geo-ellipse.svg",e),"geo-hexagon":vR("./icons/icon/geo-hexagon.svg",e),"geo-octagon":vR("./icons/icon/geo-octagon.svg",e),"geo-oval":vR("./icons/icon/geo-oval.svg",e),"geo-pentagon":vR("./icons/icon/geo-pentagon.svg",e),"geo-rectangle":vR("./icons/icon/geo-rectangle.svg",e),"geo-rhombus-2":vR("./icons/icon/geo-rhombus-2.svg",e),"geo-rhombus":vR("./icons/icon/geo-rhombus.svg",e),"geo-star":vR("./icons/icon/geo-star.svg",e),"geo-trapezoid":vR("./icons/icon/geo-trapezoid.svg",e),"geo-triangle":vR("./icons/icon/geo-triangle.svg",e),"geo-x-box":vR("./icons/icon/geo-x-box.svg",e),github:vR("./icons/icon/github.svg",e),group:vR("./icons/icon/group.svg",e),hidden:vR("./icons/icon/hidden.svg",e),image:vR("./icons/icon/image.svg",e),"info-circle":vR("./icons/icon/info-circle.svg",e),leading:vR("./icons/icon/leading.svg",e),link:vR("./icons/icon/link.svg",e),"lock-small":vR("./icons/icon/lock-small.svg",e),lock:vR("./icons/icon/lock.svg",e),menu:vR("./icons/icon/menu.svg",e),minus:vR("./icons/icon/minus.svg",e),mixed:vR("./icons/icon/mixed.svg",e),pack:vR("./icons/icon/pack.svg",e),page:vR("./icons/icon/page.svg",e),plus:vR("./icons/icon/plus.svg",e),"question-mark-circle":vR("./icons/icon/question-mark-circle.svg",e),"question-mark":vR("./icons/icon/question-mark.svg",e),redo:vR("./icons/icon/redo.svg",e),"reset-zoom":vR("./icons/icon/reset-zoom.svg",e),"rotate-ccw":vR("./icons/icon/rotate-ccw.svg",e),"rotate-cw":vR("./icons/icon/rotate-cw.svg",e),ruler:vR("./icons/icon/ruler.svg",e),search:vR("./icons/icon/search.svg",e),"send-backward":vR("./icons/icon/send-backward.svg",e),"send-to-back":vR("./icons/icon/send-to-back.svg",e),"settings-horizontal":vR("./icons/icon/settings-horizontal.svg",e),"settings-vertical-1":vR("./icons/icon/settings-vertical-1.svg",e),"settings-vertical":vR("./icons/icon/settings-vertical.svg",e),"share-1":vR("./icons/icon/share-1.svg",e),"share-2":vR("./icons/icon/share-2.svg",e),"size-extra-large":vR("./icons/icon/size-extra-large.svg",e),"size-large":vR("./icons/icon/size-large.svg",e),"size-medium":vR("./icons/icon/size-medium.svg",e),"size-small":vR("./icons/icon/size-small.svg",e),"spline-cubic":vR("./icons/icon/spline-cubic.svg",e),"spline-line":vR("./icons/icon/spline-line.svg",e),"stack-horizontal":vR("./icons/icon/stack-horizontal.svg",e),"stack-vertical":vR("./icons/icon/stack-vertical.svg",e),"status-offline":vR("./icons/icon/status-offline.svg",e),"status-online":vR("./icons/icon/status-online.svg",e),"stretch-horizontal":vR("./icons/icon/stretch-horizontal.svg",e),"stretch-vertical":vR("./icons/icon/stretch-vertical.svg",e),"text-align-center":vR("./icons/icon/text-align-center.svg",e),"text-align-justify":vR("./icons/icon/text-align-justify.svg",e),"text-align-left":vR("./icons/icon/text-align-left.svg",e),"text-align-right":vR("./icons/icon/text-align-right.svg",e),"tool-arrow":vR("./icons/icon/tool-arrow.svg",e),"tool-embed":vR("./icons/icon/tool-embed.svg",e),"tool-eraser":vR("./icons/icon/tool-eraser.svg",e),"tool-frame":vR("./icons/icon/tool-frame.svg",e),"tool-hand":vR("./icons/icon/tool-hand.svg",e),"tool-highlight":vR("./icons/icon/tool-highlight.svg",e),"tool-laser":vR("./icons/icon/tool-laser.svg",e),"tool-line":vR("./icons/icon/tool-line.svg",e),"tool-media":vR("./icons/icon/tool-media.svg",e),"tool-note":vR("./icons/icon/tool-note.svg",e),"tool-pencil":vR("./icons/icon/tool-pencil.svg",e),"tool-pointer":vR("./icons/icon/tool-pointer.svg",e),"tool-text":vR("./icons/icon/tool-text.svg",e),trash:vR("./icons/icon/trash.svg",e),"triangle-down":vR("./icons/icon/triangle-down.svg",e),"triangle-up":vR("./icons/icon/triangle-up.svg",e),twitter:vR("./icons/icon/twitter.svg",e),undo:vR("./icons/icon/undo.svg",e),ungroup:vR("./icons/icon/ungroup.svg",e),"unlock-small":vR("./icons/icon/unlock-small.svg",e),unlock:vR("./icons/icon/unlock.svg",e),"vertical-align-center":vR("./icons/icon/vertical-align-center.svg",e),"vertical-align-end":vR("./icons/icon/vertical-align-end.svg",e),"vertical-align-start":vR("./icons/icon/vertical-align-start.svg",e),visible:vR("./icons/icon/visible.svg",e),"warning-triangle":vR("./icons/icon/warning-triangle.svg",e),"zoom-in":vR("./icons/icon/zoom-in.svg",e),"zoom-out":vR("./icons/icon/zoom-out.svg",e)},translations:{ar:vR("./translations/ar.json",e),ca:vR("./translations/ca.json",e),cs:vR("./translations/cs.json",e),da:vR("./translations/da.json",e),de:vR("./translations/de.json",e),en:vR("./translations/en.json",e),es:vR("./translations/es.json",e),fa:vR("./translations/fa.json",e),fi:vR("./translations/fi.json",e),fr:vR("./translations/fr.json",e),gl:vR("./translations/gl.json",e),he:vR("./translations/he.json",e),"hi-in":vR("./translations/hi-in.json",e),hr:vR("./translations/hr.json",e),hu:vR("./translations/hu.json",e),it:vR("./translations/it.json",e),ja:vR("./translations/ja.json",e),"ko-kr":vR("./translations/ko-kr.json",e),ku:vR("./translations/ku.json",e),languages:vR("./translations/languages.json",e),main:vR("./translations/main.json",e),my:vR("./translations/my.json",e),ne:vR("./translations/ne.json",e),no:vR("./translations/no.json",e),pl:vR("./translations/pl.json",e),"pt-br":vR("./translations/pt-br.json",e),"pt-pt":vR("./translations/pt-pt.json",e),ro:vR("./translations/ro.json",e),ru:vR("./translations/ru.json",e),sl:vR("./translations/sl.json",e),sv:vR("./translations/sv.json",e),te:vR("./translations/te.json",e),th:vR("./translations/th.json",e),tr:vR("./translations/tr.json",e),uk:vR("./translations/uk.json",e),vi:vR("./translations/vi.json",e),"zh-cn":vR("./translations/zh-cn.json",e),"zh-tw":vR("./translations/zh-tw.json",e)},embedIcons:{codepen:vR("./embed-icons/codepen.png",e),codesandbox:vR("./embed-icons/codesandbox.png",e),excalidraw:vR("./embed-icons/excalidraw.png",e),felt:vR("./embed-icons/felt.png",e),figma:vR("./embed-icons/figma.png",e),github_gist:vR("./embed-icons/github_gist.png",e),google_calendar:vR("./embed-icons/google_calendar.png",e),google_maps:vR("./embed-icons/google_maps.png",e),google_slides:vR("./embed-icons/google_slides.png",e),observable:vR("./embed-icons/observable.png",e),replit:vR("./embed-icons/replit.png",e),scratch:vR("./embed-icons/scratch.png",e),spotify:vR("./embed-icons/spotify.png",e),tldraw:vR("./embed-icons/tldraw.png",e),val_town:vR("./embed-icons/val_town.png",e),vimeo:vR("./embed-icons/vimeo.png",e),youtube:vR("./embed-icons/youtube.png",e)}})}),[]);const[c,d]=(0,e.useState)([]);return(0,e.useEffect)((()=>{if(!r)return;function e(e){d((t=>[...t,e])),o.setIsDocumentsGroupDataUpdate(!0)}o.updateProcessDrawObj(r);const t=r.store.listen((t=>{for(const n of Object.values(t.changes.added))"shape"===n.typeName&&e("created shape (".concat(n.type,")\n"));for(const[n,o]of Object.values(t.changes.updated))"instance"===n.typeName&&"instance"===o.typeName&&n.currentPageId!==o.currentPageId?e("changed page (".concat(n.currentPageId,", ").concat(o.currentPageId,")")):n.id.startsWith("shape")&&o.id.startsWith("shape")&&e("updated shape (".concat(JSON.stringify("diff"),")\n"));for(const n of Object.values(t.changes.removed))"shape"===n.typeName&&e("deleted shape (".concat(n.type,")\n"))}),{source:"user",scope:"all"});return()=>{t()}}),[r]),(0,Rc.jsx)("div",{className:"flex-grow  h-full ".concat(o.documentsGroup.length>0&&o.appCompOpenConfig.processAppOpen?null:"hidden"),style:{overflow:"auto"},children:(0,Rc.jsx)("div",{style:{width:"100%",height:"100%"},className:"tldraw__editor",children:(0,Rc.jsx)(oR,{onMount:l,assetUrls:s})})})}));var bR=n(2702),wR=n.n(bR);!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".cdx-simple-image .cdx-loader{min-height:200px}.cdx-simple-image .cdx-input{margin-top:10px}.cdx-simple-image img{max-width:100%;vertical-align:bottom}.cdx-simple-image__caption[contentEditable=true][data-placeholder]:empty:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.cdx-simple-image__caption[contentEditable=true][data-placeholder]:empty:before{opacity:1}.cdx-simple-image__caption[contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}.cdx-simple-image__picture--with-background{background:#eff2f5;padding:10px}.cdx-simple-image__picture--with-background img{display:block;max-width:60%;margin:0 auto}.cdx-simple-image__picture--with-border{border:1px solid #e8e8eb;padding:1px}.cdx-simple-image__picture--stretched img{max-width:none;width:100%}")),document.head.appendChild(e)}}catch(cO){console.error("vite-plugin-css-injected-by-js",cO)}}();class xR{constructor(e){let{data:t,config:n,api:o,readOnly:r}=e;this.api=o,this.readOnly=r,this.blockIndex=this.api.blocks.getCurrentBlockIndex()+1,this.CSS={baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,wrapper:"cdx-simple-image",imageHolder:"cdx-simple-image__picture",caption:"cdx-simple-image__caption"},this.nodes={wrapper:null,imageHolder:null,image:null,caption:null},this.data={url:t.url||"",caption:t.caption||"",withBorder:void 0!==t.withBorder&&t.withBorder,withBackground:void 0!==t.withBackground&&t.withBackground,stretched:void 0!==t.stretched&&t.stretched},this.tunes=[{name:"withBorder",label:"Add Border",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 9.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 5H14.5096"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.625 5H15C17.2091 5 19 6.79086 19 9V9.375"/><path stroke="currentColor" stroke-width="2" d="M9.375 5L9 5C6.79086 5 5 6.79086 5 9V9.375"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 5H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 9.5H5.00957"/><path stroke="currentColor" stroke-width="2" d="M9.375 19H9C6.79086 19 5 17.2091 5 15V14.625"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 19H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 14.55H5.00957"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/></svg>'},{name:"stretched",label:"Stretch Image",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>'},{name:"withBackground",label:"Add Background",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>'}]}render(){const e=this._make("div",[this.CSS.baseClass,this.CSS.wrapper]),t=this._make("div",this.CSS.loading),n=this._make("div",this.CSS.imageHolder),o=this._make("img"),r=this._make("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly,innerHTML:this.data.caption||""});return r.dataset.placeholder="Enter a caption",e.appendChild(t),this.data.url&&(o.src=this.data.url),o.onload=()=>{e.classList.remove(this.CSS.loading),n.appendChild(o),e.appendChild(n),e.appendChild(r),t.remove(),this._acceptTuneView()},o.onerror=e=>{console.log("Failed to load an image",e)},this.nodes.imageHolder=n,this.nodes.wrapper=e,this.nodes.image=o,this.nodes.caption=r,e}save(e){const t=e.querySelector("img"),n=e.querySelector("."+this.CSS.input);return t?Object.assign(this.data,{url:t.src,caption:n.innerHTML}):this.data}static get sanitize(){return{url:{},withBorder:{},withBackground:{},stretched:{},caption:{br:!0}}}static get isReadOnlySupported(){return!0}onDropHandler(e){const t=new FileReader;return t.readAsDataURL(e),new Promise((n=>{t.onload=t=>{n({url:t.target.result,caption:e.name})}}))}onPaste(e){switch(e.type){case"tag":{const t=e.detail.data;this.data={url:t.src};break}case"pattern":{const{data:t}=e.detail;this.data={url:t};break}case"file":{const{file:t}=e.detail;this.onDropHandler(t).then((e=>{this.data=e}));break}}}get data(){return this._data}set data(e){this._data=Object.assign({},this.data,e),this.nodes.image&&(this.nodes.image.src=this.data.url),this.nodes.caption&&(this.nodes.caption.innerHTML=this.data.caption)}static get pasteConfig(){return{patterns:{image:/https?:\/\/\S+\.(gif|jpe?g|tiff|png|webp)$/i},tags:[{img:{src:!0}}],files:{mimeTypes:["image/*"]}}}renderSettings(){return this.tunes.map((e=>({...e,label:this.api.i18n.t(e.label),toggle:!0,onActivate:()=>this._toggleTune(e.name),isActive:!!this.data[e.name]})))}_make(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=document.createElement(e);Array.isArray(t)?o.classList.add(...t):t&&o.classList.add(t);for(const r in n)o[r]=n[r];return o}_toggleTune(e){this.data[e]=!this.data[e],this._acceptTuneView()}_acceptTuneView(){this.tunes.forEach((e=>{this.nodes.imageHolder.classList.toggle(this.CSS.imageHolder+"--"+e.name.replace(/([A-Z])/g,(e=>"-".concat(e[0].toLowerCase()))),!!this.data[e.name]),"stretched"===e.name&&this.api.blocks.stretchBlock(this.blockIndex,!!this.data.stretched)}))}}function SR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=document.createElement(e);Array.isArray(t)?o.classList.add(...t):t&&o.classList.add(t);for(const r in n)o[r]=n[r];return o}function _R(e){const t=SR("div");return t.appendChild(e),t.innerHTML}function kR(e){let t;return e.nodeType!==Node.ELEMENT_NODE?t=e.textContent:(t=e.innerHTML,t=t.replaceAll("<br>","")),0===t.trim().length}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.cdx-nested-list{margin:0;padding:0;outline:none;counter-reset:item;list-style:none}.cdx-nested-list__item{line-height:1.6em;display:flex;margin:2px 0}.cdx-nested-list__item [contenteditable]{outline:none}.cdx-nested-list__item-body{flex-grow:2}.cdx-nested-list__item-content,.cdx-nested-list__item-children{flex-basis:100%}.cdx-nested-list__item-content{word-break:break-word;white-space:pre-wrap}.cdx-nested-list__item:before{counter-increment:item;margin-right:5px;white-space:nowrap}.cdx-nested-list--ordered>.cdx-nested-list__item:before{content:counters(item,".") ". "}.cdx-nested-list--unordered>.cdx-nested-list__item:before{content:"\u2022"}.cdx-nested-list__settings{display:flex}.cdx-nested-list__settings .cdx-settings-button{width:50%}')),document.head.appendChild(e)}}catch(cO){console.error("vite-plugin-css-injected-by-js",cO)}}();class CR{constructor(){this.savedFakeCaret=void 0}save(){const e=CR.range,t=SR("span");t.hidden=!0,e.insertNode(t),this.savedFakeCaret=t}restore(){if(!this.savedFakeCaret)return;const e=window.getSelection(),t=new Range;t.setStartAfter(this.savedFakeCaret),t.setEndAfter(this.savedFakeCaret),e.removeAllRanges(),e.addRange(t),setTimeout((()=>{this.savedFakeCaret.remove()}),150)}static get range(){const e=window.getSelection();return e&&e.rangeCount?e.getRangeAt(0):null}static extractFragmentFromCaretPositionTillTheEnd(){const e=window.getSelection();if(!e.rangeCount)return;const t=e.getRangeAt(0);let n=t.startContainer;n.nodeType!==Node.ELEMENT_NODE&&(n=n.parentNode);const o=n.closest("[contenteditable]");t.deleteContents();const r=t.cloneRange();return r.selectNodeContents(o),r.setStart(t.endContainer,t.endOffset),r.extractContents()}static focus(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=document.createRange(),o=window.getSelection();n.selectNodeContents(e),n.collapse(t),o.removeAllRanges(),o.addRange(n)}static isAtStart(){const e=window.getSelection();if(e.focusOffset>0)return!1;const t=e.focusNode;return CR.getHigherLevelSiblings(t,"left").every((e=>kR(e)))}static getHigherLevelSiblings(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"left",n=e;const o=[];for(;n.parentNode&&"true"!==n.parentNode.contentEditable;)n=n.parentNode;const r="left"===t?"previousSibling":"nextSibling";for(;n[r];)n=n[r],o.push(n);return o}}const ER='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',IR='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>';class TR{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:IR,title:"List"}}constructor(e){let{data:t,config:n,api:o,readOnly:r}=e;this.nodes={wrapper:null},this.api=o,this.readOnly=r,this.config=n,this.defaultListStyle="ordered"===this.config.defaultStyle?"ordered":"unordered";const i={style:this.defaultListStyle,items:[]};this.data=t&&Object.keys(t).length?t:i,this.caret=new CR}render(){return this.nodes.wrapper=this.makeListWrapper(this.data.style,[this.CSS.baseBlock]),this.data.items.length?this.appendItems(this.data.items,this.nodes.wrapper):this.appendItems([{content:"",items:[]}],this.nodes.wrapper),this.readOnly||this.nodes.wrapper.addEventListener("keydown",(e=>{switch(e.key){case"Enter":this.enterPressed(e);break;case"Backspace":this.backspace(e);break;case"Tab":e.shiftKey?this.shiftTab(e):this.addTab(e)}}),!1),this.nodes.wrapper}renderSettings(){return[{name:"unordered",label:this.api.i18n.t("Unordered"),icon:ER},{name:"ordered",label:this.api.i18n.t("Ordered"),icon:IR}].map((e=>({name:e.name,icon:e.icon,label:e.label,isActive:this.data.style===e.name,closeOnActivate:!0,onActivate:()=>{this.listStyle=e.name}})))}static get pasteConfig(){return{tags:["OL","UL","LI"]}}onPaste(e){const t=e.detail.data;this.data=this.pasteHandler(t);const n=this.nodes.wrapper;n&&n.parentNode.replaceChild(this.render(),n)}pasteHandler(e){const{tagName:t}=e;let n,o;switch(t){case"OL":n="ordered",o="ol";break;case"UL":case"LI":n="unordered",o="ul"}const r={style:n,items:[]},i=e=>Array.from(e.querySelectorAll(":scope > li")).map((e=>{var t;const n=e.querySelector(":scope > ".concat(o)),r=n?i(n):[];return{content:(null==(t=null==e?void 0:e.firstChild)?void 0:t.textContent)||"",items:r}}));return r.items=i(e),r}appendItems(e,t){e.forEach((e=>{const n=this.createItem(e.content,e.items);t.appendChild(n)}))}createItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=SR("li",this.CSS.item),o=SR("div",this.CSS.itemBody),r=SR("div",this.CSS.itemContent,{innerHTML:e,contentEditable:!this.readOnly});return o.appendChild(r),n.appendChild(o),t&&t.length>0&&this.addChildrenList(n,t),n}save(){const e=t=>Array.from(t.querySelectorAll(":scope > .".concat(this.CSS.item))).map((t=>{const n=t.querySelector(".".concat(this.CSS.itemChildren));return{content:this.getItemContent(t),items:n?e(n):[]}}));return{style:this.data.style,items:e(this.nodes.wrapper)}}addChildrenList(e,t){const n=e.querySelector(".".concat(this.CSS.itemBody)),o=this.makeListWrapper(void 0,[this.CSS.itemChildren]);this.appendItems(t,o),n.appendChild(o)}makeListWrapper(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.listStyle,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n="ordered"===e?"ol":"ul",o="ordered"===e?this.CSS.wrapperOrdered:this.CSS.wrapperUnordered;return t.push(o),SR(n,[this.CSS.wrapper,...t])}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-nested-list",wrapperOrdered:"cdx-nested-list--ordered",wrapperUnordered:"cdx-nested-list--unordered",item:"cdx-nested-list__item",itemBody:"cdx-nested-list__item-body",itemContent:"cdx-nested-list__item-content",itemChildren:"cdx-nested-list__item-children",settingsWrapper:"cdx-nested-list__settings",settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive}}get listStyle(){return this.data.style||this.defaultListStyle}set listStyle(e){const t=Array.from(this.nodes.wrapper.querySelectorAll(".".concat(this.CSS.wrapper)));t.push(this.nodes.wrapper),t.forEach((t=>{t.classList.toggle(this.CSS.wrapperUnordered,"unordered"===e),t.classList.toggle(this.CSS.wrapperOrdered,"ordered"===e)})),this.data.style=e}get currentItem(){let e=window.getSelection().anchorNode;return e.nodeType!==Node.ELEMENT_NODE&&(e=e.parentNode),e.closest(".".concat(this.CSS.item))}enterPressed(e){const t=this.currentItem;if(e.stopPropagation(),e.preventDefault(),e.isComposing)return;const n=0===this.getItemContent(t).trim().length,o=t.parentNode===this.nodes.wrapper,r=null===t.nextElementSibling;if(o&&r&&n)return void this.getOutOfList();if(r&&n)return void this.unshiftItem();const i=_R(CR.extractFragmentFromCaretPositionTillTheEnd()),s=t.querySelector(".".concat(this.CSS.itemChildren)),a=this.createItem(i,void 0);s&&Array.from(s.querySelectorAll(".".concat(this.CSS.item))).length>0?s.prepend(a):t.after(a),this.focusItem(a)}unshiftItem(){const e=this.currentItem,t=e.parentNode.closest(".".concat(this.CSS.item));if(!t)return;this.caret.save(),t.after(e),this.caret.restore();const n=t.querySelector(".".concat(this.CSS.itemChildren));0===n.children.length&&n.remove()}getItemContent(e){const t=e.querySelector(".".concat(this.CSS.itemContent));return kR(t)?"":t.innerHTML}focusItem(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e.querySelector(".".concat(this.CSS.itemContent));CR.focus(n,t)}getOutOfList(){this.currentItem.remove(),this.api.blocks.insert(),this.api.caret.setToBlock(this.api.blocks.getCurrentBlockIndex())}backspace(e){if(!CR.isAtStart())return;e.preventDefault();const t=this.currentItem,n=t.previousSibling,o=t.parentNode.closest(".".concat(this.CSS.item));if(!n&&!o)return;let r;if(e.stopPropagation(),n){const e=n.querySelectorAll(".".concat(this.CSS.item));r=Array.from(e).pop()||n}else r=o;const i=_R(CR.extractFragmentFromCaretPositionTillTheEnd()),s=r.querySelector(".".concat(this.CSS.itemContent));CR.focus(s,!1),this.caret.save(),s.insertAdjacentHTML("beforeend",i);let a=t.querySelectorAll(".".concat(this.CSS.itemChildren," > .").concat(this.CSS.item));a=Array.from(a),a=a.filter((e=>e.parentNode.closest(".".concat(this.CSS.item))===t)),a.reverse().forEach((e=>{n?r.after(e):t.after(e)})),t.remove(),this.caret.restore()}addTab(e){e.stopPropagation(),e.preventDefault();const t=this.currentItem,n=t.previousSibling;if(!n)return;const o=n.querySelector(".".concat(this.CSS.itemChildren));if(this.caret.save(),o)o.appendChild(t);else{const e=this.makeListWrapper(void 0,[this.CSS.itemChildren]),o=n.querySelector(".".concat(this.CSS.itemBody));e.appendChild(t),o.appendChild(e)}this.caret.restore()}shiftTab(e){e.stopPropagation(),e.preventDefault(),this.unshiftItem()}static joinRecursive(e){return e.items.map((e=>"".concat(e.content," ").concat(TR.joinRecursive(e)))).join("")}static get conversionConfig(){return{export:e=>TR.joinRecursive(e),import:e=>({items:[{content:e,items:[]}],style:"unordered"})}}}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.cdx-checklist{gap:6px;display:flex;flex-direction:column}.cdx-checklist__item{display:flex;box-sizing:content-box;align-items:flex-start}.cdx-checklist__item-text{outline:none;flex-grow:1;line-height:1.57em}.cdx-checklist__item-checkbox{width:22px;height:22px;display:flex;align-items:center;margin-right:8px;margin-top:calc(.785em - 11px);cursor:pointer}.cdx-checklist__item-checkbox svg{opacity:0;height:20px;width:20px;position:absolute;left:-1px;top:-1px;max-height:20px}@media (hover: hover){.cdx-checklist__item-checkbox:not(.cdx-checklist__item-checkbox--no-hover):hover .cdx-checklist__item-checkbox-check svg{opacity:1}}.cdx-checklist__item-checkbox-check{cursor:pointer;display:inline-block;flex-shrink:0;position:relative;width:20px;height:20px;box-sizing:border-box;margin-left:0;border-radius:5px;border:1px solid #C9C9C9;background:#fff}.cdx-checklist__item-checkbox-check:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:100%;background-color:#369fff;visibility:hidden;pointer-events:none;transform:scale(1);transition:transform .4s ease-out,opacity .4s}@media (hover: hover){.cdx-checklist__item--checked .cdx-checklist__item-checkbox:not(.cdx-checklist__item--checked .cdx-checklist__item-checkbox--no-hover):hover .cdx-checklist__item-checkbox-check{background:#0059AB;border-color:#0059ab}}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check{background:#369FFF;border-color:#369fff}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check svg{opacity:1}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check svg path{stroke:#fff}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check:before{opacity:0;visibility:visible;transform:scale(2.5)}')),document.head.appendChild(e)}}catch(CR){console.error("vite-plugin-css-injected-by-js",CR)}}();function PR(){const e=document.activeElement,t=window.getSelection().getRangeAt(0),n=t.cloneRange();return n.selectNodeContents(e),n.setStart(t.endContainer,t.endOffset),n.extractContents()}function AR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=document.createElement(e);Array.isArray(t)?o.classList.add(...t):t&&o.classList.add(t);for(const r in n)o[r]=n[r];return o}function MR(e){return e.innerHTML.replace("<br>"," ").trim()}function jR(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const o=document.createRange(),r=window.getSelection();o.selectNodeContents(e),void 0!==n&&(o.setStart(e,n),o.setEnd(e,n)),o.collapse(t),r.removeAllRanges(),r.addRange(o)}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});class OR{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.2 12L11.0586 13.8586C11.1367 13.9367 11.2633 13.9367 11.3414 13.8586L14.7 10.5"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',title:"Checklist"}}static get conversionConfig(){return{export:e=>e.items.map((e=>{let{text:t}=e;return t})).join(". "),import:e=>({items:[{text:e,checked:!1}]})}}constructor(e){let{data:t,config:n,api:o,readOnly:r}=e;this._elements={wrapper:null,items:[]},this.readOnly=r,this.api=o,this.data=t||{}}render(){return this._elements.wrapper=AR("div",[this.CSS.baseBlock,this.CSS.wrapper]),this.data.items||(this.data.items=[{text:"",checked:!1}]),this.data.items.forEach((e=>{const t=this.createChecklistItem(e);this._elements.wrapper.appendChild(t)})),this.readOnly||(this._elements.wrapper.addEventListener("keydown",(e=>{const[t,n]=[13,8];switch(e.keyCode){case t:this.enterPressed(e);break;case n:this.backspace(e)}}),!1),this._elements.wrapper.addEventListener("click",(e=>{this.toggleCheckbox(e)}))),this._elements.wrapper}save(){let e=this.items.map((e=>({text:MR(this.getItemInput(e)),checked:e.classList.contains(this.CSS.itemChecked)})));return e=e.filter((e=>0!==e.text.trim().length)),{items:e}}validate(e){return!!e.items.length}toggleCheckbox(e){const t=e.target.closest(".".concat(this.CSS.item)),n=t.querySelector(".".concat(this.CSS.checkboxContainer));n.contains(e.target)&&(t.classList.toggle(this.CSS.itemChecked),n.classList.add(this.CSS.noHover),n.addEventListener("mouseleave",(()=>this.removeSpecialHoverBehavior(n)),{once:!0}))}createChecklistItem(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=AR("div",this.CSS.item),n=AR("span",this.CSS.checkbox),o=AR("div",this.CSS.checkboxContainer),r=AR("div",this.CSS.textField,{innerHTML:e.text?e.text:"",contentEditable:!this.readOnly});return e.checked&&t.classList.add(this.CSS.itemChecked),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 12L10.4884 15.8372C10.5677 15.9245 10.705 15.9245 10.7844 15.8372L17 9"/></svg>',o.appendChild(n),t.appendChild(o),t.appendChild(r),t}enterPressed(e){e.preventDefault();const t=this.items,n=document.activeElement.closest(".".concat(this.CSS.item));if(t.indexOf(n)===t.length-1&&0===MR(this.getItemInput(n)).length){const e=this.api.blocks.getCurrentBlockIndex();return n.remove(),this.api.blocks.insert(),void this.api.caret.setToBlock(e+1)}const o=function(e){const t=document.createElement("div");return t.appendChild(e),t.innerHTML}(PR()),r=this.createChecklistItem({text:o,checked:!1});this._elements.wrapper.insertBefore(r,n.nextSibling),jR(this.getItemInput(r),!0)}backspace(e){const t=e.target.closest(".".concat(this.CSS.item)),n=this.items.indexOf(t),o=this.items[n-1];if(!o||0!==window.getSelection().focusOffset)return;e.preventDefault();const r=PR(),i=this.getItemInput(o),s=i.childNodes.length;i.appendChild(r),jR(i,void 0,s),t.remove()}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-checklist",item:"cdx-checklist__item",itemChecked:"cdx-checklist__item--checked",noHover:"cdx-checklist__item-checkbox--no-hover",checkbox:"cdx-checklist__item-checkbox-check",textField:"cdx-checklist__item-text",checkboxContainer:"cdx-checklist__item-checkbox"}}get items(){return Array.from(this._elements.wrapper.querySelectorAll(".".concat(this.CSS.item)))}removeSpecialHoverBehavior(e){e.classList.remove(this.CSS.noHover)}getItemInput(e){return e.querySelector(".".concat(this.CSS.textField))}}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".cdx-quote-icon svg{transform:rotate(180deg)}.cdx-quote{margin:0}.cdx-quote__text{min-height:158px;margin-bottom:10px}.cdx-quote [contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.cdx-quote [contentEditable=true][data-placeholder]:empty:before{opacity:1}.cdx-quote [contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}.cdx-quote-settings{display:flex}.cdx-quote-settings .cdx-settings-button{width:50%}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();class LR{static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 10.8182L9 10.8182C8.80222 10.8182 8.60888 10.7649 8.44443 10.665C8.27998 10.5651 8.15181 10.4231 8.07612 10.257C8.00043 10.0909 7.98063 9.90808 8.01922 9.73174C8.0578 9.55539 8.15304 9.39341 8.29289 9.26627C8.43275 9.13913 8.61093 9.05255 8.80491 9.01747C8.99889 8.98239 9.19996 9.00039 9.38268 9.0692C9.56541 9.13801 9.72159 9.25453 9.83147 9.40403C9.94135 9.55353 10 9.72929 10 9.90909L10 12.1818C10 12.664 9.78929 13.1265 9.41421 13.4675C9.03914 13.8084 8.53043 14 8 14"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 10.8182L15 10.8182C14.8022 10.8182 14.6089 10.7649 14.4444 10.665C14.28 10.5651 14.1518 10.4231 14.0761 10.257C14.0004 10.0909 13.9806 9.90808 14.0192 9.73174C14.0578 9.55539 14.153 9.39341 14.2929 9.26627C14.4327 9.13913 14.6109 9.05255 14.8049 9.01747C14.9989 8.98239 15.2 9.00039 15.3827 9.0692C15.5654 9.13801 15.7216 9.25453 15.8315 9.40403C15.9414 9.55353 16 9.72929 16 9.90909L16 12.1818C16 12.664 15.7893 13.1265 15.4142 13.4675C15.0391 13.8084 14.5304 14 14 14"/></svg>',title:"Quote"}}static get contentless(){return!0}static get enableLineBreaks(){return!0}static get DEFAULT_QUOTE_PLACEHOLDER(){return"Enter a quote"}static get DEFAULT_CAPTION_PLACEHOLDER(){return"Enter a caption"}static get ALIGNMENTS(){return{left:"left",center:"center"}}static get DEFAULT_ALIGNMENT(){return LR.ALIGNMENTS.left}static get conversionConfig(){return{import:"text",export:function(e){return e.caption?"".concat(e.text," \u2014 ").concat(e.caption):e.text}}}get CSS(){return{baseClass:this.api.styles.block,wrapper:"cdx-quote",text:"cdx-quote__text",input:this.api.styles.input,caption:"cdx-quote__caption"}}get settings(){return[{name:"left",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 7L5 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 17H5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13 12L5 12"/></svg>'},{name:"center",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 7L6 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 17H6"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 12L8 12"/></svg>'}]}constructor(e){let{data:t,config:n,api:o,readOnly:r}=e;const{ALIGNMENTS:i,DEFAULT_ALIGNMENT:s}=LR;this.api=o,this.readOnly=r,this.quotePlaceholder=n.quotePlaceholder||LR.DEFAULT_QUOTE_PLACEHOLDER,this.captionPlaceholder=n.captionPlaceholder||LR.DEFAULT_CAPTION_PLACEHOLDER,this.data={text:t.text||"",caption:t.caption||"",alignment:Object.values(i).includes(t.alignment)&&t.alignment||n.defaultAlignment||s}}render(){const e=this._make("blockquote",[this.CSS.baseClass,this.CSS.wrapper]),t=this._make("div",[this.CSS.input,this.CSS.text],{contentEditable:!this.readOnly,innerHTML:this.data.text}),n=this._make("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly,innerHTML:this.data.caption});return t.dataset.placeholder=this.quotePlaceholder,n.dataset.placeholder=this.captionPlaceholder,e.appendChild(t),e.appendChild(n),e}save(e){const t=e.querySelector(".".concat(this.CSS.text)),n=e.querySelector(".".concat(this.CSS.caption));return Object.assign(this.data,{text:t.innerHTML,caption:n.innerHTML})}static get sanitize(){return{text:{br:!0},caption:{br:!0},alignment:{}}}renderSettings(){const e=e=>e[0].toUpperCase()+e.substr(1);return this.settings.map((t=>({icon:t.icon,label:this.api.i18n.t("Align ".concat(e(t.name))),onActivate:()=>this._toggleTune(t.name),isActive:this.data.alignment===t.name,closeOnActivate:!0})))}_toggleTune(e){this.data.alignment=e}_make(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=document.createElement(e);Array.isArray(t)?o.classList.add(...t):t&&o.classList.add(t);for(const r in n)o[r]=n[r];return o}}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.ce-delimiter{line-height:1.6em;width:100%;text-align:center}.ce-delimiter:before{display:inline-block;content:"***";font-size:30px;line-height:65px;height:30px;letter-spacing:.2em}')),document.head.appendChild(e)}}catch(cO){console.error("vite-plugin-css-injected-by-js",cO)}}();class BR{static get isReadOnlySupported(){return!0}static get contentless(){return!0}constructor(e){let{data:t,config:n,api:o}=e;this.api=o,this._CSS={block:this.api.styles.block,wrapper:"ce-delimiter"},this._data={},this._element=this.drawView(),this.data=t}drawView(){let e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e}render(){return this._element}save(e){return{}}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="6" x2="10" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="14" x2="18" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',title:"Delimiter"}}}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".inline-code{background:rgba(250,239,240,.78);color:#b44437;padding:3px 4px;border-radius:5px;margin:0 1px;font-family:inherit;font-size:.86em;font-weight:500;letter-spacing:.3px}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();class RR{static get CSS(){return"inline-code"}constructor(e){let{api:t}=e;this.api=t,this.button=null,this.tag="CODE",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}static get isInline(){return!0}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}surround(e){if(!e)return;let t=this.api.selection.findParentTag(this.tag,RR.CSS);t?this.unwrap(t):this.wrap(e)}wrap(e){let t=document.createElement(this.tag);t.classList.add(RR.CSS),t.appendChild(e.extractContents()),e.insertNode(t),this.api.selection.expandToTag(t)}unwrap(e){this.api.selection.expandToTag(e);let t=window.getSelection(),n=t.getRangeAt(0),o=n.extractContents();e.parentNode.removeChild(e),n.insertNode(o),t.removeAllRanges(),t.addRange(n)}checkState(){const e=this.api.selection.findParentTag(this.tag,RR.CSS);this.button.classList.toggle(this.iconClasses.active,!!e)}get toolboxIcon(){return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.5 8L6.11524 11.8683C6.04926 11.9437 6.04926 12.0563 6.11524 12.1317L9.5 16"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15 8L18.3848 11.8683C18.4507 11.9437 18.4507 12.0563 18.3848 12.1317L15 16"/></svg>'}static get sanitize(){return{code:{class:RR.CSS}}}}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".link-tool{position:relative}.link-tool__input{padding-left:38px;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none'%3E%3Cpath stroke='%23707684' stroke-linecap='round' stroke-width='2' d='m7.7 12.6-.021.02a2.795 2.795 0 0 0-.044 4.005v0a2.795 2.795 0 0 0 3.936.006l1.455-1.438a3 3 0 0 0 .34-3.866l-.146-.207'/%3E%3Cpath stroke='%23707684' stroke-linecap='round' stroke-width='2' d='m16.22 11.12.136-.14c.933-.954.992-2.46.135-3.483v0a2.597 2.597 0 0 0-3.664-.32L11.39 8.386a3 3 0 0 0-.301 4.3l.031.034'/%3E%3C/svg%3E\");background-repeat:no-repeat;background-position:10px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.link-tool__input-holder{position:relative}.link-tool__input-holder--error .link-tool__input{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none'%3E%3Cpath stroke='rgb(224, 147, 147)' stroke-linecap='round' stroke-width='2' d='m7.7 12.6-.021.02a2.795 2.795 0 0 0-.044 4.005v0a2.795 2.795 0 0 0 3.936.006l1.455-1.438a3 3 0 0 0 .34-3.866l-.146-.207'/%3E%3Cpath stroke='rgb(224, 147, 147)' stroke-linecap='round' stroke-width='2' d='m16.22 11.12.136-.14c.933-.954.992-2.46.135-3.483v0a2.597 2.597 0 0 0-3.664-.32L11.39 8.386a3 3 0 0 0-.301 4.3l.031.034'/%3E%3C/svg%3E\");background-color:#fff3f6;border-color:#f3e0e0;color:#a95a5a;box-shadow:inset 0 1px 3px #923e3e0d}.link-tool__input[contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.link-tool__input[contentEditable=true][data-placeholder]:empty:before{opacity:1}.link-tool__input[contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}.link-tool__progress{position:absolute;box-shadow:inset 0 1px 3px #66556b0a;height:100%;width:0;background-color:#f4f5f7;z-index:-1}.link-tool__progress--loading{-webkit-animation:progress .5s ease-in;-webkit-animation-fill-mode:forwards}.link-tool__progress--loaded{width:100%}.link-tool__content{display:block;padding:25px;border-radius:2px;box-shadow:0 0 0 2px #fff;color:initial!important;text-decoration:none!important}.link-tool__content:after{content:\"\";clear:both;display:table}.link-tool__content--rendered{background:#fff;border:1px solid rgba(201,201,204,.48);box-shadow:0 1px 3px #0000001a;border-radius:6px;will-change:filter;animation:link-in .45s 1 cubic-bezier(.215,.61,.355,1)}.link-tool__content--rendered:hover{box-shadow:0 0 3px #00000029}.link-tool__image{background-position:center center;background-repeat:no-repeat;background-size:cover;margin:0 0 0 30px;width:65px;height:65px;border-radius:3px;float:right}.link-tool__title{font-size:17px;font-weight:600;line-height:1.5em;margin:0 0 10px}.link-tool__title+.link-tool__anchor{margin-top:25px}.link-tool__description{margin:0 0 20px;font-size:15px;line-height:1.55em;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.link-tool__anchor{display:block;font-size:15px;line-height:1em;color:#888!important;border:0!important;padding:0!important}@keyframes link-in{0%{filter:blur(5px)}to{filter:none}}.codex-editor--narrow .link-tool__image{display:none}@-webkit-keyframes progress{0%{width:0}to{width:85%}}")),document.head.appendChild(e)}}catch(cO){console.error("vite-plugin-css-injected-by-js",cO)}}();var NR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};!function(e){var t=function(){try{return!!Symbol.iterator}catch{return!1}}(),n=function(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n},o=function(e){return encodeURIComponent(e).replace(/%20/g,"+")},r=function(e){return decodeURIComponent(String(e).replace(/\+/g," "))};(function(){try{var t=e.URLSearchParams;return"a=1"===new t("?a=1").toString()&&"function"==typeof t.prototype.set}catch{return!1}})()||function(){var r=function(e){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var t=typeof e;if("undefined"!==t)if("string"===t)""!==e&&this._fromString(e);else if(e instanceof r){var n=this;e.forEach((function(e,t){n.append(t,e)}))}else{if(null===e||"object"!==t)throw new TypeError("Unsupported input's type for URLSearchParams");if("[object Array]"===Object.prototype.toString.call(e))for(var o=0;o<e.length;o++){var i=e[o];if("[object Array]"!==Object.prototype.toString.call(i)&&2===i.length)throw new TypeError("Expected [string, any] as entry at index "+o+" of URLSearchParams's input");this.append(i[0],i[1])}else for(var s in e)e.hasOwnProperty(s)&&this.append(s,e[s])}},i=r.prototype;i.append=function(e,t){e in this._entries?this._entries[e].push(String(t)):this._entries[e]=[String(t)]},i.delete=function(e){delete this._entries[e]},i.get=function(e){return e in this._entries?this._entries[e][0]:null},i.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},i.has=function(e){return e in this._entries},i.set=function(e,t){this._entries[e]=[String(t)]},i.forEach=function(e,t){var n;for(var o in this._entries)if(this._entries.hasOwnProperty(o)){n=this._entries[o];for(var r=0;r<n.length;r++)e.call(t,n[r],o,this)}},i.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),n(e)},i.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),n(e)},i.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),n(e)},t&&(i[Symbol.iterator]=i.entries),i.toString=function(){var e=[];return this.forEach((function(t,n){e.push(o(n)+"="+o(t))})),e.join("&")},e.URLSearchParams=r}();var i=e.URLSearchParams.prototype;"function"!=typeof i.sort&&(i.sort=function(){var e=this,t=[];this.forEach((function(n,o){t.push([o,n]),e._entries||e.delete(o)})),t.sort((function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0})),e._entries&&(e._entries={});for(var n=0;n<t.length;n++)this.append(t[n][0],t[n][1])}),"function"!=typeof i._fromString&&Object.defineProperty(i,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(e){if(this._entries)this._entries={};else{var t=[];this.forEach((function(e,n){t.push(n)}));for(var n=0;n<t.length;n++)this.delete(t[n])}var o,i=(e=e.replace(/^\?/,"")).split("&");for(n=0;n<i.length;n++)o=i[n].split("="),this.append(r(o[0]),o.length>1?r(o[1]):"")}})}(typeof NR<"u"?NR:typeof window<"u"?window:typeof self<"u"?self:NR),function(e){if(function(){try{var t=new e.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href&&t.searchParams}catch{return!1}}()||function(){var t=e.URL,n=function(t,n){"string"!=typeof t&&(t=String(t));var o,r=document;if(n&&(void 0===e.location||n!==e.location.href)){(o=(r=document.implementation.createHTMLDocument("")).createElement("base")).href=n,r.head.appendChild(o);try{if(0!==o.href.indexOf(n))throw new Error(o.href)}catch(MR){throw new Error("URL unable to set base "+n+" due to "+MR)}}var i=r.createElement("a");i.href=t,o&&(r.body.appendChild(i),i.href=i.href);var s=r.createElement("input");if(s.type="url",s.value=t,":"===i.protocol||!/:/.test(i.href)||!s.checkValidity()&&!n)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:i});var a=new e.URLSearchParams(this.search),l=!0,c=!0,d=this;["append","delete","set"].forEach((function(e){var t=a[e];a[e]=function(){t.apply(a,arguments),l&&(c=!1,d.search=a.toString(),c=!0)}})),Object.defineProperty(this,"searchParams",{value:a,enumerable:!0});var u=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==u&&(u=this.search,c&&(l=!1,this.searchParams._fromString(this.search),l=!0))}})},o=n.prototype;["hash","host","hostname","port","protocol"].forEach((function(e){!function(e){Object.defineProperty(o,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:!0})}(e)})),Object.defineProperty(o,"search",{get:function(){return this._anchorElement.search},set:function(e){this._anchorElement.search=e,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(o,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],t=this._anchorElement.port!=e&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(t?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(e){},enumerable:!0},username:{get:function(){return""},set:function(e){},enumerable:!0}}),n.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},n.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)},e.URL=n}(),void 0!==e.location&&!("origin"in e.location)){var t=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:t,enumerable:!0})}catch{setInterval((function(){e.location.origin=t()}),100)}}}(typeof NR<"u"?NR:typeof window<"u"?window:typeof self<"u"?self:NR);var DR={exports:{}};!function(e,t){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(e){var o=n(2),r=setTimeout;function i(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,s._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var o;try{o=n(e._value)}catch(DN){return void c(t.promise,DN)}l(t.promise,o)}else(1===e._state?l:c)(t.promise,e._value)}))):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof s)return e._state=3,e._value=t,void d(e);if("function"==typeof n)return void h((o=n,r=t,function(){o.apply(r,arguments)}),e)}e._state=1,e._value=t,d(e)}catch(_R){c(e,_R)}var o,r}function c(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&s._immediateFn((function(){e._handled||s._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1;try{e((function(e){n||(n=!0,l(t,e))}),(function(e){n||(n=!0,c(t,e))}))}catch(MR){if(n)return;n=!0,c(t,MR)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var n=new this.constructor(i);return a(this,new u(e,t,n)),n},s.prototype.finally=o.a,s.all=function(e){return new s((function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);var r=o.length;function i(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(t){i(e,t)}),n)}o[e]=s,0==--r&&t(o)}catch(l){n(l)}}for(var s=0;s<o.length;s++)i(s,o[s])}))},s.resolve=function(e){return e&&"object"==typeof e&&e.constructor===s?e:new s((function(t){t(e)}))},s.reject=function(e){return new s((function(t,n){n(e)}))},s.race=function(e){return new s((function(t,n){for(var o=0,r=e.length;o<r;o++)e[o].then(t,n)}))},s._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){r(e,0)},s._unhandledRejectionFn=function(e){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.a=s}).call(this,n(5).setImmediate)},function(e,t,n){t.a=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}},function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4);var r,i,s,a,l,c,d=n(8),u=(i=function(e){return new Promise((function(t,n){e=a(e),e=l(e);var o=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open(e.method,e.url),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(e.headers).forEach((function(t){var n=e.headers[t];o.setRequestHeader(t,n)}));var r=e.ratio;o.upload.addEventListener("progress",(function(t){var n=Math.round(t.loaded/t.total*100),o=Math.ceil(n*r/100);e.progress(o)}),!1),o.addEventListener("progress",(function(t){var n=Math.round(t.loaded/t.total*100),o=Math.ceil(n*(100-r)/100)+r;e.progress(o)}),!1),o.onreadystatechange=function(){if(4===o.readyState){var e=o.response;try{e=JSON.parse(e)}catch{}var r=d.parseHeaders(o.getAllResponseHeaders()),i={body:e,code:o.status,headers:r};200===o.status?t(i):n(i)}},o.send(e.data)}))},s=function(e){return e.method="POST",i(e)},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.url&&"string"!=typeof e.url)throw new Error("Url must be a string");if(e.url=e.url||"",e.method&&"string"!=typeof e.method)throw new Error("`method` must be a string or null");if(e.method=e.method?e.method.toUpperCase():"GET",e.headers&&"object"!==o(e.headers))throw new Error("`headers` must be an object or null");if(e.headers=e.headers||{},e.type&&("string"!=typeof e.type||!Object.values(r).includes(e.type)))throw new Error("`type` must be taken from module's \xabcontentType\xbb library");if(e.progress&&"function"!=typeof e.progress)throw new Error("`progress` must be a function or null");if(e.progress=e.progress||function(e){},e.beforeSend=e.beforeSend||function(e){},e.ratio&&"number"!=typeof e.ratio)throw new Error("`ratio` must be a number");if(e.ratio<0||e.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(e.ratio=e.ratio||90,e.accept&&"string"!=typeof e.accept)throw new Error("`accept` must be a string with a list of allowed mime-types");if(e.accept=e.accept||"*/*",e.multiple&&"boolean"!=typeof e.multiple)throw new Error("`multiple` must be a true or false");if(e.multiple=e.multiple||!1,e.fieldName&&"string"!=typeof e.fieldName)throw new Error("`fieldName` must be a string");return e.fieldName=e.fieldName||"files",e},l=function(e){switch(e.method){case"GET":var t=c(e.data,r.URLENCODED);delete e.data,e.url=/\?/.test(e.url)?e.url+"&"+t:e.url+"?"+t;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var n=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type||r.JSON}(e);(d.isFormData(e.data)||d.isFormElement(e.data))&&(n=r.FORM),e.data=c(e.data,n),n!==u.contentType.FORM&&(e.headers["content-type"]=n)}return e},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case r.URLENCODED:return d.urlEncode(e);case r.JSON:return d.jsonEncode(e);case r.FORM:return d.formEncode(e);default:return e}},{contentType:r={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:i,get:function(e){return e.method="GET",i(e)},post:s,transport:function(e){return e=a(e),d.selectFiles(e).then((function(t){for(var n=new FormData,o=0;o<t.length;o++)n.append(e.fieldName,t[o],t[o].name);return d.isObject(e.data)&&Object.keys(e.data).forEach((function(t){var o=e.data[t];n.append(t,o)})),e.beforeSend&&e.beforeSend(t),e.data=n,s(e)}))},selectFiles:function(e){return delete(e=a(e)).beforeSend,d.selectFiles(e)}});e.exports=u},function(e,t,n){n.r(t);var o=n(1);window.Promise=window.Promise||o.a},function(e,t,n){(function(e){var o=void 0!==e&&e||typeof self<"u"&&self||window,r=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(r.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(6),t.setImmediate=typeof self<"u"&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate=typeof self<"u"&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(e,t,n){(function(e,t){!function(e,n){if(!e.setImmediate){var o,r,i,s,a,l=1,c={},d=!1,u=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),o=function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){f(e.data)},o=function(e){i.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,o=function(e){var t=u.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):o=function(e){setTimeout(f,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[l]=r,o(l),l++},h.clearImmediate=p}function p(e){delete c[e]}function f(e){if(d)setTimeout(f,0,e);else{var t=c[e];if(t){d=!0;try{!function(e){var t=e.callback,o=e.args;switch(o.length){case 0:t();break;case 1:t(o[0]);break;case 2:t(o[0],o[1]);break;case 3:t(o[0],o[1],o[2]);break;default:t.apply(n,o)}}(t)}finally{p(e),d=!1}}}}}(typeof self>"u"?void 0===e?this:e:self)}).call(this,n(0),n(7))},function(e,t){var n,o,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch{try{return n.call(null,e,0)}catch{return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch{n=i}try{o="function"==typeof clearTimeout?clearTimeout:s}catch{o=s}}();var l,c=[],d=!1,u=-1;function h(){d&&l&&(d=!1,l.length?c=l.concat(c):u=-1,c.length&&p())}function p(){if(!d){var e=a(h);d=!0;for(var t=c.length;t;){for(l=c,c=[];++u<t;)l&&l[u].run();u=-1,t=c.length}l=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch{try{return o.call(null,e)}catch{return o.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||d||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=n(9);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"urlEncode",value:function(e){return r(e)}},{key:"jsonEncode",value:function(e){return JSON.stringify(e)}},{key:"formEncode",value:function(e){if(this.isFormData(e))return e;if(this.isFormElement(e))return new FormData(e);if(this.isObject(e)){var t=new FormData;return Object.keys(e).forEach((function(n){var o=e[n];t.append(n,o)})),t}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{key:"isFormData",value:function(e){return e instanceof FormData}},{key:"isFormElement",value:function(e){return e instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){var o=document.createElement("INPUT");o.type="file",e.multiple&&o.setAttribute("multiple","multiple"),e.accept&&o.setAttribute("accept",e.accept),o.style.display="none",document.body.appendChild(o),o.addEventListener("change",(function(e){var n=e.target.files;t(n),document.body.removeChild(o)}),!1),o.click()}))}},{key:"parseHeaders",value:function(e){var t=e.trim().split(/[\r\n]+/),n={};return t.forEach((function(e){var t=e.split(": "),o=t.shift(),r=t.join(": ");o&&(n[o]=r)})),n}}],(n=null)&&o(t.prototype,n),i&&o(t,i),e}()},function(e,t){var n=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},o=function(e,t,r,i){return t=t||null,r=r||"&",i=i||null,e?function(e){for(var t=new Array,n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}(Object.keys(e).map((function(s){var a,l,c=s;if(i&&(c=i+"["+c+"]"),"object"==typeof e[s]&&null!==e[s])a=o(e[s],null,r,c);else{t&&(l=c,c=!isNaN(parseFloat(l))&&isFinite(l)?t+Number(c):c);var d=e[s];d=(d=0===(d=!1===(d=!0===d?"1":d)?"0":d)?"0":d)||"",a=n(c)+"="+n(d)}return a}))).join(r).replace(/[!'()*]/g,""):""};e.exports=o}])}(DR);!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.embed-tool--loading .embed-tool__caption{display:none}.embed-tool--loading .embed-tool__preloader{display:block}.embed-tool--loading .embed-tool__content{display:none}.embed-tool__preloader{display:none;position:relative;height:200px;box-sizing:border-box;border-radius:5px;border:1px solid #e6e9eb}.embed-tool__preloader:before{content:"";position:absolute;z-index:3;left:50%;top:50%;width:30px;height:30px;margin-top:-25px;margin-left:-15px;border-radius:50%;border:2px solid #cdd1e0;border-top-color:#388ae5;box-sizing:border-box;animation:embed-preloader-spin 2s infinite linear}.embed-tool__url{position:absolute;bottom:20px;left:50%;transform:translate(-50%);max-width:250px;color:#7b7e89;font-size:11px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.embed-tool__content{width:100%}.embed-tool__caption{margin-top:7px}.embed-tool__caption[contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.embed-tool__caption[contentEditable=true][data-placeholder]:empty:before{opacity:1}.embed-tool__caption[contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}@keyframes embed-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}')),document.head.appendChild(e)}}catch(BR){console.error("vite-plugin-css-injected-by-js",BR)}}();const zR={vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?(?:player.)?vimeo\.co(?:.+\/([^\/]\d+)(?:#t=[\d]+)?s?$)/,embedUrl:"https://player.vimeo.com/video/<%= remote_id %>?title=0&byline=0",html:'<iframe style="width:100%;" height="320" frameborder="0"></iframe>',height:320,width:580},youtube:{regex:/(?:https?:\/\/)?(?:www\.)?(?:(?:youtu\.be\/)|(?:youtube\.com)\/(?:v\/|u\/\w\/|embed\/|watch))(?:(?:\?v=)?([^#&?=]*))?((?:[?&]\w*=\w*)*)/,embedUrl:"https://www.youtube.com/embed/<%= remote_id %>",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580,id:e=>{let[t,n]=e;if(!n&&t)return t;const o={start:"start",end:"end",t:"start",time_continue:"start",list:"list"};return n=n.slice(1).split("&").map((e=>{const[n,r]=e.split("=");return t||"v"!==n?!o[n]||"LL"===r||r.startsWith("RDMM")||r.startsWith("FL")?null:"".concat(o[n],"=").concat(r):(t=r,null)})).filter((e=>!!e)),t+"?"+n.join("&")}},coub:{regex:/https?:\/\/coub\.com\/view\/([^\/\?\&]+)/,embedUrl:"https://coub.com/embed/<%= remote_id %>",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580},vine:{regex:/https?:\/\/vine\.co\/v\/([^\/\?\&]+)/,embedUrl:"https://vine.co/v/<%= remote_id %>/embed/simple/",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580},imgur:{regex:/https?:\/\/(?:i\.)?imgur\.com.*\/([a-zA-Z0-9]+)(?:\.gifv)?/,embedUrl:"http://imgur.com/<%= remote_id %>/embed",html:'<iframe allowfullscreen="true" scrolling="no" id="imgur-embed-iframe-pub-<%= remote_id %>" class="imgur-embed-iframe-pub" style="height: 500px; width: 100%; border: 1px solid #000"></iframe>',height:500,width:540},gfycat:{regex:/https?:\/\/gfycat\.com(?:\/detail)?\/([a-zA-Z]+)/,embedUrl:"https://gfycat.com/ifr/<%= remote_id %>",html:"<iframe frameborder='0' scrolling='no' style=\"width:100%;\" height='436' allowfullscreen ></iframe>",height:436,width:580},"twitch-channel":{regex:/https?:\/\/www\.twitch\.tv\/([^\/\?\&]*)\/?$/,embedUrl:"https://player.twitch.tv/?channel=<%= remote_id %>",html:'<iframe frameborder="0" allowfullscreen="true" scrolling="no" height="366" style="width:100%;"></iframe>',height:366,width:600},"twitch-video":{regex:/https?:\/\/www\.twitch\.tv\/(?:[^\/\?\&]*\/v|videos)\/([0-9]*)/,embedUrl:"https://player.twitch.tv/?video=v<%= remote_id %>",html:'<iframe frameborder="0" allowfullscreen="true" scrolling="no" height="366" style="width:100%;"></iframe>',height:366,width:600},"yandex-music-album":{regex:/https?:\/\/music\.yandex\.ru\/album\/([0-9]*)\/?$/,embedUrl:"https://music.yandex.ru/iframe/#album/<%= remote_id %>/",html:'<iframe frameborder="0" style="border:none;width:540px;height:400px;" style="width:100%;" height="400"></iframe>',height:400,width:540},"yandex-music-track":{regex:/https?:\/\/music\.yandex\.ru\/album\/([0-9]*)\/track\/([0-9]*)/,embedUrl:"https://music.yandex.ru/iframe/#track/<%= remote_id %>/",html:'<iframe frameborder="0" style="border:none;width:540px;height:100px;" style="width:100%;" height="100"></iframe>',height:100,width:540,id:e=>e.join("/")},"yandex-music-playlist":{regex:/https?:\/\/music\.yandex\.ru\/users\/([^\/\?\&]*)\/playlists\/([0-9]*)/,embedUrl:"https://music.yandex.ru/iframe/#playlist/<%= remote_id %>/show/cover/description/",html:'<iframe frameborder="0" style="border:none;width:540px;height:400px;" width="540" height="400"></iframe>',height:400,width:540,id:e=>e.join("/")},codepen:{regex:/https?:\/\/codepen\.io\/([^\/\?\&]*)\/pen\/([^\/\?\&]*)/,embedUrl:"https://codepen.io/<%= remote_id %>?height=300&theme-id=0&default-tab=css,result&embed-version=2",html:"<iframe height='300' scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'></iframe>",height:300,width:600,id:e=>e.join("/embed/")},instagram:{regex:/https?:\/\/www\.instagram\.com\/p\/([^\/\?\&]+)\/?.*/,embedUrl:"https://www.instagram.com/p/<%= remote_id %>/embed",html:'<iframe width="400" height="505" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:505,width:400},twitter:{regex:/^https?:\/\/twitter\.com\/(?:#!\/)?(\w+)\/status(?:es)?\/(\d+?.*)?$/,embedUrl:"https://twitframe.com/show?url=https://twitter.com/<%= remote_id %>",html:'<iframe width="600" height="600" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:300,width:600,id:e=>e.join("/status/")},pinterest:{regex:/https?:\/\/([^\/\?\&]*).pinterest.com\/pin\/([^\/\?\&]*)\/?$/,embedUrl:"https://assets.pinterest.com/ext/embed.html?id=<%= remote_id %>",html:"<iframe scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%; min-height: 400px; max-height: 1000px;'></iframe>",id:e=>e[1]},facebook:{regex:/https?:\/\/www.facebook.com\/([^\/\?\&]*)\/(.*)/,embedUrl:"https://www.facebook.com/plugins/post.php?href=https://www.facebook.com/<%= remote_id %>&width=500",html:"<iframe scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%; min-height: 500px; max-height: 1000px;'></iframe>",id:e=>e.join("/")},aparat:{regex:/(?:http[s]?:\/\/)?(?:www.)?aparat\.com\/v\/([^\/\?\&]+)\/?/,embedUrl:"https://www.aparat.com/video/video/embed/videohash/<%= remote_id %>/vt/frame",html:'<iframe width="600" height="300" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:300,width:600},miro:{regex:/https:\/\/miro.com\/\S+(\S{12})\/(\S+)?/,embedUrl:"https://miro.com/app/live-embed/<%= remote_id %>",html:'<iframe width="700" height="500" style="margin: 0 auto;" allowFullScreen frameBorder="0" scrolling="no"></iframe>'},github:{regex:/https?:\/\/gist.github.com\/([^\/\?\&]*)\/([^\/\?\&]*)/,embedUrl:'data:text/html;charset=utf-8,<head><base target="_blank" /></head><body><script src="https://gist.github.com/<%= remote_id %>" ><\/script></body>',html:'<iframe width="100%" height="350" frameborder="0" style="margin: 0 auto;"></iframe>',height:300,width:600,id:e=>"".concat(e.join("/"),".js")}};function FR(e,t,n){var o,r,i,s,a;function l(){var c=Date.now()-s;c<t&&c>=0?o=setTimeout(l,t-c):(o=null,n||(a=e.apply(i,r),i=r=null))}null==t&&(t=100);var c=function(){i=this,r=arguments,s=Date.now();var c=n&&!o;return o||(o=setTimeout(l,t)),c&&(a=e.apply(i,r),i=r=null),a};return c.clear=function(){o&&(clearTimeout(o),o=null)},c.flush=function(){o&&(a=e.apply(i,r),i=r=null,clearTimeout(o),o=null)},c}FR.debounce=FR;var UR=FR;class HR{constructor(e){let{data:t,api:n,readOnly:o}=e;this.api=n,this._data={},this.element=null,this.readOnly=o,this.data=t}set data(e){if(!(e instanceof Object))throw Error("Embed Tool data should be object");const{service:t,source:n,embed:o,width:r,height:i,caption:s=""}=e;this._data={service:t||this.data.service,source:n||this.data.source,embed:o||this.data.embed,width:r||this.data.width,height:i||this.data.height,caption:s||this.data.caption||""};const a=this.element;a&&a.parentNode.replaceChild(this.render(),a)}get data(){if(this.element){const e=this.element.querySelector(".".concat(this.api.styles.input));this._data.caption=e?e.innerHTML:""}return this._data}get CSS(){return{baseClass:this.api.styles.block,input:this.api.styles.input,container:"embed-tool",containerLoading:"embed-tool--loading",preloader:"embed-tool__preloader",caption:"embed-tool__caption",url:"embed-tool__url",content:"embed-tool__content"}}render(){if(!this.data.service){const e=document.createElement("div");return this.element=e,e}const{html:e}=HR.services[this.data.service],t=document.createElement("div"),n=document.createElement("div"),o=document.createElement("template"),r=this.createPreloader();t.classList.add(this.CSS.baseClass,this.CSS.container,this.CSS.containerLoading),n.classList.add(this.CSS.input,this.CSS.caption),t.appendChild(r),n.contentEditable=!this.readOnly,n.dataset.placeholder=this.api.i18n.t("Enter a caption"),n.innerHTML=this.data.caption||"",o.innerHTML=e,o.content.firstChild.setAttribute("src",this.data.embed),o.content.firstChild.classList.add(this.CSS.content);const i=this.embedIsReady(t);return t.appendChild(o.content.firstChild),t.appendChild(n),i.then((()=>{t.classList.remove(this.CSS.containerLoading)})),this.element=t,t}createPreloader(){const e=document.createElement("preloader"),t=document.createElement("div");return t.textContent=this.data.source,e.classList.add(this.CSS.preloader),t.classList.add(this.CSS.url),e.appendChild(t),e}save(){return this.data}onPaste(e){const{key:t,data:n}=e.detail,{regex:o,embedUrl:r,width:i,height:s,id:a=(e=>e.shift())}=HR.services[t],l=o.exec(n).slice(1),c=r.replace(/<%= remote_id %>/g,a(l));this.data={service:t,source:n,embed:c,width:i,height:s}}static prepare(e){let{config:t={}}=e;const{services:n={}}=t;let o=Object.entries(zR);const r=Object.entries(n).filter((e=>{let[t,n]=e;return"boolean"==typeof n&&!0===n})).map((e=>{let[t]=e;return t})),i=Object.entries(n).filter((e=>{let[t,n]=e;return"object"==typeof n})).filter((e=>{let[t,n]=e;return HR.checkServiceConfig(n)})).map((e=>{let[t,n]=e;const{regex:o,embedUrl:r,html:i,height:s,width:a,id:l}=n;return[t,{regex:o,embedUrl:r,html:i,height:s,width:a,id:l}]}));r.length&&(o=o.filter((e=>{let[t]=e;return r.includes(t)}))),o=o.concat(i),HR.services=o.reduce(((e,t)=>{let[n,o]=t;return n in e?(e[n]=Object.assign({},e[n],o),e):(e[n]=o,e)}),{}),HR.patterns=o.reduce(((e,t)=>{let[n,o]=t;return e[n]=o.regex,e}),{})}static checkServiceConfig(e){const{regex:t,embedUrl:n,html:o,height:r,width:i,id:s}=e;let a=t&&t instanceof RegExp&&n&&"string"==typeof n&&o&&"string"==typeof o;return a=a&&(void 0===s||s instanceof Function),a=a&&(void 0===r||Number.isFinite(r)),a=a&&(void 0===i||Number.isFinite(i)),a}static get pasteConfig(){return{patterns:HR.patterns}}static get isReadOnlySupported(){return!0}embedIsReady(e){let t=null;return new Promise(((n,o)=>{t=new MutationObserver(UR.debounce(n,450)),t.observe(e,{childList:!0,subtree:!0})})).then((()=>{t.disconnect()}))}}var VR=n(930),WR=n.n(VR);typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"&&self;function KR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function GR(){}Object.assign(GR,{default:GR,register:GR,revert:function(){},__esModule:!0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){const t=(this.document||this.ownerDocument).querySelectorAll(e);let n=t.length;for(;--n>=0&&t.item(n)!==this;);return n>-1}),Element.prototype.closest||(Element.prototype.closest=function(e){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t);return null}),Element.prototype.prepend||(Element.prototype.prepend=function(e){const t=document.createDocumentFragment();Array.isArray(e)||(e=[e]),e.forEach((e=>{const n=e instanceof Node;t.appendChild(n?e:document.createTextNode(e))})),this.insertBefore(t,this.firstChild)}),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){e=0===arguments.length||!!e;const t=this.parentNode,n=window.getComputedStyle(t,null),o=parseInt(n.getPropertyValue("border-top-width")),r=parseInt(n.getPropertyValue("border-left-width")),i=this.offsetTop-t.offsetTop<t.scrollTop,s=this.offsetTop-t.offsetTop+this.clientHeight-o>t.scrollTop+t.clientHeight,a=this.offsetLeft-t.offsetLeft<t.scrollLeft,l=this.offsetLeft-t.offsetLeft+this.clientWidth-r>t.scrollLeft+t.clientWidth,c=i&&!s;(i||s)&&e&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-o+this.clientHeight/2),(a||l)&&e&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-r+this.clientWidth/2),(i||s||a||l)&&!e&&this.scrollIntoView(c)}),window.requestIdleCallback=window.requestIdleCallback||function(e){const t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)};var qR=(e=>(e.VERBOSE="VERBOSE",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e))(qR||{});const YR=8,XR=9,$R=13,ZR=27,QR=37,JR=38,eN=40,tN=39,nN=46,oN=191,rN=0;function iN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"log",o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"color: inherit";if(!("console"in window)||!window.console[n])return;const i=["info","log","warn","error"].includes(n),s=[];switch(iN.logLevel){case"ERROR":if("error"!==n)return;break;case"WARN":if(!["error","warn"].includes(n))return;break;case"INFO":if(!i||e)return}o&&s.push(o);const a="Editor.js 2.29.0";e&&(i?(s.unshift("line-height: 1em;\n            color: #006FEA;\n            display: inline-block;\n            font-size: 11px;\n            line-height: 1em;\n            background-color: #fff;\n            padding: 4px 9px;\n            border-radius: 30px;\n            border: 1px solid rgba(56, 138, 229, 0.16);\n            margin: 4px 5px 4px 0;",r),t="%c".concat(a,"%c ").concat(t)):t="( ".concat(a," )").concat(t));try{i?o?console[n]("".concat(t," %o"),...s):console[n](t,...s):console[n](t)}catch{}}iN.logLevel="VERBOSE";const sN=iN.bind(window,!1),aN=iN.bind(window,!0);function lN(e){return Object.prototype.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function cN(e){return"function"===lN(e)||"asyncfunction"===lN(e)}function dN(e){return"object"===lN(e)}function uN(e){return"string"===lN(e)}function hN(e){return"number"===lN(e)}function pN(e){return"undefined"===lN(e)}function fN(e){return!e||0===Object.keys(e).length&&e.constructor===Object}function gN(e){return e>47&&e<58||32===e||13===e||229===e||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223}async function mN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};return e.reduce((async(e,o)=>(await e,async function(e,t,n){try{await e.function(e.data),await t(pN(e.data)?{}:e.data)}catch{n(pN(e.data)?{}:e.data)}}(o,t,n))),Promise.resolve())}function vN(e){return Array.prototype.slice.call(e)}function yN(e,t){return function(){const n=this,o=arguments;window.setTimeout((()=>e.apply(n,o)),t)}}function bN(e,t,n){var o=this;let r;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];const l=o,c=n&&!r;window.clearTimeout(r),r=window.setTimeout((()=>{r=null,n||e.apply(l,s)}),t),c&&e.apply(l,s)}}function wN(e,t){let n,o,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=null,a=0;i||(i={});const l=function(){a=!1===i.leading?0:Date.now(),s=null,r=e.apply(n,o),s||(n=o=null)};return function(){const c=Date.now();!a&&!1===i.leading&&(a=c);const d=t-(c-a);return n=this,o=arguments,d<=0||d>t?(s&&(clearTimeout(s),s=null),a=c,r=e.apply(n,o),s||(n=o=null)):!s&&!1!==i.trailing&&(s=setTimeout(l,d)),r}}function xN(e){return e[0].toUpperCase()+e.slice(1)}function SN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(!n.length)return e;const r=n.shift();if(dN(e)&&dN(r))for(const i in r)dN(r[i])?(e[i]||Object.assign(e,{[i]:{}}),SN(e[i],r[i])):Object.assign(e,{[i]:r[i]});return SN(e,...n)}function _N(e){const t=function(){const e={win:!1,mac:!1,x11:!1,linux:!1},t=Object.keys(e).find((e=>-1!==window.navigator.appVersion.toLowerCase().indexOf(e)));return t&&(e[t]=!0),e}();return e=e.replace(/shift/gi,"\u21e7").replace(/backspace/gi,"\u232b").replace(/enter/gi,"\u23ce").replace(/up/gi,"\u2191").replace(/left/gi,"\u2192").replace(/down/gi,"\u2193").replace(/right/gi,"\u2190").replace(/escape/gi,"\u238b").replace(/insert/gi,"Ins").replace(/delete/gi,"\u2421").replace(/\+/gi," + "),e=t.mac?e.replace(/ctrl|cmd/gi,"\u2318").replace(/alt/gi,"\u2325"):e.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN")}function kN(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),"")}(10)}function CN(e,t,n){const o="\xab".concat(t,"\xbb is deprecated and will be removed in the next major release. Please use the \xab").concat(n,"\xbb instead.");e&&aN(o,"warn")}function EN(e,t,n){const o=n.value?"value":"get",r=n[o],i="#".concat(t,"Cache");if(n[o]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return void 0===this[i]&&(this[i]=r.apply(this,...t)),this[i]},"get"===o&&n.set){const t=n.set;n.set=function(n){delete e[i],t.apply(this,n)}}return n}function IN(){return window.matchMedia("(max-width: ".concat(650,"px)")).matches}const TN=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1);class PN{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=document.createElement(e);Array.isArray(t)?o.classList.add(...t):t&&o.classList.add(t);for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r]);return o}static text(e){return document.createTextNode(e)}static append(e,t){Array.isArray(t)?t.forEach((t=>e.appendChild(t))):e.appendChild(t)}static prepend(e,t){Array.isArray(t)?(t=t.reverse()).forEach((t=>e.prepend(t))):e.prepend(t)}static swap(e,t){const n=document.createElement("div"),o=e.parentNode;o.insertBefore(n,e),o.insertBefore(e,t),o.insertBefore(t,n),o.removeChild(n)}static find(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1?arguments[1]:void 0;return e.querySelector(t)}static get(e){return document.getElementById(e)}static findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1?arguments[1]:void 0;return e.querySelectorAll(t)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map((e=>'input[type="'.concat(e,'"]'))).join(", ")}static findAllInputs(e){return vN(e.querySelectorAll(PN.allInputsSelector)).reduce(((e,t)=>PN.isNativeInput(t)||PN.containsOnlyInlineElements(t)?[...e,t]:[...e,...PN.getDeepestBlockElements(t)]),[])}static getDeepestNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t?"lastChild":"firstChild",o=t?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[n]){let r=e[n];if(PN.isSingleTag(r)&&!PN.isNativeInput(r)&&!PN.isLineBreakTag(r))if(r[o])r=r[o];else{if(!r.parentNode[o])return r.parentNode;r=r.parentNode[o]}return this.getDeepestNode(r,t)}return e}static isElement(e){return!hN(e)&&(e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE)}static isFragment(e){return!hN(e)&&(e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)}static isContentEditable(e){return"true"===e.contentEditable}static isNativeInput(e){return!(!e||!e.tagName)&&["INPUT","TEXTAREA"].includes(e.tagName)}static canSetCaret(e){let t=!0;if(PN.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":t=!1}else t=PN.isContentEditable(e);return t}static isNodeEmpty(e,t){let n;return!(this.isSingleTag(e)&&!this.isLineBreakTag(e))&&(n=this.isElement(e)&&this.isNativeInput(e)?e.value:e.textContent.replace("\u200b",""),t&&(n=n.replace(new RegExp(t,"g"),"")),0===n.trim().length)}static isLeaf(e){return!!e&&0===e.childNodes.length}static isEmpty(e,t){e.normalize();const n=[e];for(;n.length>0;)if(e=n.shift()){if(this.isLeaf(e)&&!this.isNodeEmpty(e,t))return!1;e.childNodes&&n.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const t=PN.make("div");return t.innerHTML=e,t.childElementCount>0}static getContentLength(e){return PN.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let t;uN(e)?(t=document.createElement("div"),t.innerHTML=e):t=e;const n=e=>!PN.blockElements.includes(e.tagName.toLowerCase())&&Array.from(e.children).every(n);return Array.from(t.children).every(n)}static getDeepestBlockElements(e){return PN.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce(((e,t)=>[...e,...PN.getDeepestBlockElements(t)]),[])}static getHolder(e){return uN(e)?document.getElementById(e):e}static isAnchor(e){return"a"===e.tagName.toLowerCase()}static offset(e){const t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop,r=t.top+o,i=t.left+n;return{top:r,left:i,bottom:r+t.height,right:i+t.width}}}const AN={ui:{blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":""}},toolNames:{Text:"",Link:"",Bold:"",Italic:""},tools:{link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},blockTunes:{delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}}},MN=class{static ui(e,t){return MN._t(e,t)}static t(e,t){return MN._t(e,t)}static setDictionary(e){MN.currentDictionary=e}static _t(e,t){const n=MN.getNamespace(e);return n&&n[t]?n[t]:t}static getNamespace(e){return e.split(".").reduce(((e,t)=>e&&Object.keys(e).length?e[t]:{}),MN.currentDictionary)}};let jN=MN;jN.currentDictionary=AN;class ON extends Error{}class LN{constructor(){this.subscribers={}}on(e,t){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(t)}once(e,t){e in this.subscribers||(this.subscribers[e]=[]);const n=o=>{const r=t(o),i=this.subscribers[e].indexOf(n);return-1!==i&&this.subscribers[e].splice(i,1),r};this.subscribers[e].push(n)}emit(e,t){fN(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce(((e,t)=>{const n=t(e);return void 0!==n?n:e}),t)}off(e,t){if(void 0!==this.subscribers[e]){for(let n=0;n<this.subscribers[e].length;n++)if(this.subscribers[e][n]===t){delete this.subscribers[e][n];break}}else console.warn('EventDispatcher .off(): there is no subscribers for event "'.concat(e.toString(),'". Probably, .off() called before .on()'))}destroy(){this.subscribers={}}}function BN(e){Object.setPrototypeOf(this,{get id(){return e.id},get name(){return e.name},get config(){return e.config},get holder(){return e.holder},get isEmpty(){return e.isEmpty},get selected(){return e.selected},set stretched(t){e.stretched=t},get stretched(){return e.stretched},get focusable(){return e.focusable},call:(t,n)=>e.call(t,n),save:()=>e.save(),validate:t=>e.validate(t),dispatchChange(){e.dispatchChange()}})}class RN{constructor(){this.allListeners=[]}on(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(Math.floor(1e8*Math.random()).toString(16))}("l"),i={id:r,element:e,eventType:t,handler:n,options:o};if(!this.findOne(e,t,n))return this.allListeners.push(i),e.addEventListener(t,n,o),r}off(e,t,n,o){const r=this.findAll(e,t,n);r.forEach(((e,t)=>{const n=this.allListeners.indexOf(r[t]);n>-1&&(this.allListeners.splice(n,1),e.element.removeEventListener(e.eventType,e.handler,e.options))}))}offById(e){const t=this.findById(e);t&&t.element.removeEventListener(t.eventType,t.handler,t.options)}findOne(e,t,n){const o=this.findAll(e,t,n);return o.length>0?o[0]:null}findAll(e,t,n){let o;const r=e?this.findByEventTarget(e):[];return o=e&&t&&n?r.filter((e=>e.eventType===t&&e.handler===n)):e&&t?r.filter((e=>e.eventType===t)):r,o}removeAll(){this.allListeners.map((e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)})),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter((t=>{if(t.element===e)return t}))}findByType(e){return this.allListeners.filter((t=>{if(t.eventType===e)return t}))}findByHandler(e){return this.allListeners.filter((t=>{if(t.handler===e)return t}))}findById(e){return this.allListeners.find((t=>t.id===e))}}class NN{constructor(e){var t=this;let{config:n,eventsDispatcher:o}=e;if(this.nodes={},this.listeners=new RN,this.readOnlyMutableListeners={on:function(e,n,o){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.mutableListenerIds.push(t.listeners.on(e,n,o,r))},clearAll:()=>{for(const e of this.mutableListenerIds)this.listeners.offById(e);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===NN)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=n,this.eventsDispatcher=o}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const t=this.nodes[e];t instanceof HTMLElement&&t.remove()}}get isRtl(){return"rtl"===this.config.i18n.direction}}class DN{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const t=e.anchorNode;return t?PN.isElement(t)?t:t.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(DN.get())}static isSelectionAtEditor(e){if(!e)return!1;let t=e.anchorNode||e.focusNode;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let n=null;return t&&t instanceof Element&&(n=t.closest(".".concat(DN.CSS.editorZone))),!!n&&n.nodeType===Node.ELEMENT_NODE}static isRangeAtEditor(e){if(!e)return;let t=e.startContainer;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let n=null;return t&&t instanceof Element&&(n=t.closest(".".concat(DN.CSS.editorZone))),!!n&&n.nodeType===Node.ELEMENT_NODE}static get isSelectionExists(){return!!DN.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e,t=document.selection,n={x:0,y:0,width:0,height:0};if(t&&"Control"!==t.type)return e=t.createRange(),n.x=e.boundingLeft,n.y=e.boundingTop,n.width=e.boundingWidth,n.height=e.boundingHeight,n;if(!window.getSelection)return sN("Method window.getSelection is not supported","warn"),n;if(t=window.getSelection(),null===t.rangeCount||isNaN(t.rangeCount))return sN("Method SelectionUtils.rangeCount is not supported","warn"),n;if(0===t.rangeCount)return n;if(e=t.getRangeAt(0).cloneRange(),e.getBoundingClientRect&&(n=e.getBoundingClientRect()),0===n.x&&0===n.y){const t=document.createElement("span");if(t.getBoundingClientRect){t.appendChild(document.createTextNode("\u200b")),e.insertNode(t),n=t.getBoundingClientRect();const o=t.parentNode;o.removeChild(t),o.normalize()}}return n}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=document.createRange(),o=window.getSelection();return PN.isNativeInput(e)?PN.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=t,e.getBoundingClientRect()):void 0:(n.setStart(e,t),n.setEnd(e,t),o.removeAllRanges(),o.addRange(n),n.getBoundingClientRect())}static isRangeInsideContainer(e){const t=DN.range;return null!==t&&e.contains(t.startContainer)}static addFakeCursor(){const e=DN.range;if(null===e)return;const t=PN.make("span","codex-editor__fake-cursor");t.dataset.mutationFree="true",e.collapse(),e.insertNode(t)}static isFakeCursorInsideContainer(e){return null!==PN.find(e,".codex-editor__fake-cursor")}static removeFakeCursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;const t=PN.find(e,".codex-editor__fake-cursor");t&&t.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=DN.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(e.focusNode),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}findParentTag(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;const o=window.getSelection();let r=null;return o&&o.anchorNode&&o.focusNode?([o.anchorNode,o.focusNode].forEach((o=>{let i=n;for(;i>0&&o.parentNode&&(o.tagName!==e||(r=o,t&&o.classList&&!o.classList.contains(t)&&(r=null),!r));)o=o.parentNode,i--})),r):null}expandToTag(e){const t=window.getSelection();t.removeAllRanges();const n=document.createRange();n.selectNodeContents(e),t.addRange(n)}}const zN="redactor dom changed",FN="block changed",UN="fake cursor is about to be toggled",HN="fake cursor have been set";function VN(e,t){return e.mergeable&&e.name===t.name}var WN=(e=>(e.APPEND_CALLBACK="appendCallback",e.RENDERED="rendered",e.MOVED="moved",e.UPDATED="updated",e.REMOVED="removed",e.ON_PASTE="onPaste",e))(WN||{});class KN extends LN{constructor(e,t){var n;let{id:o=kN(),data:r,tool:i,api:s,readOnly:a,tunesData:l}=e;super(),n=this,this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;const t=void 0===e,o=e instanceof InputEvent;let r;!t&&!o&&n.detectToolRootChange(e),r=!(!t&&!o)||!(e.length>0&&e.every((e=>{const{addedNodes:t,removedNodes:n,target:o}=e;return[...Array.from(t),...Array.from(n),o].some((e=>(PN.isElement(e)||(e=e.parentElement),e&&null!==e.closest('[data-mutation-free="true"]'))))}))),r&&(n.dropInputsCache(),n.updateCurrentInput(),n.call("updated"),n.emit("didMutated",n))},this.name=i.name,this.id=o,this.settings=i.settings,this.config=i.settings.config||{},this.api=s,this.editorEventBus=t||null,this.blockAPI=new BN(this),this.tool=i,this.toolInstance=i.create(r,this.blockAPI,a),this.tunes=i.tunes,this.composeTunes(l),this.holder=this.compose(),window.requestIdleCallback((()=>{this.watchBlockMutations(),this.addInputEvents()}))}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(0!==this.cachedInputs.length)return this.cachedInputs;const e=PN.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){const t=this.inputs.findIndex((t=>t===e||t.contains(e)));-1!==t&&(this.inputIndex=t)}get firstInput(){return this.inputs[0]}get lastInput(){const e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then((e=>e&&!fN(e.data)?e.data:{}))}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return cN(this.toolInstance.merge)}get focusable(){return 0!==this.inputs.length}get isEmpty(){const e=PN.isEmpty(this.pluginsContent,"/"),t=!this.hasMedia;return e&&t}get hasMedia(){return!!this.holder.querySelector(["img","iframe","video","audio","source","input","textarea","twitterwidget"].join(","))}set selected(e){var t,n;this.holder.classList.toggle(KN.CSS.selected,e);const o=!0===e&&DN.isRangeInsideContainer(this.holder),r=!1===e&&DN.isFakeCursorInsideContainer(this.holder);(o||r)&&(null==(t=this.editorEventBus)||t.emit(UN,{state:e}),o?DN.addFakeCursor():DN.removeFakeCursor(this.holder),null==(n=this.editorEventBus)||n.emit(HN,{state:e}))}get selected(){return this.holder.classList.contains(KN.CSS.selected)}set stretched(e){this.holder.classList.toggle(KN.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(KN.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(KN.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,t){if(cN(this.toolInstance[e])){"appendCallback"===e&&sN("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,t)}catch(BR){sN("Error during '".concat(e,"' call: ").concat(BR.message),"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){const e=await this.toolInstance.save(this.pluginsContent),t=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach((e=>{let[n,o]=e;if(cN(o.save))try{t[n]=o.save()}catch(r){sN("Tune ".concat(o.constructor.name," save method throws an Error %o"),"warn",r)}}));const n=window.performance.now();let o;return Promise.resolve(e).then((e=>(o=window.performance.now(),{id:this.id,tool:this.name,data:e,tunes:t,time:o-n}))).catch((e=>{sN("Saving process for ".concat(this.name," tool failed due to the ").concat(e),"log","red")}))}async validate(e){let t=!0;return this.toolInstance.validate instanceof Function&&(t=await this.toolInstance.validate(e)),t}getTunes(){const e=document.createElement("div"),t=[];return["function"==typeof this.toolInstance.renderSettings?this.toolInstance.renderSettings():[],[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map((e=>e.render()))].flat().forEach((n=>{PN.isElement(n)?e.appendChild(n):Array.isArray(n)?t.push(...n):t.push(n)})),[t,e]}updateCurrentInput(){this.currentInput=PN.isNativeInput(document.activeElement)||!DN.anchorNode?document.activeElement:DN.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),cN(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const e=this.tool.toolbox;if(1===e.length)return Promise.resolve(this.tool.toolbox[0]);const t=await this.data;return e.find((e=>Object.entries(e.data).some((e=>{let[n,o]=e;return t[n]&&function(e,t){const n=Array.isArray(e)||dN(e),o=Array.isArray(t)||dN(t);return n||o?JSON.stringify(e)===JSON.stringify(t):e===t}(t[n],o)}))))}async exportDataAsString(){return function(e,t){const n=null==t?void 0:t.export;return cN(n)?n(e):uN(n)?e[n]:(void 0!==n&&sN("Conversion \xabexport\xbb property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}(await this.data,this.tool.conversionConfig)}compose(){const e=PN.make("div",KN.CSS.wrapper),t=PN.make("div",KN.CSS.content),n=this.toolInstance.render();e.dataset.id=this.id,this.toolRenderedElement=n,t.appendChild(this.toolRenderedElement);let o=t;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach((e=>{if(cN(e.wrap))try{o=e.wrap(o)}catch(t){sN("Tune ".concat(e.constructor.name," wrap method throws an Error %o"),"warn",t)}})),e.appendChild(o),e}composeTunes(e){Array.from(this.tunes.values()).forEach((t=>{(t.isInternal?this.defaultTunesInstances:this.tunesInstances).set(t.name,t.create(e[t.name],this.blockAPI))})),Object.entries(e).forEach((e=>{let[t,n]=e;this.tunesInstances.has(t)||(this.unavailableTunesData[t]=n)}))}addInputEvents(){this.inputs.forEach((e=>{e.addEventListener("focus",this.handleFocus),PN.isNativeInput(e)&&e.addEventListener("input",this.didMutated)}))}removeInputEvents(){this.inputs.forEach((e=>{e.removeEventListener("focus",this.handleFocus),PN.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)}))}watchBlockMutations(){var e;this.redactorDomChangedCallback=e=>{const{mutations:t}=e;t.some((e=>function(e,t){const{type:n,target:o,addedNodes:r,removedNodes:i}=e;if(o===t)return!0;if(["characterData","attributes"].includes(n)){const e=o.nodeType===Node.TEXT_NODE?o.parentNode:o;return t.contains(e)}const s=Array.from(r).some((e=>t.contains(e))),a=Array.from(i).some((e=>t.contains(e)));return s||a}(e,this.toolRenderedElement)))&&this.didMutated(t)},null==(e=this.editorEventBus)||e.on(zN,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;null==(e=this.editorEventBus)||e.off(zN,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach((e=>{if(Array.from(e.removedNodes).includes(this.toolRenderedElement)){const t=e.addedNodes[e.addedNodes.length-1];this.toolRenderedElement=t}}))}dropInputsCache(){this.cachedInputs=[]}}class GN extends NN{static getNamespace(e){return e.isTune()?"blockTunes.".concat(e.name):"tools.".concat(e.name)}get methods(){return{t:()=>{aN("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e){return Object.assign(this.methods,{t:t=>jN.t(GN.getNamespace(e),t)})}}var qN={},YN={get exports(){return qN},set exports(e){qN=e}};!function(e,t){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){n(1),e.exports=function(){var e=n(6),t="cdx-notify--bounce-in",o=null;return{show:function(n){if(n.message){!function(){if(o)return!0;o=e.getWrapper(),document.body.appendChild(o)}();var r=null,i=n.time||8e3;switch(n.type){case"confirm":r=e.confirm(n);break;case"prompt":r=e.prompt(n);break;default:r=e.alert(n),window.setTimeout((function(){r.remove()}),i)}o.appendChild(r),r.classList.add(t)}}}}()},function(e,t,n){var o=n(2);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(4)(o,r),o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,'.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:\'\';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:\'\';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}',""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o=e[1]||"",r=e[3];if(!r)return o;if(t&&"function"==typeof btoa){var i=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),s=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[o].concat(s).concat([i]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var s=e[r];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var o,r,i={},s=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),a=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch{n=null}t[e]=n}return t[e]}}(),l=null,c=0,d=[],u=n(5);function h(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=i[o.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](o.parts[s]);for(;s<o.parts.length;s++)r.parts.push(y(o.parts[s],t))}else{var a=[];for(s=0;s<o.parts.length;s++)a.push(y(o.parts[s],t));i[o.id]={id:o.id,refs:1,parts:a}}}}function p(e,t){for(var n=[],o={},r=0;r<e.length;r++){var i=e[r],s=t.base?i[0]+t.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};o[s]?o[s].parts.push(a):n.push(o[s]={id:s,parts:[a]})}return n}function f(e,t){var n=a(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=d[d.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=a(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function m(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),v(t,e.attrs),f(e,t),t}function v(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function y(e,t){var n,o,r,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var s=c++;n=l||(l=m(t)),o=x.bind(null,n,s,!1),r=x.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),f(e,t),t}(t),o=function(e,t,n){var o=n.css,r=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||i)&&(o=u(o)),r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var s=new Blob([o],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,t),r=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),o=function(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){g(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if(typeof DEBUG<"u"&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return h(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var s=n[r];(a=i[s.id]).refs--,o.push(a)}for(e&&h(p(e,t),t),r=0;r<o.length;r++){var a;if(0===(a=o[r]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete i[a.id]}}}};var b,w=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function x(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=w(t,r);else{var i=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}},function(e,t){e.exports=function(e){var t=typeof window<"u"&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,n){var o,r,i,s,a,l,c,d,u;e.exports=(o="cdx-notifies",r="cdx-notify",i="cdx-notify__cross",s="cdx-notify__button--confirm",a="cdx-notify__button--cancel",l="cdx-notify__input",c="cdx-notify__button",d="cdx-notify__btns-wrapper",{alert:u=function(e){var t=document.createElement("DIV"),n=document.createElement("DIV"),o=e.message,s=e.style;return t.classList.add(r),s&&t.classList.add(r+"--"+s),t.innerHTML=o,n.classList.add(i),n.addEventListener("click",t.remove.bind(t)),t.appendChild(n),t},confirm:function(e){var t=u(e),n=document.createElement("div"),o=document.createElement("button"),r=document.createElement("button"),l=t.querySelector("."+i),h=e.cancelHandler,p=e.okHandler;return n.classList.add(d),o.innerHTML=e.okText||"Confirm",r.innerHTML=e.cancelText||"Cancel",o.classList.add(c),r.classList.add(c),o.classList.add(s),r.classList.add(a),h&&"function"==typeof h&&(r.addEventListener("click",h),l.addEventListener("click",h)),p&&"function"==typeof p&&o.addEventListener("click",p),o.addEventListener("click",t.remove.bind(t)),r.addEventListener("click",t.remove.bind(t)),n.appendChild(o),n.appendChild(r),t.appendChild(n),t},prompt:function(e){var t=u(e),n=document.createElement("div"),o=document.createElement("button"),r=document.createElement("input"),a=t.querySelector("."+i),h=e.cancelHandler,p=e.okHandler;return n.classList.add(d),o.innerHTML=e.okText||"Ok",o.classList.add(c),o.classList.add(s),r.classList.add(l),e.placeholder&&r.setAttribute("placeholder",e.placeholder),e.default&&(r.value=e.default),e.inputType&&(r.type=e.inputType),h&&"function"==typeof h&&a.addEventListener("click",h),p&&"function"==typeof p&&o.addEventListener("click",(function(){p(r.value)})),o.addEventListener("click",t.remove.bind(t)),n.appendChild(r),n.appendChild(o),t.appendChild(n),t},getWrapper:function(){var e=document.createElement("DIV");return e.classList.add(o),e}})}])}(YN);const XN=KR(qN);class $N{show(e){XN.show(e)}}var ZN={},QN={get exports(){return ZN},set exports(e){ZN=e}};!function(e,t){e.exports=function(){function e(e){var t=e.tags,n=Object.keys(t).map((function(e){return typeof t[e]})).every((function(e){return"object"===e||"boolean"===e||"function"===e}));if(!n)throw new Error("The configuration was invalid");this.config=e}var t=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function n(e){return-1!==t.indexOf(e.nodeName)}var o=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function r(e){return-1!==o.indexOf(e.nodeName)}function i(e,t){return e.createTreeWalker(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function s(e,t,n){return"function"==typeof e.tags[t]?e.tags[t](n):e.tags[t]}function a(e,t){return typeof t>"u"||"boolean"==typeof t&&!t}function l(e,t,n){var o=e.name.toLowerCase();return!0!==t&&("function"==typeof t[o]?!t[o](e.value,n):typeof t[o]>"u"||!1===t[o]||"string"==typeof t[o]&&t[o]!==e.value)}return e.prototype.clean=function(e){const t=document.implementation.createHTMLDocument(),n=t.createElement("div");return n.innerHTML=e,this._sanitize(t,n),n.innerHTML},e.prototype._sanitize=function(e,t){var o=i(e,t),c=o.firstChild();if(c)do{if(c.nodeType!==Node.TEXT_NODE){if(c.nodeType===Node.COMMENT_NODE){t.removeChild(c),this._sanitize(e,t);break}var d,u=r(c);u&&(d=Array.prototype.some.call(c.childNodes,n));var h=!!t.parentNode,p=n(t)&&n(c)&&h,f=c.nodeName.toLowerCase(),g=s(this.config,f,c);if(u&&d||a(c,g)||!this.config.keepNestedBlockElements&&p){if("SCRIPT"!==c.nodeName&&"STYLE"!==c.nodeName)for(;c.childNodes.length>0;)t.insertBefore(c.childNodes[0],c);t.removeChild(c),this._sanitize(e,t);break}for(var m=0;m<c.attributes.length;m+=1){var v=c.attributes[m];l(v,g,c)&&(c.removeAttribute(v.name),m-=1)}this._sanitize(e,c)}else if(""===c.data.trim()&&(c.previousElementSibling&&n(c.previousElementSibling)||c.nextElementSibling&&n(c.nextElementSibling))){t.removeChild(c),this._sanitize(e,t);break}}while(c=o.nextSibling())},e}()}(QN);const JN=ZN;function eD(e,t){return e.map((e=>{const n=cN(t)?t(e.tool):t;return fN(n)||(e.data=nD(e.data,n)),e}))}function tD(e){return new JN({tags:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}).clean(e)}function nD(e,t){return Array.isArray(e)?function(e,t){return e.map((e=>nD(e,t)))}(e,t):dN(e)?function(e,t){const n={};for(const o in e){if(!Object.prototype.hasOwnProperty.call(e,o))continue;const r=e[o],i=oD(t[o])?t[o]:t;n[o]=nD(r,i)}return n}(e,t):uN(e)?function(e,t){return dN(t)?tD(e,t):!1===t?tD(e,{}):e}(e,t):e}function oD(e){return dN(e)||function(e){return"boolean"===lN(e)}(e)||cN(e)}var rD={},iD={get exports(){return rD},set exports(e){rD=e}};!function(e,t){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){n.r(t),n.d(t,"default",(function(){return o}));class o{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(e,t,n){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const o=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},n);if(o.hidingDelay&&(this.hidingDelay=o.hidingDelay),this.nodes.content.innerHTML="","string"==typeof t)this.nodes.content.appendChild(document.createTextNode(t));else{if(!(t instanceof Node))throw Error("[CodeX Tooltip] Wrong type of \xabcontent\xbb passed. It should be an instance of Node or String. But "+typeof t+" given.");this.nodes.content.appendChild(t)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),o.placement){case"top":this.placeTop(e,o);break;case"left":this.placeLeft(e,o);break;case"right":this.placeRight(e,o);break;default:this.placeBottom(e,o)}o&&o.delay?this.showingTimeout=setTimeout((()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0}),o.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.hidingDelay&&!e)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout((()=>{this.hide(!0)}),this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(e,t,n){e.addEventListener("mouseenter",(()=>{this.show(e,t,n)})),e.addEventListener("mouseleave",(()=>{this.hide()}))}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const e="codex-tooltips-style";if(document.getElementById(e))return;const t=n(2),o=this.make("style",null,{textContent:t.toString(),id:e});this.prepend(document.head,o)}placeBottom(e,t){const n=e.getBoundingClientRect(),o=n.left+e.clientWidth/2-this.nodes.wrapper.offsetWidth/2,r=n.bottom+window.pageYOffset+this.offsetTop+t.marginTop;this.applyPlacement("bottom",o,r)}placeTop(e,t){const n=e.getBoundingClientRect(),o=n.left+e.clientWidth/2-this.nodes.wrapper.offsetWidth/2,r=n.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",o,r)}placeLeft(e,t){const n=e.getBoundingClientRect(),o=n.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-t.marginLeft,r=n.top+window.pageYOffset+e.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",o,r)}placeRight(e,t){const n=e.getBoundingClientRect(),o=n.right+this.offsetRight+t.marginRight,r=n.top+window.pageYOffset+e.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",o,r)}applyPlacement(e,t,n){this.nodes.wrapper.classList.add(this.CSS.placement[e]),this.nodes.wrapper.style.left=t+"px",this.nodes.wrapper.style.top=n+"px"}make(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=document.createElement(e);Array.isArray(t)?o.classList.add(...t):t&&o.classList.add(t);for(const r in n)n.hasOwnProperty(r)&&(o[r]=n[r]);return o}append(e,t){Array.isArray(t)?t.forEach((t=>e.appendChild(t))):e.appendChild(t)}prepend(e,t){Array.isArray(t)?(t=t.reverse()).forEach((t=>e.prepend(t))):e.prepend(t)}}},function(e,t){e.exports='.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>\') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}'}]).default}(iD);const sD=KR(rD);let aD=null;function lD(){aD||(aD=new sD)}function cD(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];lD(),null==aD||aD.hide(e)}function dD(e,t,n){lD(),null==aD||aD.onHover(e,t,n)}const uD=function e(t,n){const o={};return Object.entries(t).forEach((t=>{let[r,i]=t;if(dN(i)){const t=n?"".concat(n,".").concat(r):r;Object.values(i).every((e=>uN(e)))?o[r]=t:o[r]=e(i,t)}else o[r]=i})),o}(AN);const hD='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',pD='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>';class fD{constructor(e){this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{this.nodes.root.classList.remove(fD.CSS.noFocus)},this.removeSpecialHoverBehavior=()=>{this.nodes.root.classList.remove(fD.CSS.noHover)},this.onErrorAnimationEnd=()=>{this.nodes.icon.classList.remove(fD.CSS.wobbleAnimation),this.nodes.icon.removeEventListener("animationend",this.onErrorAnimationEnd)},this.params=e,this.nodes.root=this.make(e)}get isDisabled(){return this.params.isDisabled}get toggle(){return this.params.toggle}get title(){return this.params.title}get closeOnActivate(){return this.params.closeOnActivate}get isConfirmationStateEnabled(){return null!==this.confirmationState}get isFocused(){return this.nodes.root.classList.contains(fD.CSS.focused)}static get CSS(){return{container:"ce-popover-item",title:"ce-popover-item__title",secondaryTitle:"ce-popover-item__secondary-title",icon:"ce-popover-item__icon",active:"ce-popover-item--active",disabled:"ce-popover-item--disabled",focused:"ce-popover-item--focused",hidden:"ce-popover-item--hidden",confirmationState:"ce-popover-item--confirmation",noHover:"ce-popover-item--no-hover",noFocus:"ce-popover-item--no-focus",wobbleAnimation:"wobble"}}getElement(){return this.nodes.root}handleClick(){this.isConfirmationStateEnabled?this.activateOrEnableConfirmationMode(this.confirmationState):this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){this.nodes.root.classList.toggle(fD.CSS.active,e)}toggleHidden(e){this.nodes.root.classList.toggle(fD.CSS.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e){const t=PN.make("div",fD.CSS.container);return e.name&&(t.dataset.itemName=e.name),this.nodes.icon=PN.make("div",fD.CSS.icon,{innerHTML:e.icon||'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>'}),t.appendChild(this.nodes.icon),t.appendChild(PN.make("div",fD.CSS.title,{innerHTML:e.title||""})),e.secondaryLabel&&t.appendChild(PN.make("div",fD.CSS.secondaryTitle,{textContent:e.secondaryLabel})),e.isActive&&t.classList.add(fD.CSS.active),e.isDisabled&&t.classList.add(fD.CSS.disabled),t}enableConfirmationMode(e){const t={...this.params,...e,confirmation:e.confirmation},n=this.make(t);this.nodes.root.innerHTML=n.innerHTML,this.nodes.root.classList.add(fD.CSS.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(fD.CSS.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){this.nodes.root.classList.add(fD.CSS.noHover),this.nodes.root.classList.add(fD.CSS.noFocus),this.nodes.root.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),this.nodes.root.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){if(void 0===e.confirmation)try{e.onActivate(e),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(e.confirmation)}animateError(){this.nodes.icon.classList.contains(fD.CSS.wobbleAnimation)||(this.nodes.icon.classList.add(fD.CSS.wobbleAnimation),this.nodes.icon.addEventListener("animationend",this.onErrorAnimationEnd))}}const gD=class{constructor(e,t){this.cursor=-1,this.items=[],this.items=e||[],this.focusedCssClass=t}get currentItem(){return-1===this.cursor?null:this.items[this.cursor]}setCursor(e){e<this.items.length&&e>=-1&&(this.dropCursor(),this.cursor=e,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(e){this.items=e}next(){this.cursor=this.leafNodesAndReturnIndex(gD.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(gD.directions.LEFT)}dropCursor(){-1!==this.cursor&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(e){if(0===this.items.length)return this.cursor;let t=this.cursor;return-1===t?t=e===gD.directions.RIGHT?-1:0:this.items[t].classList.remove(this.focusedCssClass),t=e===gD.directions.RIGHT?(t+1)%this.items.length:(this.items.length+t-1)%this.items.length,PN.canSetCaret(this.items[t])&&yN((()=>DN.setCursor(this.items[t])),50)(),this.items[t].classList.add(this.focusedCssClass),t}};let mD=gD;mD.directions={RIGHT:"right",LEFT:"left"};class vD{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=e=>{if(this.isEventReadyForHandling(e))switch(vD.usedKeys.includes(e.keyCode)&&e.preventDefault(),e.keyCode){case XR:this.handleTabPress(e);break;case QR:case JR:this.flipLeft();break;case tN:case eN:this.flipRight();break;case $R:this.handleEnterPress(e)}},this.iterator=new mD(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||vD.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[XR,QR,tN,$R,JR,eN]}activate(e,t){this.activated=!0,e&&this.iterator.setItems(e),void 0!==t&&this.iterator.setCursor(t),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter((t=>t!==e))}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?mD.directions.LEFT:mD.directions.RIGHT){case mD.directions.RIGHT:this.flipRight();break;case mD.directions.LEFT:this.flipLeft()}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),cN(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach((e=>e()))}}class yD{static get CSS(){return{wrapper:"cdx-search-field",icon:"cdx-search-field__icon",input:"cdx-search-field__input"}}constructor(e){let{items:t,onSearch:n,placeholder:o}=e;this.listeners=new RN,this.items=t,this.onSearch=n,this.render(o)}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.onSearch("",this.foundItems)}destroy(){this.listeners.removeAll()}render(e){this.wrapper=PN.make("div",yD.CSS.wrapper);const t=PN.make("div",yD.CSS.icon,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>'});this.input=PN.make("input",yD.CSS.input,{placeholder:e,tabIndex:-1}),this.wrapper.appendChild(t),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",(()=>{this.searchQuery=this.input.value,this.onSearch(this.searchQuery,this.foundItems)}))}get foundItems(){return this.items.filter((e=>this.checkItem(e)))}checkItem(e){var t;const n=(null==(t=e.title)?void 0:t.toLowerCase())||"",o=this.searchQuery.toLowerCase();return n.includes(o)}}const bD=class{lock(){TN?this.lockHard():document.body.classList.add(bD.CSS.scrollLocked)}unlock(){TN?this.unlockHard():document.body.classList.remove(bD.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset","".concat(this.scrollPosition,"px")),document.body.classList.add(bD.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(bD.CSS.scrollLockedHard),null!==this.scrollPosition&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};let wD=bD;wD.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};var xD=Object.defineProperty,SD=Object.getOwnPropertyDescriptor,_D=(e=>(e.Close="close",e))(_D||{});const kD=class extends LN{constructor(e){super(),this.scopeElement=document.body,this.listeners=new RN,this.scrollLocker=new wD,this.nodes={wrapper:null,popover:null,nothingFoundMessage:null,customContent:null,items:null,overlay:null},this.messages={nothingFound:"Nothing found",search:"Search"},this.onFlip=()=>{this.items.find((e=>e.isFocused)).onFocus()},this.items=e.items.map((e=>new fD(e))),void 0!==e.scopeElement&&(this.scopeElement=e.scopeElement),e.messages&&(this.messages={...this.messages,...e.messages}),e.customContentFlippableItems&&(this.customContentFlippableItems=e.customContentFlippableItems),this.make(),e.customContent&&this.addCustomContent(e.customContent),e.searchable&&this.addSearch(),this.initializeFlipper()}static get CSS(){return{popover:"ce-popover",popoverOpenTop:"ce-popover--open-top",popoverOpened:"ce-popover--opened",search:"ce-popover__search",nothingFoundMessage:"ce-popover__nothing-found-message",nothingFoundMessageDisplayed:"ce-popover__nothing-found-message--displayed",customContent:"ce-popover__custom-content",customContentHidden:"ce-popover__custom-content--hidden",items:"ce-popover__items",overlay:"ce-popover__overlay",overlayHidden:"ce-popover__overlay--hidden"}}getElement(){return this.nodes.wrapper}hasFocus(){return this.flipper.hasFocus()}show(){this.shouldOpenBottom||(this.nodes.popover.style.setProperty("--popover-height",this.height+"px"),this.nodes.popover.classList.add(kD.CSS.popoverOpenTop)),this.nodes.overlay.classList.remove(kD.CSS.overlayHidden),this.nodes.popover.classList.add(kD.CSS.popoverOpened),this.flipper.activate(this.flippableElements),void 0!==this.search&&requestAnimationFrame((()=>{var e;null==(e=this.search)||e.focus()})),IN()&&this.scrollLocker.lock()}hide(){this.nodes.popover.classList.remove(kD.CSS.popoverOpened),this.nodes.popover.classList.remove(kD.CSS.popoverOpenTop),this.nodes.overlay.classList.add(kD.CSS.overlayHidden),this.flipper.deactivate(),this.items.forEach((e=>e.reset())),void 0!==this.search&&this.search.clear(),IN()&&this.scrollLocker.unlock(),this.emit("close")}destroy(){this.flipper.deactivate(),this.listeners.removeAll(),IN()&&this.scrollLocker.unlock()}make(){this.nodes.popover=PN.make("div",[kD.CSS.popover]),this.nodes.nothingFoundMessage=PN.make("div",[kD.CSS.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popover.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=PN.make("div",[kD.CSS.items]),this.items.forEach((e=>{this.nodes.items.appendChild(e.getElement())})),this.nodes.popover.appendChild(this.nodes.items),this.listeners.on(this.nodes.popover,"click",(e=>{const t=this.getTargetItem(e);void 0!==t&&this.handleItemClick(t)})),this.nodes.wrapper=PN.make("div"),this.nodes.overlay=PN.make("div",[kD.CSS.overlay,kD.CSS.overlayHidden]),this.listeners.on(this.nodes.overlay,"click",(()=>{this.hide()})),this.nodes.wrapper.appendChild(this.nodes.overlay),this.nodes.wrapper.appendChild(this.nodes.popover)}addSearch(){this.search=new yD({items:this.items,placeholder:this.messages.search,onSearch:(e,t)=>{this.items.forEach((e=>{const n=!t.includes(e);e.toggleHidden(n)})),this.toggleNothingFoundMessage(0===t.length),this.toggleCustomContent(""!==e);const n=""===e?this.flippableElements:t.map((e=>e.getElement()));this.flipper.isActivated&&(this.flipper.deactivate(),this.flipper.activate(n))}});const e=this.search.getElement();e.classList.add(kD.CSS.search),this.nodes.popover.insertBefore(e,this.nodes.popover.firstChild)}addCustomContent(e){this.nodes.customContent=e,this.nodes.customContent.classList.add(kD.CSS.customContent),this.nodes.popover.insertBefore(e,this.nodes.popover.firstChild)}getTargetItem(e){return this.items.find((t=>e.composedPath().includes(t.getElement())))}handleItemClick(e){e.isDisabled||(this.items.filter((t=>t!==e)).forEach((e=>e.reset())),e.handleClick(),this.toggleItemActivenessIfNeeded(e),e.closeOnActivate&&this.hide())}initializeFlipper(){this.flipper=new vD({items:this.flippableElements,focusedItemClass:fD.CSS.focused,allowedKeys:[XR,JR,eN,$R]}),this.flipper.onFlip(this.onFlip)}get flippableElements(){const e=this.items.map((e=>e.getElement()));return(this.customContentFlippableItems||[]).concat(e)}get height(){let e=0;if(null===this.nodes.popover)return e;const t=this.nodes.popover.cloneNode(!0);return t.style.visibility="hidden",t.style.position="absolute",t.style.top="-1000px",t.classList.add(kD.CSS.popoverOpened),document.body.appendChild(t),e=t.offsetHeight,t.remove(),e}get shouldOpenBottom(){const e=this.nodes.popover.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),n=this.height,o=e.top+n,r=e.top-n,i=Math.min(window.innerHeight,t.bottom);return r<t.top||o<=i}toggleNothingFoundMessage(e){this.nodes.nothingFoundMessage.classList.toggle(kD.CSS.nothingFoundMessageDisplayed,e)}toggleCustomContent(e){var t;null==(t=this.nodes.customContent)||t.classList.toggle(kD.CSS.customContentHidden,e)}toggleItemActivenessIfNeeded(e){if(!0===e.toggle&&e.toggleActive(),"string"==typeof e.toggle){const t=this.items.filter((t=>t.toggle===e.toggle));if(1===t.length)return void e.toggleActive();t.forEach((t=>{t.toggleActive(t===e)}))}}};let CD=kD;((e,t,n,o)=>{for(var r,i=o>1?void 0:o?SD(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);o&&i&&xD(t,n,i)})([EN],CD.prototype,"height",1);class ED extends NN{constructor(){super(...arguments),this.opened=!1,this.tools=[],this.flipper=null,this.togglingCallback=null}static get CSS(){return{conversionToolbarWrapper:"ce-conversion-toolbar",conversionToolbarShowed:"ce-conversion-toolbar--showed",conversionToolbarTools:"ce-conversion-toolbar__tools",conversionToolbarLabel:"ce-conversion-toolbar__label",conversionTool:"ce-conversion-tool",conversionToolHidden:"ce-conversion-tool--hidden",conversionToolIcon:"ce-conversion-tool__icon",conversionToolSecondaryLabel:"ce-conversion-tool__secondary-label",conversionToolFocused:"ce-conversion-tool--focused",conversionToolActive:"ce-conversion-tool--active"}}make(){this.nodes.wrapper=PN.make("div",[ED.CSS.conversionToolbarWrapper,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.tools=PN.make("div",ED.CSS.conversionToolbarTools);const e=PN.make("div",ED.CSS.conversionToolbarLabel,{textContent:jN.ui(uD.ui.inlineToolbar.converter,"Convert to")});return this.addTools(),this.enableFlipper(),PN.append(this.nodes.wrapper,e),PN.append(this.nodes.wrapper,this.nodes.tools),this.nodes.wrapper}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}toggle(e){this.opened?this.close():this.open(),cN(e)&&(this.togglingCallback=e)}open(){this.filterTools(),this.opened=!0,this.nodes.wrapper.classList.add(ED.CSS.conversionToolbarShowed),window.requestAnimationFrame((()=>{this.flipper.activate(this.tools.map((e=>e.button)).filter((e=>!e.classList.contains(ED.CSS.conversionToolHidden)))),this.flipper.focusFirst(),cN(this.togglingCallback)&&this.togglingCallback(!0)}))}close(){this.opened=!1,this.flipper.deactivate(),this.nodes.wrapper.classList.remove(ED.CSS.conversionToolbarShowed),cN(this.togglingCallback)&&this.togglingCallback(!1)}hasTools(){return 1!==this.tools.length||this.tools[0].name!==this.config.defaultBlock}async replaceWithBlock(e,t){const{BlockManager:n,BlockSelection:o,InlineToolbar:r,Caret:i}=this.Editor;n.convert(this.Editor.BlockManager.currentBlock,e,t),o.clearSelection(),this.close(),r.close(),window.requestAnimationFrame((()=>{i.setToBlock(this.Editor.BlockManager.currentBlock,i.positions.END)}))}addTools(){const e=this.Editor.Tools.blockTools;Array.from(e.entries()).forEach((e=>{let[t,n]=e;var o;const r=n.conversionConfig;!r||!r.import||null==(o=n.toolbox)||o.forEach((e=>this.addToolIfValid(t,e)))}))}addToolIfValid(e,t){fN(t)||!t.icon||this.addTool(e,t)}addTool(e,t){var n;const o=PN.make("div",[ED.CSS.conversionTool]),r=PN.make("div",[ED.CSS.conversionToolIcon]);o.dataset.tool=e,r.innerHTML=t.icon,PN.append(o,r),PN.append(o,PN.text(jN.t(uD.toolNames,t.title||xN(e))));const i=null==(n=this.Editor.Tools.blockTools.get(e))?void 0:n.shortcut;if(i){const e=PN.make("span",ED.CSS.conversionToolSecondaryLabel,{innerText:_N(i)});PN.append(o,e)}PN.append(this.nodes.tools,o),this.tools.push({name:e,button:o,toolboxItem:t}),this.listeners.on(o,"click",(async()=>{await this.replaceWithBlock(e,t.data)}))}async filterTools(){const{currentBlock:e}=this.Editor.BlockManager,t=await e.getActiveToolboxEntry();this.tools.forEach((n=>{let o=!1;if(t){const r=function(e,t){return e.icon===t.icon&&e.title===t.title}(t,n.toolboxItem);o=n.button.dataset.tool===e.name&&r}n.button.hidden=o,n.button.classList.toggle(ED.CSS.conversionToolHidden,o)}))}enableFlipper(){this.flipper=new vD({focusedItemClass:ED.CSS.conversionToolFocused})}}var ID={},TD={get exports(){return ID},set exports(e){ID=e}};!function(e,t){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.r(t);var i=function(){function e(t){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.commands={},this.keys={},this.name=t.name,this.parseShortcutName(t.name),this.element=t.on,this.callback=t.callback,this.executeShortcut=function(e){n.execute(e)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return r(e,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),r(e,[{key:"parseShortcutName",value:function(t){t=t.split("+");for(var n=0;n<t.length;n++){t[n]=t[n].toUpperCase();var o=!1;for(var r in e.supportedCommands)if(e.supportedCommands[r].includes(t[n])){o=this.commands[r]=!0;break}o||(this.keys[t[n]]=!0)}for(var i in e.supportedCommands)this.commands[i]||(this.commands[i]=!1)}},{key:"execute",value:function(t){var n,o={CMD:t.ctrlKey||t.metaKey,SHIFT:t.shiftKey,ALT:t.altKey},r=!0;for(n in this.commands)this.commands[n]!==o[n]&&(r=!1);var i,s=!0;for(i in this.keys)s=s&&t.keyCode===e.keyCodes[i];r&&s&&this.callback(t)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),e}();t.default=i}]).default}(TD);const PD=KR(ID);const AD=new class{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error("Shortcut ".concat(e.name," is already registered for ").concat(e.on,". Please remove it before add a new handler."));const t=new PD({name:e.name,on:e.on,callback:e.handler}),n=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...n,t])}remove(e,t){const n=this.findShortcut(e,t);if(!n)return;n.remove();const o=this.registeredShortcuts.get(e);this.registeredShortcuts.set(e,o.filter((e=>e!==n)))}findShortcut(e,t){return(this.registeredShortcuts.get(e)||[]).find((e=>{let{name:n}=e;return n===t}))}};var MD=Object.defineProperty,jD=Object.getOwnPropertyDescriptor,OD=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?jD(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&MD(t,n,i),i},LD=(e=>(e.Opened="toolbox-opened",e.Closed="toolbox-closed",e.BlockAdded="toolbox-block-added",e))(LD||{});const BD=class extends LN{constructor(e){let{api:t,tools:n,i18nLabels:o}=e;super(),this.opened=!1,this.nodes={toolbox:null},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=t,this.tools=n,this.i18nLabels=o}get isEmpty(){return 0===this.toolsToBeDisplayed.length}static get CSS(){return{toolbox:"ce-toolbox"}}make(){return this.popover=new CD({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(_D.Close,this.onPopoverClose),this.enableShortcuts(),this.nodes.toolbox=this.popover.getElement(),this.nodes.toolbox.classList.add(BD.CSS.toolbox),this.nodes.toolbox}hasFocus(){var e;return null==(e=this.popover)?void 0:e.hasFocus()}destroy(){var e;super.destroy(),this.nodes&&this.nodes.toolbox&&(this.nodes.toolbox.remove(),this.nodes.toolbox=null),this.removeAllShortcuts(),null==(e=this.popover)||e.off(_D.Close,this.onPopoverClose)}toolButtonActivated(e,t){this.insertNewBlock(e,t)}open(){var e;this.isEmpty||(null==(e=this.popover)||e.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var e;null==(e=this.popover)||e.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}get toolsToBeDisplayed(){const e=[];return this.tools.forEach((t=>{t.toolbox&&e.push(t)})),e}get toolboxItemsToBeDisplayed(){const e=(e,t)=>({icon:e.icon,title:jN.t(uD.toolNames,e.title||xN(t.name)),name:t.name,onActivate:()=>{this.toolButtonActivated(t.name,e.data)},secondaryLabel:t.shortcut?_N(t.shortcut):""});return this.toolsToBeDisplayed.reduce(((t,n)=>(Array.isArray(n.toolbox)?n.toolbox.forEach((o=>{t.push(e(o,n))})):void 0!==n.toolbox&&t.push(e(n.toolbox,n)),t)),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach((e=>{const t=e.shortcut;t&&this.enableShortcutForTool(e.name,t)}))}enableShortcutForTool(e,t){AD.add({name:t,on:this.api.ui.nodes.redactor,handler:t=>{t.preventDefault();const n=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(n);if(o)try{return this.api.blocks.convert(o.id,e),void window.requestAnimationFrame((()=>{this.api.caret.setToBlock(n,"end")}))}catch{}this.insertNewBlock(e)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach((e=>{const t=e.shortcut;t&&AD.remove(this.api.ui.nodes.redactor,t)}))}async insertNewBlock(e,t){const n=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(n);if(!o)return;const r=o.isEmpty?n:n+1;let i;if(t){const n=await this.api.blocks.composeBlockData(e);i=Object.assign(n,t)}const s=this.api.blocks.insert(e,i,void 0,r,void 0,o.isEmpty);s.call(WN.APPEND_CALLBACK),this.api.caret.setToBlock(r),this.emit("toolbox-block-added",{block:s}),this.api.toolbar.close()}};let RD=BD;OD([EN],RD.prototype,"toolsToBeDisplayed",1),OD([EN],RD.prototype,"toolboxItemsToBeDisplayed",1);const ND="block hovered";var DD=(e=>(e[e.Block=0]="Block",e[e.Inline=1]="Inline",e[e.Tune=2]="Tune",e))(DD||{}),zD=(e=>(e.Shortcut="shortcut",e.Toolbox="toolbox",e.EnabledInlineTools="inlineToolbar",e.EnabledBlockTunes="tunes",e.Config="config",e))(zD||{}),FD=(e=>(e.Shortcut="shortcut",e.SanitizeConfig="sanitize",e))(FD||{}),UD=(e=>(e.IsEnabledLineBreaks="enableLineBreaks",e.Toolbox="toolbox",e.ConversionConfig="conversionConfig",e.IsReadOnlySupported="isReadOnlySupported",e.PasteConfig="pasteConfig",e))(UD||{}),HD=(e=>(e.IsInline="isInline",e.Title="title",e))(HD||{}),VD=(e=>(e.IsTune="isTune",e))(VD||{});class WD{constructor(e){let{name:t,constructable:n,config:o,api:r,isDefault:i,isInternal:s=!1,defaultPlaceholder:a}=e;this.api=r,this.name=t,this.constructable=n,this.config=o,this.isDefault=i,this.isInternal=s,this.defaultPlaceholder=a}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(cN(this.constructable.reset))return this.constructable.reset()}prepare(){if(cN(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return 1===this.type}isBlock(){return 0===this.type}isTune(){return 2===this.type}}class KD{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return vN(this.workingArea.children)}static set(e,t,n){return isNaN(Number(t))?(Reflect.set(e,t,n),!0):(e.insert(+t,n),!0)}static get(e,t){return isNaN(Number(t))?Reflect.get(e,t):e.get(+t)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,t){const n=this.blocks[t];PN.swap(this.blocks[e].holder,n.holder),this.blocks[t]=this.blocks[e],this.blocks[e]=n}move(e,t){const n=this.blocks.splice(t,1)[0],o=e-1,r=Math.max(0,o),i=this.blocks[r];e>0?this.insertToDOM(n,"afterend",i):this.insertToDOM(n,"beforebegin",i),this.blocks.splice(e,0,n);const s=this.composeBlockEvent("move",{fromIndex:t,toIndex:e});n.call(WN.MOVED,s)}insert(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.length)return void this.push(t);e>this.length&&(e=this.length),n&&(this.blocks[e].holder.remove(),this.blocks[e].call(WN.REMOVED));const o=n?1:0;if(this.blocks.splice(e,o,t),e>0){const n=this.blocks[e-1];this.insertToDOM(t,"afterend",n)}else{const n=this.blocks[e+1];n?this.insertToDOM(t,"beforebegin",n):this.insertToDOM(t)}}replace(e,t){if(void 0===this.blocks[e])throw Error("Incorrect index");this.blocks[e].holder.replaceWith(t.holder),this.blocks[e]=t}insertMany(e,t){const n=new DocumentFragment;for(const o of e)n.appendChild(o.holder);if(this.length>0){if(t>0){const e=Math.min(t-1,this.length-1);this.blocks[e].holder.after(n)}else 0===t&&this.workingArea.prepend(n);this.blocks.splice(t,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(n);e.forEach((e=>e.call(WN.RENDERED)))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(WN.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach((e=>e.call(WN.REMOVED))),this.blocks.length=0}insertAfter(e,t){const n=this.blocks.indexOf(e);this.insert(n+1,t)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,t,n){t?n.holder.insertAdjacentElement(t,e.holder):this.workingArea.appendChild(e.holder),e.call(WN.RENDERED)}composeBlockEvent(e,t){return new CustomEvent(e,{detail:t})}}const GD="block-removed",qD="block-added",YD="block-changed";class XD{constructor(){this.completed=Promise.resolve()}add(e){return new Promise(((t,n)=>{this.completed=this.completed.then(e).then(t).catch(n)}))}}class $D extends NN{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}get isAtStart(){const{currentBlock:e}=this.Editor.BlockManager;if(!e.focusable)return!0;const t=DN.get(),n=PN.getDeepestNode(e.currentInput);let o=t.focusNode;if(PN.isNativeInput(n))return 0===n.selectionEnd;if(!t.anchorNode)return!1;let r=o.textContent.search(/\S/);-1===r&&(r=0);let i=t.focusOffset;return o.nodeType!==Node.TEXT_NODE&&o.childNodes.length&&(o.childNodes[i]?(o=o.childNodes[i],i=0):(o=o.childNodes[i-1],i=o.textContent.length)),!(!PN.isLineBreakTag(n)&&!PN.isEmpty(n)||!this.getHigherLevelSiblings(o,"left").every((e=>{const t=PN.isLineBreakTag(e),n=1===e.children.length&&PN.isLineBreakTag(e.children[0]),o=t||n;return PN.isEmpty(e)&&!o}))||i!==r)||(null===n||o===n&&i<=r)}get isAtEnd(){const{currentBlock:e}=this.Editor.BlockManager;if(!e.focusable)return!0;const t=DN.get();let n=t.focusNode;const o=PN.getDeepestNode(e.currentInput,!0);if(PN.isNativeInput(o))return o.selectionEnd===o.value.length;if(!t.focusNode)return!1;let r=t.focusOffset;if(n.nodeType!==Node.TEXT_NODE&&n.childNodes.length&&(n.childNodes[r-1]?(n=n.childNodes[r-1],r=n.textContent.length):(n=n.childNodes[0],r=0)),PN.isLineBreakTag(o)||PN.isEmpty(o)){const e=this.getHigherLevelSiblings(n,"right");if(e.every(((t,n)=>n===e.length-1&&PN.isLineBreakTag(t)||PN.isEmpty(t)&&!PN.isLineBreakTag(t)))&&r===n.textContent.length)return!0}const i=o.textContent.replace(/\s+$/,"");return n===o&&r>=i.length}setToBlock(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.positions.DEFAULT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var o;const{BlockManager:r,BlockSelection:i}=this.Editor;if(i.clearSelection(),!e.focusable)return null==(o=window.getSelection())||o.removeAllRanges(),i.selectBlock(e),void(r.currentBlock=e);let s;switch(t){case this.positions.START:s=e.firstInput;break;case this.positions.END:s=e.lastInput;break;default:s=e.currentInput}if(!s)return;const a=PN.getDeepestNode(s,t===this.positions.END),l=PN.getContentLength(a);switch(!0){case t===this.positions.START:n=0;break;case t===this.positions.END:case n>l:n=l}this.set(a,n),r.setCurrentBlockByChildNode(e.holder),r.currentBlock.currentInput=s}setToInput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.positions.DEFAULT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{currentBlock:o}=this.Editor.BlockManager,r=PN.getDeepestNode(e);switch(t){case this.positions.START:this.set(r,0);break;case this.positions.END:this.set(r,PN.getContentLength(r));break;default:n&&this.set(r,n)}o.currentInput=e}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{top:n,bottom:o}=DN.setCursor(e,t),{innerHeight:r}=window;n<0?window.scrollBy(0,n-30):o>r&&window.scrollBy(0,o-r+30)}setToTheLastBlock(){const e=this.Editor.BlockManager.lastBlock;if(e)if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{const e=this.Editor.BlockManager.insertAtEnd();this.setToBlock(e)}}extractFragmentFromCaretPosition(){const e=DN.get();if(e.rangeCount){const t=e.getRangeAt(0),n=this.Editor.BlockManager.currentBlock.currentInput;if(t.deleteContents(),n){if(PN.isNativeInput(n)){const e=n,t=document.createDocumentFragment(),o=e.value.substring(0,e.selectionStart),r=e.value.substring(e.selectionStart);return t.textContent=r,e.value=o,t}{const e=t.cloneRange();return e.selectNodeContents(n),e.setStart(t.endContainer,t.endOffset),e.extractContents()}}}}navigateNext(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{BlockManager:t}=this.Editor,{currentBlock:n,nextBlock:o}=t,{nextInput:r}=n,i=this.isAtEnd;let s=o;const a=e||i;if(r&&a)return this.setToInput(r,this.positions.START),!0;if(null===s){if(n.tool.isDefault||!a)return!1;s=t.insertAtEnd()}return!!a&&(this.setToBlock(s,this.positions.START),!0)}navigatePrevious(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{currentBlock:t,previousBlock:n}=this.Editor.BlockManager;if(!t)return!1;const{previousInput:o}=t,r=e||this.isAtStart;return o&&r?(this.setToInput(o,this.positions.END),!0):!(null===n||!r)&&(this.setToBlock(n,this.positions.END),!0)}createShadow(e){const t=document.createElement("span");t.classList.add($D.CSS.shadowCaret),e.insertAdjacentElement("beforeend",t)}restoreCaret(e){const t=e.querySelector(".".concat($D.CSS.shadowCaret));if(!t)return;(new DN).expandToTag(t);const n=document.createRange();n.selectNode(t),n.extractContents()}insertContentAtCaretPosition(e){const t=document.createDocumentFragment(),n=document.createElement("div"),o=DN.get(),r=DN.range;n.innerHTML=e,Array.from(n.childNodes).forEach((e=>t.appendChild(e))),0===t.childNodes.length&&t.appendChild(new Text);const i=t.lastChild;r.deleteContents(),r.insertNode(t);const s=document.createRange(),a=i.nodeType===Node.TEXT_NODE?i:i.firstChild;null!==a&&null!==a.textContent&&s.setStart(a,a.textContent.length),o.removeAllRanges(),o.addRange(s)}getHigherLevelSiblings(e,t){let n=e;const o=[];for(;n.parentNode&&"true"!==n.parentNode.contentEditable;)n=n.parentNode;const r="left"===t?"previousSibling":"nextSibling";for(;n[r];)n=n[r],o.push(n);return o}}const ZD=class extends NN{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=e=>{try{const t=e.create({},{},!1);if(!1===e.pasteConfig)return void this.exceptionList.push(e.name);if(!cN(t.onPaste))return;this.getTagsConfig(e),this.getFilesConfig(e),this.getPatternsConfig(e)}catch(t){sN("Paste handling for \xab".concat(e.name,"\xbb Tool hasn't been set up because of the error"),"warn",t)}},this.handlePasteEvent=async e=>{const{BlockManager:t,Toolbar:n}=this.Editor,o=t.setCurrentBlockByChildNode(e.target);!o||this.isNativeBehaviour(e.target)&&!e.clipboardData.types.includes("Files")||o&&this.exceptionList.includes(o.name)||(e.preventDefault(),this.processDataTransfer(e.clipboardData),n.close())}}async prepare(){this.processTools()}toggleReadOnly(e){e?this.unsetCallback():this.setCallback()}async processDataTransfer(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{Tools:n}=this.Editor,o=e.types;if((o.includes?o.includes("Files"):o.contains("Files"))&&!fN(this.toolsFiles))return void await this.processFiles(e.files);const r=e.getData(this.MIME_TYPE),i=e.getData("text/plain");let s=e.getData("text/html");if(r)try{return void this.insertEditorJSData(JSON.parse(r))}catch{}t&&i.trim()&&s.trim()&&(s="<p>"+(s.trim()?s:i)+"</p>");const a=Object.keys(this.toolsTags).reduce(((e,t)=>{var n;return e[t.toLowerCase()]=null!==(n=this.toolsTags[t].sanitizationConfig)&&void 0!==n?n:{},e}),{}),l=tD(s,Object.assign({},a,n.getAllInlineToolsSanitizeConfig(),{br:{}}));l.trim()&&l.trim()!==i&&PN.isHTMLString(l)?await this.processText(l,!0):await this.processText(i)}async processText(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{Caret:n,BlockManager:o}=this.Editor,r=t?this.processHTML(e):this.processPlain(e);if(!r.length)return;if(1===r.length)return void(r[0].isBlock?this.processSingleBlock(r.pop()):this.processInlinePaste(r.pop()));const i=o.currentBlock&&o.currentBlock.tool.isDefault&&o.currentBlock.isEmpty;r.map((async(e,t)=>this.insertBlock(e,0===t&&i))),o.currentBlock&&n.setToBlock(o.currentBlock,n.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const e=this.Editor.Tools.blockTools;Array.from(e.values()).forEach(this.processTool)}collectTagNames(e){return uN(e)?[e]:dN(e)?Object.keys(e):[]}getTagsConfig(e){if(!1===e.pasteConfig)return;const t=e.pasteConfig.tags||[],n=[];t.forEach((t=>{const o=this.collectTagNames(t);n.push(...o),o.forEach((n=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,n))return void sN("Paste handler for \xab".concat(e.name,"\xbb Tool on \xab").concat(n,"\xbb tag is skipped because it is already used by \xab").concat(this.toolsTags[n].tool.name,"\xbb Tool."),"warn");const o=dN(t)?t[n]:null;this.toolsTags[n.toUpperCase()]={tool:e,sanitizationConfig:o}}))})),this.tagsByTool[e.name]=n.map((e=>e.toUpperCase()))}getFilesConfig(e){if(!1===e.pasteConfig)return;const{files:t={}}=e.pasteConfig;let{extensions:n,mimeTypes:o}=t;!n&&!o||(n&&!Array.isArray(n)&&(sN("\xabextensions\xbb property of the onDrop config for \xab".concat(e.name,"\xbb Tool should be an array")),n=[]),o&&!Array.isArray(o)&&(sN("\xabmimeTypes\xbb property of the onDrop config for \xab".concat(e.name,"\xbb Tool should be an array")),o=[]),o&&(o=o.filter((t=>!!function(e){return/^[-\w]+\/([-+\w]+|\*)$/.test(e)}(t)||(sN("MIME type value \xab".concat(t,"\xbb for the \xab").concat(e.name,"\xbb Tool is not a valid MIME type"),"warn"),!1)))),this.toolsFiles[e.name]={extensions:n||[],mimeTypes:o||[]})}getPatternsConfig(e){!1===e.pasteConfig||!e.pasteConfig.patterns||fN(e.pasteConfig.patterns)||Object.entries(e.pasteConfig.patterns).forEach((t=>{let[n,o]=t;o instanceof RegExp||sN("Pattern ".concat(o," for \xab").concat(e.name,"\xbb Tool is skipped because it should be a Regexp instance."),"warn"),this.toolsPatterns.push({key:n,pattern:o,tool:e})}))}isNativeBehaviour(e){return PN.isNativeInput(e)}async processFiles(e){const{BlockManager:t}=this.Editor;let n;n=await Promise.all(Array.from(e).map((e=>this.processFile(e)))),n=n.filter((e=>!!e));const o=t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty;n.forEach(((e,n)=>{t.paste(e.type,e.event,0===n&&o)}))}async processFile(e){const t=function(e){return e.name.split(".").pop()}(e),n=Object.entries(this.toolsFiles).find((n=>{let[o,{mimeTypes:r,extensions:i}]=n;const[s,a]=e.type.split("/"),l=i.find((e=>e.toLowerCase()===t.toLowerCase())),c=r.find((e=>{const[t,n]=e.split("/");return t===s&&(n===a||"*"===n)}));return!!l||!!c}));if(!n)return;const[o]=n;return{event:this.composePasteEvent("file",{file:e}),type:o}}processHTML(e){const{Tools:t}=this.Editor,n=PN.make("DIV");return n.innerHTML=e,this.getNodes(n).map((e=>{let n,o=t.defaultTool,r=!1;switch(e.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:n=PN.make("div"),n.appendChild(e);break;case Node.ELEMENT_NODE:n=e,r=!0,this.toolsTags[n.tagName]&&(o=this.toolsTags[n.tagName].tool)}const{tags:i}=o.pasteConfig||{tags:[]},s=i.reduce(((e,t)=>(this.collectTagNames(t).forEach((n=>{const o=dN(t)?t[n]:null;e[n.toLowerCase()]=o||{}})),e)),{}),a=Object.assign({},s,o.baseSanitizeConfig);if("table"===n.tagName.toLowerCase()){const e=tD(n.outerHTML,a);n=PN.make("div",void 0,{innerHTML:e}).firstChild}else n.innerHTML=tD(n.innerHTML,a);const l=this.composePasteEvent("tag",{data:n});return{content:n,isBlock:r,tool:o.name,event:l}})).filter((e=>{const t=PN.isEmpty(e.content),n=PN.isSingleTag(e.content);return!t||n}))}processPlain(e){const{defaultBlock:t}=this.config;if(!e)return[];const n=t;return e.split(/\r?\n/).filter((e=>e.trim())).map((e=>{const t=PN.make("div");t.textContent=e;const o=this.composePasteEvent("tag",{data:t});return{content:t,tool:n,isBlock:!1,event:o}}))}async processSingleBlock(e){const{Caret:t,BlockManager:n}=this.Editor,{currentBlock:o}=n;o&&e.tool===o.name&&PN.containsOnlyInlineElements(e.content.innerHTML)?t.insertContentAtCaretPosition(e.content.innerHTML):this.insertBlock(e,(null==o?void 0:o.tool.isDefault)&&o.isEmpty)}async processInlinePaste(e){const{BlockManager:t,Caret:n}=this.Editor,{content:o}=e;if(t.currentBlock&&t.currentBlock.tool.isDefault&&o.textContent.length<ZD.PATTERN_PROCESSING_MAX_LENGTH){const e=await this.processPattern(o.textContent);if(e){const o=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty,r=t.paste(e.tool,e.event,o);return void n.setToBlock(r,n.positions.END)}}if(t.currentBlock&&t.currentBlock.currentInput){const e=t.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,tD(o.innerHTML,e))}else this.insertBlock(e)}async processPattern(e){const t=this.toolsPatterns.find((t=>{const n=t.pattern.exec(e);return!!n&&e===n.shift()}));return t?{event:this.composePasteEvent("pattern",{key:t.key,data:e}),tool:t.tool.name}:void 0}insertBlock(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{BlockManager:n,Caret:o}=this.Editor,{currentBlock:r}=n;let i;if(t&&r&&r.isEmpty)return i=n.paste(e.tool,e.event,!0),void o.setToBlock(i,o.positions.END);i=n.paste(e.tool,e.event),o.setToBlock(i,o.positions.END)}insertEditorJSData(e){const{BlockManager:t,Caret:n,Tools:o}=this.Editor;eD(e,(e=>o.blockTools.get(e).sanitizeConfig)).forEach(((e,o)=>{let{tool:r,data:i}=e,s=!1;0===o&&(s=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty);const a=t.insert({tool:r,data:i,replace:s});n.setToBlock(a,n.positions.END)}))}processElementNode(e,t,n){const o=Object.keys(this.toolsTags),r=e,{tool:i}=this.toolsTags[r.tagName]||{},s=this.tagsByTool[null==i?void 0:i.name]||[],a=o.includes(r.tagName),l=PN.blockElements.includes(r.tagName.toLowerCase()),c=Array.from(r.children).some((e=>{let{tagName:t}=e;return o.includes(t)&&!s.includes(t)})),d=Array.from(r.children).some((e=>{let{tagName:t}=e;return PN.blockElements.includes(t.toLowerCase())}));return l||a||c?a&&!c||l&&!d&&!c?[...t,n,r]:void 0:(n.appendChild(r),[...t,n])}getNodes(e){const t=Array.from(e.childNodes);let n;const o=(e,t)=>{if(PN.isEmpty(t)&&!PN.isSingleTag(t))return e;const r=e[e.length-1];let i=new DocumentFragment;switch(r&&PN.isFragment(r)&&(i=e.pop()),t.nodeType){case Node.ELEMENT_NODE:if(n=this.processElementNode(t,e,i),n)return n;break;case Node.TEXT_NODE:return i.appendChild(t),[...e,i];default:return[...e,i]}return[...e,...Array.from(t.childNodes).reduce(o,[])]};return t.reduce(o,[])}composePasteEvent(e,t){return new CustomEvent(e,{detail:t})}};let QD=ZD;QD.PATTERN_PROCESSING_MAX_LENGTH=450;class JD extends NN{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,t){const n=document.elementFromPoint(e-window.pageXOffset,t-window.pageYOffset);n.closest(".".concat(this.Editor.Toolbar.CSS.toolbar))||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const o=[".".concat(KN.CSS.content),".".concat(this.Editor.Toolbar.CSS.toolbar),".".concat(this.Editor.InlineToolbar.CSS.inlineToolbar)],r=n.closest("."+this.Editor.UI.CSS.editorWrapper),i=o.some((e=>!!n.closest(e)));!r||i||(this.mousedown=!0,this.startX=e,this.startY=t)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:e}=this.genHTML();this.listeners.on(e,"mousedown",(e=>{this.processMouseDown(e)}),!1),this.listeners.on(document.body,"mousemove",wN((e=>{this.processMouseMove(e)}),10),{passive:!0}),this.listeners.on(document.body,"mouseleave",(()=>{this.processMouseLeave()})),this.listeners.on(window,"scroll",wN((e=>{this.processScroll(e)}),10),{passive:!0}),this.listeners.on(document.body,"mouseup",(()=>{this.processMouseUp()}),!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(null!==e.target.closest(PN.allInputsSelector)||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),this.inScrollZone?this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0):this.isScrolling=!1}genHTML(){const{UI:e}=this.Editor,t=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),n=PN.make("div",JD.CSS.overlay,{}),o=PN.make("div",JD.CSS.overlayContainer,{}),r=PN.make("div",JD.CSS.rect,{});return o.appendChild(r),n.appendChild(o),t.appendChild(n),this.overlayRectangle=r,{container:t,overlay:n}}scrollVertical(e){if(!this.inScrollZone||!this.mousedown)return;const t=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-t,setTimeout((()=>{this.scrollVertical(e)}),0)}changingRectangle(e){if(!this.mousedown)return;void 0!==e.pageY&&(this.mouseX=e.pageX,this.mouseY=e.pageY);const{rightPos:t,leftPos:n,index:o}=this.genInfoForMouseSelection(),r=this.startX>t&&this.mouseX>t,i=this.startX<n&&this.mouseX<n;this.rectCrossesBlocks=!(r||i),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),void 0!==o&&(this.trySelectNextBlock(o),this.inverseSelection(),DN.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left="".concat(this.startX-window.pageXOffset,"px"),this.overlayRectangle.style.top="".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.bottom="calc(100% - ".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.right="calc(100% - ".concat(this.startX-window.pageXOffset,"px")}inverseSelection(){const e=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!e)for(const t of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(t);if(!this.rectCrossesBlocks&&e)for(const t of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(t)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top="".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.bottom="calc(100% - ".concat(this.mouseY-window.pageYOffset,"px")):(this.overlayRectangle.style.bottom="calc(100% - ".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.top="".concat(this.mouseY-window.pageYOffset,"px")),this.mouseX>=this.startX?(this.overlayRectangle.style.left="".concat(this.startX-window.pageXOffset,"px"),this.overlayRectangle.style.right="calc(100% - ".concat(this.mouseX-window.pageXOffset,"px")):(this.overlayRectangle.style.right="calc(100% - ".concat(this.startX-window.pageXOffset,"px"),this.overlayRectangle.style.left="".concat(this.mouseX-window.pageXOffset,"px"))}genInfoForMouseSelection(){const e=document.body.offsetWidth/2,t=this.mouseY-window.pageYOffset,n=document.elementFromPoint(e,t),o=this.Editor.BlockManager.getBlockByChildNode(n);let r;void 0!==o&&(r=this.Editor.BlockManager.blocks.findIndex((e=>e.holder===o.holder)));const i=this.Editor.BlockManager.lastBlock.holder.querySelector("."+KN.CSS.content),s=Number.parseInt(window.getComputedStyle(i).width,10)/2;return{index:r,leftPos:e-s,rightPos:e+s}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){const t=this.stackOfSelected[this.stackOfSelected.length-1]===e,n=this.stackOfSelected.length;if(t)return;const o=this.stackOfSelected[n-1]-this.stackOfSelected[n-2]>0;let r=0;n>1&&(r=o?1:-1);const i=e>this.stackOfSelected[n-1]&&1===r,s=e<this.stackOfSelected[n-1]&&-1===r,a=!(i||s||0===r);if(!a&&(e>this.stackOfSelected[n-1]||void 0===this.stackOfSelected[n-1])){let t=this.stackOfSelected[n-1]+1||e;for(;t<=e;t++)this.addBlockInSelection(t);return}if(!a&&e<this.stackOfSelected[n-1]){for(let t=this.stackOfSelected[n-1]-1;t>=e;t--)this.addBlockInSelection(t);return}if(!a)return;let l,c=n-1;for(l=e>this.stackOfSelected[n-1]?()=>e>this.stackOfSelected[c]:()=>e<this.stackOfSelected[c];l();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[c]),this.stackOfSelected.pop(),c--}}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-paragraph[data-placeholder]:empty:before{content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before{opacity:1}.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before,.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus:before{opacity:0}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();class ez{static get DEFAULT_PLACEHOLDER(){return""}constructor(e){let{data:t,config:n,api:o,readOnly:r}=e;this.api=o,this.readOnly=r,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=n.placeholder?n.placeholder:ez.DEFAULT_PLACEHOLDER,this._data={},this._element=null,this._preserveBlank=void 0!==n.preserveBlank&&n.preserveBlank,this.data=t}onKeyUp(e){if("Backspace"!==e.code&&"Delete"!==e.code)return;const{textContent:t}=this._element;""===t&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable=!1,e.dataset.placeholder=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable=!0,e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){const t={text:this.data.text+e.text};this.data=t}validate(e){return!(""===e.text.trim()&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const t={text:e.detail.data.innerHTML};this.data=t}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}get data(){if(null!==this._element){const e=this._element.innerHTML;this._data.text=e}return this._data}set data(e){this._data=e||{},null!==this._element&&this.hydrate()}hydrate(){window.requestAnimationFrame((()=>{this._element.innerHTML=this._data.text||""}))}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>',title:"Text"}}}class tz{constructor(){this.commandName="bold",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--bold"},this.nodes={button:void 0}}static get sanitize(){return{b:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+B"}}tz.isInline=!0,tz.title="Bold";class nz{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}}nz.isInline=!0,nz.title="Italic";class oz{constructor(e){let{api:t}=e;this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=t.toolbar,this.inlineToolbar=t.inlineToolbar,this.notifier=t.notifier,this.i18n=t.i18n,this.selection=new DN}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=pD,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",(e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)})),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const e=this.selection.findParentTag("A");if(e)return this.selection.expandToTag(e),this.unlink(),this.closeActions(),this.checkState(),void this.toolbar.close()}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const t=e.getAttribute("href");this.nodes.input.value="null"!==t?t:"",this.selection.save()}else this.nodes.button.innerHTML=pD,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.selection.isFakeBackgroundEnabled){const e=new DN;e.save(),this.selection.restore(),this.selection.removeFakeBackground(),e.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let t=this.nodes.input.value||"";return t.trim()?this.validateURL(t)?(t=this.prepareLink(t),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(t),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),void this.inlineToolbar.close()):(this.notifier.show({message:"Pasted link is not valid.",style:"error"}),void sN("Incorrect Link pasted","warn",t)):(this.selection.restore(),this.unlink(),e.preventDefault(),void this.closeActions())}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e)}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const t=/^\/[^/\s]/.test(e),n="#"===e.substring(0,1),o=/^\/\/[^/\s]/.test(e);return!t&&!n&&!o&&(e="http://"+e),e}insertLink(e){const t=this.selection.findParentTag("A");t&&this.selection.expandToTag(t),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}}oz.isInline=!0,oz.title="Link";class rz{constructor(e){let{data:t,api:n}=e;this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=n,this.title=t.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=t.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=PN.make("div",this.CSS.wrapper),t=PN.make("div",this.CSS.info),n=PN.make("div",this.CSS.title,{textContent:this.title}),o=PN.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>',t.appendChild(n),t.appendChild(o),e.appendChild(t),e}}rz.isReadOnlySupported=!0;class iz extends WD{constructor(){super(...arguments),this.type=DD.Inline}get title(){return this.constructable[HD.Title]}create(){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings})}}class sz extends WD{constructor(){super(...arguments),this.type=DD.Tune}create(e,t){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings,block:t,data:e})}}class az extends Map{get blockTools(){const e=Array.from(this.entries()).filter((e=>{let[,t]=e;return t.isBlock()}));return new az(e)}get inlineTools(){const e=Array.from(this.entries()).filter((e=>{let[,t]=e;return t.isInline()}));return new az(e)}get blockTunes(){const e=Array.from(this.entries()).filter((e=>{let[,t]=e;return t.isTune()}));return new az(e)}get internalTools(){const e=Array.from(this.entries()).filter((e=>{let[,t]=e;return t.isInternal}));return new az(e)}get externalTools(){const e=Array.from(this.entries()).filter((e=>{let[,t]=e;return!t.isInternal}));return new az(e)}}var lz=Object.defineProperty,cz=Object.getOwnPropertyDescriptor,dz=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?cz(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&lz(t,n,i),i};class uz extends WD{constructor(){super(...arguments),this.type=DD.Block,this.inlineTools=new az,this.tunes=new az}create(e,t,n){return new this.constructable({data:e,block:t,readOnly:n,api:this.api.getMethodsForTool(this),config:this.settings})}get isReadOnlySupported(){return!0===this.constructable[UD.IsReadOnlySupported]}get isLineBreaksEnabled(){return this.constructable[UD.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[UD.Toolbox],t=this.config[zD.Toolbox];if(!fN(e)&&!1!==t)return t?Array.isArray(e)?Array.isArray(t)?t.map(((t,n)=>{const o=e[n];return o?{...o,...t}:t})):[t]:Array.isArray(t)?t:[{...e,...t}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[UD.ConversionConfig]}get enabledInlineTools(){return this.config[zD.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[zD.EnabledBlockTunes]}get pasteConfig(){var e;return null!==(e=this.constructable[UD.PasteConfig])&&void 0!==e?e:{}}get sanitizeConfig(){const e=super.sanitizeConfig,t=this.baseSanitizeConfig;if(fN(e))return t;const n={};for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const r=e[o];dN(r)?n[o]=Object.assign({},t,r):n[o]=r}return n}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach((t=>Object.assign(e,t.sanitizeConfig))),Array.from(this.tunes.values()).forEach((t=>Object.assign(e,t.sanitizeConfig))),e}}dz([EN],uz.prototype,"sanitizeConfig",1),dz([EN],uz.prototype,"baseSanitizeConfig",1);class hz{constructor(e,t,n){this.api=n,this.config=e,this.editorConfig=t}get(e){const{class:t,isInternal:n=!1,...o}=this.config[e];return new(this.getConstructor(t))({name:e,constructable:t,config:o,api:this.api,isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:n})}getConstructor(e){switch(!0){case e[HD.IsInline]:return iz;case e[VD.IsTune]:return sz;default:return uz}}}class pz{constructor(e){let{api:t}=e;this.CSS={animation:"wobble"},this.api=t}render(){return{icon:hD,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e+1);if(!t)throw new Error("Unable to move Block down since it is already the last");const n=t.holder,o=n.getBoundingClientRect();let r=Math.abs(window.innerHeight-n.offsetHeight);o.top<window.innerHeight&&(r=window.scrollY+n.offsetHeight),window.scrollTo(0,r),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}}pz.isTune=!0;class fz{constructor(e){let{api:t}=e;this.api=t}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}}fz.isTune=!0;class gz{constructor(e){let{api:t}=e;this.CSS={animation:"wobble"},this.api=t}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e),n=this.api.blocks.getBlockByIndex(e-1);if(0===e||!t||!n)throw new Error("Unable to move Block up since it is already the first");const o=t.holder,r=n.holder,i=o.getBoundingClientRect(),s=r.getBoundingClientRect();let a;a=s.top>0?Math.abs(i.top)-Math.abs(s.top):Math.abs(i.top)+s.height,window.scrollBy(0,-1*a),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}}gz.isTune=!0;var mz=Object.defineProperty,vz=Object.getOwnPropertyDescriptor;class yz extends NN{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new az,this.toolsUnavailable=new az}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=SN({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||0===Object.keys(this.config.tools).length)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new hz(e,this.config,this.Editor.API);const t=this.getListOfPrepareFunctions(e);if(0===t.length)return Promise.resolve();await mN(t,(e=>{this.toolPrepareMethodSuccess(e)}),(e=>{this.toolPrepareMethodFallback(e)})),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach((t=>{Object.assign(e,t.sanitizeConfig)})),e}destroy(){Object.values(this.available).forEach((async e=>{cN(e.reset)&&await e.reset()}))}get internalTools(){return{bold:{class:tz,isInternal:!0},italic:{class:nz,isInternal:!0},link:{class:oz,isInternal:!0},paragraph:{class:ez,inlineToolbar:!0,isInternal:!0},stub:{class:rz,isInternal:!0},moveUp:{class:gz,isInternal:!0},delete:{class:fz,isInternal:!0},moveDown:{class:pz,isInternal:!0}}}toolPrepareMethodSuccess(e){const t=this.factory.get(e.toolName);if(t.isInline()){const e=["render","surround","checkState"].filter((e=>!t.create()[e]));if(e.length)return sN("Incorrect Inline Tool: ".concat(t.name,". Some of required methods is not implemented %o"),"warn",e),void this.toolsUnavailable.set(t.name,t)}this.toolsAvailable.set(t.name,t)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const t=[];return Object.entries(e).forEach((e=>{let[n,o]=e;t.push({function:cN(o.class.prepare)?o.class.prepare:()=>{},data:{toolName:n,config:o.config}})})),t}prepareBlockTools(){Array.from(this.blockTools.values()).forEach((e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)}))}assignInlineToolsToBlockTool(e){if(!1!==this.config.inlineToolbar){if(!0===e.enabledInlineTools)return void(e.inlineTools=new az(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map((e=>[e,this.inlineTools.get(e)])):Array.from(this.inlineTools.entries())));Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new az(e.enabledInlineTools.map((e=>[e,this.inlineTools.get(e)]))))}}assignBlockTunesToBlockTool(e){if(!1!==e.enabledBlockTunes){if(Array.isArray(e.enabledBlockTunes)){const t=new az(e.enabledBlockTunes.map((e=>[e,this.blockTunes.get(e)])));return void(e.tunes=new az([...t,...this.blockTunes.internalTools]))}if(Array.isArray(this.config.tunes)){const t=new az(this.config.tunes.map((e=>[e,this.blockTunes.get(e)])));return void(e.tunes=new az([...t,...this.blockTunes.internalTools]))}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const t=this.config.tools[e];if(!cN(t)&&!cN(t.class))throw Error("Tool \xab".concat(e,"\xbb must be a constructor function or an object with function in the \xabclass\xbb property"))}}prepareConfig(){const e={};for(const t in this.config.tools)dN(this.config.tools[t])?e[t]=this.config.tools[t]:e[t]={class:this.config.tools[t]};return e}}((e,t,n,o)=>{for(var r,i=o>1?void 0:o?vz(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);o&&i&&mz(t,n,i)})([EN],yz.prototype,"getAllInlineToolsSanitizeConfig",1);const bz={BlocksAPI:class extends NN{constructor(){var e;super(...arguments),e=this,this.insert=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.config.defaultBlock,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;return new BN(e.Editor.BlockManager.insert({id:s,tool:t,data:n,index:o,needToFocus:r,replace:i}))},this.composeBlockData=async e=>{const t=this.Editor.Tools.blockTools.get(e);return new KN({tool:t,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(e,t)=>{const{BlockManager:n}=this.Editor,o=n.getBlockById(e);if(void 0===o)throw new Error('Block with id "'.concat(e,'" not found'));return new BN(await n.update(o,t))},this.convert=(e,t,n)=>{var o,r;const{BlockManager:i,Tools:s}=this.Editor,a=i.getBlockById(e);if(!a)throw new Error('Block with id "'.concat(e,'" not found'));const l=s.blockTools.get(a.name),c=s.blockTools.get(t);if(!c)throw new Error('Block Tool with type "'.concat(t,'" not found'));const d=void 0!==(null==(o=null==l?void 0:l.conversionConfig)?void 0:o.export),u=void 0!==(null==(r=c.conversionConfig)?void 0:r.import);if(!d||!u){const e=[!d&&xN(a.name),!u&&xN(t)].filter(Boolean).join(" and ");throw new Error('Conversion from "'.concat(a.name,'" to "').concat(t,'" is not possible. ').concat(e,' tool(s) should provide a "conversionConfig"'))}i.convert(a,t,n)},this.insertMany=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.Editor.BlockManager.blocks.length-1;e.validateIndex(n);const o=t.map((t=>{let{id:n,type:o,data:r}=t;return e.Editor.BlockManager.composeBlock({id:n,tool:o||e.config.defaultBlock,data:r})}));return e.Editor.BlockManager.insertMany(o,n),o.map((e=>new BN(e)))}}get methods(){var e=this;return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,t)=>this.swap(e,t),move:(e,t)=>this.move(e,t),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),stretchBlock:function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.stretchBlock(t,n)},insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){const t=this.Editor.BlockManager.getBlockById(e);if(t)return this.Editor.BlockManager.getBlockIndex(t);aN("There is no block with id `"+e+"`","warn")}getBlockByIndex(e){const t=this.Editor.BlockManager.getBlockByIndex(e);if(void 0!==t)return new BN(t);aN("There is no block at index `"+e+"`","warn")}getById(e){const t=this.Editor.BlockManager.getBlockById(e);return void 0===t?(aN("There is no block with id `"+e+"`","warn"),null):new BN(t)}swap(e,t){sN("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,t)}move(e,t){this.Editor.BlockManager.move(e,t)}delete(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.Editor.BlockManager.currentBlockIndex;try{const t=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(t)}catch(cO){return void aN(cO,"warn")}0===this.Editor.BlockManager.blocks.length&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(void 0===e||void 0===e.blocks)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(e){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];CN(!0,"blocks.stretchBlock()","BlockAPI");const n=this.Editor.BlockManager.getBlockByIndex(e);n&&(n.stretched=t)}insertNewBlock(){sN("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if("number"!=typeof e)throw new Error("Index should be a number");if(e<0)throw new Error("Index should be greater than or equal to 0");if(null===e)throw new Error("Index should be greater than or equal to 0")}},CaretAPI:class extends NN{constructor(){var e;super(...arguments),e=this,this.setToFirstBlock=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.Editor.Caret.positions.DEFAULT,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!e.Editor.BlockManager.firstBlock&&(e.Editor.Caret.setToBlock(e.Editor.BlockManager.firstBlock,t,n),!0)},this.setToLastBlock=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.Editor.Caret.positions.DEFAULT,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!e.Editor.BlockManager.lastBlock&&(e.Editor.Caret.setToBlock(e.Editor.BlockManager.lastBlock,t,n),!0)},this.setToPreviousBlock=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.Editor.Caret.positions.DEFAULT,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!e.Editor.BlockManager.previousBlock&&(e.Editor.Caret.setToBlock(e.Editor.BlockManager.previousBlock,t,n),!0)},this.setToNextBlock=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.Editor.Caret.positions.DEFAULT,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!e.Editor.BlockManager.nextBlock&&(e.Editor.Caret.setToBlock(e.Editor.BlockManager.nextBlock,t,n),!0)},this.setToBlock=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.Editor.Caret.positions.DEFAULT,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!!e.Editor.BlockManager.blocks[t]&&(e.Editor.Caret.setToBlock(e.Editor.BlockManager.blocks[t],n,o),!0)},this.focus=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?e.setToLastBlock(e.Editor.Caret.positions.END):e.setToFirstBlock(e.Editor.Caret.positions.START)}}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}},EventsAPI:class extends NN{get methods(){return{emit:(e,t)=>this.emit(e,t),off:(e,t)=>this.off(e,t),on:(e,t)=>this.on(e,t)}}on(e,t){this.eventsDispatcher.on(e,t)}emit(e,t){this.eventsDispatcher.emit(e,t)}off(e,t){this.eventsDispatcher.off(e,t)}},I18nAPI:GN,API:class extends NN{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e)})}},InlineToolbarAPI:class extends NN{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}},ListenersAPI:class extends NN{get methods(){return{on:(e,t,n,o)=>this.on(e,t,n,o),off:(e,t,n,o)=>this.off(e,t,n,o),offById:e=>this.offById(e)}}on(e,t,n,o){return this.listeners.on(e,t,n,o)}off(e,t,n,o){this.listeners.off(e,t,n,o)}offById(e){this.listeners.offById(e)}},NotifierAPI:class extends NN{constructor(e){let{config:t,eventsDispatcher:n}=e;super({config:t,eventsDispatcher:n}),this.notifier=new $N}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}},ReadOnlyAPI:class extends NN{get methods(){const e=()=>this.isEnabled;return{toggle:e=>this.toggle(e),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}},SanitizerAPI:class extends NN{get methods(){return{clean:(e,t)=>this.clean(e,t)}}clean(e,t){return tD(e,t)}},SaverAPI:class extends NN{get methods(){return{save:()=>this.save()}}save(){const e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(aN(e,"warn"),Promise.reject(new Error(e))):this.Editor.Saver.save()}},SelectionAPI:class extends NN{get methods(){return{findParentTag:(e,t)=>this.findParentTag(e,t),expandToTag:e=>this.expandToTag(e)}}findParentTag(e,t){return(new DN).findParentTag(e,t)}expandToTag(e){(new DN).expandToTag(e)}},StylesAPI:class extends NN{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}},ToolbarAPI:class extends NN{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){-1!==this.Editor.BlockManager.currentBlockIndex?(null!==e&&void 0!==e?e:!this.Editor.BlockSettings.opened)?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close():aN("Could't toggle the Toolbar because there is no block selected ","warn")}toggleToolbox(e){-1!==this.Editor.BlockManager.currentBlockIndex?(null!==e&&void 0!==e?e:!this.Editor.Toolbar.toolbox.opened)?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close():aN("Could't toggle the Toolbox because there is no block selected ","warn")}},TooltipAPI:class extends NN{constructor(e){let{config:t,eventsDispatcher:n}=e;super({config:t,eventsDispatcher:n})}get methods(){return{show:(e,t,n)=>this.show(e,t,n),hide:()=>this.hide(),onHover:(e,t,n)=>this.onHover(e,t,n)}}show(e,t,n){!function(e,t,n){lD(),null==aD||aD.show(e,t,n)}(e,t,n)}hide(){cD()}onHover(e,t,n){dD(e,t,n)}},UiAPI:class extends NN{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}},BlockSettings:class extends NN{constructor(){super(...arguments),this.opened=!1,this.selection=new DN,this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;return null==(e=this.popover)?void 0:e.flipper}make(){this.nodes.wrapper=PN.make("div",[this.CSS.settings])}destroy(){this.removeAllNodes()}open(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.Editor.BlockManager.currentBlock;this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(e),this.Editor.BlockSelection.clearCache();const[t,n]=e.getTunes();this.eventsDispatcher.emit(this.events.opened),this.popover=new CD({searchable:!0,items:t.map((e=>this.resolveTuneAliases(e))),customContent:n,customContentFlippableItems:this.getControls(n),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:jN.ui(uD.ui.popover,"Nothing found"),search:jN.ui(uD.ui.popover,"Filter")}}),this.popover.on(_D.Close,this.onPopoverClose),this.nodes.wrapper.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}close(){this.opened&&(this.opened=!1,DN.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(_D.Close,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))}getControls(e){const{StylesAPI:t}=this.Editor,n=e.querySelectorAll(".".concat(t.classes.settingsButton,", ").concat(PN.allInputsSelector));return Array.from(n)}resolveTuneAliases(e){const t=function(e,t){const n={};return Object.keys(e).forEach((o=>{const r=t[o];void 0!==r?n[r]=e[o]:n[o]=e[o]})),n}(e,{label:"title"});return e.confirmation&&(t.confirmation=this.resolveTuneAliases(e.confirmation)),t}},ConversionToolbar:ED,Toolbar:class extends NN{constructor(e){let{config:t,eventsDispatcher:n}=e;super({config:t,eventsDispatcher:n}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:null==(e=this.toolboxInstance)?void 0:e.opened,close:()=>{var e;null==(e=this.toolboxInstance)||e.close()},open:()=>{null!==this.toolboxInstance?(this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()):sN("toolbox.open() called before initialization is finished","warn")},toggle:()=>{null!==this.toolboxInstance?this.toolboxInstance.toggle():sN("toolbox.toggle() called before initialization is finished","warn")},hasFocus:()=>{var e;return null==(e=this.toolboxInstance)?void 0:e.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback((()=>{this.drawUI(),this.enableModuleBindings()}),{timeout:2e3})}moveAndOpen(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.Editor.BlockManager.currentBlock;if(null===this.toolboxInstance)return void sN("Can't open Toolbar since Editor initialization is not finished yet","warn");if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;const t=e.holder,{isMobile:n}=this.Editor.UI,o=e.pluginsContent,r=window.getComputedStyle(o),i=parseInt(r.paddingTop,10),s=t.offsetHeight;let a;a=n?t.offsetTop+s:t.offsetTop+i,this.nodes.wrapper.style.top="".concat(Math.floor(a),"px"),1===this.Editor.BlockManager.blocks.length&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e,t;this.Editor.ReadOnly.isEnabled||(null==(e=this.nodes.wrapper)||e.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),null==(t=this.toolboxInstance)||t.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()}make(){this.nodes.wrapper=PN.make("div",this.CSS.toolbar),["content","actions"].forEach((e=>{this.nodes[e]=PN.make("div",this.CSS[e])})),PN.append(this.nodes.wrapper,this.nodes.content),PN.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=PN.make("div",this.CSS.plusButton,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>'}),PN.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",(()=>{cD(!0),this.plusButtonClicked()}),!1);const e=PN.make("div");e.appendChild(document.createTextNode(jN.ui(uD.ui.toolbar.toolbox,"Add"))),e.appendChild(PN.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),dD(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=PN.make("span",this.CSS.settingsToggler,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>'}),PN.append(this.nodes.actions,this.nodes.settingsToggler);const t=PN.make("div"),n=PN.text(jN.ui(uD.ui.blockTunes.toggler,"Click to tune"));t.appendChild(n),t.appendChild(PN.make("div",this.CSS.plusButtonShortcut,{textContent:_N("CMD + /")})),dD(this.nodes.settingsToggler,t,{hidingDelay:400}),PN.append(this.nodes.actions,this.makeToolbox()),PN.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),PN.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new RD({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:jN.ui(uD.ui.popover,"Filter"),nothingFound:jN.ui(uD.ui.popover,"Nothing found")}}),this.toolboxInstance.on(LD.Opened,(()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)})),this.toolboxInstance.on(LD.Closed,(()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)})),this.toolboxInstance.on(LD.BlockAdded,(e=>{let{block:t}=e;const{BlockManager:n,Caret:o}=this.Editor,r=n.getBlockById(t.id);0===r.inputs.length&&(r===n.lastBlock?(n.insertAtEnd(),o.setToBlock(n.lastBlock)):o.setToBlock(n.nextBlock))})),this.toolboxInstance.make()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,null==(e=this.toolboxInstance)||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",(e=>{var t;e.stopPropagation(),this.settingsTogglerClicked(),null!=(t=this.toolboxInstance)&&t.opened&&this.toolboxInstance.close(),cD(!0)}),!0),IN()||this.eventsDispatcher.on(ND,(e=>{var t;this.Editor.BlockSettings.opened||null!=(t=this.toolboxInstance)&&t.opened||this.moveAndOpen(e.block)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}},InlineToolbar:class extends NN{constructor(e){let{config:t,eventsDispatcher:n}=e;super({config:t,eventsDispatcher:n}),this.CSS={inlineToolbar:"ce-inline-toolbar",inlineToolbarShowed:"ce-inline-toolbar--showed",inlineToolbarLeftOriented:"ce-inline-toolbar--left-oriented",inlineToolbarRightOriented:"ce-inline-toolbar--right-oriented",inlineToolbarShortcut:"ce-inline-toolbar__shortcut",buttonsWrapper:"ce-inline-toolbar__buttons",actionsWrapper:"ce-inline-toolbar__actions",inlineToolButton:"ce-inline-tool",inputField:"cdx-input",focusedButton:"ce-inline-tool--focused",conversionToggler:"ce-inline-toolbar__dropdown",conversionTogglerArrow:"ce-inline-toolbar__dropdown-arrow",conversionTogglerHidden:"ce-inline-toolbar__dropdown--hidden",conversionTogglerContent:"ce-inline-toolbar__dropdown-content",togglerAndButtonsWrapper:"ce-inline-toolbar__toggler-and-button-wrapper"},this.opened=!1,this.toolbarVerticalMargin=IN()?20:6,this.buttonsList=null,this.width=0,this.flipper=null}toggleReadOnly(e){e?(this.destroy(),this.Editor.ConversionToolbar.destroy()):window.requestIdleCallback((()=>{this.make()}),{timeout:2e3})}async tryToShow(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.close(),this.allowedToShow()&&(await this.addToolsFiltered(e),this.move(),this.open(e),this.Editor.Toolbar.close())}close(){this.opened&&(this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed),Array.from(this.toolsInstances.entries()).forEach((e=>{let[t,n]=e;const o=this.getToolShortcut(t);o&&AD.remove(this.Editor.UI.nodes.redactor,o),cN(n.clear)&&n.clear()})),this.reset(),this.opened=!1,this.flipper.deactivate(),this.Editor.ConversionToolbar.close()))}containsNode(e){return void 0!==this.nodes.wrapper&&this.nodes.wrapper.contains(e)}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}make(){this.nodes.wrapper=PN.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.togglerAndButtonsWrapper=PN.make("div",this.CSS.togglerAndButtonsWrapper),this.nodes.buttons=PN.make("div",this.CSS.buttonsWrapper),this.nodes.actions=PN.make("div",this.CSS.actionsWrapper),this.listeners.on(this.nodes.wrapper,"mousedown",(e=>{e.target.closest(".".concat(this.CSS.actionsWrapper))||e.preventDefault()})),PN.append(this.nodes.wrapper,[this.nodes.togglerAndButtonsWrapper,this.nodes.actions]),PN.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper),this.addConversionToggler(),PN.append(this.nodes.togglerAndButtonsWrapper,this.nodes.buttons),this.prepareConversionToolbar(),window.requestAnimationFrame((()=>{this.recalculateWidth()})),this.enableFlipper()}open(){if(this.opened)return;this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed),this.buttonsList=this.nodes.buttons.querySelectorAll(".".concat(this.CSS.inlineToolButton)),this.opened=!0;let e=Array.from(this.buttonsList);e.unshift(this.nodes.conversionToggler),e=e.filter((e=>!e.hidden)),this.flipper.activate(e)}move(){const e=DN.rect,t=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),n={x:e.x-t.x,y:e.y+e.height-t.top+this.toolbarVerticalMargin};n.x+this.width+t.x>this.Editor.UI.contentRect.right&&(n.x=this.Editor.UI.contentRect.right-this.width-t.x),this.nodes.wrapper.style.left=Math.floor(n.x)+"px",this.nodes.wrapper.style.top=Math.floor(n.y)+"px"}reset(){this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarLeftOriented,this.CSS.inlineToolbarRightOriented),this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){const e=DN.get(),t=DN.text;if(!e||!e.anchorNode||e.isCollapsed||t.length<1)return!1;const n=PN.isElement(e.anchorNode)?e.anchorNode:e.anchorNode.parentElement;if(e&&["IMG","INPUT"].includes(n.tagName)||null===n.closest('[contenteditable="true"]'))return!1;const o=this.Editor.BlockManager.getBlock(e.anchorNode);return!!o&&0!==o.tool.inlineTools.size}recalculateWidth(){this.width=this.nodes.wrapper.offsetWidth}addConversionToggler(){this.nodes.conversionToggler=PN.make("div",this.CSS.conversionToggler),this.nodes.conversionTogglerContent=PN.make("div",this.CSS.conversionTogglerContent);const e=PN.make("div",this.CSS.conversionTogglerArrow,{innerHTML:hD});this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent),this.nodes.conversionToggler.appendChild(e),this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler),this.listeners.on(this.nodes.conversionToggler,"click",(()=>{this.Editor.ConversionToolbar.toggle((e=>{!e&&this.opened?this.flipper.activate():this.opened&&this.flipper.deactivate()}))})),!1===IN()&&dD(this.nodes.conversionToggler,jN.ui(uD.ui.inlineToolbar.converter,"Convert to"),{placement:"top",hidingDelay:100})}async setConversionTogglerContent(){const{BlockManager:e}=this.Editor,{currentBlock:t}=e,n=t.name,o=t.tool.conversionConfig,r=o&&o.export;this.nodes.conversionToggler.hidden=!r,this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden,!r);const i=await t.getActiveToolboxEntry()||{};this.nodes.conversionTogglerContent.innerHTML=i.icon||i.title||xN(n)}prepareConversionToolbar(){const e=this.Editor.ConversionToolbar.make();PN.append(this.nodes.wrapper,e)}async addToolsFiltered(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=DN.get(),n=this.Editor.BlockManager.getBlock(t.anchorNode);this.nodes.buttons.innerHTML="",this.nodes.actions.innerHTML="",this.toolsInstances=new Map,Array.from(n.tool.inlineTools.values()).forEach((e=>{this.addTool(e)})),e&&this.Editor.ConversionToolbar.hasTools()?await this.setConversionTogglerContent():this.nodes.conversionToggler.hidden=!0,this.recalculateWidth()}addTool(e){const t=e.create(),n=t.render();if(!n)return void sN("Render method must return an instance of Node","warn",e.name);if(n.dataset.tool=e.name,this.nodes.buttons.appendChild(n),this.toolsInstances.set(e.name,t),cN(t.renderActions)){const e=t.renderActions();this.nodes.actions.appendChild(e)}this.listeners.on(n,"click",(e=>{this.toolClicked(t),e.preventDefault()}));const o=this.getToolShortcut(e.name);if(o)try{this.enableShortcuts(t,o)}catch{}const r=PN.make("div"),i=jN.t(uD.toolNames,e.title||xN(e.name));r.appendChild(PN.text(i)),o&&r.appendChild(PN.make("div",this.CSS.inlineToolbarShortcut,{textContent:_N(o)})),!1===IN()&&dD(n,r,{placement:"top",hidingDelay:100}),t.checkState(DN.get())}getToolShortcut(e){const{Tools:t}=this.Editor,n=t.inlineTools.get(e),o=t.internal.inlineTools;return Array.from(o.keys()).includes(e)?this.inlineTools[e][FD.Shortcut]:n.shortcut}enableShortcuts(e,t){AD.add({name:t,handler:t=>{const{currentBlock:n}=this.Editor.BlockManager;n&&n.tool.enabledInlineTools&&(t.preventDefault(),this.toolClicked(e))},on:this.Editor.UI.nodes.redactor})}toolClicked(e){const t=DN.range;e.surround(t),this.checkToolsState(),void 0!==e.renderActions&&this.flipper.deactivate()}checkToolsState(){this.toolsInstances.forEach((e=>{e.checkState(DN.get())}))}get inlineTools(){const e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach((t=>{let[n,o]=t;e[n]=o.create()})),e}enableFlipper(){this.flipper=new vD({focusedItemClass:this.CSS.focusedButton,allowedKeys:[$R,XR]})}},BlockEvents:class extends NN{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case YR:this.backspace(e);break;case nN:this.delete(e);break;case $R:this.enter(e);break;case eN:case tN:this.arrowRightAndDown(e);break;case JR:case QR:this.arrowLeftAndUp(e);break;case XR:this.tabPressed(e);break;case oN:e.ctrlKey||e.metaKey?this.commandSlashPressed():this.slashPressed()}}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&gN(e.keyCode)&&(this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||this.Editor.BlockSelection.clearSelection(e))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(e){this.Editor.BlockManager.getBlockByChildNode(e.target).dropTarget=!0}dragLeave(e){this.Editor.BlockManager.getBlockByChildNode(e.target).dropTarget=!1}handleCommandC(e){const{BlockSelection:t}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e)}handleCommandX(e){const{BlockSelection:t,BlockManager:n,Caret:o}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e).then((()=>{const r=n.removeSelectedBlocks(),i=n.insertDefaultBlockAtIndex(r,!0);o.setToBlock(i,o.positions.START),t.clearSelection(e)}))}tabPressed(e){const{InlineToolbar:t,ConversionToolbar:n,Caret:o}=this.Editor;n.opened||t.opened||(e.shiftKey?o.navigatePrevious(!0):o.navigateNext(!0))&&e.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(){this.Editor.BlockManager.currentBlock.isEmpty&&this.activateToolbox()}enter(e){const{BlockManager:t,UI:n}=this.Editor;if(t.currentBlock.tool.isLineBreaksEnabled||n.someToolbarOpened&&n.someFlipperButtonFocused||e.shiftKey)return;let o=this.Editor.BlockManager.currentBlock;this.Editor.Caret.isAtStart&&!this.Editor.BlockManager.currentBlock.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):o=this.Editor.Caret.isAtEnd?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(o),this.Editor.Toolbar.moveAndOpen(o),e.preventDefault()}backspace(e){const{BlockManager:t,Caret:n}=this.Editor,{currentBlock:o,previousBlock:r}=t;if(DN.isCollapsed&&n.isAtStart)if(e.preventDefault(),this.Editor.Toolbar.close(),o.currentInput===o.firstInput){if(null!==r)if(r.isEmpty)t.removeBlock(r);else if(o.isEmpty){t.removeBlock(o);const e=t.currentBlock;n.setToBlock(e,n.positions.END)}else VN(o,r)?this.mergeBlocks(r,o):n.setToBlock(r,n.positions.END)}else n.navigatePrevious()}delete(e){const{BlockManager:t,Caret:n}=this.Editor,{currentBlock:o,nextBlock:r}=t;if(DN.isCollapsed&&n.isAtEnd)if(e.preventDefault(),this.Editor.Toolbar.close(),o.currentInput===o.lastInput){if(null!==r){if(!r.isEmpty)return o.isEmpty?(t.removeBlock(o),void n.setToBlock(r,n.positions.START)):void(VN(o,r)?this.mergeBlocks(o,r):n.setToBlock(r,n.positions.START));t.removeBlock(r)}}else n.navigateNext()}mergeBlocks(e,t){const{BlockManager:n,Caret:o,Toolbar:r}=this.Editor;o.createShadow(e.pluginsContent),n.mergeBlocks(e,t).then((()=>{window.requestAnimationFrame((()=>{o.restoreCaret(e.pluginsContent),e.pluginsContent.normalize(),r.close()}))}))}arrowRightAndDown(e){const t=vD.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===XR);if(this.Editor.UI.someToolbarOpened&&t)return;this.Editor.Toolbar.close();const n=this.Editor.Caret.isAtEnd||this.Editor.BlockSelection.anyBlockSelected;e.shiftKey&&e.keyCode===eN&&n?this.Editor.CrossBlockSelection.toggleBlockSelectedState():(e.keyCode===eN||e.keyCode===tN&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious())?e.preventDefault():(yN((()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()}),20)(),this.Editor.BlockSelection.clearSelection(e))}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if(vD.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===XR))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();const t=this.Editor.Caret.isAtStart||this.Editor.BlockSelection.anyBlockSelected;e.shiftKey&&e.keyCode===JR&&t?this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1):(e.keyCode===JR||e.keyCode===QR&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext())?e.preventDefault():(yN((()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()}),20)(),this.Editor.BlockSelection.clearSelection(e))}needToolbarClosing(e){const t=e.keyCode===$R&&this.Editor.Toolbar.toolbox.opened,n=e.keyCode===$R&&this.Editor.BlockSettings.opened,o=e.keyCode===$R&&this.Editor.InlineToolbar.opened,r=e.keyCode===$R&&this.Editor.ConversionToolbar.opened,i=e.keyCode===XR;return!(e.shiftKey||i||t||n||o||r)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}},BlockManager:class extends NN{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find((e=>!!e.inputs.length))}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find((e=>!!e.inputs.length))}get previousBlock(){return 0===this.currentBlockIndex?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every((e=>e.isEmpty))}prepare(){const e=new KD(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:KD.set,get:KD.get}),this.listeners.on(document,"copy",(e=>this.Editor.BlockEvents.handleCommandC(e)))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock(e){let{tool:t,data:n={},id:o,tunes:r={}}=e;const i=this.Editor.ReadOnly.isEnabled,s=this.Editor.Tools.blockTools.get(t),a=new KN({id:o,data:n,tool:s,api:this.Editor.API,readOnly:i,tunesData:r},this.eventsDispatcher);return i||window.requestIdleCallback((()=>{this.bindBlockEvents(a)}),{timeout:2e3}),a}insert(){let{id:e,tool:t=this.config.defaultBlock,data:n={},index:o,needToFocus:r=!0,replace:i=!1,tunes:s={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=o;void 0===a&&(a=this.currentBlockIndex+(i?0:1));const l=this.composeBlock({id:e,tool:t,data:n,tunes:s});return i&&this.blockDidMutated(GD,this.getBlockByIndex(a),{index:a}),this._blocks.insert(a,l,i),this.blockDidMutated(qD,l,{index:a}),r?this.currentBlockIndex=a:a<=this.currentBlockIndex&&this.currentBlockIndex++,l}insertMany(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._blocks.insertMany(e,t)}async update(e,t){const n=await e.data,o=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},n,t),tunes:e.tunes}),r=this.getBlockIndex(e);return this._blocks.replace(r,o),this.blockDidMutated(YD,o,{index:r}),o}replace(e,t,n){const o=this.getBlockIndex(e);this.insert({tool:t,data:n,index:o,replace:!0})}paste(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=this.insert({tool:e,replace:n});try{window.requestIdleCallback((()=>{o.call(WN.ON_PASTE,t)}))}catch(r){sN("".concat(e,": onPaste callback call is failed"),"error",r)}return o}insertDefaultBlockAtIndex(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=n,this.blockDidMutated(qD,n,{index:e}),t?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,n}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,t){const n=await t.data;fN(n)||await e.mergeWith(n),this.removeBlock(t),this.currentBlockIndex=this._blocks.indexOf(e)}removeBlock(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((n=>{const o=this._blocks.indexOf(e);if(!this.validateIndex(o))throw new Error("Can't find a Block to remove");e.destroy(),this._blocks.remove(o),this.blockDidMutated(GD,e,{index:o}),this.currentBlockIndex>=o&&this.currentBlockIndex--,this.blocks.length?0===o&&(this.currentBlockIndex=0):(this.currentBlockIndex=-1,t&&this.insert()),n()}))}removeSelectedBlocks(){let e;for(let t=this.blocks.length-1;t>=0;t--)this.blocks[t].selected&&(this.removeBlock(this.blocks[t]),e=t);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.currentBlockIndex=-1,this.insert(),this.currentBlock.firstInput.focus()}split(){const e=this.Editor.Caret.extractFragmentFromCaretPosition(),t=PN.make("div");t.appendChild(e);const n={text:PN.isEmpty(t)?"":t.innerHTML};return this.insert({data:n})}getBlockByIndex(e){return-1===e&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find((t=>t.id===e))}getBlock(e){PN.isElement(e)||(e=e.parentNode);const t=this._blocks.nodes,n=e.closest(".".concat(KN.CSS.wrapper)),o=t.indexOf(n);if(o>=0)return this._blocks[o]}setCurrentBlockByChildNode(e){PN.isElement(e)||(e=e.parentNode);const t=e.closest(".".concat(KN.CSS.wrapper));if(!t)return;const n=t.closest(".".concat(this.Editor.UI.CSS.editorWrapper));return null!=n&&n.isEqualNode(this.Editor.UI.nodes.wrapper)?(this.currentBlockIndex=this._blocks.nodes.indexOf(t),this.currentBlock.updateCurrentInput(),this.currentBlock):void 0}getBlockByChildNode(e){if(!e||!(e instanceof Node))return;PN.isElement(e)||(e=e.parentNode);const t=e.closest(".".concat(KN.CSS.wrapper));return this.blocks.find((e=>e.holder===t))}swap(e,t){this._blocks.swap(e,t),this.currentBlockIndex=t}move(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentBlockIndex;isNaN(e)||isNaN(t)?sN("Warning during 'move' call: incorrect indices provided.","warn"):this.validateIndex(e)&&this.validateIndex(t)?(this._blocks.move(e,t),this.currentBlockIndex=e,this.blockDidMutated("block-moved",this.currentBlock,{fromIndex:t,toIndex:e})):sN("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn")}async convert(e,t,n){if(!await e.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const o=this.Editor.Tools.blockTools.get(t);if(!o)throw new Error("Could not convert Block. Tool \xab".concat(t,"\xbb not found."));let r=function(e,t){const n=null==t?void 0:t.import;return cN(n)?n(e):uN(n)?{[n]:e}:(void 0!==n&&sN("Conversion \xabimport\xbb property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}(tD(await e.exportDataAsString(),o.sanitizeConfig),o.conversionConfig);n&&(r=Object.assign(r,n)),this.replace(e,o.name,r)}dropPointer(){this.currentBlockIndex=-1}async clear(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=new XD;this.blocks.forEach((e=>{t.add((async()=>{await this.removeBlock(e,!1)}))})),await t.completed,this.dropPointer(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map((e=>e.destroy())))}bindBlockEvents(e){const{BlockEvents:t}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",(e=>{t.keydown(e)})),this.readOnlyMutableListeners.on(e.holder,"keyup",(e=>{t.keyup(e)})),this.readOnlyMutableListeners.on(e.holder,"dragover",(e=>{t.dragOver(e)})),this.readOnlyMutableListeners.on(e.holder,"dragleave",(e=>{t.dragLeave(e)})),e.on("didMutated",(e=>this.blockDidMutated(YD,e,{index:this.getBlockIndex(e)})))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",(e=>this.Editor.BlockEvents.handleCommandX(e))),this.blocks.forEach((e=>{this.bindBlockEvents(e)}))}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,t,n){const o=new CustomEvent(e,{detail:{target:new BN(t),...n}});return this.eventsDispatcher.emit(FN,{event:o}),t}},BlockSelection:class extends NN{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:e}=this.Editor;return e.blocks.every((e=>!0===e.selected))}set allBlocksSelected(e){const{BlockManager:t}=this.Editor;t.blocks.forEach((t=>{t.selected=e})),this.clearCache()}get anyBlockSelected(){const{BlockManager:e}=this.Editor;return null===this.anyBlockSelectedCache&&(this.anyBlockSelectedCache=e.blocks.some((e=>!0===e.selected))),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter((e=>e.selected))}prepare(){this.selection=new DN,AD.add({name:"CMD+A",handler:e=>{const{BlockManager:t,ReadOnly:n}=this.Editor;if(n.isEnabled)return e.preventDefault(),void this.selectAllBlocks();t.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){DN.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){const{BlockManager:t}=this.Editor;let n;n=isNaN(e)?t.currentBlock:t.getBlockByIndex(e),n.selected=!1,this.clearCache()}clearSelection(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{BlockManager:n,Caret:o,RectangleSelection:r}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const i=e&&e instanceof KeyboardEvent,s=i&&gN(e.keyCode);if(this.anyBlockSelected&&i&&s&&!DN.isSelectionExists){const t=n.removeSelectedBlocks();n.insertDefaultBlockAtIndex(t,!0),o.setToBlock(n.currentBlock),yN((()=>{const t=e.key;o.insertContentAtCaretPosition(t.length>1?"":t)}),20)()}this.Editor.CrossBlockSelection.clear(e),this.anyBlockSelected&&!r.isRectActivated()?(t&&this.selection.restore(),this.allBlocksSelected=!1):this.Editor.RectangleSelection.clearSelection()}copySelectedBlocks(e){e.preventDefault();const t=PN.make("div");this.selectedBlocks.forEach((e=>{const n=tD(e.holder.innerHTML,this.sanitizerConfig),o=PN.make("p");o.innerHTML=n,t.appendChild(o)}));const n=Array.from(t.childNodes).map((e=>e.textContent)).join("\n\n"),o=t.innerHTML;return e.clipboardData.setData("text/plain",n),e.clipboardData.setData("text/html",o),Promise.all(this.selectedBlocks.map((e=>e.save()))).then((t=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(t))}catch{}}))}selectBlockByIndex(e){const{BlockManager:t}=this.Editor,n=t.getBlockByIndex(e);void 0!==n&&this.selectBlock(n)}selectBlock(e){this.selection.save(),DN.get().removeAllRanges(),e.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(e){e.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){AD.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),PN.isNativeInput(e.target)&&!this.readyToBlockSelection)return void(this.readyToBlockSelection=!0);const t=this.Editor.BlockManager.getBlock(e.target),n=t.inputs;n.length>1&&!this.readyToBlockSelection?this.readyToBlockSelection=!0:1!==n.length||this.needToSelectAll?this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1,this.Editor.ConversionToolbar.close()):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlock(t),this.needToSelectAll=!0):this.needToSelectAll=!0}selectAllBlocks(){this.selection.save(),DN.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}},Caret:$D,CrossBlockSelection:class extends NN{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{const{BlockManager:t,BlockSelection:n}=this.Editor;if(null===e.relatedTarget&&null===e.target)return;const o=t.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,r=t.getBlockByChildNode(e.target);if(o&&r&&r!==o){if(o===this.firstSelectedBlock)return DN.get().removeAllRanges(),o.selected=!0,r.selected=!0,void n.clearCache();if(r===this.firstSelectedBlock)return o.selected=!1,r.selected=!1,void n.clearCache();this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(o,r),this.lastSelectedBlock=r}}}async prepare(){this.listeners.on(document,"mousedown",(e=>{this.enableCrossBlockSelection(e)}))}watchSelection(e){if(e.button!==rN)return;const{BlockManager:t}=this.Editor;this.firstSelectedBlock=t.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock}toggleBlockSelectedState(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{BlockManager:t,BlockSelection:n}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=t.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,n.clearCache(),DN.get().removeAllRanges());const o=t.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),r=t.blocks[o];r&&(this.lastSelectedBlock.selected!==r.selected?(r.selected=!0,n.clearCache()):(this.lastSelectedBlock.selected=!1,n.clearCache()),this.lastSelectedBlock=r,this.Editor.InlineToolbar.close(),r.holder.scrollIntoView({block:"nearest"}))}clear(e){const{BlockManager:t,BlockSelection:n,Caret:o}=this.Editor,r=t.blocks.indexOf(this.firstSelectedBlock),i=t.blocks.indexOf(this.lastSelectedBlock);if(n.anyBlockSelected&&r>-1&&i>-1&&e&&e instanceof KeyboardEvent)switch(e.keyCode){case eN:case tN:o.setToBlock(t.blocks[Math.max(r,i)],o.positions.END);break;case JR:case QR:o.setToBlock(t.blocks[Math.min(r,i)],o.positions.START);break;default:o.setToBlock(t.blocks[Math.max(r,i)],o.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){const{UI:t}=this.Editor;DN.isCollapsed||this.Editor.BlockSelection.clearSelection(e),t.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,t){const{BlockManager:n,BlockSelection:o}=this.Editor,r=n.blocks.indexOf(e),i=n.blocks.indexOf(t),s=e.selected!==t.selected;for(let a=Math.min(r,i);a<=Math.max(r,i);a++){const r=n.blocks[a];r!==this.firstSelectedBlock&&r!==(s?e:t)&&(n.blocks[a].selected=!n.blocks[a].selected,o.clearCache())}}},DragNDrop:class extends NN{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",(async e=>{await this.processDrop(e)}),!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",(()=>{this.processDragStart()})),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",(e=>{this.processDragOver(e)}),!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){const{BlockManager:t,Caret:n,Paste:o}=this.Editor;e.preventDefault(),t.blocks.forEach((e=>{e.dropTarget=!1})),DN.isAtEditor&&!DN.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const r=t.setCurrentBlockByChildNode(e.target);if(r)this.Editor.Caret.setToBlock(r,n.positions.END);else{const e=t.setCurrentBlockByChildNode(t.lastBlock.holder);this.Editor.Caret.setToBlock(e,n.positions.END)}await o.processDataTransfer(e.dataTransfer,!0)}processDragStart(){DN.isAtEditor&&!DN.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}},ModificationsObserver:class extends NN{constructor(e){let{config:t,eventsDispatcher:n}=e;super({config:t,eventsDispatcher:n}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=400,this.mutationObserver=new MutationObserver((e=>{this.redactorChanged(e)})),this.eventsDispatcher.on(FN,(e=>{this.particularBlockChanged(e.event)})),this.eventsDispatcher.on(UN,(()=>{this.disable()})),this.eventsDispatcher.on(HN,(()=>{this.enable()}))}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!cN(this.config.onChange)||(this.batchingOnChangeQueue.set("block:".concat(e.detail.target.id,":event:").concat(e.type),e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout((()=>{let e;e=1===this.batchingOnChangeQueue.size?this.batchingOnChangeQueue.values().next().value:Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,e),this.batchingOnChangeQueue.clear()}),this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(zN,{mutations:e})}},Paste:QD,ReadOnly:class extends NN{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:e}=this.Editor,{blockTools:t}=e,n=[];Array.from(t.entries()).forEach((e=>{let[t,o]=e;o.isReadOnlySupported||n.push(t)})),this.toolsDontSupportReadOnly=n,this.config.readOnly&&n.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly)}async toggle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.readOnlyEnabled;e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const t=this.readOnlyEnabled;this.readOnlyEnabled=e;for(const o in this.Editor)this.Editor[o].toggleReadOnly&&this.Editor[o].toggleReadOnly(e);if(t===e)return this.readOnlyEnabled;const n=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(n.blocks),this.readOnlyEnabled}throwCriticalError(){throw new ON("To enable read-only mode all connected tools should support it. Tools ".concat(this.toolsDontSupportReadOnly.join(", ")," don't support read-only mode."))}},RectangleSelection:JD,Renderer:class extends NN{async render(e){return new Promise((t=>{const{Tools:n,BlockManager:o}=this.Editor;if(0===e.length)o.insert();else{const t=e.map((e=>{let t,{type:r,data:i,tunes:s,id:a}=e;!1===n.available.has(r)&&(aN("Tool \xab".concat(r,"\xbb is not found. Check 'tools' property at the Editor.js config."),"warn"),i=this.composeStubDataForTool(r,i,a),r=n.stubTool);try{t=o.composeBlock({id:a,tool:r,data:i,tunes:s})}catch(xR){sN("Block \xab".concat(r,"\xbb skipped because of plugins error"),"error",{data:i,error:xR}),i=this.composeStubDataForTool(r,i,a),r=n.stubTool,t=o.composeBlock({id:a,tool:r,data:i,tunes:s})}return t}));o.insertMany(t)}window.requestIdleCallback((()=>{t()}),{timeout:2e3})}))}composeStubDataForTool(e,t,n){const{Tools:o}=this.Editor;let r=e;if(o.unavailable.has(e)){const t=o.unavailable.get(e).toolbox;void 0!==t&&void 0!==t[0].title&&(r=t[0].title)}return{savedData:{id:n,type:e,data:t},title:r}}},Saver:class extends NN{async save(){const{BlockManager:e,Tools:t}=this.Editor,n=e.blocks,o=[];try{n.forEach((e=>{o.push(this.getSavedData(e))}));const e=await Promise.all(o),r=await eD(e,(e=>t.blockTools.get(e).sanitizeConfig));return this.makeOutput(r)}catch(r){aN("Saving failed due to the Error %o","error",r)}}async getSavedData(e){const t=await e.save(),n=t&&await e.validate(t.data);return{...t,isValid:n}}makeOutput(e){const t=[];return e.forEach((e=>{let{id:n,tool:o,data:r,tunes:i,isValid:s}=e;if(!s)return void sN("Block \xab".concat(o,"\xbb skipped because saved data is invalid"));if(o===this.Editor.Tools.stubTool)return void t.push(r);const a={id:n,type:o,data:r,...!fN(i)&&{tunes:i}};t.push(a)})),{time:+new Date,blocks:t,version:"2.29.0"}}},Tools:yz,UI:class extends NN{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=void 0,this.resizeDebouncer=bN((()=>{this.windowResize()}),200)}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache)return this.contentRectCache;const e=this.nodes.wrapper.querySelector(".".concat(KN.CSS.content));return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.checkIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.disableModuleBindings():window.requestIdleCallback((()=>{this.enableModuleBindings()}),{timeout:2e3})}checkEmptiness(){const{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:e,BlockSettings:t,InlineToolbar:n,ConversionToolbar:o}=this.Editor;return t.opened||n.opened||o.opened||e.toolbox.opened}get someFlipperButtonFocused(){return!!this.Editor.Toolbar.toolbox.hasFocus()||Object.entries(this.Editor).filter((e=>{let[t,n]=e;return n.flipper instanceof vD})).some((e=>{let[t,n]=e;return n.flipper.hasFocus()}))}destroy(){this.nodes.holder.innerHTML=""}closeAllToolbars(){const{Toolbar:e,BlockSettings:t,InlineToolbar:n,ConversionToolbar:o}=this.Editor;t.close(),n.close(),o.close(),e.toolbox.close()}checkIsMobile(){this.isMobile=window.innerWidth<650}make(){this.nodes.holder=PN.getHolder(this.config.holder),this.nodes.wrapper=PN.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=PN.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}loadStyles(){const e="editor-js-styles";if(PN.get(e))return;const t=PN.make("style",null,{id:e,textContent:':root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0px;left:0px;right:0px;bottom:0px;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;border-radius:0;line-height:normal}.ce-inline-tool svg{width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:190px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px #c9c9cc7a;border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important}.ce-conversion-tool--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-conversion-tool__secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-conversion-tool__secondary-label{display:none}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;line-height:32px}.ce-settings__button svg{width:20px;height:20px}@media (max-width: 650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover: hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{background:rgba(34,186,255,.08)!important}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button--disabled{cursor:not-allowed!important}.ce-settings__button--disabled{opacity:.3}.ce-settings__button--selected{color:#388ae5}@media (min-width: 651px){.codex-editor--narrow .ce-settings .ce-popover{right:0;left:auto;left:initial}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button svg{width:20px;height:20px}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0px;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #e8e8eb;--color-shadow: rgba(13,20,33,.13);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #eff2f5;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:0;top:calc(100% + var(--offset-from-target));background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}.ce-popover--open-top{top:calc(-1 * (var(--offset-from-target) + var(--popover-height)))}@media (max-width: 650px){.ce-popover{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}.ce-popover .ce-popover__search{display:none}}.ce-popover__search,.ce-popover__custom-content:not(:empty){margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width: 651px){.ce-popover__custom-content:not(:empty){padding:0}}.ce-popover__custom-content--hidden{display:none}.ce-popover-item{--border-radius: 6px;--icon-size: 20px;--icon-size-mobile: 28px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px;color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{border-radius:5px;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px var(--color-border-icon);box-shadow:0 0 0 1px var(--color-border-icon);background:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:var(--icon-size-mobile);height:var(--icon-size-mobile)}}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--active .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--disabled .ce-popover-item__icon{-webkit-box-shadow:0 0 0 1px var(--color-border-icon-disabled);box-shadow:0 0 0 1px var(--color-border-icon-disabled)}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--focused:not(.ce-popover-item--no-focus){-webkit-box-shadow:inset 0 0 0px 1px var(--color-shadow-item-focus);box-shadow:inset 0 0 0 1px var(--color-shadow-item-focus)}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}.ce-popover-item:hover .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__icon{color:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}.ce-popover-item--confirmation .ce-popover-item__icon,.ce-popover-item--active .ce-popover-item__icon,.ce-popover-item--focused .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}\n'.toString()});this.config.style&&!fN(this.config.style)&&this.config.style.nonce&&t.setAttribute("nonce",this.config.style.nonce),PN.prepend(document.head,t)}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",(e=>{this.redactorClicked(e)}),!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",(e=>{this.documentTouched(e)}),{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",(e=>{this.documentTouched(e)}),{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(document,"keydown",(e=>{this.documentKeydown(e)}),!0),this.readOnlyMutableListeners.on(document,"mousedown",(e=>{this.documentClicked(e)}),!0);const e=bN((()=>{this.selectionChanged()}),180);this.readOnlyMutableListeners.on(document,"selectionchange",e,!0),this.readOnlyMutableListeners.on(window,"resize",(()=>{this.resizeDebouncer()}),{passive:!0}),this.watchBlockHoveredEvents()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",wN((t=>{const n=t.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||n&&e!==n&&(e=n,this.eventsDispatcher.emit(ND,{block:this.Editor.BlockManager.getBlockByChildNode(n)}))}),20),{passive:!0})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.checkIsMobile()}documentKeydown(e){switch(e.keyCode){case $R:this.enterPressed(e);break;case YR:case nN:this.backspacePressed(e);break;case ZR:this.escapePressed(e);break;default:this.defaultBehaviour(e)}}defaultBehaviour(e){const{currentBlock:t}=this.Editor.BlockManager,n=e.target.closest(".".concat(this.CSS.editorWrapper)),o=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;void 0===t||null!==n?n||t&&o||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close()):this.Editor.BlockEvents.keydown(e)}backspacePressed(e){const{BlockManager:t,BlockSelection:n,Caret:o}=this.Editor;if(n.anyBlockSelected&&!DN.isSelectionExists){const r=t.removeSelectedBlocks(),i=t.insertDefaultBlockAtIndex(r,!0);o.setToBlock(i,o.positions.START),n.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.ConversionToolbar.opened?this.Editor.ConversionToolbar.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){const{BlockManager:t,BlockSelection:n}=this.Editor,o=t.currentBlockIndex>=0;if(n.anyBlockSelected&&!DN.isSelectionExists)return n.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),void e.stopPropagation();if(!this.someToolbarOpened&&o&&"BODY"===e.target.tagName){const e=this.Editor.BlockManager.insert();this.Editor.Caret.setToBlock(e),this.Editor.Toolbar.moveAndOpen(e)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){var t,n;if(!e.isTrusted)return;const o=e.target;this.nodes.holder.contains(o)||DN.isAtEditor||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close());const r=null==(t=this.Editor.BlockSettings.nodes.wrapper)?void 0:t.contains(o),i=null==(n=this.Editor.Toolbar.nodes.settingsToggler)?void 0:n.contains(o),s=r||i;if(this.Editor.BlockSettings.opened&&!s){this.Editor.BlockSettings.close();const e=this.Editor.BlockManager.getBlockByChildNode(o);this.Editor.Toolbar.moveAndOpen(e)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let t=e.target;if(t===this.nodes.redactor){const n=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,o=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;t=document.elementFromPoint(n,o)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(t)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){if(!DN.isCollapsed)return;const t=e.target,n=e.metaKey||e.ctrlKey;if(PN.isAnchor(t)&&n){e.stopImmediatePropagation(),e.stopPropagation();const n=function(e){try{return new URL(e).href}catch{}return"//"===e.substring(0,2)?window.location.protocol+e:window.location.origin+e}(t.getAttribute("href"));!function(e){window.open(e,"_blank")}(n)}else this.processBottomZoneClick(e)}processBottomZoneClick(e){const t=this.Editor.BlockManager.getBlockByIndex(-1),n=PN.offset(t.holder).bottom,o=e.pageY,{BlockSelection:r}=this.Editor;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!r.anyBlockSelected&&n<o){e.stopImmediatePropagation(),e.stopPropagation();const{BlockManager:t,Caret:n,Toolbar:o}=this.Editor;(!t.lastBlock.tool.isDefault||!t.lastBlock.isEmpty)&&t.insertAtEnd(),n.setToTheLastBlock(),o.moveAndOpen(t.lastBlock)}}selectionChanged(){const{CrossBlockSelection:e,BlockSelection:t}=this.Editor,n=DN.anchorElement;if(e.isCrossBlockSelectionStarted&&t.anyBlockSelected&&DN.get().removeAllRanges(),!n)return void(DN.range||this.Editor.InlineToolbar.close());const o=null===n.closest(".".concat(KN.CSS.content));if(o&&(this.Editor.InlineToolbar.containsNode(n)||this.Editor.InlineToolbar.close(),"true"!==n.dataset.inlineToolbar))return;this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(n);const r=!0!==o;this.Editor.InlineToolbar.tryToShow(!0,r)}}};class wz{constructor(e){let t,n;this.moduleInstances={},this.eventsDispatcher=new LN,this.isReady=new Promise(((e,o)=>{t=e,n=o})),Promise.resolve().then((async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:n,Caret:o,UI:r,ModificationsObserver:i}=this.moduleInstances;r.checkEmptiness(),i.enable(),this.configuration.autofocus&&o.setToBlock(n.blocks[0],o.positions.START),t()})).catch((e=>{sN("Editor.js is not ready because of ".concat(e),"error"),n(e)}))}set configuration(e){var t,n;dN(e)?this.config={...e}:this.config={holder:e},CN(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),null==this.config.holder&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=qR.VERBOSE),function(e){iN.logLevel=e}(this.config.logLevel),CN(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=void 0!==this.config.minHeight?this.config.minHeight:300;const o={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=!!this.config.hideToolbar&&this.config.hideToolbar,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=void 0===this.config.inlineToolbar||this.config.inlineToolbar,(fN(this.config.data)||!this.config.data.blocks||0===this.config.data.blocks.length)&&(this.config.data={blocks:[o]}),this.config.readOnly=this.config.readOnly||!1,null!=(t=this.config.i18n)&&t.messages&&jN.setDictionary(this.config.i18n.messages),this.config.i18n.direction=(null==(n=this.config.i18n)?void 0:n.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:e,holder:t}=this.config;if(e&&t)throw Error("\xabholderId\xbb and \xabholder\xbb param can't assign at the same time.");if(uN(t)&&!PN.get(t))throw Error("element with ID \xab".concat(t,"\xbb is missing. Pass correct holder's ID."));if(t&&dN(t)&&!PN.isElement(t))throw Error("\xabholder\xbb value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce(((e,t)=>e.then((async()=>{try{await this.moduleInstances[t].prepare()}catch(LR){if(LR instanceof ON)throw new Error(LR.message);sN("Module ".concat(t," was skipped because of %o"),"warn",LR)}}))),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(bz).forEach((e=>{let[t,n]=e;try{this.moduleInstances[t]=new n({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(BR){sN("[constructModules]","Module ".concat(t," skipped because"),"error",BR)}}))}configureModules(){for(const e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){const t={};for(const n in this.moduleInstances)n!==e&&(t[n]=this.moduleInstances[n]);return t}}class xz{static get version(){return"2.29.0"}constructor(e){let t=()=>{};dN(e)&&cN(e.onReady)&&(t=e.onReady);const n=new wz(e);this.isReady=n.isReady.then((()=>{this.exportAPI(n),t()}))}exportAPI(e){["configuration"].forEach((t=>{this[t]=e[t]})),this.destroy=()=>{Object.values(e.moduleInstances).forEach((e=>{cN(e.destroy)&&e.destroy(),e.listeners.removeAll()})),null==aD||aD.destroy(),aD=null,e=null;for(const e in this)Object.prototype.hasOwnProperty.call(this,e)&&delete this[e];Object.setPrototypeOf(this,null)},Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach((t=>{let[n,o]=t;Object.entries(o).forEach((t=>{let[o,r]=t;this[r]=e.moduleInstances.API.methods[n][o]}))}))}}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".ce-code__textarea{min-height:200px;font-family:Menlo,Monaco,Consolas,Courier New,monospace;color:#41314e;line-height:1.6em;font-size:12px;background:#f8f7fa;border:1px solid #f1f1f4;box-shadow:none;white-space:pre;word-wrap:normal;overflow-x:auto;resize:vertical}")),document.head.appendChild(e)}}catch(BR){console.error("vite-plugin-css-injected-by-js",BR)}}();class Sz{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}constructor(e){let{data:t,config:n,api:o,readOnly:r}=e;this.api=o,this.readOnly=r,this.placeholder=this.api.i18n.t(n.placeholder||Sz.DEFAULT_PLACEHOLDER),this.CSS={baseClass:this.api.styles.block,input:this.api.styles.input,wrapper:"ce-code",textarea:"ce-code__textarea"},this.nodes={holder:null,textarea:null},this.data={code:t.code||""},this.nodes.holder=this.drawView()}drawView(){const e=document.createElement("div"),t=document.createElement("textarea");return e.classList.add(this.CSS.baseClass,this.CSS.wrapper),t.classList.add(this.CSS.textarea,this.CSS.input),t.textContent=this.data.code,t.placeholder=this.placeholder,this.readOnly&&(t.disabled=!0),e.appendChild(t),t.addEventListener("keydown",(e=>{if("Tab"===e.code)this.tabHandler(e)})),this.nodes.textarea=t,e}render(){return this.nodes.holder}save(e){return{code:e.querySelector("textarea").value}}onPaste(e){const t=e.detail.data;this.data={code:t.textContent}}get data(){return this._data}set data(e){this._data=e,this.nodes.textarea&&(this.nodes.textarea.textContent=e.code)}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 8L5 12L9 16"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 8L19 12L15 16"/></svg>',title:"Code"}}static get DEFAULT_PLACEHOLDER(){return"Enter a code"}static get pasteConfig(){return{tags:["pre"]}}static get sanitize(){return{code:!0}}tabHandler(e){e.stopPropagation(),e.preventDefault();const t=e.target,n=e.shiftKey,o=t.selectionStart,r=t.value,i="  ";let s;if(n){const e=function(e,t){let n="";for(;"\n"!==n&&t>0;)t-=1,n=e.substr(t,1);return"\n"===n&&(t+=1),t}(r,o);if(r.substr(e,2)!==i)return;t.value=r.substring(0,e)+r.substring(e+2),s=o-2}else s=o+2,t.value=r.substring(0,o)+i+r.substring(o);t.setSelectionRange(s,s)}}var _z=n(9267),kz=n.n(_z);!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".ce-rawtool__textarea{min-height:200px;resize:vertical;border-radius:8px;border:0;background-color:#1e2128;font-family:Menlo,Monaco,Consolas,Courier New,monospace;font-size:12px;line-height:1.6;letter-spacing:-.2px;color:#a1a7b6;overscroll-behavior:contain}")),document.head.appendChild(e)}}catch(BR){console.error("vite-plugin-css-injected-by-js",BR)}}();class Cz{static get isReadOnlySupported(){return!0}static get displayInToolbox(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16.6954 5C17.912 5 18.8468 6.07716 18.6755 7.28165L17.426 16.0659C17.3183 16.8229 16.7885 17.4522 16.061 17.6873L12.6151 18.8012C12.2152 18.9304 11.7848 18.9304 11.3849 18.8012L7.93898 17.6873C7.21148 17.4522 6.6817 16.8229 6.57403 16.0659L5.32454 7.28165C5.15322 6.07716 6.088 5 7.30461 5H16.6954Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 8.4H9L9.42857 11.7939H14.5714L14.3571 13.2788L14.1429 14.7636L12 15.4L9.85714 14.7636L9.77143 14.3394"/></svg>',title:"Raw HTML"}}constructor(e){let{data:t,config:n,api:o,readOnly:r}=e;this.api=o,this.readOnly=r,this.placeholder=n.placeholder||Cz.DEFAULT_PLACEHOLDER,this.CSS={baseClass:this.api.styles.block,input:this.api.styles.input,wrapper:"ce-rawtool",textarea:"ce-rawtool__textarea"},this.data={html:t.html||""},this.textarea=null,this.resizeDebounce=null}render(){const e=document.createElement("div");return this.textarea=document.createElement("textarea"),e.classList.add(this.CSS.baseClass,this.CSS.wrapper),this.textarea.classList.add(this.CSS.textarea,this.CSS.input),this.textarea.textContent=this.data.html,this.textarea.placeholder=this.placeholder,this.readOnly?this.textarea.disabled=!0:this.textarea.addEventListener("input",(()=>{this.onInput()})),e.appendChild(this.textarea),setTimeout((()=>{this.resize()}),100),e}save(e){return{html:e.querySelector("textarea").value}}static get DEFAULT_PLACEHOLDER(){return"Enter HTML code"}static get sanitize(){return{html:!0}}onInput(){this.resizeDebounce&&clearTimeout(this.resizeDebounce),this.resizeDebounce=setTimeout((()=>{this.resize()}),200)}resize(){this.textarea.style.height="auto",this.textarea.style.height=this.textarea.scrollHeight+"px"}}var Ez=n(9892),Iz=n.n(Ez),Tz=n(6061),Pz=n.n(Tz),Az=n(7329),Mz=n.n(Az);const jz=()=>{const{commonStore:e}=cR(),t={readOnly:!1,holder:"editorjs",tools:{Color:{class:Mz(),config:{colorCollections:["#EC7878","#9C27B0","#673AB7","#3F51B5","#0070FF","#03A9F4","#00BCD4","#4CAF50","#8BC34A","#CDDC39","#FFF"],defaultColor:"#FF1300",type:"text",customPicker:!0}},Marker:{class:Mz(),config:{defaultColor:"#FFBF00",type:"marker",icon:'<svg fill="#000000" height="200px" width="200px" version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M17.6,6L6.9,16.7c-0.2,0.2-0.3,0.4-0.3,0.6L6,23.9c0,0.3,0.1,0.6,0.3,0.8C6.5,24.9,6.7,25,7,25c0,0,0.1,0,0.1,0l6.6-0.6 c0.2,0,0.5-0.1,0.6-0.3L25,13.4L17.6,6z"></path> <path d="M26.4,12l1.4-1.4c1.2-1.2,1.1-3.1-0.1-4.3l-3-3c-0.6-0.6-1.3-0.9-2.2-0.9c-0.8,0-1.6,0.3-2.2,0.9L19,4.6L26.4,12z"></path> </g> <g> <path d="M28,29H4c-0.6,0-1-0.4-1-1s0.4-1,1-1h24c0.6,0,1,0.4,1,1S28.6,29,28,29z"></path> </g> </g></svg>'}},paragraph:{class:Pz(),inlineToolbar:!0},header:{class:wR(),inlineToolbar:["link"],config:{placeholder:"Header"},shortcut:"CMD+SHIFT+H"},image:xR,list:{class:TR,inlineToolbar:!0,shortcut:"CMD+SHIFT+L"},checklist:{class:OR,inlineToolbar:!0},quote:{class:LR,inlineToolbar:!0,config:{quotePlaceholder:"Enter a quote",captionPlaceholder:"Quote's author"},shortcut:"CMD+SHIFT+O"},alert:Iz(),delimiter:BR,inlineCode:{class:RR,shortcut:"CMD+SHIFT+C"},code:Sz,embed:HR,raw:Cz,table:{class:WR(),inlineToolbar:!0,shortcut:"CMD+ALT+T"},attaches:{class:kz(),config:{uploader:{uploadByFile:e=>new Promise(((t,n)=>{{const n=new FileReader;n.onload=function(n){t({fileurl:n.target.result,title:e.name,name:e.name,size:e.size})},n.readAsDataURL(e)}})).then((e=>({success:1,file:{url:e.fileurl,title:e.name,size:e.size,name:e.name}})))},additionalRequestHeaders:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}}}},data:{}};return{updateMarkdownData:function(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};t.data=n,function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};const o=document.getElementById("editorjs");for(;null!==o&&void 0!==o&&o.firstChild;)o.removeChild(o.firstChild);const r=new xz({...t,onChange:t=>{e.setIsDocumentsGroupDataUpdate(!0)},onReady(){n()}});e.updateMarkdownObj(r)}(o)}}},Oz=()=>{const{commonStore:e}=cR(),{updateMarkdownData:t}=jz(),n=["AddIconID","DeleteIconID","MarkDownIconID","DrawIConID","DocumentsIconID","SaveIconID","BackupIconID","ImportBackupDataIconID"];return{initInterfaceData:async function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};try{if(0===e.documentsGroup.length)return void e.updateAppCompOpenConfig({errorPageAppOpen:!0,toolboxAppOpen:!1,markdownAppOpen:!1,processAppOpen:!1});const o=e.getCurrentDocumentObj();return null===o?{state:!1,error:"not find data"}:(t(o.markdownData,n),e.processDrawObj.store.loadSnapshot(o.processData),{state:!0})}catch(o){return{state:!1,error:o}}},initAppIconState:()=>{0===e.documentsGroup.length?n.forEach((e=>{["AddIconID","ImportBackupDataIconID"].includes(e)||cr.setElementDisabled(e,!0)})):n.forEach((e=>{cr.setElementDisabled(e,!1)}))},buttonGroupID:n}},Lz=nr((()=>{const{commonStore:e}=cR();return(0,Rc.jsx)("div",{className:"grid h-full place-content-center bg-white   ".concat(e.appCompOpenConfig.errorPageAppOpen?null:"hidden"),children:(0,Rc.jsxs)("div",{className:"text-center",children:[(0,Rc.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 768",className:"mx-auto h-56 w-auto text-black sm:h-64",children:(0,Rc.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,Rc.jsxs)("g",{fill:"#FF5678",children:[(0,Rc.jsx)("path",{d:"M555.886 337.572c-1.134-1.652-3.154-2.481-4.757-3.572.718 1.646.78 2.144.052 3.714-.562 1.211-.936 2.501-1.477 3.724-.371.837-.964 1.683-1.2 2.541-.277 1.006-.133 2.027-.504 3.021 4.379-1.183 8.27-3.952 12-6.523-.695-.1-2.532-.07-3.118-.578-.48-.415-.578-1.717-.996-2.327M661.291 322.8c1.91 1.52 1.91 1.52 1.976 4.105-1.607-.978-2.14-2.177-1.976-4.106m-92.56 6.786c-.882.072-1.096-2.48-1.291-3.227l.87-.122c.398.428 1.967 3.221.422 3.349m132.775 26.117c1.25-6.927 2.775-13.812 4.804-20.555a160.721 160.721 0 0 1 3.312-9.807c1.044-2.799 3.03-5.836 3.377-8.771-3.16 2.855-5.734 6.43-8.459 9.699-2.604 3.128-5.337 6.196-7.796 9.439-1.001 1.32-1.905 2.837-1.969 4.533-.068 1.86 1 2.997 1.764 4.563.802 1.64 1.342 3.657 1.737 5.429.434 1.937-.248 2.883-.912 4.638-1.422-.7-2.647-1.09-3.685-2.358-1.103-1.347-2.035-2.86-3.077-4.256-2.271-3.04-4.567-6.062-6.826-9.112-4.53-6.12-8.498-12.295-11.896-19.104-3.44-6.893-6.522-13.972-9.876-20.91-.707-1.46-.997-3.061-2.88-3.058-1.393.002-2.575.867-3.884 1.208a4.424 4.424 0 0 1-.99.172c.01.333-.044.655-.164.965-.344.418-.468.25-.947.225-.555-.03-.955-.378-1.56-.337-.841.057-1.658.612-2.449.863v-1.92c-2.511 1.289-8.591 5.604-9.913.713-.115.89.125 2.495-.75 3.066-.578.378-1.31-.016-1.937.064-.782.101-1.48.665-2.206.935-.049-1.316-1.054-1.168-2.03-1.345-1.262-.23-2.367-.93-3.669-.706-1.294.224-2.232.804-3.534.107-.874-.47-1.689-1.126-2.57-1.621-.894-.503-1.052-.852-1.436-1.744-.424-.989-.347-.765-1.356-.485-2.16.6-3-2.004-3.38-3.77-.928-4.318.136-9.034 2.984-12.403 3.664-4.335 7.545-8.587 12.334-11.719 4.426-2.893 9.13-6.472 14.295-7.874-4.124-9.23-10.002-17.827-15.24-26.466-1.5.344-2.4 1.158-4.002.903-1.264-.2-1.207-.103-1.675 1.212-.419 1.175-.648 1.344-1.77 1.704-1.164.374-.238-.352-1.105.565-.387.407-.598.851-1.079 1.187-1.76 1.233-4.063.523-5.974 1.292-1.32.531-.67 1.207-1.346 2.12-.716.967-1.93.463-2.922.307-2.067-.325-2.69.372-3.126 2.317-.324 1.441-.539 2.19-2.086 2.493-.876.172-2.239-.527-2.8.038-.216.216-.125.823-.225 1.102-.18.507-.498.922-.86 1.317-.735.8-1.739 1.46-2.738 1.878-.95.398-1.952.175-2.853.523-1.42.545-1.075 2.054-1.027 3.25-.805-.194-.992-.17-1.473-.776-.22-.278-.1-.744-.533-.862-.374-.101-2.39 1.14-2.676 1.495-.836 1.036.011 2.5-.204 3.707-.211 1.2-1.188 2.105-1.96 2.989-.251-.73-.504-1.458-.756-2.187-.376.488-.9.836-1.061 1.448-.085.317.174.744.03 1.066-.407.904-.813.332-1.572.363-.667.027-2.462.537-2.146 1.581.215.703 1.603.54 1.437 1.496-.2 1.162-1.707.401-2.318.644-.8.315-.483.997-.756 1.69-.48 1.217-1.448 1.326-2.452 1.922-.992.59-1.377 1.305-1.832 2.317-.567 1.264-.508.923-1.73.812-.752-.069-1.146.084-1.444.779-.244.566.172 1.264-.04 1.785-.263.643-1.624 1.372-2.095 2.025-1.277 1.775-1.827 3.966-2.87 5.87a20.488 20.488 0 0 1-1.571 2.428c-.775 1.032-1.257.836-2.302 1.39-1.693.897-1.199 3.267-1.385 4.832-.097.808-.297 1.553-.873 2.163-.344.364-1.563.78-1.322 1.506.29.879 1.265-.06 1.08 1.31-.146 1.091-1.39 1.987-1.666 3.08-.191.752.06 1.468-.135 2.227-.213.827-.861 1.455-1.172 2.234-.314.783.18 1.77-.089 2.365-.313.692-1.46.514-1.768 1.413-.337.982.451 2.527.593 3.53.09.642.43 1.34-.113 1.869-.462.45-1.556.368-1.084 1.483.218.516 1.038.408 1.127 1.187.069.6-.624 1.51-.998 1.915-1 1.08-2.892 1.98-1.53 3.355.235.237.524.125.745.447.26.374.295 1.045.442 1.473.354 1.027.86 1.993 1.489 2.88 2.396 3.376 6.363 4.966 9.002 8.031 3.22-3.204 6.514-6.33 9.545-9.714 2.57-2.871 5.058-5.843 8-8.354 1.52-1.296 3.258-2.342 4.521-3.913 1.207-1.5 1.651-3.387 2.57-5.054 1.804-3.271 4.403-6.019 6.337-9.209 3.791 2.471 2.207 8.78 1.115 12.319-.667 2.164-1.611 4.237-2.72 6.212-.938 1.672-2.258 3.333-2.708 5.23-.368 1.539.17 2.833 1.061 4.085 1.278 1.793 2.773 3.472 4.12 5.22l9.828 12.762c1.187-1.713 3.145-.592 4.721-.262 2.31.483 4.695.31 7.033.532 2.452.231 4.933.639 7.363 1.033 2.176.352.73 1.36 1.783 2.561 2.225-4.012 6.48-1.475 9.955-1.121 2.18.223 4.495.106 6.634.379 2.16.275 4.293 1.012 6.529 1.227 4.215.404 8.026 1.858 12.163 2.613 2.186.4 4.39.681 6.574 1.083.775.142 2.143.214 2.577 1.012.513.948-.53 2.948-.813 3.801-.423 1.274-.72 3.226-1.576 4.287-.663.82-.833.32-1.687.285-.988-.042-.586.17-1.269.934-.842.945-2.025.951-3.197 1.057-.534.048-1.601-.049-2.015.323-.583.522-.079.557-.124 1.357-.077 1.4-2.011 2.44-3.14 2.99-.725.352-1.503.64-2.32.582-.514-.037-1.125-.532-1.641-.326-.732.29-.676 1.672-1.1 2.256-.783 1.081-1.836.279-2.865.826-1.232.654-1.931 2.208-3.102 2.978-2.32 1.526-4.99 1.694-6.145-1.168-.463.958-1.553 2.444-1.144 3.409.363.855 1.51 1.487 2.283 1.907 2.265 1.23 4.485 2.457 6.657 3.858 4.991 3.22 9.79 6.746 15.127 9.4 5.253 2.612 10.774 5.427 16.572 6.57 5.954 1.17 12.04.43 17.572-2.036-.825-1.648-.951-2.71-1.002-4.59a394.968 394.968 0 0 1-.108-5.333c-.043-3.55-.024-7.1.1-10.647a148.045 148.045 0 0 1 2.29-21.15M764.413 350.616c-.536-1.91-1.145-3.9-1.265-5.884-.087-1.432.444-3.56-.41-4.807-.36-.53-1.01-.715-1.22-1.352-.168-.512.09-1.537.021-2.1-.177-1.465-.758-2.832-1.295-4.195-1.217-3.092-1.252-6.337-2.27-9.47-.555-1.717-1.6-3.183-2.21-4.872-.558-1.537-.84-3.16-1.016-4.78-.188-1.727-.185-3.44-.6-5.137-.388-1.584-.87-3.134-1.22-4.728-.834-3.793-1.801-7.507-3.13-11.163-.502-1.381-.867-3.697-2.092-4.625-.89-.674-2.06-.5-3.095-.43-1.177.08-2.143.135-2.926 1.117-1 1.255-1.638 2.62-2.796 3.798-1.18 1.2-2.654 2.235-3.716 3.537-.834 1.023-.356 1.371.54 2.244-1.16.15-2.114-.17-2.958.709-.86.893-1.512 2.376-2.058 3.473-1.23 2.471-1.37 4.694-1.736 7.37l-.98-1.526c-.414 1.126-1.015 2.296-2.208 2.759-1.461.569-1.417.384-1.421 2.022-.008 2.354-1.959 3.835-3.192 5.616-.692 1-1.36 2.138-1.813 3.262-.582 1.438-.213 2.382-.074 3.854.21 2.202-1.914 3.888-3.192 5.45-.4.486-.624.725-.848 1.32-.165.441.064.72-.268 1.19-.6.852-1.856.624-2.338 1.67-.453.978.175 1.964.273 2.932.158 1.546-.774 2.972-1.281 4.382-.553 1.532-.978 3.116-1.182 4.732a17.337 17.337 0 0 0-.131 2.81c.016.434.35 1.524.065 1.918-.368.51-1.174-.074-1.51.492-.691 1.162 1.887 1.533 2.39 1.713-.597.378-1.384.642-1.87 1.176-.642.707-.245 1.127-.51 1.92-.29.864-1.33 1.099-1.654 1.863-.333.784.316.952.654 1.603.826 1.587.084 3.964-.243 5.593-.131.654-.07 2.355-.48 2.861-.26.323-.845.204-1.073.488-.48.594.025.833.22 1.516.249.863.207 1.78-.024 2.643-.219.816-.75 1.569-.899 2.4-.162.911.29 1.22.602 2.067.693 1.886.206 4.219-.03 6.14-.276 2.236.508 4.348-.076 6.418L704 389.8c.198.986.395 1.971.591 2.957l.292 1.457c-.122.631.09.881.635.75 1.07.308 2.719-1.376 3.602-1.874 2.65-1.496 5.51-2.57 8.261-3.864 2.86-1.343 5.252-3.157 7.871-4.87 2.698-1.763 5.544-3.274 8.174-5.14 11.377-8.074 23.711-14.884 35.574-22.229-3.323.376-3.927-4.027-4.587-6.37M778.485 258.764c1.78.518 1.372 2.026.696 3.336-.684-.647-1.892-1.406-2.213-2.33-.397-1.148.493-1.304 1.517-1.006m49.769 44.611c-.095.458-.199 2.327-.55 2.617-.319.262-1.958-.107-2.392-.13-1.375-.072-2.425.207-3.727.528-2.238.554-2.642-.838-2.652-2.922-1.72 3.396-4.586 5.096-8.247 5.75-1.636.294-3.39.644-5.049.715-1.238.053-2.633-.056-3.858-.269-.777-.135-1.484-.613-2.217-.75-1.604-.3-.16.856-1.318 1.163-.297.078-1.42-.407-1.86-.433-.71-.043-1.423.075-2.132.038-1.608-.083-2.133-.978-3.407-1.668-.668-.362-1.124-.31-1.84-.209-.786.11-.189.372-1.107.21-.296-.053-.832-.385-1.074-.494-1.74-.781-3.1-1.476-4.44-2.83-.982-.99-2.22-1.657-3.2-2.64-.352-.353-.544-.786-.856-1.153-.405-.474-.433-.355-.94-.708-.58-.403-1.03-.63-1.383-1.268-.604-1.088-.58-2.592-.675-3.8-.322-4.115.416-7.781 2.371-11.41 2.122-3.94 3.883-8.106 6.368-11.841 2.248-3.379 5.068-6.55 7.836-9.516.782-.838 1.634-1.815 2.582-2.47.617-.423 1.42-.613 2.002-1.077 1.382-1.105.71-3.131.71-4.667.436.772 1.12 1.927 2.165 1.673.687-.167.71-.94 1.207-1.243.383-.233.834-.116 1.259-.16-1.672-8.202-3.824-16.479-6.516-24.411-7.357 7.22-14.72 14.491-21.863 21.926-3.685 3.836-7.088 7.929-10.756 11.78-3.856 4.047-7.796 8.012-11.695 12.017 1.06 1.025 2.274 1.72 2.997 3.042.666 1.214 1.43 2.134 2.345 3.174 2.07 2.349 3.059 5.847 4.338 8.675.253.556.321.723.254 1.226-.04.307-.357.578-.363.952-.008.474.217.79.5 1.15.263.337 1.04.72 1.105 1.16.077.525-.462.876-.641 1.367-.791 2.161 1.806 3.69 2.683 5.386.483.93.706 1.872.086 2.803-.507.761-1.626 1.056-1.032 2.215.37.726 1.405.328 1.252 1.337-.083.54-1.127 1.047-.15 1.64.79.48 1.73-.377 1.361 1.107-.164.663-1.052 1.33-.799 2.073.248.722 1.54.84 2.055 1.405.647.714.94 1.907 1.068 2.835.438 3.164 1.166 6.035 1.892 9.143.486 2.082-.766 2.119-2.616 2.133 1.247 1.748 2.474 3.502 3.805 5.188 1.303 1.65 1.64 4.21 2.25 6.206.734 2.399 1.45 4.805 2.163 7.207.325 1.096.55 2.166.115 3.267-.5 1.268-.492 1.273-.261 2.586 5.77-3.308 11.216-6.987 16.69-10.767 2.624-1.812 5.253-3.619 7.848-5.473 2.043-1.46 4.056-3.043 5.37-5.221 3.05-5.058 7.537-9.024 11.616-13.29 2.074-2.17 4.006-4.865 6.541-6.513 2.452-1.595 5.054-3.006 7.528-4.591l-2.746-3.77"}),(0,Rc.jsx)("path",{d:"M645.674 371.323c2.35-1.12 4.518-2.626 6.804-3.872 1.982-1.082 3.785-1.604 5.489-3.102.713-.628 1.382-.864 2.219-1.278 1.062-.526 1.87-1.459 2.814-2.157-2.408-.937-4.769-2.387-7.43-2.419-1.18-.013-2.268.407-3.45.188-1.2-.222-2.136-.838-3.092-1.547-1.732-1.285-2.5-1.095-4.378-.032-.448.254-1.06.821-1.606.805-.883-.027-.75-.57-1.132-1.176-.348-.55.095-.613-.542-.63-.385-.01-.558.52-.986.603-.813.158-2.347-.636-3.16-.784-1.369-.247-2.42.049-3.774.134-1.405.09-2.773-.236-4.09-.685-1.202-.409-2.357-.985-3.572-1.352-1.582-.477-1.903.142-3.366.48-2.225.51-4.384-2.693-6.422-1 2.989 4.354 7.08 8.029 10.858 11.73 2.033 1.988 4.09 3.936 6.321 5.706 1.005.8 2.032 1.573 3.055 2.35.464.355.93.707 1.393 1.065.83.641.754.833 1.542.464 1.06-.496 1.88-1.546 3.042-2.05 1.147-.497 2.332-.903 3.463-1.441M647.158 275.908c.085 1.959 1.301 3.564-.416 5.222-.05-.972-.101-1.946-.153-2.918-.053-1.013-.563-2.114.569-2.304m-1.915-8.537c-.29.851-.66 1.466-1.471 1.9-1.16.62-2.767-.384-3.575.498-.812.888-.717 2.974-1.777 3.7-.34.232-.715.07-1.118.373-.347.26-.361.878-.714 1.15-.579.446-1.072-.01-1.618.25-.613.292-.713.99-.876 1.601-.16.6-.156 1.375-.596 1.844-.537.571-1.779.976-2.433 1.382-2.356 1.465-4.71 2.932-7.065 4.399.701.71 2.25 1.518 2.43 2.565.122.714-.373.793.22 1.355.269.256 1.22.528 1.544.69 1.334.67 2.688 1.26 4.15 1.577 1.737.378 3.477.2 5.208.614 1.818.434 3.609.77 5.486.727 1.603-.036 3.116-.482 4.703-.62 2.975-.256 6.833.012 9.259-2.085-.241-2.154-.48-3.791-1.28-5.842a438.06 438.06 0 0 0-2.246-5.633c-1.539-3.78-3.105-7.426-5.06-10.998-.4 2.503-1.355-.793-2.298-.818-.694-.018-.7.87-.873 1.37M810 294.557c1.31.325 2.362.49 3.589 1.055.908.417 1.254.638 2.045-.075.43-.386.51-.962 1.062-1.25.545-.286 1.287-.193 1.87-.222 1.478-.079 2.956-.11 4.434-.165-1.7-1.632-3.399-3.266-5.099-4.9-.264.453-.972 2.123-1.492 2.23-.156.032-.642-.49-.904-.51-.28-.023-.481.104-.726.212-.628.279-.909.924-1.61 1.096-.689.17-1.47-.15-2.167-.166-.191.658-.682 1.846-1.002 2.695M807.92 273.36c.296-1.223-.34-2.485-.146-3.728l-.422-.632c-.328.733-.538 1.455-.984 2.135-.37.567-.952 1.043-1.203 1.69-.456 1.171.117 2.136.69 3.175.768-.858 1.782-1.47 2.065-2.64M797.813 276c-1.032.024-.639.505-.779 1.275-.089.486-.328.919-.593 1.328-.53.822-1.803 1.65-1.076 2.762.618.945.652-.235 1.167.23.54.484-3.026 4.123-3.56 4.322-.29.107-.607-.222-.881.01-.247.21.088 2.305.077 2.732-.027 1.121-.101 2.328.81 3.13 1.06.93 2.805.965 4.06 1.494.86.362 1.664.88 2.57 1.124.955.256 1.778-.276 2.6-.153.62.092 1.828 1.097 2.454 1.396.84.402 1.003.464 1.822.152.451-.172 1.332-.505 1.638-.896.461-.593.108-.584.17-1.391.11-1.472 1.65-1.301 2.708-1.717-2.093-.627-3.25-2.875-4.28-4.71-.454-.81-1.377-1.777-1.623-2.683-.306-1.136.54-1.869 1.05-2.817-.694.282-3.414 1.532-2.104.055.407-.459 2.932-1.208 1.904-2.404-.62-.719-1.423.75-2.139.607-.83-.166-1.814-1.556-2.507-2.015-.836-.554-2.47-1.853-3.488-1.83M546.76 318.047c.05-3.504.62-6.99 1.636-10.34 2.088-6.883 6.514-12.915 7.938-20.014.685-3.417.464-6.882 1.122-10.305.692-3.608.664-7.303.794-10.963.13-3.605.261-7.213.215-10.822-.015-1.295-.38-3.094-.051-4.346.275-1.05.695-.657 1.586-1.036-.62-.38-1.89-.57-2.025-1.363-.09-.544.44-1.14.413-1.74-.02-.492-.258-.988-.4-1.448-.782-2.525-1.893-6.411-.454-8.837-.866-.146-1.216-.415-2.017-.049-.866.395-1.726 1.272-2.476 1.868-1.491 1.184-2.974 2.385-4.313 3.743-2.522 2.56-4.593 5.508-6.79 8.34-2.19 2.821-4.456 5.615-6.708 8.386-1.752 2.154-4.53 5.433-6.97 2.532-.732.974-1.198 1.954-2.396 2.426-1.463.577-2.089 1.175-3.144 2.413-.212.25-.845 1.312-1.119 1.412-.555.202-.237-.175-.672-.456-.684-.44-1.009-.74-1.253.479-.11.54.18 1.05-.083 1.587-.245.499-1.008.995-1.47 1.267-1.074.631-2.294.57-3.445.957-1.9.637-3.113 3.52-5.199 2.14-.757-.503-1.357-1.285-2.346-.752-.736.398-.862 1.381-1.923.992-.557-.203-1.012-.933-1.658-1.17-.456-.166-.945-.233-1.424-.29-1.061-.128-2.139-.083-3.167-.413-2.238-.718-3.776-2.703-5.3-4.376-1.137-1.249-.786-2.03-.47-3.617.27-1.35.55-2.697.882-4.032.658-2.65 1.508-5.267 2.782-7.69 1.48-2.82 3.642-5.184 5.617-7.656 4.111-5.14 7.99-10.56 12.45-15.403.838-.91 2.273-1.897 2.12-3.283-.168-1.522-1.895-.782-2.955-.518-2.844.708-5.46 2.084-8.172 3.15-1.5.59-3.509 1.74-5.116.984-1.516-.713-3.917-2.626-3.069-4.378.65-1.345 1.355-2.32 1.7-3.84.309-1.356.498-2.741.782-4.104.67-3.235 1.529-6.428 2.492-9.588 1.837-6.03 4.08-11.926 6.102-17.894-8.295.747-15.854 3.16-23.65 5.947.37.76 1.062 1.847.783 2.736-.343 1.094-1.82.727-2.185 1.48-.433.889.88 1.4.49 2.54-.327.958-1.266 2.065-1.81 2.926 2.55 1.645 1.559-1.773 3.349-2.006.496 2.72-.648 4-1.707 6.288-.942 2.039 1.223 1.844 1.668 3.369-1.246.207-2.1-.366-2.644 1.104-.233.625.117 2.913-.629 2.977-.55.047-.376-.955-.82-1.049-.553-.116-1.97 1.879-2.317 2.252 1.509 0 2.333.16 3.762.733a96.384 96.384 0 0 1-2.823 2.66c.88.364 2.377.446 2.829 1.427.418.912-.217 2.56-.306 3.506.376-.566.925-1.904 1.508-2.268.767-.48.988-.005.94 1.045-.088 1.93-2.606 1.806-2.958 3.345-.35 1.522 1.83.463 1.886 1.975.032.862-.974 1.6-.476 2.512-1.115-.625-1.252-.994-1.857-2.213-.425 1.543-1.345 3.986-.84 5.588.413 1.308 1.276.985.287 2.252-.367.47-.874.838-.887 1.478-.029 1.477 2.083 2.622.443 3.937-.637.51-1.325.567-1.649 1.454-.28.767.007 1.79-.221 2.625-.452 1.658-1.655 2.89-2.858 4.048-1.074 1.036-2.054 2.236-3.229 3.136-.637.49-.872.776-1.304 1.413-.183.272.042.527-.205.78-.29.293-1.026.263-1.415.338-1.282.25-2.84.767-3.267 2.193-1.564-1.184-3.157.255-4.673.724-.756.233-1.448.29-2.162-.107-1.14-.635-1.086-.729-2.451-.53-3.804.548-6.94-3.415-9.059-6.08-1.54-1.941-2.39-4.355-2.791-6.779-.474-2.846-.966-5.672-1.227-8.55-.546-6.032-.34-11.97-.124-18.013-7.03 3.707-13.616 8.536-19.913 13.364-6.278 4.814-11.65 10.838-17.294 16.39 1.435.092 2.82.6 4.26.63.709.014 1.405-.071 2.056-.367.358-.164.685-.373.982-.63.26-.523.624-.613 1.09-.272 1.414-.116 2.72-.409 4.138-.613 1.794-.259 3.702.282 5.464.587 3.295.57 6.79.191 9.973 1.214 2.784.896 5.685 2.177 8.366 3.336 2.58 1.117 4.846 3.558 7.032 5.304 1.26 1.005 2.65 1.435 3.978 2.258 1.284.796 2.259 2.53 3.166 3.704 2.191 2.834 4.637 5.452 6.831 8.271.98 1.26 1.866 2.627 2.422 4.132.286.768.31 1.63.585 2.38.245.67.709 1.057 1.116 1.626 1.345-3.62 2.647-7.254 4.038-10.855.535-1.384 2.926-8.03 4.796-5.48 1.61 2.193.698 6.697.195 9.145-.673 3.28-1.42 6.548-2.154 9.816-1.458 6.484-2.794 13.028-4.648 19.41-.12.414-.36.914-.39 1.343-.053.743-.31.321.199.84.26.264.879.185 1.125.501.45.577.296 2.585.263 3.287-.062 1.333-.807 1.918-1.156 3.105-.303 1.037.214 2.103.224 3.149.025 2.59-1.32 5.409-1.788 7.975-.298 1.627.64 4.205-1.645 4.517.568.958-.104 1.366-.604 2.072-.62.878-.66 1.763-1.053 2.775-.347.892-.884 1.506-.98 2.392-.086.805.272 1.576-.005 2.393-.325.964-.94 1.075-1.752 1.495-.785.406-.555-.068-.828.723-.12.348.04 1.15-.035 1.553-.355 1.897-1.866 3.166-3.127 4.494-.471.498-1.083 1.653-1.661 1.96-.846.448-2.113-.331-2.889.084-.712.38-1.457 3.42-1.72 4.159-.556 1.57-1.084 3.154-1.614 4.733-1.944 5.787-3.856 11.585-5.778 17.379.919-.023 2.453-1.035 3.343-.62 1.02.474.363 1.874.746 2.636.274.546 1.87.463 2.62.504 1.247.068 1.815-.291 2.937-.617 1.94-.563 4.377-.366 6.396-.585 4.47-.486 9.069-.622 13.464-1.603 4.209-.938 8.242-2.498 12.373-3.711-1.928-1.014-2.287-3.514-2.84-5.416-.305-1.053-.419-1.886-1.011-2.841-.686-1.107-1.279-2.23-1.713-3.464-1.686-4.79-1.763-10.729-1.193-15.722 1.166-10.203 4.8-19.756 10.402-28.318 2.68-4.094 5.777-7.87 9.206-11.354 3.5-3.557 7.094-7.45 11.202-10.315 1.86-1.3 4.033-1.756 5.66-3.303 1.25-1.186 3.25-1.449 4.782-2.287 2.138-1.171 3.956-2.092 6.361-2.585 1.771-.364 3.76-1.267 5.605-1.037 1.262.157.79.747 1.532 1.328.98.768.625-.315 1.35-.586.613-.23.999.355 1.51.54.232.084 1.27.069 1.216.036.562.34.468 1.542.788 2.11.345.613.855 1.028 1.07 1.723.288.929.092 1.633-.3 2.423-.43.872-1.08 1.3-.04 2.147-2.597 1.709-.993 5.142-2.948 7.212-.664.703-2.158 1.685-2.136 2.778.025 1.178 2.14 1.644 1.052 2.82-.991 1.07-3.127.564-4.274 1.516-1.155.96-.771 2.612-.875 3.933-.08 1.011-1.064 2.231-.655 3.207.268.64.734.545.754 1.244.018.566-.452 1.319-.606 1.866l-1.299-.567c-.206.762-.56 1.5-.655 2.29-.113.926.265 1.373.459 2.199.194.829-.253 2.268-.335 3.258-.095 1.135-.207 2.325-1.013 3.205-.478.522-1.134.603-1.649 1.007-.48.376-.626.881-.954 1.38.745-.22 1.49-.44 2.237-.658-.302 1.424-.838 2.001-1.788 3.12l-.469-2.466c-.27.863-.76 1.55-.712 2.48.04.795.397 1.558.4 2.378.007 1.598-1.172 2.645-.689 4.182.583 1.858.704 2.834.127 4.737-.505 1.667-1.212 3.327-1.336 5.083-.138 1.981.755 3.687.57 5.7-.085.933-.474 1.591.564 1.694.927.093 1.933-.673 2.734-1.055 3.956-1.884 7.898-3.798 11.844-5.703-.735-1.024-.555-1.056-.095-2.316l1.034-2.849c.73-2.018 1.465-4.034 2.22-6.044 1.402-3.74 3.28-7.437 3.963-11.398.618-3.576.299-7.141.351-10.741M305.303 605.62l-3.917-2.47 2.283-1.743c.825-.629 1.197-1.215 1.684.022.512 1.3-.1 2.843-.05 4.192m-1.66-9.49c1.838 2.149-1.596 2.77-2.92 3.04.214-1.034.979-5.31 2.92-3.04m40.276-7.558c-.595-1.826-1.561-6.872-4.318-6.56-.66.076-1.255.734-2.037.79-.668.047-1.324-.131-1.985-.187-1.449-.122-3.007-.04-4.393.422-1.613.538-2.803 1.303-4.558 1.416-1.253.082-2.57-.023-3.793.332-2.096.606-1.954 2.465-1.66 4.31-.355-.403-.758-.71-1.015-1.183-.29-.534-.291-1.134-.743-1.6-.894-.927-1.923-.488-3.028-.408-1.25.09-2.853-.746-4.053-.277-.533.208-.848.805-1.403 1.053-.493.22-1.036.259-1.563.321-1.18.138-2.388.531-3.456.51-1.515-.032-2.794-.13-4.297.277-1.402.378-2.742.954-4.142 1.338-1.555.426-3.162.468-4.74.777-3.147.619-6.247 2.031-9.464 2.213-1.685.095-3.312.093-4.99.359-.518.081-1.686.055-2.108.345-.47.323-.792 1.665-1.059 2.216-2.884 5.954-4.976 12.29-7.278 18.484-2.393 6.442-4.774 12.89-7.181 19.327-1.132 3.026-2.577 6.045-3.515 9.132-.867 2.856 2.504 4.866 4.296 6.663 4.388 4.398 8.825 8.745 13.808 12.478 5.017 3.76 10.69 6.289 16.4 8.809 5.86 2.586 12.015 4.063 18.345 4.956 3.252.459 6.524.772 9.797 1.035 3.28.265 6.062-.189 9.297-.604-.32-.747-1.362-2.056-1.24-2.886.036-.233.514-.621.627-.895.154-.374.139-.77.148-1.164.045-1.883-.692-3.709 1.722-4.38l.241 3.084c1.167-1.755.43-3.639-.277-5.407l-2.46 2.052c.169-.5 1.542-3.668 1.161-3.967-.378-.296-1.061.495-1.468.113-.33-.311.038-1.047-.066-1.444-.167-.639-.86-1.13-.853-1.83.011-.931 1.206-1.651 1.77-2.251.828-.879 1.166-1.508 1.162-2.71-.005-1.66.773-1.568 1.984-2.676 1.959-1.79 2.08-4.255 1.07-6.613l2.6-.2c-.803-2.022-1.63-4.04-2.417-6.068-.779-2.005.284-3.057.81-4.927 1.188 1.178 2.378 2.355 3.568 3.533.337-3.807 1.346-7.647.869-11.485-.148-1.19-.37-1.119.176-2.008.393-.638.948-1.135 1.293-1.829.677-1.364.88-2.888 1.017-4.385.127-1.391.066-2.92.46-4.27.298-1.018 1.274-1.59 1.509-2.72.407-1.961-2.722-5.383-.902-6.836.928-.74 2.082-.032 2.752-1.242.575-1.038.798-2.47 1.134-3.595.537-1.792.79-3.185.142-4.987-.57-1.586-1.173-3.147-1.696-4.75M372.653 496.758c-.458-1.047-1.173-1.235-2.256-1.444-4.66-.896-9.361-.901-14.064-1.333-1.336-.122-2.667-.311-3.971-.636-1.092-.274-2.123-.882-3.195-1.138-2.136-.51-4.255.904-6.39.801-1.093-.053-2.016-.704-3.057-.977-.853-.224-1.629-.049-2.499.007-1.685.108-3.386.022-5.062-.152a38.422 38.422 0 0 1-6.129-1.124c-1.326-.361-3.335-.747-4.317-1.762-2.238 3.433-4.12 7.027-5.74 10.783-1.578 3.653-3.674 7.108-5.598 10.59-3.918 7.099-6.724 14.72-9.375 22.353 1.461-.67 2.52-1.355 3.618.162 1.035 1.433 2.263.964 3.938 1.235 2.688.434 2.979 3.409 3.568 5.631.868-1.082 1.738-2.164 2.608-3.245.697.776 1.818 1.18 2.387 2.073.364.572.159 1.102.375 1.647.2.507.712.712 1.097 1.07 2.662-3.402 5.161 3 5.482 5.19l1-2.545c.473.513 1.118.951 1.488 1.55.231.373.22 1.04.466 1.35.367.462.608.258 1.135.386.849.205.685.157 1.176.811 1.482 1.976 3.69 3.497 4.94 5.624 1.568 2.673 3.706 5.428 4.649 8.383.54 1.693.776 3.281 1.658 4.856.463.83 1.265 1.54 1.683 2.349.521 1.007-.397 1.422-.293 2.323.102.907 1.608 1.79 2.356 2.071 1.176.443 2.57.304 3.81.34 1.597.046 3.49-.012 5.04-.472 1.351-.402 1.247-1.096 1.617-2.286.439-1.412 1.208-2.765 1.82-4.108.91-2 1.351-3.332-1.374-3.931 1.565-.262 4.121-.722 3.623-2.819-.239-1.006-1.146-1.683-1.007-2.794.14-1.132 1.015-1.514 1.851-2.102 1.58-1.113 2.718-3.191 3.291-4.991.319-1.001.406-1.781.07-2.785-.531-1.583-.81-2.877-.943-4.566l2.163.23c-.158-.64-.182-1.147-.473-1.735-.097-.19-.597-.34-.568-.61.049-.47.684-.46.96-.788.717-.844.925-2.818 1.222-3.842.282-.973.431-2.154.961-3.027.986-1.627 2.204.668 1.958-1.641-.124-1.17-.215-2.904-1.673-3.074-1.735-.202-2.235.482-2.072-1.599.113-1.472-.283-4.632 1.296-5.422.752-.377 1.991-.332 2.83-.402 1.005-.085 1.795.447 2.72.416 1.55-.053 1.46-2.263 1.639-3.386.786-4.996 1.182-10.08.695-15.126-.192-1.992-.316-4.498-1.134-6.369"}),(0,Rc.jsx)("path",{d:"M413.045 299.57c-.102-3.646-.102-3.646 1.921-5.028.536 2.32-.795 3.485-1.92 5.028m36.757 9.305c.436-.869 2.236-.615 2.998-.604-.356.735-1.593 2.525-1.97 3.89-.418-.79-1.455-2.439-1.028-3.286m-4.725 25.824c.79-.626.606-.595.983-1.351.292-.586.223-.893.849-1.283 1.268-.786 1.464-.782 1.79-2.46.284-1.462.167-3.547.808-4.9.46-.97 1.978-1.06 2.005-2.277.05-2.366-4.228-3.572-3.412-5.959.244-.71 1.015-.931 1.342-1.542.2-.373.063-.86.13-1.259.146-.89.392-1.085 1.214-1.319-.09.408-.096.77.045 1.042.54 1.045 2.691-.207 3.18-.928 1.011-1.489.077-3.96-.255-5.512-.452-2.11-.384-3.716-.216-5.832l2.752 3.02c.5-1.523.587-2.343 1.984-3.295 1.296-.883 1.799-1.468 2.63-2.778.316-.498.53-1.05 1.156-1.226.613-.17 1.622.49 2.136.235.32-.16.664-1.81.772-2.105.344-.935.687-1.872 1.029-2.807-1.962-4.954-3.565-10.207-6.497-14.713-2.686-4.128-6.575-7.465-10.505-10.396-1.96-1.463-3.944-2.952-6.004-4.277-2.067-1.332-4.3-1.812-6.505-2.806-2.21-.996-4.751-2.028-7.205-2.152-1.248-.063-2.451.229-3.701.064-1.383-.182-2.711-.65-4.084-.883-.003 7.18-2.617 14.464-5.062 21.144-1.112 3.04-2.707 5.845-3.875 8.862-1.177 3.035-2.333 6.063-3.612 9.058-2.635 6.17-5.04 12.607-8.437 18.41-.3.515-.643.882-.463 1.338.052.13.483.392.595.507.344.353.623.768.86 1.198.557 1.014.815 2.155 1.225 3.228.944 2.455 2.627 4.864 3.928 7.163 1.488 2.627 3.479 4.923 5.67 7 1.031.979 2.556 1.879 3.175 3.175.485 1.016.505 2.21.849 3.272l.36-2.548c.9 1.912 3.222 2.09 4.901 3.042 2.126 1.206 3.975 2.694 6.243 3.669 2.285.983 4.666 1.774 7.129 2.177 1.226.199 2.508.348 3.752.294 1.273-.056 2.187-.672 3.339-1.125-3.617-3.117-2.3-8.524-.237-12.118l1.904 4.19c.418-.994 1.849-1.931 1.212-3.098-.385-.706-.885-.524-.996-1.34-.086-.622.331-1.472.635-2.001.273.74.384 1.417.484 2.202M434.538 357.951c-.813-1.794-4.16-2.21-5.84-2.554-2.776-.57-5.435-2.21-7.93-3.516-2.39-1.251-4.411-2.419-6.346-4.283-.903-.869-1.652-1.055-2.766-1.554-1.07-.479-1.799-1.229-2.572-2.087-1.617-1.793-3.728-3.152-4.955-5.258-1.243-2.139-2.966-3.505-4.493-5.43-1.786-2.254-3.055-4.861-4.609-7.269-2.786 3.001-3.54 7.684-5.23 11.326-2.105 4.538-4.118 9.12-6.095 13.716-3.544 8.245-6.988 16.541-10.074 24.97-.113.31-.72 1.34-.616 1.673.103.325.888.681 1.136.946.652.692 1.062 1.54 1.586 2.331a31.203 31.203 0 0 0 3.242 4.059c2.674 2.854 5.788 5.528 9.193 7.465 1.48.843 3.588 2.512 5.282 2.367 2.179-.186 3.835-.333 6.025.161 2.135.481 3.996.9 6.196.841.858-.023 1.75-.137 2.57.2.588.243 1.006.914 1.67.944.833.037 1.333-.748 2.102-1.033.672-.248 1.392-.285 2.1-.25 1.036.05 3.452.985 4.28.184.897-.863.555-3.358 2.233-3.685 1.245-.244 3.767 2.034 4.785 2.672-.44-1.324-1.952-3.913-1.13-5.302.355-.603.85-.71 1.561-.566.828.168.898.76 1.556 1.129 3.57 2.005 3.253-7.531 3.134-8.991L427.81 381c0 .836.264 2.711-.298 3.052-.463.281-2.149 0-2.734 0 1.241 1.18 1.822 2.19-.05 3.198-1.276.687-2.856-.077-2.99-1.646-.143-1.643 2.422-1.894 1.95-3.517-.63-2.178-2.549 1.51-2.898 2.153-.512-1.89-.191-3.62 1.076-5.114 1.5-1.772 3.21-1.878 5.339-1.318.203-.895.662-1.512.908-2.328.294-.975-.154-.742-.583-1.588-.7-1.379.7-1.857.964-3.042.157-.707-.132-1.326-.477-1.917-.383-.658-1.127-1.112-.026-1.471.817-.267 1.782.516 2.553-.189.835-.764.528-2.36.982-3.31.682-1.437 1.442-.55 2.55-.147.833.303 1.083.274 1.183-.645.05-.46-.012-.918-.364-1.243-.575-.53-1.37-.152-2.019-.33-.881-.24-.924-.796-1.26-1.592 1.535-.136 1.558.353 2.95.941 1.106.468 2.32.399 3.434-.01-.773-.278-1.715-.348-2.406-.828-.878-.61-.678-1.324-1.056-2.158M530.243 305.993c1.519-2.807 2.893-5.681 4.26-8.564.83-1.751 2.622-4.172.494-5.615-1.435-.973-4.058-2.34-5.871-1.605-1.539.624-2.384 4.264-4.502 1.877-.386 1.101-1.7.921-2.487 1.517-.585.443-.532.892-.886 1.46-.367.589-.984.992-1.439 1.506a11.923 11.923 0 0 0-1.372-2.132c-.483.812-.37 1.306-.637 2.125-.153.473-.288.8-.782.983-1.133.424-2.246-.964-2.819-1.729.34 1.194.516 2.583-.3 3.624-.633.808-1.663.965-2.258 1.81-.667.945-.71 1.663-1.907 2.052-.23.075-1.033.28-1.28.275-.264-.005-.393-.46-.504-.457-.365.01-.986.46-1.32.615.745.938.453 1.33-.351 1.941-.975.741-.921.818-1.4 1.954-.228.54-.496 1.03-1.03 1.328-.536.3-1.25.044-1.696.355-.902.63-.8 2.26-1.512 3.057-.958 1.072-2.169 1.814-3.053 3.014-.894 1.21-1.608 2.54-2.292 3.875-1.326 2.59-3.099 5.005-3.278 7.95-.074 1.213.027 2.827-.53 3.951-.565 1.138-1.785 1.598-2.256 2.92-.398 1.12-.646 2.516-.787 3.693-.17 1.422.718 2.498.1 3.876-.59 1.313-.708 2.257-.822 3.708-.107 1.345-1.167 2.259-.516 3.408.633 1.115 1.283 1.933 1.462 3.277.194 1.457-.04 1.987-1.304 2.602.765 1.299 1.602 2.304 2.024 3.772.405 1.406.933 2.629 1.826 3.803 1.768 2.323 4.002 3.548 3.962 6.781l24.07-8.053c-3.095-.582-1.513-6.007-1.312-8.034.37-3.713.77-7.444 1.306-11.138.462-3.178 1.364-6.26 1.857-9.436.256-1.646.5-3.3.931-4.912.375-1.404 1.166-2.72 1.482-4.097.717-3.125 1.16-6.03 2.46-9.018 1.246-2.86 2.787-5.578 4.27-8.32M296.544 582.616c.63-.44 1.224-.355 1.96-.434 1.896-.206 3.537-.625 5.39-1.169 2.216-.65 4.575-1.026 6.851-1.42 2.181-.378 4.393-.288 6.524-.927 2.131-.64 3.839-1.24 6.08-1.327 2.454-.096 3.895-1.239 5.902.81 1.799-2.51 4.399-2.494 7.264-2.89 1.028-.143 2.224-.004 2.453-1.231.214-1.143-.695-2.656-1.191-3.583-2.635-4.922-4.86-10.126-8.367-14.514-3.435-4.302-7.885-9.069-12.74-11.756-2.631-1.456-5.669-2.258-8.457-3.354-3.024-1.188-5.983-2.537-8.967-3.821-1.552 1.662-1.68 3.672-2.456 5.779-.725 1.964-1.968 3.694-2.629 5.684-1.322 3.989-2.451 7.938-4.104 11.82-3.493 8.204-6.883 16.378-10.057 24.717 4.996-.776 9.864-1.264 14.91-1.579.988-.062.922-.306 1.634-.805M561 276.25c1.432.153 3.125.522 4.032 1.75 3.88-5.62 8.543-10.64 13.393-15.43 4.711-4.655 9.496-9.256 14.66-13.413 10.447-8.406 21.982-15.154 33.915-21.203-3.782-4.357-7.503-8.777-11.312-13.107-3.556-4.04-7.745-7.448-11.899-10.847-.334 3.372-.92 6.823-.89 10.214.03 3.417.498 6.818.544 10.234.04 2.776-.05 5.735-.764 8.43-.55 2.086-1.795 5.136-4.074 5.802-3.108.907-8.378-.632-10.703-2.816-2.003-1.882-3.062-4.687-4.653-6.888-1.09-1.505-2.233-2.148-4.067-1.55-2.745.895-5.389 2.524-7.966 3.814-2.914 1.459-5.818 2.938-8.734 4.395.2.143 1.387.752 1.437 1.022.016.084-.664 1.491-.685 1.767-.08 1.093.449 2.14.778 3.151.35 1.077.63 2.198.584 3.34-.049 1.214-.717 2.046-.957 3.158-.253 1.172.612 1.586 1.058 2.608.458 1.046.477 2.176.279 3.285-.162.903-.712 1.837-.705 2.749.005.49.423 1.037.275 1.542-.146.502-.741.786-1.086 1.12 1.573 1.034 1.866.883 1.243 2.571-.449 1.215-.288 2.414-.09 3.66.107.677.806 2.48.334 3.164-.431.627-1.85.137-2.503.114.24 1.263.582 1.131 1.175 2.178.387.682.349 1.567.309 2.327-.106 1.969-1.315 2.187-2.928 2.86M329.565 484.61c2.111.62 4.144 1.081 6.346 1.228 1.905.128 3.873.182 5.645.991.65.297 1.358 1.103 2.065 1.09.846-.013.582-.59 1.174-.965.566-.357.986.043 1.54.194.827.225 1.656.216 2.513.245 2.369.078 4.738.127 7.107.186 2.134.053 4.2.403 6.323.415 2.24.013 4.48 0 6.722 0-1.764-3.39-3.246-6.945-6-9.662-1.396-1.375-2.566-2.914-3.889-4.356-1.312-1.431-2.925-2.452-4.38-3.715-1.53-1.329-2.774-2.714-4.558-3.733-.736-.42-1.568-.975-2.373-1.223-.665-.205-1.322-.117-1.936-.48-.72-.426-1.366-1.307-2.063-1.812-.731-.528-1.506-.989-2.294-1.426-1.573-.874-3.211-1.627-4.737-2.587A309.874 309.874 0 0 0 324 485.541c1.711-1.362 3.528-1.528 5.565-.93M452.325 218.852c.439.52.93 1.04 1.223 1.66.337.714.14 1.403.345 2.085.253.84 1.225 1.216.634 2.272-.4.72-1.361.889-1.638 1.73-.497 1.511 1.23 2.9 1.914 4.09.408.708.69 1.46.53 2.28-.099.502-.536.874-.652 1.318-.198.778-.001-.012.09.78.094.819.428 1.68.49 2.542.065.896-.25 1.859-.083 2.727.363 1.904 1.741 4.54 2.846 6.14.957 1.388 1.747 1.88 3.32 1.259 8.4-3.317 10.096-12.415 11.797-20.187 1.009-4.607 1.578-9.05 1.631-13.76.055-4.93.436-9.863.073-14.788-1.39.399-3.129.541-4.092 1.737-.514.639-.526 1.441-1.017 2.021-.677.797-2.082 1.474-2.956 2.129l-13.206 9.877-1.843 1.38c-.633.472-.806.396-.704 1.083.08.54.957 1.224 1.298 1.625M511.299 246.308c-.79 1.031-2.29 1.265-3.252 2.215-.932.922-1.468 2.091-1.914 3.295-.594 1.597-1.232 2.75-1.273 4.48-.038 1.608-.548 3.083-.791 4.653-.163 1.063-.107 1.39.968 1.702 1.494.433 3.305.395 4.836.238 7.337-.75 13.125-6.433 17.578-11.749 5.105-6.092 9.161-12.918 13.549-19.507-2.102-1.186-4.378-2.072-6.384-3.423-1.887-1.272-3.573-2.87-5.43-4.212-.253.773-.253 1.656-.571 2.404-.362.852-.868.993-1.64 1.477-1.394.873-2.523 2.069-3.416 3.427-.82 1.249-1.225 2.842-2.214 3.946-.925 1.036-2.265 1.448-3.315 2.274-1.544 1.216-2.818 3.39-4.063 4.91-1.015 1.239-1.72 2.634-2.668 3.87M374.46 313.167c.284.771.875 1.852.444 2.67-.787 1.494-1.567-.71-2.341-1.067.182 1.283.322 2.56.654 3.813.222.844.52 1.702.361 2.59-.168.948-.946 1.48-.956 2.443-.009.896.462 1.815.598 2.699-1.474-.174-1.794-.365-2.688.748.366.113 1.275.191 1.565.43.426.347.205.18.301.828.13.863-.033 2.294-.063 3.222-.033 1.073-.647.877-1.112 1.613-.323.512-.241 1.502-.16 2.07.115.784.765 1.646.67 2.433-.115.953-1.016 1.009-1.464 1.72-.586.936-.07 1.622.193 2.584.358 1.316.304 2.693.477 4.037 6.436-12.966 11.477-26.59 18.686-39.153.176-.305.35-.612.523-.92a55.67 55.67 0 0 1-.638-.378c-.096-.63-.07-1.412-.126-2.113-.124-1.517-.542-2.988-.735-4.494-.215-1.684.16-3.3-.004-4.969-.055-.577-.19-1.148-.203-1.73-.02-.88.459-1.524.529-2.3.069-.795-.396-1.852-.4-2.706-.002-.67.07-1.338.166-2 .256-1.773.787-3.493 1.055-5.265.55-3.639.586-7.338 1.208-10.972-.97 1.431-2.067 2.772-3.03 4.21-.96 1.433-1.579 3.011-2.449 4.488-.736 1.25-1.63 2.392-2.581 3.481-.793.909-.782.85-.464 1.977.135.484.323 1.05.245 1.563-.337 2.206-3.633 1.46-3.155 3.862.243 1.213 1.155 2.329.66 3.626-.443 1.163-1.776 1.756-2.282 2.911-.556 1.273.189 2.149.237 3.384.042 1.077-.44 1.915-1.175 2.65-1.01 1.01-.964 1.672-1.223 3.103a11.194 11.194 0 0 1-1.331 3.593c-.64 1.1-1.43 1.432-1.094 2.67.245.895.779 1.772 1.102 2.649M359.134 333.02c1.104 4.23 2.804 8.305 5.138 11.98.396-2.146 1.024-4.21 1.133-6.404.107-2.171.18-4.323.418-6.486.447-4.048 1.2-8.052 2.027-12.034 1.735-8.358 3.382-16.727 5.15-25.076a2039.87 2039.87 0 0 0-7.841 12.52c-1.264 2.041-2.527 4.083-3.786 6.126-1.03 1.67-2.91 3.761-3.198 5.745-.328 2.246-.109 4.884-.033 7.156.074 2.211.435 4.34.992 6.473M396.008 282.95c.045.574.447 1.207.559 1.795.133.698.125 1.417.143 2.125.042 1.71.114 3.42.172 5.13 3.455-4.756 5.305-10.413 8.419-15.374 1.347-2.148 2.835-4.225 3.825-6.569 1.086-2.574 2.089-5.137 3.342-7.641.685-1.368 1.39-2.726 2.067-4.097.324-.657.668-.965.319-1.606-.148-.27-.626-.63-.915-.69-.896-.19-1.417.867-2.128 1.226-.97.49-2.19.324-3.207.667-2.344.789-4.59 2.25-6.885 3.208-.73.305-1.257.425-1.2 1.301.052.778.854.62.028 1.297-.447.366-1.033.196-1.547.145 0 1.68.345 2.698-.475 4.196-.655 1.2-.386 2.116-.464 3.384-.09 1.452-.652 2.955-1.197 4.292-.51 1.255-1.27 2.236-.529 3.544.409.721 1.287 1.249.775 2.073-.458.739-1.194.462-1.102 1.595M386.058 505.442c-2.49-1.477-.133-2.978 0-4.36v4.36Zm-3.806-8.436c-.377.018-1.658.154-1.89.544-.102.173.1 1.779.1 2.022-.007 1.228-.132 2.455-.064 3.683.068 1.257.7 2.416.752 3.623.05 1.134-.668 1.741-1.005 2.752-.446 1.332.148 4.998 1.631 5.37.035-.315.1-2.745.318-2.848.71-.336 1.055 1.5 1.257 2.002 1.966-1.945 2.548-4.614 3.47-7.224 1.062-3.003 2.12-6.006 3.179-9.01-1.301-.129-2.608-.208-3.905-.379-1.258-.166-2.565-.597-3.843-.535ZM347.82 582.211c-1.103.466-.787 1.797-.751 2.969.046 1.6.582 2.901 1.99 3.82.52-1.384 2.385-4.416 1.843-5.862-.437-1.167-2.062-1.358-3.082-.927"}),(0,Rc.jsx)("path",{d:"M561 249c.727-.663 1.853-1.095 1.988-2.175.133-1.068-.874-2.846-1.192-3.825l-.796 6M399.614 454.552c-1.89-.008.154-3.94.457-4.842.596 1.019 2.022 4.853-.457 4.842m15.75-49.73c.745-.445 2.152-.963 2.558-1.805.47-.975-.495-.966-1.342-1.025-1-.07-2.315-.135-3.293.055-1.003.196-1.432.426-2.371-.167-.533-.335-1.038-1.168-1.65-1.29-.636-.126-1.37.546-1.92.801-1.92.887-3.957.313-5.993.41-.769.037-1.407.22-2.12-.111-.912-.424-1.12-.988-2.241-.913-1.817.123-3.208.677-5.07.181-1.155-.307-2.744-1.526-3.987-1.15-1.154.349-1.757 2.164-2.67 2.933-.306-1.583-.473-3.332-1.686-4.52-1.359-1.33-3.56-1.807-5.134-2.9-3.554-2.466-6.128-6.015-8.837-9.321-1.72 2.596-2.943 4.975-4.092 7.89-1.097 2.782-2.163 5.575-3.26 8.357-2.21 5.6-4.567 11.146-6.988 16.66-4.915 11.194-10.433 22.082-15.268 33.319 3.307.08 6.537 1.706 9.386 3.265.745.408.777.569 1.256 1.213.231.31.546 1.07.966 1.174.246.06 1.031-.376 1.42-.32.582.085.99.463 1.43.812a167.954 167.954 0 0 1 8.204 6.871c1.213 1.087 2.036 2.114 2.86 3.515.906 1.545 1.887 2.527 3.269 3.654 2.23 1.818 3.519 5.01 5.078 7.443.895 1.398 1.768 2.817 2.453 4.332.62 1.37.836 3.016 1.963 4.09 2.383 2.265 6.111.964 8.999 1.339 1.136.147 1.41.468 2.432.01.012-.403.165-.547.46-.432.337.086.644.239.92.457.752.409 1.468.902 2.197 1.351l1.276-3.145c-.478-.01-2.205.2-2.474-.521-.226-.605.722-.774 1.079-1.148.396-.416.628-1.769 1.4-1.741.632.023.597.577.588 1.118 1.362.029 1.35-1.158 1.581-2.169.157-.68.377-1.351.554-2.028.117-.456.882-2.325.689-2.717-.486-.977-3.607-.917-1.617-2.107.634-.38 2.122-.26 2.614-.796.391-.43.426-2.19.542-2.779-.928.065-2.044.626-2.613-.2-.822-1.194.378-3.017.985-4.014.784.617 1.274 1.292 2.168.578.96-.765 1.834-2.194 2.191-3.296-1.036-.031-.851.175-1.378-.633-.3-.462-.386-1.263-.535-1.78-.304-1.063-.92-1.873.362-2.157.802-.177 1.002.008 1.235.77.307 1.004.196 2.725.316 3.798 1.255-1.583 2.542-3.287 2.07-5.434-.799.795-.88.58-1.844-.038-.962-.617-1.909-1.257-2.862-1.89 1.206-1.093 3.119-.034 4.307-.932.808-.61.395-2.483.45-3.325.068-1.06.528-2.131.465-3.192-.066-1.147-1.381-1.65-.684-2.702.49-.737 1.625-.626 1.837-1.73.214-1.107-.906-1.774-1.74-2.257 1.234-.401 3.604-.828 2.49-2.48-.527-.78-1.165-.848-1.154-1.956.01-.801.538-1.667.88-2.364.461 1.058 1.142 3.541 2.578 3.457 1.197-.07 2.26-1.145 1.915-2.228-1.061-3.338-4.08-3.581-7.017-4.209.549-2.023 1.997-1.906 3.46-.879.867.607 1.409 1.119 2.512.493 1.15-.652.594-.895.087-1.832-1.035-1.906.398-2.999 1.8-4.11.808-.64 1.2-1.44 1.89-2.135.707-.71 1.851-.867 2.743-1.284-1.068-.522-2.036-1.067-3.225-.66-.79.272-1.368.802-2.27.344-2.019-1.022.603-1.283.872-2.127.152-.48-.366-1.454-.17-2.135.2-.696.633-1.287 1.019-1.887.82-1.275 1.717-2.563 1.228-4.153.988 1.137 1.32 1.387 1.399 2.986.07 1.42.079 2.846.364 4.244.061-2.061 1.953-3.435 2.271-5.418.098-.618-.404-2.133.185-2.463.46-.258 1.401.4 1.888.403-.339-1.883-.395-3.866-1.032-5.685-.623-1.782-2.244-2.466-3.604-3.633"})]}),(0,Rc.jsxs)("g",{fill:"currentColor",children:[(0,Rc.jsx)("path",{d:"M933.692 204.51c-2.507.524-4.924 1.334-7.45 1.815-2.994.568-5.992 1.09-9.01 1.528-2.025.294-3.858.756-5.189 2.449-2.477 3.153-4.97 8.59-1.559 11.936 1.604 1.572 4.416 1.077 6.477 1.731 2.296.73 4.435 1.539 6.842 1.853 11.221 1.457 22.382 4.17 33.36 6.87 5.01 1.232 10.008 2.936 14.797 4.858 2.452.984 4.848 2.13 7.04 3.613 1.875 1.267 4.014 2.516 5.524 4.218-6.004 1.02-12.745 1.139-18.75.12-3.011-.512-6.042-.369-9.08-.599-3.044-.23-6.088-.446-9.129-.714-2.95-.26-5.881-.587-8.811-1.026-1.085-.162-2.183-.323-3.281-.18-.638.082-1.041.276-1.624.144-.488-.111-1.012-.494-1.502-.658-2.248-.75-4.647-.606-6.978-.74-1.747-.1-3.611-.625-5.36-.238-3.074.678-4.476 4.996-5.18 7.643-.442 1.668-.09 3.741.45 5.39.62 1.89 1.758 1.855 3.282 2.713 2.178 1.227 4.089 2.568 6.438 3.525 1.967.803 3.98 1.5 5.927 2.354 4.287 1.877 8.935 3.506 12.973 5.875 2.19 1.286 4.262 2.57 6.558 3.684a44.463 44.463 0 0 1 5.949 3.457c3.852 2.672 7.204 5.994 10.062 9.703-1.326 0-2.409.172-3.678-.278-1.559-.55-3.016-1.359-4.595-1.857-3.008-.95-5.957-1.845-8.931-2.928-2.971-1.083-6.015-2.156-9.049-3.052-1.555-.46-3.126-.664-4.703-1.001-1.391-.299-2.626-.923-3.94-1.45-6.31-2.534-13.063-3.753-19.59-5.582-6.357-1.78-12.64-3.63-19.13-4.883-3.02-.584-6.047-1.135-9.097-1.554-2.985-.41-5.585.003-8.47.768-3.036.806-5.79 1.552-8.689 2.828-2.072.912-5.143 1.71-6.759 3.284-.966.942-1.597 1.874-2.827 2.562-.935.523-1.95.888-2.954 1.252-2.276.825-4.431 1.91-6.693 2.764-1.424.538-2.9.962-4.424 1.06-1.457.093-1.967.446-3.274 1.084-2.044.994-4.285 1.461-6.44 2.14-2.146.677-4.588 2.466-6.912 1.651-2.258-.793-3.704-3.701-5.05-5.506-3.548-4.745-6.597-9.445-8.57-15.058-2.092-5.953-4.088-11.939-6.113-17.915-1.052-3.108-2.11-6.213-3.183-9.314-.597-1.72-1.833-3.572-.485-5.161 1.564-1.844 2.12-4.748 3.737-6.812 1.607-2.051 3.419-3.937 5.122-5.907.995-1.15 1.966-2.324 2.852-3.561.726-1.014 1.264-2.257 2.07-3.198.732-.855 1.809-1.358 2.612-2.148.873-.859 1.65-1.877 2.451-2.805 2.102-2.436 4.101-5.018 6.343-7.326 1.85-1.906 3.964-3.602 5.865-5.48 4.117-4.064 8.49-7.858 12.757-11.76 4.155-3.8 8.405-7.478 12.449-11.368 3.8-3.657 8.36-6.613 12.62-9.67 4.666-3.35 9.14-6.884 14.165-9.708 4.807-2.703 9.646-3.517 15.012-4.318-.53 1.042-.908 2.145-1.61 3.087-1.039 1.39-2.398 2.63-3.573 3.907a1007.678 1007.678 0 0 1-7.206 7.758c-4.703 5.009-9.629 9.815-14.193 14.952-3.637 4.093-6.464 8.27-7.966 13.589-.792 2.804-1.186 5.812.515 8.389 1.302 1.97 3.442 1.817 5.6 1.624 5.56-.498 11.076-2.39 16.58-3.373 6.118-1.093 12.374-1.361 18.55-2.02 3.1-.33 6.161-1.183 9.261-1.417 1.398-.105 2.778.18 4.175.064 1.39-.116 2.783-.455 4.152-.709 2.879-.534 5.494-.838 8.408-.45 2.897.386 5.666.084 8.564-.154 6.12-.505 12.393.156 18.48.816 5.827.632 11.606 1.334 17.297 2.724-5.96 1.516-11.909 3.07-17.903 4.453-6.119 1.41-12.437 2.36-18.444 4.18-2.614.792-5.3.906-7.962 1.463ZM461.873 330.8c.653-2.372 1.314-4.92 2.144-7.287.191-.547.486-.972.795-1.377-.563.938-.96 1.87-1.34 3.128-.555 1.839-1.066 3.69-1.599 5.535Zm-1.306 2.425Zm-.477 1.174Zm1.654-3.147Zm364.847-22.126c-2.377 1.514-4.69 2.471-6.637 4.57-4.39 4.728-9.118 9.203-13.342 14.076-1.698 1.956-2.555 4.38-4.452 6.202-2.156 2.069-4.786 3.68-7.225 5.385-5.418 3.787-10.782 7.88-16.499 11.202-1.282.745-2.58 1.517-3.902 2.184-.87.438-1.966.674-2.728 1.294-.726.59-1.019 1.467-1.81 2.041-.582.424-1.282.77-1.892 1.157a857.973 857.973 0 0 1-15.14 9.362c-4.963 3-9.927 6.04-14.786 9.207-2.582 1.685-5.021 3.577-7.615 5.238-2.113 1.353-4.32 2.556-6.392 3.972-2.197 1.502-4.248 3.04-6.653 4.217-2.326 1.138-4.745 2.08-7.06 3.24-1.365.682-2.6 1.512-3.9 2.297-.85.512-1.563.438-2.488.754-2.696.923-5.113 2.521-7.863 3.373-11.426 3.54-22.474-1.51-32.433-6.881-5.02-2.708-9.59-6.174-14.399-9.225-2.102-1.333-4.726-2.302-6.65-3.869-.967-.788-1.34-1.618-2.472-2.24-1.025-.56-1.959-1.124-2.883-1.844-4.559-3.548-8.818-7.191-12.887-11.3-2.221-2.244-4.442-4.495-6.608-6.79-1.697-1.8-3.02-3.985-4.586-5.915-3.77-4.639-7.426-9.346-11.06-14.09-1.764-2.303-3.509-4.622-5.278-6.922-1.18-1.534-2.959-3.049-3.364-5.035-.374-1.826.698-3.574 1.58-5.08 1.327-2.269 2.594-4.523 3.484-7.007 1.339-3.736 3.382-10.893-.706-13.573-1.503 2.497-3.404 4.718-5.025 7.134-1.63 2.434-2.333 5.51-4.29 7.678-2.057 2.276-4.796 3.927-6.953 6.146-2.15 2.212-4.117 4.594-6.2 6.87-2.18 2.381-4.495 4.633-6.79 6.903-2.158 2.135-4.622 3.85-7.052 5.665-2.543 1.9-5.163 3.591-7.897 5.202-1.18.696-2.396 1.554-3.69 2.02-1.379.494-2.589.792-3.915 1.478-5.397 2.793-10.84 5.473-16.319 8.097-1.47.705-3.02 1.684-4.6 2.076-.607.15-.954.013-1.622.227-.703.223-1.403.62-2.078.917-2.812 1.242-5.683 2.199-8.596 3.175-6.06 2.03-12.215 3.884-18.209 6.1-5.61 2.077-11.068 4.322-16.85 5.93-5.697 1.585-11.714 1.85-17.579 2.424-1.576.155-3.426-.007-4.94.433-1.36.395-2.112.685-3.593.566-2.62-.21-5.067.288-7.666.687 3.957-7.789 6.012-16.66 8.877-24.91.757-2.182 1.677-4.218 2.307-6.437.561-1.984 1.378-3.888 2.362-5.698 1.2-2.208 1.568-4.763 2.37-7.132-.624 1.862-.962 3.844-1.554 5.71.822-1.568 1.706-3.105 2.49-4.694.82-1.66.81-2.648.82-4.434 2.126.245 2.206-1.941 2.534-3.5.498-2.37 1.024-4.735 1.534-7.102.258-.546.17-1.444.306-2.039.162-.704.432-1.379.672-2.057 1.855-5.256 3.894-10.423 5.24-15.843 1.486-5.976 2.786-12.007 4.122-18.018.71-3.191 1.65-6.443 1.96-9.702.148-1.562.944-6.6-1.268-7.302-1.709-.543-3.54 4.666-3.986 5.813-1.084 2.787-2.108 5.596-3.14 8.403-.923 2.51-1.638 5.045-2.667 7.518-1.04 2.5-1.405 5.104-2.327 7.64-.541 1.49-1.412 2.587-2.008 4.012-.434 1.041-.594 2.171-.95 3.238-.74 2.21-1.885 4.372-2.718 6.572-1.066 2.81-2.379 5.517-3.548 8.285-1.07 2.532-1.68 5.2-2.684 7.738-.966 2.438-2.464 4.615-3.425 7.075-1.056 2.703-2.016 5.442-3.06 8.15-2.154 5.587-4.336 11.131-6.025 16.88-.422 1.439-1.142 2.852-1.493 4.133-.319 1.162-.887 2.082-1.344 3.238-.818 2.073-1.16 4.405-1.575 6.589l.124-.707c-.862.036-1.786.224-2.386-.547-.685-.877-.494-2.579-.622-3.632-1.014.133-.618.59-.507 1.507l.169 1.417.426 3.544c.323-.19 1.003-1.292 1.28-1.323.423-.047.884 1.102 1.08 1.67a4.61 4.61 0 0 1-.268.63c-.268.525-.524.89-.729 1.46-.38 1.063-.668 2.145-1.209 3.147a7.96 7.96 0 0 1-.925 1.386c-.27.316-1.15.84-1.298 1.173-.369.833.194 2.912.141 3.882-.067 1.261-.269 2.611-.82 3.763-.232.483-.653.776-.87 1.193-.306.588-.32.892-.391 1.654-.25 2.715-1.29 5.259-2.23 7.791-1.053 2.844-1.876 5.765-2.834 8.64-.905 2.722-2.064 5.339-3.021 8.04-1.116 3.143-2.11 6.33-3.154 9.496-.781 2.371-1.977 4.478-2.815 6.81-.86 2.387-2.07 4.533-2.488 7.014-.463 2.747-1.91 5.496-2.953 8.067-.872 2.148-2.677 4.431-3.036 6.719-.168 1.074.098 2.077-.256 3.144-.307.926-.894 1.716-1.285 2.602-.537 1.22-.137 2.348-.507 3.594-.321 1.085-1.054 1.847-1.646 2.773-1.043 1.634-.69 3.53-1.762 5.234-1.512 2.405-2.047 5.1-2.858 7.832-.4 1.341-.694 2.723-1.052 4.075-.142.539-.213 1.61-.499 2.107-.357.625-.968.38-1.278.74-.267.312-.326 1.32-.444 1.72-.374 1.27-.91 2.502-1.425 3.722-1.11 2.621-2.384 5.172-3.344 7.853-1.004 2.804-2.012 5.608-3.018 8.412-.478 1.335-.943 2.673-1.46 3.992-.506 1.296-1.037 1.692-1.886 2.683-.836.974-1.182 2.34-1.965 3.373-.736.969-1.232 1.68-1.554 2.886-.606 2.269-1.053 4.548-2 6.716-2.394 5.481-5.378 10.695-7.78 16.183-2.518 5.751-4.908 11.562-7.088 17.45-2.047 5.526-3.355 11.256-5.448 16.763-2.072 5.451-3.852 10.985-5.894 16.452-2.12 5.678-4.25 11.346-6.148 17.101-.685 2.076-1.145 4.14-1.589 6.23.138-.94.271-1.863.43-2.729-2.021 3.381-3.878 7.058-2.991 11.11.552-.78.971-1.663 1.307-2.6-.128.483-.27.955-.467 1.374-.566 1.203-1.098 2.12-1.483 3.453-.851 2.95-1.715 5.899-2.552 8.853-.404 1.423-.781 2.86-1.255 4.263-.421 1.247-1.336 2.329-1.722 3.546-.433 1.362-.285 3.03-.619 4.448-.292 1.247-.72 2.464-1.36 3.577-.497.865-1.208 1.62-1.602 2.544-.48 1.126-.19 2.243-.32 3.428-.165 1.474-.693 2.878-.894 4.345-.194 1.413.465 2.29.716 3.64.263 1.411-.27 2.343-.69 3.632-.359 1.096-.566 2.264-.824 3.386-.111.48-.19 1.985-.53 2.305-.249.233-1.678.27-2.037.333-1.346.236-2.69.496-4.063.496-2.88 0-5.832-.419-8.693-.726-5.792-.621-11.617-1.537-17.17-3.333-5.267-1.704-10.576-4.194-15.463-6.793-4.927-2.62-9.298-6.208-13.416-9.945-2.235-2.029-4.363-4.173-6.492-6.312-1.024-1.028-2.046-2.057-3.083-3.072-.826-.811-1.897-1.584-1.98-2.837-.094-1.412.926-3.03 1.423-4.304.444-1.139.881-2.28 1.313-3.423 1.056-2.793 2.093-5.593 3.132-8.391 2.153-5.796 4.292-11.596 6.447-17.391 2.17-5.83 4.396-11.533 7.017-17.172 2.509-5.4 4.792-10.844 6.877-16.422 1.969-5.267 4.312-10.344 6.545-15.5 1.198-2.77 2.332-5.57 3.25-8.445.768-2.408 1.338-4.68 2.507-6.94.752-1.455 1.365-2.878 1.822-4.454.395-1.363.617-2.53 1.5-3.635 1.863-2.329 2.902-4.959 3.86-7.764 1.867-5.463 4.03-10.986 6.644-16.138 2.647-5.222 5.578-10.232 7.99-15.572 2.428-5.37 5.731-10.2 8.003-15.656 4.686-11.254 11.147-21.616 15.897-32.84 4.678-11.056 10.25-21.678 15.028-32.69a491.488 491.488 0 0 0 7.18-17.389c1.085-2.79 2.16-5.584 3.283-8.358 1.014-2.504 2.768-4.424 3.49-7.01.739-2.647 1.921-4.685 3.175-7.07 1.294-2.459 1.963-5.428 2.985-8.02a665.997 665.997 0 0 1 6.963-16.893c2.458-5.76 5.082-11.44 7.634-17.157.964-2.162 1.504-4.486 2.497-6.633.494-1.068 1.496-1.974 1.938-2.996.206-.474.157-1.134.327-1.642.23-.68.656-1.362.972-2.007 2.56-5.24 5.395-10.28 7.73-15.63 2.386-5.47 4.826-10.934 6.924-16.522 2.073-5.522 4.695-10.729 6.478-16.369.849-2.689 1.696-5.39 2.346-8.135.567-2.393 1.634-5.923 1.093-8.381-.333-1.513-2.091-4.595-3.873-3.2-1.639 1.284-2.625 3.827-3.52 5.634-1.346 2.717-2.774 5.4-3.927 8.208-.92 2.242-1.749 4.404-3.023 6.476-3.07 4.996-5.513 10.227-8.278 15.395-.625 1.17-1.361 2.138-2.212 3.142-.825.974-.591 1.44-.929 2.674-.604 2.21-2.44 3.99-3.371 6.079-1.239 2.78-2.312 5.398-3.862 8.037a79.51 79.51 0 0 0-3.667 6.962c-2.521 5.462-4.944 10.971-7.387 16.47-1.296 2.915-2.554 5.853-3.976 8.71-.625 1.254-1.236 2.527-1.914 3.754-.44.798-1.238 1.449-1.61 2.26-.423.92.042 1.696-.32 2.593-.417 1.041-.872 1.465-1.78.856-2.029-1.356-2.433-4.261-3.521-6.333-2.57-4.896-5.018-9.498-5.978-15.037-.531-3.07-.32-6.197-.3-9.295.02-2.75 1.652-4.617 3.088-6.89 3.371-5.345 6.748-10.685 10.178-15.99 1.51-2.334 2.825-4.788 4.37-7.094 1.493-2.228 3.484-3.874 5.123-5.942.914-1.152 1.583-2.416 2.56-3.526.82-.936 1.605-1.907 2.276-2.957 1.279-1.999 2.152-4.162 3.556-6.1 3.313-4.577 6.684-9.128 10.174-13.571 1.86-2.37 4.052-3.838 6.354-5.726 2.254-1.849 4.271-3.958 6.349-6 4.001-3.934 7.774-8.042 12.224-11.46a214.241 214.241 0 0 1 14.085-9.959c2.376-1.537 5.326-2.696 7.236-4.776.788-.858 1.605-1.66 2.615-2.258.97-.574 2.1-.727 3.042-1.252 2.671-1.487 5.128-3.927 7.557-5.789 2.42-1.851 4.838-3.704 7.257-5.555 1.017-.78 2.935-1.7 3.677-2.704.417-.563.367-1.349.839-1.942 1.068-1.341 3.18-1.467 4.678-2.044 2.878-1.107 5.813-1.703 8.833-2.287 2.662-.515 5.203-1.657 7.759-2.552 5.593-1.96 11.39-3.138 17.288-3.67-2.652 7.822-5.663 15.53-7.691 23.55-.821 3.25-.96 7.043-2.33 10.105-.492 1.103-1.81 2.153-1.151 3.398.488.927 1.86 1.93 2.736 2.499 1.817 1.182 4.06-.129 5.845-.843 3.01-1.203 5.927-2.75 9.153-3.304 3.35-.573 6.164-3.746 9.642-3.694 1.454.022 2.634.717 3.723 1.62 1.121.932 2.39 1.68 3.477 2.662 2.388 2.156 5.167 4.007 8.188 5.202 1.048.414 1.942.2 2.912 1.003.724.599 1.299 1.461 2.268 1.683-4.593 4.905-9.047 9.764-12.935 15.268-1.905 2.696-3.324 5.331-4.366 8.469-.493 1.483-.948 2.616-.002 4.05.523.794 1.358 1.447 2.336 1.296 2.363-.364 4.462-3.555 5.773-5.303 1.52-2.03 3.191-3.91 4.775-5.889 3.29-4.11 6.21-8.424 10.307-11.805 1.22-1.006 2.454-2.148 3.806-2.975 1.078-.66 1.839-.156 3.033-.366 2.99-.526 5.675-2.09 8.347-3.442a633.822 633.822 0 0 1 8.705-4.347c1.526-.744 3.773-2.316 5.565-1.564 2.004.84 3.137 3.977 4.236 5.655 1.055 1.613 2.006 3.015 3.737 3.932 2.84 1.507 8.359 3.336 10.847.437 3.523-4.105 3.165-10.828 2.861-15.862-.187-3.086-.565-6.196-.328-9.288.208-2.72.528-5.433.796-8.15 5.007 4.107 9.738 8.275 13.887 13.265 2.207 2.656 4.495 5.241 6.774 7.836 1.14 1.3 2.167 2.436 2.946 3.966.671 1.318 1.627 2.458 2.624 3.539 2.086 2.258 3.51 5.256 5.1 7.89a476.77 476.77 0 0 1 4.549 7.68c2.913 5.038 5.642 9.996 7.87 15.375 1.158 2.796 2.732 5.335 3.916 8.118 1.171 2.76 2.33 5.528 3.458 8.308.651 1.604 1.433 3.223 1.94 4.877.352 1.15.041 2.605.463 3.673.405 1.024 1.376 1.922 1.805 3.025.434 1.116.69 2.293 1.133 3.406 2.171 5.45 5.148 10.647 7.58 15.99 2.522 5.544 5.04 11.097 8.058 16.396 3.062 5.376 6.922 10.307 10.615 15.258 1.934 2.592 3.935 5.145 5.789 7.793.668.953 1.263 2.047 2.155 2.817.843.728 1.908 1.013 2.888 1.499.541-1.44 1.278-2.384 1.046-3.98-.196-1.359-.702-2.691-1.123-3.989-.813-2.51-2.945-4.754-2.41-7.536.499-2.595 2.622-4.651 4.23-6.611 2.125-2.59 4.26-5.173 6.398-7.753 7.183-8.662 14.811-16.962 22.25-25.424 3.787-4.307 7.5-8.686 11.416-12.877 1.755-1.88 3.793-3.408 5.664-5.16 1.534-1.435 2.544-3.247 3.99-4.742 1.073-1.106 2.347-1.913 3.438-3.031l2.66-2.725a875.565 875.565 0 0 0 5.833-6.01c3.868-4.03 7.481-8.281 11.291-12.363 7.357-7.882 15.14-15.45 22.82-23.011 2.218 6.551 4.052 13.38 5.641 20.11.391 1.657.553 3.38 1.14 4.974.578 1.566 1.334 3.073 1.942 4.63 1.35 3.46 2.383 7.15 4.064 10.448 3.191 6.26 5.997 13.522 10.594 18.911 2.288 2.68 5.421 4.977 8.087 7.281l8.613 7.45c-2.584 1.945-5.147 3.897-7.876 5.637Zm-237.763 41.592c-.237-.554-.464-.851-.733-1.05.2.119.376.306.605.749.493.95.796 2.047 1.148 3.056-.318-.927-.635-1.854-1.02-2.755Zm-69.39 49.636c1.984 2.22 4.085 4.338 6.093 6.536 1.852 2.027 3.338 4.25 5.001 6.426a264.29 264.29 0 0 0 11.223 13.7c3.745 4.28 7.789 8.315 11.364 12.742 3.574 4.427 6.273 9.175 8.95 14.166 1.241 2.313 2.654 4.535 4.33 6.557.784.944 1.837 1.771 2.33 2.907.547 1.258.714 2.778 1.026 4.108 2.785 11.894 5.636 23.778 8.32 35.695 1.302 5.776 2.173 11.63 3.431 17.414 1.274 5.855 3.183 11.542 4.387 17.417 2.44 11.898 4.108 23.954 6.728 35.813 2.553 11.547 6.984 22.523 9.391 34.12.339 1.628.827 3.114.45 4.76-.314 1.37-.555 2.572-.579 3.992-.042 2.443-.277 4.366-1.693 6.45-2.79 4.11-6.687 7.686-11.2 9.738-2.421 1.1-4.724 2.58-7.339 3.2-1.258.296-2.48.1-3.727.285-1.266.19-2.31 1.069-3.474 1.546-4.656 1.914-10.6 1.34-15.543 1.344-5.447.005-10.916-.36-15.945-2.64a27.004 27.004 0 0 1-1.218-.59c-.679-.104-.799-.41-.359-.915.002-.551.315-1.18.34-1.763.051-1.24-.319-2.431-.63-3.615-.737-2.81-1.43-5.632-2.074-8.466-2.665-11.75-3.928-23.681-5.567-35.601-.844-6.148-2.074-12.24-3.133-18.354-1.015-5.869-1.625-11.761-2.393-17.664-.765-5.88-1.582-11.756-2.375-17.632-.432-3.218-1.365-6.378-1.775-9.581-.31-2.427.332-4.718-.218-7.151-1.293-5.727-1.346-11.665-2.805-17.355-1.504-5.863-3.678-11.625-5.702-17.325-1.047-2.952-2.09-5.906-3.138-8.858-.618-1.746-1.326-3.62-3.121-4.456-.996-.463-1.981-.411-2.876-1.102-1.098-.848-2.042-2.003-3.02-2.986-2.104-2.118-4.193-4.25-6.305-6.36-8.217-8.212-16.18-16.821-25.25-24.095-4.215-3.38-8.124-7.193-12.793-9.946-5.004-2.95-9.938-6.014-14.944-8.96a55.41 55.41 0 0 0-7.661-3.76c-2.35-.94-.915-3.187-.237-5.007 1.049-2.814 1.958-5.67 2.835-8.543.663-2.17 1.025-4.98 3.246-6.157 1.453-.77 2.088.127 3.481.562.99.308 2.03.356 3.057.311 2.326-.102 5.005-1.145 7.297-.782 1.535.243 2.298.303 3.85.021 1.382-.25 2.838-.255 4.239-.359 2.587-.193 5.248-.225 7.803-.674 5.594-.984 11.26-2.273 16.625-4.152 5.744-2.012 11.218-4.806 16.722-7.378.37 2.534.733 5.11 1.67 7.51.747 1.92 1.984 4.489 3.817 5.507 4.014 2.23 6.114 6.07 9.089 9.4Zm83.955 241.454c1.743-.948 2.075.383 3.11 1.812 2.826 3.906 5.672 7.798 8.526 11.685 2.777 3.784 5.564 7.564 8.344 11.347 2.607 3.545 5.487 6.928 7.881 10.623 2.46 3.791 4.41 7.954 6.298 12.05 1.604 3.487 3.935 7.117 2.25 11.001-1.564 3.606-6.016 5.129-9.255 6.844-4.092 2.167-7.32 3.7-11.95 2.051-8.811-3.137-17.442-7.213-25.79-11.41-7.65-3.848-13.438-9.533-19.78-15.117-3.33-2.932-6.78-5.63-9.895-8.806-3.238-3.304-6.323-6.757-9.584-10.038-5.073-5.11-10.393-9.627-9.517-17.537 4.84 1.621 9.601 3.657 14.63 4.63 5.298 1.024 10.702 1.65 16.103 1.37 2.328-.122 4.457-.757 6.727-1.208 2.216-.44 4.474.019 6.556-1.07 1.842-.963 2.984-2.106 5.091-2.608 2.144-.51 3.953-1.212 5.775-2.475 1.494-1.036 2.88-2.273 4.48-3.144ZM450.63 431.929c.05.01.097.028.142.056a.754.754 0 0 0-.142-.056Zm-5.641-3.187c.052.033.105.071.16.11-.053-.039-.107-.074-.16-.11ZM341.233 708.115a440.206 440.206 0 0 1 6.696 12.35 238.179 238.179 0 0 1 3.124 6.248c.939 1.934 1.78 3.432 1.892 5.564-4.525-.505-9.12-3.186-12.963-5.555-4.041-2.49-7.465-5.574-10.894-8.826-3.346-3.17-6.76-6.307-10.343-9.21-1.653-1.34-3.38-2.49-5.207-3.574-.558-.33-1.123-.67-1.577-1.143-.556-.58-.757-1.592-1.432-2.03-1.379-.893-3.534.44-4.769 1.044-1.635.8-3.209 1.757-4.58 2.962-1.57 1.382-2.623 3.153-3.975 4.728-1.269 1.477-2.552 2.888-3.693 4.47-2.585 3.58-5.395 7.388-8.688 10.35-1.502 1.35-3.395 2.423-4.683 3.946a30.908 30.908 0 0 1-4.01 3.963c-3.267 2.688-6.1 5.376-8.904 8.546-3.09 3.495-6.605 6.626-9.942 9.88-.512-2.06.403-3.784 1.312-5.561 1.058-2.074 1.807-4.314 2.69-6.466a152.331 152.331 0 0 1 6.448-13.744c2.214-4.164 4.48-8.296 6.626-12.497 1.78-3.485 4.534-7.786 3.684-11.858-.332-1.588-1.196-3.985-2.911-4.516-1.71-.53-3.428.971-4.806 1.787-4.038 2.388-8.22 4.269-12.545 6.073-4.313 1.8-8.663 3.55-12.814 5.705-4.027 2.089-7.827 4.588-11.855 6.669-1.992 1.028-4.101 1.79-6.07 2.865-1.898 1.037-3.734 2.18-5.622 3.232-3.73 2.08-7.616 3.535-11.857 4.145 3.025-3.898 7.005-6.757 10.86-9.76 4.497-3.499 8.966-7.024 13.609-10.33 4.173-2.97 8.418-5.83 12.502-8.925 1.91-1.447 3.795-2.926 5.62-4.477 1.534-1.304 3.183-2.608 3.553-4.708.333-1.89-.53-4.07-2.133-5.164-1.6-1.091-3.635-.843-5.43-.587-5.047.718-9.967 2.26-14.852 3.68-1.124.326-2.275.86-3.4 1.123-1.135.264-2.473.153-3.635.212-2.18.11-4.356.225-6.523.502-2.264.29-4.575.207-6.825.568-2.048.327-3.472 1.436-5.566 1.386-9.298-.225-17.928 4.944-27.127 4.944a2228.587 2228.587 0 0 1 16.498-9.583c2.527-1.454 5.157-2.748 7.6-4.346 2.702-1.767 5.184-3.774 7.975-5.426 9.985-5.91 21.095-10.229 30.203-17.51 2.209-1.766 4.316-3.663 6.448-5.52.482-.42 1.117-1.202 1.691-1.473.914-.428.62-.548 1.423.274.883.904 1.495 2.009 2.227 3.035 2.9 4.066 6.461 7.634 10.482 10.593 4.674 3.438 10.06 5.525 15.297 7.94 5.28 2.433 10.49 5.026 16.021 6.857 5.577 1.847 11.482 2.794 17.305 3.481 6.164.73 11.913.316 18.03-.446.356 4.601.822 8.498 2.991 12.666 2.047 3.933 4.648 7.58 6.824 11.447Zm23.178-350.5c.45.099 1.024.136 1.454.294-.373-.094-.848-.097-1.125-.175-.115-.032-.22-.078-.329-.119Zm1.65 2.656c.177-.438.44-.928.485-1.378-.027.445-.267.94-.484 1.378Zm-52.668 77.857c-6.861 4.082-13.01 9.214-19.655 13.618-3.318 2.198-6.778 4.175-10.326 5.977-1.711.87-3.436 1.733-5.22 2.447-1.548.618-3.036 1.615-4.62 2.084-1.723.51-3.489.202-5.233-.004-1.514-.178-2.986-.082-4.232-1.084-2.25-1.807-3.708-5.42-5.045-7.879-1.912-3.516-4.148-7.183-5.517-10.942-1.276-3.51-2.959-6.72-3.625-10.397 1.179-1.956 1.075-3.992.086-5.987-.455-.918-1.042-1.763-1.58-2.631-.609-.982-.582-1.21-1.676-1.228l3.152 9.79c-1.037-3.21-2.439-6.496-3.152-9.79-.624-2.874-.863-5.661-1.889-8.463-.524-1.424-1.35-2.763-1.76-4.22-.337-1.199-.329-2.466-.489-3.694-.446-3.425-1.326-6.817-1.867-10.235-1.03-6.523-1.691-13.118-2.94-19.604-1.285-6.672-2.94-13.303-4.396-19.941-.555-2.534-1.549-4.705.925-6.433 2.368-1.652 5.002-3.03 7.503-4.468 2.374-1.366 4.735-2.746 7.262-3.808 2.145-.902 4.208-1.762 6.159-3.04 1.214-.795 2.457-.79 3.83-1.233 1.414-.457 2.81-.987 4.21-1.482 2.574-.91 5.143-1.828 7.714-2.745 1.406-.501 4.294-2.343 5.611-.947.683.721.762 2.23.955 3.131.316 1.484.616 2.972.908 4.461 1.128 5.77 2.21 11.56 3.105 17.372.879 5.702 1.379 11.459 2.265 17.158.217 1.396.923 3.12.783 4.525-.102 1.035-.821 1.582-1.53 2.256a67.505 67.505 0 0 0-5.092 5.398c-1.77 2.097-3.462 4.266-5.375 6.238-1.864 1.922-3.484 3.65-4.828 5.994-1.128 1.968-2.636 3.814-2.113 6.17.409 1.83.942 3.652 3.116 2.899 2.515-.87 4.689-3.337 6.653-5.05 1.93-1.682 3.836-3.39 5.803-5.028 2.173-1.812 4.602-3.34 6.703-5.226 1.825-1.638 3.387-3.543 5.119-5.274 4.153-4.156 8.622-7.881 13.04-11.739 2.037-1.779 3.66-3.954 5.506-5.918 1.82-1.934 3.797-3.714 5.708-5.556 4.146-3.995 8.459-8.019 12.321-12.29 1.85-2.046 3.835-3.957 5.699-5.99.769-.839 1.339-1.944 2.07-2.743.707-.773 1.795-1.27 2.587-1.993 3.464-3.16 5.394-7.56 8.81-10.782.909 1.988 1.551 4.017 2.218 6.1.615 1.92 1.078 4.162 2.157 5.88.503.798 1.357 1.378 1.792 2.21.416.799.306 1.747.6 2.591.563 1.61 1.724 3.306 2.59 4.778.967 1.644 2.336 3.14 3.63 4.53.334.36.67.68 1.039.956-.151-.084-.3-.169-.457-.248 1.03 1.753 1.961 2.56 3.637 3.712l-.14.291c-.866 1.874-1.84 3.61-2.521 5.57-1.177 3.387-2.905 6.555-4.017 9.967-.598 1.835-.83 3.731-1.701 5.47-.766 1.53-1.762 2.932-2.511 4.472-1.75 3.603-2.891 7.555-4.27 11.31-1.425 3.879-3.07 7.629-4.831 11.364a232.483 232.483 0 0 0-4.928 11.264c-.697 1.71-1.248 3.62-2.349 5.126-1.19 1.63-2.906 2.052-4.714 2.698-7.162 2.56-14.14 6.403-20.667 10.285ZM227.57 328.122c-4.055-3.431-9.715-2.464-14.695-2.485-5.785-.025-11.543 1.113-17.308 1.5-5.762.388-11.552.664-17.329.544-5.152-.108-10.286-.591-15.335-1.641-2.5-.52-4.944-.773-7.482-.993-1.59-.136-3.06-.619-3.86-2.108-1.054-1.966-.78-4.955-.855-7.12-.074-2.122-.38-4.816.465-6.815.832-1.972 2.683-2.94 4.573-3.664 2.32-.89 4.643-1.772 6.963-2.66 9.4-3.601 19.07-7.722 29.196-8.587 2.812-.24 5.635-.265 8.454-.35 2.421-.072 4.66-.66 7.053-.91 4.995-.521 9.88-.635 14.808-1.68 1.354-.288 2.206.433 3.582.653 1.074.172 2.165.14 3.243.062 2.228-.16 4.356-.434 6.593-.243 2.63.223 5.276.361 7.884.768 2.343.365 4.612.998 6.975 1.266 2.553.29 5.136.4 7.65.964 1.27.283 3.206.557 3.954 1.779.99 1.615.247 4.717.15 6.501-.136 2.513-.29 5.03-.264 7.548.027 2.734.436 5.378.964 8.055.38 1.928 1.195 4.191.76 6.18-.24 1.094-1.039 1.611-2.173 1.435-.785-.122-1.43-.89-2.155-.983-1.409-.181-.04.871-.847 1.775-.647.725-1.719.522-2.58.761-.926.258-1.782.711-2.657 1.097-1.983.873-4.041 1.475-5.994 2.438-4.342 2.14-8.468 4.68-12.6 7.191-.691-2.058-1.185-5.176-2.576-6.877-1.197-1.463-3.13-2.192-4.557-3.4Zm284.537-130.14c.931-2.626 2.157-5.192 2.933-7.867.277-.956.277-2.314 1.256-2.852.813-.448 2.286-.165 3.14-.159 1.58.013 3.16-.005 4.739-.012.79-.003 1.932-.182 2.398.645.48.855-.29 2.423-.306 3.375-.024 1.444.318 2.857.684 4.243 1.563 5.907 3.184 11.743 4.98 17.594-1.79-.805-3.182-2.722-5.226-2.939-1.29-.137-2.282.635-3.471.831-1.017.168-2.03.227-3.041.463-4.544 1.057-8.675 3.413-13.29 4.241.214-1.69.282-3.233.801-4.869.452-1.421.953-2.83 1.439-4.241.971-2.823 1.968-5.638 2.964-8.453Zm14.994-39.632c2.183-.966 4.366-3.768 2.322-6.081-1.102-1.247-3.893-.593-5.334-.296-2.022.417-9.786 5.481-10.741 2.038-.628-2.26.496-5.666 1.523-7.651.65-1.258 1.524-2.486 2.57-3.45 1.12-1.036 1.583-.72 2.962-.567 2.276.254 4.391-.45 5.887 1.77.291.43.35 1.017.96 1.107.47.069.75-.514 1.224-.515.767-.002.853.53 1.152 1.125.783 1.555 1.934 4.611 4.265 3.338 2.356-1.285 2.497-5.45 2.5-7.694.005-3.482.24-6.96.43-10.435.148-2.751.39-5.261 2.395-7.335 1.892-1.955 3.358-4.675 5.657-6.173 2.595-1.692 5.972-1.502 8.946-1.73 3.437-.264 6.964-.642 10.403-.289 3.52.361 6.868.527 10.41.367 3.461-.156 6.917-.371 10.382-.46 3.29-.082 6.728.194 9.985-.16 1.324-.143 3.09-.625 3.965.687.995 1.49.912 4.19 1.191 5.907-3.58-.66-9.423-2.312-10.797 2.748-.416 1.53.872 2.897 2 3.787 1.65 1.3 3.958 1.264 5.96 1.544 1.117.157 2.92.128 3.574 1.25.63 1.077.3 3.087.374 4.271.305 4.924 1.008 9.812 1.52 14.716.489 4.687.858 9.497.15 14.182-.362 2.402-1.346 4.66-1.52 7.08-.109 1.499.125 3.199-1.243 4.19-1.588 1.149-4.321 1.155-6.185 1.565-2.46.542-4.894 1.194-7.314 1.893-3.835 1.109-8.514 1.662-9.897 5.951-1.476 4.578-2.564 9.297-3.991 13.898-.726 2.334-1.738 4.449-2.764 6.662-.397.854-1.02 1.846-.938 2.828.086 1.036.81 2.046 1.21 2.97.875-.456 1.792-.71 2.538-1.382.781-.7 1.405-1.688 2.033-2.527 1.305-1.743 2.233-3.239 4.104-4.372.071.922.29 1.713-.152 2.494-.312.555-1.034 1.12-1.445 1.635-1.151 1.445-2.26 2.928-3.509 4.29-2.486 2.714-5.494 4.95-8.08 7.583-2.593 2.64-5.046 5.738-8.208 7.715-3.047 1.905-6.304 3.48-9.474 5.167 2.786-6.33.858-12.702-2.457-18.394-1.543-2.65-3.42-5.081-5.157-7.602-1.375-1.995-4.032-4.672-3.968-7.236.035-1.364.965-2.541 1.636-3.668.744-1.249 1.32-2.58 1.93-3.9 1.237-2.672 2.85-5.498 3.284-8.44.38-2.575-.202-6.143-1.943-8.205-.7-.827-1.726-.747-2.635-1.309-.893-.553-1.569-1.38-2.302-2.116-.832-.835-1.852-1.412-2.681-2.237-.88-.877-1.498-1.99-2.135-3.047-1.51-2.503-3.057-4.985-4.572-7.487Zm9.576-55.636c2.62.046 4.01 1.524 5.23 3.632-.817 1.283-3.006 5.153-4.812 3.61-.334-.286-.49-.903-.896-1.235-.382-.313-.861-.477-1.304-.674-1-.442-2.133-.87-2.773-1.831-1.508-2.262 2.972-3.527 4.555-3.502Zm51.18 98.181c.47-.127 1.921.825 2.383 1.029.85.377 1.908.746 2.66 1.314.753.569 1.03 1.418 1.546 2.18.156 5.698.515 11.439.472 17.154l-.474-17.159c-.334 1.57-.914 3.012-.912 4.634 0 1.643.25 3.335.404 4.967.29 3.109.637 6.213.955 9.319a84.633 84.633 0 0 1-.277 5.36c-2.273-3.162-4.503-6.363-6.782-9.52-2.038-2.82-4.7-2.984-7.917-3.242l6.312-12.744c.241-.487 1.21-3.178 1.63-3.292Zm371.464 9.659c3.394-.939 6.86-2.243 10.358-2.705 3.31-.436 6.251-1.875 9.447-2.812 2.816-.824 5.666-1.53 8.44-2.494 2.108-.731 4.384-1.454 6.044-3.014 1.719-1.617 2.647-4.13 2.328-6.48-.374-2.745-2.4-3.08-4.71-3.867-11.765-4.006-23.672-6.393-35.951-7.976-6.32-.816-12.711-1.83-19.097-1.7-3.309.07-6.58.252-9.888.04-2.994-.191-6.043.93-8.988.346-3.01-.596-5.822.207-8.856.619-3.224.438-6.483.566-9.733.716-2.953.136-6.09.016-8.962.79-2.809.754-4.984 1.296-7.852.361 2.998-3.316 5.985-6.642 8.994-9.948 6.177-6.785 12.59-14.077 16.327-22.56 1.602-3.637 2.38-8.878-.292-12.263-2.376-3.01-7.566-2.39-10.876-1.896-4.256.633-8.32 2.15-11.982 4.393-3.53 2.162-7.431 3.928-10.643 6.536-3.156 2.562-6.791 4.257-9.982 6.77-3.29 2.593-6.604 5.103-9.932 7.638-7.19 5.476-13.162 12.434-19.968 18.353-3.617 3.146-6.984 6.534-10.218 10.068-1.533 1.675-3.122 3.326-4.432 5.186-1.096 1.556-2.049 3.213-3.204 4.73-1.386 1.814-3.126 3.327-4.586 5.085-1.34 1.618-2.573 3.322-3.762 5.053-1.251 1.822-2.453 3.676-3.695 5.503-.652.96-1.275 2.596-2.585 2.428-1.85-.237-2.874-1.826-4.886-.73-.68.368-1.104.997-1.67 1.496-.795.699-1.707.997-2.632 1.46-1.888.947-3.484 2.353-5.175 3.593-1.793 1.314-3.633 2.398-5.294 3.898-6.978 6.305-13.418 13.06-20.128 19.628-1.622 1.587-3.322 3.094-4.899 4.728-1.254 1.301-2.236 2.846-3.497 4.126-.728.74-1.605 1.038-2.374 1.681-.717.602-1.317 1.55-1.929 2.252-1.473 1.692-2.93 3.398-4.444 5.055-2.965 3.25-6.241 6.078-9.092 9.45-2.911 3.445-6.192 6.595-9.168 9.997-6.262 7.161-12.143 14.474-17.9 22.043-2.856 3.755-6.069 7.243-8.793 11.094-2.589 3.659-4.778 7.58-6.732 11.61-.552 1.137-1.26 4.525-3.29 3.327-.727-.429-1.214-1.692-1.664-2.393-.608-.951-1.213-1.903-1.816-2.856-2.625-4.154-5.434-8.308-7.509-12.771-3.993-8.592-7.966-17.113-11.251-26.008-1.661-4.5-3.557-8.888-5.448-13.295-1.873-4.368-3.293-8.897-5.12-13.28-3.636-8.719-8.414-16.967-13.168-25.112-4.356-7.464-9.025-15.164-15.084-21.384-3.204-3.288-5.723-7.059-9.11-10.21-1.715-1.597-3.487-3.133-5.2-4.733-1.239-1.155-2.293-2.87-3.824-3.647-1.083-.549-2.24-.43-3.41-.382-.908.036-1.915-.23-2.79-.151-.788.073-1.106.758-1.868.91-.778.158-1.292-.203-1.904-.625-3.868-2.669-9.155-3.823-13.57-5.423 2.794-1.73 6.22-1.793 9.34-2.522 2.638-.618 5.102-1.706 7.27-3.34 4.779-3.605 5.575-9.303 6.44-14.879.995-6.407 1.766-13.237.913-19.69a1117.625 1117.625 0 0 0-2.665-18.993c-.46-3.07-1.047-6.066-1.962-9.036-.744-2.42-1.703-4.917-1.617-7.484.042-1.268.085-3.226 1.045-4.144.707-.673 1.747-1.033 2.5-1.696 1.762-1.551 3.179-3.444 4.263-5.522.886-1.696 2.316-4.183 1.47-6.145-.92-2.128-3.845-2.52-5.808-3.028-5.812-1.51-11.681-1.266-17.585-2.097-2.836-.399-5.802-1.226-8.65-1.191-2.806.033-5.608.079-8.417.045-6.12-.073-12.261-.251-18.36.379a103.81 103.81 0 0 1-4.834.388c-1.31.076-2.25.742-3.454.95-.733.126-1.77-.27-2.506-.328a14.315 14.315 0 0 0-3.73.178c-2.594.486-4.607 2.139-7.177 2.656-2.002.403-3.534 1.494-4.557 3.268-2.597 4.495-2.738 10.696-2.965 15.73-.267 5.963.177 11.95-.136 17.904-.076 1.44-.23 2.022-1.754 1.872-2.137-.211-4.01-.783-6.17-.213-4.117 1.087-6.697 4.833-8.303 8.536-1.686 3.882-2.589 8.263-2.303 12.501.25 3.728 1.624 8.55 5.733 9.628 2.205.58 4.417-.34 6.499-.994 1.957-.616 3.741-2.38 4.804.094 2.152 5.013 4.32 9.548 7.761 13.865-3.228-.22-6.45-.532-9.68-.694-2.123-.107-5.131-.7-7.163.127-1.194.487-1.246 1.326-2.099 2.07-.94.82-2.762.47-3.926.434-3.484-.107-6.681-.741-10.207-.375-2.596.269-4.94 1.555-7.518 2.044-3.136.593-6.252 1.837-9.211 3.014-2.784 1.11-5.516 2.297-8.38 3.192-2.922.913-5.843 1.852-8.63 3.132-4.96 2.28-9.171 5.964-13.61 9.093-1.167.823-2.44 1.53-3.53 2.458-.892.76-1.482 1.764-2.343 2.55-1.378 1.26-2.987 1.197-4.48 1.864-1.528.683-3.003 2.052-4.39 2.999-1.253.857-2.508 1.713-3.763 2.57-2.384 1.625-4.741 3.559-7.317 4.859-4.784 2.416-8.538 6.244-12.426 9.885-4.196 3.93-8.825 7.354-12.866 11.442-4.03 4.079-7.713 8.407-10.955 13.136-3.38 4.928-6.232 10.152-9.435 15.188-1.465 2.303-3.32 4.174-5.028 6.282a36.68 36.68 0 0 0-2.396 3.304c-.652 1.016-1.112 2.312-2.084 3.056-1.946 1.486-3.888 2.363-5.457 4.35-1.756 2.227-3.27 4.688-4.759 7.098-2.983 4.84-5.783 9.844-8.44 14.87-.786 1.488-.777 2.577-.91 4.2-.1 1.259-.514 2.46-.747 3.696-.381 2.013-.146 4.128-.667 6.126-.34 1.31-1.182 1.482-2.245 2.22-1 .693-1.903 1.512-2.78 2.352-1.785 1.713-3.52 3.403-5.47 4.934-1.982 1.555-4.035 3.057-5.759 4.908-1.79 1.925-3.365 3.772-5.424 5.444-4.375 3.55-8.504 7.48-12.801 11.141-4.462 3.802-8.53 7.974-12.635 12.15-4.243 4.316-8.733 8.363-13.164 12.483-.348-4.89-.635-9.784-1.042-14.67-.44-5.274-1.627-10.416-2.677-15.596-.938-4.625-1.562-9.575-3.132-14.035-1.077-3.056-3.183-5.567-6.44-6.32-1.63-.377-4.099.395-4.888-1.422-.785-1.806-.86-4.554-1.177-6.494-1.398-8.565 1.38-18.125-2.198-26.32-1.553-3.556-4.44-5.44-7.875-6.964-4.498-1.995-9.467-1.499-14.237-2.488-2.177-.452-3.948-1.642-6.208-1.743-2.281-.102-4.566-.027-6.846.06-2.381.09-4.672-.388-7.037-.38-2.06.006-3.68 1.375-5.701 1.054-2.267-.358-4.116-.916-6.406-.258-2.028.582-3.962.756-6.069.814-2.595.074-5.191-.171-7.785-.046-2.384.114-4.658.838-7.02 1.128-4.995.612-9.809 1.181-14.683 2.524-4.828 1.33-9.413 3.247-14.1 4.985-7.513 2.786-16.134 4.92-18.203 13.775-1.146 4.91-1.375 10.199-.758 15.196.498 4.043 1.415 8.52 3.794 11.921 2.542 3.639 6.759 4.741 10.797 5.995 4.628 1.434 9.363 1.654 14.1 2.513 4.914.889 9.827 1.6 14.837 1.465 4.969-.134 9.829-1.427 14.783-1.848 5.094-.432 10.17-1.03 15.26-1.474 3.424-.3 9.968-1.27 11.684 2.616.542 1.229 1.32 2.697.327 3.796-1.183 1.308-2.228 2.648-3.295 4.103-1.448 1.973-2.53 3.863-2.96 6.297-.424 2.387-.49 4.822-.524 7.24-.138 9.976 2.43 20.088 4.865 29.744 2.532 10.047 5.352 20.04 8.882 29.784 3.363 9.285 5.862 18.95 9.851 27.994 2.003 4.54 4.62 8.568 7.376 12.672 2.318 3.451 4.438 7.627 7.852 10.131 2.863 2.102 6.526 3.135 10.067 2.852 4.245-.338 8.278-2.914 11.995-4.795 8.951-4.532 17.221-10.657 25.251-16.654 3.855-2.878 7.35-6.18 11.454-8.72 4.008-2.484 8.052-4.71 12.567-6.017-3.764 7.933-7.185 15.992-11.186 23.814-3.948 7.721-7.215 15.72-10.768 23.62-1.461 3.249-3.614 6.06-5.053 9.296-1.648 3.71-3.302 7.419-4.944 11.131-3.004 6.782-6.202 13.528-8.918 20.424-.617 1.565-.34 3.457-1.14 4.832-.806 1.387-1.687 2.599-2.3 4.105-1.317 3.241-2.362 6.507-3.862 9.682-3.322 7.029-5.432 14.59-8.612 21.692-3.188 7.12-6.064 14.315-8.906 21.58-1.393 3.561-2.96 7.056-4.26 10.653-1.2 3.318-2.327 6.714-4.285 9.682-4.297 6.516-7.628 13.552-10.863 20.659-1.526 3.352-2.872 6.682-3.102 10.411-.208 3.357 1.872 6.076 3.551 8.778-3.057 1.548-5.873 3.548-8.939 5.108-3.29 1.675-6.724 2.989-10.146 4.36-3.46 1.386-6.913 2.791-10.36 4.213-3.038 1.253-5.847 2.793-8.793 4.227-2.787 1.357-5.328 3.147-7.965 4.762-2.852 1.747-5.747 3.426-8.6 5.173-5.592 3.425-11.035 6.859-16.905 9.804-3.06 1.535-6.137 3.038-9.2 4.568-2.517 1.258-5.282 2.364-7.12 4.59-2.718 3.29-2.481 8.584.099 11.933 1.704 2.21 5.888 2.004 8.431 2.076 1.734.049 3.497-.046 5.2-.395 1.408-.287 2.603-1.037 3.976-1.387 1.555-.395 3.294-.31 4.891-.524a69.451 69.451 0 0 0 4.658-.805c3.347-.683 6.665-1.507 10.007-2.217 3.256-.691 6.52-1.362 9.713-2.311 1.325-.394 2.724-1.15 4.088-1.12 1.482.03 2.778.133 4.27-.133 1.524-.272 3.019-.699 4.554-.904 1.427-.19 2.868.039 4.28-.2 1.592-.27 3.07-.973 4.612-1.427 1.508-.446 2.897-.307 4.448-.307-3.822 2.956-7.819 5.678-11.713 8.537-3.934 2.886-7.605 6.075-11.387 9.149-3.062 2.485-6.89 4.876-8.775 8.452-1.516 2.879-1.798 6.446-1.188 9.614.766 3.974 3.707 4.478 7.282 4.726 4.62.32 8.182-1.637 12.215-3.624 7.898-3.891 15.53-8.385 22.994-13.045 3.693-2.306 7.774-4.044 11.697-5.92 2.075-.992 4.153-1.978 6.232-2.961 1.7-.805 3.924-2.408 5.8-2.224-5.163 10.696-10.567 21.277-15.116 32.259-1.907 4.604-3.425 9.364-3.8 14.36-.263 3.505-.08 10.446 4.298 11.606 1.954.518 3.714-.778 5.028-2.07 1.873-1.843 3.598-3.86 5.388-5.785a174.275 174.275 0 0 1 10.98-10.79c3.872-3.49 7.742-6.898 11.218-10.792 3.313-3.711 7.453-6.523 10.608-10.38 3.24-3.963 6.146-8.186 9.409-12.13 2.147-2.596 3.872-6.661 7.556-7.238.549 3.064 3.191 5.788 5.039 8.292 4.078 5.53 9.003 10.06 14.097 14.63 4.607 4.135 9.559 7.601 15.37 9.841 3.825 1.475 11.824 4.892 14.827.251 1.428-2.206.674-6.512.14-8.927-.741-3.354-2.368-6.496-3.837-9.58-2.987-6.275-6.297-12.298-9.657-18.373-1.687-3.053-3.342-6.126-5.162-9.101-1.58-2.58-3.775-5.068-4.552-8.047-.322-1.225-.52-2.888-.124-4.125.42-1.315.97-1.073 2.148-1.241 2.585-.369 1.806-5.141 1.467-7.002-.301-1.657-.922-3.257-1.517-4.827-.504-1.331-1.626-3.145-1.563-4.586.058-1.364 1.381-2.753 1.917-3.977.623-1.423 1.031-2.911 1.472-4.398 2.019-6.817 4.664-13.401 6.344-20.321 1.672-6.887 3.448-13.624 5.9-20.285 2.542-6.907 5.315-13.745 7.628-20.735 2.245-6.781 4.455-13.547 6.921-20.255 4.948-13.454 10.22-26.809 16.053-39.906 5.755-12.924 12.293-25.503 17.267-38.762 2.393-6.377 4.756-12.71 7.01-19.137a374.847 374.847 0 0 1 7.541-19.708c2.76-6.654 5.036-13.523 7.396-20.326 2.322-6.696 4.309-13.619 7.173-20.1.737.802 1.415 1.378 1.944 2.325.528.943.976 1.827 1.706 2.644 1.312 1.465 2.98 2.49 4.57 3.616.996.704 1.821 1.545 2.96 1.7l.09.012c-.205.012-.41.022-.64.069 1.45 1.006 2.9 2.01 4.353 3.02a13.09 13.09 0 0 0-.383-.817c.471.82.962 1.594 1.98 1.769a2.36 2.36 0 0 1-.245.029c.688.509 3.131 2.941 2.916.318.094.425-.065.746.113 1.172.189.449.627.86.956 1.22.69.75 1.494 1.387 2.318 1.98 1.935 1.39 4.021 2.557 5.9 4.028.543.425 2.387 2.565 3.023 2.564l3.557 3.101c-.453-1.589-.909-3.176-1.364-4.764l.99 3.455c.383 1.339.962 1.824 1.968 2.723 1.765 1.578 3.515 3.177 5.347 4.68 3.342 2.738 7.178 4.862 10.757 7.273 1.947 1.31 3.856 2.656 5.709 4.094 1.52 1.18 3.378 1.597 4.89 2.741 1.901 1.443 3.588 3.322 5.238 5.039 1.48 1.538 3.226 3.089 4.248 4.984 1.157 2.149 1.176 4.95 1.536 7.329.365 2.4.726 4.801 1.076 7.204.721 4.93 1.403 9.866 1.995 14.813.582 4.864 1.296 9.724 1.719 14.604.428 4.938.32 9.882.876 14.816 1.112 9.896 2.373 19.984 4.492 29.72 2.136 9.81 3.504 19.76 5.358 29.632.954 5.077 1.963 10.144 2.958 15.213.489 2.493 1.016 4.98 1.51 7.471.407 2.06.195 4.13.557 6.207.192 1.112.463 2.225.463 3.36.001 1.104-.691 2.07-.73 3.058-.055 1.392 1.22 3.588 1.992 4.697 1.166 1.674 2.78 3.188 4.133 4.724 1.363 1.547 1.911 2.102 1.427 4.192-2.078 8.963 3.246 16.472 8.93 22.809 6.258 6.976 12.517 13.7 19.696 19.739 3.76 3.164 7.3 6.579 10.899 9.922 3.45 3.205 7.172 5.707 11.204 8.151 4.086 2.478 8.417 4.284 12.652 6.461 4.176 2.147 8.234 4.184 12.675 5.748 4.223 1.487 8.5 2.753 12.553 4.643 3.2 1.491 7.26 1.427 10.491.048 2.175-.93 4.042-2.623 5.984-3.947a86.777 86.777 0 0 1 5.571-3.524c3.146-1.813 6.222-3.924 7.565-7.464 1.59-4.192.215-9.226-.694-13.436-.93-4.304-2.85-8.314-5.15-12.044-2.398-3.884-5.38-7.245-8.132-10.865-2.847-3.744-5.383-7.685-8.36-11.34-2.949-3.616-6.038-7.064-9.357-10.34-3.312-3.267-6.205-6.91-9.26-10.412-.736-.843-1.861-1.749-2-2.944-.12-1.041.596-1.793.94-2.71.666-1.778.469-3.732.503-5.59.017-.905.002-1.835.453-2.655.42-.765 1.2-1.07 1.498-1.892.265-.732.168-1.658.315-2.423.187-.97.64-1.677.95-2.598.773-2.303-.186-4.988-.62-7.272-.41-2.157-.797-4.318-1.195-6.476-.86-4.667-1.502-9.345-2.968-13.874-2.98-9.193-5.894-18.338-6.092-28.1-.1-4.889-1.463-9.573-2.593-14.3a2041.085 2041.085 0 0 0-3.652-15.026c-2.369-9.584-5.21-19.028-7.637-28.595-2.419-9.532-4.62-19.127-7.498-28.533-2.908-9.507-6.95-18.432-11.274-27.366-2.08-4.295-4.356-8.003-7.416-11.672-3.173-3.803-6.427-7.54-9.687-11.27-6.575-7.527-13.156-15.048-19.827-22.489-3.322-3.704-6.686-7.237-10.562-10.372-3.453-2.795-8.183-5.148-9.272-9.715-.307-1.29-.514-2.602-.853-3.883-.195-.74-.802-1.858-.707-2.664.19-1.6 3.15-2.211 4.347-2.753 4.143-1.875 8.334-3.732 12.398-5.774 2.245-1.128 4.24-2.503 6.33-3.877 1.758-1.158 3.763-1.507 5.746-2.122 4.404-1.366 8.469-3.313 12.533-5.465 4.195-2.22 8.425-4.44 12.491-6.887 4.129-2.485 7.332-5.54 10.832-8.785 1.565-1.45 2.678-.72 3.787.877 1.35 1.941 2.772 3.833 4.167 5.742.65.889 1.209 1.938 2.13 2.47.037.023.065.035.1.053-.16-.054-.33-.112-.522-.189.338 2.402 2.146 4.043 3.74 5.697-.15-.41-.292-.823-.434-1.236.399 1.144.95 1.92 1.686 2.895 1.464 1.94 3.111 3.648 4.842 5.351.895.88 1.8 1.752 2.705 2.625.36.348.724.697 1.084 1.048.583.564.912.745 1.523 1.02 1.238.559 1.526 1.535 2.594 2.306 1.605 1.16 3.603 1.926 5.265 3.07 1.356.933 2.536 2.83 4.105 3.177.568.125.99.034 1.447.483.602.59-.024.578.924.79.478.108.971-.166 1.453-.013.508.162.957.603 1.385.915.98.715 1.961 1.43 2.94 2.148a350.21 350.21 0 0 1 5.25 3.92c3.458 2.64 6.634 5.628 10.102 8.25 1.794 1.356 3.724 2.347 5.64 3.498 1.596.96 2.941 2.256 4.437 3.353 1.786 1.31 3.871 1.949 5.724 3.133 1.82 1.162 3.57 2.362 5.461 3.41 4.132 2.287 8.33 4.42 12.709 6.19 4.427 1.791 8.956 3.236 13.762 3.462 4.878.231 9.494-1.046 13.992-2.826a124.85 124.85 0 0 0 13.047-6.033c4.103-2.198 7.923-4.842 11.946-7.171a176.198 176.198 0 0 0 11.717-7.432c3.657-2.517 7.134-5.329 11.082-7.385 3.984-2.075 7.517-4.777 11.268-7.227 3.855-2.518 7.684-5.054 11.51-7.62 7.978-5.347 15.964-10.785 23.542-16.694 3.638-2.838 7.227-5.754 10.414-9.095 3.401-3.568 7.458-6.606 11.194-9.815l10.754-10.438a.174.174 0 0 0 .018-.018l-10.772 10.456c1.706-.32 2.815-1.428 4.185-2.49a231.124 231.124 0 0 0 4.289-3.406c2.063-1.68 4.45-3.407 4.21-6.383a48.817 48.817 0 0 1 2.786-2.434c1.57-1.252 3.442-2.016 5.11-3.125 3.425-2.276 6.365-5.174 9.582-7.719 1.416-1.118 2.687-1.965 2.908-3.884.24-2.083-.042-4.34-.056-6.439-.011-1.622-.476-3.886.144-5.421.623-1.539 2.693-2.199 4.033-2.933 3.784-2.076 7.511-4.252 11.298-6.323 3.727-2.038 6.967-3.396 11.23-3.76 1.855-.16 3.636-.439 5.471-.724 1.897-.296 3.664.264 5.522.604 4.213.773 8.477 1.234 12.689 2.017 4.241.788 8.436 1.837 12.625 2.87 4.193 1.033 8.378 2.133 12.635 2.88 2.178.381 4.43.632 6.541 1.312 1.597.513 3.132 1.237 4.774 1.6 3.975.876 8.015.98 11.9 2.308 3.879 1.325 7.836 1.993 11.88 2.601 2.117.32 4.227.66 6.322 1.113 1.264.274 2.388.435 3.67.121 2.656-.65 4.811-2.788 5.66-5.362 2.343-7.1-2.19-14.721-6.804-19.757-4.95-5.401-11.203-9.182-17.144-13.36 2.367-.26 4.72.089 7.086.132 2.027.037 4.011-.053 6.043.058 4.497.246 8.98-1.056 13.483-1.152 6.095-.13 13.616-1.373 15.208-8.32 1.481-6.465-5.377-12.292-10.27-15.226-3.144-1.885-6.327-3.61-9.406-5.605-3.29-2.131-7.355-3.385-10.989-4.819-3.698-1.46-7.422-2.887-11.27-3.904-3.697-.978-7.442-1.502-10.987-2.95 3.225-1.407 6.714-1.717 10.168-2.362 3.44-.643 6.821-1.494 10.192-2.426Z"}),(0,Rc.jsx)("path",{d:"M980.03 463.71c-.36 1.524-1.245 2.273-2.754 2.636-2.489.598-5.218.69-7.757 1-4.64.565-9.438.8-13.99 1.9-4.26 1.028-8.52 2.566-12.367 4.678 1.258-6.015 2.684-11.858 2.156-18.053-.388-4.549-.496-11.402-5.093-14.032-1.064-.61-2.75-.38-3.932-.443-1.538-.082-3.078-.154-4.617-.24-3.044-.167-6.072-.487-9.106-.784a370.604 370.604 0 0 1-17.87-2.185c-.984-.144-2.75-.036-3.408-.889-.486-.627-.254-1.618-.217-2.323a41.527 41.527 0 0 0-.276-7.283c-.662-5.296-2.124-10.507-3.759-15.575-.828-2.562-1.713-5.104-2.547-7.664-.402-1.237-1.337-2.925 0-3.81.834-.554 2.292-.55 3.262-.792 1.155-.287 2.28-.664 3.41-1.035 2.666-.877 5.329-1.766 7.993-2.653 10.122-3.372 20.335-6.52 30.428-9.96 1.412-.48 2.815-.984 4.227-1.465.612-.207 1.674-.742 2.333-.454.77.34.621 1.187 1.174 1.692.483.44 1.577.473 2.199.831 1.579.911 2.568 2.5 3.807 3.782 1.594 1.65 3.376 3.099 4.95 4.779 6.351 6.781 11.051 14.945 15.03 23.294 1.071 2.249 1.768 4.575 2.438 6.968.633 2.264 1.442 4.477 1.802 6.808.838 5.443.869 11.044 1.541 16.522.562 4.59 2.027 10.15.943 14.75m-40.35-12.295c-.013 3.626-.204 7.275-.998 10.824-.818 3.658-2.296 7.161-3.614 10.66-1.244 3.301-2.25 6.705-3.694 9.926-1.423 3.178-3.247 6.075-4.389 9.375-2.342 6.765-6.354 12.7-9.194 19.233-2.9 6.677-6.132 13.053-9.737 19.383-1.714 3.011-3.305 6.342-5.473 9.054a40.49 40.49 0 0 1-3.55 3.88c-1.085 1.04-1.606.246-2.918.482-1.913.343-2.9 2.825-4.137 4.102-2.346 2.418-4.743 4.807-7.312 6.987-2.632 2.231-5.54 4.097-8.24 6.245-2.576 2.051-5.15 3.904-8.095 5.4-5.816 2.954-12.503 6.578-19.213 6.268-3.088-.143-4.742-2.153-6.035-4.836-1.37-2.84-.908-6.245-.678-9.292.275-3.655 1.159-6.879 3.108-9.98 1.92-3.056.027-4.953-1.888-7.5-4.272-5.687-9.965-10.115-15.157-14.92-2.68-2.482-5.338-4.99-7.993-7.499a4762.987 4762.987 0 0 1-4.399-4.163c-1.074-1.018-2.11-1.705-2.497-3.135 2.922-1.575 5.967-2.917 8.66-4.886 5.496-4.02 10.539-8.926 15.72-13.348 2.488-2.125 4.455-4.758 6.454-7.327 1.93-2.48 4.14-4.821 5.806-7.496 3.581-5.754 7.666-11.452 10.505-17.622 1.416-3.075 2.147-6.212 2.888-9.496.446-1.978.96-3.94 1.46-5.904.323-1.266.416-3.448 1.227-4.494 1.493-1.927 6.185 1.185 7.904 1.732 3.235 1.03 6.606 1.518 9.952 2.036 7.097 1.097 14.244 2.035 21.296 3.396 3.694.713 7.397 1.503 11.146 1.876 3.634.362 7.288.174 10.93.147.78-.007 1.732.132 2.256-.584.298-.41.098-.919.578-1.302.625-.499 1.442-.23 2.16-.154 1.458.155 2.92.244 4.376.425.629.078 1.88-.028 2.417.303.566.35.371 1.402.368 2.204m-102.149 97.338c-1.698 3.424-2.68 8.213-2.73 12.006-.028 2.036.24 4.067.658 6.056.363 1.736 1.356 3.733 1.044 5.48-4.308-1.991-8.54-4.134-12.934-5.932-3.796-1.553-6.648-4.257-9.772-6.826-3.355-2.757-6.391-5.831-9.614-8.735-3.46-3.118-7.067-6.065-10.585-9.113-6.263-5.427-11.522-11.526-16.663-18.01-4.52-5.7-11-12.971-10.697-20.683.143-3.58.405-7.65 2.16-10.853 1.458-2.661 4.096-5.645 6.562-7.425 2.371-1.71 4.699 2.589 6.032 4.1 2.871 3.251 5.799 6.45 8.711 9.664 5.54 6.113 10.796 12.532 16.787 18.215 6.04 5.726 12.213 11.327 18.716 16.519 3.255 2.598 6.842 5.02 9.797 7.964 1.085 1.08 3.19 2.271 3.915 3.62.776 1.454-.78 2.73-1.387 3.953m148.21-84.417c-.912-.118-.869.005-.946-.89-.12-1.387.349-3.025.49-4.415.672-6.614.35-13.545-.226-20.16-1.133-12.994-3.81-25.769-10.604-37.04-3.136-5.203-6.682-10.11-11.127-14.28-2.05-1.921-4.05-3.99-6.316-5.659-1.137-.838-2.792-1.261-3.828-2.119-.559-.464-.807-1.409-1.279-2.001-1.885-2.363-4.014-2.973-7.021-2.718-3.12.265-6.39 1.243-9.4 2.078-6.403 1.776-12.545 4.796-18.747 7.179-6.231 2.393-12.392 4.943-18.536 7.547-2.672 1.13-5.896 2.02-8.267 3.727-1.433 1.032-1.854 2.313-1.7 4.03.544 6.062 2.794 12.083 4.506 17.883 1.838 6.228 3.336 12.573 3.805 19.065-6.348-.465-12.657-.948-18.976-1.746-3.16-.4-6.338-.727-9.492-1.16-1.631-.225-2.392-.834-3.703-1.681-1.152-.743-1.745-.114-2.236 1.016-2.556 5.872-3.562 12.278-6.33 18.107-1.242 2.618-2.794 5.062-4.085 7.654-1.406 2.818-3.1 5.591-4.862 8.198-.818 1.21-1.867 2.19-2.774 3.324-.84 1.051-1.443 2.26-2.215 3.36-1.613 2.299-3.567 4.324-5.545 6.306a192.418 192.418 0 0 0-5.806 6.079c-1.865 2.038-4.091 3.692-6.062 5.616-1.855 1.81-3.47 3.781-5.373 5.555-1.833 1.71-2.691 4.083-4.663 5.62-1.063.83-2.243 1.495-3.3 2.33-.875.69-1.788 1.897-3.029 1.666-1.377-.258-2.485-2.11-3.346-3.065a421.271 421.271 0 0 0-3.354-3.671c-4.419-4.784-8.95-9.473-13.407-14.225-2.178-2.324-4.574-4.432-6.697-6.808-1.547-1.732-4.079-2.965-6.245-1.78-2.186 1.195-4.81 2.25-6.58 4.044-1.918 1.944-3.447 4.471-5.009 6.702-1.626 2.323-2.272 5.067-2.698 7.829-.452 2.943-.924 5.859-.7 8.846.425 5.655 1.476 11.966 4.746 16.728 1.558 2.27 3.693 3.974 5.602 5.926 2.068 2.117 3.545 4.665 5.25 7.067 3.42 4.82 7.622 9.135 11.907 13.19 2.044 1.933 4.358 3.563 6.412 5.503 2.193 2.073 4.414 3.942 6.889 5.665 2.531 1.762 4.622 4.057 6.909 6.105 2.356 2.11 4.767 4.077 7.36 5.885 4.974 3.47 10.032 5.729 15.816 7.473 6.37 1.922 12.536 4.437 18.87 6.446 3.036.962 6.04-.369 8.932-1.343 2.948-.993 5.84-2.17 8.555-3.7 5.506-3.104 10.794-6.705 16.21-9.975 5.633-3.4 10.338-7.298 14.641-12.273 4.101-4.744 8.442-9.454 12.177-14.491 7.582-10.231 12.167-22.334 17.794-33.663 2.992-6.022 6.023-11.95 8.511-18.209 1.224-3.078 2.32-6.212 3.569-9.279.529-1.3.966-1.805 2.384-2.026 1.638-.256 3.312-.369 4.957-.565 6.508-.776 12.86-1.928 19.31-3.042 5.986-1.032 12.008-2.1 17.36-5.141 1.125-.64 2.475-1.392 3.088-2.588.279-.546.965-3.314.577-3.757-.227-.26-1.753-.228-2.142-.28M719.239 53.315c2.079-1.094 4.2-2.103 6.312-3.13 4.475-2.175 8.882-4.499 13.408-6.57 2.049-.936 4.189-1.533 6.293-2.32 2.235-.834 4.371-1.937 6.516-2.974 4.509-2.181 9.118-4.061 13.8-5.833 1.434-.543 2.87-1.077 4.309-1.609 1.104-.407 2.447-1.19 3.595-1.325 1.821-.213 3.189 1.644 4.43 2.76 6.696 6.028 11.424 14.963 14.3 23.413 1.57 4.61 2.283 9.371 3.12 14.152.858 4.9 1.77 9.696 1.803 14.678.034 5.065.554 10.059.33 15.136-.083 1.894.258 5.3-.783 6.95-1.058 1.672-3.706 2.14-5.41 2.757-9.317 3.378-18.625 7.015-28.078 9.988a3423.61 3423.61 0 0 0-29.459 9.415c.4-2.79.867-5.578 1.18-8.378.295-2.637.075-5.366.052-8.016-.05-5.823-.24-11.614-1.41-17.337-2.124-10.392-5.557-20.623-11.312-29.594-1.35-2.101-2.957-4.018-4.56-5.926-.573-.683-2.493-2.299-2.425-3.35.091-1.377 2.995-2.363 3.989-2.887m111.806-1.129c2.15.098 3.542.593 3.691 2.895.191 2.934.15 5.906.255 8.847.202 5.625.404 11.251.256 16.88-.26 9.861-1.309 19.708-4.329 29.132-1.46 4.555-3.206 9.033-5.093 13.427-1.83 4.264-4.418 8.098-6.708 12.114-1.128 1.975-2.393 3.58-3.948 5.239-.736.787-1.074 1.206-2.115 1.34-1.056.136-2.385-.137-3.445-.213-4.989-.359-9.975-.854-14.972-1.095-4.953-.238-9.928-.03-14.875-.26-2.324-.108-4.514-.863-6.8-1.231-2.3-.371-4.627-.534-6.942-.795-1.193-.135-1.164.147-1.345-.938-.097-.578.07-1.325.1-1.917.06-1.14.119-2.28.188-3.42.062-1.018-.144-2.806.268-3.77.368-.857 1.156-1.006 1.977-1.23 4.607-1.265 9.058-2.83 13.49-4.617 4.521-1.822 9.097-3.543 13.567-5.491 1.927-.84 4.1-1.608 5.56-3.191 1.197-1.299 1.885-2.968 2.414-4.629 2.912-9.136 1.998-19.665 1.145-29.077-.877-9.674-2.26-19.602-5.803-28.697 11.148 0 22.326.185 33.464.697M706.614 60.55c3.096 1.16 5.047 3.865 6.85 6.471 2.246 3.25 4.365 6.536 6.124 10.082 3.694 7.451 6.133 15.662 7.524 23.85 1.331 7.816 1.99 16.533.46 24.374-.41 2.097-1.48 3.78-2.077 5.766-.402 1.335-.122 3.276.24 4.603.52 1.903 2.314 1.254 3.81.946 2.182-.45 4.365-.895 6.545-1.355 8.218-1.734 16.356-4.751 24.723-5.361-.713 2.225-1.111 4.244-2.55 6.151-1.345 1.784-3.137 3.33-3.911 5.48-.645 1.79-.77 4.297-.113 6.115.69 1.908 2.376 1.935 4.145 2.15 4.974.603 9.869 1.422 14.884 1.696 1.078.058 2.154.18 3.218-.025.857-.165 1.458-.42 2.324-.26 1.147.21 2.158.763 3.362.886 1.133.116 2.275.08 3.41.037 4.2-.157 8.307.28 12.51-.129 1.226-.12 3.527-.814 4.672-.114 1.21.74.262 2.233.864 3.26.794 1.35 3.52.658 4.838.585 1.882-.103 3.55-.436 5.237-1.304 3.41-1.755 6.492-4.091 9-7.005 2.624-3.049 4.527-6.61 6.404-10.146 1.958-3.686 3.92-7.287 5.4-11.203 1.513-4 2.996-8.128 3.853-12.325.856-4.191 1.398-8.448 2.206-12.651.843-4.384.99-8.853 1.214-13.3.23-4.612.332-9.144.043-13.756-.283-4.531-.783-8.975-1.314-13.478-.136-1.15-.066-2.342-.249-3.482-.124-.766-.523-1.493-.567-2.27-.088-1.546 1.33-2.54 1.293-4.156-.086-3.755-4.08-5.153-7.047-6.051-3.858-1.168-8.162-1.872-12.196-1.582-8.68.624-17.552.705-25.784 3.874-4.266-7.312-8.24-15.243-15.221-20.37-.787-.58-1.641-.975-2.151-1.83-.436-.733-.628-1.469-1.21-2.13-1.433-1.624-3.199-1.826-5.204-1.4-4.364.923-8.533 1.935-12.67 3.588-1.837.733-3.786 1.078-5.63 1.795-1.774.688-3.47 1.552-5.175 2.392-3.73 1.84-7.588 3.403-11.315 5.258-7.486 3.726-14.886 7.632-21.777 12.391-3.328 2.3-7.144 4.677-9.966 7.596-1.242 1.285-1.805 2.907-1.598 4.68.215 1.846 1.16 1.127 2.572 1.657M216.13 74.834c.366-4.76.218-9.532.563-14.289.33-4.52 1.242-9.122 2.13-13.565.903-4.518 2.544-8.529 4.389-12.723 1.018-2.314 2.002-4.643 2.989-6.97.602-1.428 1.043-2.907 2.713-3.287 2.165-.494 4.779-.094 7.006-.173 2.25-.08 4.499-.216 6.742-.415 4.876-.433 9.72-1.146 14.588-1.651 4.662-.483 9.272-.766 13.875-1.727 2.37-.494 4.718-1.073 7.067-1.65 1.76-.431 4.2-1.535 5.971-1.116-2.19 4.988-2.872 10.312-2.926 15.71-.02 2.127-.272 2.997-2.487 2.867-2.764-.164-5.539-.442-8.288-.758-5.188-.599-10.335-1.549-15.478-2.44-2.438-.422-4.78-1.023-7.17-1.552-1.699-.374-2.413.299-2.98 1.85-.41 1.122-.542 1.627-1.595 2.26-.86.518-1.707 1.008-2.499 1.633-1.41 1.11-2.624 2.446-3.662 3.91-2.304 3.242-3.781 7.053-5.134 10.769-3.4 9.352-5.112 19.523-5.428 29.455-.16 5.05-.993 10-1.048 15.067-.026 2.234.544 5.108-1.321 6.73-1.824 1.59-4.167 2.73-6.202 4.032-1.784-5.11-2.244-10.53-2.298-15.908-.056-5.36.074-10.714.484-16.059m75.485-27.046c2.228.593 4.467 1.118 6.714 1.639-3.821 9.158-3.687 19.289-3.976 29.05-.128 4.367-.011 8.744.418 13.09.442 4.447 1.441 8.69 2.34 13.05.195.952.665 2.513.038 3.386-.695.967-2.971 1.49-3.958 1.935-3.917 1.766-7.773 3.682-11.77 5.267-4.052 1.607-8.261 2.571-12.223 4.438-3.878 1.827-7.807 3.502-11.845 4.946-3.967 1.42-8.084 2.461-11.913 4.247-3.632 1.693-6.63 4.02-9.716 6.53-1.876-5.827-2.607-11.755-2.946-17.862-.325-5.845-.804-11.93-.207-17.762.271-2.66.272-5.136.219-7.8-.048-2.385.503-4.723.693-7.096.418-5.228.401-10.45 1.109-15.657 1.34-9.85 4-20.276 9.366-28.72.342-.538.676-1.406 1.148-1.804.795-.668.513-.543 1.559-.004.976.5 1.938 1.033 2.945 1.471 2.115.92 4.378 1.325 6.584 1.952 2.444.695 4.661 1.759 7.198 2.152 2.457.381 4.954.427 7.41.814 1.358.214 2.604.663 3.926 1 1.076.275 2.13.202 3.262.32 2.188.232 4.318.845 6.512 1.043 2.467.223 4.664-.276 7.113.375m-80.85 42.522c.757 6.029 2.37 11.935 4.72 17.538.756 1.802 1.608 4.324 3.768 4.822 1.992.459 4.406-1.005 6.283-1.519 1.472 8.75 2.116 17.841 6.02 25.951.493 1.024 1.143 2.932 2.157 3.603 1.036.685 2.295.016 3.328-.377 4.338-1.644 8.819-2.696 13.308-3.834 2.19-.555 4.42-1.048 6.557-1.79 1.774-.617 3.45-1.358 5.31-1.694 3.885-.703 7.495-1.974 11.209-3.285 7.795-2.754 15.632-5.247 22.826-9.382 3.433-1.973 7.034-3.906 10.204-6.29 2.6-1.953 5.509-4.882 4.235-8.43-.385-1.073-1.44-2.849-2.655-3.176-1.14-.31-2.164.723-3.207.96-1.577.361-1.223-.911-1.37-2.153-.115-.979-.236-1.957-.355-2.936-.248-2.055-.493-4.11-.677-6.173-.759-8.54-.402-17.076-.41-25.631-.003-4.283.988-8.038 1.988-12.164.53-2.19 1.024-4.388 1.49-6.59.258-1.225.559-2.57.204-3.809-.795-2.778-4.752-3.546-7.095-4.337-2.014-.68-4.059-1.272-6.144-1.688-1.143-.228-4.196-.05-4.935-1.01-.732-.95.078-4.033.152-5.164.137-2.082.28-4.162.555-6.232.442-3.339.394-6.435-2.27-8.877 1.661-1.324 2.84-4.133.425-5.353-2.779-1.405-6.497-1.608-9.432-.872-3.21.806-6.733.816-10.02 1.169-3.499.373-6.987.828-10.478 1.268-6.005.76-12.122.927-18.054 2.146-2.97.61-5.944 1.073-8.938 1.546-3.101.49-4.97.905-6.827 3.522-3.518 4.963-6.766 10.05-8.742 15.844-1.87 5.489-2.743 11.256-3.263 17.015-.56 6.206-.685 12.395-.615 18.623.07 6.263-.033 12.529.749 18.759M84.613 335.594c.356-.603 1.435-.751 2.003-.979.897-.359 1.746-.808 2.58-1.29 4.18-2.412 8.258-4.876 12.12-7.781.947-.712 3.274-3.327 4.645-2.914.672.204 1.038 1.319 1.33 1.863.509.958 1.038 1.9 1.614 2.82 2.274 3.63 5.108 6.889 8.273 9.773 5.95 5.42 12.728 8.921 20.89 9.34-5.27 7.163-10.308 14.645-16.294 21.242-3.02 3.33-6.333 6.34-9.47 9.553-.535.548-.823.877-1.528 1.192-.683.304-1.333.403-1.897.964-.981.977-1.05 2.431-.83 3.721-5.57.214-11.6-2.28-16.655-4.325-2.966-1.201-5.893-2.538-8.68-4.117-1.893-1.072-4.01-2.27-5.399-3.991 5.108-2.718 10.272-5.302 15.167-8.397 3.342-2.112 9.248-4.579 8.77-9.455-.074-.758-.372-1.69-1.044-2.128-.994-.648-1.22.117-2.124.313-1.468.317-3.201-1.622-4.321-2.456-3.029-2.258-5.987-4.751-7.784-8.138-.537-1.014-2.058-3.634-1.366-4.81m-31.11 43.178c.829-2.7-3.04-4.779-4.749-6.078-2.562-1.95-4.344-4.108-6.068-6.832-6.724-10.627-9.106-23.571-8.555-35.997.153-3.449.544-6.891.624-10.342.041-1.791-.075-3.46.317-5.229.371-1.672.815-3.326 1.225-4.99.82-3.316 1.24-6.714 2.218-9.992.909-3.037 2.147-5.966 3.598-8.783.966-1.88 1.867-4.516 4.393-4.156 3.156.452 6.241 2.077 9.315 2.925 3.404.939 6.846 1.723 10.282 2.531 3.324.78 6.574 1.89 9.92 2.564 1.75.353 3.479.497 5.26.466.777-.013 2.173-.088 2.25.975.083 1.163-1.702 2.426-2.435 3.138-1.035 1.006-1.795 1.953-2.36 3.289-1.349 3.18-2.57 6.5-3.07 9.93-.486 3.337-.402 6.846-.44 10.214-.074 6.792.889 13.297 3.326 19.66 2.208 5.756 5.667 9.726 10.402 13.57-4.947 2.464-9.895 4.93-14.843 7.389-4.458 2.215-8.964 4.127-12.775 7.4-1.569 1.348-3.425 2.904-4.545 4.661-1.4 2.196.57 3.69 2.658 2.81 2.298-.965 4.555-2.07 6.805-3.142 1.463-.698 3.906-2.568 5.614-2.521 1.45.04 2.001 1.895 2.647 2.923 1.034 1.644 2.323 3.109 3.744 4.43 2.986 2.778 6.487 5.101 10.17 6.85 4.062 1.932 8.449 3.251 12.882 4.007 2.419.412 4.877.63 7.329.537 1.84-.069 4.446-.074 6.107-.972 1.43-.774.68-2.351 2.095-3.16 1.49-.85 3.067-1.485 4.507-2.44 3.401-2.258 5.42-5.168 7.416-8.649 4.583-7.993 10.157-15.298 13.586-23.914.802-2.018 1.26-4.398 2.573-6.16.873-1.17 2.823-1.867 3.035-3.403.206-1.502-.398-4.823-1.89-5.517-1.726-.802-4.233-.814-6.106-1.25-8.136-1.9-15.727-4.792-22.212-10.176a50.55 50.55 0 0 1-4.59-4.34c-1.069-1.14-2.189-2.338-1.97-4.019.194-1.494 1.392-3.675-1.053-4.094-1.64-.281-3.895.583-5.232 1.427-4.006 2.53-7.728 5.572-11.553 8.365-3.488 2.547-7.061 4.972-10.606 7.44.414-5.863.223-12.217 1.618-17.94.682-2.795 1.872-5.431 3.401-7.862 1.572-2.495 2.825-5.108 4.199-7.71.764.444 2.014 1.436 2.713.254.435-.734.13-2.666-.034-3.51-1.217-6.258-10.72-6.885-15.62-7.953-7.048-1.535-14.087-3.392-21.22-4.482-3.295-.504-6.562-.604-9.877-.806-1.701-.104-3.684-.482-4.713 1.239-.276.462-.316 1.12-.617 1.488-.276.338-1.08.667-1.459.972-1.098.883-2.046 1.923-2.876 3.058-1.7 2.323-2.865 4.996-3.99 7.629-2.715 6.35-4.257 13.09-5.104 19.925-.868 7.006-1.472 14.25-1.01 21.307.849 12.99 4.379 26.205 12.561 36.587 1.876 2.38 3.92 4.329 6.624 5.747 1.308.686 5.42 3.115 6.159.712M146.724 531.62c-2.536 3.26-5.068 6.488-7.334 9.949-2.28 3.483-4.453 7.034-6.684 10.549-2.151 3.39-4.554 6.682-6.284 10.318-.998 2.097-1.095 4.857-3.836 4.759-3.622-.129-7.053-1.163-10.245-2.857-6.396-3.395-11.72-8.164-15.714-14.213-4.145-6.275-7.362-13.376-9.692-20.515-1.289-3.948-2.322-7.973-3.255-12.018-.475-2.052-.982-4.062-.986-6.18-.003-.932.055-1.863.103-2.793.045-.88.535-2.415-.477-2.475.303-2.53.592-5.058.902-7.585.225-1.827.21-3.875 1.811-5.083 1.532-1.158 3.935-1.197 5.74-1.605a89.516 89.516 0 0 0 6.487-1.728c4.39-1.346 8.593-3.13 12.831-4.886 2.115-.876 4.232-1.769 6.23-2.9 1.649-.935 2.832-2.292 3.95-.16 7.616 14.514 13.18 30.781 25.648 42.043 1.009.91 2.659 2.004 2.807 3.496.143 1.453-1.197 2.847-2.002 3.883m10.026-10.259c-1.758-1.205-3.939-1.406-5.722-2.519-2.044-1.276-3.397-4.153-4.793-6.07-3.332-4.572-6.67-9.173-9.68-13.969-2.73-4.354-5.203-8.867-7.827-13.286-1.344-2.263-2.732-4.469-4.316-6.573-.674-.895-2.384-4.058-3.825-3.94-.744.06-.714.784-1.247 1.017-.275.12-.494-.012-.762.025-.965.129-2.013-.36-3.007-.263-2.456.239-5.115 1.27-7.479 1.983-4.934 1.489-9.64 3.583-14.491 5.303-4.81 1.706-10.18 2.844-14.576 5.498-1.736 1.048-3.696 2.725-1.991 4.777.646.778 1.533.757 2.205 1.36.568.51.315.79.184 1.638l-.227 1.454c-.787 5.094-1.43 10.197-.72 15.341a109.71 109.71 0 0 0 3.263 15.413c4.598 15.911 12.823 34.795 28.985 41.847 3.778 1.647 7.536 2.037 11.522 2.78 1.253.234 2.315.802 3.429 1.378.533.275 1.192.72 1.833.64 1.463-.18 2.666-2.452 3.349-3.527 2.58-4.06 5.508-7.87 8.187-11.863 1.386-2.068 2.699-4.186 3.834-6.402.658-1.282 1.129-3.407 2.937-3.359l1.462 1.952c.196.261.49.551.633.843.36.735.331.19.182 1.06-.192 1.11-1.221 2.367-1.87 3.243-3.804 5.14-7.774 10.156-11.761 15.153-3.917 4.912-7.918 9.788-12.508 14.092-.929.87-1.946 1.933-3.304 1.991-1.254.054-2.628-.603-3.873-.82-2.706-.473-5.485-.581-8.123-1.4-1.372-.424-2.52-1.218-3.94-1.314-1.195-.083-2.01-.281-3.057-.915-2.37-1.431-5.006-2.217-7.403-3.57-4.943-2.788-10.05-6.93-13.674-11.302-1.878-2.266-3.418-4.79-5.261-7.084-1.79-2.23-3.559-4.447-5.125-6.847-3.088-4.732-5.546-9.86-7.414-15.193-.971-2.77-1.455-4.58.96-6.606 2.277-1.91 4.409-3.908 6.306-6.206.922-1.12 5.132-5.228 1.98-5.911-1.707-.371-4.433 2.51-5.716 3.553-2.09 1.701-4.138 3.35-6.555 4.567-2.736 1.378-2.787 3.128-2.747 5.99.082 5.902 2.28 11.653 4.557 17.04a79.189 79.189 0 0 0 8.821 15.66c6.752 9.307 14.303 18.749 24.799 23.954 5.189 2.575 10.794 3.933 16.528 4.575 3.386.38 6.799.512 10.203.428 1.437-.036 3.315.159 4.693-.278 1.118-.355 1.301-1.184 1.705-2.198.959-2.402 3.465-3.706 5.16-5.63 1.81-2.057 3.707-3.994 5.568-6.001 4.032-4.348 6.701-9.465 9.94-14.375 1.793-2.716 3.732-5.374 5.296-8.233 1.265-2.317 2.838-5.362 3.28-7.975.35-2.085-1.328-5.115-3.635-5.23-1.203-.06-2.167.886-3.352 1.008-.356.038-1.57-.206-1.995-.032 1.938-4.708 4.811-9.14 6.99-13.722a152.287 152.287 0 0 0 3.473-7.848c.822-2.016 1.8-3.67-.288-5.102M187.759 148.671c3.808 8.793 9.93 15.802 16.182 22.939 3.308 3.777 6.685 7.207 10.696 10.246 3.734 2.828 7.513 5.589 11.283 8.367-3.783 4.86-8.033 9.306-12.248 13.8-3.894 4.15-7.775 8.394-10.341 13.521-.266-2.454-1.859-3.97-4.006-4.972-2.68-1.248-5.144-2.606-7.472-4.447-4.94-3.906-9.537-8.561-13.744-13.233-8.557-9.503-14.01-21.455-19.956-32.632 9.868-4.529 19.738-9.058 29.606-13.589m-31.628 22.182c1.445 4.062 3.54 7.973 5.456 11.832 1.888 3.803 3.845 7.583 6.05 11.215 4.192 6.903 9.315 13.336 15.849 18.178 3.198 2.37 6.627 4.732 10.185 6.538 1.682.852 3.527 1.5 5.441 1.392 1.172-.067 2.794-1.105 3.703-.18.93.95.622 2.847 2.577 1.927 1.604-.757 3.015-2.367 4.195-3.63 3.004-3.21 6.02-6.441 8.905-9.76 2.795-3.217 5.09-6.882 7.45-10.42 1.303-1.953 2.592-3.915 3.884-5.876.924-1.403 2.24-2.807 2.171-4.584-.132-3.467-4.384-5.818-6.8-7.746-2.961-2.364-5.711-4.792-8.233-7.62-2.683-3.01-6.062-5.53-8.965-8.356-3.153-3.066-6-6.401-8.825-9.762-2.243-2.669-4.466-5.404-6.366-8.325-1.485-2.284-3.16-4.036-6.129-3.613-2.323.538-4.653.92-6.892 1.774-2.251.858-4.418 1.942-6.606 2.95-3.965 1.825-7.613 4.134-11.465 6.163-.873.46-1.738.935-2.53 1.526-.437.325-.88.953-1.345 1.186-.344.172-.58.133-.975.244-1.561.438-2.15 1.309-2.93 2.679-1.254 2.203-1.219 3.387-.071 5.644 1.049 2.063 1.491 4.448 2.266 6.624M312.492 280.115c.975 1.566 2.572.795 3.484-.32 2.771-3.383 5.364-7.043 7.852-10.644 2.524-3.654 4.838-7.355 7.699-10.766a426.158 426.158 0 0 1 8.819-10.152c11.156-12.48 22.605-24.665 34.907-36.003 3.007-2.771 6.1-5.478 8.988-8.376 1.27-1.275 2.817-2.69 2.757-4.65-.042-1.399-.954-3.123-2.174-3.837-2.653-1.55-6.214 2.227-8.185 3.638-1.508 1.079-3.125 1.644-4.708 2.53-1.385.777-2.77 1.964-3.957 3.023-2.668 2.382-5.542 4.406-8.247 6.725-2.746 2.355-5.173 5.058-7.87 7.468-2.884 2.577-5.978 4.794-8.546 7.73-2.532 2.895-4.67 6.055-7.312 8.873-5.625 5.997-10.225 12.774-15.022 19.442-2.31 3.21-4.055 6.726-5.616 10.358a248.486 248.486 0 0 0-2.284 5.451c-.698 1.732-.756 3.5-1.077 5.317.404.08.102 3.569.492 4.193M935.423 575.729c2.113-2.54 3.5-6.201 5.035-9.131 1.645-3.137 3.17-6.04 3.866-9.533.335-1.681.536-3.4.92-5.069.361-1.578.878-2.97.73-4.619-.155-1.72-.956-6.906-3.57-6.333-1.52.333-1.215 1.959-1.224 3.147-.011 1.362-.17 2.718-.57 4.022-.948 3.084-3.202 5.802-4.63 8.695-1.384 2.804-3.023 5.357-5.092 7.706a55.473 55.473 0 0 1-6.553 6.303c-2.052 1.67-4.527 2.933-6.021 5.198-.893 1.357-1.042 1.763-2.684 2.137-1.325.302-2.57.786-3.684 1.577-1.263.896-2.16 1.968-3.639 2.557-1.286.513-2.648.819-3.946 1.299-3.002 1.108-5.623 2.978-8.69 4.026-1.588.543-3.2 1.007-4.806 1.488-1.285.384-2.804.648-3.867 1.516-1.785 1.46-2.785 5.183-1.224 7.122 1.68 2.087 5.623.782 7.81.515.028.142.054.285.084.427 3.682-.74 7.52-1.177 11.1-2.333 1.89-.612 3.59-1.485 5.319-2.45 1.464-.817 2.964-1.106 4.53-1.628 1.4-.465 2.518-1.173 3.393-2.381 1.118-1.55 1.592-1.088 3.318-1.466 2.772-.609 5.162-3.756 7.069-5.658 2.324-2.318 4.929-4.612 7.026-7.134M405.68 128.495c.647-1.024 2.903-1.951 3.94-2.618a94.792 94.792 0 0 0 4.177-2.824c2.475-1.787 4.204-.613 6.4 1.099 4.058 3.16 5.687 7.405 5.383 12.427.01 1.467.405 3.922-.725 5.13-1.08 1.158-3.323 1.044-4.75 1.332-1.868.379-4.689 2.742-6.623 2.05-1.696-.606-1.096-3.632-1.231-4.967-.256-2.493-1.086-4.906-2.618-6.92-.788-1.035-1.732-1.915-2.77-2.702-.793-.603-1.826-.99-1.183-2.007m-7.438 7.545c1.598.278 3.246 1.019 4.74 1.625.991.402 2.29.779 3.09 1.492 1.33 1.184.79 3.051 1.1 4.6.18.906.645 1.686.31 2.627-.39 1.1-1.542 1.288-2.126 2.18-.854 1.307.248 3.154.986 4.269 1.28 1.935 3.027.947 5.001.657 2.378-.35 4.821-.446 7.111-1.23 1.866-.636 3.414-2.113 4.837-.149.53.734.64 1.381 1.685 1.106.869-.229 1.752-1.408 2.349-2.012 3.717-3.764 4.603-8.906 4.664-13.98.178-5.633-1.869-10.926-4.77-15.687-.61-1-1.223-2.156-2.134-2.933-.887-.757-2.042-1.055-2.844-1.939-1.197-1.318-.92-3.987-2.829-4.568-2.01-.614-4.901 1.824-6.423 2.868-2.144 1.469-4.24 3-6.303 4.575-4.42 3.373-9.357 6.603-13.353 10.46-1.355 1.309-1.908 3.62-.549 5.183 1.36 1.563 3.687.547 5.458.856M635.397 539.654c-.858-4.98-2.303-9.845-4.057-14.588-1.136-3.072-3.728-8.358-7.868-8.053-4.558.334-1.503 6.283-1.06 8.648 1.731 9.255 2.732 18.722 4.1 28.039.678 4.616.883 9.374 1.974 13.919a37.027 37.027 0 0 0 2.223 6.459c.594 1.328 1.306 3.055 2.793 3.654 4.515 1.817 3.387-6.123 3.337-8.08-.123-4.792-.235-9.583-.353-14.376l.37-.01c-.686-5.194-.567-10.429-1.46-15.612M98.497 626.81c-2.471.807-4.307 1.428-6.996 1.173-1.885-.18-3.75-.563-5.628-.8-4.843-.607-9.46-1.944-13.905-3.94-4.041-1.812-7.825-3.997-11.161-6.907-1.76-1.534-3.35-3.22-4.914-4.947-1.12-1.238-2.154-2.17-3.893-2.389.451 2.502.979 4.474 2.174 6.748a39.528 39.528 0 0 0 3.289 5.23 38.095 38.095 0 0 0 9.108 8.69c3.435 2.337 7.299 4.323 11.35 5.347 2.26.572 4.575.913 6.864 1.352 2.162.414 4.264.832 6.471.53 2.065-.284 4.242-.356 6.253-.938 1.588-.46 3.102-1.47 4.457-2.392 2.64-1.798-.237-7.81-3.469-6.756M179.143 63.844c1.228 1.646 3.865 1.655 3.69-.757-.158-2.211-.845-4.39-1.56-6.474-.727-2.127-.577-4.438-.62-6.659-.098-5.303.075-10.44 1.072-15.66.956-5.025 1.574-10.11 2.694-15.104 1.098-4.901 3.088-9.535 4.313-14.395.38-1.5.684-4.43-1.513-4.773-1.827-.285-2.904 2.276-3.612 3.486-2.355 4.024-4.894 7.745-6.291 12.23-1.26 4.039-2.211 8.34-2.653 12.547-.462 4.41-.393 8.866-.663 13.289.441 5.14.207 10.828 1.858 15.754.745 2.218 1.875 4.626 3.285 6.516M868.655 84.046c-.723 1.735-1.075 3.584.166 5.214 2.253 2.957 5.842-3.777 6.387-5.657 1.184-4.075 2.668-8.18 3.33-12.389.677-4.292.355-8.907.462-13.258-.359-5.164-1.046-10.314-2.278-15.337-1.09-4.455-2.249-9.047-5.877-12.05-1.51-1.248-2.545-.304-2.758 1.478-.231 1.955.28 3.922 1.17 5.635 2.087 4.017 2.091 8.714 2.558 13.205.929 8.931 1.45 17.835-.889 26.597-.6 2.247-1.379 4.423-2.27 6.562M102.582 183.827c.518 2.027 1.103 4.04 1.85 5.996 1.445 3.779 3.313 7.41 5.62 10.735 3.808 5.488 8.833 10.7 14.287 14.56 1.798 1.273 6.163 4.83 8.5 3.643 3.196-1.624-1.081-5.768-2.38-6.981-2.677-2.505-5.34-5.03-8.048-7.503-2.716-2.481-4.737-5.66-6.88-8.632-2.157-2.994-4.266-6.025-6.22-9.157-1.012-1.62-1.893-3.32-2.898-4.94-.869-1.403-2.157-2.365-3.276-3.548-.932.444-.823.366-1.063 1.211-.103.363-.07 1.1-.064 1.434.018 1.097.302 2.125.572 3.182M332.034 215.273c5.07-4.592 10.634-8.472 15.421-13.364 1.205-1.231 2.137-1.95 1.093-3.633-.697-1.123-1.496-1.692-2.673-.923-2.812 1.84-5.491 4.1-8.201 6.106-5.557 4.113-11.319 8.146-16.335 12.916-2.27 2.16-4.37 4.51-6.132 7.101-1.85 2.719-3.248 5.477-1.18 8.524 6.027-5.545 11.94-11.232 18.007-16.727M949.599 593.032c-.908-.223-2.417.78-3.092 1.225-2.689 1.771-5.472 3.408-8.191 5.135a367.184 367.184 0 0 0-7.442 4.88c-2.053 1.373-3.399 3.062-2.677 5.657.33 1.184.876 2.57 2.25 1.892 1.009-.498 1.879-.982 2.988-1.374 2.79-.988 5.605-1.964 8.211-3.39 4.517-2.467 8.748-6.288 9.354-11.67-.336-.762-.432-2.117-1.401-2.355M652.715 538.733c-.918-1.002-2.044-1.014-2.53.197-.5 1.247.15 3.386.328 4.623.29 2.027.61 4.049.956 6.067.202 1.178.35 4.84 1.897 5.316 2.372.732 2.43-5.04 2.634-6.214-.5-1.705-.974-3.416-1.478-5.119-.442-1.494-.711-3.672-1.807-4.87M253.205 439.187c-.568-.27-1.006-.153-1.126-.829-.1-.561.781-1.146.915-1.627.483-1.734-1.335.09-1.994.637.624 1.546 1.247 3.09 1.876 4.632.708-.28 1.417-.565 2.124-.85-.677-.917-.762-1.471-1.795-1.963M585.023 159.861c1.182.39 2.913-.14 4.118-.363 1.162-.216 2.471-.539 3.58-.971 2.736-1.068 2.503-4.305 1.872-6.82-.852-3.39-2.748-6.635-4.25-9.763a123.613 123.613 0 0 1-2.244-4.918c-.536-1.255-1.243-3.014-2.868-3.026-2.506-.02-1.283 5.883-.885 7.287 1.002 3.539 2.863 6.8 4.417 10.103-1.436.098-2.913.287-4.346.238-1.488-.05-1.894-.004-2.258 1.658-.524 2.405.199 5.699 2.864 6.575M562.443 130.937c2.699-.167 5.388-.45 8.073-.752 1.976-.223 5.424-.262 6.828-1.825.963-1.072.797-3.354-.05-4.465-1-1.312-3.336-.795-4.821-.795-4.01.067-7.899.6-11.485 2.368-1.316.65-4.28 1.83-3.965 3.599.395 2.222 3.768 1.971 5.42 1.87M573.684 162.065c-2.253.565-1.82 4.425-1.125 6.048 1.041 2.43 3.665 3.02 6.075 2.864 1.16-.116 2.826.3 3.694-.67.857-.958.846-2.88.24-3.954-.804-1.42-2.886-2.224-4.295-2.884-1.226-.574-3.176-1.758-4.589-1.404M573.984 141.998c.176-2.21-1.089-7.179-4.039-6.993-1.402.088-2.596 2.095-2.853 3.328-.269 1.3.104 2.614.445 3.858.559 2.052 1.398 5.219 4.127 4.765 2.263-.378 2.325-3.084 2.32-4.958M595.26 144.225c.596.58 1.467 1.012 2.304.631 1.234-.56 1.022-2.04 1.022-3.095l.414-.134c-.7-1.941-1.159-6.006-3.591-6.556-2.387-.54-2.562 2.112-2.336 3.766.239 1.765.843 4.08 2.186 5.388M520.235 144c-1.185.119-3.416.669-3.223 2.156.28 2.167 3.678 2.554 5.404 2.764 2.043.25 4.877.043 2.933-2.519-1.184-1.56-3.164-2.25-5.114-2.401M420.274 403 419 405.49l3.999.51c.057-1.057-2.016-2.368-2.725-3"})]})]})}),(0,Rc.jsx)("h1",{className:"mt-6 text-2xl font-bold tracking-tight text-gray-900 sm:text-4xl",children:"Uh-oh!"}),(0,Rc.jsxs)("a",{className:"group relative inline-block focus:outline-none focus:ring",href:"#",onClick:()=>{e.updateAddDocumentName(cr.formatTime(new Date)),document.getElementById("addDocument_modal").showModal()},children:[(0,Rc.jsx)("span",{className:"absolute inset-0 translate-x-0 translate-y-0 bg-yellow-300\r transition-transform group-hover:translate-x-1.5 group-hover:translate-y-1.5"}),(0,Rc.jsx)("span",{className:"relative inline-block border-2 border-current px-8 py-3 text-sm font-bold uppercase tracking-widest",children:"Add Documents"})]})]})})}));function Bz(e){return Array.isArray?Array.isArray(e):"[object Array]"===Wz(e)}const Rz=1/0;function Nz(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-Rz?"-0":t}(e)}function Dz(e){return"string"===typeof e}function zz(e){return"number"===typeof e}function Fz(e){return!0===e||!1===e||function(e){return Uz(e)&&null!==e}(e)&&"[object Boolean]"==Wz(e)}function Uz(e){return"object"===typeof e}function Hz(e){return void 0!==e&&null!==e}function Vz(e){return!e.trim().length}function Wz(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Kz=e=>"Missing ".concat(e," property in key"),Gz=e=>"Property 'weight' in key '".concat(e,"' must be a positive integer"),qz=Object.prototype.hasOwnProperty;class Yz{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=Xz(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Xz(e){let t=null,n=null,o=null,r=1,i=null;if(Dz(e)||Bz(e))o=e,t=$z(e),n=Zz(e);else{if(!qz.call(e,"name"))throw new Error(Kz("name"));const s=e.name;if(o=s,qz.call(e,"weight")&&(r=e.weight,r<=0))throw new Error(Gz(s));t=$z(s),n=Zz(s),i=e.getFn}return{path:t,id:n,weight:r,src:o,getFn:i}}function $z(e){return Bz(e)?e:e.split(".")}function Zz(e){return Bz(e)?e.join("."):e}const Qz={useExtendedSearch:!1,getFn:function(e,t){let n=[],o=!1;const r=(e,t,i)=>{if(Hz(e))if(t[i]){const s=e[t[i]];if(!Hz(s))return;if(i===t.length-1&&(Dz(s)||zz(s)||Fz(s)))n.push(Nz(s));else if(Bz(s)){o=!0;for(let e=0,n=s.length;e<n;e+=1)r(s[e],t,i+1)}else t.length&&r(s,t,i+1)}else n.push(e)};return r(e,Dz(t)?t.split("."):t,0),o?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Jz={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...Qz};const eF=/[^ ]+/g;class tF{constructor(){let{getFn:e=Jz.getFn,fieldNormWeight:t=Jz.fieldNormWeight}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.norm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=new Map,o=Math.pow(10,t);return{get(t){const r=t.match(eF).length;if(n.has(r))return n.get(r);const i=1/Math.pow(r,.5*e),s=parseFloat(Math.round(i*o)/o);return n.set(r,s),s},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}setIndexRecords(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}setKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Dz(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();Dz(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Hz(e)||Vz(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,o)=>{let r=t.getFn?t.getFn(e):this.getFn(e,t.path);if(Hz(r))if(Bz(r)){let e=[];const t=[{nestedArrIndex:-1,value:r}];for(;t.length;){const{nestedArrIndex:n,value:o}=t.pop();if(Hz(o))if(Dz(o)&&!Vz(o)){let t={v:o,i:n,n:this.norm.get(o)};e.push(t)}else Bz(o)&&o.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[o]=e}else if(Dz(r)&&!Vz(r)){let e={v:r,n:this.norm.get(r)};n.$[o]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function nF(e,t){let{getFn:n=Jz.getFn,fieldNormWeight:o=Jz.fieldNormWeight}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new tF({getFn:n,fieldNormWeight:o});return r.setKeys(e.map(Xz)),r.setSources(t),r.create(),r}function oF(e){let{errors:t=0,currentLocation:n=0,expectedLocation:o=0,distance:r=Jz.distance,ignoreLocation:i=Jz.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t/e.length;if(i)return s;const a=Math.abs(o-n);return r?s+a/r:a?1:s}const rF=32;function iF(e,t,n){let{location:o=Jz.location,distance:r=Jz.distance,threshold:i=Jz.threshold,findAllMatches:s=Jz.findAllMatches,minMatchCharLength:a=Jz.minMatchCharLength,includeMatches:l=Jz.includeMatches,ignoreLocation:c=Jz.ignoreLocation}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t.length>rF)throw new Error((e=>"Pattern length exceeds max of ".concat(e,"."))(rF));const d=t.length,u=e.length,h=Math.max(0,Math.min(o,u));let p=i,f=h;const g=a>1||l,m=g?Array(u):[];let v;for(;(v=e.indexOf(t,f))>-1;){let e=oF(t,{currentLocation:v,expectedLocation:h,distance:r,ignoreLocation:c});if(p=Math.min(e,p),f=v+d,g){let e=0;for(;e<d;)m[v+e]=1,e+=1}}f=-1;let y=[],b=1,w=d+u;const x=1<<d-1;for(let _=0;_<d;_+=1){let o=0,i=w;for(;o<i;){oF(t,{errors:_,currentLocation:h+i,expectedLocation:h,distance:r,ignoreLocation:c})<=p?o=i:w=i,i=Math.floor((w-o)/2+o)}w=i;let a=Math.max(1,h-i+1),l=s?u:Math.min(h+i,u)+d,v=Array(l+2);v[l+1]=(1<<_)-1;for(let s=l;s>=a;s-=1){let o=s-1,i=n[e.charAt(o)];if(g&&(m[o]=+!!i),v[s]=(v[s+1]<<1|1)&i,_&&(v[s]|=(y[s+1]|y[s])<<1|1|y[s+1]),v[s]&x&&(b=oF(t,{errors:_,currentLocation:o,expectedLocation:h,distance:r,ignoreLocation:c}),b<=p)){if(p=b,f=o,f<=h)break;a=Math.max(1,2*h-f)}}if(oF(t,{errors:_+1,currentLocation:h,expectedLocation:h,distance:r,ignoreLocation:c})>p)break;y=v}const S={isMatch:f>=0,score:Math.max(.001,b)};if(g){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jz.minMatchCharLength,n=[],o=-1,r=-1,i=0;for(let s=e.length;i<s;i+=1){let s=e[i];s&&-1===o?o=i:s||-1===o||(r=i-1,r-o+1>=t&&n.push([o,r]),o=-1)}return e[i-1]&&i-o>=t&&n.push([o,i-1]),n}(m,a);e.length?l&&(S.indices=e):S.isMatch=!1}return S}function sF(e){let t={};for(let n=0,o=e.length;n<o;n+=1){const r=e.charAt(n);t[r]=(t[r]||0)|1<<o-n-1}return t}class aF{constructor(e){let{location:t=Jz.location,threshold:n=Jz.threshold,distance:o=Jz.distance,includeMatches:r=Jz.includeMatches,findAllMatches:i=Jz.findAllMatches,minMatchCharLength:s=Jz.minMatchCharLength,isCaseSensitive:a=Jz.isCaseSensitive,ignoreLocation:l=Jz.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options={location:t,threshold:n,distance:o,includeMatches:r,findAllMatches:i,minMatchCharLength:s,isCaseSensitive:a,ignoreLocation:l},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:sF(e),startIndex:t})},d=this.pattern.length;if(d>rF){let e=0;const t=d%rF,n=d-t;for(;e<n;)c(this.pattern.substr(e,rF),e),e+=rF;if(t){const e=d-rF;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:o,distance:r,threshold:i,findAllMatches:s,minMatchCharLength:a,ignoreLocation:l}=this.options;let c=[],d=0,u=!1;this.chunks.forEach((t=>{let{pattern:h,alphabet:p,startIndex:f}=t;const{isMatch:g,score:m,indices:v}=iF(e,h,p,{location:o+f,distance:r,threshold:i,findAllMatches:s,minMatchCharLength:a,includeMatches:n,ignoreLocation:l});g&&(u=!0),d+=m,g&&v&&(c=[...c,...v])}));let h={isMatch:u,score:u?d/this.chunks.length:1};return u&&n&&(h.indices=c),h}}class lF{constructor(e){this.pattern=e}static isMultiMatch(e){return cF(e,this.multiRegex)}static isSingleMatch(e){return cF(e,this.singleRegex)}search(){}}function cF(e,t){const n=e.match(t);return n?n[1]:null}class dF extends lF{constructor(e){let{location:t=Jz.location,threshold:n=Jz.threshold,distance:o=Jz.distance,includeMatches:r=Jz.includeMatches,findAllMatches:i=Jz.findAllMatches,minMatchCharLength:s=Jz.minMatchCharLength,isCaseSensitive:a=Jz.isCaseSensitive,ignoreLocation:l=Jz.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this._bitapSearch=new aF(e,{location:t,threshold:n,distance:o,includeMatches:r,findAllMatches:i,minMatchCharLength:s,isCaseSensitive:a,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class uF extends lF{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const o=[],r=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+r,o.push([t,n-1]);const i=!!o.length;return{isMatch:i,score:i?0:1,indices:o}}}const hF=[class extends lF{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},uF,class extends lF{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends lF{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends lF{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends lF{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends lF{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},dF],pF=hF.length,fF=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const gF=new Set([dF.type,uF.type]);class mF{constructor(e){let{isCaseSensitive:t=Jz.isCaseSensitive,includeMatches:n=Jz.includeMatches,minMatchCharLength:o=Jz.minMatchCharLength,ignoreLocation:r=Jz.ignoreLocation,findAllMatches:i=Jz.findAllMatches,location:s=Jz.location,threshold:a=Jz.threshold,distance:l=Jz.distance}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:o,findAllMatches:i,ignoreLocation:r,location:s,threshold:a,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map((e=>{let n=e.trim().split(fF).filter((e=>e&&!!e.trim())),o=[];for(let r=0,i=n.length;r<i;r+=1){const e=n[r];let i=!1,s=-1;for(;!i&&++s<pF;){const n=hF[s];let r=n.isMultiMatch(e);r&&(o.push(new n(r,t)),i=!0)}if(!i)for(s=-1;++s<pF;){const n=hF[s];let r=n.isSingleMatch(e);if(r){o.push(new n(r,t));break}}}return o}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:o}=this.options;e=o?e:e.toLowerCase();let r=0,i=[],s=0;for(let a=0,l=t.length;a<l;a+=1){const o=t[a];i.length=0,r=0;for(let t=0,a=o.length;t<a;t+=1){const a=o[t],{isMatch:l,indices:c,score:d}=a.search(e);if(!l){s=0,r=0,i.length=0;break}if(r+=1,s+=d,n){const e=a.constructor.type;gF.has(e)?i=[...i,...c]:i.push(c)}}if(r){let e={isMatch:!0,score:s/r};return n&&(e.indices=i),e}}return{isMatch:!1,score:1}}}const vF=[];function yF(e,t){for(let n=0,o=vF.length;n<o;n+=1){let o=vF[n];if(o.condition(e,t))return new o(e,t)}return new aF(e,t)}const bF="$and",wF="$or",xF="$path",SF="$val",_F=e=>!(!e[bF]&&!e[wF]),kF=e=>({[bF]:Object.keys(e).map((t=>({[t]:e[t]})))});function CF(e,t){let{auto:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e=>{let r=Object.keys(e);const i=(e=>!!e[xF])(e);if(!i&&r.length>1&&!_F(e))return o(kF(e));if((e=>!Bz(e)&&Uz(e)&&!_F(e))(e)){const o=i?e[xF]:r[0],s=i?e[SF]:e[o];if(!Dz(s))throw new Error((e=>"Invalid value for key ".concat(e))(o));const a={keyId:Zz(o),pattern:s};return n&&(a.searcher=yF(s,t)),a}let s={children:[],operator:r[0]};return r.forEach((t=>{const n=e[t];Bz(n)&&n.forEach((e=>{s.children.push(o(e))}))})),s};return _F(e)||(e=kF(e)),o(e)}function EF(e,t){const n=e.matches;t.matches=[],Hz(n)&&n.forEach((e=>{if(!Hz(e.indices)||!e.indices.length)return;const{indices:n,value:o}=e;let r={indices:n,value:o};e.key&&(r.key=e.key.src),e.idx>-1&&(r.refIndex=e.idx),t.matches.push(r)}))}function IF(e,t){t.score=e.score}class TF{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.options={...Jz,...t},this.options.useExtendedSearch,this._keyStore=new Yz(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof tF))throw new Error("Incorrect 'index' type");this._myIndex=t||nF(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Hz(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1;const t=[];for(let n=0,o=this._docs.length;n<o;n+=1){const r=this._docs[n];e(r,n)&&(this.removeAt(n),n-=1,o-=1,t.push(r))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e){let{limit:t=-1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeMatches:n,includeScore:o,shouldSort:r,sortFn:i,ignoreFieldNorm:s}=this.options;let a=Dz(e)?Dz(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,t){let{ignoreFieldNorm:n=Jz.ignoreFieldNorm}=t;e.forEach((e=>{let t=1;e.matches.forEach((e=>{let{key:o,norm:r,score:i}=e;const s=o?o.weight:null;t*=Math.pow(0===i&&s?Number.EPSILON:i,(s||1)*(n?1:r))})),e.score=t}))}(a,{ignoreFieldNorm:s}),r&&a.sort(i),zz(t)&&t>-1&&(a=a.slice(0,t)),function(e,t){let{includeMatches:n=Jz.includeMatches,includeScore:o=Jz.includeScore}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];return n&&r.push(EF),o&&r.push(IF),e.map((e=>{const{idx:n}=e,o={item:t[n],refIndex:n};return r.length&&r.forEach((t=>{t(e,o)})),o}))}(a,this._docs,{includeMatches:n,includeScore:o})}_searchStringList(e){const t=yF(e,this.options),{records:n}=this._myIndex,o=[];return n.forEach((e=>{let{v:n,i:r,n:i}=e;if(!Hz(n))return;const{isMatch:s,score:a,indices:l}=t.searchIn(n);s&&o.push({item:n,idx:r,matches:[{score:a,value:n,norm:i,indices:l}]})})),o}_searchLogical(e){const t=CF(e,this.options),n=(e,t,o)=>{if(!e.children){const{keyId:n,searcher:r}=e,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:r});return i&&i.length?[{idx:o,item:t,matches:i}]:[]}const r=[];for(let i=0,s=e.children.length;i<s;i+=1){const s=e.children[i],a=n(s,t,o);if(a.length)r.push(...a);else if(e.operator===bF)return[]}return r},o=this._myIndex.records,r={},i=[];return o.forEach((e=>{let{$:o,i:s}=e;if(Hz(o)){let e=n(t,o,s);e.length&&(r[s]||(r[s]={idx:s,item:o,matches:[]},i.push(r[s])),e.forEach((e=>{let{matches:t}=e;r[s].matches.push(...t)})))}})),i}_searchObjectList(e){const t=yF(e,this.options),{keys:n,records:o}=this._myIndex,r=[];return o.forEach((e=>{let{$:o,i:i}=e;if(!Hz(o))return;let s=[];n.forEach(((e,n)=>{s.push(...this._findMatches({key:e,value:o[n],searcher:t}))})),s.length&&r.push({idx:i,item:o,matches:s})})),r}_findMatches(e){let{key:t,value:n,searcher:o}=e;if(!Hz(n))return[];let r=[];if(Bz(n))n.forEach((e=>{let{v:n,i:i,n:s}=e;if(!Hz(n))return;const{isMatch:a,score:l,indices:c}=o.searchIn(n);a&&r.push({score:l,key:t,value:n,idx:i,norm:s,indices:c})}));else{const{v:e,n:i}=n,{isMatch:s,score:a,indices:l}=o.searchIn(e);s&&r.push({score:a,key:t,value:e,norm:i,indices:l})}return r}}var PF;TF.version="7.0.0",TF.createIndex=nF,TF.parseIndex=function(e){let{getFn:t=Jz.getFn,fieldNormWeight:n=Jz.fieldNormWeight}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{keys:o,records:r}=e,i=new tF({getFn:t,fieldNormWeight:n});return i.setKeys(o),i.setIndexRecords(r),i},TF.config=Jz,TF.parseQuery=CF,function(){vF.push(...arguments)}(mF);class AF{static clearStr(e){return e.replace(/<[^>]*>/g,"").replace(/^\s+|\s+$/g,"").replace(/\s+/g," ").replace(/&nbsp;/g," ")}constructor(e,t){this.fuse=new TF(AF.convertSearchDatabase(e),t),console.log(t,"fuseOptions")}search(e){return this.res=this.fuse.search(e),this.res}postSearchResult(){if(0===this.res.length)return null;const e=[];for(const t of this.res)for(const n of t.matches)e.push({id:t.item.id,name:t.item.name,match:{...n,block:t.item.markdownData.blocks[n.refIndex]}});return e}}PF=AF,AF.convertSearchDatabase=e=>{const t=sr().cloneDeep(e);for(const n of t)for(const e of n.markdownData.blocks){if("paragraph"===e.type&&(e.SearchedText=PF.clearStr(e.data.text)),"header"===e.type&&(e.SearchedText=PF.clearStr(e.data.text)),"list"===e.type){const t=[],n=e=>{for(const o of e)if(t.push(o.content),0!==o.items.length)return n(o.items)};n(e.data.items),e.SearchedText=t.join("-").replace(/<[^>]*>/g,"")}if("checklist"===e.type&&(e.SearchedText=PF.clearStr(e.data.items.map((e=>e.text)).join("-"))),"quote"===e.type&&(e.SearchedText=PF.clearStr([e.data.caption,e.data.text].join("-"))),"delimiter"===e.type&&(e.SearchedText="delimiter"),"attaches"===e.type&&(e.SearchedText=PF.clearStr(e.data.title),e.data.file=null),"image"===e.type&&(e.SearchedText=PF.clearStr(e.data.caption),e.data.url=null),"alert"===e.type&&(e.SearchedText=PF.clearStr(e.data.message)),"raw"===e.type&&(e.SearchedText=PF.clearStr(e.data.html)),"table"===e.type){const t=[];for(const n of e.data.content)t.push(...n);e.SearchedText=PF.clearStr(t.join("-"))}}return t};const MF=AF,jF=nr((()=>{const{initInterfaceData:e}=Oz(),{commonStore:t}=cR(),n=()=>{document.querySelectorAll(".JpSearchHighlight").forEach((function(e){e.classList.remove("JpSearchHighlight")}))},o=e=>{const t=e.match.value,n=e.match.indices;let o=[];if(n.forEach((e=>{o.push(t.slice(e[0],e[1]+1))})),o.length>2){const e=o.slice(0,2);return e.push("..."),{data:e,tooltip:o.slice(2).join(", ")}}return{data:o,tooltip:null}},r=e=>e.length>10?e.slice(0,10)+"...":e;return(0,Rc.jsxs)("label",{className:"input input-bordered flex items-center gap-2 relative ml-10",style:{maxHeight:"2rem",width:"25rem"},onBlur:()=>{},children:[(0,Rc.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-6 h-6 opacity-70",children:(0,Rc.jsx)("path",{fillRule:"evenodd",d:"M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z",clipRule:"evenodd"})}),(0,Rc.jsx)("input",{type:"text",className:"grow",placeholder:"Search...",style:{},onKeyDown:async e=>{if("Enter"===e.key){if(0===t.searchEngineConfig.searchedText.length)return void alert("Search text is empty, please input");n();const e=t.searchEngineConfig.searchedText,o=new MF(t.documentsGroup,{isCaseSensitive:t.searchEngineConfig.isCaseSensitive,findAllMatches:t.searchEngineConfig.findAllMatches,minMatchCharLength:t.searchEngineConfig.minMatchCharLength,location:t.searchEngineConfig.location,threshold:t.searchEngineConfig.threshold,distance:t.searchEngineConfig.distance,ignoreLocation:t.searchEngineConfig.ignoreLocation,includeMatches:!0,keys:["markdownData.blocks.SearchedText"]});o.search(sr().cloneDeep(e)),console.log(o.res,"searchObj.res");const r=o.postSearchResult();if(null===r)return void alert("Not search  result");t.patchSearchEngineConfig({searchResultMenuOpen:!0,searchResultList:r})}},value:t.searchEngineConfig.searchedText,onChange:e=>{t.patchSearchEngineConfig({searchedText:e.target.value}),0===t.searchEngineConfig.searchedText.length&&t.patchSearchEngineConfig({searchResultMenuOpen:!1}),n()}}),(0,Rc.jsx)("svg",{t:"1711363933398",className:"icon w-6 h-6 opacity-70",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4342",width:"200",height:"200",onClick:e=>{document.getElementById("modalSearchConfig").showModal()},children:(0,Rc.jsx)("path",{d:"M990.12564 391.307264l-79.271936 46.15168c4.446208\r 24.23808 7.36256 48.9984 7.36256 74.5472 0 25.544704-2.916352 50.305024-7.360512 74.539008l79.271936 46.147584c32.380928 18.849792 43.476992 60.604416 24.7808 93.253632l-67.700736 118.243328c-18.694144 32.647168-60.102656 43.833344-92.485632 24.987648l-80.084992-46.626816c-37.419008 32.118784-79.95392 58.368-127.229952 75.24352l0 57.93792c0 37.70368-30.312448 68.268032-67.702784 68.268032l-135.405568 0c-37.390336 0-67.702784-30.5664-67.702784-68.268032l0-57.93792c-47.276032-16.877568-89.810944-43.126784-127.229952-75.24352l-80.084992 46.626816c-32.382976 18.847744-73.78944 7.661568-92.481536-24.987648L9.090632 725.94432c-18.694144-32.647168-7.600128-74.401792 24.7808-93.253632l79.271936-46.147584c-4.44416-24.231936-7.360512-48.994304-7.360512-74.539008 0-25.5488 2.916352-50.30912 7.360512-74.549248l-79.271936-46.147584c-32.380928-18.849792-43.474944-60.604416-24.7808-93.253632L76.797512 179.8144c18.692096-32.653312 60.09856-43.843584 92.481536-24.989696l80.08704 46.62272c37.419008-32.120832 79.95392-58.368 127.227904-75.24352L376.593992 68.27008C376.593992 30.5664 406.90644 0 444.296776 0l135.405568 0c37.390336 0 67.702784 30.5664 67.702784 68.27008l0 57.933824c47.273984 16.877568 89.808896 43.122688 127.227904 75.24352l80.08704-46.62272c32.382976-18.853888 73.791488-7.663616 92.485632 24.989696l67.700736 118.239232C1033.602632 330.7008 1022.506568 372.457472 990.12564 391.307264zM939.351624 302.628864l-33.851392-59.123712c-9.347072-16.32256-30.052352-21.919744-46.241792-12.496896l-94.0544 54.759424c-47.740928-54.300672-112.257024-93.253632-185.499648-108.249088L579.704392 102.395904c0-18.849792-15.1552-34.125824-33.851392-34.125824l-67.704832 0c-18.696192 0-33.851392 15.276032-33.851392 34.125824l0 75.122688c-73.242624 14.995456-137.75872 53.948416-185.499648 108.249088l-94.0544-54.759424c-16.18944-9.422848-36.892672-3.825664-46.241792 12.496896l-33.851392 59.123712c-9.347072 16.32256-3.79904 37.20192 12.3904 46.626816l94.431232 54.972416c-11.249664 33.957888-17.985536 69.996544-17.985536 107.778048 0 37.773312 6.733824 73.811968 17.983488 107.767808l-94.431232 54.976512c-16.18944 9.426944-21.737472 30.302208-12.3904 46.626816l33.851392 59.117568c9.34912 16.330752 30.052352 21.92384 46.241792 12.4928l94.050304-54.755328c47.742976 54.300672 112.259072 93.253632 185.503744 108.244992l0 75.128832c0 18.847744 15.1552 34.125824 33.851392 34.125824l67.704832 0c18.696192 0 33.851392-15.280128 33.851392-34.125824l0-75.128832c73.244672-14.993408 137.760768-53.946368 185.501696-108.244992l94.052352 54.755328c16.18944 9.428992 36.89472 3.837952 46.241792-12.4928l33.851392-59.117568c9.347072-16.324608 3.79904-37.199872-12.3904-46.626816l-94.431232-54.976512c11.249664-33.953792 17.983488-69.994496 17.983488-107.767808 0-37.779456-6.733824-73.816064-17.983488-107.773952l94.431232-54.974464C943.150664 339.830784 948.696648 318.951424 939.351624 302.628864zM512.001608 682.661888c-93.478912 0-169.25696-76.408832-169.25696-170.657792 0-94.2592 75.778048-170.674176 169.25696-170.674176 93.476864 0 169.25696 76.414976 169.25696 170.674176C681.25652 606.255104 605.478472 682.661888 512.001608 682.661888zM512.001608 409.602048c-56.088576 0-101.554176 45.84448-101.554176 102.402048 0 56.549376 45.467648 102.38976 101.554176 102.38976 56.08448 0 101.552128-45.838336 101.552128-102.38976C613.553736 455.446528 568.086088 409.602048 512.001608 409.602048z","p-id":"4343"})}),(0,Rc.jsx)("ul",{className:"menu bg-base-200 rounded-box absolute w-[100%]   top-[120%] left-0  ".concat(t.searchEngineConfig.searchResultMenuOpen?"menu-dropdown-show":"hidden"),style:{zIndex:1e5},children:t.searchEngineConfig.searchResultList.map(((i,s)=>(0,Rc.jsx)("li",{style:{pointerEvents:"initial"},onClick:async o=>{t.updateCurrentDocumentID(i.id),await e((()=>{n();const e=document.querySelector('[data-id="'.concat(i.match.block.id,'"]'));e&&e.classList.add("JpSearchHighlight"),t.patchSearchEngineConfig({searchResultMenuOpen:!1}),e.scrollIntoView({behavior:"smooth"})}))},children:(0,Rc.jsxs)("a",{className:"flex justify-between items-center",children:[(0,Rc.jsx)("p",{children:i.name}),null===o(i).tooltip?o(i).data.map(((e,t)=>(0,Rc.jsx)("div",{className:"flex",children:(0,Rc.jsx)("div",{className:"badge badge-neutral tooltip","data-tip":e,children:r(e)})}))):null,null!==o(i).tooltip?o(i).data.map(((e,t)=>(0,Rc.jsx)("div",{className:"flex",children:(0,Rc.jsx)("div",{className:"badge badge-neutral tooltip","data-tip":"..."===e?o(i).tooltip:e,children:r(e)})}))):null]})},s)))}),(0,Rc.jsx)(fR,{children:(0,Rc.jsx)("dialog",{id:"modalSearchConfig",className:"modal",children:(0,Rc.jsxs)("div",{className:"modal-box min-w-[30vw]",children:[(0,Rc.jsx)("h3",{className:"font-bold text-lg",children:"Search Config"}),(0,Rc.jsx)("div",{className:"form-control",children:(0,Rc.jsxs)("label",{className:"label cursor-pointer",children:[(0,Rc.jsx)("span",{className:"label-text tooltip tooltip-right","data-tip":"Indicates whether comparisons should be case sensitive.",children:"Is Case Sensitive"}),(0,Rc.jsx)("input",{type:"checkbox",className:"checkbox",checked:t.searchEngineConfig.isCaseSensitive,onChange:e=>t.patchSearchEngineConfig({isCaseSensitive:e.target.checked})})]})}),(0,Rc.jsx)("div",{className:"form-control",children:(0,Rc.jsxs)("label",{className:"label cursor-pointer",children:[(0,Rc.jsx)("span",{className:"label-text tooltip tooltip-right","data-tip":"When true, the matching function will continue to the end of a search pattern even if a perfect match has already been located in the string.",children:"Find All Matches"}),(0,Rc.jsx)("input",{type:"checkbox",className:"checkbox ",checked:t.searchEngineConfig.findAllMatches,onChange:e=>t.patchSearchEngineConfig({findAllMatches:e.target.checked})})]})}),(0,Rc.jsx)("div",{className:"form-control",children:(0,Rc.jsxs)("label",{className:"label cursor-pointer",children:[(0,Rc.jsx)("span",{className:"label-text tooltip tooltip-right","data-tip":"Only the matches whose length exceeds this value will be returned. (For instance, if you want to ignore single character matches in the result, set it to 2)",children:"Min Match Char Length"}),(0,Rc.jsx)("input",{type:"number",placeholder:"Type here",className:"input input-bordered w-full max-w-xs ",value:t.searchEngineConfig.minMatchCharLength,onChange:e=>t.patchSearchEngineConfig({minMatchCharLength:e.target.value})})]})}),(0,Rc.jsx)("div",{className:"form-control",children:(0,Rc.jsxs)("label",{className:"label cursor-pointer",children:[(0,Rc.jsx)("span",{className:"label-text tooltip tooltip-right","data-tip":"Determines approximately where in the text is the pattern expected to be found.",children:"Location"}),(0,Rc.jsx)("input",{type:"number",placeholder:"Type here",className:"input input-bordered w-full max-w-xs ",value:t.searchEngineConfig.location,onChange:e=>t.patchSearchEngineConfig({location:e.target.value})})]})}),(0,Rc.jsx)("div",{className:"form-control",children:(0,Rc.jsxs)("label",{className:"label cursor-pointer",children:[(0,Rc.jsx)("span",{className:"label-text tooltip tooltip-right","data-tip":"At what point does the match algorithm give up. A threshold of 0.0 requires a perfect match (of both letters and location), a threshold of 1.0 would match anything.",children:"Threshold"}),(0,Rc.jsx)("input",{type:"number",placeholder:"Type here",className:"input input-bordered w-full max-w-xs ",value:t.searchEngineConfig.threshold,onChange:e=>t.patchSearchEngineConfig({threshold:e.target.value})})]})}),(0,Rc.jsx)("div",{className:"form-control",children:(0,Rc.jsxs)("label",{className:"label cursor-pointer",children:[(0,Rc.jsx)("span",{className:"label-text tooltip  tooltip-right","data-tip":"Determines how close the match must be to the fuzzy location (specified by location). An exact letter match which is distance characters away from the fuzzy location would score as a complete mismatch. A distance of 0 requires the match be at the exact location specified. A distance of 1000 would require a perfect match to be within 800 characters of the location to be found using a threshold of 0.8.",children:"Distance"}),(0,Rc.jsx)("input",{type:"number",placeholder:"Type here",className:"input input-bordered w-full max-w-xs ",value:t.searchEngineConfig.distance,onChange:e=>t.patchSearchEngineConfig({distance:e.target.value})})]})}),(0,Rc.jsx)("div",{className:"form-control",children:(0,Rc.jsxs)("label",{className:"label cursor-pointer",children:[(0,Rc.jsx)("span",{className:"label-text tooltip tooltip-right","data-tip":"When true, search will ignore location and distance, so it won't matter where in the string the pattern appears.",children:"Ignore Location"}),(0,Rc.jsx)("input",{type:"checkbox",className:"checkbox ",checked:t.searchEngineConfig.ignoreLocation,onChange:e=>t.patchSearchEngineConfig({ignoreLocation:e.target.checked})})]})}),(0,Rc.jsx)("div",{className:"modal-action",children:(0,Rc.jsx)("form",{method:"dialog",children:(0,Rc.jsx)("button",{className:"btn",children:"Close"})})})]})})})]})}));const OF=function(){const{toolBoxStore:e}=cR();return{SidebarConfig:[{id:"50f6f4fa",type:"firstGrade",icon:(0,Rc.jsx)("svg",{t:"1711683001052",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6297",width:"1.5rem",height:"1.5rem",children:(0,Rc.jsx)("path",{d:"M926.165333 554.154667c-1.365333-2.56-15.018667-28.416-41.642666-28.416-18.432 0-36.181333 18.090667-37.12 19.029333l-88.490667 109.653333c-0.256 0.469333-8.192 10.794667-5.717333 22.314667 1.621333 7.253333 6.826667 13.141333 15.488 17.621333 3.626667 1.877333 7.253333 2.816 10.922666 2.816 13.44 0 22.314667-12.202667 22.741334-12.458666l46.677333-57.045334c0.426667 8.448 1.109333 16.213333 1.578667 21.845334 0.426667 4.906667 0.682667 8.661333 0.682666 10.794666 0 19.242667-3.2 35.2-6.826666 53.76-0.682667 3.285333-1.365333 6.357333-1.834667 9.642667-13.653333 51.626667-40.021333 95.146667-56.405333 103.552l-0.469334 0.256-0.213333 0.426667c-27.306667 32.896-61.909333 58.496-73.514667 58.496h-0.426666l-0.469334 0.256c-25.728 8.917333-46.890667 13.397333-74.666666 18.090666-25.002667 2.56-32.981333 18.773333-32.512 31.701334 0.682667 13.354667 10.666667 27.733333 28.202666 27.733333h17.962667c12.970667-1.92 25.728-4.693333 34.133333-6.613333 12.074667-2.816 15.701333-3.498667 16.853334-4.693334 56.661333-18.090667 103.978667-52.138667 145.194666-103.808 41.386667-56.832 62.336-117.418667 62.336-179.413333v-6.826667c0-6.826667 0.213333-15.957333 0-26.026666l53.461334 71.125333c0.256 0.256 5.461333 5.632 14.122666 5.632 6.826667 0 13.653333-3.498667 20.266667-10.069333 18.858667-19.498667 9.557333-34.304 9.088-34.986667l-79.402667-114.389333zM114.474667 465.152c1.109333 2.346667 14.762667 28.629333 41.856 28.629333 18.432 0 36.181333-18.048 37.12-18.986666l88.490666-109.653334c0.213333-0.512 8.192-10.837333 5.674667-22.357333-1.578667-7.253333-6.826667-13.141333-15.445333-17.621333a23.637333 23.637333 0 0 0-10.922667-2.816c-13.44 0-22.314667 12.245333-22.784 12.458666l-42.538667 51.925334c-0.426667-6.4-0.896-11.989333-1.365333-16.938667a135.850667 135.850667 0 0 1-0.682667-10.794667V354.56c0-28.16 5.248-53.76 5.674667-54.912l0.256-1.194667-0.256-0.256c9.344-45.525333 30.506667-80.042667 35.285333-82.858666l1.365334 1.408 1.578666-2.133334c28.672-39.253333 59.648-64.341333 100.821334-81.493333 21.845333-9.173333 44.373333-13.653333 65.749333-18.090667 32.341333-3.285333 33.450667-29.098667 33.024-37.12-0.469333-10.794667-5.248-22.272-11.178667-22.272-17.493333 0-35.712 0-53.461333 4.693334-50.304 8.661333-99.669333 34.048-142.677333 73.728-44.8 46.250667-72.576 93.013333-84.650667 142.805333-4.096 21.333333-8.874667 49.536-8.874667 77.952 0 1.408 0 3.754667-0.213333 6.570667-0.256 4.266667-0.469333 9.642667-0.469333 16.213333l-52.778667-69.973333c-0.256-0.256-5.461333-5.632-14.122667-5.632-6.826667 0-13.653333 3.498667-20.266666 10.069333-18.858667 19.498667-9.557333 34.304-9.088 34.986667l74.88 118.144z m262.826666 108.970667H126.08c-69.632 0-126.08 58.453333-126.08 130.133333v146.986667C0 923.093333 56.661333 981.333333 126.08 981.333333h251.221333c69.632 0 126.037333-58.453333 126.037334-130.133333v-146.986667c0-71.850667-56.405333-130.133333-126.037334-130.133333z m-310.869333 130.133333c0-34.090667 26.88-61.568 59.648-61.568h251.221333c32.981333 0 59.605333 27.733333 59.605334 61.525333v147.029334c0 34.048-26.88 61.525333-59.605334 61.525333H126.08c-33.024 0-59.648-27.733333-59.648-61.525333v-147.029334zM897.92 42.666667h-251.221333c-69.632 0-126.037333 58.453333-126.037334 130.133333v146.986667c0 71.850667 56.661333 130.133333 126.037334 130.133333h251.221333c69.632 0 126.08-58.496 126.08-130.133333V172.757333C1024 100.906667 967.552 42.666667 897.92 42.666667zM587.093333 172.8c0-34.090667 26.88-61.568 59.605334-61.568h251.221333c33.024 0 59.648 27.733333 59.648 61.525333v147.029334c0 34.048-26.88 61.525333-59.648 61.525333h-251.221333c-32.981333 0-59.605333-27.733333-59.605334-61.525333V172.757333z",fill:"#2c2c2c","p-id":"6298"})}),title:"Format Transformation",children:[{id:"eac31d7d",title:"Video Format Transformation",clickCallBack:()=>{e.updateAppOpen({audioRecognitionComp:!1,videoFormatTransformationComp:!0,imageRecognitionComp:!1})}}]},{id:"50f6f4fc",type:"firstGrade",icon:(0,Rc.jsx)("svg",{t:"1711683630616",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9452",width:"1.5rem",height:"1.5rem",children:(0,Rc.jsx)("path",{d:"M138.666667 298.666667V187.52C138.666667 160.917333 162.176 138.666667 192 138.666667h128a32 32 0 0 0 0-64H192c-64.426667 0-117.333333 50.133333-117.333333 112.853333V298.666667a32 32 0 0 0 64 0zM885.333333 298.666667V187.52c0-26.581333-23.509333-48.853333-53.333333-48.853333h-128a32 32 0 0 1 0-64h128c64.426667 0 117.333333 50.133333 117.333333 112.853333V298.666667a32 32 0 0 1-64 0zM138.666667 725.333333v111.146667c0 26.581333 23.509333 48.853333 53.333333 48.853333h128a32 32 0 0 1 0 64H192c-64.426667 0-117.333333-50.133333-117.333333-112.853333V725.333333a32 32 0 0 1 64 0zM885.333333 725.333333v111.146667c0 26.581333-23.509333 48.853333-53.333333 48.853333h-128a32 32 0 0 0 0 64h128c64.426667 0 117.333333-50.133333 117.333333-112.853333V725.333333a32 32 0 0 0-64 0zM544 394.666667V746.666667a32 32 0 0 1-64 0V394.666667H320a32 32 0 0 1 0-64h384a32 32 0 0 1 0 64h-160z",fill:"#333333","p-id":"9453"})}),title:"Text Recognition",children:[{id:"eac31tt7s",title:"Audio Recognition",clickCallBack:()=>{e.updateAppOpen({audioRecognitionComp:!0,videoFormatTransformationComp:!1,imageRecognitionComp:!1})}},{id:"ea831d7s",title:"Image Recognition",clickCallBack:()=>{e.updateAppOpen({audioRecognitionComp:!1,videoFormatTransformationComp:!1,imageRecognitionComp:!0})}}],defaultOpen:!0}]}},LF=nr((()=>{const{SidebarConfig:e}=OF(),{toolBoxStore:t}=cR();return(0,Rc.jsx)("div",{className:"w-80 overflow-auto flex-none",children:(0,Rc.jsx)("ul",{className:"menu ",children:e.map(((e,n)=>"firstGrade"===e.type?(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)("li",{className:"menu-dropdown-toggle",children:(0,Rc.jsxs)("details",{id:e.id,open:e.defaultOpen,children:[(0,Rc.jsxs)("summary",{className:"group font-bold",children:[(0,Rc.jsx)("span",{children:e.icon})," ",e.title]}),(0,Rc.jsx)("ul",{children:e.children.map((e=>(0,Rc.jsx)("li",{children:(0,Rc.jsxs)("a",{href:"#",id:e.id,className:"group ".concat(t.sidebarItemCurrentID===e.id?"active":null),onClick:()=>{t.setSidebarItemCurrentID(e.id,e.title),e.clickCallBack()},children:[(0,Rc.jsx)("span",{children:e.title})," "]})},e.id)))})]})},e.id),(0,Rc.jsx)("li",{},e.id+n)]}):(0,Rc.jsxs)(Rc.Fragment,{children:[(0,Rc.jsx)("li",{children:(0,Rc.jsxs)("details",{id:e.id,open:e.defaultOpen,children:[(0,Rc.jsxs)("summary",{className:"group font-bold",children:[(0,Rc.jsx)("span",{children:e.icon}),e.title]}),(0,Rc.jsx)("ul",{children:e.children.map((e=>(0,Rc.jsxs)("li",{children:[(0,Rc.jsxs)("h2",{className:"menu-title flex items-center gap-4 px-1.5",children:[(0,Rc.jsx)("span",{className:"text-base-content",children:e.icon})," ",e.title]}),(0,Rc.jsx)("ul",{children:e.children.map((e=>(0,Rc.jsx)("li",{children:(0,Rc.jsx)("a",{href:"#",id:e.id,className:"group ".concat(t.sidebarItemCurrentID===e.id?"active":null),onClick:()=>{t.setSidebarItemCurrentID(e.id,e.title),e.clickCallBack()},children:(0,Rc.jsx)("span",{children:e.title})})},e.id)))})]},e.id)))})]})},e.id),(0,Rc.jsx)("li",{},e.id+"ssss")]})))})})})),BF=()=>{const{toolBoxStore:e}=cR();let t=null;const n=16e3;let o=null;const r=(e,t)=>{try{Module.FS_unlink(e)}catch(n){}Module.FS_createDataFile("/",e,t,!0,!0),console.log("storeFS: stored   model: "+e+" size: "+t.length)};return{onProcess:t=>{o||(o=Module.init("whisper.bin"),o&&console.log("js: whisper initialized, instance: "+o)),o?e.audioRecognitionCompAttr.audio?o&&(console.log(""),console.log("js: processing - this might take a while ..."),console.log(""),setTimeout((async()=>{const n=await Module.full_default(o,e.audioRecognitionCompAttr.audio,"en",8,t);console.log("js: full_default returned: "+n),n&&console.log("js: whisper returned: "+n)}),100)):console.log("js: no audio data"):console.log("js: failed to initialize whisper")},loadDefaultModel:async(t,n)=>{try{const o=await fetch(t),i=await o.arrayBuffer(),s=new Uint8Array(i);r(n,s),console.log("load Default Model success"),e.updateAudioRecognitionCompAttr({loadModelState:!0})}catch(o){console.error("load Default Model failed:",o),e.updateAudioRecognitionCompAttr({loadModelState:!1})}},loadModelFile:(t,n)=>{const o=t.target.files[0]||null;if(null!=o){console.log("loadFile: loading model: "+o.name+", size: "+o.size+" bytes"),console.log("loadFile: please wait ...");var i=new FileReader;i.onload=function(t){var o=new Uint8Array(i.result);r(n,o),e.updateAudioRecognitionCompAttr({loadModelState:!0})},i.onerror=t=>{e.updateAudioRecognitionCompAttr({loadModelState:!1})},i.readAsArrayBuffer(o)}},loadAudio:o=>{t||(t=new AudioContext({sampleRate:n,channelCount:1,echoCancellation:!1,autoGainControl:!0,noiseSuppression:!0}));const r=o.target.files[0]||null;if(null==r)return;console.log("js: loading audio: "+r.name+", size: "+r.size+" bytes"),console.log("js: please wait ..."),console.log(r);const i=r.name.replace(/(.+)\.mp4$/,"$1");e.updateAudioRecognitionCompAttr({srcStem:i}),console.log(sr().cloneDeep(e.audioRecognitionCompAttr.srcStem));const s=new FileReader;s.onload=function(n){const o=new Blob([s.result]),r=URL.createObjectURL(o);e.updateAudioRecognitionCompAttr({audioSrcUrl:r});const i=new Uint8Array(s.result);t.decodeAudioData(i.buffer,(function(t){const n=new OfflineAudioContext(t.numberOfChannels,t.length,t.sampleRate),o=n.createBufferSource();o.buffer=t,o.connect(n.destination),o.start(0),n.startRendering().then((function(t){let n=t.getChannelData(0);console.log("js: audio loaded, size: "+n.length),n.length>288e5&&(n=n.slice(0,288e5),console.log("js: truncated audio to first 1800 seconds")),e.updateAudioRecognitionCompAttr({audio:n}),e.updateAudioRecognitionCompAttr({loadAudioState:!0})}))}),(function(t){console.log("js: error decoding audio: "+t),e.updateAudioRecognitionCompAttr({audio:null}),e.updateAudioRecognitionCompAttr({loadAudioState:!1})}))},s.readAsArrayBuffer(r)},convertTimestampToSeconds:e=>{const t=e.match(/-->\s*(\d{2}):(\d{2}):(\d{2}\.\d{3})/);if(t){return 3600*parseInt(t[1],10)+60*parseInt(t[2],10)+parseFloat(t[3])}return null},convertSrt:()=>{try{const t=e.audioRecognitionCompAttr.logs.join("\n").trim().split("\n");let n="",o=1;if(t.forEach(((e,t)=>{const r=e.match(/\[(.*?)\] (.*)/);if(r){const[e,t,i]=r,s=t.replace(/\./g,",").replace(/ --> /g," --\x3e ");n+="".concat(o,"\n").concat(s,"\n").concat(i,"\n\n"),o++}})),0!==n.length){const t=new Blob([n],{type:"text/plain;charset=utf-8"}),o=URL.createObjectURL(t);e.updateAudioRecognitionCompAttr({downloadSrtUrl:o})}}catch(t){}}}},RF=nr((()=>{const{toolBoxStore:t}=cR(),{onProcess:n,loadDefaultModel:o,loadModelFile:r,loadAudio:i,convertTimestampToSeconds:s,convertSrt:a}=BF();return(0,e.useEffect)((()=>{cr.setElementDisabled("AudioFileEl",!0),cr.setElementDisabled("TranslateEl",!0),Module.whisperRecognizeResultCallback=e=>{t.updateAudioRecognitionCompAttr({log:{action:"add",value:e}}),null!==s(e)&&t.updateAudioRecognitionCompAttr({progress:(s(e)/t.audioRecognitionCompAttr.audioDuration*100).toFixed(0)}),Math.abs(t.audioRecognitionCompAttr.progress-100)<.1&&(t.updateAudioRecognitionCompAttr({recognizing:!1}),a())}}),[]),(0,e.useEffect)((()=>{cr.setElementDisabled("TranslateEl",!t.audioRecognitionCompAttr.loadAudioState)}),[t.audioRecognitionCompAttr.loadAudioState]),(0,e.useEffect)((()=>{cr.setElementDisabled("AudioFileEl",!t.audioRecognitionCompAttr.loadModelState)}),[t.audioRecognitionCompAttr.loadModelState]),(0,Rc.jsxs)("div",{className:"h-full w-full flex ".concat(t.appOpen.audioRecognitionComp?null:"hidden"),children:[(0,Rc.jsxs)("div",{className:"flex-auto",children:[(0,Rc.jsxs)("label",{className:"form-control  ",children:[(0,Rc.jsx)("div",{className:"label",children:(0,Rc.jsx)("span",{className:"label-text font-bold text-2xl",children:"Whisper model"})}),(0,Rc.jsxs)("div",{className:"flex",children:[(0,Rc.jsxs)("select",{className:"select select-bordered w-full",onChange:e=>{t.updateAudioRecognitionCompAttr({whisperModel:e.target.value,loadModelState:!1})},children:[(0,Rc.jsx)("option",{value:"default",children:"Default Model"}),(0,Rc.jsx)("option",{value:"other",children:"Upload Modal"})]}),(0,Rc.jsx)("button",{className:"".concat("default"===t.audioRecognitionCompAttr.whisperModel?null:"hidden"," btn btn-neutral ml-2"),onClick:async()=>{await o("".concat("http://localhost:8082/assets/whisper","/ggml-tiny.en.bin"),"whisper.bin")},children:"Load Modal"})]}),(0,Rc.jsx)("input",{type:"file",className:"".concat("other"===t.audioRecognitionCompAttr.whisperModel?null:"hidden"," my-3 file-input file-input-bordered w-[100%]"),onChange:e=>{r(e,"whisper.bin")}})]}),(0,Rc.jsxs)("label",{id:"AudioFileEl",className:"form-control  mt-3",children:[(0,Rc.jsx)("div",{className:"label",children:(0,Rc.jsx)("span",{className:"label-text font-bold text-2xl",children:"Audio file"})}),(0,Rc.jsx)("input",{type:"file",className:"mb-3 file-input file-input-bordered w-[100%]",onChange:e=>{t.updateAudioRecognitionCompAttr({loadAudioState:!1,recognizing:!1}),i(e)}})]}),(0,Rc.jsx)("audio",{id:"audioPlayerEl",className:"w-full mt-3",src:t.audioRecognitionCompAttr.audioSrcUrl,controls:!0,onLoadedMetadata:e=>{t.updateAudioRecognitionCompAttr({audioDuration:document.getElementById("audioPlayerEl").duration})}})]}),(0,Rc.jsx)("div",{className:" divider divider-horizontal h-full"}),(0,Rc.jsxs)("div",{className:" h-full max-h-full w-[60%] min-w-[60%] max-w-[60%]  flex flex-col p-3",id:"TranslateEl",children:[(0,Rc.jsxs)("div",{children:[(0,Rc.jsx)("button",{className:"btn btn-neutral",onClick:()=>{t.updateAudioRecognitionCompAttr({log:{action:"init"},recognizing:!0,downloadSrtUrl:null,srtTexts:null,progress:0}),n(!1)},children:"translate"}),(0,Rc.jsxs)("div",{className:"radial-progress ml-6 ".concat(t.audioRecognitionCompAttr.recognizing?null:"hidden"),style:{"--value":t.audioRecognitionCompAttr.progress,"--size":"3rem","--thickness":"4px"},role:"progressbar",children:[t.audioRecognitionCompAttr.progress,"%"]}),(0,Rc.jsx)("button",{className:"".concat(null===t.audioRecognitionCompAttr.downloadSrtUrl?"hidden":null," btn btn-neutral ml-3"),onClick:()=>{const e=document.createElement("a");e.href=t.audioRecognitionCompAttr.downloadSrtUrl,e.download="".concat(t.audioRecognitionCompAttr.srcStem,".srt"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},children:"Download"})]}),(0,Rc.jsx)("div",{className:"bg-black flex-auto   mt-3  m-h-0 rounded-2xl text-white p-3 flex flex-col  overflow-y-scroll basis-0",children:t.audioRecognitionCompAttr.logs.map(((e,t)=>(0,Rc.jsx)("div",{className:"mt-3",children:e},t)))})]})]})}));function NF(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function DF(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function zF(e,t,n){return e.set(DF(e,t),n),n}function FF(e,t){return e.get(DF(e,t))}"https://unpkg.com/@ffmpeg/core@".concat("0.12.6","/dist/umd/ffmpeg-core.js");var UF;!function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"}(UF||(UF={}));const HF=(()=>{let e=0;return()=>e++})(),VF=(new Error("unknown message type"),new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first")),WF=new Error("called FFmpeg.terminate()");new Error("failed to import ffmpeg-core.js");var KF=new WeakMap,GF=new WeakMap,qF=new WeakMap,YF=new WeakMap,XF=new WeakMap,$F=new WeakMap,ZF=new WeakMap;class QF{constructor(){var e=this;NF(this,KF,null),NF(this,GF,{}),NF(this,qF,{}),NF(this,YF,[]),NF(this,XF,[]),wr(this,"loaded",!1),NF(this,$F,(()=>{FF(KF,this)&&(FF(KF,this).onmessage=e=>{let{data:{id:t,type:n,data:o}}=e;switch(n){case UF.LOAD:this.loaded=!0,FF(GF,this)[t](o);break;case UF.MOUNT:case UF.UNMOUNT:case UF.EXEC:case UF.WRITE_FILE:case UF.READ_FILE:case UF.DELETE_FILE:case UF.RENAME:case UF.CREATE_DIR:case UF.LIST_DIR:case UF.DELETE_DIR:FF(GF,this)[t](o);break;case UF.LOG:FF(YF,this).forEach((e=>e(o)));break;case UF.PROGRESS:FF(XF,this).forEach((e=>e(o)));break;case UF.ERROR:FF(qF,this)[t](o)}delete FF(GF,this)[t],delete FF(qF,this)[t]})})),NF(this,ZF,(function(t){let{type:n,data:o}=t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return FF(KF,e)?new Promise(((t,s)=>{const a=HF();FF(KF,e)&&FF(KF,e).postMessage({id:a,type:n,data:o},r),FF(GF,e)[a]=t,FF(qF,e)[a]=s,null===i||void 0===i||i.addEventListener("abort",(()=>{s(new DOMException("Message # ".concat(a," was aborted"),"AbortError"))}),{once:!0})})):Promise.reject(VF)})),wr(this,"load",(function(){let{classWorkerURL:t,...o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{signal:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return FF(KF,e)||(zF(KF,e,t?new Worker(new URL(t,"file:///E:/sideProject/cookie-data/node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js"),{type:"module"}):new Worker(new URL(n.p+n.u(726),n.b),{type:void 0})),FF($F,e).call(e)),FF(ZF,e).call(e,{type:UF.LOAD,data:o},void 0,r)})),wr(this,"exec",(function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,{signal:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return FF(ZF,e).call(e,{type:UF.EXEC,data:{args:t,timeout:n}},void 0,o)})),wr(this,"terminate",(()=>{const e=Object.keys(FF(qF,this));for(const t of e)FF(qF,this)[t](WF),delete FF(qF,this)[t],delete FF(GF,this)[t];FF(KF,this)&&(FF(KF,this).terminate(),zF(KF,this,null),this.loaded=!1)})),wr(this,"writeFile",(function(t,n){let{signal:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];return n instanceof Uint8Array&&r.push(n.buffer),FF(ZF,e).call(e,{type:UF.WRITE_FILE,data:{path:t,data:n}},r,o)})),wr(this,"mount",((e,t,n)=>FF(ZF,this).call(this,{type:UF.MOUNT,data:{fsType:e,options:t,mountPoint:n}},[]))),wr(this,"unmount",(e=>FF(ZF,this).call(this,{type:UF.UNMOUNT,data:{mountPoint:e}},[]))),wr(this,"readFile",(function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",{signal:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return FF(ZF,e).call(e,{type:UF.READ_FILE,data:{path:t,encoding:n}},void 0,o)})),wr(this,"deleteFile",(function(t){let{signal:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return FF(ZF,e).call(e,{type:UF.DELETE_FILE,data:{path:t}},void 0,n)})),wr(this,"rename",(function(t,n){let{signal:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return FF(ZF,e).call(e,{type:UF.RENAME,data:{oldPath:t,newPath:n}},void 0,o)})),wr(this,"createDir",(function(t){let{signal:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return FF(ZF,e).call(e,{type:UF.CREATE_DIR,data:{path:t}},void 0,n)})),wr(this,"listDir",(function(t){let{signal:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return FF(ZF,e).call(e,{type:UF.LIST_DIR,data:{path:t}},void 0,n)})),wr(this,"deleteDir",(function(t){let{signal:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return FF(ZF,e).call(e,{type:UF.DELETE_DIR,data:{path:t}},void 0,n)}))}on(e,t){"log"===e?FF(YF,this).push(t):"progress"===e&&FF(XF,this).push(t)}off(e,t){"log"===e?zF(YF,this,FF(YF,this).filter((e=>e!==t))):"progress"===e&&zF(XF,this,FF(XF,this).filter((e=>e!==t)))}}const JF=new Error("failed to get response body reader"),eU=new Error("failed to complete download"),tU=async e=>{let t;if("string"===typeof e)t=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?atob(e.split(",")[1]).split("").map((e=>e.charCodeAt(0))):await(await fetch(e)).arrayBuffer();else if(e instanceof URL)t=await(await fetch(e)).arrayBuffer();else{if(!(e instanceof File||e instanceof Blob))return new Uint8Array;t=await(n=e,new Promise(((e,t)=>{const o=new FileReader;o.onload=()=>{const{result:t}=o;t instanceof ArrayBuffer?e(new Uint8Array(t)):e(new Uint8Array)},o.onerror=e=>{var n;t(Error("File could not be read! Code=".concat((null===e||void 0===e||null===(n=e.target)||void 0===n||null===(n=n.error)||void 0===n?void 0:n.code)||-1)))},o.readAsArrayBuffer(n)})))}var n;return new Uint8Array(t)},nU=async function(e,t){let n=arguments.length>3?arguments[3]:void 0;const o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?await(async(e,t)=>{const n=await fetch(e);let o;try{var r;const i=parseInt(n.headers.get("Content-Length")||"-1"),s=null===(r=n.body)||void 0===r?void 0:r.getReader();if(!s)throw JF;const a=[];let l=0;for(;;){const{done:n,value:o}=await s.read(),r=o?o.length:0;if(n){if(-1!=i&&i!==l)throw eU;t&&t({url:e,total:i,received:l,delta:r,done:n});break}a.push(o),l+=r,t&&t({url:e,total:i,received:l,delta:r,done:n})}const c=new Uint8Array(l);let d=0;for(const e of a)c.set(e,d),d+=e.length;o=c.buffer}catch(i){console.log("failed to send download progress event: ",i),o=await n.arrayBuffer(),t&&t({url:e,total:o.byteLength,received:o.byteLength,delta:0,done:!0})}return o})(e,n):await(await fetch(e)).arrayBuffer(),r=new Blob([o],{type:t});return URL.createObjectURL(r)},oU=nr((()=>{var t,n,o,r,i,s;const{toolBoxStore:a,commonStore:l}=cR(),c=(0,e.useRef)(null);return(0,e.useEffect)((()=>{(async()=>{const e=new QF,t="http://localhost:8082/assets/ffmpeg";e.on("log",(e=>{let{message:t}=e;console.log("log:",t),a.getProgress(t)})),await e.load({coreURL:await nU("".concat(t,"/ffmpeg-core.js"),"text/javascript"),wasmURL:await nU("".concat(t,"/ffmpeg-core.wasm"),"application/wasm"),workerURL:await nU("".concat(t,"/ffmpeg-core.worker.js"),"text/javascript")}),a.updateVideoTransformationCompAttr({ffmpeg:e}),console.log("ffmpeg init success")})(),cr.setElementDisabled("videoContainer",!0)}),[]),(0,Rc.jsxs)("div",{className:"flex h-full ".concat(a.appOpen.videoTransformationComp?null:"hidden"),children:[(0,Rc.jsxs)("div",{className:"h-full flex flex-col w-[50%]",children:[(0,Rc.jsxs)("label",{className:"form-control",children:[(0,Rc.jsx)("div",{className:"label",children:(0,Rc.jsx)("span",{className:"label-text font-bold text-2xl",children:"Upload a video"})}),(0,Rc.jsx)("input",{type:"file",className:"mb-3 file-input file-input-bordered w-[100%]",accept:".mp4, .avi",onChange:e=>{const t=e.target.files[0];if(t){console.log(t),a.updateVideoTransformationCompAttr({src:null,startTime:0,endTime:0,duration:0,targetSrc:null,converting:!1,srcName:t.name,srcType:t.type}),null===a.videoTransformationCompAttr.srcVideoContainerSize&&a.updateVideoTransformationCompAttr({srcVideoContainerSize:cr.getContainerSize("srcVideoContainer")}),null===a.videoTransformationCompAttr.targetVideoContainerSize&&a.updateVideoTransformationCompAttr({targetVideoContainerSize:cr.getContainerSize("targetVideoContainer")});const e=new FileReader;e.onloadend=()=>{a.updateVideoTransformationCompAttr({src:e.result}),cr.setElementDisabled("videoContainer",!1)},e.readAsDataURL(t)}}})]}),(0,Rc.jsx)("div",{id:"srcVideoContainer",className:"skeleton flex-grow\n                    ".concat("video/avi"===a.videoTransformationCompAttr.srcType||null===a.videoTransformationCompAttr.src?null:"hidden")}),(0,Rc.jsx)("video",{ref:c,src:a.videoTransformationCompAttr.src,muted:!0,controls:!0,className:"object-contain ".concat("video/mp4"===a.videoTransformationCompAttr.srcType&&null!==a.videoTransformationCompAttr.src?null:"hidden"),onLoadedMetadata:e=>{a.updateVideoTransformationCompAttr({duration:e.target.duration})},style:{maxHeight:null===(t=a.videoTransformationCompAttr.srcVideoContainerSize)||void 0===t?void 0:t.height,maxWidth:null===(n=a.videoTransformationCompAttr.srcVideoContainerSize)||void 0===n?void 0:n.width}})]}),(0,Rc.jsx)("div",{className:" divider divider-horizontal h-full"}),(0,Rc.jsxs)("div",{id:"videoContainer",className:"h-full flex-grow flex flex-col",children:[(0,Rc.jsxs)("div",{className:"".concat("video/avi"===a.videoTransformationCompAttr.srcType?"hidden":null),children:[(0,Rc.jsxs)("label",{className:"form-control  ",children:[(0,Rc.jsx)("div",{className:"label",children:(0,Rc.jsxs)("span",{className:"label-text font-bold text-2xl",children:["Start time[",cr.secondsToHMS(a.videoTransformationCompAttr.startTime),"]"]})}),(0,Rc.jsx)("input",{type:"range",min:0,max:a.videoTransformationCompAttr.duration,value:a.videoTransformationCompAttr.startTime,className:"range range-sm",onChange:e=>{a.updateVideoTransformationCompAttr({startTime:e.target.value}),c.current.currentTime=e.target.value}})]}),(0,Rc.jsxs)("label",{className:"form-control  ",children:[(0,Rc.jsx)("div",{className:"label",children:(0,Rc.jsxs)("span",{className:"label-text font-bold text-2xl",children:["End time[",cr.secondsToHMS(a.videoTransformationCompAttr.endTime),"]"]})}),(0,Rc.jsx)("input",{type:"range",min:0,max:a.videoTransformationCompAttr.duration,value:a.videoTransformationCompAttr.endTime,className:"range range-sm",onChange:e=>{a.updateVideoTransformationCompAttr({endTime:e.target.value}),c.current.currentTime=e.target.value}})]})]}),(0,Rc.jsxs)("div",{className:"flex-grow flex flex-col",children:[(0,Rc.jsxs)("label",{className:"form-control ",children:[(0,Rc.jsx)("div",{className:"label",children:(0,Rc.jsx)("span",{className:"label-text font-bold text-2xl",children:"Target Format"})}),(0,Rc.jsxs)("select",{className:"select select-bordered w-full max-w-xs",onChange:e=>{a.updateVideoTransformationCompAttr({targetFormat:e.target.value})},children:[(0,Rc.jsx)("option",{value:"GIF",children:"GIF"}),(0,Rc.jsx)("option",{value:"MP4",children:"MP4"})]})]}),(0,Rc.jsxs)("div",{className:"flex items-center mt-3",children:[(0,Rc.jsx)("button",{className:"btn btn-neutral mr-3 ",onClick:async()=>{if(a.videoTransformationCompAttr.endTime===a.videoTransformationCompAttr.startTime||a.videoTransformationCompAttr.endTime<a.videoTransformationCompAttr.startTime)return void alert("Start time must greater than start time");if(null===a.videoTransformationCompAttr.ffmpeg)return void alert("Ffmpeg is null");a.updateVideoTransformationCompAttr({converting:!0,targetSrc:null,progress:0});const e="".concat("video/mp4"===a.videoTransformationCompAttr.srcType?"input.mp4":"input.avi"),t="output.".concat(a.videoTransformationCompAttr.targetFormat.toLowerCase());console.log(e,t),await a.videoTransformationCompAttr.ffmpeg.writeFile(e,await tU(a.videoTransformationCompAttr.src));const n=a.videoTransformationCompAttr.startTime,o=a.videoTransformationCompAttr.endTime;"video/avi"===a.videoTransformationCompAttr.srcType&&"MP4"===a.videoTransformationCompAttr.targetFormat&&await a.videoTransformationCompAttr.ffmpeg.exec(["-i",e,"-c:v","libx264","-c:a","aac",t]),"video/mp4"===a.videoTransformationCompAttr.srcType&&"MP4"===a.videoTransformationCompAttr.targetFormat&&await a.videoTransformationCompAttr.ffmpeg.exec(["-i",e,"-ss","".concat(n),"-to","".concat(o),t]),"video/avi"===a.videoTransformationCompAttr.srcType&&"GIF"===a.videoTransformationCompAttr.targetFormat&&await a.videoTransformationCompAttr.ffmpeg.exec(["-i",e,t]),"video/mp4"===a.videoTransformationCompAttr.srcType&&"GIF"===a.videoTransformationCompAttr.targetFormat&&await a.videoTransformationCompAttr.ffmpeg.exec(["-i",e,"-ss","".concat(n),"-to","".concat(o),"-f","gif",t]);const r=await a.videoTransformationCompAttr.ffmpeg.readFile(t);let i=null;i="MP4"===a.videoTransformationCompAttr.targetFormat?URL.createObjectURL(new Blob([r.buffer],{type:"video/mp4"})):URL.createObjectURL(new Blob([r.buffer],{type:"image/gif"})),a.updateVideoTransformationCompAttr({targetSrc:i,converting:!1});await a.videoTransformationCompAttr.ffmpeg.deleteFile(e),await a.videoTransformationCompAttr.ffmpeg.deleteFile(t)},children:"Convert"}),(0,Rc.jsx)("button",{className:"btn btn-neutral ".concat(null===a.videoTransformationCompAttr.targetSrc?"hidden":null),onClick:()=>{const e=a.videoTransformationCompAttr.targetSrc,t=document.createElement("a");t.href=e,t.download=cr.formatTime(new Date),document.body.appendChild(t),t.click(),document.body.removeChild(t)},children:"Download"}),a.videoTransformationCompAttr.converting?(0,Rc.jsxs)("div",{className:"radial-progress",style:{"--value":a.videoTransformationCompAttr.progress,"--size":"3rem","--thickness":"4px"},role:"progressbar",children:[a.videoTransformationCompAttr.progress,"%"]}):null]}),(0,Rc.jsxs)("label",{className:"form-control flex-grow flex flex-col",children:[(0,Rc.jsx)("div",{className:"label",children:(0,Rc.jsxs)("span",{className:"label-text font-bold text-2xl",children:[a.videoTransformationCompAttr.targetFormat," Format Transformation Result"]})}),null===a.videoTransformationCompAttr.targetSrc?(0,Rc.jsx)("div",{id:"targetVideoContainer",className:"skeleton flex-grow"}):null,null!==a.videoTransformationCompAttr.targetSrc&&"GIF"===a.videoTransformationCompAttr.targetFormat?(0,Rc.jsx)("img",{alt:"",src:a.videoTransformationCompAttr.targetSrc,className:"object-contain",style:{maxHeight:null===(o=a.videoTransformationCompAttr.targetVideoContainerSize)||void 0===o?void 0:o.height,maxWidth:null===(r=a.videoTransformationCompAttr.targetVideoContainerSize)||void 0===r?void 0:r.width}}):null,null!==a.videoTransformationCompAttr.targetSrc&&"MP4"===a.videoTransformationCompAttr.targetFormat?(0,Rc.jsx)("video",{muted:!0,controls:!0,autoPlay:!0,src:a.videoTransformationCompAttr.targetSrc,className:"object-contain",style:{maxHeight:null===(i=a.videoTransformationCompAttr.targetVideoContainerSize)||void 0===i?void 0:i.height,maxWidth:null===(s=a.videoTransformationCompAttr.targetVideoContainerSize)||void 0===s?void 0:s.width}}):null]})]})]})]})}));var rU=n(9938);const iU=nr((()=>{var t,n,o,r,i,s;const[a,l]=(0,e.useState)(null);(0,e.useEffect)((()=>{cr.setElementDisabled("imageRecognitionCompAction",!0)}),[]);const{toolBoxStore:c}=cR();return(0,Rc.jsxs)("div",{className:"flex h-full w-full ".concat(c.appOpen.imageRecognitionComp?null:"hidden"),children:[(0,Rc.jsxs)("div",{className:"flex flex-col w-[60%] min-w-[60%] h-full ",children:[(0,Rc.jsxs)("div",{className:"flex flex-none ",children:[(0,Rc.jsxs)("label",{className:"form-control flex-grow ",children:[(0,Rc.jsx)("div",{className:"label",children:(0,Rc.jsx)("span",{className:"label-text font-bold text-2xl",children:"Image File"})}),(0,Rc.jsx)("input",{type:"file",accept:"image/png, image/jpeg",lang:"en",className:" file-input file-input-bordered",onChange:e=>{const t=e.target.files[0];if(t){c.updateImageRecognitionCompAttr({recognizing:!1,progress:0,srcImageUrl:null,result:null,srcImageInternalSize:null,imageRecognitionCompImageElSize:null}),null===c.imageRecognitionCompAttr.imageContainerSize&&c.updateImageRecognitionCompAttr({imageContainerSize:cr.getContainerSize("imageRecognitionCompImageContainer")});const e=new FileReader;e.onloadend=()=>{c.updateImageRecognitionCompAttr({srcImageUrl:e.result}),cr.setElementDisabled("imageRecognitionCompAction",!1)},e.readAsDataURL(t),console.log(sr().cloneDeep(c.imageRecognitionCompAttr))}}})]}),(0,Rc.jsxs)("label",{className:"form-control w-[40%] ml-2 ",children:[(0,Rc.jsx)("div",{className:"label",children:(0,Rc.jsx)("span",{className:"label-text font-bold text-2xl",children:"Language"})}),(0,Rc.jsxs)("select",{className:"select select-bordered",onChange:e=>{c.updateImageRecognitionCompAttr({lang:e.target.value})},children:[(0,Rc.jsx)("option",{value:"chi_sim",children:"Chinese"}),(0,Rc.jsx)("option",{value:"eng",children:"English"})]})]})]}),(0,Rc.jsx)("div",{id:"imageRecognitionCompImageContainer",className:"".concat(null===c.imageRecognitionCompAttr.srcImageUrl?null:"hidden"," skeleton flex-grow w-full mt-4")}),(0,Rc.jsx)("img",{id:"imageRecognitionCompImageEl",src:c.imageRecognitionCompAttr.srcImageUrl,className:"mt-4 object-contain ".concat(null!==c.imageRecognitionCompAttr.srcImageUrl?null:"hidden"),style:{maxHeight:null===(t=c.imageRecognitionCompAttr.imageContainerSize)||void 0===t?void 0:t.height,maxWidth:null===(n=c.imageRecognitionCompAttr.imageContainerSize)||void 0===n?void 0:n.width},alt:""}),(0,Rc.jsx)("div",{className:"".concat(null!==a?"border border-blue-500":"hidden"," fixed"),style:{width:null===(o=c.imageRecognitionCompAttr.imageRecognitionCompImageElSize)||void 0===o?void 0:o.width,height:null===(r=c.imageRecognitionCompAttr.imageRecognitionCompImageElSize)||void 0===r?void 0:r.height,top:null===(i=c.imageRecognitionCompAttr.imageRecognitionCompImageElSize)||void 0===i?void 0:i.top,left:null===(s=c.imageRecognitionCompAttr.imageRecognitionCompImageElSize)||void 0===s?void 0:s.left}})]}),(0,Rc.jsx)("div",{className:" divider divider-horizontal h-full"}),(0,Rc.jsxs)("div",{id:"imageRecognitionCompAction",className:"flex-grow  h-full flex flex-col",children:[(0,Rc.jsxs)("div",{className:"flex-none",children:[(0,Rc.jsx)("button",{className:"btn btn-neutral",onClick:async()=>{c.updateImageRecognitionCompAttr({recognizing:!0});const e="http://127.0.0.1:8082/assets/tesseract",t=await(0,rU.createWorker)(c.imageRecognitionCompAttr.lang,1,{workerPath:await nU("".concat(e,"/worker.min.js"),"text/javascript"),langPath:"".concat(e,"/lang"),logger:e=>{"recognizing text"===e.status&&(c.updateImageRecognitionCompAttr({progress:(100*e.progress).toFixed(0)}),1===e.progress&&c.updateImageRecognitionCompAttr({recognizing:!1}))}}),n=await t.recognize(c.imageRecognitionCompAttr.srcImageUrl);await t.terminate(),console.log(n),l(n.data),c.updateImageRecognitionCompAttr({imageRecognitionCompImageElSize:cr.getContainerSize("imageRecognitionCompImageEl")}),function(e){const t=new Image;t.onload=function(){c.updateImageRecognitionCompAttr({srcImageInternalSize:{width:this.width,height:this.height,scale:c.imageRecognitionCompAttr.imageRecognitionCompImageElSize.width/this.width}}),console.log(sr().cloneDeep(c.imageRecognitionCompAttr),"getImageSize"),console.log(a,"getImageSize")},t.src=e}(c.imageRecognitionCompAttr.srcImageUrl)},children:"Recognize"}),(0,Rc.jsxs)("div",{className:"radial-progress ml-6 ".concat(c.imageRecognitionCompAttr.recognizing?null:"hidden"),style:{"--value":c.imageRecognitionCompAttr.progress,"--size":"3rem","--thickness":"4px"},role:"progressbar",children:[c.imageRecognitionCompAttr.progress,"%"]})]}),(0,Rc.jsx)("div",{className:"flex-grow",children:(0,Rc.jsxs)("label",{className:"h-[100%] form-control  flex  flex-col ",children:[(0,Rc.jsx)("div",{className:"label flex-none flex ",children:(0,Rc.jsx)("span",{className:"label-text font-bold text-2xl",children:"Recognition Result"})}),(0,Rc.jsx)("div",{className:"whitespace-pre-wrap bg-black rounded-2xl flex-grow basis-0 overflow-y-scroll text-white font-bold text-2xl p-3",children:null===a||void 0===a?void 0:a.text})]})})]})]})})),sU=nr((()=>{const{commonStore:t,toolBoxStore:n}=cR();return(0,e.useEffect)((()=>{let e=null;n.appOpen.videoTransformationComp&&(e="eac31d7d"),n.appOpen.audioRecognitionComp&&(e="eac31tt7s"),n.appOpen.imageRecognitionComp&&(e="ea831d7s"),null!==e&&document.getElementById(e).click()}),[]),(0,Rc.jsxs)("div",{className:"flex ".concat(t.appCompOpenConfig.toolboxAppOpen?null:"hidden"," w-full h-full"),children:[(0,Rc.jsx)("div",{className:"h-full  p-3",children:(0,Rc.jsx)(LF,{})}),(0,Rc.jsxs)("div",{className:"flex-auto h-full  p-3",children:[(0,Rc.jsx)(oU,{}),(0,Rc.jsx)(RF,{}),(0,Rc.jsx)(iU,{})]})]})}));const aU=nr((function(){var t,n;const{commonStore:o,toolBoxStore:r}=cR(),[i,s]=(0,e.useState)({}),{updateMarkdownData:a}=jz(),{initInterfaceData:l,initAppIconState:c,buttonGroupID:d}=Oz();(0,e.useEffect)((()=>{o.initDocumentsGroup().then((async()=>{await l()}))}),[]),(0,e.useEffect)((()=>{c()}),[o.documentsGroup]),document.addEventListener("paste",(function(e){const t=(e.clipboardData||window.clipboardData).items;for(let n=0;n<t.length;n++)if(-1!==t[n].type.indexOf("image")){const e=t[n].getAsFile(),o=new FileReader;o.onload=function(e){e.target.result},o.readAsDataURL(e)}}));const u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{return e.length>t?{text:e.substring(0,t)+"...",tooltip:e}:{text:e,tooltip:null}}catch(n){return{text:null,tooltip:null}}},h=" btn btn-ghost btn-square btn-sm hover:scale-125 hover:shadow-xl focus:outline-none focus:ring active:bg-gray-500",p="tooltip tooltip-left tooltip tooltip-left mr-2 flex items-center";return(0,Rc.jsxs)("div",{id:"app",className:"flex flex-col h-screen w-screen max-h-screen",children:[(0,Rc.jsxs)("div",{style:{},className:" w-screen h-[3rem] flex  flex-none items-center justify-between px-2",children:[(0,Rc.jsxs)("div",{className:"flex",children:[(0,Rc.jsxs)("div",{className:"flex items-center",children:[(0,Rc.jsx)(v,{size:"2rem",className:""}),(0,Rc.jsx)("div",{className:"font-bold ",children:"Cookie Data"}),(0,Rc.jsx)("p",{className:"ml-3",children:o.VERSION})]}),r.toolboxAppOpenIconState?(0,Rc.jsx)(jF,{}):null]}),(0,Rc.jsxs)("div",{className:"flex",children:[(0,Rc.jsx)("div",{className:"font-bold  flex items-center ".concat(r.toolboxAppOpenIconState?null:"hidden"," \n                    ").concat(null===u(null===(t=o.getCurrentDocumentObj())||void 0===t?void 0:t.name).tooltip?null:"tooltip tooltip-bottom","\n                    "),"data-tip":u(null===(n=o.getCurrentDocumentObj())||void 0===n?void 0:n.name).tooltip,children:null===o.getCurrentDocumentObj()?"":"Document Title: "+u(o.getCurrentDocumentObj().name).text}),(0,Rc.jsxs)("div",{className:p,"data-tip":"add document",children:[(0,Rc.jsx)(fR,{children:(0,Rc.jsx)("dialog",{id:"addDocument_modal",className:"modal",children:(0,Rc.jsxs)("div",{className:"modal-box",children:[(0,Rc.jsx)("h3",{className:"font-bold text-lg",children:"Title"}),(0,Rc.jsx)("input",{type:"text",placeholder:"Type here",className:"mt-2 input input-bordered",style:{width:"100%"},value:o.addDocumentName,onChange:e=>o.updateAddDocumentName(e.target.value)}),(0,Rc.jsx)("div",{className:"modal-action",children:(0,Rc.jsxs)("form",{method:"dialog",children:[(0,Rc.jsx)("button",{className:"btn",onClick:()=>{const e=crypto.randomUUID(),t=o.addDocumentName,n=sr().cloneDeep(o.initMarkdownData),r=sr().cloneDeep(o.initProcessData);o.addDocumentsGroup({id:e,name:t,markdownData:n,processData:r}),o.updateCurrentDocumentID(e),a(n),o.processDrawObj.store.loadSnapshot(r),o.updateAppCompOpenConfig({markdownAppOpen:!0,processAppOpen:!1,errorPageAppOpen:!1,toolboxAppOpen:!1})},children:"Confirm"}),(0,Rc.jsx)("button",{className:"btn ml-2",children:"Close"})]})})]})})}),(0,Rc.jsx)(y,{size:"1.5rem",className:h+"cursor-pointer",onClick:()=>{o.updateAddDocumentName(cr.formatTime(new Date)),document.getElementById("addDocument_modal").showModal()},id:"AddIconID"})]}),(0,Rc.jsx)("div",{className:p,"data-tip":"delete document",children:(0,Rc.jsx)(b,{id:"DeleteIconID",size:"1.5rem",className:h+"cursor-pointer",onClick:async()=>{o.deleteDocumentsGroup(o.currentDocumentID);if((await o.saveIndexedDB()).state){if(await mR().fire({position:"top-end",icon:"success",title:"delete saved",showConfirmButton:!1,timer:1500}),0===o.documentsGroup.length)return void o.updateAppCompOpenConfig({markdownAppOpen:!1,processAppOpen:!1,errorPageAppOpen:!0,toolboxAppOpen:!1});o.updateCurrentDocumentID(o.documentsGroup[o.documentsGroup.length-1].id),await l()}else await mR().fire({icon:"error",title:"Oops...",text:"delete failed"})}})}),(0,Rc.jsx)("div",{className:p,"data-tip":"markdown",children:(0,Rc.jsx)(w,{id:"MarkDownIconID",size:"1.5rem",className:h+"cursor-pointer",onClick:async()=>{o.updateAppCompOpenConfig({markdownAppOpen:!0,processAppOpen:!1,errorPageAppOpen:!1,toolboxAppOpen:!1}),await l(),r.updateToolboxAppOpenIconState(!0)}})}),(0,Rc.jsx)("div",{className:p,"data-tip":"process",children:(0,Rc.jsx)(x,{id:"DrawIConID",size:"1.5rem",className:h+"cursor-pointer",onClick:async()=>{o.updateAppCompOpenConfig({markdownAppOpen:!1,processAppOpen:!0,errorPageAppOpen:!1,toolboxAppOpen:!1}),await l(),r.updateToolboxAppOpenIconState(!0)}})}),(0,Rc.jsxs)("div",{className:p,"data-tip":"view document list",children:[(0,Rc.jsx)(m,{id:"DocumentsIconID",size:"1.5rem",className:h+"cursor-pointer",htmlFor:"my-drawer-4",onClick:()=>{document.getElementById("drawerID").click()}}),(0,Rc.jsx)(fR,{children:(0,Rc.jsxs)("div",{className:"drawer z-50",children:[(0,Rc.jsx)("input",{id:"my-drawer-4",type:"checkbox",className:"drawer-toggle"}),(0,Rc.jsx)("div",{className:"drawer-content",children:(0,Rc.jsx)("label",{htmlFor:"my-drawer-4",className:"drawer-button btn btn-primary hidden",id:"drawerID",children:"Open drawer"})}),(0,Rc.jsxs)("div",{className:"drawer-side",children:[(0,Rc.jsx)("label",{htmlFor:"my-drawer-4","aria-label":"close sidebar",className:"drawer-overlay",onClick:e=>{}}),(0,Rc.jsx)("ul",{className:"menu p-4 w-80 min-h-full bg-base-200 text-base-content",children:o.documentsGroup.slice().reverse().map((e=>(0,Rc.jsx)("li",{className:"".concat(e.id===o.currentDocumentID?"bg-blue-100":null),children:(0,Rc.jsx)("a",{onClick:async()=>{o.updateCurrentDocumentID(e.id),await l()},children:e.name})},e.id)))})]})]})})]}),(0,Rc.jsx)("div",{className:p,"data-tip":"save document",children:(0,Rc.jsx)(g,{id:"SaveIconID",size:"1.5rem",className:h+"cursor-pointer",color:"".concat(o.isDocumentsGroupDataUpdate?"#fa0404":"#000"),onClick:async()=>{const e=await o.saveIndexedDB();e.state?(await mR().fire({position:"top-end",icon:"success",title:"data save success",showConfirmButton:!1,timer:1500}),o.setIsDocumentsGroupDataUpdate(!1)):await mR().fire({icon:"error",title:"Oops...",text:"import failed:"+e.error})}})}),(0,Rc.jsx)("div",{className:p,"data-tip":"backup all documents to local desktop",children:(0,Rc.jsx)(uR,{id:"BackupIconID",size:"1.5rem",className:h+"cursor-pointer",onClick:()=>{o.downloadAllData()}})}),(0,Rc.jsxs)("div",{className:p,"data-tip":"import backup documents",children:[(0,Rc.jsx)(fR,{children:(0,Rc.jsx)("dialog",{id:"ImportBackupData_modal",className:"modal",children:(0,Rc.jsxs)("div",{className:"modal-box",children:[(0,Rc.jsx)("h3",{className:"font-bold text-lg",children:"Import backup data"}),(0,Rc.jsx)("input",{id:"fileInput",type:"file",className:"file-input file-input-bordered w-full mt-3",multiple:!0,accept:".json",onChange:async e=>{const t=await o.parsingBackupData(e.target.files);t.state?(void 0!==o.documentsGroup&&o.documentsGroup.length>0&&o.updateCurrentDocumentID(o.documentsGroup[0].id),await l(),o.updateAppCompOpenConfig({markdownAppOpen:!0,processAppOpen:!1,errorPageAppOpen:!1,toolboxAppOpen:!1}),await mR().fire({position:"top-end",icon:"success",title:"Import backup data success",showConfirmButton:!1,timer:1500})):await mR().fire({icon:"error",title:"Oops...",text:"import failed:"+t.error})}}),(0,Rc.jsx)("div",{className:"modal-action",children:(0,Rc.jsx)("form",{method:"dialog",children:(0,Rc.jsx)("button",{className:"btn",children:"Close"})})})]})})}),(0,Rc.jsx)(hR,{id:"ImportBackupDataIconID",size:"1.5rem",className:h+"cursor-pointer",onClick:()=>{document.getElementById("ImportBackupData_modal").showModal()}})]}),(0,Rc.jsx)("div",{className:"".concat(p," ").concat(r.toolboxAppOpenIconState?null:"hidden"),"data-tip":"Open toolbox",children:(0,Rc.jsx)("svg",{onClick:()=>{s(sr().cloneDeep(o.appCompOpenConfig)),o.updateAppCompOpenConfig({markdownAppOpen:!1,processAppOpen:!1,errorPageAppOpen:!1,toolboxAppOpen:!0}),r.updateToolboxAppOpenIconState(!1),c()},t:"1711625812241",className:h+"cursor-pointer ",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8023",width:"1.5rem",height:"1.5rem",children:(0,Rc.jsx)("path",{d:"M608 768h-192v-96H64v192a128 128 0 0 0 128 128h640a128 128 0 0 0 128-128v-192H608z m176-512H768V179.84a141.76 141.76 0 0 0-128-141.44 1354.56 1354.56 0 0 0-258.56 0A141.76 141.76 0 0 0 256 179.84V256h-16A208 208 0 0 0 32 464V608h384v-96h192v96h384v-144A208 208 0 0 0 784 256zM640 256h-256V179.84a14.4 14.4 0 0 1 12.8-14.4 1226.24 1226.24 0 0 1 230.4 0 14.4 14.4 0 0 1 12.8 14.4z",fill:"#231F20","p-id":"8024"})})}),(0,Rc.jsx)("div",{className:"".concat(p," ").concat(r.toolboxAppOpenIconState?"hidden":null),"data-tip":"Close toolbox",children:(0,Rc.jsx)("svg",{onClick:()=>{o.updateAppCompOpenConfig(i),r.updateToolboxAppOpenIconState(!0),c()},t:"1711627062940",className:h+"cursor-pointer "+"".concat(r.toolboxAppOpenIconState?"hidden":null),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8994",width:"1.5rem",height:"1.5rem",children:(0,Rc.jsx)("path",{d:"M509.262713 5.474574c281.272162 0 509.262713 228.02238 509.262713 509.262713 0 281.272162-227.990551 509.262713-509.262713 509.262713s-509.262713-227.990551-509.262713-509.262713c0-281.240333 227.990551-509.262713 509.262713-509.262713z m135.050106 278.725849L509.262713 419.250528l-135.050106-135.050105-90.012184 90.012184L419.186871 509.262713l-135.018277 135.081935 90.012184 90.012184L509.262713 599.274897l135.050106 135.050106 90.012184-90.012184L599.274897 509.262713l135.050106-135.050106-90.012184-90.012184z",fill:"#4B4B4B","p-id":"8995"})})})]})]}),(0,Rc.jsxs)("div",{className:"w-screen flex-auto  px-2  ",children:[(0,Rc.jsx)(dR,{}),(0,Rc.jsx)(yR,{}),(0,Rc.jsx)(Lz,{}),(0,Rc.jsx)(sU,{})]})]})})),lU=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:o,getFCP:r,getLCP:i,getTTFB:s}=t;n(e),o(e),r(e),i(e),s(e)}))};o.createRoot(document.getElementById("root")).render((0,Rc.jsx)(e.StrictMode,{children:(0,Rc.jsx)(aU,{})})),lU()})()})();
//# sourceMappingURL=main.18f63452.js.map